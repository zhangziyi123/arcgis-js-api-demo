/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
require({cache:{"url:dijit/templates/CheckedMenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitemcheckbox\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuItemIcon dijitCheckedMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\n\t\t<span class=\"dijitCheckedMenuItemIconChar\">&#10003;</span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,labelNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">&#160;</td>\n</tr>\n","esri/layers/FeatureEditResult":function(){define("esri/layers/FeatureEditResult",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_1,_2,_3,_4){var _5=_1(null,{declaredClass:"esri.layers.FeatureEditResult",constructor:function(_6){if(_6&&_2.isObject(_6)){this.objectId=_6.objectId;this.success=_6.success;if(!_6.success){var _7=_6.error;this.error=new Error();this.error.code=_7.code;this.error.message=_7.description;}}}});if(_3("extend-esri")){_2.setObject("layers.FeatureEditResult",_5,_4);}return _5;});},"dijit/form/TextBox":function(){require({cache:{"url:dijit/form/templates/TextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"}});define("dijit/form/TextBox",["dojo/_base/declare","dojo/dom-construct","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","dojo/sniff","./_FormValueWidget","./_TextBoxMixin","dojo/text!./templates/TextBox.html","../main"],function(_8,_9,_a,_b,_c,_d,_e,_f,_10,_11){var _12=_8("dijit.form.TextBox",[_e,_f],{templateString:_10,_singleNodeTemplate:"<input class=\"dijit dijitReset dijitLeft dijitInputField\" data-dojo-attach-point=\"textbox,focusNode\" autocomplete=\"off\" type=\"${type}\" ${!nameAttrSetting} />",_buttonInputDisabled:_d("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var _13=this.type.toLowerCase();if(this.templateString&&this.templateString.toLowerCase()=="input"||((_13=="hidden"||_13=="file")&&this.templateString==this.constructor.prototype.templateString)){this.templateString=this._singleNodeTemplate;}this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(_d("ie")<9){this.defer(function(){try{var s=_a.getComputedStyle(this.domNode);if(s){var ff=s.fontFamily;if(ff){var _14=this.domNode.getElementsByTagName("INPUT");if(_14){for(var i=0;i<_14.length;i++){_14[i].style.fontFamily=ff;}}}}}catch(e){}});}},_onInput:function(e){this.inherited(arguments);if(this.intermediateChanges){this.defer(function(){this._handleOnChange(this.get("value"),false);});}},_setPlaceHolderAttr:function(v){this._set("placeHolder",v);if(!this._phspan){this._attachPoints.push("_phspan");this._phspan=_9.create("span",{onmousedown:function(e){e.preventDefault();},className:"dijitPlaceHolder dijitInputField"},this.textbox,"after");}this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(v));this._updatePlaceHolder();},_updatePlaceHolder:function(){if(this._phspan){this._phspan.style.display=(this.placeHolder&&!this.focused&&!this.textbox.value)?"":"none";}},_setValueAttr:function(_15,_16,_17){this.inherited(arguments);this._updatePlaceHolder();},getDisplayedValue:function(){_b.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue");},setDisplayedValue:function(_18){_b.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",_18);},_onBlur:function(e){if(this.disabled){return;}this.inherited(arguments);this._updatePlaceHolder();if(_d("mozilla")){if(this.selectOnClick){this.textbox.selectionStart=this.textbox.selectionEnd=undefined;}}},_onFocus:function(by){if(this.disabled||this.readOnly){return;}this.inherited(arguments);this._updatePlaceHolder();}});if(_d("ie")){_12.prototype._isTextSelected=function(){var _19=this.ownerDocument.selection.createRange();var _1a=_19.parentElement();return _1a==this.textbox&&_19.text.length>0;};_11._setSelectionRange=_f._setSelectionRange=function(_1b,_1c,_1d){if(_1b.createTextRange){var r=_1b.createTextRange();r.collapse(true);r.moveStart("character",-99999);r.moveStart("character",_1c);r.moveEnd("character",_1d-_1c);r.select();}};}return _12;});},"esri/tasks/QueryTask":function(){define("esri/tasks/QueryTask",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/_base/json","dojo/has","esri/kernel","esri/request","esri/deferredUtils","esri/geometry/normalizeUtils","esri/tasks/Task","esri/tasks/FeatureSet"],function(_1e,_1f,_20,_21,_22,has,_23,_24,_25,_26,_27,_28){var _29=_1e(_27,{declaredClass:"esri.tasks.QueryTask",constructor:function(url,_2a){this._handler=_1f.hitch(this,this._handler);this._relationshipQueryHandler=_1f.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=_1f.hitch(this,this._executeForIdsHandler);this._countHandler=_1f.hitch(this,this._countHandler);this.source=_2a&&_2a.source;this.gdbVersion=_2a&&_2a.gdbVersion;},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},execute:function(_2b,_2c,_2d,_2e,_2f){var _30=_2f.assembly,_31=this._encode(_1f.mixin({},this._url.query,{f:"json"},_2b.toJson(_30&&_30[0]))),_32=this._handler,_33=this._errorHandler;if(this.source){var _34={source:this.source.toJson()};_31.layer=_22.toJson(_34);}if(this.gdbVersion){_31.gdbVersion=this.gdbVersion;}return _24({url:this._url.path+"/query",content:_31,callbackParamName:"callback",load:function(r,i){_32(r,i,_2c,_2d,_2f.dfd);},error:function(r){_33(r,_2d,_2f.dfd);},callbackSuffix:_2e});},executeRelationshipQuery:function(_35,_36,_37){var _38=this._encode(_1f.mixin({},this._url.query,{f:"json"},_35.toJson())),_39=this._relationshipQueryHandler,_3a=this._errorHandler;if(this.gdbVersion){_38.gdbVersion=this.gdbVersion;}var dfd=new _21(_25._dfdCanceller);dfd._pendingDfd=_24({url:this._url.path+"/queryRelatedRecords",content:_38,callbackParamName:"callback",load:function(r,i){_39(r,i,_36,_37,dfd);},error:function(r){_3a(r,_37,dfd);}});return dfd;},executeForIds:function(_3b,_3c,_3d,_3e){var _3f=_3e.assembly,_40=this._encode(_1f.mixin({},this._url.query,{f:"json",returnIdsOnly:true},_3b.toJson(_3f&&_3f[0]))),_41=this._executeForIdsHandler,_42=this._errorHandler;if(this.source){var _43={source:this.source.toJson()};_40.layer=_22.toJson(_43);}if(this.gdbVersion){_40.gdbVersion=this.gdbVersion;}return _24({url:this._url.path+"/query",content:_40,callbackParamName:"callback",load:function(r,i){_41(r,i,_3c,_3d,_3e.dfd);},error:function(r){_42(r,_3d,_3e.dfd);}});},executeForCount:function(_44,_45,_46,_47){var _48=_47.assembly,_49=this._encode(_1f.mixin({},this._url.query,{f:"json",returnIdsOnly:true,returnCountOnly:true},_44.toJson(_48&&_48[0]))),_4a=this._countHandler,_4b=this._errorHandler;if(this.source){var _4c={source:this.source.toJson()};_49.layer=_22.toJson(_4c);}if(this.gdbVersion){_49.gdbVersion=this.gdbVersion;}return _24({url:this._url.path+"/query",content:_49,callbackParamName:"callback",load:function(r,i){_4a(r,i,_45,_46,_47.dfd);},error:function(r){_4b(r,_46,_47.dfd);}});},_handler:function(_4d,io,_4e,_4f,dfd){try{var _50=new _28(_4d);this._successHandler([_50],"onComplete",_4e,dfd);}catch(err){this._errorHandler(err,_4f,dfd);}},_relationshipQueryHandler:function(_51,io,_52,_53,dfd){try{var gt=_51.geometryType,sr=_51.spatialReference,_54={};_20.forEach(_51.relatedRecordGroups,function(gr){var _55={};_55.geometryType=gt;_55.spatialReference=sr;_55.features=gr.relatedRecords;var _56=new _28(_55);_54[gr.objectId]=_56;});this._successHandler([_54],"onExecuteRelationshipQueryComplete",_52,dfd);}catch(err){this._errorHandler(err,_53,dfd);}},_executeForIdsHandler:function(_57,io,_58,_59,dfd){try{this._successHandler([_57.objectIds],"onExecuteForIdsComplete",_58,dfd);}catch(err){this._errorHandler(err,_59,dfd);}},_countHandler:function(_5a,io,_5b,_5c,dfd){try{var _5d,_5e=_5a.features,ids=_5a.objectIds;if(ids){_5d=ids.length;}else{if(_5e){throw new Error("Unable to perform query. Please check your parameters.");}else{_5d=_5a.count;}}this._successHandler([_5d],"onExecuteForCountComplete",_5b,dfd);}catch(err){this._errorHandler(err,_5c,dfd);}}});_26._createWrappers(_29);if(has("extend-esri")){_1f.setObject("tasks.QueryTask",_29,_23);}return _29;});},"esri/dijit/editing/tools/ToolBase":function(){define("esri/dijit/editing/tools/ToolBase",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","dojo/i18n!esri/nls/jsapi"],function(_5f,_60,has,_61,_62){var _63=_5f(null,{declaredClass:"esri.dijit.editing.tools.ToolBase",_enabled:true,showLabel:false,constructor:function(_64,_65){_64=_64||{};_60.mixin(this,_64);this.label=this._label?_62.widgets.editor.tools[this._label]:"";this._settings=_64.settings;this._toolbar=_64.settings.drawToolbar;this._editToolbar=_64.settings.editToolbar;this._initializeTool();},onFinished:function(){},onDrawEnd:function(){},onApplyEdits:function(){},postCreate:function(){this.deactivate();this.inherited(arguments);},destroy:function(){},activate:function(_66){if(this._toolbar){this._toolbar.deactivate();}if(this._editToolbar){this._editToolbar.deactivate();}if(!this._enabled){return;}this._checked=true;this._layer=_66;if(this._toolbar&&this._drawType){this._toolbar.activate(this._drawType);}},deactivate:function(){if(this._toolbar){this._toolbar.deactivate();}if(this._editToolbar){this._editToolbar.deactivate();}this.setChecked(false);this._updateUI();},setEnabled:function(_67){this._enabled=_67;this._updateUI();},setChecked:function(_68){this._checked=_68;},enable:function(_69){this._updateUI();},isEnabled:function(){return this._enabled;},getToolName:function(){return this._toolName;},_initializeTool:function(){},_updateUI:function(){this.disabled=!this._enabled;this.attr("iconClass",this._enabled?this._enabledIcon:this._disabledIcon);}});if(has("extend-esri")){_60.setObject("dijit.editing.tools.ToolBase",_63,_61);}return _63;});},"esri/dijit/editing/SelectionHelper":function(){define("esri/dijit/editing/SelectionHelper",["dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/has","dojo/DeferredList","esri/geometry/Extent","esri/geometry/Point","esri/geometry/ScreenPoint","esri/layers/FeatureLayer","esri/tasks/query","esri/kernel"],function(_6a,_6b,_6c,_6d,has,_6e,_6f,_70,_71,_72,_73,_74){var SH=_6a(null,{declaredClass:"esri.dijit.editing.SelectionHelper",constructor:function(_75){this._settings=_75||{};this._sConnects=[];this._mapServiceCount=0;this._map=this._settings.map;this._tolerance=this._settings.singleSelectionTolerance;this._initMapServiceInfos(this._settings.layers);},destroy:function(){var _76;for(_76 in this._sConnects){if(this._sConnects.hasOwnProperty(_76)){_76.disconnect(this._sConnects[_76]);}}},selectFeatures:function(_77,_78,_79,_7a){if(_79===_72.SELECTION_NEW){this._resetMapServiceInfos();this.getSelection(_77);}var _7b=[];_6d.forEach(_77,function(_7c){if(_7c.visible===true&&_7c._isMapAtVisibleScale()===true){var _7d=_79;if(_7c._isSelOnly&&_7d===_72.SELECTION_NEW){_7d=_72.SELECTION_ADD;}_7b.push(_7c.selectFeatures(_78,_7d));}});var _7e=new _6e(_7b);_7e.addCallback(_6b.hitch(this,function(_7f){var _80=[];_6d.forEach(_7f,function(set,idx){_6d.forEach(set[1],function(_81){var _82=_81.attributes[_77[idx].objectIdField];_81=_77[idx]._mode._getFeature(_82)||null;if(_81){_80.push(_81);}},this);},this);if(!this._mapServiceCount){_7a(_80);return;}var _83=_79===_72.SELECTION_SUBTRACT;if(_83){this._resetMapServiceInfos();this._createLayerDefs(this._getLayerInfosFromSelection(_77));}else{this._createLayerDefs(this._getLayerInfosFromFeatures(_80));}this._updateLayerDefs(this._mapServiceInfos,false,!((_80&&_80.length)||_83),_6b.hitch(this,_7a,_80));}));},selectFeaturesByGeometry:function(_84,_85,_86,_87){var _88=_85;if(_85.declaredClass.indexOf("Extent")!==-1){if(_85.xmax===_85.xmin&&_85.ymax===_85.ymin){_88=new _70(_85.xmax,_85.ymax,_85.spatialReference);}}_88=(_88.declaredClass.indexOf("Point")!==-1)?this._extentFromPoint(_88):_88;var _89=new _73();_89.geometry=_88;this.selectFeatures(_84,_89,_86,_87);},clearSelection:function(_8a){var _8b=this._nonSelOnlyLayers;_6d.forEach(_8b,function(_8c){if(_8c.clearSelection){_8c.clearSelection();}});if(!this._mapServiceCount){return;}this._resetMapServiceInfos();var _8d=this._getLayerInfosFromSelection(this._settings.layers);var _8e=_6d.some(_8d,function(_8f){return _8f.oids&&_8f.oids.length;});if(_8e){this._createLayerDefs(_8d);this._updateLayerDefs(this._mapServiceInfos,true,_8a||false);}},findMapService:function(_90){var map=this._map,_91=map.layerIds,_92=(_90&&_90._url)?_90._url.path.toLowerCase():"",_93,_94,_95;for(_94 in _91){if(_91.hasOwnProperty(_94)){_93=map.getLayer(_91[_94]);_95=_93._url?_93._url.path.toLowerCase().replace("mapserver","featureserver"):"";if(_92.substr(0,_95.length)===_95&&_93.declaredClass==="esri.layers.ArcGISDynamicMapServiceLayer"){return _93;}}}},getSelection:function(_96){var _97=[];_6d.forEach(_96,function(_98){if(_98._isSelOnly){_97.push(this._createLayerInfo(_98));}},this);_6d.forEach(_97,function(_99){var _9a=this._createMapServiceInfo(this.findMapService(_99.layer));if(_9a){_9a.layerInfos[_99.layer.layerId]=_99;}},this);},_initMapServiceInfos:function(_9b){this._nonSelOnlyLayers=[];this._mapServiceInfos=[];_6d.forEach(_9b,function(_9c){var _9d=this.findMapService(_9c);if(_9d){this._mapServiceCount++;this._createMapServiceInfo(_9d);if(_9d){_9d.setDisableClientCaching(true);}}else{this._nonSelOnlyLayers.push(_9c);}},this);},_createMapServiceInfo:function(_9e){if(!_9e){return null;}var _9f=this._mapServiceInfos;var _a0=_9f[_9e.id];if(!_a0){_a0=_9f[_9e.id]={mapService:_9e,layerInfos:[],layerDefs:_6b.mixin([],_9e.layerDefinitions||[]),origLayerDefs:_6b.mixin([],_9e.layerDefinitions||[])};}return _a0;},_resetMapServiceInfo:function(_a1){_6d.forEach(_a1.layerInfos,this._resetLayerInfo);_a1.layerDefs=_6b.mixin([],_a1.origLayerDefs||[]);},_resetMapServiceInfos:function(){var _a2=this._mapServiceInfos,_a3;for(_a3 in _a2){if(_a2.hasOwnProperty(_a3)){this._resetMapServiceInfo(_a2[_a3]);}}},_createLayerInfo:function(_a4,_a5){var _a6=_a4.objectIdField;var _a7=_a5?[]:_a4.getSelectedFeatures();return {layer:_a4,selectedFeatures:_a7||[],oids:_6d.map(_a7,function(_a8){return _a8.attributes[_a6];})};},_resetLayerInfo:function(_a9){if(!_a9){return;}_a9.selectedFeatures=[];_a9.oids=[];},_updateLayerDefs:function(_aa,_ab,_ac,_ad){var _ae;for(_ae in _aa){if(_aa.hasOwnProperty(_ae)){var _af=_aa[_ae];var _b0=_af.mapService;var _b1=_af.layerDefs=(_ab?_6b.mixin([],_af.origLayerDefs||[]):_af.layerDefs);if(_b1){if(!_ac){this._sConnects[_b0.id]=(_6c.connect(_b0,"onUpdateEnd",_6b.hitch(this,"_onMapServiceUpdate",_af,_ab,_ad)));}else{if(_ad){_ad();}}_b0.setLayerDefinitions(_b1,_ac||false);}else{if(_ad){_ad();}}}}},_onMapServiceUpdate:function(_b2,_b3,_b4){_6c.disconnect(this._sConnects[_b2.mapService.id]);_6d.forEach(_b2.layerInfos,function(_b5){if(_b3){if(_b5){_b5.layer.clearSelection();}}else{var _b6=new _73();_b6.objectIds=_b5?_b5.oids:[];if(_b6.objectIds.length){_b5.layer.selectFeatures(_b6,_72.SELECTION_SUBTRACT);}}},this);if(_b3){this._resetMapServiceInfo(_b2);}if(_b4){_b4();}},_createLayerDefs:function(_b7){_6d.forEach(_b7,function(_b8){var _b9=_b8.layer;var _ba=this._createMapServiceInfo(this.findMapService(_b8.layer));if(!_ba){return;}var _bb=_ba.mapService;var _bc=_ba.layerDefs;var _bd=_b9.objectIdField;var _be=_b9.layerId;var _bf="(\""+_bd+"\" NOT IN (";var _c0=_b8.oids;if(_c0&&_c0.length){_6d.forEach(_b8.oids,function(oid,idx){_c0=true;if(idx){_bf+=",";}_bf+="'"+oid+"'";});_bf+="))";if(_bc.length&&(_bc[_be]&&_bc[_be].length)){_bc[_be]+=" AND"+_bf;}else{_bc[_be]=_bf;}}},this);},_getLayerInfosFromFeatures:function(_c1){var _c2=[];_6d.forEach(_c1,function(_c3){var _c4=_c3.getLayer();if(_c4&&_c4._isSelOnly){if(!_c2[_c4.id]){_c2[_c4.id]=this._createLayerInfo(_c4,true);}_c2[_c4.id].selectedFeatures.push(_c3);_c2[_c4.id].oids.push(_c3.attributes[_c4.objectIdField]);}},this);var _c5=[],_c6;for(_c6 in _c2){if(_c2.hasOwnProperty(_c6)){_c5.push(_c2[_c6]);}}return _c5;},_getLayerInfosFromSelection:function(_c7){var _c8=[];_6d.forEach(_c7,function(_c9){if(_c9._isSelOnly){_c8.push(this._createLayerInfo(_c9,false));}},this);return _c8;},_extentFromPoint:function(_ca){var _cb=this._tolerance;var map=this._map;var _cc=map.toScreen(_ca);var _cd=new _71(_cc.x-_cb,_cc.y+_cb);var _ce=new _71(_cc.x+_cb,_cc.y-_cb);var _cf=map.toMap(_cd);var _d0=map.toMap(_ce);return new _6f(_cf.x,_cf.y,_d0.x,_d0.y,map.spatialReference);}});if(has("extend-esri")){_6b.setObject("dijit.editing.SelectionHelper",SH,_74);}return SH;});},"dojox/grid/DataGrid":function(){define("dojox/grid/DataGrid",["../main","dojo/_base/array","dojo/_base/lang","dojo/_base/json","dojo/_base/sniff","dojo/_base/declare","./_Grid","./DataSelection","dojo/_base/html"],function(_d1,_d2,_d3,_d4,has,_d5,_d6,_d7,_d8){var _d9=_d5("dojox.grid.DataGrid",_d6,{store:null,query:null,queryOptions:null,fetchText:"...",sortFields:null,updateDelay:1,items:null,_store_connects:null,_by_idty:null,_by_idx:null,_cache:null,_pages:null,_pending_requests:null,_bop:-1,_eop:-1,_requests:0,rowCount:0,_isLoaded:false,_isLoading:false,keepSelection:false,postCreate:function(){this._pages=[];this._store_connects=[];this._by_idty={};this._by_idx=[];this._cache=[];this._pending_requests={};this._setStore(this.store);this.inherited(arguments);},destroy:function(){this.selection.destroy();this.inherited(arguments);},createSelection:function(){this.selection=new _d7(this);},get:function(_da,_db){if(_db&&this.field=="_item"&&!this.fields){return _db;}else{if(_db&&this.fields){var ret=[];var s=this.grid.store;_d2.forEach(this.fields,function(f){ret=ret.concat(s.getValues(_db,f));});return ret;}else{if(!_db&&typeof _da==="string"){return this.inherited(arguments);}}}return (!_db?this.defaultValue:(!this.field?this.value:(this.field=="_item"?_db:this.grid.store.getValue(_db,this.field))));},_checkUpdateStatus:function(){if(this.updateDelay>0){var _dc=false;if(this._endUpdateDelay){clearTimeout(this._endUpdateDelay);delete this._endUpdateDelay;_dc=true;}if(!this.updating){this.beginUpdate();_dc=true;}if(_dc){var _dd=this;this._endUpdateDelay=setTimeout(function(){delete _dd._endUpdateDelay;_dd.endUpdate();},this.updateDelay);}}},_onSet:function(_de,_df,_e0,_e1){this._checkUpdateStatus();var idx=this.getItemIndex(_de);if(idx>-1){this.updateRow(idx);}},_createItem:function(_e2,_e3){var _e4=this._hasIdentity?this.store.getIdentity(_e2):_d4.toJson(this.query)+":idx:"+_e3+":sort:"+_d4.toJson(this.getSortProps());var o=this._by_idty[_e4]={idty:_e4,item:_e2};return o;},_addItem:function(_e5,_e6,_e7){this._by_idx[_e6]=this._createItem(_e5,_e6);if(!_e7){this.updateRow(_e6);}},_onNew:function(_e8,_e9){this._checkUpdateStatus();var _ea=this.get("rowCount");this._addingItem=true;this.updateRowCount(_ea+1);this._addingItem=false;this._addItem(_e8,_ea);this.showMessage();},_onDelete:function(_eb){this._checkUpdateStatus();var idx=this._getItemIndex(_eb,true);if(idx>=0){this._pages=[];this._bop=-1;this._eop=-1;var o=this._by_idx[idx];this._by_idx.splice(idx,1);delete this._by_idty[o.idty];this.updateRowCount(this.get("rowCount")-1);if(this.get("rowCount")===0){this.showMessage(this.noDataMessage);}}if(this.selection.isSelected(idx)){this.selection.deselect(idx);this.selection.selected.splice(idx,1);}},_onRevert:function(){this._refresh();},setStore:function(_ec,_ed,_ee){if(this._requestsPending(0)){return;}this._setQuery(_ed,_ee);this._setStore(_ec);this._refresh(true);},setQuery:function(_ef,_f0){if(this._requestsPending(0)){return;}this._setQuery(_ef,_f0);this._refresh(true);},setItems:function(_f1){this.items=_f1;this._setStore(this.store);this._refresh(true);},_setQuery:function(_f2,_f3){this.query=_f2;this.queryOptions=_f3||this.queryOptions;},_setStore:function(_f4){if(this.store&&this._store_connects){_d2.forEach(this._store_connects,this.disconnect,this);}this.store=_f4;if(this.store){var f=this.store.getFeatures();var h=[];this._canEdit=!!f["dojo.data.api.Write"]&&!!f["dojo.data.api.Identity"];this._hasIdentity=!!f["dojo.data.api.Identity"];if(!!f["dojo.data.api.Notification"]&&!this.items){h.push(this.connect(this.store,"onSet","_onSet"));h.push(this.connect(this.store,"onNew","_onNew"));h.push(this.connect(this.store,"onDelete","_onDelete"));}if(this._canEdit){h.push(this.connect(this.store,"revert","_onRevert"));}this._store_connects=h;}},_onFetchBegin:function(_f5,req){if(!this.scroller){return;}if(this.rowCount!=_f5){if(req.isRender){this.scroller.init(_f5,this.keepRows,this.rowsPerPage);this.rowCount=_f5;this._setAutoHeightAttr(this.autoHeight,true);this._skipRowRenormalize=true;this.prerender();this._skipRowRenormalize=false;}else{this.updateRowCount(_f5);}}if(!_f5){this.views.render();this._resize();this.showMessage(this.noDataMessage);this.focus.initFocusView();}else{this.showMessage();}},_onFetchComplete:function(_f6,req){if(!this.scroller){return;}if(_f6&&_f6.length>0){_d2.forEach(_f6,function(_f7,idx){this._addItem(_f7,req.start+idx,true);},this);this.updateRows(req.start,_f6.length);if(req.isRender){this.setScrollTop(0);this.postrender();}else{if(this._lastScrollTop){this.setScrollTop(this._lastScrollTop);}}if(has("ie")){_d8.setSelectable(this.domNode,this.selectable);}}delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=false;this._isLoaded=true;}this._pending_requests[req.start]=false;},_onFetchError:function(err,req){console.log(err);delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=false;this._isLoaded=true;this.showMessage(this.errorMessage);}this._pending_requests[req.start]=false;this.onFetchError(err,req);},onFetchError:function(err,req){},_fetch:function(_f8,_f9){_f8=_f8||0;if(this.store&&!this._pending_requests[_f8]){if(!this._isLoaded&&!this._isLoading){this._isLoading=true;this.showMessage(this.loadingMessage);}this._pending_requests[_f8]=true;try{if(this.items){var _fa=this.items;var _fb=this.store;this.rowsPerPage=_fa.length;var req={start:_f8,count:this.rowsPerPage,isRender:_f9};this._onFetchBegin(_fa.length,req);var _fc=0;_d2.forEach(_fa,function(i){if(!_fb.isItemLoaded(i)){_fc++;}});if(_fc===0){this._onFetchComplete(_fa,req);}else{var _fd=function(_fe){_fc--;if(_fc===0){this._onFetchComplete(_fa,req);}};_d2.forEach(_fa,function(i){if(!_fb.isItemLoaded(i)){_fb.loadItem({item:i,onItem:_fd,scope:this});}},this);}}else{this.store.fetch({start:_f8,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:_f9,onBegin:_d3.hitch(this,"_onFetchBegin"),onComplete:_d3.hitch(this,"_onFetchComplete"),onError:_d3.hitch(this,"_onFetchError")});}}catch(e){this._onFetchError(e,{start:_f8,count:this.rowsPerPage});}}},_clearData:function(){this.updateRowCount(0);this._by_idty={};this._by_idx=[];this._pages=[];this._bop=this._eop=-1;this._isLoaded=false;this._isLoading=false;},getItem:function(idx){var _ff=this._by_idx[idx];if(!_ff||(_ff&&!_ff.item)){this._preparePage(idx);return null;}return _ff.item;},getItemIndex:function(item){return this._getItemIndex(item,false);},_getItemIndex:function(item,_100){if(!_100&&!this.store.isItem(item)){return -1;}var idty=this._hasIdentity?this.store.getIdentity(item):null;for(var i=0,l=this._by_idx.length;i<l;i++){var d=this._by_idx[i];if(d&&((idty&&d.idty==idty)||(d.item===item))){return i;}}return -1;},filter:function(_101,_102){this.query=_101;if(_102){this._clearData();}this._fetch();},_getItemAttr:function(idx,attr){var item=this.getItem(idx);return (!item?this.fetchText:this.store.getValue(item,attr));},_render:function(){if(this.domNode.parentNode){this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();this._fetch(0,true);}},_requestsPending:function(_103){return this._pending_requests[_103];},_rowToPage:function(_104){return (this.rowsPerPage?Math.floor(_104/this.rowsPerPage):_104);},_pageToRow:function(_105){return (this.rowsPerPage?this.rowsPerPage*_105:_105);},_preparePage:function(_106){if((_106<this._bop||_106>=this._eop)&&!this._addingItem){var _107=this._rowToPage(_106);this._needPage(_107);this._bop=_107*this.rowsPerPage;this._eop=this._bop+(this.rowsPerPage||this.get("rowCount"));}},_needPage:function(_108){if(!this._pages[_108]){this._pages[_108]=true;this._requestPage(_108);}},_requestPage:function(_109){var row=this._pageToRow(_109);var _10a=Math.min(this.rowsPerPage,this.get("rowCount")-row);if(_10a>0){this._requests++;if(!this._requestsPending(row)){setTimeout(_d3.hitch(this,"_fetch",row,false),1);}}},getCellName:function(_10b){return _10b.field;},_refresh:function(_10c){this._clearData();this._fetch(0,_10c);},sort:function(){this.edit.apply();this._lastScrollTop=this.scrollTop;this._refresh();},canSort:function(){return (!this._isLoading);},getSortProps:function(){var c=this.getCell(this.getSortIndex());if(!c){if(this.sortFields){return this.sortFields;}return null;}else{var desc=c["sortDesc"];var si=!(this.sortInfo>0);if(typeof desc=="undefined"){desc=si;}else{desc=si?!desc:desc;}return [{attribute:c.field,descending:desc}];}},styleRowState:function(_10d){if(this.store&&this.store.getState){var _10e=this.store.getState(_10d.index),c="";for(var i=0,ss=["inflight","error","inserting"],s;s=ss[i];i++){if(_10e[s]){c=" dojoxGridRow-"+s;break;}}_10d.customClasses+=c;}},onStyleRow:function(_10f){this.styleRowState(_10f);this.inherited(arguments);},canEdit:function(_110,_111){return this._canEdit;},_copyAttr:function(idx,attr){var row={};var _112={};var src=this.getItem(idx);return this.store.getValue(src,attr);},doStartEdit:function(_113,_114){if(!this._cache[_114]){this._cache[_114]=this._copyAttr(_114,_113.field);}this.onStartEdit(_113,_114);},doApplyCellEdit:function(_115,_116,_117){this.store.fetchItemByIdentity({identity:this._by_idx[_116].idty,onItem:_d3.hitch(this,function(item){var _118=this.store.getValue(item,_117);if(typeof _118=="number"){_115=isNaN(_115)?_115:parseFloat(_115);}else{if(typeof _118=="boolean"){_115=_115=="true"?true:_115=="false"?false:_115;}else{if(_118 instanceof Date){var _119=new Date(_115);_115=isNaN(_119.getTime())?_115:_119;}}}this.store.setValue(item,_117,_115);this.onApplyCellEdit(_115,_116,_117);})});},doCancelEdit:function(_11a){var _11b=this._cache[_11a];if(_11b){this.updateRow(_11a);delete this._cache[_11a];}this.onCancelEdit.apply(this,arguments);},doApplyEdit:function(_11c,_11d){var _11e=this._cache[_11c];this.onApplyEdit(_11c);},removeSelectedRows:function(){if(this._canEdit){this.edit.apply();var fx=_d3.hitch(this,function(_11f){if(_11f.length){_d2.forEach(_11f,this.store.deleteItem,this.store);this.selection.clear();}});if(this.allItemsSelected){this.store.fetch({query:this.query,queryOptions:this.queryOptions,onComplete:fx});}else{fx(this.selection.getSelected());}}}});_d9.cell_markupFactory=function(_120,node,_121){var _122=_d3.trim(_d8.attr(node,"field")||"");if(_122){_121.field=_122;}_121.field=_121.field||_121.name;var _123=_d3.trim(_d8.attr(node,"fields")||"");if(_123){_121.fields=_123.split(",");}if(_120){_120(node,_121);}};_d9.markupFactory=function(_124,node,ctor,_125){return _d6.markupFactory(_124,node,ctor,_d3.partial(_d9.cell_markupFactory,_125));};return _d9;});},"dijit/_TemplatedMixin":function(){define("dijit/_TemplatedMixin",["dojo/_base/lang","dojo/touch","./_WidgetBase","dojo/string","dojo/cache","dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/sniff","dojo/_base/unload"],function(lang,_126,_127,_128,_129,_12a,_12b,_12c,has,_12d){var _12e=_12b("dijit._TemplatedMixin",null,{templateString:null,templatePath:null,_skipNodeCache:false,_earlyTemplatedStartup:false,constructor:function(){this._attachPoints=[];this._attachEvents=[];},_stringRepl:function(tmpl){var _12f=this.declaredClass,_130=this;return _128.substitute(tmpl,this,function(_131,key){if(key.charAt(0)=="!"){_131=lang.getObject(key.substr(1),false,_130);}if(typeof _131=="undefined"){throw new Error(_12f+" template:"+key);}if(_131==null){return "";}return key.charAt(0)=="!"?_131:_131.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){if(!this.templateString){this.templateString=_129(this.templatePath,{sanitize:true});}var _132=_12e.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);var node;if(lang.isString(_132)){node=_12c.toDom(this._stringRepl(_132),this.ownerDocument);if(node.nodeType!=1){throw new Error("Invalid template: "+_132);}}else{node=_132.cloneNode(true);}this.domNode=node;this.inherited(arguments);this._attachTemplateNodes(node,function(n,p){return n.getAttribute(p);});this._beforeFillContent();this._fillContent(this.srcNodeRef);},_beforeFillContent:function(){},_fillContent:function(_133){var dest=this.containerNode;if(_133&&dest){while(_133.hasChildNodes()){dest.appendChild(_133.firstChild);}}},_attachTemplateNodes:function(_134,_135){var _136=lang.isArray(_134)?_134:(_134.all||_134.getElementsByTagName("*"));var x=lang.isArray(_134)?0:-1;for(;x<0||_136[x];x++){var _137=(x==-1)?_134:_136[x];if(this.widgetsInTemplate&&(_135(_137,"dojoType")||_135(_137,"data-dojo-type"))){continue;}var _138=_135(_137,"dojoAttachPoint")||_135(_137,"data-dojo-attach-point");if(_138){var _139,_13a=_138.split(/\s*,\s*/);while((_139=_13a.shift())){if(lang.isArray(this[_139])){this[_139].push(_137);}else{this[_139]=_137;}this._attachPoints.push(_139);}}var _13b=_135(_137,"dojoAttachEvent")||_135(_137,"data-dojo-attach-event");if(_13b){var _13c,_13d=_13b.split(/\s*,\s*/);var trim=lang.trim;while((_13c=_13d.shift())){if(_13c){var _13e=null;if(_13c.indexOf(":")!=-1){var _13f=_13c.split(":");_13c=trim(_13f[0]);_13e=trim(_13f[1]);}else{_13c=trim(_13c);}if(!_13e){_13e=_13c;}this._attachEvents.push(this.connect(_137,_126[_13c]||_13c,_13e));}}}}},destroyRendering:function(){_12a.forEach(this._attachPoints,function(_140){delete this[_140];},this);this._attachPoints=[];_12a.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments);}});_12e._templateCache={};_12e.getCachedTemplate=function(_141,_142,doc){var _143=_12e._templateCache;var key=_141;var _144=_143[key];if(_144){try{if(!_144.ownerDocument||_144.ownerDocument==(doc||document)){return _144;}}catch(e){}_12c.destroy(_144);}_141=_128.trim(_141);if(_142||_141.match(/\$\{([^\}]+)\}/g)){return (_143[key]=_141);}else{var node=_12c.toDom(_141,doc);if(node.nodeType!=1){throw new Error("Invalid template: "+_141);}return (_143[key]=node);}};if(has("ie")){_12d.addOnWindowUnload(function(){var _145=_12e._templateCache;for(var key in _145){var _146=_145[key];if(typeof _146=="object"){_12c.destroy(_146);}delete _145[key];}});}lang.extend(_127,{dojoAttachEvent:"",dojoAttachPoint:""});return _12e;});},"dojox/grid/_FocusManager":function(){define("dojox/grid/_FocusManager",["dojo/_base/array","dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojo/_base/event","dojo/_base/sniff","dojo/query","./util","dojo/_base/html"],function(_147,lang,_148,_149,_14a,has,_14b,util,html){return _148("dojox.grid._FocusManager",null,{constructor:function(_14c){this.grid=_14c;this.cell=null;this.rowIndex=-1;this._connects=[];this._headerConnects=[];this.headerMenu=this.grid.headerMenu;this._connects.push(_149.connect(this.grid.domNode,"onfocus",this,"doFocus"));this._connects.push(_149.connect(this.grid.domNode,"onblur",this,"doBlur"));this._connects.push(_149.connect(this.grid.domNode,"mousedown",this,"_mouseDown"));this._connects.push(_149.connect(this.grid.domNode,"mouseup",this,"_mouseUp"));this._connects.push(_149.connect(this.grid.domNode,"oncontextmenu",this,"doContextMenu"));this._connects.push(_149.connect(this.grid.lastFocusNode,"onfocus",this,"doLastNodeFocus"));this._connects.push(_149.connect(this.grid.lastFocusNode,"onblur",this,"doLastNodeBlur"));this._connects.push(_149.connect(this.grid,"_onFetchComplete",this,"_delayedCellFocus"));this._connects.push(_149.connect(this.grid,"postrender",this,"_delayedHeaderFocus"));},destroy:function(){_147.forEach(this._connects,_149.disconnect);_147.forEach(this._headerConnects,_149.disconnect);delete this.grid;delete this.cell;},_colHeadNode:null,_colHeadFocusIdx:null,_contextMenuBindNode:null,tabbingOut:false,focusClass:"dojoxGridCellFocus",focusView:null,initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()||this.focusView||this.grid.views.views[0];this._initColumnHeaders();},isFocusCell:function(_14d,_14e){return (this.cell==_14d)&&(this.rowIndex==_14e);},isLastFocusCell:function(){if(this.cell){return (this.rowIndex==this.grid.rowCount-1)&&(this.cell.index==this.grid.layout.cellCount-1);}return false;},isFirstFocusCell:function(){if(this.cell){return (this.rowIndex===0)&&(this.cell.index===0);}return false;},isNoFocusCell:function(){return (this.rowIndex<0)||!this.cell;},isNavHeader:function(){return (!!this._colHeadNode);},getHeaderIndex:function(){if(this._colHeadNode){return _147.indexOf(this._findHeaderCells(),this._colHeadNode);}else{return -1;}},_focusifyCellNode:function(_14f){var n=this.cell&&this.cell.getNode(this.rowIndex);if(n){html.toggleClass(n,this.focusClass,_14f);if(_14f){var sl=this.scrollIntoView();try{if(has("webkit")||!this.grid.edit.isEditing()){util.fire(n,"focus");if(sl){this.cell.view.scrollboxNode.scrollLeft=sl;}}}catch(e){}}}},_delayedCellFocus:function(){if(this.isNavHeader()||!this.grid.focused){return;}var n=this.cell&&this.cell.getNode(this.rowIndex);if(n){try{if(!this.grid.edit.isEditing()){html.toggleClass(n,this.focusClass,true);if(this._colHeadNode){this.blurHeader();}util.fire(n,"focus");}}catch(e){}}},_delayedHeaderFocus:function(){if(this.isNavHeader()){this.focusHeader();}},_initColumnHeaders:function(){_147.forEach(this._headerConnects,_149.disconnect);this._headerConnects=[];var _150=this._findHeaderCells();for(var i=0;i<_150.length;i++){this._headerConnects.push(_149.connect(_150[i],"onfocus",this,"doColHeaderFocus"));this._headerConnects.push(_149.connect(_150[i],"onblur",this,"doColHeaderBlur"));}},_findHeaderCells:function(){var _151=_14b("th",this.grid.viewsHeaderNode);var _152=[];for(var i=0;i<_151.length;i++){var _153=_151[i];var _154=html.hasAttr(_153,"tabIndex");var _155=html.attr(_153,"tabIndex");if(_154&&_155<0){_152.push(_153);}}return _152;},_setActiveColHeader:function(_156,_157,_158){this.grid.domNode.setAttribute("aria-activedescendant",_156.id);if(_158!=null&&_158>=0&&_158!=_157){html.toggleClass(this._findHeaderCells()[_158],this.focusClass,false);}html.toggleClass(_156,this.focusClass,true);this._colHeadNode=_156;this._colHeadFocusIdx=_157;this._scrollHeader(this._colHeadFocusIdx);},scrollIntoView:function(){var info=(this.cell?this._scrollInfo(this.cell):null);if(!info||!info.s){return null;}var rt=this.grid.scroller.findScrollTop(this.rowIndex);if(info.n&&info.sr){if(info.n.offsetLeft+info.n.offsetWidth>info.sr.l+info.sr.w){info.s.scrollLeft=info.n.offsetLeft+info.n.offsetWidth-info.sr.w;}else{if(info.n.offsetLeft<info.sr.l){info.s.scrollLeft=info.n.offsetLeft;}}}if(info.r&&info.sr){if(rt+info.r.offsetHeight>info.sr.t+info.sr.h){this.grid.setScrollTop(rt+info.r.offsetHeight-info.sr.h);}else{if(rt<info.sr.t){this.grid.setScrollTop(rt);}}}return info.s.scrollLeft;},_scrollInfo:function(cell,_159){if(cell){var cl=cell,sbn=cl.view.scrollboxNode,sbnr={w:sbn.clientWidth,l:sbn.scrollLeft,t:sbn.scrollTop,h:sbn.clientHeight},rn=cl.view.getRowNode(this.rowIndex);return {c:cl,s:sbn,sr:sbnr,n:(_159?_159:cell.getNode(this.rowIndex)),r:rn};}return null;},_scrollHeader:function(_15a){var info=null;if(this._colHeadNode){var cell=this.grid.getCell(_15a);if(!cell){return;}info=this._scrollInfo(cell,cell.getNode(0));}if(info&&info.s&&info.sr&&info.n){var _15b=info.sr.l+info.sr.w;if(info.n.offsetLeft+info.n.offsetWidth>_15b){info.s.scrollLeft=info.n.offsetLeft+info.n.offsetWidth-info.sr.w;}else{if(info.n.offsetLeft<info.sr.l){info.s.scrollLeft=info.n.offsetLeft;}else{if(has("ie")<=7&&cell&&cell.view.headerNode){cell.view.headerNode.scrollLeft=info.s.scrollLeft;}}}}},_isHeaderHidden:function(){var _15c=this.focusView;if(!_15c){for(var i=0,_15d;(_15d=this.grid.views.views[i]);i++){if(_15d.headerNode){_15c=_15d;break;}}}return (_15c&&html.getComputedStyle(_15c.headerNode).display=="none");},colSizeAdjust:function(e,_15e,_15f){var _160=this._findHeaderCells();var view=this.focusView;if(!view||!view.header.tableMap.map){for(var i=0,_161;(_161=this.grid.views.views[i]);i++){if(_161.header.tableMap.map){view=_161;break;}}}var _162=_160[_15e];if(!view||(_15e==_160.length-1&&_15e===0)){return;}view.content.baseDecorateEvent(e);e.cellNode=_162;e.cellIndex=view.content.getCellNodeIndex(e.cellNode);e.cell=(e.cellIndex>=0?this.grid.getCell(e.cellIndex):null);if(view.header.canResize(e)){var _163={l:_15f};var drag=view.header.colResizeSetup(e,false);view.header.doResizeColumn(drag,null,_163);view.update();}},styleRow:function(_164){return;},setFocusIndex:function(_165,_166){this.setFocusCell(this.grid.getCell(_166),_165);},setFocusCell:function(_167,_168){if(_167&&!this.isFocusCell(_167,_168)){this.tabbingOut=false;if(this._colHeadNode){this.blurHeader();}this._colHeadNode=this._colHeadFocusIdx=null;this.focusGridView();this._focusifyCellNode(false);this.cell=_167;this.rowIndex=_168;this._focusifyCellNode(true);}if(has("opera")){setTimeout(lang.hitch(this.grid,"onCellFocus",this.cell,this.rowIndex),1);}else{this.grid.onCellFocus(this.cell,this.rowIndex);}},next:function(){if(this.cell){var row=this.rowIndex,col=this.cell.index+1,cc=this.grid.layout.cellCount-1,rc=this.grid.rowCount-1;if(col>cc){col=0;row++;}if(row>rc){col=cc;row=rc;}if(this.grid.edit.isEditing()){var _169=this.grid.getCell(col);if(!this.isLastFocusCell()&&(!_169.editable||this.grid.canEdit&&!this.grid.canEdit(_169,row))){this.cell=_169;this.rowIndex=row;this.next();return;}}this.setFocusIndex(row,col);}},previous:function(){if(this.cell){var row=(this.rowIndex||0),col=(this.cell.index||0)-1;if(col<0){col=this.grid.layout.cellCount-1;row--;}if(row<0){row=0;col=0;}if(this.grid.edit.isEditing()){var _16a=this.grid.getCell(col);if(!this.isFirstFocusCell()&&!_16a.editable){this.cell=_16a;this.rowIndex=row;this.previous();return;}}this.setFocusIndex(row,col);}},move:function(_16b,_16c){var _16d=_16c<0?-1:1;if(this.isNavHeader()){var _16e=this._findHeaderCells();var _16f=currentIdx=_147.indexOf(_16e,this._colHeadNode);currentIdx+=_16c;while(currentIdx>=0&&currentIdx<_16e.length&&_16e[currentIdx].style.display=="none"){currentIdx+=_16d;}if((currentIdx>=0)&&(currentIdx<_16e.length)){this._setActiveColHeader(_16e[currentIdx],currentIdx,_16f);}}else{if(this.cell){var sc=this.grid.scroller,r=this.rowIndex,rc=this.grid.rowCount-1,row=Math.min(rc,Math.max(0,r+_16b));if(_16b){if(_16b>0){if(row>sc.getLastPageRow(sc.page)){this.grid.setScrollTop(this.grid.scrollTop+sc.findScrollTop(row)-sc.findScrollTop(r));}}else{if(_16b<0){if(row<=sc.getPageRow(sc.page)){this.grid.setScrollTop(this.grid.scrollTop-sc.findScrollTop(r)-sc.findScrollTop(row));}}}}var cc=this.grid.layout.cellCount-1,i=this.cell.index,col=Math.min(cc,Math.max(0,i+_16c));var cell=this.grid.getCell(col);while(col>=0&&col<cc&&cell&&cell.hidden===true){col+=_16d;cell=this.grid.getCell(col);}if(!cell||cell.hidden===true){col=i;}var n=cell.getNode(row);if(!n&&_16b){if((row+_16b)>=0&&(row+_16b)<=rc){this.move(_16b>0?++_16b:--_16b,_16c);}return;}else{if((!n||html.style(n,"display")==="none")&&_16c){if((col+_16c)>=0&&(col+_16c)<=cc){this.move(_16b,_16c>0?++_16c:--_16c);}return;}}this.setFocusIndex(row,col);if(_16b){this.grid.updateRow(r);}}}},previousKey:function(e){if(this.grid.edit.isEditing()){_14a.stop(e);this.previous();}else{if(!this.isNavHeader()&&!this._isHeaderHidden()){this.grid.domNode.focus();_14a.stop(e);}else{this.tabOut(this.grid.domNode);if(this._colHeadFocusIdx!=null){html.toggleClass(this._findHeaderCells()[this._colHeadFocusIdx],this.focusClass,false);this._colHeadFocusIdx=null;}this._focusifyCellNode(false);}}},nextKey:function(e){var _170=(this.grid.rowCount===0);if(e.target===this.grid.domNode&&this._colHeadFocusIdx==null){this.focusHeader();_14a.stop(e);}else{if(this.isNavHeader()){this.blurHeader();if(!this.findAndFocusGridCell()){this.tabOut(this.grid.lastFocusNode);}this._colHeadNode=this._colHeadFocusIdx=null;}else{if(this.grid.edit.isEditing()){_14a.stop(e);this.next();}else{this.tabOut(this.grid.lastFocusNode);}}}},tabOut:function(_171){this.tabbingOut=true;_171.focus();},focusGridView:function(){util.fire(this.focusView,"focus");},focusGrid:function(_172){this.focusGridView();this._focusifyCellNode(true);},findAndFocusGridCell:function(){var _173=true;var _174=(this.grid.rowCount===0);if(this.isNoFocusCell()&&!_174){var _175=0;var cell=this.grid.getCell(_175);if(cell.hidden){_175=this.isNavHeader()?this._colHeadFocusIdx:0;}this.setFocusIndex(0,_175);}else{if(this.cell&&!_174){if(this.focusView&&!this.focusView.rowNodes[this.rowIndex]){this.grid.scrollToRow(this.rowIndex);}this.focusGrid();}else{_173=false;}}this._colHeadNode=this._colHeadFocusIdx=null;return _173;},focusHeader:function(){var _176=this._findHeaderCells();var _177=this._colHeadFocusIdx;if(this._isHeaderHidden()){this.findAndFocusGridCell();}else{if(!this._colHeadFocusIdx){if(this.isNoFocusCell()){this._colHeadFocusIdx=0;}else{this._colHeadFocusIdx=this.cell.index;}}}this._colHeadNode=_176[this._colHeadFocusIdx];while(this._colHeadNode&&this._colHeadFocusIdx>=0&&this._colHeadFocusIdx<_176.length&&this._colHeadNode.style.display=="none"){this._colHeadFocusIdx++;this._colHeadNode=_176[this._colHeadFocusIdx];}if(this._colHeadNode&&this._colHeadNode.style.display!="none"){if(this.headerMenu&&this._contextMenuBindNode!=this.grid.domNode){this.headerMenu.unBindDomNode(this.grid.viewsHeaderNode);this.headerMenu.bindDomNode(this.grid.domNode);this._contextMenuBindNode=this.grid.domNode;}this._setActiveColHeader(this._colHeadNode,this._colHeadFocusIdx,_177);this._scrollHeader(this._colHeadFocusIdx);this._focusifyCellNode(false);}else{this.findAndFocusGridCell();}},blurHeader:function(){html.removeClass(this._colHeadNode,this.focusClass);html.removeAttr(this.grid.domNode,"aria-activedescendant");if(this.headerMenu&&this._contextMenuBindNode==this.grid.domNode){var _178=this.grid.viewsHeaderNode;this.headerMenu.unBindDomNode(this.grid.domNode);this.headerMenu.bindDomNode(_178);this._contextMenuBindNode=_178;}},doFocus:function(e){if(e&&e.target!=e.currentTarget){_14a.stop(e);return;}if(this._clickFocus){return;}if(!this.tabbingOut){this.focusHeader();}this.tabbingOut=false;_14a.stop(e);},doBlur:function(e){_14a.stop(e);},doContextMenu:function(e){if(!this.headerMenu){_14a.stop(e);}},doLastNodeFocus:function(e){if(this.tabbingOut){this._focusifyCellNode(false);}else{if(this.grid.rowCount>0){if(this.isNoFocusCell()){this.setFocusIndex(0,0);}this._focusifyCellNode(true);}else{this.focusHeader();}}this.tabbingOut=false;_14a.stop(e);},doLastNodeBlur:function(e){_14a.stop(e);},doColHeaderFocus:function(e){this._setActiveColHeader(e.target,html.attr(e.target,"idx"),this._colHeadFocusIdx);this._scrollHeader(this.getHeaderIndex());_14a.stop(e);},doColHeaderBlur:function(e){html.toggleClass(e.target,this.focusClass,false);},_mouseDown:function(e){this._clickFocus=dojo.some(this.grid.views.views,function(v){return v.scrollboxNode===e.target;});},_mouseUp:function(e){this._clickFocus=false;}});});},"esri/toolbars/_VertexEditor":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/has","dijit/Menu","dijit/MenuItem","esri/kernel","esri/toolbars/_VertexMover","esri/geometry/Point","esri/geometry/jsonUtils","dojo/i18n!esri/nls/jsapi"],function(_179,lang,_17a,_17b,has,Menu,_17c,_17d,_17e,_17f,_180,_181){var GVE=_179(null,{declaredClass:"esri.toolbars._GraphicVertexEditor",constructor:function(_182,map,_183){this.graphic=_182;this.map=map;this.toolbar=_183;var _184=_183._options;this._symbol1=_184.vertexSymbol;this._symbol2=_184.ghostVertexSymbol;var _185=_184.ghostLineSymbol;this._lineStroke={style:_185.style,width:_185.width,color:_185.color};this._canDel=_184.allowDeleteVertices;this._canAdd=_184.allowAddVertices;this._addControllers();},destroy:function(){this._removeControllers();},refresh:function(_186){if(_186){this._removeControllers();this._addControllers();}else{this._refresh(this._vertexMovers);this._refresh(this._mpVertexMovers);}},suspend:function(){if(!this._suspended){this._removeControllers();}this._suspended=true;},resume:function(){if(this._suspended){this._addControllers();}this._suspended=false;},_addControllers:function(){this._firstMoveHandle=_17a.connect(_17e,"onFirstMove",this,this._firstMoveHandler);this._moveStopHandle=_17a.connect(_17e,"onMoveStop",this,this._moveStopHandler);this._vertexMovers=this._add(this._getSegments(this.graphic.geometry),this._symbol1);if(this._canAdd){this._mpVertexMovers=this._add(this._getMidpointSegments(this.graphic.geometry),this._symbol2,true);}var _187=this._getGraphicsLayer();this._mouseOverHandle=_17a.connect(_187,"onMouseOver",this,this._mouseOverHandler);this._mouseOutHandle=_17a.connect(_187,"onMouseOut",this,this._mouseOutHandler);if(this._canDel){this._ctxMenu=new Menu({style:"font-size: 12px; margin-left: 5px; margin-top: 5px;"});var _188=(this._ctxDelete=new _17c({label:_181.toolbars.edit.deleteLabel,iconClass:"vertexDeleteIcon",style:"outline: none;"}));this._deleteHandle=_17a.connect(_188,"onClick",this,this._deleteHandler);this._ctxMenu.addChild(_188);this._ctxMenu.startup();}},_removeControllers:function(){_17a.disconnect(this._firstMoveHandle);_17a.disconnect(this._moveStopHandle);_17a.disconnect(this._mouseOverHandle);_17a.disconnect(this._mouseOutHandle);_17a.disconnect(this._deleteHandle);if(this._ctxMenu){this._ctxDelete=null;this._unbindCtxNode();this._ctxMenu.destroyRecursive();}this._remove(this._vertexMovers);this._remove(this._mpVertexMovers);this._vertexMovers=this._mpVertexMovers=null;},_add:function(_189,_18a,_18b){var i,j,_18c=this.graphic,_18d=[];for(i=0;i<_189.length;i++){var _18e=_189[i],_18f=[];for(j=0;j<_18e.length;j++){_18f.push(new _17e(_18e[j],_18a,_18c,i,j,_18e.length,this,_18b));}_18d.push(_18f);}return _18d;},_remove:function(_190){if(_190){_17b.forEach(_190,function(_191){_17b.forEach(_191,function(_192){_192.destroy();});});}},_refresh:function(_193){if(_193){_17b.forEach(_193,function(_194){_17b.forEach(_194,function(_195){_195.refresh();});});}},_isNew:function(_196){return (_17b.indexOf(this._vertexMovers[_196.segIndex],_196)===-1)?true:false;},_getGraphicsLayer:function(){return this.toolbar._scratchGL;},_deleteHandler:function(evt){var _197=this._selectedMover,_198=_197.ptIndex;this._updateRelatedGraphic(_197,_197.relatedGraphic,_197.graphic.geometry,_197.segIndex,_197.ptIndex,_197.segLength,false,true);if(this._canAdd){this._deleteMidpoints(_197);}this._deleteVertex(_197);this.toolbar._endOperation("VERTICES");},_mouseOverHandler:function(evt){var _199=evt.graphic,_19a=this._findMover(_199);if(_19a){this.toolbar.onVertexMouseOver(this.graphic,_19a._getInfo());if(!_19a._placeholder){this._selectedMover=_19a;if(this._canDel){this._bindCtxNode(_199.getDojoShape().getNode());}}}},_mouseOutHandler:function(evt){var _19b=evt.graphic,_19c=this._findMover(_19b);if(_19c){this.toolbar.onVertexMouseOut(this.graphic,_19c._getInfo());}},_bindCtxNode:function(node){this._unbindCtxNode();this._ctxDelete.set("disabled",(this._selectedMover.segLength<=this.minLength)?true:false);this._ctxMenu.bindDomNode(node);this._bindNode=node;},_unbindCtxNode:function(){var node=this._bindNode;if(node){this._ctxMenu.unBindDomNode(node);}},_findMover:function(_19d){var i,_19e=[],_19f=this._mpVertexMovers;_17b.forEach(this._vertexMovers,function(_1a0){_19e=_19e.concat(_1a0);});if(_19f){_17b.forEach(_19f,function(_1a1){_19e=_19e.concat(_1a1);});}for(i=0;i<_19e.length;i++){var _1a2=_19e[i];if(_1a2.graphic===_19d){return _1a2;}}},_firstMoveHandler:function(_1a3){if(!this._isNew(_1a3)&&this._canAdd){this._hideRelatedMidpoints(_1a3);}this.toolbar._beginOperation("VERTICES");},_moveStopHandler:function(_1a4,tx){var add=this._isNew(_1a4);if(!tx||!tx.dx&&!tx.dy){if(!add&&this._canAdd){this._showRelatedMidpoints(_1a4);}return;}this._updateRelatedGraphic(_1a4,_1a4.relatedGraphic,_1a4.graphic.geometry,_1a4.segIndex,_1a4.ptIndex,_1a4.segLength,add);if(this._canAdd){if(add){this._addMidpoints(_1a4);}else{this._repositionRelatedMidpoints(_1a4);this._showRelatedMidpoints(_1a4);}}this.toolbar._endOperation("VERTICES");},_showRelatedMidpoints:function(_1a5){var i,_1a6=this._getAdjacentMidpoints(_1a5.ptIndex,_1a5.segLength),_1a7=this._mpVertexMovers[_1a5.segIndex];for(i=0;i<_1a6.length;i++){var mvr=_1a7[_1a6[i]];mvr.graphic.show();mvr.refresh();}},_hideRelatedMidpoints:function(_1a8){var i,_1a9=this._getAdjacentMidpoints(_1a8.ptIndex,_1a8.segLength),_1aa=this._mpVertexMovers[_1a8.segIndex];for(i=0;i<_1a9.length;i++){_1aa[_1a9[i]].graphic.hide();}},_repositionRelatedMidpoints:function(_1ab){var i,_1ac=this._getAdjacentMidpoints(_1ab.ptIndex,_1ab.segLength),_1ad=this._mpVertexMovers[_1ab.segIndex];for(i=0;i<_1ac.length;i++){var _1ae=this._getAdjacentVertices(_1ac[i],_1ab.segLength);var _1af=_1ab.relatedGraphic.geometry.getPoint(_1ab.segIndex,_1ae[0]),_1b0=_1ab.relatedGraphic.geometry.getPoint(_1ab.segIndex,_1ae[1]);var _1b1=new _17f({x:(_1af.x+_1b0.x)/2,y:(_1af.y+_1b0.y)/2,spatialReference:_1af.spatialReference.toJson()});_1ad[_1ac[i]].graphic.setGeometry(_1b1);}},_addMidpoints:function(_1b2){var _1b3=_1b2.segIndex,_1b4=_1b2.ptIndex,_1b5=_1b2.segLength;var _1b6=_1b4+1;var i,_1b7=_1b5+1;this._mpVertexMovers[_1b3].splice(_1b4,1);var _1b8=this._vertexMovers[_1b3];for(i=0;i<_1b6;i++){_1b8[i].segLength+=1;}for(i=_1b6;i<_1b8.length;i++){_1b8[i].ptIndex+=1;_1b8[i].segLength+=1;}_1b2.ptIndex=_1b6;_1b2.segLength=_1b8.length+1;_1b8.splice(_1b6,0,_1b2);_1b2.graphic.setSymbol(this._symbol1);_1b8=this._mpVertexMovers[_1b3];for(i=0;i<_1b4;i++){_1b8[i].segLength+=1;}for(i=_1b4;i<_1b5-1;i++){_1b8[i].ptIndex+=1;_1b8[i].segLength+=1;}var _1b9=this._getAdjacentVertices(_1b4,_1b7);var _1ba=this._getAdjacentVertices(_1b4+1,_1b7);var _1bb,_1bc;_1bb=_1b2.relatedGraphic.geometry.getPoint(_1b2.segIndex,_1b9[0]);_1bc=_1b2.relatedGraphic.geometry.getPoint(_1b2.segIndex,_1b9[1]);var _1bd=new _17f({x:(_1bb.x+_1bc.x)/2,y:(_1bb.y+_1bc.y)/2,spatialReference:_1bb.spatialReference.toJson()});_1bb=_1b2.relatedGraphic.geometry.getPoint(_1b2.segIndex,_1ba[0]);_1bc=_1b2.relatedGraphic.geometry.getPoint(_1b2.segIndex,_1ba[1]);var _1be=new _17f({x:(_1bb.x+_1bc.x)/2,y:(_1bb.y+_1bc.y)/2,spatialReference:_1bb.spatialReference.toJson()});var mvr1=new _17e(_1bd,this._symbol2,this.graphic,_1b2.segIndex,_1b4,_1b7,this,true);var mvr2=new _17e(_1be,this._symbol2,this.graphic,_1b2.segIndex,_1b4+1,_1b7,this,true);_1b8.splice(_1b4,0,mvr1,mvr2);},_deleteVertex:function(_1bf){var i,_1c0=_1bf.segIndex,_1c1=_1bf.ptIndex;var _1c2=this._vertexMovers[_1c0];for(i=0;i<_1c1;i++){_1c2[i].segLength-=1;}for(i=_1c1+1;i<_1c2.length;i++){var mvr=_1c2[i];mvr.ptIndex-=1;mvr.segLength-=1;}_1c2.splice(_1c1,1);var info=_1bf._getInfo();_1bf.destroy();this.toolbar.onVertexDelete(this.graphic,info);}});lang.mixin(GVE,{create:function(_1c3,map,_1c4){var type=_1c3.geometry.type;switch(type){case "multipoint":return new GVE.MultipointVertexEditor(_1c3,map,_1c4);break;case "polyline":return new GVE.PolylineVertexEditor(_1c3,map,_1c4);break;case "polygon":return new GVE.PolygonVertexEditor(_1c3,map,_1c4);break;}}});GVE.MultipointVertexEditor=_179(GVE,{declaredClass:"esri.toolbars._MultipointVertexEditor",minLength:1,constructor:function(){this._moveStartHandle=_17a.connect(_17e,"onMoveStart",this,this._moveStartHandler);_17a.disconnect(this._firstMoveHandle);},destroy:function(){this.inherited(arguments);_17a.disconnect(this._moveStartHandle);},_getSegments:function(_1c5){var i,_1c6=_1c5.points,_1c7=[],sr=_1c5.spatialReference;for(i=0;i<_1c6.length;i++){var _1c8=_1c6[i];_1c7.push(new _17f({x:_1c8[0],y:_1c8[1],spatialReference:sr.toJson()}));}return [_1c7];},_getMidpointSegments:function(_1c9){return [];},_getControlPoints:function(_1ca,_1cb,_1cc,_1cd,_1ce){return [];},_getGraphicsLayer:function(){return this.graphic._graphicsLayer;},_mouseOverHandler:function(evt){var _1cf=evt.graphic,_1d0=this._findMover(evt);if(_1d0){this.toolbar.onVertexMouseOver(_1cf,_1d0._getInfo());this._selectedMover=_1d0;if(this._canDel){this._bindCtxNode(_1d0.graphic.getDojoShape().getNode());}}},_mouseOutHandler:function(evt){var _1d1=evt.graphic,_1d2=this._findMover(evt);if(_1d2){this.toolbar.onVertexMouseOut(_1d1,_1d2._getInfo());}},_findMover:function(evt){var i,_1d3=[].concat(this._vertexMovers[0]),_1d4=evt.target;for(i=0;i<_1d3.length;i++){var _1d5=_1d3[i];if(_1d5.graphic.getDojoShape().getNode()===_1d4){return _1d5;}}},_moveStartHandler:function(_1d6){var geom=_1d6.relatedGraphic.geometry,_1d7=_1d6.ptIndex;var _1d8=_1d6.segLength-1;var _1d9=geom.points;var _1da=_1d9.splice(_1d7,1);_1d9.push(_1da[0]);var j,_1db=this._vertexMovers[0];for(j=_1d8;j>_1d7;j--){_1db[j].ptIndex-=1;}_1da=_1db.splice(_1d7,1);_1db.push(_1da[0]);_1da[0].ptIndex=_1d8;},_moveStopHandler:function(_1dc){this._updateRelatedGraphic(_1dc,_1dc.relatedGraphic,_1dc.graphic.geometry,_1dc.segIndex,_1dc.ptIndex,_1dc.segLength);this.toolbar._endOperation("VERTICES");},_updateRelatedGraphic:function(_1dd,_1de,_1df,_1e0,_1e1,_1e2,add,del){var geom=_1de.geometry;if(del){geom.removePoint(_1e1);}else{geom.setPoint(_1e1,_1df);}_1de.setGeometry(geom);},_deleteMidpoints:function(_1e3){}});GVE.PolylineVertexEditor=_179(GVE,{declaredClass:"esri.toolbars._PolylineVertexEditor",minLength:2,_getSegments:function(_1e4){var i,j,_1e5=_1e4.paths,_1e6=[];for(i=0;i<_1e5.length;i++){var path=_1e5[i],_1e7=[];for(j=0;j<path.length;j++){_1e7.push(_1e4.getPoint(i,j));}_1e6.push(_1e7);}return _1e6;},_getMidpointSegments:function(_1e8){var i,j,_1e9=_1e8.paths,_1ea=[],sr=_1e8.spatialReference;for(i=0;i<_1e9.length;i++){var path=_1e9[i],_1eb=[];for(j=0;j<path.length-1;j++){var _1ec=_1e8.getPoint(i,j),_1ed=_1e8.getPoint(i,j+1);var midX=(_1ec.x+_1ed.x)/2,midY=(_1ec.y+_1ed.y)/2;var _1ee=new _17f({x:midX,y:midY,spatialReference:sr.toJson()});_1eb.push(_1ee);}_1ea.push(_1eb);}return _1ea;},_getControlPoints:function(_1ef,_1f0,_1f1,_1f2,_1f3){var map=this.map,idx1,idx2,pt1,pt2;if(this._isNew(_1ef)){idx1=_1f2;idx2=_1f2+1;if(idx1>=0){pt1=map.toScreen(_1f0.getPoint(_1f1,idx1));}if(idx2<=_1f3){pt2=map.toScreen(_1f0.getPoint(_1f1,idx2));}}else{idx1=_1f2-1;idx2=_1f2+1;if(idx1>=0){pt1=map.toScreen(_1f0.getPoint(_1f1,idx1));}if(idx2<_1f3){pt2=map.toScreen(_1f0.getPoint(_1f1,idx2));}}return [pt1,pt2];},_getAdjacentMidpoints:function(_1f4,_1f5){var _1f6=[];var idx1=_1f4-1;if(idx1>=0){_1f6.push(idx1);}var idx2=_1f4;if(idx2<_1f5-1){_1f6.push(idx2);}return _1f6;},_getAdjacentVertices:function(_1f7,_1f8){return [_1f7,_1f7+1];},_deleteMidpoints:function(_1f9){var _1fa=_1f9.segIndex,_1fb=_1f9.ptIndex,_1fc=_1f9.segLength;var _1fd=this._mpVertexMovers[_1fa],_1fe=_1fd.length-1;var _1ff=this._getAdjacentMidpoints(_1fb,_1fc).sort();var i,min=_1ff[0];for(i=0;i<min;i++){_1fd[i].segLength-=1;}for(i=min+1;i<_1fd.length;i++){var mvr=_1fd[i];mvr.ptIndex-=1;mvr.segLength-=1;}if(_1ff.length===1){_1fd.splice(min,1)[0].destroy();}else{var _200=this._getAdjacentVertices(min,_1fe);var _201=_1f9.relatedGraphic.geometry.getPoint(_1f9.segIndex,_200[0]);var _202=_1f9.relatedGraphic.geometry.getPoint(_1f9.segIndex,_200[1]);var _203=new _17f({x:(_201.x+_202.x)/2,y:(_201.y+_202.y)/2,spatialReference:_201.spatialReference.toJson()});var mvr1=new _17e(_203,this._symbol2,this.graphic,_1f9.segIndex,min,_1fe,this,true);var _204=_1fd.splice(min,_1ff.length,mvr1);for(i=0;i<_204.length;i++){_204[i].destroy();}}},_updateRelatedGraphic:function(_205,_206,_207,_208,_209,_20a,add,del){var geom=_206.geometry;if(add){geom.insertPoint(_208,_209+1,_180.fromJson(_207.toJson()));}else{if(del){geom.removePoint(_208,_209);}else{geom.setPoint(_208,_209,_180.fromJson(_207.toJson()));}}_206.setGeometry(geom);}});GVE.PolygonVertexEditor=_179(GVE,{declaredClass:"esri.toolbars._PolygonVertexEditor",minLength:3,_getSegments:function(_20b){var i,j,_20c=_20b.rings,_20d=[];for(i=0;i<_20c.length;i++){var ring=_20c[i],_20e=[];for(j=0;j<ring.length-1;j++){_20e.push(_20b.getPoint(i,j));}_20d.push(_20e);}return _20d;},_getMidpointSegments:function(_20f){var i,j,_210=_20f.rings,_211=[],sr=_20f.spatialReference;for(i=0;i<_210.length;i++){var ring=_210[i],_212=[];for(j=0;j<ring.length-1;j++){var _213=_20f.getPoint(i,j),_214=_20f.getPoint(i,j+1);var midX=(_213.x+_214.x)/2,midY=(_213.y+_214.y)/2;var _215=new _17f({x:midX,y:midY,spatialReference:sr.toJson()});_212.push(_215);}_211.push(_212);}return _211;},_getControlPoints:function(_216,_217,_218,_219,_21a){var map=this.map,idx1,idx2,pt1,pt2;if(this._isNew(_216)){idx1=_219;idx2=(_219+1)%_21a;}else{idx1=_219-1;idx1=idx1<0?(_21a+idx1)%_21a:idx1;idx2=(_219+1)%_21a;}pt1=map.toScreen(_217.getPoint(_218,idx1));pt2=map.toScreen(_217.getPoint(_218,idx2));return [pt1,pt2];},_getAdjacentMidpoints:function(_21b,_21c){var idx1=_21b-1;idx1=idx1<0?(_21c+idx1)%_21c:idx1;var idx2=_21b;return [idx1,idx2];},_getAdjacentVertices:function(_21d,_21e){return [_21d,(_21d+1)%_21e];},_deleteMidpoints:function(_21f){var _220=_21f.segIndex,_221=_21f.ptIndex,_222=_21f.segLength;var _223=this._mpVertexMovers[_220],_224=_223.length-1,_225=this._getAdjacentMidpoints(_221,_222).sort(),_226,_227,_228,_229,i,mvr1,mvr,min=_225[0],max=_225[_225.length-1];if(_221===0){_226=this._getAdjacentVertices(_224-1,_224);_227=_21f.relatedGraphic.geometry.getPoint(_21f.segIndex,_226[0]);_228=_21f.relatedGraphic.geometry.getPoint(_21f.segIndex,_226[1]);_229=new _17f({x:(_227.x+_228.x)/2,y:(_227.y+_228.y)/2,spatialReference:_227.spatialReference.toJson()});mvr1=new _17e(_229,this._symbol2,this.graphic,_21f.segIndex,_224-1,_224,this,true);_223.splice(max,1,mvr1)[0].destroy();_223.splice(min,1)[0].destroy();for(i=0;i<_223.length-1;i++){mvr=_223[i];mvr.ptIndex-=1;mvr.segLength-=1;}}else{_226=this._getAdjacentVertices(min,_224);_227=_21f.relatedGraphic.geometry.getPoint(_21f.segIndex,_226[0]);_228=_21f.relatedGraphic.geometry.getPoint(_21f.segIndex,_226[1]);_229=new _17f({x:(_227.x+_228.x)/2,y:(_227.y+_228.y)/2,spatialReference:_227.spatialReference.toJson()});mvr1=new _17e(_229,this._symbol2,this.graphic,_21f.segIndex,min,_224,this,true);var _22a=_223.splice(min,_225.length,mvr1);for(i=0;i<_22a.length;i++){_22a[i].destroy();}for(i=0;i<min;i++){_223[i].segLength-=1;}for(i=min+1;i<_223.length;i++){mvr=_223[i];mvr.ptIndex-=1;mvr.segLength-=1;}}},_updateRelatedGraphic:function(_22b,_22c,_22d,_22e,_22f,_230,add,del){var geom=_22c.geometry;if(add){geom.insertPoint(_22e,_22f+1,_180.fromJson(_22d.toJson()));}else{if(del){geom.removePoint(_22e,_22f);if(_22f===0){geom.setPoint(_22e,_230-1,_180.fromJson(geom.getPoint(_22e,0).toJson()));}}else{geom.setPoint(_22e,_22f,_180.fromJson(_22d.toJson()));if(_22f===0){geom.setPoint(_22e,_230,_180.fromJson(_22d.toJson()));}}}_22c.setGeometry(geom);}});if(has("extend-esri")){lang.setObject("toolbars._GraphicVertexEditor",GVE,_17d);lang.setObject("toolbars._MultipointVertexEditor",GVE.MultipointVertexEditor,_17d);lang.setObject("toolbars._PolylineVertexEditor",GVE.PolylineVertexEditor,_17d);lang.setObject("toolbars._PolygonVertexEditor",GVE.PolygonVertexEditor,_17d);}return GVE;});},"dijit/_Templated":function(){define("dijit/_Templated",["./_WidgetBase","./_TemplatedMixin","./_WidgetsInTemplateMixin","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/kernel"],function(_231,_232,_233,_234,_235,lang,_236){lang.extend(_231,{waiRole:"",waiState:""});return _235("dijit._Templated",[_232,_233],{widgetsInTemplate:false,constructor:function(){_236.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0");},_attachTemplateNodes:function(_237,_238){this.inherited(arguments);var _239=lang.isArray(_237)?_237:(_237.all||_237.getElementsByTagName("*"));var x=lang.isArray(_237)?0:-1;for(;x<_239.length;x++){var _23a=(x==-1)?_237:_239[x];var role=_238(_23a,"waiRole");if(role){_23a.setAttribute("role",role);}var _23b=_238(_23a,"waiState");if(_23b){_234.forEach(_23b.split(/\s*,\s*/),function(_23c){if(_23c.indexOf("-")!=-1){var pair=_23c.split("-");_23a.setAttribute("aria-"+pair[0],pair[1]);}});}}}});});},"dijit/_CssStateMixin":function(){define("dijit/_CssStateMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/has","dojo/_base/lang","dojo/on","dojo/ready","dojo/_base/window","./registry"],function(_23d,_23e,dom,_23f,has,lang,on,_240,win,_241){var _242=_23e("dijit._CssStateMixin",[],{cssStateNodes:{},hovering:false,active:false,_applyAttributes:function(){this.inherited(arguments);_23d.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active","_opened"],function(attr){this.watch(attr,lang.hitch(this,"_setStateClass"));},this);for(var ap in this.cssStateNodes){this._trackMouseState(this[ap],this.cssStateNodes[ap]);}this._trackMouseState(this.domNode,this.baseClass);this._setStateClass();},_cssMouseEvent:function(_243){if(!this.disabled){switch(_243.type){case "mouseover":this._set("hovering",true);this._set("active",this._mouseDown);break;case "mouseout":this._set("hovering",false);this._set("active",false);break;case "mousedown":case "touchstart":this._set("active",true);break;case "mouseup":case "touchend":this._set("active",false);break;}}},_setStateClass:function(){var _244=this.baseClass.split(" ");function _245(_246){_244=_244.concat(_23d.map(_244,function(c){return c+_246;}),"dijit"+_246);};if(!this.isLeftToRight()){_245("Rtl");}var _247=this.checked=="mixed"?"Mixed":(this.checked?"Checked":"");if(this.checked){_245(_247);}if(this.state){_245(this.state);}if(this.selected){_245("Selected");}if(this._opened){_245("Opened");}if(this.disabled){_245("Disabled");}else{if(this.readOnly){_245("ReadOnly");}else{if(this.active){_245("Active");}else{if(this.hovering){_245("Hover");}}}}if(this.focused){_245("Focused");}var tn=this.stateNode||this.domNode,_248={};_23d.forEach(tn.className.split(" "),function(c){_248[c]=true;});if("_stateClasses" in this){_23d.forEach(this._stateClasses,function(c){delete _248[c];});}_23d.forEach(_244,function(c){_248[c]=true;});var _249=[];for(var c in _248){_249.push(c);}tn.className=_249.join(" ");this._stateClasses=_244;},_subnodeCssMouseEvent:function(node,_24a,evt){if(this.disabled||this.readOnly){return;}function _24b(_24c){_23f.toggle(node,_24a+"Hover",_24c);};function _24d(_24e){_23f.toggle(node,_24a+"Active",_24e);};function _24f(_250){_23f.toggle(node,_24a+"Focused",_250);};switch(evt.type){case "mouseover":_24b(true);break;case "mouseout":_24b(false);_24d(false);break;case "mousedown":case "touchstart":_24d(true);break;case "mouseup":case "touchend":_24d(false);break;case "focus":case "focusin":_24f(true);break;case "blur":case "focusout":_24f(false);break;}},_trackMouseState:function(node,_251){node._cssState=_251;}});_240(function(){function _252(evt){if(!dom.isDescendant(evt.relatedTarget,evt.target)){for(var node=evt.target;node&&node!=evt.relatedTarget;node=node.parentNode){if(node._cssState){var _253=_241.getEnclosingWidget(node);if(_253){if(node==_253.domNode){_253._cssMouseEvent(evt);}else{_253._subnodeCssMouseEvent(node,node._cssState,evt);}}}}}};function _254(evt){evt.target=evt.srcElement;_252(evt);};var body=win.body(),_255=(has("touch")?[]:["mouseover","mouseout"]).concat(["mousedown","touchstart","mouseup","touchend"]);_23d.forEach(_255,function(type){if(body.addEventListener){body.addEventListener(type,_252,true);}else{body.attachEvent("on"+type,_254);}});on(body,"focusin, focusout",function(evt){var node=evt.target;if(node._cssState&&!node.getAttribute("widgetId")){var _256=_241.getEnclosingWidget(node);_256._subnodeCssMouseEvent(node,node._cssState,evt);}});});return _242;});},"url:dijit/form/templates/ComboButton.html":"<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tcellspacing='0' cellpadding='0' role=\"presentation\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonNode\" data-dojo-attach-point=\"buttonNode\" data-dojo-attach-event=\"ondijitclick:_onClick,onkeypress:_onButtonKeyPress\"\n\t\t><div id=\"${id}_button\" class=\"dijitReset dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><div class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitInline dijitButtonText\" id=\"${id}_label\" data-dojo-attach-point=\"containerNode\" role=\"presentation\"></div\n\t\t></div\n\t\t></td\n\t\t><td id=\"${id}_arrow\" class='dijitReset dijitRight dijitButtonNode dijitArrowButton'\n\t\t\tdata-dojo-attach-point=\"_popupStateNode,focusNode,_buttonNode\"\n\t\t\tdata-dojo-attach-event=\"onkeypress:_onArrowKeyPress\"\n\t\t\ttitle=\"${optionsTitle}\"\n\t\t\trole=\"button\" aria-haspopup=\"true\"\n\t\t\t><div class=\"dijitReset dijitArrowButtonInner\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" role=\"presentation\">&#9660;</div\n\t\t></td\n\t\t><td style=\"display:none !important;\"\n\t\t\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" data-dojo-attach-point=\"valueNode\" role=\"presentation\"\n\t\t/></td></tr></tbody\n></table>\n","dijit/_editor/html":function(){define("dijit/_editor/html",["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(_257,lang,has){var _258={};lang.setObject("dijit._editor.html",_258);var _259=_258.escapeXml=function(str,_25a){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_25a){str=str.replace(/'/gm,"&#39;");}return str;};_258.getNodeHtml=function(node){var _25b=[];_258.getNodeHtmlHelper(node,_25b);return _25b.join("");};_258.getNodeHtmlHelper=function(node,_25c){switch(node.nodeType){case 1:var _25d=node.nodeName.toLowerCase();if(!_25d||_25d.charAt(0)=="/"){return "";}_25c.push("<",_25d);var _25e=[],_25f={};var attr;if(has("dom-attributes-explicit")||has("dom-attributes-specified-flag")){var i=0;while((attr=node.attributes[i++])){var n=attr.name;if(n.substr(0,3)!=="_dj"&&(!has("dom-attributes-specified-flag")||attr.specified)&&!(n in _25f)){var v=attr.value;if(n=="src"||n=="href"){if(node.getAttribute("_djrealurl")){v=node.getAttribute("_djrealurl");}}if(has("ie")===8&&n==="style"){v=v.replace("HEIGHT:","height:").replace("WIDTH:","width:");}_25e.push([n,v]);_25f[n]=v;}}}else{var _260=/^input$|^img$/i.test(node.nodeName)?node:node.cloneNode(false);var s=_260.outerHTML;var _261=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;var _262=s.match(_261);s=s.substr(0,s.indexOf(">"));_257.forEach(_262,function(attr){if(attr){var idx=attr.indexOf("=");if(idx>0){var key=attr.substring(0,idx);if(key.substr(0,3)!="_dj"){if(key=="src"||key=="href"){if(node.getAttribute("_djrealurl")){_25e.push([key,node.getAttribute("_djrealurl")]);return;}}var val,_263;switch(key){case "style":val=node.style.cssText.toLowerCase();break;case "class":val=node.className;break;case "width":if(_25d==="img"){_263=/width=(\S+)/i.exec(s);if(_263){val=_263[1];}break;}case "height":if(_25d==="img"){_263=/height=(\S+)/i.exec(s);if(_263){val=_263[1];}break;}default:val=node.getAttribute(key);}if(val!=null){_25e.push([key,val.toString()]);}}}}},this);}_25e.sort(function(a,b){return a[0]<b[0]?-1:(a[0]==b[0]?0:1);});var j=0;while((attr=_25e[j++])){_25c.push(" ",attr[0],"=\"",(typeof attr[1]==="string"?_259(attr[1],true):attr[1]),"\"");}switch(_25d){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":_25c.push(" />");break;case "script":_25c.push(">",node.innerHTML,"</",_25d,">");break;default:_25c.push(">");if(node.hasChildNodes()){_258.getChildrenHtmlHelper(node,_25c);}_25c.push("</",_25d,">");}break;case 4:case 3:_25c.push(_259(node.nodeValue,true));break;case 8:_25c.push("<!--",_259(node.nodeValue,true),"-->");break;default:_25c.push("<!-- Element not recognized - Type: ",node.nodeType," Name: ",node.nodeName,"-->");}};_258.getChildrenHtml=function(node){var _264=[];_258.getChildrenHtmlHelper(node,_264);return _264.join("");};_258.getChildrenHtmlHelper=function(dom,_265){if(!dom){return;}var _266=dom["childNodes"]||dom;var _267=!has("ie")||_266!==dom;var node,i=0;while((node=_266[i++])){if(!_267||node.parentNode==dom){_258.getNodeHtmlHelper(node,_265);}}};return _258;});},"dijit/place":function(){define("dijit/place",["dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/window","dojo/window","./main"],function(_268,_269,_26a,_26b,win,_26c,_26d){function _26e(node,_26f,_270,_271){var view=_26c.getBox(node.ownerDocument);if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body"){win.body(node.ownerDocument).appendChild(node);}var best=null;_268.some(_26f,function(_272){var _273=_272.corner;var pos=_272.pos;var _274=0;var _275={w:{"L":view.l+view.w-pos.x,"R":pos.x-view.l,"M":view.w}[_273.charAt(1)],h:{"T":view.t+view.h-pos.y,"B":pos.y-view.t,"M":view.h}[_273.charAt(0)]};var s=node.style;s.left=s.right="auto";if(_270){var res=_270(node,_272.aroundCorner,_273,_275,_271);_274=typeof res=="undefined"?0:res;}var _276=node.style;var _277=_276.display;var _278=_276.visibility;if(_276.display=="none"){_276.visibility="hidden";_276.display="";}var bb=_269.position(node);_276.display=_277;_276.visibility=_278;var _279={"L":pos.x,"R":pos.x-bb.w,"M":Math.max(view.l,Math.min(view.l+view.w,pos.x+(bb.w>>1))-bb.w)}[_273.charAt(1)],_27a={"T":pos.y,"B":pos.y-bb.h,"M":Math.max(view.t,Math.min(view.t+view.h,pos.y+(bb.h>>1))-bb.h)}[_273.charAt(0)],_27b=Math.max(view.l,_279),_27c=Math.max(view.t,_27a),endX=Math.min(view.l+view.w,_279+bb.w),endY=Math.min(view.t+view.h,_27a+bb.h),_27d=endX-_27b,_27e=endY-_27c;_274+=(bb.w-_27d)+(bb.h-_27e);if(best==null||_274<best.overflow){best={corner:_273,aroundCorner:_272.aroundCorner,x:_27b,y:_27c,w:_27d,h:_27e,overflow:_274,spaceAvailable:_275};}return !_274;});if(best.overflow&&_270){_270(node,best.aroundCorner,best.corner,best.spaceAvailable,_271);}var l=_269.isBodyLtr(node.ownerDocument),s=node.style;s.top=best.y+"px";s[l?"left":"right"]=(l?best.x:view.w-best.x-best.w)+"px";s[l?"right":"left"]="auto";return best;};var _27f={at:function(node,pos,_280,_281){var _282=_268.map(_280,function(_283){var c={corner:_283,pos:{x:pos.x,y:pos.y}};if(_281){c.pos.x+=_283.charAt(1)=="L"?_281.x:-_281.x;c.pos.y+=_283.charAt(0)=="T"?_281.y:-_281.y;}return c;});return _26e(node,_282);},around:function(node,_284,_285,_286,_287){var _288=(typeof _284=="string"||"offsetWidth" in _284)?_269.position(_284,true):_284;if(_284.parentNode){var _289=_26a.getComputedStyle(_284).position=="absolute";var _28a=_284.parentNode;while(_28a&&_28a.nodeType==1&&_28a.nodeName!="BODY"){var _28b=_269.position(_28a,true),pcs=_26a.getComputedStyle(_28a);if(/relative|absolute/.test(pcs.position)){_289=false;}if(!_289&&/hidden|auto|scroll/.test(pcs.overflow)){var _28c=Math.min(_288.y+_288.h,_28b.y+_28b.h);var _28d=Math.min(_288.x+_288.w,_28b.x+_28b.w);_288.x=Math.max(_288.x,_28b.x);_288.y=Math.max(_288.y,_28b.y);_288.h=_28c-_288.y;_288.w=_28d-_288.x;}if(pcs.position=="absolute"){_289=true;}_28a=_28a.parentNode;}}var x=_288.x,y=_288.y,_28e="w" in _288?_288.w:(_288.w=_288.width),_28f="h" in _288?_288.h:(_26b.deprecated("place.around: dijit/place.__Rectangle: { x:"+x+", y:"+y+", height:"+_288.height+", width:"+_28e+" } has been deprecated.  Please use { x:"+x+", y:"+y+", h:"+_288.height+", w:"+_28e+" }","","2.0"),_288.h=_288.height);var _290=[];function push(_291,_292){_290.push({aroundCorner:_291,corner:_292,pos:{x:{"L":x,"R":x+_28e,"M":x+(_28e>>1)}[_291.charAt(1)],y:{"T":y,"B":y+_28f,"M":y+(_28f>>1)}[_291.charAt(0)]}});};_268.forEach(_285,function(pos){var ltr=_286;switch(pos){case "above-centered":push("TM","BM");break;case "below-centered":push("BM","TM");break;case "after-centered":ltr=!ltr;case "before-centered":push(ltr?"ML":"MR",ltr?"MR":"ML");break;case "after":ltr=!ltr;case "before":push(ltr?"TL":"TR",ltr?"TR":"TL");push(ltr?"BL":"BR",ltr?"BR":"BL");break;case "below-alt":ltr=!ltr;case "below":push(ltr?"BL":"BR",ltr?"TL":"TR");push(ltr?"BR":"BL",ltr?"TR":"TL");break;case "above-alt":ltr=!ltr;case "above":push(ltr?"TL":"TR",ltr?"BL":"BR");push(ltr?"TR":"TL",ltr?"BR":"BL");break;default:push(pos.aroundCorner,pos.corner);}});var _293=_26e(node,_290,_287,{w:_28e,h:_28f});_293.aroundNodePos=_288;return _293;}};return _26d.place=_27f;});},"dijit/_HasDropDown":function(){define("dijit/_HasDropDown",["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/event","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","dojo/window","./registry","./focus","./popup","./_FocusMixin"],function(_294,_295,_296,dom,_297,_298,_299,_29a,has,keys,lang,on,_29b,_29c,_29d,_29e,_29f){return _294("dijit._HasDropDown",_29f,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:true,forceWidth:false,maxHeight:0,dropDownPosition:["below","above"],_stopClickEvents:true,_onDropDownMouseDown:function(e){if(this.disabled||this.readOnly){return;}e.preventDefault();this._docHandler=this.connect(this.ownerDocument,"mouseup","_onDropDownMouseUp");this.toggleDropDown();},_onDropDownMouseUp:function(e){if(e&&this._docHandler){this.disconnect(this._docHandler);}var _2a0=this.dropDown,_2a1=false;if(e&&this._opened){var c=_299.position(this._buttonNode,true);if(!(e.pageX>=c.x&&e.pageX<=c.x+c.w)||!(e.pageY>=c.y&&e.pageY<=c.y+c.h)){var t=e.target;while(t&&!_2a1){if(_298.contains(t,"dijitPopup")){_2a1=true;}else{t=t.parentNode;}}if(_2a1){t=e.target;if(_2a0.onItemClick){var _2a2;while(t&&!(_2a2=_29c.byNode(t))){t=t.parentNode;}if(_2a2&&_2a2.onClick&&_2a2.getParent){_2a2.getParent().onItemClick(_2a2,e);}}return;}}}if(this._opened){if(_2a0.focus&&_2a0.autoFocus!==false){this._focusDropDownTimer=this.defer(function(){_2a0.focus();delete this._focusDropDownTimer;});}}else{this.defer("focus");}if(has("touch")){this._justGotMouseUp=true;this.defer(function(){this._justGotMouseUp=false;});}},_onDropDownClick:function(e){if(has("touch")&&!this._justGotMouseUp){this._onDropDownMouseDown(e);this._onDropDownMouseUp(e);}if(this._stopClickEvents){_296.stop(e);}},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var _2a3={"after":this.isLeftToRight()?"Right":"Left","before":this.isLeftToRight()?"Left":"Right","above":"Up","below":"Down","left":"Left","right":"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";_298.add(this._arrowWrapperNode||this._buttonNode,"dijit"+_2a3+"ArrowButton");},postCreate:function(){this.inherited(arguments);var _2a4=this.focusNode||this.domNode;this.own(on(this._buttonNode,"mousedown",lang.hitch(this,"_onDropDownMouseDown")),on(this._buttonNode,"click",lang.hitch(this,"_onDropDownClick")),on(_2a4,"keydown",lang.hitch(this,"_onKey")),on(_2a4,"keyup",lang.hitch(this,"_onKeyUp")));},destroy:function(){if(this.dropDown){if(!this.dropDown._destroyed){this.dropDown.destroyRecursive();}delete this.dropDown;}this.inherited(arguments);},_onKey:function(e){if(this.disabled||this.readOnly){return;}var d=this.dropDown,_2a5=e.target;if(d&&this._opened&&d.handleKey){if(d.handleKey(e)===false){_296.stop(e);return;}}if(d&&this._opened&&e.keyCode==keys.ESCAPE){this.closeDropDown();_296.stop(e);}else{if(!this._opened&&(e.keyCode==keys.DOWN_ARROW||((e.keyCode==keys.ENTER||e.keyCode==keys.SPACE)&&((_2a5.tagName||"").toLowerCase()!=="input"||(_2a5.type&&_2a5.type.toLowerCase()!=="text"))))){this._toggleOnKeyUp=true;_296.stop(e);}}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var d=this.dropDown;if(d&&d.focus){this.defer(lang.hitch(d,"focus"),1);}}},_onBlur:function(){var _2a6=_29d.curNode&&this.dropDown&&dom.isDescendant(_29d.curNode,this.dropDown.domNode);this.closeDropDown(_2a6);this.inherited(arguments);},isLoaded:function(){return true;},loadDropDown:function(_2a7){_2a7();},loadAndOpenDropDown:function(){var d=new _295(),_2a8=lang.hitch(this,function(){this.openDropDown();d.resolve(this.dropDown);});if(!this.isLoaded()){this.loadDropDown(_2a8);}else{_2a8();}return d;},toggleDropDown:function(){if(this.disabled||this.readOnly){return;}if(!this._opened){this.loadAndOpenDropDown();}else{this.closeDropDown();}},openDropDown:function(){var _2a9=this.dropDown,_2aa=_2a9.domNode,_2ab=this._aroundNode||this.domNode,self=this;if(!this._preparedNode){this._preparedNode=true;if(_2aa.style.width){this._explicitDDWidth=true;}if(_2aa.style.height){this._explicitDDHeight=true;}}if(this.maxHeight||this.forceWidth||this.autoWidth){var _2ac={display:"",visibility:"hidden"};if(!this._explicitDDWidth){_2ac.width="";}if(!this._explicitDDHeight){_2ac.height="";}_29a.set(_2aa,_2ac);var _2ad=this.maxHeight;if(_2ad==-1){var _2ae=_29b.getBox(this.ownerDocument),_2af=_299.position(_2ab,false);_2ad=Math.floor(Math.max(_2af.y,_2ae.h-(_2af.y+_2af.h)));}_29e.moveOffScreen(_2a9);if(_2a9.startup&&!_2a9._started){_2a9.startup();}var mb=_299.getMarginSize(_2aa);var _2b0=(_2ad&&mb.h>_2ad);_29a.set(_2aa,{overflowX:"visible",overflowY:_2b0?"auto":"visible"});if(_2b0){mb.h=_2ad;if("w" in mb){mb.w+=16;}}else{delete mb.h;}if(this.forceWidth){mb.w=_2ab.offsetWidth;}else{if(this.autoWidth){mb.w=Math.max(mb.w,_2ab.offsetWidth);}else{delete mb.w;}}if(lang.isFunction(_2a9.resize)){_2a9.resize(mb);}else{_299.setMarginBox(_2aa,mb);}}var _2b1=_29e.open({parent:this,popup:_2a9,around:_2ab,orient:this.dropDownPosition,onExecute:function(){self.closeDropDown(true);},onCancel:function(){self.closeDropDown(true);},onClose:function(){_297.set(self._popupStateNode,"popupActive",false);_298.remove(self._popupStateNode,"dijitHasDropDownOpen");self._set("_opened",false);}});_297.set(this._popupStateNode,"popupActive","true");_298.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",true);this.domNode.setAttribute("aria-expanded","true");return _2b1;},closeDropDown:function(_2b2){if(this._focusDropDownTimer){this._focusDropDownTimer.remove();delete this._focusDropDownTimer;}if(this._opened){this.domNode.setAttribute("aria-expanded","false");if(_2b2){this.focus();}_29e.close(this.dropDown);this._opened=false;}}});});},"dijit/_editor/plugins/EnterKeyHandling":function(){define("dijit/_editor/plugins/EnterKeyHandling",["dojo/_base/declare","dojo/dom-construct","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/_base/window","dojo/window","../_Plugin","../RichText","../range","../../_base/focus"],function(_2b3,_2b4,_2b5,keys,lang,has,win,_2b6,_2b7,_2b8,_2b9,_2ba){return _2b3("dijit._editor.plugins.EnterKeyHandling",_2b7,{blockNodeForEnter:"BR",constructor:function(args){if(args){if("blockNodeForEnter" in args){args.blockNodeForEnter=args.blockNodeForEnter.toUpperCase();}lang.mixin(this,args);}},setEditor:function(_2bb){if(this.editor===_2bb){return;}this.editor=_2bb;if(this.blockNodeForEnter=="BR"){this.editor.customUndo=true;_2bb.onLoadDeferred.then(lang.hitch(this,function(d){this.connect(_2bb.document,"onkeypress",function(e){if(e.charOrCode==keys.ENTER){var ne=lang.mixin({},e);ne.shiftKey=true;if(!this.handleEnterKey(ne)){_2b5.stop(e);}}});if(has("ie")>=9){this.connect(_2bb.document,"onpaste",function(e){setTimeout(dojo.hitch(this,function(){var r=this.editor.document.selection.createRange();r.move("character",-1);r.select();r.move("character",1);r.select();}),0);});}return d;}));}else{if(this.blockNodeForEnter){var h=lang.hitch(this,this.handleEnterKey);_2bb.addKeyHandler(13,0,0,h);_2bb.addKeyHandler(13,0,1,h);this.connect(this.editor,"onKeyPressed","onKeyPressed");}}},onKeyPressed:function(){if(this._checkListLater){if(win.withGlobal(this.editor.window,"isCollapsed",_2ba)){var _2bc=this.editor._sCall("getAncestorElement",["LI"]);if(!_2bc){_2b8.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);var _2bd=this.editor._sCall("getAncestorElement",[this.blockNodeForEnter]);if(_2bd){_2bd.innerHTML=this.bogusHtmlContent;if(has("ie")<=9){var r=this.editor.document.selection.createRange();r.move("character",-1);r.select();}}else{console.error("onKeyPressed: Cannot find the new block node");}}else{if(has("mozilla")){if(_2bc.parentNode.parentNode.nodeName=="LI"){_2bc=_2bc.parentNode.parentNode;}}var fc=_2bc.firstChild;if(fc&&fc.nodeType==1&&(fc.nodeName=="UL"||fc.nodeName=="OL")){_2bc.insertBefore(fc.ownerDocument.createTextNode(""),fc);var _2be=_2b9.create(this.editor.window);_2be.setStart(_2bc.firstChild,0);var _2bf=_2b9.getSelection(this.editor.window,true);_2bf.removeAllRanges();_2bf.addRange(_2be);}}}this._checkListLater=false;}if(this._pressedEnterInBlock){if(this._pressedEnterInBlock.previousSibling){this.removeTrailingBr(this._pressedEnterInBlock.previousSibling);}delete this._pressedEnterInBlock;}},bogusHtmlContent:"&#160;",blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(e){var _2c0,_2c1,_2c2,_2c3,_2c4,_2c5,doc=this.editor.document,br,rs,txt;if(e.shiftKey){var _2c6=this.editor._sCall("getParentElement",[]);var _2c7=_2b9.getAncestor(_2c6,this.blockNodes);if(_2c7){if(_2c7.tagName=="LI"){return true;}_2c0=_2b9.getSelection(this.editor.window);_2c1=_2c0.getRangeAt(0);if(!_2c1.collapsed){_2c1.deleteContents();_2c0=_2b9.getSelection(this.editor.window);_2c1=_2c0.getRangeAt(0);}if(_2b9.atBeginningOfContainer(_2c7,_2c1.startContainer,_2c1.startOffset)){br=doc.createElement("br");_2c2=_2b9.create(this.editor.window);_2c7.insertBefore(br,_2c7.firstChild);_2c2.setStartAfter(br);_2c0.removeAllRanges();_2c0.addRange(_2c2);}else{if(_2b9.atEndOfContainer(_2c7,_2c1.startContainer,_2c1.startOffset)){_2c2=_2b9.create(this.editor.window);br=doc.createElement("br");_2c7.appendChild(br);_2c7.appendChild(doc.createTextNode(""));_2c2.setStart(_2c7.lastChild,0);_2c0.removeAllRanges();_2c0.addRange(_2c2);}else{rs=_2c1.startContainer;if(rs&&rs.nodeType==3){txt=rs.nodeValue;_2c3=doc.createTextNode(txt.substring(0,_2c1.startOffset));_2c4=doc.createTextNode(txt.substring(_2c1.startOffset));_2c5=doc.createElement("br");if(_2c4.nodeValue==""&&has("webkit")){_2c4=doc.createTextNode("");}_2b4.place(_2c3,rs,"after");_2b4.place(_2c5,_2c3,"after");_2b4.place(_2c4,_2c5,"after");_2b4.destroy(rs);_2c2=_2b9.create(this.editor.window);_2c2.setStart(_2c4,0);_2c0.removeAllRanges();_2c0.addRange(_2c2);return false;}return true;}}}else{_2c0=_2b9.getSelection(this.editor.window);if(_2c0.rangeCount){_2c1=_2c0.getRangeAt(0);if(_2c1&&_2c1.startContainer){if(!_2c1.collapsed){_2c1.deleteContents();_2c0=_2b9.getSelection(this.editor.window);_2c1=_2c0.getRangeAt(0);}rs=_2c1.startContainer;if(rs&&rs.nodeType==3){var _2c8=false;var _2c9=_2c1.startOffset;if(rs.length<_2c9){ret=this._adjustNodeAndOffset(rs,_2c9);rs=ret.node;_2c9=ret.offset;}txt=rs.nodeValue;_2c3=doc.createTextNode(txt.substring(0,_2c9));_2c4=doc.createTextNode(txt.substring(_2c9));_2c5=doc.createElement("br");if(!_2c4.length){_2c4=doc.createTextNode("");_2c8=true;}if(_2c3.length){_2b4.place(_2c3,rs,"after");}else{_2c3=rs;}_2b4.place(_2c5,_2c3,"after");_2b4.place(_2c4,_2c5,"after");_2b4.destroy(rs);_2c2=_2b9.create(this.editor.window);_2c2.setStart(_2c4,0);_2c2.setEnd(_2c4,_2c4.length);_2c0.removeAllRanges();_2c0.addRange(_2c2);if(_2c8&&!has("webkit")){this.editor._sCall("remove",[]);}else{this.editor._sCall("collapse",[true]);}}else{var _2ca;if(_2c1.startOffset>=0){_2ca=rs.childNodes[_2c1.startOffset];}var _2c5=doc.createElement("br");var _2c4=doc.createTextNode("");if(!_2ca){rs.appendChild(_2c5);rs.appendChild(_2c4);}else{_2b4.place(_2c5,_2ca,"before");_2b4.place(_2c4,_2c5,"after");}_2c2=_2b9.create(this.editor.window);_2c2.setStart(_2c4,0);_2c2.setEnd(_2c4,_2c4.length);_2c0.removeAllRanges();_2c0.addRange(_2c2);this.editor._sCall("collapse",[true]);}}}else{_2b8.prototype.execCommand.call(this.editor,"inserthtml","<br>");}}return false;}var _2cb=true;_2c0=_2b9.getSelection(this.editor.window);_2c1=_2c0.getRangeAt(0);if(!_2c1.collapsed){_2c1.deleteContents();_2c0=_2b9.getSelection(this.editor.window);_2c1=_2c0.getRangeAt(0);}var _2cc=_2b9.getBlockAncestor(_2c1.endContainer,null,this.editor.editNode);var _2cd=_2cc.blockNode;if((this._checkListLater=(_2cd&&(_2cd.nodeName=="LI"||_2cd.parentNode.nodeName=="LI")))){if(has("mozilla")){this._pressedEnterInBlock=_2cd;}if(/^(\s|&nbsp;|&#160;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|&#160;|\xA0)<\/span>)?(<br>)?$/.test(_2cd.innerHTML)){_2cd.innerHTML="";if(has("webkit")){_2c2=_2b9.create(this.editor.window);_2c2.setStart(_2cd,0);_2c0.removeAllRanges();_2c0.addRange(_2c2);}this._checkListLater=false;}return true;}if(!_2cc.blockNode||_2cc.blockNode===this.editor.editNode){try{_2b8.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);}catch(e2){}_2cc={blockNode:this.editor._sCall("getAncestorElement",[this.blockNodeForEnter]),blockContainer:this.editor.editNode};if(_2cc.blockNode){if(_2cc.blockNode!=this.editor.editNode&&(!(_2cc.blockNode.textContent||_2cc.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)){this.removeTrailingBr(_2cc.blockNode);return false;}}else{_2cc.blockNode=this.editor.editNode;}_2c0=_2b9.getSelection(this.editor.window);_2c1=_2c0.getRangeAt(0);}var _2ce=doc.createElement(this.blockNodeForEnter);_2ce.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(_2cc.blockNode);var _2cf=_2c1.endOffset;var node=_2c1.endContainer;if(node.length<_2cf){var ret=this._adjustNodeAndOffset(node,_2cf);node=ret.node;_2cf=ret.offset;}if(_2b9.atEndOfContainer(_2cc.blockNode,node,_2cf)){if(_2cc.blockNode===_2cc.blockContainer){_2cc.blockNode.appendChild(_2ce);}else{_2b4.place(_2ce,_2cc.blockNode,"after");}_2cb=false;_2c2=_2b9.create(this.editor.window);_2c2.setStart(_2ce,0);_2c0.removeAllRanges();_2c0.addRange(_2c2);if(this.editor.height){_2b6.scrollIntoView(_2ce);}}else{if(_2b9.atBeginningOfContainer(_2cc.blockNode,_2c1.startContainer,_2c1.startOffset)){_2b4.place(_2ce,_2cc.blockNode,_2cc.blockNode===_2cc.blockContainer?"first":"before");if(_2ce.nextSibling&&this.editor.height){_2c2=_2b9.create(this.editor.window);_2c2.setStart(_2ce.nextSibling,0);_2c0.removeAllRanges();_2c0.addRange(_2c2);_2b6.scrollIntoView(_2ce.nextSibling);}_2cb=false;}else{if(_2cc.blockNode===_2cc.blockContainer){_2cc.blockNode.appendChild(_2ce);}else{_2b4.place(_2ce,_2cc.blockNode,"after");}_2cb=false;if(_2cc.blockNode.style){if(_2ce.style){if(_2cc.blockNode.style.cssText){_2ce.style.cssText=_2cc.blockNode.style.cssText;}}}rs=_2c1.startContainer;var _2d0;if(rs&&rs.nodeType==3){var _2d1,_2d2;_2cf=_2c1.endOffset;if(rs.length<_2cf){ret=this._adjustNodeAndOffset(rs,_2cf);rs=ret.node;_2cf=ret.offset;}txt=rs.nodeValue;_2c3=doc.createTextNode(txt.substring(0,_2cf));_2c4=doc.createTextNode(txt.substring(_2cf,txt.length));_2b4.place(_2c3,rs,"before");_2b4.place(_2c4,rs,"after");_2b4.destroy(rs);var _2d3=_2c3.parentNode;while(_2d3!==_2cc.blockNode){var tg=_2d3.tagName;var _2d4=doc.createElement(tg);if(_2d3.style){if(_2d4.style){if(_2d3.style.cssText){_2d4.style.cssText=_2d3.style.cssText;}}}if(_2d3.tagName==="FONT"){if(_2d3.color){_2d4.color=_2d3.color;}if(_2d3.face){_2d4.face=_2d3.face;}if(_2d3.size){_2d4.size=_2d3.size;}}_2d1=_2c4;while(_2d1){_2d2=_2d1.nextSibling;_2d4.appendChild(_2d1);_2d1=_2d2;}_2b4.place(_2d4,_2d3,"after");_2c3=_2d3;_2c4=_2d4;_2d3=_2d3.parentNode;}_2d1=_2c4;if(_2d1.nodeType==1||(_2d1.nodeType==3&&_2d1.nodeValue)){_2ce.innerHTML="";}_2d0=_2d1;while(_2d1){_2d2=_2d1.nextSibling;_2ce.appendChild(_2d1);_2d1=_2d2;}}_2c2=_2b9.create(this.editor.window);var _2d5;var _2d6=_2d0;if(this.blockNodeForEnter!=="BR"){while(_2d6){_2d5=_2d6;_2d2=_2d6.firstChild;_2d6=_2d2;}if(_2d5&&_2d5.parentNode){_2ce=_2d5.parentNode;_2c2.setStart(_2ce,0);_2c0.removeAllRanges();_2c0.addRange(_2c2);if(this.editor.height){_2b6.scrollIntoView(_2ce);}if(has("mozilla")){this._pressedEnterInBlock=_2cc.blockNode;}}else{_2cb=true;}}else{_2c2.setStart(_2ce,0);_2c0.removeAllRanges();_2c0.addRange(_2c2);if(this.editor.height){_2b6.scrollIntoView(_2ce);}if(has("mozilla")){this._pressedEnterInBlock=_2cc.blockNode;}}}}return _2cb;},_adjustNodeAndOffset:function(node,_2d7){while(node.length<_2d7&&node.nextSibling&&node.nextSibling.nodeType==3){_2d7=_2d7-node.length;node=node.nextSibling;}return {"node":node,"offset":_2d7};},removeTrailingBr:function(_2d8){var para=/P|DIV|LI/i.test(_2d8.tagName)?_2d8:this.editor._sCall("getParentOfType",[_2d8,["P","DIV","LI"]]);if(!para){return;}if(para.lastChild){if((para.childNodes.length>1&&para.lastChild.nodeType==3&&/^[\s\xAD]*$/.test(para.lastChild.nodeValue))||para.lastChild.tagName=="BR"){_2b4.destroy(para.lastChild);}}if(!para.childNodes.length){para.innerHTML=this.bogusHtmlContent;}}});});},"dojo/dnd/Selector":function(){define(["../_base/array","../_base/declare","../_base/event","../_base/kernel","../_base/lang","../dom","../dom-construct","../mouse","../_base/NodeList","../on","../touch","./common","./Container"],function(_2d9,_2da,_2db,_2dc,lang,dom,_2dd,_2de,_2df,on,_2e0,dnd,_2e1){var _2e2=_2da("dojo.dnd.Selector",_2e1,{constructor:function(node,_2e3){if(!_2e3){_2e3={};}this.singular=_2e3.singular;this.autoSync=_2e3.autoSync;this.selection={};this.anchor=null;this.simpleSelection=false;this.events.push(on(this.node,_2e0.press,lang.hitch(this,"onMouseDown")),on(this.node,_2e0.release,lang.hitch(this,"onMouseUp")));},singular:false,getSelectedNodes:function(){var t=new _2df();var e=dnd._empty;for(var i in this.selection){if(i in e){continue;}t.push(dom.byId(i));}return t;},selectNone:function(){return this._removeSelection()._removeAnchor();},selectAll:function(){this.forInItems(function(data,id){this._addItemClass(dom.byId(id),"Selected");this.selection[id]=1;},this);return this._removeAnchor();},deleteSelectedNodes:function(){var e=dnd._empty;for(var i in this.selection){if(i in e){continue;}var n=dom.byId(i);this.delItem(i);_2dd.destroy(n);}this.anchor=null;this.selection={};return this;},forInSelectedItems:function(f,o){o=o||_2dc.global;var s=this.selection,e=dnd._empty;for(var i in s){if(i in e){continue;}f.call(o,this.getItem(i),i,this);}},sync:function(){_2e2.superclass.sync.call(this);if(this.anchor){if(!this.getItem(this.anchor.id)){this.anchor=null;}}var t=[],e=dnd._empty;for(var i in this.selection){if(i in e){continue;}if(!this.getItem(i)){t.push(i);}}_2d9.forEach(t,function(i){delete this.selection[i];},this);return this;},insertNodes:function(_2e4,data,_2e5,_2e6){var _2e7=this._normalizedCreator;this._normalizedCreator=function(item,hint){var t=_2e7.call(this,item,hint);if(_2e4){if(!this.anchor){this.anchor=t.node;this._removeItemClass(t.node,"Selected");this._addItemClass(this.anchor,"Anchor");}else{if(this.anchor!=t.node){this._removeItemClass(t.node,"Anchor");this._addItemClass(t.node,"Selected");}}this.selection[t.node.id]=1;}else{this._removeItemClass(t.node,"Selected");this._removeItemClass(t.node,"Anchor");}return t;};_2e2.superclass.insertNodes.call(this,data,_2e5,_2e6);this._normalizedCreator=_2e7;return this;},destroy:function(){_2e2.superclass.destroy.call(this);this.selection=this.anchor=null;},onMouseDown:function(e){if(this.autoSync){this.sync();}if(!this.current){return;}if(!this.singular&&!dnd.getCopyKeyState(e)&&!e.shiftKey&&(this.current.id in this.selection)){this.simpleSelection=true;if(_2de.isLeft(e)){_2db.stop(e);}return;}if(!this.singular&&e.shiftKey){if(!dnd.getCopyKeyState(e)){this._removeSelection();}var c=this.getAllNodes();if(c.length){if(!this.anchor){this.anchor=c[0];this._addItemClass(this.anchor,"Anchor");}this.selection[this.anchor.id]=1;if(this.anchor!=this.current){var i=0,node;for(;i<c.length;++i){node=c[i];if(node==this.anchor||node==this.current){break;}}for(++i;i<c.length;++i){node=c[i];if(node==this.anchor||node==this.current){break;}this._addItemClass(node,"Selected");this.selection[node.id]=1;}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1;}}}else{if(this.singular){if(this.anchor==this.current){if(dnd.getCopyKeyState(e)){this.selectNone();}}else{this.selectNone();this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1;}}else{if(dnd.getCopyKeyState(e)){if(this.anchor==this.current){delete this.selection[this.anchor.id];this._removeAnchor();}else{if(this.current.id in this.selection){this._removeItemClass(this.current,"Selected");delete this.selection[this.current.id];}else{if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this._addItemClass(this.anchor,"Selected");}this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1;}}}else{if(!(this.current.id in this.selection)){this.selectNone();this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1;}}}}_2db.stop(e);},onMouseUp:function(){if(!this.simpleSelection){return;}this.simpleSelection=false;this.selectNone();if(this.current){this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1;}},onMouseMove:function(){this.simpleSelection=false;},onOverEvent:function(){this.onmousemoveEvent=on(this.node,_2e0.move,lang.hitch(this,"onMouseMove"));},onOutEvent:function(){if(this.onmousemoveEvent){this.onmousemoveEvent.remove();delete this.onmousemoveEvent;}},_removeSelection:function(){var e=dnd._empty;for(var i in this.selection){if(i in e){continue;}var node=dom.byId(i);if(node){this._removeItemClass(node,"Selected");}}this.selection={};return this;},_removeAnchor:function(){if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this.anchor=null;}return this;}});return _2e2;});},"esri/layers/OnDemandMode":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/geometry/Point","esri/tasks/query","esri/layers/RenderMode","esri/layers/GridLayout"],function(_2e8,_2e9,lang,_2ea,has,_2eb,_2ec,_2ed,_2ee,_2ef){var _2f0=_2e8([_2ee],{declaredClass:"esri.layers._OnDemandMode",constructor:function(_2f1){this.featureLayer=_2f1;this._featureMap={};this._queryErrorHandler=lang.hitch(this,this._queryErrorHandler);},initialize:function(map){this.inherited(arguments);var _2f2=this.featureLayer,_2f3=_2f2._srInfo;this._gridLayer=new _2ef(new _2ec(_2f3?_2f3.valid[0]:map.extent.xmin,map.extent.ymax,map.spatialReference),{width:_2f2._tileWidth,height:_2f2._tileHeight},{width:map.width,height:map.height},_2f3);this._cellMap={};this._gridLayer.setResolution(map.extent);},startup:function(){this._ioQueue=[];if(!this.featureLayer.suspended){this._zoomHandler();this._enableConnectors();}},propertyChangeHandler:function(type){if(this._init){if(type<2){this._zoomHandler();}else{console.log("FeatureLayer: layer in on-demand mode does not support time definitions. Layer id = "+this.featureLayer.id+", Layer URL = "+this.featureLayer.url);}}},destroy:function(){this._disableConnectors();this.inherited(arguments);},drawFeature:function(_2f4){var _2f5=this._gridLayer,geom=_2f4.geometry,_2f6=[];if(!geom){return;}_2f6=_2f5.getCellsInExtent((geom.type==="point")?{xmin:geom.x,ymin:geom.y,xmax:geom.x,ymax:geom.y}:geom.getExtent(),false).cells;var _2f7=this._cellMap,i,cell,oid=_2f4.attributes[this.featureLayer.objectIdField],_2f8,row,col;for(i=0;i<_2f6.length;i++){cell=_2f6[i];_2f8=cell.latticeID;row=cell.row;col=cell.col;if(_2f8){cell=(_2f7[_2f8]=(_2f7[_2f8]||cell));}else{_2f7[row]=_2f7[row]||{};cell=(_2f7[row][col]=(_2f7[row][col]||cell));}cell.features=cell.features||[];cell.features.push(_2f4);this._addFeatureIIf(oid,_2f4);this._incRefCount(oid);}},suspend:function(){if(!this._init){return;}this._disableConnectors();},resume:function(){if(!this._init){return;}this._enableConnectors();this._zoomHandler();},refresh:function(){this._zoomHandler();},_enableConnectors:function(){var map=this.map;this._zoomConnect=_2e9.connect(map,"onZoomEnd",this,this._zoomHandler);this._panConnect=_2e9.connect(map,"onPanEnd",this,this._panHandler);this._resizeConnect=_2e9.connect(map,"onResize",this,this._panHandler);},_disableConnectors:function(){_2e9.disconnect(this._zoomConnect);_2e9.disconnect(this._panConnect);_2e9.disconnect(this._resizeConnect);},_zoomHandler:function(){this._processIOQueue(true);var _2f9=this.featureLayer,map=this.map;if(_2f9.suspended){return;}_2f9._fireUpdateStart();this._clearIIf();var _2fa=_2f9._trackManager;if(_2fa){_2fa.clearTracks();}this._cellMap={};this._gridLayer.setResolution(map.extent);this._sendRequest();},_panHandler:function(){this.featureLayer._fireUpdateStart();this._sendRequest(this.featureLayer._resized&&arguments[0]);},_getRequestId:function(_2fb,cell){var id="_"+_2fb.name+_2fb.layerId+_2fb._ulid+"_"+cell.resolution+"_"+(cell.latticeID||(cell.row+"_"+cell.col));return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_sendRequest:function(_2fc){this._exceeds=false;var _2fd=this.featureLayer,map=this.map,_2fe=_2fc||map.extent,_2ff=this._gridLayer.getCellsInExtent(_2fe,_2fd.latticeTiling),_300=_2ff.cells;if(!_2fd.isEditable()){var _301=this._cellMap;_300=_2ea.filter(_300,function(cell){if(cell.lattice){if(_301[cell.latticeID]){return false;}}else{if(_301[cell.row]&&_301[cell.row][cell.col]){return false;}}return true;});}var _302=_2fd._getOutFields(),_303=_2fd.getDefinitionExpression(),time=_2fd._getOffsettedTE(_2fd._mapTimeExtent),_304=_2fd._usePatch,_305=this._ioQueue,i,self=this,func=this._drawFeatures,cell,_306,_307;this._pending=this._pending||0;for(i=0;i<_300.length;i++){cell=_300[i];_306=new _2ed();_306.geometry=cell.extent||cell.lattice;_306.outFields=_302;_306.where=_303;if(_2fd.latticeTiling&&cell.extent){_306.spatialRelationship=_2ed.SPATIAL_REL_CONTAINS;}_306.returnGeometry=true;_306.timeExtent=time;_306.maxAllowableOffset=_2fd._maxOffset;if(_2fd._ts){_306._ts=(new Date()).getTime();}_307=null;if(_304){_307=this._getRequestId(_2fd,cell);if(this._isPending(_307)){continue;}}this._pending++;_305.push(_2fd._task.execute(_306,function(){var _308=cell;return function(_309){func.apply(self,[_309,_308]);};}.call(this),this._queryErrorHandler,_307));}this._removeOldCells(_2fe);this._endCheck();},_drawFeatures:function(_30a,cell){this._exceeds=this._exceeds||_30a.exceededTransferLimit;this._finalizeIO();var _30b=this.featureLayer,map=this.map,_30c=map.extent,_30d=cell.extent,row=cell.row,col=cell.col,_30e=_30b.objectIdField,_30f=_30a.features,_310=this._gridLayer,_311=this._cellMap,i,len,_312=cell.latticeID,_313=_312?_311[_312]:(_311[row]&&_311[row][col]);if((cell.resolution!=_310._resolution)||(_312?(_312!==_310.getLatticeID(_30c)):(!_310.intersects(_30d,_30c)))){if(_313){this._removeCell(row,col,_312);}}else{if(_313){this._updateCell(_313,_30f);}else{cell.features=_30f;if(_312){_311[_312]=cell;}else{_311[row]=_311[row]||{};_311[row][col]=cell;}len=_30f.length;for(i=0;i<len;i++){var _314=_30f[i];var oid=_314.attributes[_30e];this._addFeatureIIf(oid,_314);this._incRefCount(oid);}}}this._endCheck();},_queryErrorHandler:function(err){this._finalizeIO();this.featureLayer._errorHandler(err);this._endCheck(true);},_finalizeIO:function(){this._purgeRequests();this._pending--;},_endCheck:function(_315){if(this._pending===0){this._processIOQueue();var _316=this.featureLayer,_317=_316._trackManager;if(_317){_317.clearTracks();_317.addFeatures(_316.graphics);if(_316._ager){_2ea.forEach(_316.graphics,function(_318){if(_318._shape){_316._repaint(_318);}});}_317.moveLatestToFront();_317.drawTracks();}this.featureLayer._fireUpdateEnd(_315&&new Error("FeatureLayer: an error occurred while updating the layer"),this._exceeds?{queryLimitExceeded:true}:null);if(this._exceeds){_316.onQueryLimitExceeded();}}},_processIOQueue:function(_319){this._ioQueue=_2ea.filter(this._ioQueue,function(dfd){var keep=dfd.fired>-1?false:true;return keep;});if(_319){_2ea.forEach(this._ioQueue,this._cancelPendingRequest);}},_removeOldCells:function(_31a){var _31b=this._cellMap,_31c=this._gridLayer,_31d,_31e;for(_31d in _31b){if(_31b[_31d]){var row=_31b[_31d],_31f=row.latticeID,_320=0,_321=0;if(_31f){_320++;if(_31f!==_31c.getLatticeID(_31a)){this._removeCell(null,null,_31f);_321++;}}else{for(_31e in row){if(row[_31e]){_320++;var _322=row[_31e].extent;if(!_31c.intersects(_322,_31a)){this._removeCell(_31d,_31e);_321++;}}}}if(_321===_320){delete _31b[_31d];}}}},_updateCell:function(cell,_323){var _324=this.featureLayer,_325=_324.objectIdField,_326=_324._selectedFeatures,i,len=_323.length;cell.features=cell.features||[];for(i=0;i<len;i++){var _327=_323[i];var oid=_327.attributes[_325];var _328=this._addFeatureIIf(oid,_327);if(_328===_327){this._incRefCount(oid);cell.features.push(_328);}else{if(!(oid in _326)){_328.setGeometry(_327.geometry);_328.setAttributes(_327.attributes);}}}},_removeCell:function(row,col,_329){var _32a=this._cellMap,_32b=this.featureLayer,_32c=_32b.objectIdField;var cell=_329?_32a[_329]:(_32a[row]&&_32a[row][col]);if(cell){if(_329){delete _32a[_329];}else{delete _32a[row][col];}var _32d=cell.features,i;for(i=0;i<_32d.length;i++){var _32e=_32d[i];var oid=_32e.attributes[_32c];this._decRefCount(oid);if(oid in _32b._selectedFeatures){continue;}this._removeFeatureIIf(oid);}}}});if(has("extend-esri")){lang.setObject("layers._OnDemandMode",_2f0,_2eb);}return _2f0;});},"dijit/_MenuBase":function(){define("dijit/_MenuBase",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/lang","dojo/mouse","dojo/on","dojo/window","./a11yclick","./popup","./registry","./_Widget","./_KeyNavContainer","./_TemplatedMixin"],function(_32f,_330,dom,_331,_332,lang,_333,on,_334,_335,pm,_336,_337,_338,_339){return _330("dijit._MenuBase",[_337,_339,_338],{parentMenu:null,popupDelay:500,autoFocus:false,childSelector:function(node){var _33a=_336.byNode(node);return node.parentNode==this.containerNode&&_33a&&_33a.focus;},postCreate:function(){var self=this,_33b=typeof this.childSelector=="string"?this.childSelector:lang.hitch(this,"childSelector");this.own(on(this.containerNode,on.selector(_33b,_333.enter),function(){self.onItemHover(_336.byNode(this));}),on(this.containerNode,on.selector(_33b,_333.leave),function(){self.onItemUnhover(_336.byNode(this));}),on(this.containerNode,on.selector(_33b,_335),function(evt){self.onItemClick(_336.byNode(this),evt);evt.stopPropagation();evt.preventDefault();}));this.inherited(arguments);},onExecute:function(){},onCancel:function(){},_moveToPopup:function(evt){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.onItemClick(this.focusedChild,evt);}else{var _33c=this._getTopMenu();if(_33c&&_33c._isMenuBar){_33c.focusNext();}}},_onPopupHover:function(){if(this.currentPopup&&this.currentPopup._pendingClose_timer){var _33d=this.currentPopup.parentMenu;if(_33d.focusedChild){_33d.focusedChild._setSelected(false);}_33d.focusedChild=this.currentPopup.from_item;_33d.focusedChild._setSelected(true);this._stopPendingCloseTimer(this.currentPopup);}},onItemHover:function(item){if(this.isActive){this.focusChild(item);if(this.focusedChild.popup&&!this.focusedChild.disabled&&!this.hover_timer){this.hover_timer=this.defer("_openPopup",this.popupDelay);}}if(this.focusedChild){this.focusChild(item);}this._hoveredChild=item;item._set("hovering",true);},_onChildBlur:function(item){this._stopPopupTimer();item._setSelected(false);var _33e=item.popup;if(_33e){this._stopPendingCloseTimer(_33e);_33e._pendingClose_timer=this.defer(function(){_33e._pendingClose_timer=null;if(_33e.parentMenu){_33e.parentMenu.currentPopup=null;}pm.close(_33e);},this.popupDelay);}},onItemUnhover:function(item){if(this.isActive){this._stopPopupTimer();}if(this._hoveredChild==item){this._hoveredChild=null;}item._set("hovering",false);},_stopPopupTimer:function(){if(this.hover_timer){this.hover_timer=this.hover_timer.remove();}},_stopPendingCloseTimer:function(_33f){if(_33f._pendingClose_timer){_33f._pendingClose_timer=_33f._pendingClose_timer.remove();}},_stopFocusTimer:function(){if(this._focus_timer){this._focus_timer=this._focus_timer.remove();}},_getTopMenu:function(){for(var top=this;top.parentMenu;top=top.parentMenu){}return top;},onItemClick:function(item,evt){if(typeof this.isShowingNow=="undefined"){this._markActive();}this.focusChild(item);if(item.disabled){return false;}if(item.popup){this._openPopup(evt.type=="keypress");}else{this.onExecute();item._onClick?item._onClick(evt):item.onClick(evt);}},_openPopup:function(_340){this._stopPopupTimer();var _341=this.focusedChild;if(!_341){return;}var _342=_341.popup;if(!_342.isShowingNow){if(this.currentPopup){this._stopPendingCloseTimer(this.currentPopup);pm.close(this.currentPopup);}_342.parentMenu=this;_342.from_item=_341;var self=this;pm.open({parent:this,popup:_342,around:_341.domNode,orient:this._orient||["after","before"],onCancel:function(){self.focusChild(_341);self._cleanUp();_341._setSelected(true);self.focusedChild=_341;},onExecute:lang.hitch(this,"_cleanUp")});this.currentPopup=_342;_342.connect(_342.domNode,"onmouseenter",lang.hitch(self,"_onPopupHover"));}if(_340&&_342.focus){_342._focus_timer=this.defer(lang.hitch(_342,function(){this._focus_timer=null;this.focus();}));}},_markActive:function(){this.isActive=true;_332.replace(this.domNode,"dijitMenuActive","dijitMenuPassive");},onOpen:function(){this.isShowingNow=true;this._markActive();},_markInactive:function(){this.isActive=false;_332.replace(this.domNode,"dijitMenuPassive","dijitMenuActive");},onClose:function(){this._stopFocusTimer();this._markInactive();this.isShowingNow=false;this.parentMenu=null;},_closeChild:function(){this._stopPopupTimer();if(this.currentPopup){if(_32f.indexOf(this._focusManager.activeStack,this.id)>=0){_331.set(this.focusedChild.focusNode,"tabIndex",this.tabIndex);this.focusedChild.focusNode.focus();}pm.close(this.currentPopup);this.currentPopup=null;}if(this.focusedChild){this.focusedChild._setSelected(false);this.onItemUnhover(this.focusedChild);this.focusedChild=null;}},_onItemFocus:function(item){if(this._hoveredChild&&this._hoveredChild!=item){this.onItemUnhover(this._hoveredChild);}},_onBlur:function(){this._cleanUp();this.inherited(arguments);},_cleanUp:function(){this._closeChild();if(typeof this.isShowingNow=="undefined"){this._markInactive();}}});});},"esri/layers/SelectionMode":function(){define("esri/layers/SelectionMode",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/layers/RenderMode"],function(_343,lang,has,_344,_345){var _346=_343([_345],{declaredClass:"esri.layers._SelectionMode",constructor:function(_347){this.featureLayer=_347;this._featureMap={};},propertyChangeHandler:function(type){if(this._init&&type===0){this._applyTimeFilter();}},resume:function(){this.propertyChangeHandler(0);}});if(has("extend-esri")){lang.setObject("layers._SelectionMode",_346,_344);}return _346;});},"dijit/focus":function(){define("dijit/focus",["dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/Evented","dojo/_base/lang","dojo/on","dojo/ready","dojo/sniff","dojo/Stateful","dojo/_base/unload","dojo/_base/window","dojo/window","./a11y","./registry","./main"],function(_348,_349,dom,_34a,_34b,_34c,lang,on,_34d,has,_34e,_34f,win,_350,a11y,_351,_352){var _353=_349([_34e,_34c],{curNode:null,activeStack:[],constructor:function(){var _354=lang.hitch(this,function(node){if(dom.isDescendant(this.curNode,node)){this.set("curNode",null);}if(dom.isDescendant(this.prevNode,node)){this.set("prevNode",null);}});_348.before(_34b,"empty",_354);_348.before(_34b,"destroy",_354);},registerIframe:function(_355){return this.registerWin(_355.contentWindow,_355);},registerWin:function(_356,_357){var _358=this;var _359=function(evt){_358._justMouseDowned=true;setTimeout(function(){_358._justMouseDowned=false;},0);if(has("ie")&&evt&&evt.srcElement&&evt.srcElement.parentNode==null){return;}_358._onTouchNode(_357||evt.target||evt.srcElement,"mouse");};var doc=has("ie")?_356.document.documentElement:_356.document;if(doc){if(has("ie")){_356.document.body.attachEvent("onmousedown",_359);var _35a=function(evt){var tag=evt.srcElement.tagName.toLowerCase();if(tag=="#document"||tag=="body"){return;}if(a11y.isTabNavigable(evt.srcElement)){_358._onFocusNode(_357||evt.srcElement);}else{_358._onTouchNode(_357||evt.srcElement);}};doc.attachEvent("onfocusin",_35a);var _35b=function(evt){_358._onBlurNode(_357||evt.srcElement);};doc.attachEvent("onfocusout",_35b);return {remove:function(){_356.document.detachEvent("onmousedown",_359);doc.detachEvent("onfocusin",_35a);doc.detachEvent("onfocusout",_35b);doc=null;}};}else{doc.body.addEventListener("mousedown",_359,true);doc.body.addEventListener("touchstart",_359,true);var _35c=function(evt){_358._onFocusNode(_357||evt.target);};doc.addEventListener("focus",_35c,true);var _35d=function(evt){_358._onBlurNode(_357||evt.target);};doc.addEventListener("blur",_35d,true);return {remove:function(){doc.body.removeEventListener("mousedown",_359,true);doc.body.removeEventListener("touchstart",_359,true);doc.removeEventListener("focus",_35c,true);doc.removeEventListener("blur",_35d,true);doc=null;}};}}},_onBlurNode:function(node){if(this._clearFocusTimer){clearTimeout(this._clearFocusTimer);}this._clearFocusTimer=setTimeout(lang.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null);}),0);if(this._justMouseDowned){return;}if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);}this._clearActiveWidgetsTimer=setTimeout(lang.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([]);}),0);},_onTouchNode:function(node,by){if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);delete this._clearActiveWidgetsTimer;}var _35e=[];try{while(node){var _35f=_34a.get(node,"dijitPopupParent");if(_35f){node=_351.byId(_35f).domNode;}else{if(node.tagName&&node.tagName.toLowerCase()=="body"){if(node===win.body()){break;}node=_350.get(node.ownerDocument).frameElement;}else{var id=node.getAttribute&&node.getAttribute("widgetId"),_360=id&&_351.byId(id);if(_360&&!(by=="mouse"&&_360.get("disabled"))){_35e.unshift(id);}node=node.parentNode;}}}}catch(e){}this._setStack(_35e,by);},_onFocusNode:function(node){if(!node){return;}if(node.nodeType==9){return;}if(this._clearFocusTimer){clearTimeout(this._clearFocusTimer);delete this._clearFocusTimer;}this._onTouchNode(node);if(node==this.curNode){return;}this.set("prevNode",this.curNode);this.set("curNode",node);},_setStack:function(_361,by){var _362=this.activeStack;this.set("activeStack",_361);for(var _363=0;_363<Math.min(_362.length,_361.length);_363++){if(_362[_363]!=_361[_363]){break;}}var _364;for(var i=_362.length-1;i>=_363;i--){_364=_351.byId(_362[i]);if(_364){_364._hasBeenBlurred=true;_364.set("focused",false);if(_364._focusManager==this){_364._onBlur(by);}this.emit("widget-blur",_364,by);}}for(i=_363;i<_361.length;i++){_364=_351.byId(_361[i]);if(_364){_364.set("focused",true);if(_364._focusManager==this){_364._onFocus(by);}this.emit("widget-focus",_364,by);}}},focus:function(node){if(node){try{node.focus();}catch(e){}}}});var _365=new _353();_34d(function(){var _366=_365.registerWin(_350.get(win.doc));if(has("ie")){_34f.addOnWindowUnload(function(){if(_366){_366.remove();_366=null;}});}});_352.focus=function(node){_365.focus(node);};for(var attr in _365){if(!/^_/.test(attr)){_352.focus[attr]=typeof _365[attr]=="function"?lang.hitch(_365,attr):_365[attr];}}_365.watch(function(attr,_367,_368){_352.focus[attr]=_368;});return _365;});},"dijit/hccss":function(){define("dijit/hccss",["dojo/dom-class","dojo/hccss","dojo/ready","dojo/_base/window"],function(_369,has,_36a,win){_36a(90,function(){if(has("highcontrast")){_369.add(win.body(),"dijit_a11y");}});return has;});},"dojox/html/metrics":function(){define("dojox/html/metrics",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/sniff","dojo/ready","dojo/_base/unload","dojo/_base/window","dojo/dom-geometry"],function(_36b,lang,has,_36c,_36d,_36e,_36f){var dhm=lang.getObject("dojox.html.metrics",true);var _370=lang.getObject("dojox");dhm.getFontMeasurements=function(){var _371={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};if(has("ie")){_36e.doc.documentElement.style.fontSize="100%";}var div=_36e.doc.createElement("div");var ds=div.style;ds.position="absolute";ds.left="-100px";ds.top="0";ds.width="30px";ds.height="1000em";ds.borderWidth="0";ds.margin="0";ds.padding="0";ds.outline="0";ds.lineHeight="1";ds.overflow="hidden";_36e.body().appendChild(div);for(var p in _371){ds.fontSize=p;_371[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}_36e.body().removeChild(div);div=null;return _371;};var _372=null;dhm.getCachedFontMeasurements=function(_373){if(_373||!_372){_372=dhm.getFontMeasurements();}return _372;};var _374=null,_375={};dhm.getTextBox=function(text,_376,_377){var m,s;if(!_374){m=_374=_36e.doc.createElement("div");var c=_36e.doc.createElement("div");c.appendChild(m);s=c.style;s.overflow="scroll";s.position="absolute";s.left="0px";s.top="-10000px";s.width="1px";s.height="1px";s.visibility="hidden";s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";_36e.body().appendChild(c);}else{m=_374;}m.className="";s=m.style;s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";if(arguments.length>1&&_376){for(var i in _376){if(i in _375){continue;}s[i]=_376[i];}}if(arguments.length>2&&_377){m.className=_377;}m.innerHTML=text;var box=_36f.position(m);box.w=m.parentNode.scrollWidth;return box;};var _378={w:16,h:16};dhm.getScrollbar=function(){return {w:_378.w,h:_378.h};};dhm._fontResizeNode=null;dhm.initOnFontResize=function(_379){var f=dhm._fontResizeNode=_36e.doc.createElement("iframe");var fs=f.style;fs.position="absolute";fs.width="5em";fs.height="10em";fs.top="-10000px";fs.display="none";if(has("ie")){f.onreadystatechange=function(){if(f.contentWindow.document.readyState=="complete"){f.onresize=f.contentWindow.parent[_370._scopeName].html.metrics._fontresize;}};}else{f.onload=function(){f.contentWindow.onresize=f.contentWindow.parent[_370._scopeName].html.metrics._fontresize;};}f.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}</script></head><body></body></html>'");_36e.body().appendChild(f);dhm.initOnFontResize=function(){};};dhm.onFontResize=function(){};dhm._fontresize=function(){dhm.onFontResize();};_36d.addOnUnload(function(){var f=dhm._fontResizeNode;if(f){if(has("ie")&&f.onresize){f.onresize=null;}else{if(f.contentWindow&&f.contentWindow.onresize){f.contentWindow.onresize=null;}}dhm._fontResizeNode=null;}});_36c(function(){try{var n=_36e.doc.createElement("div");n.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";_36e.body().appendChild(n);_378.w=n.offsetWidth-n.clientWidth;_378.h=n.offsetHeight-n.clientHeight;_36e.body().removeChild(n);delete n;}catch(e){}if("fontSizeWatch" in _36b.config&&!!_36b.config.fontSizeWatch){dhm.initOnFontResize();}});return dhm;});},"esri/dijit/editing/tools/MenuItemBase":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dijit/MenuItem","esri/dijit/editing/tools/ToolBase","esri/kernel"],function(_37a,lang,has,_37b,_37c,_37d){var MIB=_37a([_37b,_37c],{declaredClass:"esri.dijit.editing.tools.MenuItemBase",destroy:function(){_37b.prototype.destroy.apply(this,arguments);_37c.prototype.destroy.apply(this,arguments);}});if(has("extend-esri")){lang.setObject("dijit.editing.tools.MenuItemBase",MIB,_37d);}return MIB;});},"esri/dijit/editing/tools/Union":function(){define("esri/dijit/editing/tools/Union",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/graphicsUtils","esri/graphic","esri/toolbars/draw","esri/dijit/editing/Union","esri/dijit/editing/tools/ButtonToolBase","esri/kernel"],function(_37e,lang,_37f,has,_380,_381,Draw,_382,_383,_384){var _385=_37e([_383],{declaredClass:"esri.dijit.editing.tools.Union",id:"btnFeatureUnion",_enabledIcon:"toolbarIcon unionIcon",_disabledIcon:"toolbarIcon unionIcon",_drawType:Draw.POLYLINE,_enabled:true,_label:"NLS_unionLbl",_onClick:function(evt){this._settings.editor._activeTool="UNION";var _386=this._settings.layers;var _387=_37f.filter(_386,function(item){return (item.geometryType==="esriGeometryPolygon")&&(item.visible&&item._isMapAtVisibleScale());});var _388=[];var _389=0;_37f.forEach(_387,function(_38a,idx){var _38b=_38a.getSelectedFeatures();if(_38b.length>=2){_389++;var _38c=_37f.map(_38b,function(item){return new _381(lang.clone(item.toJson()));});this._settings.geometryService.union(_380.getGeometries(_38b),lang.hitch(this,function(_38d){var _38e=[_38b.pop().setGeometry(_38d)];_388.push({layer:_38a,updates:_38e,deletes:_38b,preUpdates:_38c});_389--;if(_389<=0){this.onApplyEdits(_388,lang.hitch(this,function(){if(this._settings.undoRedoManager){var _38f=this._settings.undoRedoManager;_37f.forEach(this._edits,lang.hitch(this,function(edit){_38f.add(new _382({featureLayer:edit.layer,addedGraphics:edit.deletes,preUpdatedGraphics:edit.preUpdates,postUpdatedGraphics:edit.updates}));}),this);}this._settings.editor._selectionHelper.clearSelection(false);this.onFinished();}));}}));}},this);}});if(has("extend-esri")){lang.setObject("dijit.editing.tools.Union",_385,_384);}return _385;});},"esri/tasks/query":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/jsonUtils","esri/tasks/SpatialRelationship","dojo/has!extend-esri?esri/tasks/QueryTask","dojo/has!extend-esri?esri/tasks/RelationshipQuery","dojo/has!extend-esri?esri/tasks/StatisticDefinition"],function(_390,lang,_391,_392,has,_393,_394,_395){var _396=_390(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=_396.SPATIAL_REL_INTERSECTS;},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:false,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,toJson:function(_397){var json={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},g=_397&&_397["geometry"]||this.geometry,ids=this.objectIds,_398=this.outFields,_399=this.outSpatialReference,_39a=this.groupByFieldsForStatistics,_39b=this.orderByFields,_39c=this.outStatistics;if(g){json.geometry=g;json.geometryType=_394.getJsonType(g);json.inSR=g.spatialReference.wkid||_392.toJson(g.spatialReference.toJson());}if(ids){json.objectIds=ids.join(",");}if(_398){json.outFields=_398.join(",");}if(_39a){json.groupByFieldsForStatistics=_39a.join(",");}if(_39b){json.orderByFields=_39b.join(",");}if(_39c){var _39d=[];_391.forEach(_39c,function(item,idx){_39d.push(item.toJson());});json.outStatistics=_392.toJson(_39d);}if(_399!==null){json.outSR=_399.wkid||_392.toJson(_399.toJson());}else{if(g){json.outSR=g.spatialReference.wkid||_392.toJson(g.spatialReference.toJson());}}var _39e=this.timeExtent;json.time=_39e?_39e.toJson().join(","):null;var _39f=this.relationParam;if(_39f&&this.spatialRelationship===_396.SPATIAL_REL_RELATION){json.relationParam=_39f;}json._ts=this._ts;return json;}});lang.mixin(_396,_395);if(has("extend-esri")){lang.setObject("tasks.Query",_396,_393);}return _396;});},"dijit/form/_ComboBoxMenuMixin":function(){define("dijit/form/_ComboBoxMenuMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/i18n","dojo/i18n!./nls/ComboBox"],function(_3a0,_3a1,_3a2,i18n){return _3a1("dijit.form._ComboBoxMenuMixin",null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=i18n.getLocalization("dijit.form","ComboBox",this.lang);},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages["previousMessage"];this.nextButton.innerHTML=this._messages["nextMessage"];},_setValueAttr:function(_3a3){this.value=_3a3;this.onChange(_3a3);},onClick:function(node){if(node==this.previousButton){this._setSelectedAttr(null);this.onPage(-1);}else{if(node==this.nextButton){this._setSelectedAttr(null);this.onPage(1);}else{this.onChange(node);}}},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null);},_createOption:function(item,_3a4){var _3a5=this._createMenuItem();var _3a6=_3a4(item);if(_3a6.html){_3a5.innerHTML=_3a6.label;}else{_3a5.appendChild(_3a5.ownerDocument.createTextNode(_3a6.label));}if(_3a5.innerHTML==""){_3a5.innerHTML="&#160;";}this.applyTextDir(_3a5,(_3a5.innerText||_3a5.textContent||""));return _3a5;},createOptions:function(_3a7,_3a8,_3a9){this.items=_3a7;this.previousButton.style.display=(_3a8.start==0)?"none":"";_3a2.set(this.previousButton,"id",this.id+"_prev");_3a0.forEach(_3a7,function(item,i){var _3aa=this._createOption(item,_3a9);_3aa.setAttribute("item",i);_3a2.set(_3aa,"id",this.id+i);this.nextButton.parentNode.insertBefore(_3aa,this.nextButton);},this);var _3ab=false;if(_3a7.total&&!_3a7.total.then&&_3a7.total!=-1){if((_3a8.start+_3a8.count)<_3a7.total){_3ab=true;}else{if((_3a8.start+_3a8.count)>_3a7.total&&_3a8.count==_3a7.length){_3ab=true;}}}else{if(_3a8.count==_3a7.length){_3ab=true;}}this.nextButton.style.display=_3ab?"":"none";_3a2.set(this.nextButton,"id",this.id+"_next");},clearResultList:function(){var _3ac=this.containerNode;while(_3ac.childNodes.length>2){_3ac.removeChild(_3ac.childNodes[_3ac.childNodes.length-2]);}this._setSelectedAttr(null);},highlightFirstOption:function(){this.selectFirstNode();},highlightLastOption:function(){this.selectLastNode();},selectFirstNode:function(){this.inherited(arguments);if(this.getHighlightedOption()==this.previousButton){this.selectNextNode();}},selectLastNode:function(){this.inherited(arguments);if(this.getHighlightedOption()==this.nextButton){this.selectPreviousNode();}},getHighlightedOption:function(){return this.selected;}});});},"dijit/form/_SearchMixin":function(){define("dijit/form/_SearchMixin",["dojo/data/util/filter","dojo/_base/declare","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/query","dojo/sniff","dojo/string","dojo/when","../registry"],function(_3ad,_3ae,_3af,keys,lang,_3b0,has,_3b1,when,_3b2){return _3ae("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:true,_abortQuery:function(){if(this.searchTimer){this.searchTimer=this.searchTimer.remove();}if(this._queryDeferHandle){this._queryDeferHandle=this._queryDeferHandle.remove();}if(this._fetchHandle){if(this._fetchHandle.abort){this._cancelingQuery=true;this._fetchHandle.abort();this._cancelingQuery=false;}if(this._fetchHandle.cancel){this._cancelingQuery=true;this._fetchHandle.cancel();this._cancelingQuery=false;}this._fetchHandle=null;}},_processInput:function(evt){if(this.disabled||this.readOnly){return;}var key=evt.charOrCode;if(evt.altKey||((evt.ctrlKey||evt.metaKey)&&(key!="x"&&key!="v"))||key==keys.SHIFT){return;}var _3b3=false;this._prev_key_backspace=false;switch(key){case keys.DELETE:case keys.BACKSPACE:this._prev_key_backspace=true;this._maskValidSubsetError=true;_3b3=true;break;default:_3b3=typeof key=="string"||key==229;}if(_3b3){if(!this.store){this.onSearch();}else{this.searchTimer=this.defer("_startSearchFromInput",1);}}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"));},_startSearch:function(text){this._abortQuery();var _3b4=this,_3b0=lang.clone(this.query),_3b5={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:true}},qs=_3b1.substitute(this.queryExpr,[text]),q,_3b6=function(){var _3b7=_3b4._fetchHandle=_3b4.store.query(_3b0,_3b5);if(_3b4.disabled||_3b4.readOnly||(q!==_3b4._lastQuery)){return;}when(_3b7,function(res){_3b4._fetchHandle=null;if(!_3b4.disabled&&!_3b4.readOnly&&(q===_3b4._lastQuery)){when(_3b7.total,function(_3b8){res.total=_3b8;var _3b9=_3b4.pageSize;if(isNaN(_3b9)||_3b9>res.total){_3b9=res.total;}res.nextPage=function(_3ba){_3b5.direction=_3ba=_3ba!==false;_3b5.count=_3b9;if(_3ba){_3b5.start+=res.length;if(_3b5.start>=res.total){_3b5.count=0;}}else{_3b5.start-=_3b9;if(_3b5.start<0){_3b5.count=Math.max(_3b9+_3b5.start,0);_3b5.start=0;}}if(_3b5.count<=0){res.length=0;_3b4.onSearch(res,_3b0,_3b5);}else{_3b6();}};_3b4.onSearch(res,_3b0,_3b5);});}},function(err){_3b4._fetchHandle=null;if(!_3b4._cancelingQuery){console.error(_3b4.declaredClass+" "+err.toString());}});};lang.mixin(_3b5,this.fetchProperties);if(this.store._oldAPI){q=qs;}else{q=_3ad.patternToRegExp(qs,this.ignoreCase);q.toString=function(){return qs;};}this._lastQuery=_3b0[this.searchAttr]=q;this._queryDeferHandle=this.defer(_3b6,this.searchDelay);},constructor:function(){this.query={};this.fetchProperties={};},postMixInProperties:function(){if(!this.store){var list=this.list;if(list){this.store=_3b2.byId(list);}}this.inherited(arguments);}});});},"dojox/grid/_RowSelector":function(){define("dojox/grid/_RowSelector",["dojo/_base/declare","./_View"],function(_3bb,_3bc){return _3bb("dojox.grid._RowSelector",_3bc,{defaultWidth:"2em",noscroll:true,padBorderWidth:2,buildRendering:function(){this.inherited("buildRendering",arguments);this.scrollboxNode.style.overflow="hidden";this.headerNode.style.visibility="hidden";},getWidth:function(){return this.viewWidth||this.defaultWidth;},buildRowContent:function(_3bd,_3be){var w=this.contentWidth||0;_3be.innerHTML="<table class=\"dojoxGridRowbarTable\" style=\"width:"+w+"px;height:1px;\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" role=\"presentation\"><tr><td class=\"dojoxGridRowbarInner\">&nbsp;</td></tr></table>";},renderHeader:function(){},updateRow:function(){},resize:function(){this.adaptHeight();},adaptWidth:function(){if(!("contentWidth" in this)&&this.contentNode&&this.contentNode.offsetWidth>0){this.contentWidth=this.contentNode.offsetWidth-this.padBorderWidth;}},doStyleRowNode:function(_3bf,_3c0){var n=["dojoxGridRowbar dojoxGridNonNormalizedCell"];if(this.grid.rows.isOver(_3bf)){n.push("dojoxGridRowbarOver");}if(this.grid.selection.isSelected(_3bf)){n.push("dojoxGridRowbarSelected");}_3c0.className=n.join(" ");},domouseover:function(e){this.grid.onMouseOverRow(e);},domouseout:function(e){if(!this.isIntraRowEvent(e)){this.grid.onMouseOutRow(e);}}});});},"dojo/parser":function(){define(["require","./_base/kernel","./_base/lang","./_base/array","./_base/config","./_base/html","./_base/window","./_base/url","./_base/json","./aspect","./date/stamp","./Deferred","./has","./query","./on","./ready"],function(_3c1,dojo,_3c2,_3c3,_3c4,_3c5,_3c6,_3c7,_3c8,_3c9,_3ca,_3cb,has,_3cc,don,_3cd){new Date("X");var _3ce=0;_3c9.after(_3c2,"extend",function(){_3ce++;},true);function _3cf(ctor){var map=ctor._nameCaseMap,_3d0=ctor.prototype;if(!map||map._extendCnt<_3ce){map=ctor._nameCaseMap={};for(var name in _3d0){if(name.charAt(0)==="_"){continue;}map[name.toLowerCase()]=name;}map._extendCnt=_3ce;}return map;};var _3d1={};function _3d2(_3d3){var ts=_3d3.join();if(!_3d1[ts]){var _3d4=[];for(var i=0,l=_3d3.length;i<l;i++){var t=_3d3[i];_3d4[_3d4.length]=(_3d1[t]=_3d1[t]||(_3c2.getObject(t)||(~t.indexOf("/")&&_3c1(t))));}var ctor=_3d4.shift();_3d1[ts]=_3d4.length?(ctor.createSubclass?ctor.createSubclass(_3d4):ctor.extend.apply(ctor,_3d4)):ctor;}return _3d1[ts];};var _3d5={_clearCache:function(){_3ce++;_3d1={};},_functionFromScript:function(_3d6,_3d7){var _3d8="",_3d9="",_3da=(_3d6.getAttribute(_3d7+"args")||_3d6.getAttribute("args")),_3db=_3d6.getAttribute("with");var _3dc=(_3da||"").split(/\s*,\s*/);if(_3db&&_3db.length){_3c3.forEach(_3db.split(/\s*,\s*/),function(part){_3d8+="with("+part+"){";_3d9+="}";});}return new Function(_3dc,_3d8+_3d6.innerHTML+_3d9);},instantiate:function(_3dd,_3de,_3df){_3de=_3de||{};_3df=_3df||{};var _3e0=(_3df.scope||dojo._scopeName)+"Type",_3e1="data-"+(_3df.scope||dojo._scopeName)+"-",_3e2=_3e1+"type",_3e3=_3e1+"mixins";var list=[];_3c3.forEach(_3dd,function(node){var type=_3e0 in _3de?_3de[_3e0]:node.getAttribute(_3e2)||node.getAttribute(_3e0);if(type){var _3e4=node.getAttribute(_3e3),_3e5=_3e4?[type].concat(_3e4.split(/\s*,\s*/)):[type];list.push({node:node,types:_3e5});}});return this._instantiate(list,_3de,_3df);},_instantiate:function(_3e6,_3e7,_3e8){var _3e9=_3c3.map(_3e6,function(obj){var ctor=obj.ctor||_3d2(obj.types);if(!ctor){throw new Error("Unable to resolve constructor for: '"+obj.types.join()+"'");}return this.construct(ctor,obj.node,_3e7,_3e8,obj.scripts,obj.inherited);},this);if(!_3e7._started&&!_3e8.noStart){_3c3.forEach(_3e9,function(_3ea){if(typeof _3ea.startup==="function"&&!_3ea._started){_3ea.startup();}});}return _3e9;},construct:function(ctor,node,_3eb,_3ec,_3ed,_3ee){var _3ef=ctor&&ctor.prototype;_3ec=_3ec||{};var _3f0={};if(_3ec.defaults){_3c2.mixin(_3f0,_3ec.defaults);}if(_3ee){_3c2.mixin(_3f0,_3ee);}var _3f1;if(has("dom-attributes-explicit")){_3f1=node.attributes;}else{if(has("dom-attributes-specified-flag")){_3f1=_3c3.filter(node.attributes,function(a){return a.specified;});}else{var _3f2=/^input$|^img$/i.test(node.nodeName)?node:node.cloneNode(false),_3f3=_3f2.outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,"");_3f1=_3c3.map(_3f3.split(/\s+/),function(name){var _3f4=name.toLowerCase();return {name:name,value:(node.nodeName=="LI"&&name=="value")||_3f4=="enctype"?node.getAttribute(_3f4):node.getAttributeNode(_3f4).value};});}}var _3f5=_3ec.scope||dojo._scopeName,_3f6="data-"+_3f5+"-",hash={};if(_3f5!=="dojo"){hash[_3f6+"props"]="data-dojo-props";hash[_3f6+"type"]="data-dojo-type";hash[_3f6+"mixins"]="data-dojo-mixins";hash[_3f5+"type"]="dojoType";hash[_3f6+"id"]="data-dojo-id";}var i=0,item,_3f7=[],_3f8,_3f9;while(item=_3f1[i++]){var name=item.name,_3fa=name.toLowerCase(),_3fb=item.value;switch(hash[_3fa]||_3fa){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":_3f9=_3fb;break;case "data-dojo-id":case "jsid":_3f8=_3fb;break;case "data-dojo-attach-point":case "dojoattachpoint":_3f0.dojoAttachPoint=_3fb;break;case "data-dojo-attach-event":case "dojoattachevent":_3f0.dojoAttachEvent=_3fb;break;case "class":_3f0["class"]=node.className;break;case "style":_3f0["style"]=node.style&&node.style.cssText;break;default:if(!(name in _3ef)){var map=_3cf(ctor);name=map[_3fa]||name;}if(name in _3ef){switch(typeof _3ef[name]){case "string":_3f0[name]=_3fb;break;case "number":_3f0[name]=_3fb.length?Number(_3fb):NaN;break;case "boolean":_3f0[name]=_3fb.toLowerCase()!="false";break;case "function":if(_3fb===""||_3fb.search(/[^\w\.]+/i)!=-1){_3f0[name]=new Function(_3fb);}else{_3f0[name]=_3c2.getObject(_3fb,false)||new Function(_3fb);}_3f7.push(name);break;default:var pVal=_3ef[name];_3f0[name]=(pVal&&"length" in pVal)?(_3fb?_3fb.split(/\s*,\s*/):[]):(pVal instanceof Date)?(_3fb==""?new Date(""):_3fb=="now"?new Date():_3ca.fromISOString(_3fb)):(pVal instanceof _3c7)?(dojo.baseUrl+_3fb):_3c8.fromJson(_3fb);}}else{_3f0[name]=_3fb;}}}for(var j=0;j<_3f7.length;j++){var _3fc=_3f7[j].toLowerCase();node.removeAttribute(_3fc);node[_3fc]=null;}if(_3f9){try{_3f9=_3c8.fromJson.call(_3ec.propsThis,"{"+_3f9+"}");_3c2.mixin(_3f0,_3f9);}catch(e){throw new Error(e.toString()+" in data-dojo-props='"+_3f9+"'");}}_3c2.mixin(_3f0,_3eb);if(!_3ed){_3ed=(ctor&&(ctor._noScript||_3ef._noScript)?[]:_3cc("> script[type^='dojo/']",node));}var _3fd=[],_3fe=[],_3ff=[],ons=[];if(_3ed){for(i=0;i<_3ed.length;i++){var _400=_3ed[i];node.removeChild(_400);var _401=(_400.getAttribute(_3f6+"event")||_400.getAttribute("event")),prop=_400.getAttribute(_3f6+"prop"),_402=_400.getAttribute(_3f6+"method"),_403=_400.getAttribute(_3f6+"advice"),_404=_400.getAttribute("type"),nf=this._functionFromScript(_400,_3f6);if(_401){if(_404=="dojo/connect"){_3fd.push({method:_401,func:nf});}else{if(_404=="dojo/on"){ons.push({event:_401,func:nf});}else{_3f0[_401]=nf;}}}else{if(_404=="dojo/aspect"){_3fd.push({method:_402,advice:_403,func:nf});}else{if(_404=="dojo/watch"){_3ff.push({prop:prop,func:nf});}else{_3fe.push(nf);}}}}}var _405=ctor.markupFactory||_3ef.markupFactory;var _406=_405?_405(_3f0,node,ctor):new ctor(_3f0,node);if(_3f8){_3c2.setObject(_3f8,_406);}for(i=0;i<_3fd.length;i++){_3c9[_3fd[i].advice||"after"](_406,_3fd[i].method,_3c2.hitch(_406,_3fd[i].func),true);}for(i=0;i<_3fe.length;i++){_3fe[i].call(_406);}for(i=0;i<_3ff.length;i++){_406.watch(_3ff[i].prop,_3ff[i].func);}for(i=0;i<ons.length;i++){don(_406,ons[i].event,ons[i].func);}return _406;},scan:function(root,_407){var list=[],mids=[],_408={};var _409=(_407.scope||dojo._scopeName)+"Type",_40a="data-"+(_407.scope||dojo._scopeName)+"-",_40b=_40a+"type",_40c=_40a+"textdir",_40d=_40a+"mixins";var node=root.firstChild;var _40e=_407.inherited;if(!_40e){function _40f(node,attr){return (node.getAttribute&&node.getAttribute(attr))||(node.parentNode&&_40f(node.parentNode,attr));};_40e={dir:_40f(root,"dir"),lang:_40f(root,"lang"),textDir:_40f(root,_40c)};for(var key in _40e){if(!_40e[key]){delete _40e[key];}}}var _410={inherited:_40e};var _411;var _412;function _413(_414){if(!_414.inherited){_414.inherited={};var node=_414.node,_415=_413(_414.parent);var _416={dir:node.getAttribute("dir")||_415.dir,lang:node.getAttribute("lang")||_415.lang,textDir:node.getAttribute(_40c)||_415.textDir};for(var key in _416){if(_416[key]){_414.inherited[key]=_416[key];}}}return _414.inherited;};while(true){if(!node){if(!_410||!_410.node){break;}node=_410.node.nextSibling;_412=false;_410=_410.parent;_411=_410.scripts;continue;}if(node.nodeType!=1){node=node.nextSibling;continue;}if(_411&&node.nodeName.toLowerCase()=="script"){type=node.getAttribute("type");if(type&&/^dojo\/\w/i.test(type)){_411.push(node);}node=node.nextSibling;continue;}if(_412){node=node.nextSibling;continue;}var type=node.getAttribute(_40b)||node.getAttribute(_409);var _417=node.firstChild;if(!type&&(!_417||(_417.nodeType==3&&!_417.nextSibling))){node=node.nextSibling;continue;}var _418;var ctor=null;if(type){var _419=node.getAttribute(_40d),_41a=_419?[type].concat(_419.split(/\s*,\s*/)):[type];try{ctor=_3d2(_41a);}catch(e){}if(!ctor){_3c3.forEach(_41a,function(t){if(~t.indexOf("/")&&!_408[t]){_408[t]=true;mids[mids.length]=t;}});}var _41b=ctor&&!ctor.prototype._noScript?[]:null;_418={types:_41a,ctor:ctor,parent:_410,node:node,scripts:_41b};_418.inherited=_413(_418);list.push(_418);}else{_418={node:node,scripts:_411,parent:_410};}node=_417;_411=_41b;_412=ctor&&ctor.prototype.stopParser&&!(_407.template);_410=_418;}var d=new _3cb();if(mids.length){if(has("dojo-debug-messages")){console.warn("WARNING: Modules being Auto-Required: "+mids.join(", "));}_3c1(mids,function(){d.resolve(_3c3.filter(list,function(_41c){if(!_41c.ctor){try{_41c.ctor=_3d2(_41c.types);}catch(e){}}var _41d=_41c.parent;while(_41d&&!_41d.types){_41d=_41d.parent;}var _41e=_41c.ctor&&_41c.ctor.prototype;_41c.instantiateChildren=!(_41e&&_41e.stopParser&&!(_407.template));_41c.instantiate=!_41d||(_41d.instantiate&&_41d.instantiateChildren);return _41c.instantiate;}));});}else{d.resolve(list);}return d.promise;},_require:function(_41f){var hash=_3c8.fromJson("{"+_41f.innerHTML+"}"),vars=[],mids=[],d=new _3cb();for(var name in hash){vars.push(name);mids.push(hash[name]);}_3c1(mids,function(){for(var i=0;i<vars.length;i++){_3c2.setObject(vars[i],arguments[i]);}d.resolve(arguments);});return d.promise;},_scanAmd:function(root){var _420=new _3cb(),_421=_420.promise;_420.resolve(true);var self=this;_3cc("script[type='dojo/require']",root).forEach(function(node){_421=_421.then(function(){return self._require(node);});node.parentNode.removeChild(node);});return _421;},parse:function(_422,_423){var root;if(!_423&&_422&&_422.rootNode){_423=_422;root=_423.rootNode;}else{if(_422&&_3c2.isObject(_422)&&!("nodeType" in _422)){_423=_422;}else{root=_422;}}root=root?_3c5.byId(root):_3c6.body();_423=_423||{};var _424=_423.template?{template:true}:{},_425=[],self=this;var p=this._scanAmd(root,_423).then(function(){return self.scan(root,_423);}).then(function(_426){return _425=_425.concat(self._instantiate(_426,_424,_423));}).otherwise(function(e){console.error("dojo/parser::parse() error",e);throw e;});_3c2.mixin(_425,p);return _425;}};if(1){dojo.parser=_3d5;}if(_3c4.parseOnLoad){_3cd(100,_3d5,"parse");}return _3d5;});},"url:dijit/form/templates/DropDownButton.html":"<span class=\"dijit dijitReset dijitInline\"\n\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" data-dojo-attach-point=\"_buttonNode\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\trole=\"button\" aria-haspopup=\"true\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\n\t\t\t\tdata-dojo-attach-point=\"iconNode\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode,_popupStateNode\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-point=\"valueNode\" role=\"presentation\"\n/></span>\n","dojo/dnd/Manager":function(){define(["../_base/array","../_base/declare","../_base/event","../_base/lang","../_base/window","../dom-class","../Evented","../has","../keys","../on","../topic","../touch","./common","./autoscroll","./Avatar"],function(_427,_428,_429,lang,win,_42a,_42b,has,keys,on,_42c,_42d,dnd,_42e,_42f){var _430=_428("dojo.dnd.Manager",[_42b],{constructor:function(){this.avatar=null;this.source=null;this.nodes=[];this.copy=true;this.target=null;this.canDropFlag=false;this.events=[];},OFFSET_X:has("touch")?0:16,OFFSET_Y:has("touch")?-64:16,overSource:function(_431){if(this.avatar){this.target=(_431&&_431.targetState!="Disabled")?_431:null;this.canDropFlag=Boolean(this.target);this.avatar.update();}_42c.publish("/dnd/source/over",_431);},outSource:function(_432){if(this.avatar){if(this.target==_432){this.target=null;this.canDropFlag=false;this.avatar.update();_42c.publish("/dnd/source/over",null);}}else{_42c.publish("/dnd/source/over",null);}},startDrag:function(_433,_434,copy){_42e.autoScrollStart(win.doc);this.source=_433;this.nodes=_434;this.copy=Boolean(copy);this.avatar=this.makeAvatar();win.body().appendChild(this.avatar.node);_42c.publish("/dnd/start",_433,_434,this.copy);this.events=[on(win.doc,_42d.move,lang.hitch(this,"onMouseMove")),on(win.doc,_42d.release,lang.hitch(this,"onMouseUp")),on(win.doc,"keydown",lang.hitch(this,"onKeyDown")),on(win.doc,"keyup",lang.hitch(this,"onKeyUp")),on(win.doc,"dragstart",_429.stop),on(win.body(),"selectstart",_429.stop)];var c="dojoDnd"+(copy?"Copy":"Move");_42a.add(win.body(),c);},canDrop:function(flag){var _435=Boolean(this.target&&flag);if(this.canDropFlag!=_435){this.canDropFlag=_435;this.avatar.update();}},stopDrag:function(){_42a.remove(win.body(),["dojoDndCopy","dojoDndMove"]);_427.forEach(this.events,function(_436){_436.remove();});this.events=[];this.avatar.destroy();this.avatar=null;this.source=this.target=null;this.nodes=[];},makeAvatar:function(){return new _42f(this);},updateAvatar:function(){this.avatar.update();},onMouseMove:function(e){var a=this.avatar;if(a){_42e.autoScrollNodes(e);var s=a.node.style;s.left=(e.pageX+this.OFFSET_X)+"px";s.top=(e.pageY+this.OFFSET_Y)+"px";var copy=Boolean(this.source.copyState(dnd.getCopyKeyState(e)));if(this.copy!=copy){this._setCopyStatus(copy);}}if(has("touch")){e.preventDefault();}},onMouseUp:function(e){if(this.avatar){if(this.target&&this.canDropFlag){var copy=Boolean(this.source.copyState(dnd.getCopyKeyState(e)));_42c.publish("/dnd/drop/before",this.source,this.nodes,copy,this.target,e);_42c.publish("/dnd/drop",this.source,this.nodes,copy,this.target,e);}else{_42c.publish("/dnd/cancel");}this.stopDrag();}},onKeyDown:function(e){if(this.avatar){switch(e.keyCode){case keys.CTRL:var copy=Boolean(this.source.copyState(true));if(this.copy!=copy){this._setCopyStatus(copy);}break;case keys.ESCAPE:_42c.publish("/dnd/cancel");this.stopDrag();break;}}},onKeyUp:function(e){if(this.avatar&&e.keyCode==keys.CTRL){var copy=Boolean(this.source.copyState(false));if(this.copy!=copy){this._setCopyStatus(copy);}}},_setCopyStatus:function(copy){this.copy=copy;this.source._markDndStatus(this.copy);this.updateAvatar();_42a.replace(win.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"));}});dnd._manager=null;_430.manager=dnd.manager=function(){if(!dnd._manager){dnd._manager=new _430();}return dnd._manager;};return _430;});},"dijit/form/ToggleButton":function(){define("dijit/form/ToggleButton",["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(_437,_438,_439,_43a){return _437("dijit.form.ToggleButton",[_439,_43a],{baseClass:"dijitToggleButton",setChecked:function(_43b){_438.deprecated("setChecked("+_43b+") is deprecated. Use set('checked',"+_43b+") instead.","","2.0");this.set("checked",_43b);}});});},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(lang,_43c){var _43d={};lang.setObject("dojo.date.stamp",_43d);_43d.fromISOString=function(_43e,_43f){if(!_43d._isoRegExp){_43d._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _440=_43d._isoRegExp.exec(_43e),_441=null;if(_440){_440.shift();if(_440[1]){_440[1]--;}if(_440[6]){_440[6]*=1000;}if(_43f){_43f=new Date(_43f);_43c.forEach(_43c.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _43f["get"+prop]();}),function(_442,_443){_440[_443]=_440[_443]||_442;});}_441=new Date(_440[0]||1970,_440[1]||0,_440[2]||1,_440[3]||0,_440[4]||0,_440[5]||0,_440[6]||0);if(_440[0]<100){_441.setFullYear(_440[0]||1970);}var _444=0,_445=_440[7]&&_440[7].charAt(0);if(_445!="Z"){_444=((_440[8]||0)*60)+(Number(_440[9])||0);if(_445!="-"){_444*=-1;}}if(_445){_444-=_441.getTimezoneOffset();}if(_444){_441.setTime(_441.getTime()+_444*60000);}}return _441;};_43d.toISOString=function(_446,_447){var _448=function(n){return (n<10)?"0"+n:n;};_447=_447||{};var _449=[],_44a=_447.zulu?"getUTC":"get",date="";if(_447.selector!="time"){var year=_446[_44a+"FullYear"]();date=["0000".substr((year+"").length)+year,_448(_446[_44a+"Month"]()+1),_448(_446[_44a+"Date"]())].join("-");}_449.push(date);if(_447.selector!="date"){var time=[_448(_446[_44a+"Hours"]()),_448(_446[_44a+"Minutes"]()),_448(_446[_44a+"Seconds"]())].join(":");var _44b=_446[_44a+"Milliseconds"]();if(_447.milliseconds){time+="."+(_44b<100?"0":"")+_448(_44b);}if(_447.zulu){time+="Z";}else{if(_447.selector!="time"){var _44c=_446.getTimezoneOffset();var _44d=Math.abs(_44c);time+=(_44c>0?"-":"+")+_448(Math.floor(_44d/60))+":"+_448(_44d%60);}}_449.push(time);}return _449.join("T");};return _43d;});},"esri/layers/GridLayout":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/SpatialReference","esri/geometry/Extent","esri/geometry/Polyline"],function(_44e,lang,_44f,has,_450,_451,_452,_453){var _454=_44e(null,{declaredClass:"esri.layers._GridLayout",constructor:function(_455,_456,_457,_458){this.origin=_455;this.cellWidth=_456.width;this.cellHeight=_456.height;this.mapWidth=_457.width;this.mapHeight=_457.height;this.srInfo=_458;},setResolution:function(_459){this._resolution=(_459.xmax-_459.xmin)/this.mapWidth;if(this.srInfo){var _45a=Math.round((2*this.srInfo.valid[1])/this._resolution),_45b=Math.round(_45a/this.cellWidth);this._frameStats=[_45b,0,_45b-1];}},getCellCoordinates:function(_45c){var res=this._resolution,_45d=this.origin;return {row:Math.floor((_45d.y-_45c.y)/(this.cellHeight*res)),col:Math.floor((_45c.x-_45d.x)/(this.cellWidth*res))};},normalize:function(col){var _45e=this._frameStats;if(_45e){var _45f=_45e[0],m180=_45e[1],p180=_45e[2];if(col<m180){col=col%_45f;col=col<m180?col+_45f:col;}else{if(col>p180){col=col%_45f;}}}return col;},intersects:function(_460,_461){var _462=this.srInfo;if(_462){return _44f.some(_461._getParts(_462),function(_463){return _460.intersects(_463.extent);});}else{return _460.intersects(_461);}},getCellExtent:function(row,col){var res=this._resolution,_464=this.origin,_465=this.cellWidth,_466=this.cellHeight;return new _452((col*_465*res)+_464.x,_464.y-((row+1)*_466*res),((col+1)*_465*res)+_464.x,_464.y-(row*_466*res),new _451(_464.spatialReference.toJson()));},getLatticeID:function(_467){var _468=this.getCellCoordinates({x:_467.xmin,y:_467.ymax}),_469=this.getCellCoordinates({x:_467.xmax,y:_467.ymin}),_46a=_468.row,_46b=_469.row,_46c=this.normalize(_468.col),_46d=this.normalize(_469.col);return _46a+"_"+_46b+"_"+_46c+"_"+_46d;},sorter:function(a,b){return (a<b)?-1:1;},getCellsInExtent:function(_46e,_46f){var _470=this.getCellCoordinates({x:_46e.xmin,y:_46e.ymax}),_471=this.getCellCoordinates({x:_46e.xmax,y:_46e.ymin}),_472=_470.row,_473=_471.row,_474=_470.col,_475=_471.col,_476=[],i,j,nj,_477=[],_478=[],len,xmin,xmax,ymin,ymax,_479=[],_47a,_47b;for(i=_472;i<=_473;i++){for(j=_474;j<=_475;j++){nj=this.normalize(j);_46e=this.getCellExtent(i,nj);_476.push({row:i,col:nj,extent:_46e,resolution:this._resolution});if(_46f){_477.push(_46e.xmin,_46e.xmax);_478.push(_46e.ymin,_46e.ymax);}}}_474=this.normalize(_474);_475=this.normalize(_475);_477.sort(this.sorter);_478.sort(this.sorter);len=_477.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_477[i]===_477[i+1]){_477.splice(i,1);}}}len=_478.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_478[i]===_478[i+1]){_478.splice(i,1);}}}if(_477.length&&_478.length){xmin=_477[0];xmax=_477[_477.length-1];ymin=_478[0];ymax=_478[_478.length-1];len=_477.length;for(i=0;i<len;i++){_479.push([[_477[i],ymax],[_477[i],ymin]]);}len=_478.length;for(i=0;i<len;i++){_479.push([[xmin,_478[i]],[xmax,_478[i]]]);}_47a=new _453({paths:_479,spatialReference:this.origin.spatialReference.toJson()});_47b=_472+"_"+_473+"_"+_474+"_"+_475;_476.push({latticeID:_47b,lattice:_47a,resolution:this._resolution});}return {minRow:_472,maxRow:_473,minCol:_474,maxCol:_475,cells:_476};}});if(has("extend-esri")){lang.setObject("layers._GridLayout",_454,_450);}return _454;});},"esri/layers/FeatureTemplate":function(){define("esri/layers/FeatureTemplate",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/graphic"],function(_47c,lang,has,_47d,_47e,_47f){var _480=_47c(null,{declaredClass:"esri.layers.FeatureTemplate",constructor:function(json){if(json&&lang.isObject(json)){this.name=json.name;this.description=json.description;this.drawingTool=json.drawingTool;var _481=json.prototype;this.prototype=new _47f(_481.geometry,null,_481.attributes);}},toJson:function(){return _47e.fixJson({name:this.name,description:this.description,drawingTool:this.drawingTool,prototype:this.prototype&&this.prototype.toJson()});}});lang.mixin(_480,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});if(has("extend-esri")){lang.setObject("layers.FeatureTemplate",_480,_47d);}return _480;});},"dijit/form/NumberSpinner":function(){define("dijit/form/NumberSpinner",["dojo/_base/declare","dojo/_base/event","dojo/keys","./_Spinner","./NumberTextBox"],function(_482,_483,keys,_484,_485){return _482("dijit.form.NumberSpinner",[_484,_485.Mixin],{baseClass:"dijitTextBox dijitSpinner dijitNumberTextBox",adjust:function(val,_486){var tc=this.constraints,v=isNaN(val),_487=!isNaN(tc.max),_488=!isNaN(tc.min);if(v&&_486!=0){val=(_486>0)?_488?tc.min:_487?tc.max:0:_487?this.constraints.max:_488?tc.min:0;}var _489=val+_486;if(v||isNaN(_489)){return val;}if(_487&&(_489>tc.max)){_489=tc.max;}if(_488&&(_489<tc.min)){_489=tc.min;}return _489;},_onKeyPress:function(e){if((e.charOrCode==keys.HOME||e.charOrCode==keys.END)&&!(e.ctrlKey||e.altKey||e.metaKey)&&typeof this.get("value")!="undefined"){var _48a=this.constraints[(e.charOrCode==keys.HOME?"min":"max")];if(typeof _48a=="number"){this._setValueAttr(_48a,false);}_483.stop(e);}}});});},"esri/dijit/editing/tools/Selection":function(){define("esri/dijit/editing/tools/Selection",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/Color","dojo/has","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/dijit/editing/tools/Edit","esri/dijit/editing/tools/SelectionTools","esri/dijit/editing/tools/DropDownToolBase","esri/kernel"],function(_48b,lang,_48c,_48d,_48e,has,_48f,_490,_491,Edit,_492,_493,_494){var _495=_48b([_493],{declaredClass:"esri.dijit.editing.tools.Selection",_enabled:true,activate:function(){this.inherited(arguments);this._sConnect=_48d.connect(this._toolbar,"onDrawEnd",this,"_onDrawEnd");},deactivate:function(){this.inherited(arguments);_48d.disconnect(this._sConnect);delete this._sConnect;},_initializeTool:function(){this._createSymbols();this._initializeLayers();this._toolTypes=["select","selectadd","selectremove"];},_onDrawEnd:function(_496){this.inherited(arguments);this._settings.editor._hideAttributeInspector();var _497=this._settings.layers;this._selectMethod=this._activeTool._selectMethod;this._settings.editor._selectionHelper.selectFeaturesByGeometry(_497,_496,this._selectMethod,lang.hitch(this,"onFinished"));},_createSymbols:function(){this._pointSelectionSymbol=new _48f(_48f.STYLE_CIRCLE,10,new _490(_490.STYLE_SOLID,new _48e([0,0,0]),1),new _48e([255,0,0,0.5]));this._polylineSelectionSymbol=new _490(_490.STYLE_SOLID,new _48e([0,200,255]),2);this._polygonSelectionSymbol=new _491(_491.STYLE_SOLID,new _490(_490.STYLE_SOLID,new _48e([0,0,0]),1),new _48e([0,200,255,0.5]));},_initializeLayers:function(){var _498=this._settings.layers;_48c.forEach(_498,this._setSelectionSymbol,this);},_setSelectionSymbol:function(_499){var _49a=null;switch(_499.geometryType){case "esriGeometryPoint":_49a=this._pointSelectionSymbol;break;case "esriGeometryPolyline":_49a=this._polylineSelectionSymbol;break;case "esriGeometryPolygon":_49a=this._polygonSelectionSymbol;break;}_499.setSelectionSymbol(_499._selectionSymbol||_49a);},_createTools:function(){_48c.forEach(this._toolTypes,this._createTool,this);this.inherited(arguments);},_createTool:function(_49b){var _49c=lang.mixin(_492[_49b],{settings:this._settings,onClick:lang.hitch(this,"onItemClicked")});this._tools[_49b.toUpperCase()]=new Edit(_49c);}});if(has("extend-esri")){lang.setObject("dijit.editing.tools.Selection",_495,_494);}return _495;});},"dijit/form/DateTextBox":function(){define("dijit/form/DateTextBox",["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(_49d,_49e,_49f){return _49d("dijit.form.DateTextBox",_49f,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:_49e,_selector:"date",value:new Date("")});});},"esri/undoManager":function(){define(["dojo/_base/declare","dojo/has","esri/kernel","dojo/has!extend-esri?esri/OperationBase"],function(_4a0,has,_4a1){var _4a2=_4a0(null,{declaredClass:"esri.UndoManager",maxOperations:10,canUndo:false,canRedo:false,position:0,length:0,onUndo:function(){},onRedo:function(){},onAdd:function(){},onChange:function(){},constructor:function(_4a3){_4a3=_4a3||{};if(_4a3.maxOperations){this.maxOperations=_4a3.maxOperations;}this._historyStack=[];},add:function(_4a4){if(this.maxOperations>0){while(this._historyStack.length>=this.maxOperations){this._historyStack.shift();}}this._historyStack.splice(this.position,0,_4a4);this.position++;this.clearRedo();this.onAdd();this._checkAvailability();},undo:function(){if(this.position===0){return null;}var _4a5=this.peekUndo();this.position--;if(_4a5){_4a5.performUndo();}this.onUndo();this._checkAvailability();},redo:function(){if(this.position===this._historyStack.length){return null;}var _4a6=this.peekRedo();this.position++;if(_4a6){_4a6.performRedo();}this.onRedo();this._checkAvailability();},_checkAvailability:function(){this.length=this._historyStack.length;if(this.length===0){this.canRedo=false;this.canUndo=false;}else{if(this.position===0){this.canRedo=true;this.canUndo=false;}else{if(this.position===this.length){this.canUndo=true;this.canRedo=false;}else{this.canUndo=true;this.canRedo=true;}}}this.onChange();},clearUndo:function(){this._historyStack.splice(0,this.position);this.position=0;this._checkAvailability();},clearRedo:function(){this._historyStack.splice(this.position,this._historyStack.length-this.position);this.position=this._historyStack.length;this._checkAvailability();},peekUndo:function(){if(this._historyStack.length>0&&this.position>0){return this.get(this.position-1);}},peekRedo:function(){if(this._historyStack.length>0&&this.position<this._historyStack.length){return this.get(this.position);}},get:function(idx){return this._historyStack[idx];},remove:function(idx){if(this._historyStack.length>0){this._historyStack.splice(idx,1);if(this.position>0){if(idx<this.position){this.position--;}}this._checkAvailability();}},destroy:function(){this._historyStack=null;}});if(has("extend-esri")){_4a1.UndoManager=_4a2;}return _4a2;});},"dijit/form/ComboButton":function(){require({cache:{"url:dijit/form/templates/ComboButton.html":"<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tcellspacing='0' cellpadding='0' role=\"presentation\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonNode\" data-dojo-attach-point=\"buttonNode\" data-dojo-attach-event=\"ondijitclick:_onClick,onkeypress:_onButtonKeyPress\"\n\t\t><div id=\"${id}_button\" class=\"dijitReset dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><div class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitInline dijitButtonText\" id=\"${id}_label\" data-dojo-attach-point=\"containerNode\" role=\"presentation\"></div\n\t\t></div\n\t\t></td\n\t\t><td id=\"${id}_arrow\" class='dijitReset dijitRight dijitButtonNode dijitArrowButton'\n\t\t\tdata-dojo-attach-point=\"_popupStateNode,focusNode,_buttonNode\"\n\t\t\tdata-dojo-attach-event=\"onkeypress:_onArrowKeyPress\"\n\t\t\ttitle=\"${optionsTitle}\"\n\t\t\trole=\"button\" aria-haspopup=\"true\"\n\t\t\t><div class=\"dijitReset dijitArrowButtonInner\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" role=\"presentation\">&#9660;</div\n\t\t></td\n\t\t><td style=\"display:none !important;\"\n\t\t\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" data-dojo-attach-point=\"valueNode\" role=\"presentation\"\n\t\t/></td></tr></tbody\n></table>\n"}});define("dijit/form/ComboButton",["dojo/_base/declare","dojo/_base/event","dojo/keys","../focus","./DropDownButton","dojo/text!./templates/ComboButton.html"],function(_4a7,_4a8,keys,_4a9,_4aa,_4ab){return _4a7("dijit.form.ComboButton",_4aa,{templateString:_4ab,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{"buttonNode":"dijitButtonNode","titleNode":"dijitButtonContents","_popupStateNode":"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyPress:function(evt){if(evt.charOrCode==keys[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]){_4a9.focus(this._popupStateNode);_4a8.stop(evt);}},_onArrowKeyPress:function(evt){if(evt.charOrCode==keys[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]){_4a9.focus(this.titleNode);_4a8.stop(evt);}},focus:function(_4ac){if(!this.disabled){_4a9.focus(_4ac=="start"?this.titleNode:this._popupStateNode);}}});});},"url:dijit/templates/Calendar.html":"<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" aria-labelledby=\"${id}_mddb ${id}_year\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' colspan=\"5\">\n\t\t\t\t<div data-dojo-attach-point=\"monthNode\">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role=\"row\">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point=\"dateRowsNode\" data-dojo-attach-event=\"onclick: _onDayClick\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\" role=\"presentation\">\n\t\t\t\t<div class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span data-dojo-attach-point=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\" role=\"button\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" role=\"button\" id=\"${id}_year\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\" role=\"button\"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n","dijit/form/_AutoCompleterMixin":function(){define("dijit/form/_AutoCompleterMixin",["dojo/data/util/filter","dojo/_base/declare","dojo/dom-attr","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/query","dojo/regexp","dojo/sniff","dojo/string","./DataList","../registry","./_TextBoxMixin","./_SearchMixin"],function(_4ad,_4ae,_4af,_4b0,keys,lang,_4b1,_4b2,has,_4b3,_4b4,_4b5,_4b6,_4b7){return _4ae("dijit.form._AutoCompleterMixin",_4b7,{item:null,autoComplete:true,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:false,_getCaretPos:function(_4b8){var pos=0;if(typeof (_4b8.selectionStart)=="number"){pos=_4b8.selectionStart;}else{if(has("ie")){var tr=_4b8.ownerDocument.selection.createRange().duplicate();var ntr=_4b8.createTextRange();tr.move("character",0);ntr.move("character",0);try{ntr.setEndPoint("EndToEnd",tr);pos=String(ntr.text).replace(/\r/g,"").length;}catch(e){}}}return pos;},_setCaretPos:function(_4b9,_4ba){_4ba=parseInt(_4ba);_4b6.selectInputText(_4b9,_4ba,_4ba);},_setDisabledAttr:function(_4bb){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",_4bb?"true":"false");},_onKey:function(evt){if(evt.charCode>=32){return;}var key=evt.charCode||evt.keyCode;if(key==keys.ALT||key==keys.CTRL||key==keys.META||key==keys.SHIFT){return;}var pw=this.dropDown;var _4bc=null;this._abortQuery();this.inherited(arguments);if(evt.altKey||evt.ctrlKey||evt.metaKey){return;}if(this._opened){_4bc=pw.getHighlightedOption();}switch(key){case keys.PAGE_DOWN:case keys.DOWN_ARROW:case keys.PAGE_UP:case keys.UP_ARROW:if(this._opened){this._announceOption(_4bc);}_4b0.stop(evt);break;case keys.ENTER:if(_4bc){if(_4bc==pw.nextButton){this._nextSearch(1);_4b0.stop(evt);break;}else{if(_4bc==pw.previousButton){this._nextSearch(-1);_4b0.stop(evt);break;}}_4b0.stop(evt);}else{this._setBlurValue();this._setCaretPos(this.focusNode,this.focusNode.value.length);}case keys.TAB:var _4bd=this.get("displayedValue");if(pw&&(_4bd==pw._messages["previousMessage"]||_4bd==pw._messages["nextMessage"])){break;}if(_4bc){this._selectOption(_4bc);}case keys.ESCAPE:if(this._opened){this._lastQuery=null;this.closeDropDown();}break;}},_autoCompleteText:function(text){var fn=this.focusNode;_4b6.selectInputText(fn,fn.value.length);var _4be=this.ignoreCase?"toLowerCase":"substr";if(text[_4be](0).indexOf(this.focusNode.value[_4be](0))==0){var cpos=this.autoComplete?this._getCaretPos(fn):fn.value.length;if((cpos+1)>fn.value.length){fn.value=text;_4b6.selectInputText(fn,cpos);}}else{fn.value=text;_4b6.selectInputText(fn);}},_openResultList:function(_4bf,_4c0,_4c1){var _4c2=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();if(!_4bf.length&&_4c1.start==0){this.closeDropDown();return;}this._nextSearch=this.dropDown.onPage=lang.hitch(this,function(_4c3){_4bf.nextPage(_4c3!==-1);this.focus();});this.dropDown.createOptions(_4bf,_4c1,lang.hitch(this,"_getMenuLabelFromItem"));this._showResultList();if("direction" in _4c1){if(_4c1.direction){this.dropDown.highlightFirstOption();}else{if(!_4c1.direction){this.dropDown.highlightLastOption();}}if(_4c2){this._announceOption(this.dropDown.getHighlightedOption());}}else{if(this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(_4c0[this.searchAttr].toString())){this._announceOption(this.dropDown.containerNode.firstChild.nextSibling);}}},_showResultList:function(){this.closeDropDown(true);this.openDropDown();this.domNode.setAttribute("aria-expanded","true");},loadDropDown:function(){this._startSearchAll();},isLoaded:function(){return false;},closeDropDown:function(){this._abortQuery();if(this._opened){this.inherited(arguments);this.domNode.setAttribute("aria-expanded","false");this.focusNode.removeAttribute("aria-activedescendant");}},_setBlurValue:function(){var _4c4=this.get("displayedValue");var pw=this.dropDown;if(pw&&(_4c4==pw._messages["previousMessage"]||_4c4==pw._messages["nextMessage"])){this._setValueAttr(this._lastValueReported,true);}else{if(typeof this.item=="undefined"){this.item=null;this.set("displayedValue",_4c4);}else{if(this.value!=this._lastValueReported){this._handleOnChange(this.value,true);}this._refreshState();}}},_setItemAttr:function(item,_4c5,_4c6){var _4c7="";if(item){if(!_4c6){_4c6=this.store._oldAPI?this.store.getValue(item,this.searchAttr):item[this.searchAttr];}_4c7=this._getValueField()!=this.searchAttr?this.store.getIdentity(item):_4c6;}this.set("value",_4c7,_4c5,_4c6,item);},_announceOption:function(node){if(!node){return;}var _4c8;if(node==this.dropDown.nextButton||node==this.dropDown.previousButton){_4c8=node.innerHTML;this.item=undefined;this.value="";}else{var item=this.dropDown.items[node.getAttribute("item")];_4c8=(this.store._oldAPI?this.store.getValue(item,this.searchAttr):item[this.searchAttr]).toString();this.set("item",item,false,_4c8);}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",_4af.get(node,"id"));this._autoCompleteText(_4c8);},_selectOption:function(_4c9){this.closeDropDown();if(_4c9){this._announceOption(_4c9);}this._setCaretPos(this.focusNode,this.focusNode.value.length);this._handleOnChange(this.value,true);},_startSearchAll:function(){this._startSearch("");},_startSearchFromInput:function(){this.item=undefined;this.inherited(arguments);},_startSearch:function(key){if(!this.dropDown){var _4ca=this.id+"_popup",_4cb=lang.isString(this.dropDownClass)?lang.getObject(this.dropDownClass,false):this.dropDownClass;this.dropDown=new _4cb({onChange:lang.hitch(this,this._selectOption),id:_4ca,dir:this.dir,textDir:this.textDir});this.focusNode.removeAttribute("aria-activedescendant");this.textbox.setAttribute("aria-owns",_4ca);}this._lastInput=key;this.inherited(arguments);},_getValueField:function(){return this.searchAttr;},postMixInProperties:function(){this.inherited(arguments);if(!this.store){var _4cc=this.srcNodeRef;this.store=new _4b4({},_4cc);if(!("value" in this.params)){var item=(this.item=this.store.fetchSelectedItem());if(item){var _4cd=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(item,_4cd):item[_4cd];}}}},postCreate:function(){var _4ce=_4b1("label[for=\""+this.id+"\"]");if(_4ce.length){if(!_4ce[0].id){_4ce[0].id=this.id+"_label";}this.domNode.setAttribute("aria-labelledby",_4ce[0].id);}this.inherited(arguments);this.connect(this,"onSearch","_openResultList");},_getMenuLabelFromItem:function(item){var _4cf=this.labelFunc(item,this.store),_4d0=this.labelType;if(this.highlightMatch!="none"&&this.labelType=="text"&&this._lastInput){_4cf=this.doHighlight(_4cf,this._lastInput);_4d0="html";}return {html:_4d0=="html",label:_4cf};},doHighlight:function(_4d1,find){var _4d2=(this.ignoreCase?"i":"")+(this.highlightMatch=="all"?"g":""),i=this.queryExpr.indexOf("${0}");find=_4b2.escapeString(find);return this._escapeHtml(_4d1.replace(new RegExp((i==0?"^":"")+"("+find+")"+(i==(this.queryExpr.length-4)?"$":""),_4d2),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,"<span class=\"dijitComboBoxHighlightMatch\">$1</span>");},_escapeHtml:function(str){str=String(str).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");return str;},reset:function(){this.item=null;this.inherited(arguments);},labelFunc:function(item,_4d3){return (_4d3._oldAPI?_4d3.getValue(item,this.labelAttr||this.searchAttr):item[this.labelAttr||this.searchAttr]).toString();},_setValueAttr:function(_4d4,_4d5,_4d6,item){this._set("item",item||null);if(_4d4==null){_4d4="";}this.inherited(arguments);},_setTextDirAttr:function(_4d7){this.inherited(arguments);if(this.dropDown){this.dropDown._set("textDir",_4d7);}}});});},"dojox/grid/Selection":function(){define("dojox/grid/Selection",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-attr"],function(_4d8,_4d9,lang,_4da){return _4d8("dojox.grid.Selection",null,{constructor:function(_4db){this.grid=_4db;this.selected=[];this.setMode(_4db.selectionMode);},mode:"extended",selected:null,updating:0,selectedIndex:-1,rangeStartIndex:-1,setMode:function(mode){if(this.selected.length){this.deselectAll();}if(mode!="extended"&&mode!="multiple"&&mode!="single"&&mode!="none"){this.mode="extended";}else{this.mode=mode;}},onCanSelect:function(_4dc){return this.grid.onCanSelect(_4dc);},onCanDeselect:function(_4dd){return this.grid.onCanDeselect(_4dd);},onSelected:function(_4de){},onDeselected:function(_4df){},onChanging:function(){},onChanged:function(){},isSelected:function(_4e0){if(this.mode=="none"){return false;}return this.selected[_4e0];},getFirstSelected:function(){if(!this.selected.length||this.mode=="none"){return -1;}for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){return i;}}return -1;},getNextSelected:function(_4e1){if(this.mode=="none"){return -1;}for(var i=_4e1+1,l=this.selected.length;i<l;i++){if(this.selected[i]){return i;}}return -1;},getSelected:function(){var _4e2=[];for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){_4e2.push(i);}}return _4e2;},getSelectedCount:function(){var c=0;for(var i=0;i<this.selected.length;i++){if(this.selected[i]){c++;}}return c;},_beginUpdate:function(){if(this.updating===0){this.onChanging();}this.updating++;},_endUpdate:function(){this.updating--;if(this.updating===0){this.onChanged();}},select:function(_4e3){if(this.mode=="none"){return;}if(this.mode!="multiple"){this.deselectAll(_4e3);this.addToSelection(_4e3);}else{this.toggleSelect(_4e3);}},addToSelection:function(_4e4){if(this.mode=="none"){return;}if(lang.isArray(_4e4)){_4d9.forEach(_4e4,this.addToSelection,this);return;}_4e4=Number(_4e4);if(this.selected[_4e4]){this.selectedIndex=_4e4;}else{if(this.onCanSelect(_4e4)!==false){this.selectedIndex=_4e4;var _4e5=this.grid.getRowNode(_4e4);if(_4e5){_4da.set(_4e5,"aria-selected","true");}this._beginUpdate();this.selected[_4e4]=true;this.onSelected(_4e4);this._endUpdate();}}},deselect:function(_4e6){if(this.mode=="none"){return;}if(lang.isArray(_4e6)){_4d9.forEach(_4e6,this.deselect,this);return;}_4e6=Number(_4e6);if(this.selectedIndex==_4e6){this.selectedIndex=-1;}if(this.selected[_4e6]){if(this.onCanDeselect(_4e6)===false){return;}var _4e7=this.grid.getRowNode(_4e6);if(_4e7){_4da.set(_4e7,"aria-selected","false");}this._beginUpdate();delete this.selected[_4e6];this.onDeselected(_4e6);this._endUpdate();}},setSelected:function(_4e8,_4e9){this[(_4e9?"addToSelection":"deselect")](_4e8);},toggleSelect:function(_4ea){if(lang.isArray(_4ea)){_4d9.forEach(_4ea,this.toggleSelect,this);return;}this.setSelected(_4ea,!this.selected[_4ea]);},_range:function(_4eb,inTo,func){var s=(_4eb>=0?_4eb:inTo),e=inTo;if(s>e){e=s;s=inTo;}for(var i=s;i<=e;i++){func(i);}},selectRange:function(_4ec,inTo){this._range(_4ec,inTo,lang.hitch(this,"addToSelection"));},deselectRange:function(_4ed,inTo){this._range(_4ed,inTo,lang.hitch(this,"deselect"));},insert:function(_4ee){this.selected.splice(_4ee,0,false);if(this.selectedIndex>=_4ee){this.selectedIndex++;}},remove:function(_4ef){this.selected.splice(_4ef,1);if(this.selectedIndex>=_4ef){this.selectedIndex--;}},deselectAll:function(_4f0){for(var i in this.selected){if((i!=_4f0)&&(this.selected[i]===true)){this.deselect(i);}}},clickSelect:function(_4f1,_4f2,_4f3){if(this.mode=="none"){return;}this._beginUpdate();if(this.mode!="extended"){this.select(_4f1);}else{if(!_4f3||this.rangeStartIndex<0){this.rangeStartIndex=_4f1;}if(!_4f2){this.deselectAll(_4f1);}if(_4f3){this.selectRange(this.rangeStartIndex,_4f1);}else{if(_4f2){this.toggleSelect(_4f1);}else{this.addToSelection(_4f1);}}}this._endUpdate();},clickSelectEvent:function(e){this.clickSelect(e.rowIndex,dojo.isCopyKey(e),e.shiftKey);},clear:function(){this._beginUpdate();this.deselectAll();this._endUpdate();}});});},"dijit/form/MappedTextBox":function(){define("dijit/form/MappedTextBox",["dojo/_base/declare","dojo/dom-construct","./ValidationTextBox"],function(_4f4,_4f5,_4f6){return _4f4("dijit.form.MappedTextBox",_4f6,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting="";},_setNameAttr:null,serialize:function(val){return val.toString?val.toString():"";},toString:function(){var val=this.filter(this.get("value"));return val!=null?(typeof val=="string"?val:this.serialize(val,this.constraints)):"";},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);this.valueNode=_4f5.place("<input type='hidden'"+(this.name?" name=\""+this.name.replace(/"/g,"&quot;")+"\"":"")+"/>",this.textbox,"after");},reset:function(){this.valueNode.value="";this.inherited(arguments);}});});},"dijit/form/ComboBoxMixin":function(){require({cache:{"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"button presentation\" aria-hidden=\"true\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"}});define("dijit/form/ComboBoxMixin",["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/kernel","dojo/_base/lang","dojo/store/util/QueryResults","./_AutoCompleterMixin","./_ComboBoxMenu","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(_4f7,_4f8,_4f9,lang,_4fa,_4fb,_4fc,_4fd,_4fe){return _4f7("dijit.form.ComboBoxMixin",[_4fd,_4fb],{dropDownClass:_4fc,hasDownArrow:true,templateString:_4fe,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},_setHasDownArrowAttr:function(val){this._set("hasDownArrow",val);this._buttonNode.style.display=val?"":"none";},_showResultList:function(){this.displayMessage("");this.inherited(arguments);},_setStoreAttr:function(_4ff){if(!_4ff.get){lang.mixin(_4ff,{_oldAPI:true,get:function(id){var _500=new _4f8();this.fetchItemByIdentity({identity:id,onItem:function(_501){_500.resolve(_501);},onError:function(_502){_500.reject(_502);}});return _500.promise;},query:function(_503,_504){var _505=new _4f8(function(){_506.abort&&_506.abort();});_505.total=new _4f8();var _506=this.fetch(lang.mixin({query:_503,onBegin:function(_507){_505.total.resolve(_507);},onComplete:function(_508){_505.resolve(_508);},onError:function(_509){_505.reject(_509);}},_504));return _4fa(_505);}});}this._set("store",_4ff);},postMixInProperties:function(){var _50a=this.params.store||this.store;if(_50a){this._setStoreAttr(_50a);}this.inherited(arguments);if(!this.params.store&&!this.store._oldAPI){var _50b=this.declaredClass;lang.mixin(this.store,{getValue:function(item,attr){_4f9.deprecated(_50b+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return item[attr];},getLabel:function(item){_4f9.deprecated(_50b+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return item.name;},fetch:function(args){_4f9.deprecated(_50b+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");var shim=["dojo/data/ObjectStore"];require(shim,lang.hitch(this,function(_50c){new _50c({objectStore:this}).fetch(args);}));}});}}});});},"dojo/_base/query":function(){define(["../query","./NodeList"],function(_50d){return _50d;});},"dijit/form/_TextBoxMixin":function(){define("dijit/form/_TextBoxMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/on","../main"],function(_50e,_50f,dom,_510,keys,lang,on,_511){var _512=_50f("dijit.form._TextBoxMixin",null,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints);},_setValueAttr:function(_513,_514,_515){var _516;if(_513!==undefined){_516=this.filter(_513);if(typeof _515!="string"){if(_516!==null&&((typeof _516!="number")||!isNaN(_516))){_515=this.filter(this.format(_516,this.constraints));}else{_515="";}}}if(_515!=null&&((typeof _515)!="number"||!isNaN(_515))&&this.textbox.value!=_515){this.textbox.value=_515;this._set("displayedValue",this.get("displayedValue"));}if(this.textDir=="auto"){this.applyTextDir(this.focusNode,_515);}this.inherited(arguments,[_516,_514]);},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value);},_setDisplayedValueAttr:function(_517){if(_517==null){_517="";}else{if(typeof _517!="string"){_517=String(_517);}}this.textbox.value=_517;this._setValueAttr(this.get("value"),undefined);this._set("displayedValue",this.get("displayedValue"));if(this.textDir=="auto"){this.applyTextDir(this.focusNode,_517);}},format:function(_518){return _518==null?"":(_518.toString?_518.toString():_518);},parse:function(_519){return _519;},_refreshState:function(){},onInput:function(){},__skipInputEvent:false,_onInput:function(evt){if(this.textDir=="auto"){this.applyTextDir(this.focusNode,this.focusNode.value);}this._processInput(evt);},_processInput:function(evt){this._refreshState();this._set("displayedValue",this.get("displayedValue"));},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);var _51a=function(e){var _51b;if(e.type=="keydown"){_51b=e.keyCode;switch(_51b){case keys.SHIFT:case keys.ALT:case keys.CTRL:case keys.META:case keys.CAPS_LOCK:case keys.NUM_LOCK:case keys.SCROLL_LOCK:return;}if(!e.ctrlKey&&!e.metaKey&&!e.altKey){switch(_51b){case keys.NUMPAD_0:case keys.NUMPAD_1:case keys.NUMPAD_2:case keys.NUMPAD_3:case keys.NUMPAD_4:case keys.NUMPAD_5:case keys.NUMPAD_6:case keys.NUMPAD_7:case keys.NUMPAD_8:case keys.NUMPAD_9:case keys.NUMPAD_MULTIPLY:case keys.NUMPAD_PLUS:case keys.NUMPAD_ENTER:case keys.NUMPAD_MINUS:case keys.NUMPAD_PERIOD:case keys.NUMPAD_DIVIDE:return;}if((_51b>=65&&_51b<=90)||(_51b>=48&&_51b<=57)||_51b==keys.SPACE){return;}var _51c=false;for(var i in keys){if(keys[i]===e.keyCode){_51c=true;break;}}if(!_51c){return;}}}_51b=e.charCode>=32?String.fromCharCode(e.charCode):e.charCode;if(!_51b){_51b=(e.keyCode>=65&&e.keyCode<=90)||(e.keyCode>=48&&e.keyCode<=57)||e.keyCode==keys.SPACE?String.fromCharCode(e.keyCode):e.keyCode;}if(!_51b){_51b=229;}if(e.type=="keypress"){if(typeof _51b!="string"){return;}if((_51b>="a"&&_51b<="z")||(_51b>="A"&&_51b<="Z")||(_51b>="0"&&_51b<="9")||(_51b===" ")){if(e.ctrlKey||e.metaKey||e.altKey){return;}}}if(e.type=="input"){if(this.__skipInputEvent){this.__skipInputEvent=false;return;}}else{this.__skipInputEvent=true;}var faux={faux:true},attr;for(attr in e){if(attr!="layerX"&&attr!="layerY"){var v=e[attr];if(typeof v!="function"&&typeof v!="undefined"){faux[attr]=v;}}}lang.mixin(faux,{charOrCode:_51b,_wasConsumed:false,preventDefault:function(){faux._wasConsumed=true;e.preventDefault();},stopPropagation:function(){e.stopPropagation();}});if(this.onInput(faux)===false){faux.preventDefault();faux.stopPropagation();}if(faux._wasConsumed){return;}this.defer(function(){this._onInput(faux);});};this.own(on(this.textbox,"keydown, keypress, paste, cut, input, compositionend",lang.hitch(this,_51a)));},_blankValue:"",filter:function(val){if(val===null){return this._blankValue;}if(typeof val!="string"){return val;}if(this.trim){val=lang.trim(val);}if(this.uppercase){val=val.toUpperCase();}if(this.lowercase){val=val.toLowerCase();}if(this.propercase){val=val.replace(/[^\s]+/g,function(word){return word.substring(0,1).toUpperCase()+word.substring(1);});}return val;},_setBlurValue:function(){this._setValueAttr(this.get("value"),true);},_onBlur:function(e){if(this.disabled){return;}this._setBlurValue();this.inherited(arguments);},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd;},_onFocus:function(by){if(this.disabled||this.readOnly){return;}if(this.selectOnClick&&by=="mouse"){this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);this._selectOnClickHandle=null;if(!this._isTextSelected()){_512.selectInputText(this.textbox);}});this.defer(function(){if(this._selectOnClickHandle){this.disconnect(this._selectOnClickHandle);this._selectOnClickHandle=null;}},500);}this.inherited(arguments);this._refreshState();},reset:function(){this.textbox.value="";this.inherited(arguments);},_setTextDirAttr:function(_51d){if(!this._created||this.textDir!=_51d){this._set("textDir",_51d);this.applyTextDir(this.focusNode,this.focusNode.value);}}});_512._setSelectionRange=_511._setSelectionRange=function(_51e,_51f,stop){if(_51e.setSelectionRange){_51e.setSelectionRange(_51f,stop);}};_512.selectInputText=_511.selectInputText=function(_520,_521,stop){_520=dom.byId(_520);if(isNaN(_521)){_521=0;}if(isNaN(stop)){stop=_520.value?_520.value.length:0;}try{_520.focus();_512._setSelectionRange(_520,_521,stop);}catch(e){}};return _512;});},"dijit/form/SimpleTextarea":function(){define("dijit/form/SimpleTextarea",["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(_522,_523,has,_524){return _522("dijit.form.SimpleTextarea",_524,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} data-dojo-attach-point='focusNode,containerNode,textbox' autocomplete='off'></textarea>",postMixInProperties:function(){if(!this.value&&this.srcNodeRef){this.value=this.srcNodeRef.value;}this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);if(has("ie")&&this.cols){_523.add(this.textbox,"dijitTextAreaCols");}},filter:function(_525){if(_525){_525=_525.replace(/\r/g,"");}return this.inherited(arguments);},_onInput:function(e){if(this.maxLength){var _526=parseInt(this.maxLength);var _527=this.textbox.value.replace(/\r/g,"");var _528=_527.length-_526;if(_528>0){var _529=this.textbox;if(_529.selectionStart){var pos=_529.selectionStart;var cr=0;if(has("opera")){cr=(this.textbox.value.substring(0,pos).match(/\r/g)||[]).length;}this.textbox.value=_527.substring(0,pos-_528-cr)+_527.substring(pos-cr);_529.setSelectionRange(pos-_528,pos-_528);}else{if(this.ownerDocument.selection){_529.focus();var _52a=this.ownerDocument.selection.createRange();_52a.moveStart("character",-_528);_52a.text="";_52a.select();}}}}this.inherited(arguments);}});});},"url:esri/dijit/editing/templates/TemplatePicker.html":"<div class=\"templatePicker\">\r\n\r\n  <table dojoType=\"dojox.grid.DataGrid\" noDataMessage=\"${emptyMessage}\" selectionMode=\"none\" autoHeight=\"${_rows}\" autoWidth=\"${_autoWidth}\"\r\n         query=\"{ query: '*' }\" dojoAttachPoint=\"grid\" class=\"grid\">\r\n  </table>\r\n  \r\n</div>","esri/toolbars/_Box":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/has","dojo/dom-style","dojox/gfx/Moveable","dojox/gfx/matrix","esri/kernel","esri/lang","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/webMercatorUtils","esri/geometry/jsonUtils","esri/graphic"],function(_52b,lang,_52c,_52d,has,_52e,_52f,_530,_531,_532,_533,_534,_535,_536,_537){var BOX=_52b(null,{declaredClass:"esri.toolbars._Box",constructor:function(_538,map,_539,_53a,_53b,_53c){this._graphic=_538;this._map=map;this._toolbar=_539;this._scale=_53a;this._rotate=_53b;this._defaultEventArgs={};this._scaleEvent="Scale";this._rotateEvent="Rotate";this._uniformScaling=_53c;var _53d=_539._options;this._markerSymbol=_53d.boxHandleSymbol;this._lineSymbol=_53d.boxLineSymbol;this._moveStartHandler=lang.hitch(this,this._moveStartHandler);this._firstMoveHandler=lang.hitch(this,this._firstMoveHandler);this._moveStopHandler=lang.hitch(this,this._moveStopHandler);this._moveHandler=lang.hitch(this,this._moveHandler);this._init();},destroy:function(){this._cleanUp();this._graphic=this._map=this._toolbar=this._markerSymbol=this._lineSymbol=null;},refresh:function(){this._draw();},suspend:function(){_52c.forEach(this._getAllGraphics(),function(g){g.hide();});},resume:function(){_52c.forEach(this._getAllGraphics(),function(g){g.show();});this._draw();},_init:function(){this._draw();},_cleanUp:function(){if(this._connects){_52c.forEach(this._connects,_52d.disconnect);}var _53e=this._toolbar._scratchGL;if(this._anchors){_52c.forEach(this._anchors,function(info){_53e.remove(info.graphic);var mov=info.moveable;if(mov){mov.destroy();}});}if(this._box){_53e.remove(this._box);}this._box=this._anchors=this._connects=null;},_draw:function(){if(!this._graphic.getDojoShape()){this._cleanUp();return;}var map=this._map,_53f=this._toolbar._scratchGL;var _540=this._getBoxCoords();var _541=new _534(map.spatialReference);var path=lang.clone(_52c.filter(_540,function(pt,_542){return (_542!==8&&_542%2===0);}));if(path[0]){path.push([path[0][0],path[0][1]]);}_541.addPath(path);if(this._rotate){_541.addPath([_540[1],_540[8]]);}if(this._box){this._box.setGeometry(_541);}else{this._box=new _537(_541,this._lineSymbol);_53f.add(this._box);}if(this._anchors){_52c.forEach(this._anchors,function(info,_543){if(!this._scale){_543=8;}var _544=new _533(_540[_543],map.spatialReference);info.graphic.setGeometry(_544);var mov=info.moveable,_545=info.graphic.getDojoShape();if(_545){if(!mov){info.moveable=this._getMoveable(info.graphic,_543);}else{if(_545!==mov.shape){mov.destroy();info.moveable=this._getMoveable(info.graphic,_543);}}}},this);}else{this._anchors=[];this._connects=[];_52c.forEach(_540,function(_546,_547){if(!this._scale&&_547<8){return;}_546=new _533(_546,map.spatialReference);var _548=new _537(_546,this._markerSymbol);_53f.add(_548);this._anchors.push({graphic:_548,moveable:this._getMoveable(_548,_547)});},this);}},_getBoxCoords:function(_549){var _54a=this._graphic,map=this._map,bbox=this._getTransformedBoundingBox(_54a),_54b=[],pt,next,_54c;_52c.forEach(bbox,function(_54d,_54e,arr){pt=_54d;next=arr[_54e+1];if(!next){next=arr[0];}_54c={x:(pt.x+next.x)/2,y:(pt.y+next.y)/2};if(!_549){pt=map.toMap(pt);_54c=map.toMap(_54c);}_54b.push([pt.x,pt.y]);_54b.push([_54c.x,_54c.y]);});if(this._rotate){var _54f=lang.clone(_54b[1]);_54f=_549?{x:_54f[0],y:_54f[1]}:map.toScreen({x:_54f[0],y:_54f[1],spatialReference:map.spatialReference});_54f.y-=this._toolbar._options.rotateHandleOffset;if(!_549){_54f=map.toMap(_54f);}_54b.push([_54f.x,_54f.y]);}return _54b;},_getTransformedBoundingBox:function(_550){var map=this._map,_551=_550.geometry.getExtent(),_552=_550.geometry.spatialReference,_553=new _533(_551.xmin,_551.ymax,_552),_554=new _533(_551.xmax,_551.ymin,_552);_553=map.toScreen(_553);_554=map.toScreen(_554);return [{x:_553.x,y:_553.y},{x:_554.x,y:_553.y},{x:_554.x,y:_554.y},{x:_553.x,y:_554.y}];},_getAllGraphics:function(){var _555=[this._box];if(this._anchors){_52c.forEach(this._anchors,function(_556){_555.push(_556.graphic);});}_555=_52c.filter(_555,_532.isDefined);return _555;},_getMoveable:function(_557,_558){var _559=_557.getDojoShape();if(!_559){return;}var _55a=new _52f(_559);_55a._index=_558;this._connects.push(_52d.connect(_55a,"onMoveStart",this._moveStartHandler));this._connects.push(_52d.connect(_55a,"onFirstMove",this._firstMoveHandler));this._connects.push(_52d.connect(_55a,"onMoveStop",this._moveStopHandler));_55a.onMove=this._moveHandler;var node=_559.getEventSource();if(node){_52e.set(node,"cursor",this._toolbar._cursors["box"+_558]);}return _55a;},_moveStartHandler:function(_55b){this._toolbar["on"+(_55b.host._index===8?this._rotateEvent:this._scaleEvent)+"Start"](this._graphic);},_firstMoveHandler:function(_55c){var _55d=_55c.host._index,_55e=(this._wrapOffset=_55c.host.shape._wrapOffsets[0]||0),_55f=this._graphic.getLayer()._div.getTransform(),mx=_530,_560,_561,_562,_563=_52c.map(this._getBoxCoords(true),function(arr){return {x:arr[0]+_55e,y:arr[1]};});_562={x:_563[1].x,y:_563[3].y};this._centerCoord=mx.multiplyPoint(mx.invert(_55f),_562);if(_55d===8){_560=mx.multiplyPoint(mx.invert(_55f),_563[1]);this._startLine=[this._centerCoord,_560];this._moveLine=lang.clone(this._startLine);}else{_560=mx.multiplyPoint(mx.invert(_55f),_563[_55d]);_561=mx.multiplyPoint(mx.invert(_55f),_563[(_55d+4)%8]);this._firstMoverToCenter=Math.sqrt((_560.x-this._centerCoord.x)*(_560.x-this._centerCoord.x)+(_560.y-this._centerCoord.y)*(_560.y-this._centerCoord.y));this._startBox=_561;this._startBox.width=(_563[4].x-_563[0].x);this._startBox.height=(_563[4].y-_563[0].y);this._moveBox=lang.clone(this._startBox);this._xfactor=_560.x>_561.x?1:-1;this._yfactor=_560.y>_561.y?1:-1;if(_55d===1||_55d===5){this._xfactor=0;}else{if(_55d===3||_55d===7){this._yfactor=0;}}}this._toolbar._beginOperation("BOX");this._toolbar["on"+(_55d===8?this._rotateEvent:this._scaleEvent)+"FirstMove"](this._graphic);},_moveHandler:function(_564,_565){var _566=_564.host._index,args=this._defaultEventArgs,_567,move,tx,pt,_568,_569,_56a,_56b=0,_56c=0,_56d,_56e,_56f;args.angle=0;args.scaleX=1;args.scaleY=1;if(_566===8){_567=this._startLine;move=this._moveLine;pt=move[1];pt.x+=_565.dx;pt.y+=_565.dy;_568=this._getAngle(_567,move);tx=_530.rotategAt(_568,_567[0]);this._graphic.getDojoShape().setTransform(tx);args.transform=tx;args.angle=_568;args.around=_567[0];}else{_567=this._startBox;move=this._moveBox;move.width+=(_565.dx*this._xfactor);move.height+=(_565.dy*this._yfactor);if(this._uniformScaling){_56d=move.x+this._xfactor*move.width;_56e=move.y+this._yfactor*move.height;_56f=Math.sqrt((_56d-this._centerCoord.x)*(_56d-this._centerCoord.x)+(_56e-this._centerCoord.y)*(_56e-this._centerCoord.y));_569=_56a=_56f/this._firstMoverToCenter;_56b=this._xfactor*_567.width/2;_56c=this._yfactor*_567.height/2;}else{_569=move.width/_567.width;_56a=move.height/_567.height;}if(isNaN(_569)||_569===Infinity||_569===-Infinity){_569=1;}if(isNaN(_56a)||_56a===Infinity||_56a===-Infinity){_56a=1;}tx=_530.scaleAt(_569,_56a,_567.x+_56b,_567.y+_56c);this._graphic.getDojoShape().setTransform(tx);args.transform=tx;args.scaleX=_569;args.scaleY=_56a;args.around={x:_567.x+_56b,y:_567.y+_56c};}this._toolbar["on"+(_566===8?this._rotateEvent:this._scaleEvent)](this._graphic,args);},_moveStopHandler:function(_570){var _571=this._graphic,_572=this._toolbar,_573=_572._geo?_535.geographicToWebMercator(_571.geometry):_571.geometry,_574=_573.spatialReference,_575=_571.getDojoShape(),_576=_575.getTransform(),_577=_571.getLayer()._div.getTransform();_573=_573.toJson();this._updateSegments(_573.paths||_573.rings,_576,_577,_574);_575.setTransform(null);_573=_536.fromJson(_573);_571.setGeometry(_572._geo?_535.webMercatorToGeographic(_573,true):_573);this._draw();this._startBox=this._moveBox=this._xfactor=this._yfactor=null;this._startLine=this._moveLine=null;_572._endOperation("BOX");this._defaultEventArgs.transform=_576;_572["on"+(_570.host._index===8?this._rotateEvent:this._scaleEvent)+"Stop"](this._graphic,this._defaultEventArgs);},_updateSegments:function(_578,_579,_57a,_57b){var mx=_530,map=this._map,_57c=this._wrapOffset||0;_52c.forEach(_578,function(_57d){_52c.forEach(_57d,function(_57e){var _57f=map.toScreen({x:_57e[0],y:_57e[1],spatialReference:_57b},true);_57f.x+=_57c;_57f=mx.multiplyPoint([_57a,_579,mx.invert(_57a)],_57f);_57f.x-=_57c;var _580=map.toMap(_57f);_57e[0]=_580.x;_57e[1]=_580.y;});});},_getAngle:function(_581,_582){var _583=Math.atan2(_581[0].y-_581[1].y,_581[0].x-_581[1].x)*180/Math.PI,_584=Math.atan2(_582[0].y-_582[1].y,_582[0].x-_582[1].x)*180/Math.PI;return _584-_583;}});if(has("extend-esri")){lang.setObject("toolbars._Box",BOX,_531);}return BOX;});},"dijit/_editor/plugins/TextColor":function(){define("dijit/_editor/plugins/TextColor",["require","dojo/colors","dojo/_base/declare","dojo/_base/lang","../_Plugin","../../form/DropDownButton"],function(_585,_586,_587,lang,_588,_589){var _58a=_587("dijit._editor.plugins.TextColor",_588,{buttonClass:_589,useDefaultCommand:false,_initButton:function(){this.inherited(arguments);var self=this;this.button.loadDropDown=function(_58b){_585(["../../ColorPalette"],lang.hitch(this,function(_58c){this.dropDown=new _58c({dir:self.editor.dir,ownerDocument:self.editor.ownerDocument,value:self.value,onChange:function(_58d){self.editor.execCommand(self.command,_58d);}});_58b();}));};},updateState:function(){var _58e=this.editor;var _58f=this.command;if(!_58e||!_58e.isLoaded||!_58f.length){return;}if(this.button){var _590=this.get("disabled");this.button.set("disabled",_590);if(_590){return;}var _591;try{_591=_58e.queryCommandValue(_58f)||"";}catch(e){_591="";}}if(_591==""){_591="#000000";}if(_591=="transparent"){_591="#ffffff";}if(typeof _591=="string"){if(_591.indexOf("rgb")>-1){_591=_586.fromRgb(_591).toHex();}}else{_591=((_591&255)<<16)|(_591&65280)|((_591&16711680)>>>16);_591=_591.toString(16);_591="#000000".slice(0,7-_591.length)+_591;}this.value=_591;var _592=this.button.dropDown;if(_592&&_591!==_592.get("value")){_592.set("value",_591,false);}}});_588.registry["foreColor"]=function(){return new _58a({command:"foreColor"});};_588.registry["hiliteColor"]=function(){return new _58a({command:"hiliteColor"});};return _58a;});},"esri/dijit/editing/tools/ButtonToolBase":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dijit/form/Button","esri/dijit/editing/tools/ToolBase","esri/kernel"],function(_593,lang,has,_594,_595,_596){var BTB=_593([_594,_595],{declaredClass:"esri.dijit.editing.tools.ButtonToolBase",postCreate:function(){this.inherited(arguments);if(this._setShowLabelAttr){this._setShowLabelAttr(false);}},destroy:function(){_594.prototype.destroy.apply(this,arguments);_595.prototype.destroy.apply(this,arguments);}});if(has("extend-esri")){lang.setObject("dijit.editing.tools.ButtonToolBase",BTB,_596);}return BTB;});},"dojo/hccss":function(){define(["require","./_base/config","./dom-class","./dom-style","./has","./ready","./_base/window"],function(_597,_598,_599,_59a,has,_59b,win){has.add("highcontrast",function(){var div=win.doc.createElement("div");div.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;"+"background-image: url("+(_598.blankGif||_597.toUrl("./resources/blank.gif"))+");";win.body().appendChild(div);var cs=_59a.getComputedStyle(div),_59c=cs.backgroundImage,hc=(cs.borderTopColor==cs.borderRightColor)||(_59c&&(_59c=="none"||_59c=="url(invalid-url:)"));if(has("ie")<=8){div.outerHTML="";}else{win.body().removeChild(div);}return hc;});_59b(90,function(){if(has("highcontrast")){_599.add(win.body(),"dj_a11y");}});return has;});},"esri/dijit/editing/tools/Editing":function(){define("esri/dijit/editing/tools/Editing",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/layers/FeatureTemplate","esri/dijit/editing/tools/Edit","esri/dijit/editing/tools/EditingTools","esri/dijit/editing/tools/DropDownToolBase","esri/kernel","esri/lang"],function(_59d,lang,_59e,has,_59f,Edit,_5a0,_5a1,_5a2,_5a3){var _5a4=_59d([_5a1],{declaredClass:"esri.dijit.editing.tools.Editing",_enabled:false,deactivate:function(){if(!this._enabled){return;}this._enabled=false;this.inherited(arguments);this._settings.templatePicker.clearSelection();},onItemClicked:function(_5a5,evt){this.inherited(arguments);if(this._activeTool===this._tools.AUTOCOMPLETE){this._settings.editor._drawingTool=_59f.TOOL_AUTO_COMPLETE_POLYGON;}},_activateTool:function(_5a6,_5a7){var i;this.enable(_5a7);for(i in this._tools){if(this._tools.hasOwnProperty(i)){this.dropDown.removeChild(this._tools[i]);if(this._tools[i]._enabled===true){this.dropDown.addChild(this._tools[i]);}}}if(this._geometryType!==_5a7||this._activeTool._enabled===false){this._activeTool=this._tools[_5a6.toUpperCase()];}this._geometryType=_5a7;this._activeTool.activate();this._activeTool.setChecked(true);this._updateUI();},_initializeTool:function(_5a8){this.inherited(arguments);this._initializeTools();},_initializeTools:function(){var _5a9=this._settings.layers;var _5aa=this._settings.editor;var _5ab=false,line=false,poly=false;var _5ac=this._toolTypes=[];var _5ad;_59e.forEach(_5a9,function(_5ae){_5ad=_5ae.geometryType;_5ab=_5ab||_5ad==="esriGeometryPoint";line=line||_5ad==="esriGeometryPolyline";poly=poly||_5ad==="esriGeometryPolygon";_5ac=_5ac.concat(_59e.map(this._getTemplatesFromLayer(_5ae),lang.hitch(this,function(_5af){return _5aa._toDrawTool(_5af.drawingTool,_5ae);})));},this);var _5b0=this._settings.createOptions;if(_5ab){this._toolTypes.push("point");}if(line){this._toolTypes=this._toolTypes.concat(_5b0.polylineDrawTools);}if(poly){this._toolTypes=this._toolTypes.concat(_5b0.polygonDrawTools);}this._toolTypes=this._toUnique(this._toolTypes.concat(_5ac));},_toUnique:function(arr){var test={};return _59e.filter(arr,function(val){return test[val]?false:(test[val]=true);});},_getTemplatesFromLayer:function(_5b1){var _5b2=_5b1.templates||[];var _5b3=_5b1.types;_59e.forEach(_5b3,function(type){_5b2=_5b2.concat(type.templates);});return _59e.filter(_5b2,_5a3.isDefined);},_createTools:function(){_59e.forEach(this._toolTypes,this._createTool,this);this.inherited(arguments);},_createTool:function(_5b4){var _5b5=lang.mixin(_5a0[_5b4],{settings:this._settings,onClick:lang.hitch(this,"onItemClicked",_5a0[_5b4].id)});this._tools[_5b4.toUpperCase()]=new Edit(_5b5);}});if(has("extend-esri")){lang.setObject("dijit.editing.tools.Editing",_5a4,_5a2);}return _5a4;});},"esri/dijit/AttributeInspector":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/sniff","dojo/_base/kernel","dojo/has","dojo/dom-style","dojo/dom-construct","esri/kernel","esri/lang","esri/domUtils","esri/layers/InheritedDomain","esri/layers/FeatureLayer","dojo/i18n!esri/nls/jsapi","dojo/fx","dojox/gfx","dijit/_Widget","dijit/_Templated","dijit/Editor","dijit/_editor/plugins/LinkDialog","dijit/_editor/plugins/TextColor","esri/dijit/editing/AttachmentEditor","esri/dijit/editing/Util","esri/tasks/query","dijit/form/DateTextBox","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/FilteringSelect","dijit/form/NumberSpinner","dijit/form/Button","dijit/form/SimpleTextarea","dijit/Tooltip","dojo/data/ItemFileReadStore","dojox/date/islamic","dojox/date/islamic/Date","dojox/date/islamic/locale","dojo/text!esri/dijit/templates/AttributeInspector.html"],function(_5b6,lang,_5b7,_5b8,_5b9,_5ba,has,_5bb,_5bc,_5bd,_5be,_5bf,_5c0,_5c1,_5c2,fx,gfx,_5c3,_5c4,_5c5,_5c6,_5c7,_5c8,Util,_5c9,_5ca,_5cb,_5cc,_5cd,_5ce,_5cf,_5d0,_5d1,_5d2,_5d3,_5d4,_5d5,_5d6){var ATI=_5b6([_5c3,_5c4],{declaredClass:"esri.dijit.AttributeInspector",widgetsInTemplate:true,templateString:_5d6,_navMessage:"( ${idx} ${of} ${numFeatures} )",onUpdate:function(){},onDelete:function(){},onAttributeChange:function(){},onNext:function(){},onReset:function(){},onCancel:function(){},constructor:function(_5d7,_5d8){lang.mixin(this,_5c2.widgets.attributeInspector);_5d7=_5d7||{};if(!_5d7.featureLayer&&!_5d7.layerInfos){console.error("esri.AttributeInspector: please provide correct parameter in the constructor");}this._userIds={};if(_5d7.featureLayer&&_5d7.featureLayer.credential){var _5d9=_5d7.featureLayer.id;this._userIds[_5d9]=_5d7.featureLayer.credential.userId;}else{if(_5d7.layerInfos){var _5da=_5d7.layerInfos;_5b7.forEach(_5da,function(_5db){if(_5db.featureLayer){var _5dc=_5db.featureLayer.id;if(_5db.featureLayer.credential){this._userIds[_5dc]=_5db.featureLayer.credential.userId;}if(_5db.userId){this._userIds[_5dc]=_5db.userId;}}},this);}}this._datePackage=this._getDatePackage(_5d7);this._layerInfos=_5d7.layerInfos||[{featureLayer:_5d7.featureLayer,options:_5d7.options||[]}];this._aiConnects=[];this._selection=[];this._toolTips=[];this._numFeatures=0;this._featureIdx=0;this._currentLInfo=null;this._currentFeature=null;this._hideNavButtons=_5d7.hideNavButtons||false;},postCreate:function(){this._initLayerInfos();this._createAttachmentEditor();this.onFirstFeature();},destroy:function(){this._destroyAttributeTable();_5b7.forEach(this._aiConnects,_5b8.disconnect);delete this._aiConnects;if(this._attachmentEditor){this._attachmentEditor.destroy();delete this._attachmentEditor;}delete this._layerInfos;this._selection=this._currentFeature=this._currentLInfo=this._attributes=this._layerInfos=null;this.inherited(arguments);},refresh:function(){this._updateSelection();},first:function(){this.onFirstFeature();},last:function(){this.onLastFeature();},next:function(){this.onNextFeature();},previous:function(){this.onPreviousFeature();},showFeature:function(_5dd,_5de){if(_5de){this._createOnlyFirstTime=true;}this._updateSelection([_5dd],_5de);this._updateUI();},onLayerSelectionChange:function(_5df,_5e0,_5e1){this._createOnlyFirstTime=false;this._featureIdx=(_5e1===_5c1.SELECTION_NEW)?0:this._featureIdx;this._updateSelection();this._updateUI();},onLayerSelectionClear:function(){if(!this._selection||this._selection.length<=0){return;}this._numFeatures=0;this._featureIdx=0;this._selection=[];this._currentFeature=null;this._currentLInfo=null;this._updateUI();},onLayerEditsComplete:function(_5e2,adds,_5e3,_5e4){_5e4=_5e4||[];if(_5e4.length){var _5e5=this._selection;var _5e6=_5e2.featureLayer.objectIdField;_5b7.forEach(_5e4,lang.hitch(this,function(del){_5b7.some(_5e5,lang.hitch(this,function(item,idx){if(item.attributes[_5e6]!==del.objectId){return false;}this._selection.splice(idx,1);return true;}));}));}adds=adds||[];if(adds.length){this._selection=Util.findFeatures(adds,_5e2.featureLayer);this._featureIdx=0;}var _5e7=this._numFeatures=this._selection?this._selection.length:0;if(adds.length){var _5e8=_5e7?this._selection[this._featureIdx]:null;if(_5e8){var _5e9=_5e8.getLayer();var _5ea=_5e9.getEditCapabilities();if(!(_5ea.canCreate&&!_5ea.canUpdate)){this._showFeature(_5e8);}}}this._updateUI();},onFieldValueChange:function(_5eb,_5ec){_5ec=(typeof _5ec==="undefined")?null:_5ec;var _5ed=_5eb.field;if(_5ed.type==="esriFieldTypeDate"){_5ec=(_5ec&&_5ec.getTime)?_5ec.getTime():(_5ec&&_5ec.toGregorian?_5ec.toGregorian().getTime():_5ec);}if(this._currentFeature.attributes[_5ed.name]===_5ec){return;}var _5ee=this._currentLInfo;var _5ef=this._currentFeature;var _5f0=_5ed.name;if(_5f0===_5ee.typeIdField){var type=this._findFirst(_5ee.types,"id",_5ec);var _5f1=_5ee.fieldInfos;_5b7.forEach(_5f1,function(_5f2){_5ed=_5f2.field;if(!_5ed||_5ed.name===_5ee.typeIdField){return;}var node=_5f2.dijit;var _5f3=this._setFieldDomain(node,type,_5ed);if(_5f3&&node){this._setValue(node,_5ef.attributes[_5ed.name]+"");if(node.isValid()===false){this._setValue(node,null);}}},this);}this.onAttributeChange(_5ef,_5f0,_5ec);},onDeleteBtn:function(evt){this._deleteFeature();},onNextFeature:function(evt){this._onNextFeature(1);},onPreviousFeature:function(evt){this._onNextFeature(-1);},onFirstFeature:function(evt){this._onNextFeature(this._featureIdx*-1);},onLastFeature:function(evt){this._onNextFeature((this._numFeatures-1)-this._featureIdx);},_initLayerInfos:function(){var _5f4=this._layerInfos;this._editorTrackingInfos={};_5b7.forEach(_5f4,this._initLayerInfo,this);},_initLayerInfo:function(_5f5){var _5f6=_5f5.featureLayer;this._connect(_5f6,"onSelectionComplete",lang.hitch(this,"onLayerSelectionChange",_5f5));this._connect(_5f6,"onSelectionClear",lang.hitch(this,"onLayerSelectionClear",_5f5));this._connect(_5f6,"onEditsComplete",lang.hitch(this,"onLayerEditsComplete",_5f5));_5f5.showAttachments=_5f6.hasAttachments?(_5be.isDefined(_5f5.showAttachments)?_5f5.showAttachments:true):false;_5f5.hideFields=_5f5.hideFields||[];_5f5.htmlFields=_5f5.htmlFields||[];_5f5.isEditable=_5f6.isEditable()?(_5be.isDefined(_5f5.isEditable)?_5f5.isEditable:true):false;_5f5.typeIdField=_5f6.typeIdField;_5f5.layerId=_5f6.id;_5f5.types=_5f6.types;if(!_5f5.showGlobalID&&_5f6.globalIdField){_5f5.hideFields.push(_5f6.globalIdField);}if(!_5f5.showObjectID){_5f5.hideFields.push(_5f6.objectIdField);}var _5f7=this._getFields(_5f5.featureLayer);if(!_5f7){return;}var _5f8=_5f5.fieldInfos||[];_5f8=_5b7.map(_5f8,function(_5f9){return lang.mixin({},_5f9);});if(!_5f8.length){_5f7=_5b7.filter(_5f7,lang.hitch(this,function(_5fa){return !this._isInFields(_5fa.name,_5f5.hideFields);}));_5f5.fieldInfos=_5b7.map(_5f7,lang.hitch(this,function(_5fb){var _5fc=(this._isInFields(_5fb.name,_5f5.htmlFields)?ATI.STRING_FIELD_OPTION_RICHTEXT:ATI.STRING_FIELD_OPTION_TEXTBOX);return {"fieldName":_5fb.name,"field":_5fb,"stringFieldOption":_5fc};}));}else{_5f5.fieldInfos=_5b7.filter(_5b7.map(_5f8,lang.hitch(this,function(_5fd){var _5fe=_5fd.stringFieldOption||(this._isInFields(_5fd.fieldName,_5f5.htmlFields)?ATI.STRING_FIELD_OPTION_RICHTEXT:ATI.STRING_FIELD_OPTION_TEXTBOX);return lang.mixin(_5fd,{"field":this._findFirst(_5f7,"name",_5fd.fieldName),"stringFieldOption":_5fe});})),"return item.field;");}var _5ff=[];if(_5f6.editFieldsInfo){if(_5f6.editFieldsInfo.creatorField){_5ff.push(_5f6.editFieldsInfo.creatorField);}if(_5f6.editFieldsInfo.creationDateField){_5ff.push(_5f6.editFieldsInfo.creationDateField);}if(_5f6.editFieldsInfo.editorField){_5ff.push(_5f6.editFieldsInfo.editorField);}if(_5f6.editFieldsInfo.editDateField){_5ff.push(_5f6.editFieldsInfo.editDateField);}}this._editorTrackingInfos[_5f6.id]=_5ff;},_createAttachmentEditor:function(){this._attachmentEditor=null;var _600=this._layerInfos;var _601=_5b7.filter(_600,function(item){return item.showAttachments;});if(!_601||!_601.length){return;}this._attachmentEditor=new _5c8({"class":"atiAttachmentEditor"},this.attachmentEditor);this._attachmentEditor.startup();},_setCurrentLInfo:function(_602){var _603=this._currentLInfo?this._currentLInfo.featureLayer:null;var _604=_602.featureLayer;if(_603&&_603.id===_604.id&&!_603.ownershipBasedAccessControlForFeatures){var _605=_604.getEditCapabilities();if(!(_605.canCreate&&!_605.canUpdate)){return;}}this._currentLInfo=_602;this._createTable();},_updateSelection:function(_606,_607){this._selection=_606||[];var _608=this._layerInfos;_5b7.forEach(_608,this._getSelection,this);var _609=this._numFeatures=this._selection.length;var _60a=_609?this._selection[this._featureIdx]:null;this._showFeature(_60a,_607);},_getSelection:function(_60b){var _60c=_60b.featureLayer.getSelectedFeatures();this._selection=this._selection.concat(_60c);},_updateUI:function(){var _60d=this._numFeatures;var _60e=this._currentLInfo;this.layerName.innerHTML=(!_60e||_60d===0)?this.NLS_noFeaturesSelected:(_60e.featureLayer?_60e.featureLayer.name:"");_5bb.set(this.attributeTable,"display",_60d?"":"none");_5bb.set(this.editButtons,"display",_60d?"":"none");_5bb.set(this.navButtons,"display",(!this._hideNavButtons&&(_60d>1)?"":"none"));this.navMessage.innerHTML=_5be.substitute({idx:this._featureIdx+1,of:this.NLS_of,numFeatures:this._numFeatures},this._navMessage);if(this._attachmentEditor){_5bb.set(this._attachmentEditor.domNode,"display",((_60e&&_60e.showAttachments)&&_60d)?"":"none");}var _60f=((_60e&&_60e.showDeleteButton===false)||!this._canDelete)?false:true;_5bb.set(this.deleteBtn.domNode,"display",_60f?"":"none");if(this.domNode.parentNode&&this.domNode.parentNode.scrollTop>0){this.domNode.parentNode.scrollTop=0;}},_onNextFeature:function(_610){this._featureIdx+=_610;if(this._featureIdx<0){this._featureIdx=this._numFeatures-1;}else{if(this._featureIdx>=this._numFeatures){this._featureIdx=0;}}var _611=this._selection.length?this._selection[this._featureIdx]:null;this._showFeature(_611);this._updateUI();this.onNext(_611);},_deleteFeature:function(){this.onDelete(this._currentFeature);},_showFeature:function(_612,_613){if(!_612){return;}this._currentFeature=_612;var _614=_613?_613:_612.getLayer();var _615=_614.getEditCapabilities({feature:_612,userId:this._userIds[_614.id]});this._canUpdate=_615.canUpdate;this._canDelete=_615.canDelete;var _616=this._getLInfoFromFeatureLayer(_614);if(!_616){return;}this._setCurrentLInfo(_616);var _617=_612.attributes;var type=this._findFirst(_616.types,"id",_617[_616.typeIdField]);var node,_618=null;var _619=_616.fieldInfos;_5b7.forEach(_619,function(_61a){_618=_61a.field;node=_61a.dijit||null;if(!node){return;}var _61b=this._setFieldDomain(node,type,_618);var _61c=_617[_618.name];_61c=(_61c&&_61b&&_61b.codedValues&&_61b.codedValues.length)?(_61b.codedValues[_61c]?_61b.codedValues[_61c].name:_61c):_61c;if(!_5be.isDefined(_61c)){_61c="";}if(node.declaredClass==="dijit.form.DateTextBox"){_61c=(_61c==="")?null:new Date(_61c);}else{if(node.declaredClass==="dijit.form.FilteringSelect"){node._lastValueReported=null;_61c=_617[_618.name]+"";}}try{this._setValue(node,_61c);if(node.declaredClass==="dijit.form.FilteringSelect"&&node.isValid()===false){this._setValue(node,null);}}catch(error){node.set("displayedValue",this.NLS_errorInvalid,false);}},this);if(this._attachmentEditor&&_616.showAttachments){this._attachmentEditor.showAttachments(this._currentFeature);}var _61d=_614.getEditSummary(_612);if(_61d){this.editorTrackingInfoDiv.innerHTML=_61d;_5bf.show(this.editorTrackingInfoDiv);}else{_5bf.hide(this.editorTrackingInfoDiv);}},_setFieldDomain:function(node,type,_61e){if(!node){return null;}var _61f=_61e.domain;if(type&&type.domains){if(type.domains[_61e.name]&&type.domains[_61e.name] instanceof _5c0===false){_61f=type.domains[_61e.name];}}if(!_61f){return null;}if(_61f.codedValues&&_61f.codedValues.length>0){node.set("store",this._toStore(_5b7.map(_61f.codedValues,function(item){return {id:item.code+="",name:item.name};})));this._setValue(node,_61f.codedValues[0].code);}else{node.constraints={min:_5be.isDefined(_61f.minValue)?_61f.minValue:Number.MIN_VALUE,max:_5be.isDefined(_61f.maxValue)?_61f.maxValue:Number.MAX_VALUE};this._setValue(node,node.constraints.min);}return _61f;},_setValue:function(node,_620){if(!node.set){return;}node._onChangeActive=false;node.set("value",_620,true);node._onChangeActive=true;},_getFields:function(_621){var _622=_621._getOutFields();if(!_622){return null;}var _623=_621.fields;return (_622=="*")?_623:_5b7.filter(_5b7.map(_622,lang.hitch(this,"_findFirst",_623,"name")),_5be.isDefined);},_isInFields:function(_624,_625){if(!_624||!_625&&!_625.length){return false;}return _5b7.some(_625,function(name){return name.toLowerCase()===_624.toLowerCase();});},_findFirst:function(_626,_627,_628){var _629=_5b7.filter(_626,function(item){return item.hasOwnProperty(_627)&&item[_627]===_628;});return (_629&&_629.length)?_629[0]:null;},_getLInfoFromFeatureLayer:function(_62a){var _62b=_62a?_62a.id:null;return this._findFirst(this._layerInfos,"layerId",_62b);},_createTable:function(){this._destroyAttributeTable();this.attributeTable.innerHTML="";this._attributes=_5bc.create("table",{cellspacing:"0",cellpadding:"0"},this.attributeTable);var _62c=_5bc.create("tbody",null,this._attributes);var _62d=this._currentFeature;var _62e=this._currentLInfo;var type=this._findFirst(_62e.types,"id",_62d.attributes[_62e.typeIdField]);var _62f=_62e.fieldInfos;_5b7.forEach(_62f,lang.hitch(this,"_createField",type,_62c),this);this._createOnlyFirstTime=false;},_createField:function(type,_630,_631){var _632=this._currentLInfo;var _633=_631.field;if(this._isInFields(_633.name,_632.hideFields)){return;}if(this._isInFields(_633.name,this._editorTrackingInfos[_632.featureLayer.id])){return;}var node=_5bc.create("tr",null,_630);var td=_5bc.create("td",{innerHTML:_631.label||_633.alias||_633.name,"class":"atiLabel"},node);td=_5bc.create("td",null,node);var _634=null;var _635=false;if(_631.customField){_5bc.place(_631.customField.domNode||_631.customField,_5bc.create("div",null,td),"first");_634=_631.customField;}else{if(_632.isEditable===false||_633.editable===false||_631.isEditable===false||_633.type==="esriFieldTypeOID"||_633.type==="esriFieldTypeGlobalID"||(!this._canUpdate&&!this._createOnlyFirstTime)){_635=true;}}if(!_634&&(_632.typeIdField&&_633.name.toLowerCase()==_632.typeIdField.toLowerCase())){_634=this._createTypeField(_633,_631,td);}else{if(!_634){_634=this._createDomainField(_633,_631,type,td);}}if(!_634){switch(_633.type){case "esriFieldTypeString":_634=this._createStringField(_633,_631,td);break;case "esriFieldTypeDate":_634=this._createDateField(_633,_631,td);break;case "esriFieldTypeInteger":case "esriFieldTypeSmallInteger":_634=this._createIntField(_633,_631,td);break;case "esriFieldTypeSingle":case "esriFieldTypeDouble":_634=this._createFltField(_633,_631,td);break;default:_634=this._createStringField(_633,_631,td);break;}}if(_631.tooltip&&_631.tooltip.length){this._toolTips.push(new _5d1({connectId:[_634.id],label:_631.tooltip}));}_634.onChange=lang.hitch(this,"onFieldValueChange",_631);_634.set("disabled",_635);_631.dijit=_634;},_createTypeField:function(_636,_637,node){return new _5cd({"class":"atiField",name:_636.alias||_636.name,store:this._toStore(_5b7.map(this._currentLInfo.types,function(item){return {id:item.id,name:item.name};})),searchAttr:"name"},_5bc.create("div",null,node));},_createDomainField:function(_638,_639,type,node){var _63a=_638.domain;if(type&&type.domains){if(type.domains[_638.name]&&type.domains[_638.name] instanceof _5c0===false){_63a=type.domains[_638.name];}}if(!_63a){return null;}if(_63a.codedValues){return new _5cd({"class":"atiField",name:_638.alias||_638.name,searchAttr:"name",required:_638.nullable||false},_5bc.create("div",null,node));}else{return new _5ce({"class":"atiField"},_5bc.create("div",null,node));}},_createStringField:function(_63b,_63c,node){var _63d={"class":"atiField",trim:true,maxLength:_63b.length};if(_63c.stringFieldOption===ATI.STRING_FIELD_OPTION_TEXTAREA){_63d["class"]+=" atiTextAreaField";return new _5d0(_63d,_5bc.create("div",null,node));}else{if(_63c.stringFieldOption===ATI.STRING_FIELD_OPTION_RICHTEXT){_63d["class"]+=" atiRichTextField";_63d.height="100%";_63d.width="100%";_63d.plugins=_63c.richTextPlugins||["bold","italic","underline","foreColor","hiliteColor","|","justifyLeft","justifyCenter","justifyRight","justifyFull","|","insertOrderedList","insertUnorderedList","indent","outdent","|","createLink"];return new _5c5(_63d,_5bc.create("div",null,node));}else{return new _5cb(_63d,_5bc.create("div",null,node));}}},_createDateField:function(_63e,_63f,node){var _640={"class":"atiField","trim":true};if(this._datePackage){_640.datePackage=this._datePackage;}return new _5ca(_640,_5bc.create("div",null,node));},_createIntField:function(_641,_642,node){return new _5cc({"class":"atiField",constraints:{places:0},invalidMessage:this.NLS_validationInt,trim:true},_5bc.create("div",null,node));},_createFltField:function(_643,_644,node){return new _5cc({"class":"atiField",trim:true,invalidMessage:this.NLS_validationFlt},_5bc.create("div",null,node));},_toStore:function(_645){return new _5d2({data:{identifier:"id",label:"name",items:_645}});},_connect:function(node,evt,func){this._aiConnects.push(_5b8.connect(node,evt,func));},_getDatePackage:function(_646){if(_646.datePackage===null){return null;}else{if(_646.datePackage){return _646.datePackage;}else{if(_5ba.locale==="ar"){return "dojox.date.islamic";}}}return null;},_destroyAttributeTable:function(){var _647=this._layerInfos;_5b7.forEach(_647,function(_648){var _649=_648.fieldInfos;_5b7.forEach(_649,function(_64a){var _64b=_64a.dijit;if(_64b){_64b._onChangeHandle=null;if(_64a.customField){return;}if(_64b.destroyRecursive){_64b.destroyRecursive();}else{if(_64b.destroy){_64b.destroy();}}}_64a.dijit=null;},this);},this);var _64c=this._toolTips;_5b7.forEach(_64c,function(item){item.destroy();delete item;});this._toolTips=[];if(this._attributes){_5bc.destroy(this._attributes);}}});lang.mixin(ATI,{STRING_FIELD_OPTION_RICHTEXT:"richtext",STRING_FIELD_OPTION_TEXTAREA:"textarea",STRING_FIELD_OPTION_TEXTBOX:"textbox"});if(has("extend-esri")){lang.setObject("dijit.AttributeInspector",ATI,_5bd);}return ATI;});},"esri/dijit/editing/tools/Cut":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/has","dojo/DeferredList","esri/graphicsUtils","esri/graphic","esri/tasks/query","esri/layers/FeatureLayer","esri/toolbars/draw","esri/dijit/editing/Cut","esri/dijit/editing/tools/ToggleToolBase","esri/kernel"],function(_64d,lang,_64e,_64f,has,_650,_651,_652,_653,_654,Draw,Cut,_655,_656){var _657=_64d([_655],{declaredClass:"esri.dijit.editing.tools.Cut",id:"btnFeatureCut",_enabledIcon:"toolbarIcon cutIcon",_disabledIcon:"toolbarIcon cutIcon",_drawType:Draw.POLYLINE,_enabled:true,_label:"NLS_cutLbl",_cutConnects:[],activate:function(){this._cutConnects.push(_64f.connect(this._toolbar,"onDrawEnd",this,"_onDrawEnd"));this.inherited(arguments);},deactivate:function(){this.inherited(arguments);_64e.forEach(this._cutConnects,_64f.disconnect);this._cutConnects=[];this._edits=[];},_onDrawEnd:function(_658){var _659=this._settings.layers;var _65a=this._cutLayers=_64e.filter(_659,function(_65b){return ((_65b.geometryType==="esriGeometryPolygon")||(_65b.geometryType==="esriGeometryPolyline")&&_65b.visible&&_65b._isMapAtVisibleScale());});this._cutConnects=this._cutConnects.concat(_64e.map(_65a,lang.hitch(this,function(_65c){return _64f.connect(_65c,"onEditsComplete",lang.hitch(this,function(adds,_65d,_65e){if(this._settings.undoRedoManager){var _65f=this._settings.undoRedoManager;_64e.forEach(this._edits,lang.hitch(this,function(edit){_65f.add(new Cut({featureLayer:edit.layer,addedGraphics:edit.adds,preUpdatedGraphics:edit.preUpdates,postUpdatedGraphics:edit.updates}));}),this);}this.onFinished();}));})));var _660=new _653();_660.geometry=_658;_64e.forEach(_65a,function(_661,idx){this._settings.editor._selectionHelper.selectFeatures([_661],_660,_654.SELECTION_NEW,lang.hitch(this,"_cutFeatures",_661,_660));},this);},_cutFeatures:function(_662,_663,_664){if(!_664||!_664.length){return;}this._edits=[];var _665=[];_665.push(this._settings.geometryService.cut(_651.getGeometries(_664),_663.geometry,lang.hitch(this,"_cutHandler",_662,_664)));var _666=new _650(_665).addCallback(lang.hitch(this,function(){this.onApplyEdits(this._edits);}));},_cutHandler:function(_667,_668,_669){var _66a=[];var _66b=[];var _66c=_64e.map(_668,function(item){return new _652(lang.clone(item.toJson()));});var _66d;var _66e;_64e.forEach(_669.cutIndexes,function(_66f,i){if(_66d!=_66f){_66d=_66f;_66b.push(_668[_66f].setGeometry(_669.geometries[i]));}else{_66e=new _652(_669.geometries[i],null,lang.mixin({},_668[_66f].attributes),null);_66e.attributes[_668[0].getLayer().objectIdField]=null;_66a.push(_66e);}},this);this._edits.push({layer:_667,adds:_66a,updates:_66b,preUpdates:_66c});}});if(has("extend-esri")){lang.setObject("dijit.editing.tools.Cut",_657,_656);}return _657;});},"esri/dijit/editing/tools/Edit":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/dijit/editing/tools/MenuItemBase","esri/kernel"],function(_670,lang,has,_671,_672){var Edit=_670([_671],{declaredClass:"esri.dijit.editing.tools.Edit",enable:function(_673){this._enabled=_673===this._geomType;this.inherited(arguments);}});if(has("extend-esri")){lang.setObject("dijit.editing.tools.Edit",Edit,_672);}return Edit;});},"dijit/_OnDijitClickMixin":function(){define("dijit/_OnDijitClickMixin",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","dojo/_base/unload","dojo/_base/window","./a11yclick"],function(on,_674,keys,_675,has,_676,win,_677){var ret=_675("dijit._OnDijitClickMixin",null,{connect:function(obj,_678,_679){return this.inherited(arguments,[obj,_678=="ondijitclick"?_677:_678,_679]);}});ret.a11yclick=_677;return ret;});},"dojo/dnd/autoscroll":function(){define(["../_base/lang","../sniff","../_base/window","../dom-geometry","../dom-style","../window"],function(lang,has,win,_67a,_67b,_67c){var _67d={};lang.setObject("dojo.dnd.autoscroll",_67d);_67d.getViewport=_67c.getBox;_67d.V_TRIGGER_AUTOSCROLL=32;_67d.H_TRIGGER_AUTOSCROLL=32;_67d.V_AUTOSCROLL_VALUE=16;_67d.H_AUTOSCROLL_VALUE=16;var _67e,doc=win.doc,_67f=Infinity,_680=Infinity;_67d.autoScrollStart=function(d){doc=d;_67e=_67c.getBox(doc);var html=win.body(doc).parentNode;_67f=Math.max(html.scrollHeight-_67e.h,0);_680=Math.max(html.scrollWidth-_67e.w,0);};_67d.autoScroll=function(e){var v=_67e||_67c.getBox(doc),html=win.body(doc).parentNode,dx=0,dy=0;if(e.clientX<_67d.H_TRIGGER_AUTOSCROLL){dx=-_67d.H_AUTOSCROLL_VALUE;}else{if(e.clientX>v.w-_67d.H_TRIGGER_AUTOSCROLL){dx=Math.min(_67d.H_AUTOSCROLL_VALUE,_680-html.scrollLeft);}}if(e.clientY<_67d.V_TRIGGER_AUTOSCROLL){dy=-_67d.V_AUTOSCROLL_VALUE;}else{if(e.clientY>v.h-_67d.V_TRIGGER_AUTOSCROLL){dy=Math.min(_67d.V_AUTOSCROLL_VALUE,_67f-html.scrollTop);}}window.scrollBy(dx,dy);};_67d._validNodes={"div":1,"p":1,"td":1};_67d._validOverflow={"auto":1,"scroll":1};_67d.autoScrollNodes=function(e){var b,t,w,h,rx,ry,dx=0,dy=0,_681,_682;for(var n=e.target;n;){if(n.nodeType==1&&(n.tagName.toLowerCase() in _67d._validNodes)){var s=_67b.getComputedStyle(n),_683=(s.overflow.toLowerCase() in _67d._validOverflow),_684=(s.overflowX.toLowerCase() in _67d._validOverflow),_685=(s.overflowY.toLowerCase() in _67d._validOverflow);if(_683||_684||_685){b=_67a.getContentBox(n,s);t=_67a.position(n,true);}if(_683||_684){w=Math.min(_67d.H_TRIGGER_AUTOSCROLL,b.w/2);rx=e.pageX-t.x;if(has("webkit")||has("opera")){rx+=win.body().scrollLeft;}dx=0;if(rx>0&&rx<b.w){if(rx<w){dx=-w;}else{if(rx>b.w-w){dx=w;}}_681=n.scrollLeft;n.scrollLeft=n.scrollLeft+dx;}}if(_683||_685){h=Math.min(_67d.V_TRIGGER_AUTOSCROLL,b.h/2);ry=e.pageY-t.y;if(has("webkit")||has("opera")){ry+=win.body().scrollTop;}dy=0;if(ry>0&&ry<b.h){if(ry<h){dy=-h;}else{if(ry>b.h-h){dy=h;}}_682=n.scrollTop;n.scrollTop=n.scrollTop+dy;}}if(dx||dy){return;}}try{n=n.parentNode;}catch(x){n=null;}}_67d.autoScroll(e);};return _67d;});},"esri/tasks/TrimExtendParameters":function(){define("esri/tasks/TrimExtendParameters",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel"],function(_686,lang,_687,_688,has,_689){var _68a=_686(null,{declaredClass:"esri.tasks.TrimExtendParameters",polylines:null,trimExtendTo:null,extendHow:null,toJson:function(){var _68b=_687.map(this.polylines,function(geom){return geom.toJson();});var json={};json.polylines=_688.toJson(_68b);json.trimExtendTo=_688.toJson(this.trimExtendTo.toJson());json.sr=_688.toJson(this.polylines[0].spatialReference.toJson());json.extendHow=this.extendHow||0;return json;}});lang.mixin(_68a,{DEFAULT_CURVE_EXTENSION:0,RELOCATE_ENDS:1,KEEP_END_ATTRIBUTES:2,NO_END_ATTRIBUTES:4,NO_EXTEND_AT_FROM:8,NO_EXTEND_AT_TO:16});if(has("extend-esri")){lang.setObject("tasks.TrimExtendParameters",_68a,_689);}return _68a;});},"esri/dijit/editing/Editor":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/kernel","dojo/has","dojo/query","dojo/DeferredList","dojo/dom-class","dojo/dom-construct","dijit/_Widget","dijit/_Templated","esri/domUtils","esri/graphicsUtils","esri/geometry/Polyline","esri/geometry/Polygon","esri/graphic","esri/undoManager","esri/tasks/query","esri/layers/FeatureLayer","esri/layers/FeatureTemplate","esri/toolbars/draw","esri/toolbars/edit","esri/dijit/AttributeInspector","esri/dijit/editing/Util","esri/dijit/editing/Add","esri/dijit/editing/Update","esri/dijit/editing/Delete","esri/dijit/editing/toolbars/Drawing","esri/dijit/editing/SelectionHelper","esri/dijit/editing/TemplatePicker","esri/kernel","esri/config","dojo/i18n!esri/nls/jsapi","dojo/text!esri/dijit/editing/templates/Editor.html","dijit/ProgressBar","dojo/NodeList-dom"],function(_68c,lang,_68d,_68e,_68f,has,_690,_691,_692,_693,_694,_695,_696,_697,_698,_699,_69a,_69b,_69c,_69d,_69e,Draw,_69f,_6a0,_6a1,Add,_6a2,_6a3,_6a4,_6a5,_6a6,_6a7,_6a8,_6a9,_6aa){var _6ab=_68c([_694,_695],{declaredClass:"esri.dijit.editing.Editor",widgetsInTemplate:true,templateString:_6aa,constructor:function(_6ac,_6ad){_6ac=_6ac||{};if(!_6ac.settings){console.error("Editor: please provide 'settings' parameter in the constructor");}if(!_6ac.settings.layerInfos){console.error("Editor: please provide 'layerInfos' parameter in the constructor");}this._settings=_6ac.settings;this._eConnects=[];},postCreate:function(){this._setDefaultOptions();this._initLayers();this._connectEvents();this._createWidgets();this._reset();this._enableMapClickHandler();},stopEditing:function(_6ae){this._updateCurrentFeature(lang.hitch(this,function(){this._clearSelection(false);_6ae&&_6ae();}));},destroy:function(){if(this.drawingToolbar){this.drawingToolbar.destroy();}if(this.attributeInspector){this.attributeInspector.destroy();}if(this.templatePicker){this.templatePicker.destroy();}if(this._selectionHelper){this._selectionHelper.destroy();}if(this._drawToolbar){this._drawToolbar.deactivate();}this._reset();this._disableMapClickHandler();_68d.forEach(this._eConnects,_68e.disconnect);_68e.disconnect(this._dtConnect);_68e.disconnect(this._templatePickerOnSelectionChangeEvent);this._layer=this._currentGraphic=this._activeType=this._activeTemplate=this._drawingTool=this._drawToolbar=this._editToolbar=this.drawingToolbar=this.attributeInspector=this.templatePicker=this.undoManager=null;if(this._settings.map.infoWindow&&this._settings.map.infoWindow.clearFeatures){this._settings.map.infoWindow.clearFeatures();}this.inherited(arguments);},_setDefaultOptions:function(){this._drawToolbar=this._settings.drawToolbar||new Draw(this._settings.map);this._settings.drawToolbar=this._drawToolbar;this._editToolbar=this._settings.editToolbar||new _69f(this._settings.map);this._settings.editToolbar=this._editToolbar;this._settings.toolbarVisible=this._settings.toolbarVisible||false;this._settings.toolbarOptions=lang.mixin({reshapeVisible:false,cutVisible:false,mergeVisible:false},this._settings.toolbarOptions);this._settings.createOptions=lang.mixin({polylineDrawTools:[_6ab.CREATE_TOOL_POLYLINE],polygonDrawTools:[_6ab.CREATE_TOOL_POLYGON],editAttributesImmediately:true},this._settings.createOptions);this._settings.singleSelectionTolerance=this._settings.singleSelectionTolerance||3;this._settings.maxUndoRedoOperations=this._settings.maxUndoRedoOperations||10;this._settings.editor=this;this._usePopup=this._settings.usePopup=this._settings.map.infoWindow._setPagerCallbacks?true:false;this._datePackage=this._settings.datePackage;var _6af=_6a8.defaults;this._settings.geometryService=this._settings.geometryService||_6af.geometryService;_6af.geometryService=_6af.geometryService||this._settings.geometryService;},_initLayers:function(){this._settings.layers=[];this._settings.userIds={};this._settings.createOnlyLayer={};var _6b0=this._settings.layerInfos;_68d.forEach(_6b0,function(_6b1){if(_6b1.featureLayer&&_6b1.featureLayer.loaded){this._settings.layers.push(_6b1.featureLayer);var _6b2=_6b1.featureLayer.id;if(_6b1.featureLayer.credential){this._settings.userIds[_6b2]=_6b1.featureLayer.credential.userId;}if(_6b1.userId){this._settings.userIds[_6b2]=_6b1.userId;}var _6b3=_6b1.featureLayer.getEditCapabilities();if(_6b3.canCreate&&!_6b3.canUpdate){this._settings.createOnlyLayer[_6b2]=true;}else{this._settings.createOnlyLayer[_6b2]=false;}}},this);},_reset:function(){this._hideAttributeInspector();this._editToolbar.deactivate();this._editVertices=true;this._layer=null;this._currentGraphic=null;this._activeType=null;this._activeTemplate=null;this._drawingTool=null;this._attributeChanged=false;},_saveFeatureOnClient:function(_6b4){var _6b5=this.templatePicker.getSelected();var _6b6;if(_6b5.template){_6b6=_6b5.featureLayer.renderer.getSymbol(_6b5.template.prototype);}else{_6b6=_6b5.symbolInfo.symbol;}var _6b7=_6b5.featureLayer.fields;var att={};_68d.forEach(_6b7,function(_6b8,idx){att[_6b8.name]=null;});this._tempGraphic=new _69a(_6b4,_6b6,att,null);var map=this._settings.map;map.graphics.add(this._tempGraphic);var _6b9=this._findCenterPoint(_6b4);this._createAttributeInspector(true);map.infoWindow.setTitle(_6b5.featureLayer?_6b5.featureLayer.name:_6a9.widgets.attributeInspector.NLS_title);this.attributeInspector.showFeature(this._tempGraphic,_6b5.featureLayer);this._showInfoWindow(_6b9,map.getInfoWindowAnchor(_6b9));if(this._settings.createOnlyLayer[_6b5.featureLayer.id]){this._infoWindowHideEvent=_68e.connect(map.infoWindow,"onHide",this,"_infoWindowHide");}_68e.disconnect(this._templatePickerOnSelectionChangeEvent);this.templatePicker.clearSelection();this._drawToolbar.deactivate();this._enableMapClickHandler();if(this.drawingToolbar){this.drawingToolbar.deactivate();}this._templatePickerOnSelectionChangeEvent=_68e.connect(this.templatePicker,"onSelectionChange",lang.hitch(this,"_onCreateFeature"));},_saveAttributesOnClient:function(_6ba,_6bb,_6bc){this._tempGraphic.attributes[_6bb]=(typeof (_6bc)==="number"&&isNaN(_6bc))?null:_6bc;},_infoWindowHide:function(){this._createFeature(this._tempGraphic.geometry,this._tempGraphic.attributes);_68e.disconnect(this._infoWindowHideEvent);},_createFeature:function(_6bd,_6be){this._editClickPoint=this._findCenterPoint(_6bd);if(!_6bd.rings){this._applyEdits([{layer:this._layer,adds:[this._createGraphic(_6bd,_6be)]}]);return;}this._simplify(_6bd,lang.hitch(this,function(_6bf){if(this._drawingTool!==_69e.TOOL_AUTO_COMPLETE_POLYGON){this._applyEdits([{layer:this._layer,adds:[this._createGraphic(_6bf,_6be)]}]);}else{this._autoComplete(_6bf,lang.hitch(this,function(_6c0){if(_6c0&&_6c0.length){this._applyEdits([{layer:this._layer,adds:_68d.map(_6c0,lang.hitch(this,function(_6c1){return this._createGraphic(_6c1,_6be);}))}]);}}));}}));},_updateCurrentFeature:function(_6c2){var _6c3=this._isModified();if(_6c3){this._updateFeature(_6c3,_6c2);}else{if(_6c2){_6c2(false);}}},_updateFeature:function(_6c4,_6c5){var geom=_6c4.geometry;if(!geom.rings){this._applyEdits([{layer:_6c4.getLayer(),updates:[_6c4]}],_6c5);}else{this._simplify(geom,lang.hitch(this,function(_6c6){this._applyEdits([{layer:_6c4.getLayer(),updates:[lang.mixin(_6c4,{geometry:_6c6})]}],_6c5);}));}},_deleteFeature:function(_6c7,_6c8){var _6c9=[];if(!_6c7){var _6ca=this._settings.layers;_6c9=_68d.map(_68d.filter(_6ca,function(_6cb){return _6cb.getSelectedFeatures().length>0;}),function(item){return {layer:item,deletes:item.getSelectedFeatures()};});if((!_6c9||!_6c9.length)&&this._currentGraphic){_6c9.push({layer:this._layer,deletes:[this._currentGraphic]});}}else{_6c9.push({layer:_6c7.getLayer(),deletes:[_6c7]});}this._applyEdits(_6c9,(_6c8));},_stopEditing:function(_6cc,adds,_6cd,_6ce){_696.hide(this.progressBar.domNode);this._undoRedoAdd();var _6cf;if(_6cc._isSelOnly===true){if(adds&&adds.length){this.templatePicker.clearSelection();var _6d0=new _69c();_6d0.objectIds=[adds[0].objectId];if(!this._settings.createOnlyLayer[_6cc.id]){this._selectFeatures([_6cc],_6d0,lang.hitch(this,"_onEditFeature"));}else{this._settings.map.graphics.remove(this._tempGraphic);}}}else{_6cf=this._selectionHelper.findMapService(this._settings.map,_6cc);if(_6cf){_6cf.refresh();}if(adds&&adds.length){this.templatePicker.clearSelection();if(!this._settings.createOnlyLayer[_6cc.id]){_6a1.findFeatures(adds,_6cc,lang.hitch(this,"_onEditFeature"));}else{this._settings.map.graphics.remove(this._tempGraphic);}}}if(_6ce&&_6ce.length){this._clearSelection(true);if(this._undoRedo){_6cf=this._selectionHelper.findMapService(_6cc,this._settings.map);if(_6cf){_6cf.refresh();}}}if(this._undoRedo&&_6cd&&_6cd.length){_6cf=this._selectionHelper.findMapService(_6cc,this._settings.map);if(_6cf){_6cf.refresh();}this.attributeInspector.refresh();this._undoRedo=false;}if(this.drawingToolbar){this.drawingToolbar._updateUI();}this._undoRedo=false;},_undoRedoAdd:function(){this._settings._isApplyEditsCall=false;if(!this._settings.undoManager){return;}if(this._activeTool==="CUT"||this._activeTool==="UNION"){return;}var edit=(this._edits&&this._edits.length)?this._edits[0]:null;if(!edit){return;}var adds=edit.adds||[];var _6d1=edit.updates||[];var _6d2=edit.deletes||[];var _6d3={featureLayer:edit.layer};if(adds.length){this.undoManager.add(new Add(lang.mixin(_6d3,{addedGraphics:adds})));}else{if(_6d2.length){this.undoManager.add(new _6a3(lang.mixin(_6d3,{deletedGraphics:_6d2})));}else{if(_6d1.length){this.undoManager.add(new _6a2(lang.mixin(_6d3,{preUpdatedGraphics:[this._preUpdates],postUpdatedGraphics:_6d1})));}}}this._edits=null;this._preUpdates=null;},_activateDrawToolbar:function(_6d4){this._layer=_6d4.featureLayer;this._activeType=_6d4.type;this._activeTemplate=_6d4.template;this._drawingTool=this._activeTemplate?this._activeTemplate.drawingTool:null;this._drawTool=this._toDrawTool(this._drawingTool,_6d4.featureLayer);_68e.disconnect(this._dtConnect);if(this._settings.createOnlyLayer[_6d4.featureLayer.id]){this._dtConnect=_68e.connect(this._drawToolbar,"onDrawEnd",this,"_saveFeatureOnClient");}else{this._dtConnect=_68e.connect(this._drawToolbar,"onDrawEnd",this,"_createFeature");}this._editToolbar.deactivate();this._disableMapClickHandler();if(!this.drawingToolbar){this._drawToolbar.activate(this._drawTool);}else{this.drawingToolbar.activateEditing(this._drawTool,this._layer);}},_activateEditToolbar:function(_6d5,info){var _6d6=_6d5.getLayer();var _6d7=_6d6?_6d6.geometryType:null;var _6d8=_69f.MOVE;if(_6d7!=="esriGeometryPoint"&&this._isNotesFeature(_6d5)===true){_6d8=_6d8|_69f.ROTATE|_69f.SCALE;this._editVertices=false;}else{if(_6d7!=="esriGeometryPoint"&&this._editVertices===true){_6d8=_6d8|_69f.ROTATE|_69f.SCALE;this._editVertices=false;}else{_6d8=_6d8|_69f.EDIT_VERTICES;this._editVertices=true;}}this._attributeChanged=this._isModified();this._preUpdates=new _69a(lang.clone(_6d5.toJson()));var _6d9=_6d6.getEditCapabilities({feature:_6d5,userId:this._settings.userIds[_6d6.id]});var _6da=_68d.filter(this._settings.layerInfos,function(item){return item.featureLayer["layerId"]===_6d6.layerId;})[0];if(_6d9.canUpdate&&!_6da.disableGeometryUpdate&&_6d6.allowGeometryUpdates){this._editToolbar.activate(_6d8,_6d5);}if(!this._settings.map.infoWindow.isShowing){var _6db=(info&&info.screenPoint)||this._findCenterPoint(_6d5);this._showInfoWindow(_6db,this._settings.map.getInfoWindowAnchor(_6db));}},_createGraphic:function(_6dc,_6dd){var _6de=(this._activeType&&this._activeType.symbol)||this._layer.defaultSymbol;var _6df=new _69a(_6dc,_6de,_6dd);if(this._activeTemplate||_6dd){_6df.attributes=_6dd||lang.mixin({},this._activeTemplate.prototype.attributes);}else{_6df.attributes=_6df.attributes||[];_68d.forEach(this._layer.fields,function(_6e0){_6df.attributes[_6e0.name]=null;},this);}return _6df;},_connectEvents:function(){var _6e1=this._settings.layers;_68d.forEach(_6e1,function(item){this._connect(item,"onEditsComplete",lang.hitch(this,"_stopEditing",item));},this);_68d.forEach(_6e1,function(item){this._connect(item,"onBeforeApplyEdits",lang.hitch(this,function(){_696.show(this.progressBar.domNode);this._settings._isApplyEditsCall=true;}));},this);this._connect(this._editToolbar,"onGraphicClick",lang.hitch(this,"_activateEditToolbar"));this._connect(this._editToolbar,"onGraphicFirstMove",lang.hitch(this,"_hideAttributeInspector"));this._connect(this._editToolbar,"onVertexFirstMove",lang.hitch(this,"_hideAttributeInspector"));this._connect(this._editToolbar,"onScaleStart",lang.hitch(this,"_hideAttributeInspector"));this._connect(this._editToolbar,"onRotateStart",lang.hitch(this,"_hideAttributeInspector"));},_connect:function(node,evt,func){this._eConnects.push(_68e.connect(node,evt,func));},_createWidgets:function(){this._selectionHelper=new _6a5(this._settings);this._createTemplatePicker();this._createAttributeInspector();this._createDrawingToolbar();this._createUndoRedoManager();},_createTemplatePicker:function(){if(!this._settings.templatePicker){var _6e2=_68d.filter(this._settings.layers,function(item){return item.getEditCapabilities().canCreate;});this.templatePicker=new _6a6({"class":"esriTemplatePicker",featureLayers:_6e2,showTooltip:true,maxLabelLength:this._settings.typesCharacterLimit,columns:"auto",rows:"auto"},this.templatePickerDiv);this.templatePicker.startup();this._settings.templatePicker=this.templatePicker;}else{this.templatePicker=this._settings.templatePicker;_696.hide(this.templatePickerDiv);}this._templatePickerOnSelectionChangeEvent=_68e.connect(this.templatePicker,"onSelectionChange",lang.hitch(this,"_onCreateFeature"));},_createAttributeInspector:function(_6e3){if(!this._settings.attributeInspector){this._customAttributeInspector=false;var map=this._settings.map;this.attributeInspector=new _6a0({layerInfos:this._settings.layerInfos,hideNavButtons:this._usePopup,datePackage:this._datePackage},_693.create("div"));this.attributeInspector.startup();map.infoWindow.setContent(this.attributeInspector.domNode);map.infoWindow.setTitle(_6a9.widgets.attributeInspector.NLS_title);map.infoWindow.resize(350,375);_68f.query(".esriAttributeInspector .atiLayerName").style({display:"none"});}else{this._customAttributeInspector=true;this.attributeInspector=this._settings.attributeInspector;}this._connect(this.attributeInspector,"onDelete",lang.hitch(this,"_deleteFeature"));this._connect(this.attributeInspector,"onNext",lang.hitch(this,function(_6e4){this._updateCurrentFeature(lang.hitch(this,function(){this._attributeChanged=false;this._onEditFeature(_6e4);}));}));if(this._usePopup){this._settings.map.infoWindow._setPagerCallbacks(this.attributeInspector,lang.hitch(this.attributeInspector,"next"),lang.hitch(this.attributeInspector,"previous"));}if(_6e3){this._connect(this.attributeInspector,"onAttributeChange",lang.hitch(this,"_saveAttributesOnClient"));}else{this._connect(this.attributeInspector,"onAttributeChange",lang.hitch(this,function(_6e5,_6e6,_6e7){this._preUpdates=new _69a(lang.clone(_6e5.toJson()));this._currentGraphic.attributes[_6e6]=(typeof (_6e7)==="number"&&isNaN(_6e7))?null:_6e7;this._updateFeature(this._currentGraphic,null);this._attributeChanged=false;}));}},_createDrawingToolbar:function(){if(this._settings.toolbarVisible===true){this.drawingToolbar=new _6a4({"class":"esriDrawingToolbar",drawToolbar:this._drawToolbar,editToolbar:this._editToolbar,settings:this._settings,onDelete:lang.hitch(this,"_deleteFeature"),onApplyEdits:lang.hitch(this,"_applyEdits"),onShowAttributeInspector:lang.hitch(this,"_onEditFeature")},this.drawingToolbarDiv);}},_createUndoRedoManager:function(){if(!this._settings.enableUndoRedo&&!this._settings.undoManager){return;}this._settings.enableUndoRedo=true;this.undoManager=this._settings.undoManager;if(!this.undoManager){this.undoManager=this._settings.undoManager=new _69b({maxOperations:this._settings.maxUndoRedoOperations});}this._connect(document,"onkeypress",lang.hitch(this,function(evt){if(evt.metaKey||evt.ctrlKey){if(evt.charOrCode==="z"){this._undo();}if(evt.charOrCode==="y"){this._redo();}}}));},_enableMapClickHandler:function(){this._mapClickHandler=_68e.connect(this._settings.map,"onClick",lang.hitch(this,function(evt){if(this._drawToolbar._geometryType){return;}if(this._activeTool==="SELECT"){this._activeTool="";return;}this._updateCurrentFeature(lang.hitch(this,function(){this._reset();this._updateSelection(evt);}));}));},_disableMapClickHandler:function(){_68e.disconnect(this._mapClickHandler);},_onCreateFeature:function(){var _6e8=this.templatePicker.getSelected();if(_6e8){this._updateCurrentFeature(lang.hitch(this,function(){if(this._currentGraphic){this._clearSelection(false);}this._reset();this._activateDrawToolbar(_6e8);}));}else{this._reset();_68e.disconnect(this._dtConnect);this._drawToolbar.deactivate();this._enableMapClickHandler();if(this.drawingToolbar){this.drawingToolbar.deactivate();}}},_onEditFeature:function(_6e9,_6ea){_6e9=(lang.isArray(_6e9)?_6e9[0]:_6e9)||null;if(!_6e9){return;}if(!this._customAttributeInspector){_6ea=_6ea||this._editClickPoint||this._findCenterPoint(_6e9);var _6eb=_6e9.getLayer();this._settings.map.infoWindow.setTitle(_6eb?_6eb.name:_6a9.widgets.attributeInspector.NLS_title);if(this.drawingToolbar||!this._settings.map.infoWindow.isShowing){this._showInfoWindow(_6ea,this._settings.map.getInfoWindowAnchor(_6ea));}this._editClickPoint=null;}if(_6e9===this._currentGraphic){return;}this._editVertices=true;this._layer=_6e9.getLayer();this._currentGraphic=_6e9;if(_6e9.getDojoShape()){_6e9.getDojoShape().moveToFront();}this._activateEditToolbar(_6e9);},_applyEdits:function(_6ec,_6ed){_6ec=_6ec||[];if(_6ec.length<=0){return;}this._edits=_6ec;var _6ee=_68d.map(_6ec,function(edit){return edit.layer.applyEdits(edit.adds,edit.updates,edit.deletes);});this._deferredsList=new _691(_6ee).addCallback(lang.hitch(this,function(){_696.hide(this.progressBar.domNode);if(_6ed){_6ed();}var map=this._settings.map;if(map&&map.infoWindow.reposition&&map.infoWindow.isShowing){map.infoWindow.reposition();}}));},_undo:function(){if(this._settings.undoManager&&!this._settings._isApplyEditsCall){this._editToolbar.deactivate();this._undoRedo=true;this._settings.undoManager.undo();}},_redo:function(){if(this._settings.undoManager&&!this._settings._isApplyEditsCall){this._editToolbar.deactivate();this._undoRedo=true;this._settings.undoManager.redo();}},_simplify:function(_6ef,_6f0){if(_699.prototype.isSelfIntersecting(_6ef)){this._settings.geometryService.simplify([_6ef],function(_6f1){var _6f2=(_6f1&&_6f1.length)?_6f1[0]:_6f2;if(_6f0){_6f0(_6f2);}});}else{if(_6f0){_6f0(_6ef);}}},_autoComplete:function(_6f3,_6f4){var _6f5=this._getLayers("esriGeometryPolygon");var _6f6=new _69c();_6f6.geometry=_6f3;_6f6.returnGeometry=true;this._selectFeatures(_6f5,_6f6,lang.hitch(this,function(_6f7){if(!_6f7||_6f7.length<=0){if(_6f4){_6f4([_6f3]);}}else{this._settings.geometryService.autoComplete(_697.getGeometries(_6f7),this._toPolylines([_6f6.geometry]),function(_6f8){if(_6f4){_6f4(_6f8);}});}}));},_getLayers:function(_6f9){var _6fa=this._settings.layers;return _68d.filter(_6fa,function(_6fb){return _6fb.geometryType===_6f9;});},_selectFeatures:function(_6fc,_6fd,_6fe,mode){this._selectionHelper.selectFeatures(_6fc,_6fd,mode||_69d.SELECTION_NEW,_6fe);},_updateSelection:function(evt){var _6ff=evt.mapPoint;var _700=evt.graphic;this._selectionHelper.selectFeaturesByGeometry(this._settings.layers,_6ff,_69d.SELECTION_NEW,lang.hitch(this,function(_701){var _702=_68d.some(_701,lang.hitch(this,function(item){return item==_700;}));if(_700&&!_702){var _703=_700.getLayer();if(this._isValidLayer(_703)){var _704=new _69c();_704.objectIds=[_700.attributes[_703.objectIdField]];this._selectionHelper.selectFeatures([_703],_704,_69d.SELECTION_ADD,lang.hitch(this,function(_705){this._updatePopupButtons(_705);this._onEditFeature(_705,_6ff);}));}else{this._clearSelection();}}else{if(_701&&_701.length){this._updatePopupButtons(_701);this._onEditFeature(_701,_6ff);}else{this._clearSelection();}}}));},_updatePopupButtons:function(_706){if(!this._usePopup||!_706){return;}var _707=_706.length;var _708=[this._settings.map.infoWindow._prevFeatureButton,this._settings.map.infoWindow._nextFeatureButton];_68d.forEach(_708,lang.hitch(this,function(item){(_707>1)?_692.remove(item,"hidden"):_692.add(item,"hidden");}));},_clearSelection:function(_709){this._selectionHelper.clearSelection(_709||false);this._reset();},_findCenterPoint:function(_70a){var _70b=_70a.geometry||_70a;var _70c;switch(_70b.type){case "point":_70c=_70b;break;case "polyline":var _70d=_70b.paths[0].length;_70c=_70b.getPoint(0,Math.ceil(_70d/2));break;case "polygon":var _70e=_70b.rings.length-1;var _70f=_70b.rings[_70e].length-1;_70c=_70b.getPoint(_70e,_70f);break;}return this._settings.map.toScreen(_70c);},_hideAttributeInspector:function(){if(!this._customAttributeInspector&&this._settings.map.infoWindow){this._settings.map.infoWindow.hide();}},_toPolylines:function(_710){var _711=_68d.map(_710,function(_712){var _713=new _698(_712.spatialReference);_68d.forEach(_712.rings,function(ring){_713.addPath(ring);});return _713;});return _711;},_isNotesFeature:function(_714){var _715=_714.getLayer();var _716=_715?_715.types||null:null;if(!_716){return false;}var _717=_714.attributes[_715.typeIdField];var _718;_68d.some(_716,function(type){if(type.id===_717){_718=type.templates;return true;}return false;});if(!_718){return false;}var _719=_718[0]||null;if(!_719){return false;}var _71a=this._isShapeTool(_719.drawingTool)||null;return _71a?true:false;},_isValidLayer:function(_71b){var i;var _71c=this._settings.layerInfos;for(i=0;i<_71c.length;i++){var _71d=_71c[i];if(_71b.id==_71d.layerId){return true;}}return false;},_isShapeTool:function(_71e){switch(_71e){case _69e.TOOL_ARROW:return Draw.ARROW;case _69e.TOOL_LEFT_ARROW:return Draw.LEFT_ARROW;case _69e.TOOL_RIGHT_ARROW:return Draw.RIGHT_ARROW;case _69e.TOOL_UP_ARROW:return Draw.UP_ARROW;case _69e.TOOL_DOWN_ARROW:return Draw.DOWN_ARROW;case _69e.TOOL_CIRCLE:return Draw.CIRCLE;case _69e.TOOL_ELLIPSE:return Draw.ELLIPSE;case _69e.TOOL_TRIANGLE:return Draw.TRIANGLE;case _69e.TOOL_RECTANGLE:return Draw.RECTANGLE;default:return null;}},_toDrawTool:function(_71f,_720){var _721=_720.geometryType;switch(_71f){case _69e.TOOL_POINT:return Draw.POINT;case _69e.TOOL_ARROW:return Draw.ARROW;case _69e.TOOL_LEFT_ARROW:return Draw.LEFT_ARROW;case _69e.TOOL_RIGHT_ARROW:return Draw.RIGHT_ARROW;case _69e.TOOL_UP_ARROW:return Draw.UP_ARROW;case _69e.TOOL_DOWN_ARROW:return Draw.DOWN_ARROW;case _69e.TOOL_CIRCLE:return Draw.CIRCLE;case _69e.TOOL_ELLIPSE:return Draw.ELLIPSE;case _69e.TOOL_TRIANGLE:return Draw.TRIANGLE;case _69e.TOOL_RECTANGLE:return Draw.RECTANGLE;case _69e.TOOL_LINE:return Draw.POLYLINE;case _69e.TOOL_POLYGON:return Draw.POLYGON;case _69e.TOOL_FREEHAND:if(_721==="esriGeometryPolyline"){return Draw.FREEHAND_POLYLINE;}else{return Draw.FREEHAND_POLYGON;}break;default:var _722=Draw.POINT;if(_721==="esriGeometryPolyline"){_722=Draw.POLYLINE;if(this._settings.createOptions.polylineDrawTools[0]===_6ab.CREATE_TOOL_FREEHAND_POLYLINE){_722=Draw.FREEHAND_POLYLINE;}}else{if(_721==="esriGeometryPolygon"){_722=Draw.POLYGON;if(this._settings.createOptions.polygonDrawTools[0]===_6ab.CREATE_TOOL_FREEHAND_POLYGON){_722=Draw.FREEHAND_POLYGON;}}}return _722;}},_isModified:function(){var _723=this._editToolbar.getCurrentState();return ((_723.isModified||this._attributeChanged)&&_723.graphic)?_723.graphic:null;},_showInfoWindow:function(_724,_725){if(!this._customAttributeInspector){this._settings.map.infoWindow.show(_724,_725);}}});lang.mixin(_6ab,{CREATE_TOOL_POLYLINE:"polyline",CREATE_TOOL_FREEHAND_POLYLINE:"freehandpolyline",CREATE_TOOL_POLYGON:"polygon",CREATE_TOOL_FREEHAND_POLYGON:"freehandpolygon",CREATE_TOOL_AUTOCOMPLETE:"autocomplete",CREATE_TOOL_RECTANGLE:"rectangle",CREATE_TOOL_TRIANGLE:"triangle",CREATE_TOOL_CIRCLE:"circle",CREATE_TOOL_ELLIPSE:"ellipse",CREATE_TOOL_ARROW:"arrow",CREATE_TOOL_UP_ARROW:"uparrow",CREATE_TOOL_DOWN_ARROW:"downarrow",CREATE_TOOL_RIGHT_ARROW:"rightarrow",CREATE_TOOL_LEFT_ARROW:"leftarrow"});if(has("extend-esri")){lang.setObject("dijit.editing.Editor",_6ab,_6a7);}return _6ab;});},"esri/dijit/editing/tools/DropDownToolBase":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dojo/dom-style","dijit/registry","dijit/Menu","dijit/form/ComboButton","esri/dijit/editing/tools/ToolBase","esri/kernel","esri/lang"],function(_726,lang,has,_727,_728,Menu,_729,_72a,_72b,_72c){var DDTB=_726([_729,_72a],{declaredClass:"esri.dijit.editing.tools.DropDownToolBase",_enabled:false,_checked:false,postCreate:function(){this._tools=[];this._createTools();this.inherited(arguments);if(this._setShowLabelAttr){this._setShowLabelAttr(false);}},destroy:function(){var tool;var _72d=this._tools;for(tool in _72d){if(_72d.hasOwnProperty(tool)&&_72c.isDefined(_72d[tool])){_72d[tool].destroy();}}this.inherited(arguments);},_createTools:function(){var i;var mnu=new Menu();this.dropDown=mnu;for(i in this._tools){if(this._tools.hasOwnProperty(i)){mnu.addChild(this._tools[i]);}}this._activeTool=mnu.getChildren()[0];this._updateUI();},activate:function(_72e){this.inherited(arguments);if(!this._activeTool){this._activateDefaultTool();}else{this._activeTool.activate();}},deactivate:function(){this.inherited(arguments);if(this._activeTool){this._activeTool.deactivate();}},enable:function(_72f){var tool;for(tool in this._tools){if(this._tools.hasOwnProperty(tool)){this._tools[tool].enable(_72f);}}this.setEnabled(true);this.inherited(arguments);},setChecked:function(_730){this._checked=_730;this._updateUI();},_onDrawEnd:function(_731){},onLayerChange:function(_732,type,_733){this._activeTool=null;this._activeType=type;this._activeTemplate=_733;this._activeLayer=_732;},onItemClicked:function(_734,evt){if(this._activeTool){this._activeTool.deactivate();}this._activeTool=_728.byId(_734);if(this._checked===false){this._onClick();}else{this._updateUI();if(this._activeTool){this._activeTool.activate();this._activeTool.setChecked(true);}}},_onClick:function(evt){if(this._enabled===false){return;}this._checked=!this._checked;this.inherited(arguments);},_updateUI:function(){this.attr("disabled",!this._enabled);_727.set(this.focusNode,{outline:"none"});_727.set(this.titleNode,{padding:"0px",border:"none"});if(this._checked){_727.set(this.titleNode,{backgroundColor:"#D4DFF2",border:"1px solid #316AC5"});}else{_727.set(this.titleNode,{backgroundColor:"",border:""});}if(this._activeTool){this.attr("iconClass",this._checked?this._activeTool._enabledIcon:this._activeTool._disabledIcon);this.attr("label",this._activeTool.label);}}});if(has("extend-esri")){lang.setObject("dijit.editing.tools.DropDownToolBase",DDTB,_72b);}return DDTB;});},"dijit/form/_ListMouseMixin":function(){define("dijit/form/_ListMouseMixin",["dojo/_base/declare","dojo/mouse","dojo/on","dojo/touch","./_ListBase"],function(_735,_736,on,_737,_738){return _735("dijit.form._ListMouseMixin",_738,{postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,_737.press,function(evt){evt.preventDefault();}));this._listConnect(_737.press,"_onMouseDown");this._listConnect(_737.release,"_onMouseUp");this._listConnect(_736.enter,"_onMouseOver");this._listConnect(_736.leave,"_onMouseOut");},_onMouseDown:function(evt,_739){if(this._hoveredNode){this.onUnhover(this._hoveredNode);this._hoveredNode=null;}this._isDragging=true;this._setSelectedAttr(_739);},_onMouseUp:function(evt,_73a){this._isDragging=false;var _73b=this.selected;var _73c=this._hoveredNode;if(_73b&&_73a==_73b){this.onClick(_73b);}else{if(_73c&&_73a==_73c){this._setSelectedAttr(_73c);this.onClick(_73c);}}},_onMouseOut:function(evt,_73d){if(this._hoveredNode){this.onUnhover(this._hoveredNode);this._hoveredNode=null;}if(this._isDragging){this._cancelDrag=(new Date()).getTime()+1000;}},_onMouseOver:function(evt,_73e){if(this._cancelDrag){var time=(new Date()).getTime();if(time>this._cancelDrag){this._isDragging=false;}this._cancelDrag=null;}this._hoveredNode=_73e;this.onHover(_73e);if(this._isDragging){this._setSelectedAttr(_73e);}}});});},"esri/dijit/editing/Update":function(){define("esri/dijit/editing/Update",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/geometry/jsonUtils","esri/OperationBase"],function(_73f,lang,has,_740,_741,_742){var _743=_73f(_742,{declaredClass:"esri.dijit.editing.Update",type:"edit",label:"Update Features",constructor:function(_744){var i;_744=_744||{};if(!_744.featureLayer){console.error("In constructor of 'esri.dijit.editing.Update', featureLayer not provided");return;}this._featureLayer=_744.featureLayer;if(!_744.preUpdatedGraphics){console.error("In constructor of 'esri.dijit.editing.Update', preUpdatedGraphics not provided");return;}this._preUpdatedGraphicsGeometries=[];this._preUpdatedGraphicsAttributes=[];for(i=0;i<_744.preUpdatedGraphics.length;i++){this._preUpdatedGraphicsGeometries.push(_744.preUpdatedGraphics[i].geometry.toJson());this._preUpdatedGraphicsAttributes.push(_744.preUpdatedGraphics[i].attributes);}if(!_744.postUpdatedGraphics){console.error("In constructor of 'esri.dijit.editing.Update', postUpdatedGraphics not provided");return;}this._postUpdatedGraphics=_744.postUpdatedGraphics;this._postUpdatedGraphicsGeometries=[];this._postUpdatedGraphicsAttributes=[];for(i=0;i<_744.postUpdatedGraphics.length;i++){this._postUpdatedGraphicsGeometries.push(_744.postUpdatedGraphics[i].geometry.toJson());this._postUpdatedGraphicsAttributes.push(lang.clone(_744.postUpdatedGraphics[i].attributes));}},performUndo:function(){var i;for(i=0;i<this._postUpdatedGraphics.length;i++){this._postUpdatedGraphics[i].setGeometry(_741.fromJson(this._preUpdatedGraphicsGeometries[i]));this._postUpdatedGraphics[i].setAttributes(this._preUpdatedGraphicsAttributes[i]);}this._featureLayer.applyEdits(null,this._postUpdatedGraphics,null);},performRedo:function(){var i;for(i=0;i<this._postUpdatedGraphics.length;i++){this._postUpdatedGraphics[i].setGeometry(_741.fromJson(this._postUpdatedGraphicsGeometries[i]));this._postUpdatedGraphics[i].setAttributes(this._postUpdatedGraphicsAttributes[i]);}this._featureLayer.applyEdits(null,this._postUpdatedGraphics,null);}});if(has("extend-esri")){lang.setObject("dijit.editing.Update",_743,_740);}return _743;});},"dojo/cache":function(){define(["./_base/kernel","./text"],function(dojo){return dojo.cache;});},"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"button presentation\" aria-hidden=\"true\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n","dijit/ProgressBar":function(){require({cache:{"url:dijit/templates/ProgressBar.html":"<div class=\"dijitProgressBar dijitProgressBarEmpty\" role=\"progressbar\"\n\t><div  data-dojo-attach-point=\"internalProgress\" class=\"dijitProgressBarFull\"\n\t\t><div class=\"dijitProgressBarTile\" role=\"presentation\"></div\n\t\t><span style=\"visibility:hidden\">&#160;</span\n\t></div\n\t><div data-dojo-attach-point=\"labelNode\" class=\"dijitProgressBarLabel\" id=\"${id}_label\"></div\n\t><img data-dojo-attach-point=\"indeterminateHighContrastImage\" class=\"dijitProgressBarIndeterminateHighContrastImage\" alt=\"\"\n/></div>\n"}});define("dijit/ProgressBar",["require","dojo/_base/declare","dojo/dom-class","dojo/_base/lang","dojo/number","./_Widget","./_TemplatedMixin","dojo/text!./templates/ProgressBar.html"],function(_745,_746,_747,lang,_748,_749,_74a,_74b){return _746("dijit.ProgressBar",[_749,_74a],{progress:"0",value:"",maximum:100,places:0,indeterminate:false,label:"",name:"",templateString:_74b,_indeterminateHighContrastImagePath:_745.toUrl("./themes/a11y/indeterminate_progress.gif"),postMixInProperties:function(){this.inherited(arguments);if(!(this.params&&"value" in this.params)){this.value=this.indeterminate?Infinity:this.progress;}},buildRendering:function(){this.inherited(arguments);this.indeterminateHighContrastImage.setAttribute("src",this._indeterminateHighContrastImagePath.toString());this.update();},update:function(_74c){lang.mixin(this,_74c||{});var tip=this.internalProgress,ap=this.domNode;var _74d=1;if(this.indeterminate){ap.removeAttribute("aria-valuenow");}else{if(String(this.progress).indexOf("%")!=-1){_74d=Math.min(parseFloat(this.progress)/100,1);this.progress=_74d*this.maximum;}else{this.progress=Math.min(this.progress,this.maximum);_74d=this.maximum?this.progress/this.maximum:0;}ap.setAttribute("aria-valuenow",this.progress);}ap.setAttribute("aria-describedby",this.labelNode.id);ap.setAttribute("aria-valuemin",0);ap.setAttribute("aria-valuemax",this.maximum);this.labelNode.innerHTML=this.report(_74d);_747.toggle(this.domNode,"dijitProgressBarIndeterminate",this.indeterminate);tip.style.width=(_74d*100)+"%";this.onChange();},_setValueAttr:function(v){this._set("value",v);if(v==Infinity){this.update({indeterminate:true});}else{this.update({indeterminate:false,progress:v});}},_setLabelAttr:function(_74e){this._set("label",_74e);this.update();},_setIndeterminateAttr:function(_74f){this.indeterminate=_74f;this.update();},report:function(_750){return this.label?this.label:(this.indeterminate?"&#160;":_748.format(_750,{type:"percent",places:this.places,locale:this.lang}));},onChange:function(){}});});},"esri/layers/RenderMode":function(){define("esri/layers/RenderMode",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","dojo/io/script","esri/kernel"],function(_751,_752,lang,_753,has,_754,_755){var _756=_752(null,{declaredClass:"esri.layers._RenderMode",constructor:function(){this._prefix="jsonp_"+(_751._scopeName||"dojo")+"IoScript";},initialize:function(map){this.map=map;this._init=true;},startup:function(){},propertyChangeHandler:function(type){},destroy:function(){this._init=false;},drawFeature:function(_757){},suspend:function(){},resume:function(){},refresh:function(){},_incRefCount:function(oid){var _758=this._featureMap[oid];if(_758){_758._count++;}},_decRefCount:function(oid){var _759=this._featureMap[oid];if(_759){_759._count--;}},_getFeature:function(oid){return this._featureMap[oid];},_addFeatureIIf:function(oid,_75a){var fmap=this._featureMap,_75b=fmap[oid],_75c=this.featureLayer;if(!_75b){fmap[oid]=_75a;_75c._add(_75a);_75a._count=0;}return _75b||_75a;},_removeFeatureIIf:function(oid){var _75d=this._featureMap[oid],_75e=this.featureLayer;if(_75d){if(_75d._count){return;}delete this._featureMap[oid];_75e._remove(_75d);}return _75d;},_clearIIf:function(){var i,_75f=this.featureLayer,_760=_75f.graphics,_761=_75f._selectedFeatures,_762=_75f.objectIdField;for(i=_760.length-1;i>=0;i--){var _763=_760[i];var oid=_763.attributes[_762];if(oid in _761){_763._count=1;continue;}_763._count=0;this._removeFeatureIIf(oid);}},_isPending:function(id){var dfd=_754[this._prefix+id];return dfd?true:false;},_cancelPendingRequest:function(dfd,id){dfd=dfd||_754[this._prefix+id];if(dfd){try{dfd.cancel();_754._validCheck(dfd);}catch(e){}}},_purgeRequests:function(){_754._validCheck(null);},_toggleVisibility:function(show){var _764=this.featureLayer,_765=_764.graphics,_766=show?"show":"hide",i,len=_765.length;show=show&&_764._ager;for(i=0;i<len;i++){var _767=_765[i];_767[_766]();if(show){_764._repaint(_767);}}},_applyTimeFilter:function(_768){var _769=this.featureLayer;if(!_769.timeInfo||_769.suspended){return;}if(!_768){_769._fireUpdateStart();}var _76a=_769._trackManager;if(_76a){_76a.clearTracks();}var defn=_769.getTimeDefinition(),_76b=_769._getOffsettedTE(_769._mapTimeExtent);if(_76b){_76b=_769._getTimeOverlap(defn,_76b);if(_76b){var _76c=_769._filterByTime(_769.graphics,_76b.startTime,_76b.endTime);if(_76a){_76a.addFeatures(_76c.match);}_753.forEach(_76c.match,function(_76d){var _76e=_76d._shape;if(!_76d.visible){_76d.show();_76e=_76d._shape;_76e&&_76e._moveToFront();}if(_769._ager&&_76e){_769._repaint(_76d);}});_753.forEach(_76c.noMatch,function(_76f){if(_76f.visible){_76f.hide();}});}else{this._toggleVisibility(false);}}else{if(_76a){_76a.addFeatures(_769.graphics);}this._toggleVisibility(true);}if(_76a){_76a.moveLatestToFront();_76a.drawTracks();}if(!_768){_769._fireUpdateEnd();}}});if(has("extend-esri")){lang.setObject("layers._RenderMode",_756,_755);}return _756;});},"dojox/grid/_ViewManager":function(){define("dojox/grid/_ViewManager",["dojo/_base/declare","dojo/_base/sniff","dojo/dom-class"],function(_770,has,_771){return _770("dojox.grid._ViewManager",null,{constructor:function(_772){this.grid=_772;},defaultWidth:200,views:[],resize:function(){this.onEach("resize");},render:function(){this.onEach("render");},addView:function(_773){_773.idx=this.views.length;this.views.push(_773);},destroyViews:function(){for(var i=0,v;v=this.views[i];i++){v.destroy();}this.views=[];},getContentNodes:function(){var _774=[];for(var i=0,v;v=this.views[i];i++){_774.push(v.contentNode);}return _774;},forEach:function(_775){for(var i=0,v;v=this.views[i];i++){_775(v,i);}},onEach:function(_776,_777){_777=_777||[];for(var i=0,v;v=this.views[i];i++){if(_776 in v){v[_776].apply(v,_777);}}},normalizeHeaderNodeHeight:function(){var _778=[];for(var i=0,v;(v=this.views[i]);i++){if(v.headerContentNode.firstChild){_778.push(v.headerContentNode);}}this.normalizeRowNodeHeights(_778);},normalizeRowNodeHeights:function(_779){var h=0;var _77a=[];if(this.grid.rowHeight){h=this.grid.rowHeight;}else{if(_779.length<=1){return;}for(var i=0,n;(n=_779[i]);i++){if(!_771.contains(n,"dojoxGridNonNormalizedCell")){_77a[i]=n.firstChild.offsetHeight;h=Math.max(h,_77a[i]);}}h=(h>=0?h:0);if((has("mozilla")||has("ie")>8)&&h){h++;}}for(i=0;(n=_779[i]);i++){if(_77a[i]!=h){n.firstChild.style.height=h+"px";}}},resetHeaderNodeHeight:function(){for(var i=0,v,n;(v=this.views[i]);i++){n=v.headerContentNode.firstChild;if(n){n.style.height="";}}},renormalizeRow:function(_77b){var _77c=[];for(var i=0,v,n;(v=this.views[i])&&(n=v.getRowNode(_77b));i++){n.firstChild.style.height="";_77c.push(n);}this.normalizeRowNodeHeights(_77c);},getViewWidth:function(_77d){return this.views[_77d].getWidth()||this.defaultWidth;},measureHeader:function(){this.resetHeaderNodeHeight();this.forEach(function(_77e){_77e.headerContentNode.style.height="";});var h=0;this.forEach(function(_77f){h=Math.max(_77f.headerNode.offsetHeight,h);});return h;},measureContent:function(){var h=0;this.forEach(function(_780){h=Math.max(_780.domNode.offsetHeight,h);});return h;},findClient:function(_781){var c=this.grid.elasticView||-1;if(c<0){for(var i=1,v;(v=this.views[i]);i++){if(v.viewWidth){for(i=1;(v=this.views[i]);i++){if(!v.viewWidth){c=i;break;}}break;}}}if(c<0){c=Math.floor(this.views.length/2);}return c;},arrange:function(l,w){var i,v,vw,len=this.views.length,self=this;var c=(w<=0?len:this.findClient());var _782=function(v,l){var ds=v.domNode.style;var hs=v.headerNode.style;if(!self.grid.isLeftToRight()){ds.right=l+"px";if(has("ff")<4){hs.right=l+v.getScrollbarWidth()+"px";}else{hs.right=l+"px";}if(!has("webkit")){hs.width=parseInt(hs.width,10)-v.getScrollbarWidth()+"px";}}else{ds.left=l+"px";hs.left=l+"px";}ds.top=0+"px";hs.top=0;};for(i=0;(v=this.views[i])&&(i<c);i++){vw=this.getViewWidth(i);v.setSize(vw,0);_782(v,l);if(v.headerContentNode&&v.headerContentNode.firstChild){vw=v.getColumnsWidth()+v.getScrollbarWidth();}else{vw=v.domNode.offsetWidth;}l+=vw;}i++;var r=w;for(var j=len-1;(v=this.views[j])&&(i<=j);j--){vw=this.getViewWidth(j);v.setSize(vw,0);vw=v.domNode.offsetWidth;r-=vw;_782(v,r);}if(c<len){v=this.views[c];vw=Math.max(1,r-l);v.setSize(vw+"px",0);_782(v,l);}return l;},renderRow:function(_783,_784,_785){var _786=[];for(var i=0,v,n,_787;(v=this.views[i])&&(n=_784[i]);i++){_787=v.renderRow(_783);n.appendChild(_787);_786.push(_787);}if(!_785){this.normalizeRowNodeHeights(_786);}},rowRemoved:function(_788){this.onEach("rowRemoved",[_788]);},updateRow:function(_789,_78a){for(var i=0,v;v=this.views[i];i++){v.updateRow(_789);}if(!_78a){this.renormalizeRow(_789);}},updateRowStyles:function(_78b){this.onEach("updateRowStyles",[_78b]);},setScrollTop:function(_78c){var top=_78c;for(var i=0,v;v=this.views[i];i++){top=v.setScrollTop(_78c);if(has("ie")&&v.headerNode&&v.scrollboxNode){v.headerNode.scrollLeft=v.scrollboxNode.scrollLeft;}}return top;},getFirstScrollingView:function(){for(var i=0,v;(v=this.views[i]);i++){if(v.hasHScrollbar()||v.hasVScrollbar()){return v;}}return null;}});});},"esri/dijit/editing/tools/SelectionTools":function(){define(["dojo/_base/lang","dojo/has","esri/layers/FeatureLayer","esri/toolbars/draw","esri/kernel"],function(lang,has,_78d,Draw,_78e){var _78f={select:{id:"btnNewSelection",_enabledIcon:"toolbarIcon newSelectionIcon",_disabledIcon:"toolbarIcon newSelectionIcon",_drawType:Draw.EXTENT,_selectMethod:_78d.SELECTION_NEW,_label:"NLS_selectionNewLbl"},selectadd:{id:"btnAddToSelection",_enabledIcon:"toolbarIcon addToSelectionIcon",_disabledIcon:"toolbarIcon addToSelectionIcon",_drawType:Draw.EXTENT,_selectMethod:_78d.SELECTION_ADD,_label:"NLS_selectionAddLbl"},selectremove:{id:"btnSubtractFromSelection",_enabledIcon:"toolbarIcon removeFromSelectionIcon",_disabledIcon:"toolbarIcon removeFromSelectionIcon",_drawType:Draw.EXTENT,_selectMethod:_78d.SELECTION_SUBTRACT,_label:"NLS_selectionRemoveLbl"},selectClear:{id:"btnClearSelection",_enabledIcon:"toolbarIcon clearSelectionIcon",_disabledIcon:"toolbarIcon clearSelectionIcon",_enabled:false,_label:"NLS_selectionClearLbl"}};if(has("extend-esri")){lang.setObject("dijit.editing.tools.SelectionTools",_78f,_78e);}return _78f;});},"dijit/form/NumberTextBox":function(){define("dijit/form/NumberTextBox",["dojo/_base/declare","dojo/_base/lang","dojo/number","./RangeBoundTextBox"],function(_790,lang,_791,_792){var _793=_790("dijit.form.NumberTextBoxMixin",null,{pattern:_791.regexp,value:NaN,editOptions:{pattern:"#.######"},_formatter:_791.format,postMixInProperties:function(){this.inherited(arguments);this._set("type","text");},_setConstraintsAttr:function(_794){var _795=typeof _794.places=="number"?_794.places:0;if(_795){_795++;}if(typeof _794.max!="number"){_794.max=9*Math.pow(10,15-_795);}if(typeof _794.min!="number"){_794.min=-9*Math.pow(10,15-_795);}this.inherited(arguments,[_794]);if(this.focusNode&&this.focusNode.value&&!isNaN(this.value)){this.set("value",this.value);}},_onFocus:function(){if(this.disabled){return;}var val=this.get("value");if(typeof val=="number"&&!isNaN(val)){var _796=this.format(val,this.constraints);if(_796!==undefined){this.textbox.value=_796;}}this.inherited(arguments);},format:function(_797,_798){var _799=String(_797);if(typeof _797!="number"){return _799;}if(isNaN(_797)){return "";}if(!("rangeCheck" in this&&this.rangeCheck(_797,_798))&&_798.exponent!==false&&/\de[-+]?\d/i.test(_799)){return _799;}if(this.editOptions&&this.focused){_798=lang.mixin({},_798,this.editOptions);}return this._formatter(_797,_798);},_parser:_791.parse,parse:function(_79a,_79b){var v=this._parser(_79a,lang.mixin({},_79b,(this.editOptions&&this.focused)?this.editOptions:{}));if(this.editOptions&&this.focused&&isNaN(v)){v=this._parser(_79a,_79b);}return v;},_getDisplayedValueAttr:function(){var v=this.inherited(arguments);return isNaN(v)?this.textbox.value:v;},filter:function(_79c){return (_79c==null||_79c==="")?NaN:this.inherited(arguments);},serialize:function(_79d,_79e){return (typeof _79d!="number"||isNaN(_79d))?"":this.inherited(arguments);},_setBlurValue:function(){var val=lang.hitch(lang.mixin({},this,{focused:true}),"get")("value");this._setValueAttr(val,true);},_setValueAttr:function(_79f,_7a0,_7a1){if(_79f!==undefined&&_7a1===undefined){_7a1=String(_79f);if(typeof _79f=="number"){if(isNaN(_79f)){_7a1="";}else{if(("rangeCheck" in this&&this.rangeCheck(_79f,this.constraints))||this.constraints.exponent===false||!/\de[-+]?\d/i.test(_7a1)){_7a1=undefined;}}}else{if(!_79f){_7a1="";_79f=NaN;}else{_79f=undefined;}}}this.inherited(arguments,[_79f,_7a0,_7a1]);},_getValueAttr:function(){var v=this.inherited(arguments);if(isNaN(v)&&this.textbox.value!==""){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)&&(new RegExp("^"+_791._realNumberRegexp(lang.mixin({},this.constraints))+"$").test(this.textbox.value))){var n=Number(this.textbox.value);return isNaN(n)?undefined:n;}else{return undefined;}}else{return v;}},isValid:function(_7a2){if(!this.focused||this._isEmpty(this.textbox.value)){return this.inherited(arguments);}else{var v=this.get("value");if(!isNaN(v)&&this.rangeCheck(v,this.constraints)){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)){return true;}else{return this.inherited(arguments);}}else{return false;}}}});var _7a3=_790("dijit.form.NumberTextBox",[_792,_793],{baseClass:"dijitTextBox dijitNumberTextBox"});_7a3.Mixin=_793;return _7a3;});},"esri/tasks/BufferParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/Polygon","esri/geometry/jsonUtils"],function(_7a4,lang,_7a5,_7a6,has,_7a7,_7a8,_7a9){var _7aa=_7a4(null,{declaredClass:"esri.tasks.BufferParameters",geometries:null,outSpatialReference:null,bufferSpatialReference:null,distances:null,unit:null,unionResults:false,geodesic:false,toJson:function(){var json={unit:this.unit,unionResults:this.unionResults,geodesic:this.geodesic},dt=this.distances,_7ab=this.outSpatialReference,_7ac=this.bufferSpatialReference;var _7ad=_7a5.map(this.geometries,function(geom){geom=(geom.type==="extent")?this._extentToPolygon(geom):geom;return geom.toJson();},this);var _7ae=this.geometries;if(_7ae&&_7ae.length>0){var _7af=_7ae[0].type==="extent"?"esriGeometryPolygon":_7a9.getJsonType(_7ae[0]);json.geometries=_7a6.toJson({geometryType:_7af,geometries:_7ad});json.inSR=_7ae[0].spatialReference.wkid?_7ae[0].spatialReference.wkid:_7a6.toJson(_7ae[0].spatialReference.toJson());}if(dt){json.distances=dt.join(",");}if(_7ab){json.outSR=_7ab.wkid?_7ab.wkid:_7a6.toJson(_7ab.toJson());}if(_7ac){json.bufferSR=_7ac.wkid?_7ac.wkid:_7a6.toJson(_7ac.toJson());}return json;},_extentToPolygon:function(_7b0){var xmin=_7b0.xmin,ymin=_7b0.ymin,xmax=_7b0.xmax,ymax=_7b0.ymax;return new _7a8({"rings":[[[xmin,ymin],[xmin,ymax],[xmax,ymax],[xmax,ymin],[xmin,ymin]]],"spatialReference":_7b0.spatialReference.toJson()});}});if(has("extend-esri")){lang.setObject("tasks.BufferParameters",_7aa,_7a7);}return _7aa;});},"url:dijit/form/templates/Button.html":"<span class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" role=\"presentation\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\n\t\ttabIndex=\"-1\" role=\"presentation\" data-dojo-attach-point=\"valueNode\"\n/></span>\n","esri/toolbars/_GraphicMover":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/json","dojo/has","dojo/dom-style","dojox/gfx/Moveable","dojox/gfx/Mover","dojox/gfx/matrix","esri/kernel","esri/geometry/webMercatorUtils","esri/geometry/ScreenPoint"],function(_7b1,lang,_7b2,_7b3,has,_7b4,_7b5,_7b6,_7b7,_7b8,_7b9,_7ba){var GM=_7b1(null,{declaredClass:"esri.toolbars._GraphicMover",constructor:function(_7bb,map,_7bc){this.graphic=_7bb;this.map=map;this.toolbar=_7bc;this._enableGraphicMover();this._moved=false;},refresh:function(_7bd){var _7be=this.graphic.getDojoShape();if(_7be&&(_7bd||!_7be._hostGraphic)){this._disableGraphicMover();this._enableGraphicMover();}},destroy:function(){this._disableGraphicMover();},hasMoved:function(){return this._moved;},_enableGraphicMover:function(){var _7bf=this.graphic,_7c0=_7bf.getDojoShape();if(_7c0){_7c0._hostGraphic=_7bf;this._moveable=new _7b5(_7c0,{mover:GM.Mover});this._moveStartHandle=_7b2.connect(this._moveable,"onMoveStart",this,this._moveStartHandler);this._firstMoveHandle=_7b2.connect(this._moveable,"onFirstMove",this,this._firstMoveHandler);this._movingHandle=_7b2.connect(this._moveable,"onMoving",this,this._movingHandler);this._moveStopHandle=_7b2.connect(this._moveable,"onMoveStop",this,this._moveStopHandler);var node=_7c0.getEventSource();if(node){_7b4.set(node,"cursor",this.toolbar._cursors.move);}}},_disableGraphicMover:function(){var _7c1=this._moveable;if(_7c1){_7b2.disconnect(this._moveStartHandle);_7b2.disconnect(this._firstMoveHandle);_7b2.disconnect(this._movingHandle);_7b2.disconnect(this._moveStopHandle);var _7c2=_7c1.shape;if(_7c2){_7c2._hostGraphic=null;var node=_7c2.getEventSource();if(node){_7b4.set(node,"cursor",null);}}_7c1.destroy();}this._moveable=null;},_moveStartHandler:function(){var _7c3=this.graphic,map=this.map;this._startTx=_7c3.getDojoShape().getTransform();if(this.graphic.geometry.type==="point"){if(map.snappingManager){map.snappingManager._setUpSnapping();}}this.toolbar.onGraphicMoveStart(_7c3);},_firstMoveHandler:function(){this.toolbar._beginOperation("MOVE");this.toolbar.onGraphicFirstMove(this.graphic);},_movingHandler:function(_7c4){this.toolbar.onGraphicMove(this.graphic,_7c4.shape.getTransform());},_moveStopHandler:function(_7c5){var _7c6=this.graphic,_7c7=this.toolbar,map=this.map,mx=_7b7,_7c8=_7c7._geo?_7b9.geographicToWebMercator(_7c6.geometry):_7c6.geometry,type=_7c8.type,_7c9=_7c6.getDojoShape(),tx=_7c9.getTransform();if(_7b3.toJson(tx)!==_7b3.toJson(this._startTx)){this._moved=true;switch(type){case "point":var _7ca=[tx,mx.invert(this._startTx)],_7cb;if(map.snappingManager){_7cb=map.snappingManager._snappingPoint;}_7c8=_7cb||map.toMap(mx.multiplyPoint(_7ca,map.toScreen(_7c8,true)));if(map.snappingManager){map.snappingManager._killOffSnapping();}break;case "polyline":_7c8=this._updatePolyGeometry(_7c8,_7c8.paths,tx);break;case "polygon":_7c8=this._updatePolyGeometry(_7c8,_7c8.rings,tx);break;}_7c9.setTransform(null);_7c6.setGeometry(_7c7._geo?_7b9.webMercatorToGeographic(_7c8,true):_7c8);}else{this._moved=false;}_7c7._endOperation("MOVE");_7c7.onGraphicMoveStop(_7c6,tx);if(!this._moved){var e=_7c5.__e,_7cc=this.map.position,pt=new _7ba(e.pageX-_7cc.x,e.pageY-_7cc.y);_7c7.onGraphicClick(_7c6,{screenPoint:pt,mapPoint:this.map.toMap(pt)});}},_updatePolyGeometry:function(_7cd,_7ce,_7cf){var map=this.map,_7d0=_7cd.getPoint(0,0),_7d1=map.toMap(map.toScreen(_7d0).offset(_7cf.dx,_7cf.dy)),_7d2=_7d1.x-_7d0.x,_7d3=_7d1.y-_7d0.y,i,j,seg,_7d4;for(i=0;i<_7ce.length;i++){seg=_7ce[i];for(j=0;j<seg.length;j++){_7d4=_7cd.getPoint(i,j);_7cd.setPoint(i,j,_7d4.offset(_7d2,_7d3));}}return _7cd;}});GM.Mover=_7b1(_7b6,{declaredClass:"esri.toolbars._Mover",constructor:function(_7d5,e,host){this.__e=e;}});if(has("extend-esri")){lang.setObject("toolbars._GraphicMover",GM,_7b8);lang.setObject("toolbars._Mover",GM.Mover,_7b8);}return GM;});},"dojox/main":function(){define("dojox/main",["dojo/_base/kernel"],function(dojo){return dojo.dojox;});},"url:dijit/templates/MenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\n\t\t<div data-dojo-attach-point=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuExpand\"/>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</div>\n\t</td>\n</tr>\n","esri/dijit/editing/Util":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel"],function(lang,_7d6,has,_7d7){var util={};util={findFeatures:function(ids,_7d8,_7d9){var _7da=_7d8.objectIdField;var _7db=_7d8.graphics;var _7dc=_7d6.filter(_7db,function(_7dd){return _7d6.some(ids,function(id){return _7dd.attributes[_7da]===id.objectId;});});if(_7d9){_7d9(_7dc);}else{return _7dc;}},getSelection:function(_7de){var _7df=[];_7d6.forEach(_7de,function(_7e0){var _7e1=_7e0.getSelectedFeatures();_7d6.forEach(_7e1,function(_7e2){_7df.push(_7e2);});});return _7df;}};if(has("extend-esri")){lang.setObject("dijit.editing.Util.LayerHelper",util,_7d7);}return util;});},"esri/tasks/FeatureSet":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/lang","esri/graphic","esri/SpatialReference","esri/graphicsUtils","esri/geometry/jsonUtils","esri/symbols/jsonUtils"],function(_7e3,lang,_7e4,has,_7e5,_7e6,_7e7,_7e8,_7e9,_7ea,_7eb){var _7ec=_7e3(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(json){if(json){lang.mixin(this,json);var _7ed=this.features,sr=json.spatialReference,_7ee=_7ea.getGeometryType(json.geometryType);sr=(this.spatialReference=new _7e8(sr));this.geometryType=json.geometryType;if(json.fields){this.fields=json.fields;}_7e4.forEach(_7ed,function(_7ef,i){var _7f0=_7ef.geometry&&_7ef.geometry.spatialReference;_7ed[i]=new _7e7((_7ee&&_7ef.geometry)?new _7ee(_7ef.geometry):null,_7ef.symbol&&_7eb.fromJson(_7ef.symbol),_7ef.attributes);if(_7ed[i].geometry&&!_7f0){_7ed[i].geometry.setSpatialReference(sr);}});}else{this.features=[];}},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(_7f1){var json={};if(this.displayFieldName){json.displayFieldName=this.displayFieldName;}if(this.fields){json.fields=this.fields;}if(this.spatialReference){json.spatialReference=this.spatialReference.toJson();}else{if(this.features[0]&&this.features[0].geometry){json.spatialReference=this.features[0].geometry.spatialReference.toJson();}}if(this.features[0]){if(this.features[0].geometry){json.geometryType=_7ea.getJsonType(this.features[0].geometry);}json.features=_7e9._encodeGraphics(this.features,_7f1);}json.exceededTransferLimit=this.exceededTransferLimit;return _7e6.fixJson(json);}});if(has("extend-esri")){lang.setObject("tasks.FeatureSet",_7ec,_7e5);}return _7ec;});},"esri/tasks/LengthsParameters":function(){define("esri/tasks/LengthsParameters",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel"],function(_7f2,lang,_7f3,_7f4,has,_7f5){var _7f6=_7f2(null,{declaredClass:"esri.tasks.LengthsParameters",polylines:null,lengthUnit:null,geodesic:null,calculationType:null,toJson:function(){var _7f7=_7f3.map(this.polylines,function(geom){return geom.toJson();});var json={};json.polylines=_7f4.toJson(_7f7);var _7f8=this.polylines[0].spatialReference;json.sr=_7f8.wkid?_7f8.wkid:_7f4.toJson(_7f8.toJson());if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.geodesic){json.geodesic=this.geodesic;}if(this.calculationType){json.calculationType=this.calculationType;}return json;}});if(has("extend-esri")){lang.setObject("tasks.LengthsParameters",_7f6,_7f5);}return _7f6;});},"esri/dijit/editing/TemplatePickerItem":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","dojo/sniff","dojo/dom-style","dijit/_Widget","dijit/_Templated","dojox/gfx","esri/symbols/jsonUtils","esri/kernel"],function(_7f9,lang,_7fa,has,_7fb,_7fc,_7fd,_7fe,gfx,_7ff,_800){var TPI=_7f9([_7fd,_7fe],{declaredClass:"esri.dijit.editing.TemplatePickerItem",templateString:"<div class='item' style='text-align: center;'>"+"<div class='itemSymbol' dojoAttachPoint='_surfaceNode'></div>"+"<div class='itemLabel'>${label}</div>"+"</div>",startup:function(){if(this._started){return;}this.inherited(arguments);this._surface=this._draw(this._surfaceNode,this.symbol,this.surfaceWidth,this.surfaceHeight,this.template);},_draw:function(node,_801,_802,_803,_804){if(!_801){return;}var _805=gfx.createSurface(node,_802,_803);if(has("ie")<9){var _806=_805.getEventSource();_7fc.set(_806,"position","relative");_7fc.set(_806.parentNode,"position","relative");}var _807=(!this.legendOverride&&this._getDrawingToolShape(_801,_804))||_7ff.getShapeDescriptors(_801);var _808;try{_808=_805.createShape(_807.defaultShape).setFill(_807.fill).setStroke(_807.stroke);}catch(e){_805.clear();_805.destroy();return;}var bbox=_808.getBoundingBox(),_809=bbox.width,_80a=bbox.height,_80b=-(bbox.x+(_809/2)),_80c=-(bbox.y+(_80a/2)),dim=_805.getDimensions(),_80d={dx:_80b+dim.width/2,dy:_80c+dim.height/2};if(_809>_802||_80a>_803){var _80e=_809>_80a?_809:_80a;var _80f=_802<_803?_802:_803;var _810=(_80f-5)/_80e;lang.mixin(_80d,{xx:_810,yy:_810});}_808.applyTransform(_80d);return _805;},_getDrawingToolShape:function(_811,_812){var _813,_814=_812?_812.drawingTool||null:null;switch(_814){case "esriFeatureEditToolArrow":_813={type:"path",path:"M 10,1 L 3,8 L 3,5 L -15,5 L -15,-2 L 3,-2 L 3,-5 L 10,1 E"};break;case "esriFeatureEditToolLeftArrow":_813={type:"path",path:"M -15,1 L -8,8 L -8,5 L 10,5 L 10,-2 L -8,-2 L -8,-5 L -15,1 E"};break;case "esriFeatureEditToolRightArrow":_813={type:"path",path:"M 10,1 L 3,8 L 3,5 L -15,5 L -15,-2 L 3,-2 L 3,-5 L 10,1 E"};break;case "esriFeatureEditToolUpArrow":_813={type:"path",path:"M 1,-10 L 8,-3 L 5,-3 L 5,15 L -2,15 L -2,-3 L -5,-3 L 1,-10 E"};break;case "esriFeatureEditToolDownArrow":_813={type:"path",path:"M 1,15 L 8,8 L 5,8 L 5,-10 L -2,-10 L -2,8 L -5,8 L 1,15 E"};break;case "esriFeatureEditToolTriangle":_813={type:"path",path:"M -10,14 L 2,-10 L 14,14 L -10,14 E"};break;case "esriFeatureEditToolRectangle":_813={type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 E"};break;case "esriFeatureEditToolCircle":_813={type:"circle",cx:0,cy:0,r:10};break;case "esriFeatureEditToolEllipse":_813={type:"ellipse",cx:0,cy:0,rx:10,ry:5};break;case "esriFeatureEditToolFreehand":if(_811.type==="simplelinesymbol"||_811.type==="cartographiclinesymbol"){_813={type:"path",path:"m -11, -7c-1.5,-3.75 7.25,-9.25 12.5,-7c5.25,2.25 6.75,9.75 3.75,12.75c-3,3 -3.25,2.5 -9.75,5.25c-6.5,2.75 -7.25,14.25 2,15.25c9.25,1 11.75,-4 13.25,-6.75c1.5,-2.75 3.5,-11.75 12,-6.5"};}else{_813={type:"path",path:"M 10,-13 c3.1,0.16667 4.42564,2.09743 2.76923,3.69231c-2.61025,2.87179 -5.61025,5.6718 -6.14358,6.20513c-0.66667,0.93333 -0.46667,1.2 -0.53333,1.93333c-0.00001,0.86666 0.6,1.66667 1.13334,2c1.03077,0.38462 2.8,0.93333 3.38974,1.70769c0.47693,0.42564 0.87693,0.75897 1.41026,1.75897c0.13333,1.06667 -0.46667,2.86667 -1.8,3.8c-0.73333,0.73333 -3.86667,2.66666 -4.86667,3.13333c-0.93333,0.8 -7.4,3.2 -7.6,3.06667c-1.06667,0.46667 -4.73333,1.13334 -5.2,1.26667c-1.6,0.33334 -4.6,0.4 -6.25128,0.05128c-1.41539,-0.18462 -2.34872,-2.31796 -1.41539,-4.45129c0.93333,-1.73333 1.86667,-3.13333 2.64615,-3.85641c1.28718,-1.47692 2.57437,-2.68204 3.88718,-3.54359c0.88718,-1.13845 1.8,-1.33333 2.26666,-2.45641c0.33334,-0.74359 0.37949,-1.7641 0.06667,-2.87692c-0.66666,-1.46666 -1.66666,-1.86666 -2.98975,-2.2c-1.27692,-0.26666 -2.12307,-0.64102 -3.27692,-1.46666c-0.66667,-1.00001 -1.01538,-3.01539 0.73333,-4.06667c1.73333,-1.2 3.6,-1.93333 4.93333,-2.2c1.33333,-0.46667 4.84104,-1.09743 5.84103,-1.23076c1.60001,-0.46667 6.02564,-0.50257 7.29231,-0.56924z"};}break;default:return null;}return {defaultShape:_813,fill:_811.getFill(),stroke:_811.getStroke()};},_repaint:function(_815){if(!_815){this._surface=this._draw(this._surfaceNode,this.symbol,this.surfaceWidth,this.surfaceHeight,this.template);return;}if(_815.getStroke&&_815.setStroke){_815.setStroke(_815.getStroke());}if(_815.getFill&&_815.setFill){_815.setFill(_815.getFill());}if(_815.children&&lang.isArray(_815.children)){_7fa.forEach(_815.children,this._repaint,this);}},destroy:function(){if(this._surface){this._surface.destroy();delete this._surface;}this.inherited(arguments);}});if(has("extend-esri")){lang.setObject("dijit.editing.TemplatePickerItem",TPI,_800);}return TPI;});},"esri/dijit/editing/Add":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/OperationBase"],function(_816,lang,has,_817,_818){var Add=_816(_818,{declaredClass:"esri.dijit.editing.Add",type:"edit",label:"Add Features",constructor:function(_819){_819=_819||{};if(!_819.featureLayer){console.error("In constructor of 'esri.dijit.editing.Add', featureLayer is not provided");return;}this._featureLayer=_819.featureLayer;if(!_819.addedGraphics){console.error("In constructor of 'esri.dijit.editing.Add', no graphics provided");return;}this._addedGraphics=_819.addedGraphics;},performUndo:function(){this._featureLayer.applyEdits(null,null,this._addedGraphics);},performRedo:function(){this._featureLayer.applyEdits(this._addedGraphics,null,null);}});if(has("extend-esri")){lang.setObject("dijit.editing.Add",Add,_817);}return Add;});},"dijit/Tooltip":function(){require({cache:{"url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\n></div>\n"}});define("dijit/Tooltip",["dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","./_base/manager","./place","./_Widget","./_TemplatedMixin","./BackgroundIframe","dojo/text!./templates/Tooltip.html","./main"],function(_81a,_81b,fx,dom,_81c,_81d,_81e,lang,_81f,on,has,_820,_821,_822,_823,_824,_825,_826){var _827=_81b("dijit._MasterTooltip",[_822,_823],{duration:_820.defaultDuration,templateString:_825,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new _824(this.domNode);this.fadeIn=fx.fadeIn({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onShow")});this.fadeOut=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onHide")});},show:function(_828,_829,_82a,rtl,_82b){if(this.aroundNode&&this.aroundNode===_829&&this.containerNode.innerHTML==_828){return;}if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_828;if(_82b){this.set("textDir",_82b);}this.containerNode.align=rtl?"right":"left";var pos=_821.around(this.domNode,_829,_82a&&_82a.length?_82a:_82c.defaultPosition,!rtl,lang.hitch(this,"orient"));var _82d=pos.aroundNodePos;if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){this.connectorNode.style.top=_82d.y+((_82d.h-this.connectorNode.offsetHeight)>>1)-pos.y+"px";this.connectorNode.style.left="";}else{if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M"){this.connectorNode.style.left=_82d.x+((_82d.w-this.connectorNode.offsetWidth)>>1)-pos.x+"px";}else{this.connectorNode.style.left="";this.connectorNode.style.top="";}}_81e.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_829;},orient:function(node,_82e,_82f,_830,_831){this.connectorNode.style.top="";var _832=_830.h,_833=_830.w;node.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_82e+"-"+_82f];this.domNode.style.width="auto";var size=_81d.position(this.domNode);if(has("ie")==9){size.w+=2;}var _834=Math.min((Math.max(_833,1)),size.w);_81d.setMarginBox(this.domNode,{w:_834});if(_82f.charAt(0)=="B"&&_82e.charAt(0)=="B"){var bb=_81d.position(node);var _835=this.connectorNode.offsetHeight;if(bb.h>_832){var _836=_832-((_831.h+_835)>>1);this.connectorNode.style.top=_836+"px";this.connectorNode.style.bottom="";}else{this.connectorNode.style.bottom=Math.min(Math.max(_831.h/2-_835/2,0),bb.h-_835)+"px";this.connectorNode.style.top="";}}else{this.connectorNode.style.top="";this.connectorNode.style.bottom="";}return Math.max(0,size.w-_833);},_onShow:function(){if(has("ie")){this.domNode.style.filter="";}},hide:function(_837){if(this._onDeck&&this._onDeck[1]==_837){this._onDeck=null;}else{if(this.aroundNode===_837){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}else{}}},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}},_setAutoTextDir:function(node){this.applyTextDir(node,has("ie")?node.outerText:node.textContent);_81a.forEach(node.children,function(_838){this._setAutoTextDir(_838);},this);},_setTextDirAttr:function(_839){this._set("textDir",_839);if(_839=="auto"){this._setAutoTextDir(this.containerNode);}else{this.containerNode.dir=this.textDir;}}});_826.showTooltip=function(_83a,_83b,_83c,rtl,_83d){if(_83c){_83c=_81a.map(_83c,function(val){return {after:"after-centered",before:"before-centered"}[val]||val;});}if(!_82c._masterTT){_826._masterTT=_82c._masterTT=new _827();}return _82c._masterTT.show(_83a,_83b,_83c,rtl,_83d);};_826.hideTooltip=function(_83e){return _82c._masterTT&&_82c._masterTT.hide(_83e);};var _82c=_81b("dijit.Tooltip",_822,{label:"",showDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(_83f){_81a.forEach(this._connections||[],function(_840){_81a.forEach(_840,function(_841){_841.remove();});},this);this._connectIds=_81a.filter(lang.isArrayLike(_83f)?_83f:(_83f?[_83f]:[]),function(id){return dom.byId(id,this.ownerDocument);},this);this._connections=_81a.map(this._connectIds,function(id){var node=dom.byId(id,this.ownerDocument),_842=this.selector,_843=_842?function(_844){return on.selector(_842,_844);}:function(_845){return _845;},self=this;return [on(node,_843(_81f.enter),function(){self._onHover(this);}),on(node,_843("focusin"),function(){self._onHover(this);}),on(node,_843(_81f.leave),lang.hitch(self,"_onUnHover")),on(node,_843("focusout"),lang.hitch(self,"_onUnHover"))];},this);this._set("connectId",_83f);},addTarget:function(node){var id=node.id||node;if(_81a.indexOf(this._connectIds,id)==-1){this.set("connectId",this._connectIds.concat(id));}},removeTarget:function(node){var id=node.id||node,idx=_81a.indexOf(this._connectIds,id);if(idx>=0){this._connectIds.splice(idx,1);this.set("connectId",this._connectIds);}},buildRendering:function(){this.inherited(arguments);_81c.add(this.domNode,"dijitTooltipData");},startup:function(){this.inherited(arguments);var ids=this.connectId;_81a.forEach(lang.isArrayLike(ids)?ids:[ids],this.addTarget,this);},getContent:function(node){return this.label||this.domNode.innerHTML;},_onHover:function(_846){if(!this._showTimer){this._showTimer=this.defer(function(){this.open(_846);},this.showDelay);}},_onUnHover:function(){if(this._showTimer){this._showTimer.remove();delete this._showTimer;}this.close();},open:function(_847){if(this._showTimer){this._showTimer.remove();delete this._showTimer;}var _848=this.getContent(_847);if(!_848){return;}_82c.show(_848,_847,this.position,!this.isLeftToRight(),this.textDir);this._connectNode=_847;this.onShow(_847,this.position);},close:function(){if(this._connectNode){_82c.hide(this._connectNode);delete this._connectNode;this.onHide();}if(this._showTimer){this._showTimer.remove();delete this._showTimer;}},onShow:function(){},onHide:function(){},destroy:function(){this.close();_81a.forEach(this._connections||[],function(_849){_81a.forEach(_849,function(_84a){_84a.remove();});},this);this.inherited(arguments);}});_82c._MasterTooltip=_827;_82c.show=_826.showTooltip;_82c.hide=_826.hideTooltip;_82c.defaultPosition=["after-centered","before-centered"];return _82c;});},"dijit/form/DropDownButton":function(){require({cache:{"url:dijit/form/templates/DropDownButton.html":"<span class=\"dijit dijitReset dijitInline\"\n\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" data-dojo-attach-point=\"_buttonNode\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\trole=\"button\" aria-haspopup=\"true\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\n\t\t\t\tdata-dojo-attach-point=\"iconNode\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode,_popupStateNode\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-point=\"valueNode\" role=\"presentation\"\n/></span>\n"}});define("dijit/form/DropDownButton",["dojo/_base/declare","dojo/_base/lang","dojo/query","../registry","../popup","./Button","../_Container","../_HasDropDown","dojo/text!./templates/DropDownButton.html"],function(_84b,lang,_84c,_84d,_84e,_84f,_850,_851,_852){return _84b("dijit.form.DropDownButton",[_84f,_850,_851],{baseClass:"dijitDropDownButton",templateString:_852,_fillContent:function(){if(this.srcNodeRef){var _853=_84c("*",this.srcNodeRef);this.inherited(arguments,[_853[0]]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}if(!this.dropDown&&this.dropDownContainer){var _854=_84c("[widgetId]",this.dropDownContainer)[0];this.dropDown=_84d.byNode(_854);delete this.dropDownContainer;}if(this.dropDown){_84e.hide(this.dropDown);}this.inherited(arguments);},isLoaded:function(){var _855=this.dropDown;return (!!_855&&(!_855.href||_855.isLoaded));},loadDropDown:function(_856){var _857=this.dropDown;var _858=_857.on("load",lang.hitch(this,function(){_858.remove();_856();}));_857.refresh();},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown;}});});},"dijit/form/_FormValueMixin":function(){define("dijit/form/_FormValueMixin",["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/sniff","./_FormWidgetMixin"],function(_859,_85a,keys,has,_85b){return _859("dijit.form._FormValueMixin",_85b,{readOnly:false,_setReadOnlyAttr:function(_85c){_85a.set(this.focusNode,"readOnly",_85c);this._set("readOnly",_85c);},postCreate:function(){this.inherited(arguments);if(has("ie")){this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);}if(this._resetValue===undefined){this._lastValueReported=this._resetValue=this.value;}},_setValueAttr:function(_85d,_85e){this._handleOnChange(_85d,_85e);},_handleOnChange:function(_85f,_860){this._set("value",_85f);this.inherited(arguments);},undo:function(){this._setValueAttr(this._lastValueReported,false);},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);},_onKeyDown:function(e){if(e.keyCode==keys.ESCAPE&&!(e.ctrlKey||e.altKey||e.metaKey)){if(has("ie")<9||(has("ie")&&has("quirks"))){e.preventDefault();var node=e.srcElement,te=node.ownerDocument.createEventObject();te.keyCode=keys.ESCAPE;te.shiftKey=e.shiftKey;node.fireEvent("onkeypress",te);}}}});});},"dojox/date/islamic/locale":function(){define("dojox/date/islamic/locale",["../..","dojo/_base/lang","dojo/_base/array","dojo/date","dojo/i18n","dojo/regexp","dojo/string","./Date","dojo/i18n!dojo/cldr/nls/islamic"],function(_861,lang,arr,dd,i18n,_862,_863,_864,_865){var _866=lang.getObject("date.islamic.locale",true,_861);function _867(_868,_869,_86a,_86b,_86c){return _86c.replace(/([a-z])\1*/ig,function(_86d){var s,pad;var c=_86d.charAt(0);var l=_86d.length;var _86e=["abbr","wide","narrow"];switch(c){case "G":s=_869["eraAbbr"][0];break;case "y":s=String(_868.getFullYear());break;case "M":var m=_868.getMonth();if(l<3){s=m+1;pad=true;}else{var _86f=["months","format",_86e[l-3]].join("-");s=_869[_86f][m];}break;case "d":s=_868.getDate(true);pad=true;break;case "E":var d=_868.getDay();if(l<3){s=d+1;pad=true;}else{var _870=["days","format",_86e[l-3]].join("-");s=_869[_870][d];}break;case "a":var _871=(_868.getHours()<12)?"am":"pm";s=_869["dayPeriods-format-wide-"+_871];break;case "h":case "H":case "K":case "k":var h=_868.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_868.getMinutes();pad=true;break;case "s":s=_868.getSeconds();pad=true;break;case "S":s=Math.round(_868.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "z":s=dd.getTimezoneName(_868.toGregorian());if(s){break;}l=4;case "Z":var _872=_868.toGregorian().getTimezoneOffset();var tz=[(_872<=0?"+":"-"),_863.pad(Math.floor(Math.abs(_872)/60),2),_863.pad(Math.abs(_872)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojox.date.islamic.locale.formatPattern: invalid pattern char: "+_86c);}if(pad){s=_863.pad(s,l);}return s;});};_866.format=function(_873,_874){_874=_874||{};var _875=i18n.normalizeLocale(_874.locale);var _876=_874.formatLength||"short";var _877=_866._getIslamicBundle(_875);var str=[];var _878=lang.hitch(this,_867,_873,_877,_875,_874.fullYear);if(_874.selector=="year"){var year=_873.getFullYear();return year;}if(_874.selector!="time"){var _879=_874.datePattern||_877["dateFormat-"+_876];if(_879){str.push(_87a(_879,_878));}}if(_874.selector!="date"){var _87b=_874.timePattern||_877["timeFormat-"+_876];if(_87b){str.push(_87a(_87b,_878));}}var _87c=str.join(" ");return _87c;};_866.regexp=function(_87d){return _866._parseInfo(_87d).regexp;};_866._parseInfo=function(_87e){_87e=_87e||{};var _87f=i18n.normalizeLocale(_87e.locale);var _880=_866._getIslamicBundle(_87f);var _881=_87e.formatLength||"short";var _882=_87e.datePattern||_880["dateFormat-"+_881];var _883=_87e.timePattern||_880["timeFormat-"+_881];var _884;if(_87e.selector=="date"){_884=_882;}else{if(_87e.selector=="time"){_884=_883;}else{_884=(typeof (_883)=="undefined")?_882:_882+" "+_883;}}var _885=[];var re=_87a(_884,lang.hitch(this,_886,_885,_880,_87e));return {regexp:re,tokens:_885,bundle:_880};};_866.parse=function(_887,_888){_887=_887.replace(/[\u200E\u200F\u202A\u202E]/g,"");if(!_888){_888={};}var info=_866._parseInfo(_888);var _889=info.tokens,_865=info.bundle;var _88a=info.regexp.replace(/[\u200E\u200F\u202A\u202E]/g,"");var re=new RegExp("^"+_88a+"$");var _88b=re.exec(_887);var _88c=i18n.normalizeLocale(_888.locale);if(!_88b){return null;}var date,_88d;var _88e=[1389,0,1,0,0,0,0];var amPm="";var _88f=0;var _890=["abbr","wide","narrow"];var _891=arr.every(_88b,function(v,i){if(!i){return true;}var _892=_889[i-1];var l=_892.length;switch(_892.charAt(0)){case "y":_88e[0]=Number(v);break;case "M":if(l>2){var _893=_865["months-format-"+_890[l-3]].concat();if(!_888.strict){v=v.replace(".","").toLowerCase();_893=arr.map(_893,function(s){return s?s.replace(".","").toLowerCase():s;});}v=arr.indexOf(_893,v);if(v==-1){return false;}_88f=l;}else{v--;}_88e[1]=Number(v);break;case "D":_88e[1]=0;case "d":_88e[2]=Number(v);break;case "a":var am=_888.am||_865["dayPeriods-format-wide-am"],pm=_888.pm||_865["dayPeriods-format-wide-pm"];if(!_888.strict){var _894=/\./g;v=v.replace(_894,"").toLowerCase();am=am.replace(_894,"").toLowerCase();pm=pm.replace(_894,"").toLowerCase();}if(_888.strict&&v!=am&&v!=pm){return false;}amPm=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":_88e[3]=Number(v);break;case "m":_88e[4]=Number(v);break;case "s":_88e[5]=Number(v);break;case "S":_88e[6]=Number(v);}return true;});var _895=+_88e[3];if(amPm==="p"&&_895<12){_88e[3]=_895+12;}else{if(amPm==="a"&&_895==12){_88e[3]=0;}}var _896=new _864(_88e[0],_88e[1],_88e[2],_88e[3],_88e[4],_88e[5],_88e[6]);return _896;};function _87a(_897,_898,_899,_89a){var _89b=function(x){return x;};_898=_898||_89b;_899=_899||_89b;_89a=_89a||_89b;var _89c=_897.match(/(''|[^'])+/g);var _89d=_897.charAt(0)=="'";arr.forEach(_89c,function(_89e,i){if(!_89e){_89c[i]="";}else{_89c[i]=(_89d?_899:_898)(_89e);_89d=!_89d;}});return _89a(_89c.join(""));};function _886(_89f,_8a0,_8a1,_8a2){_8a2=_862.escapeString(_8a2);var _8a3=i18n.normalizeLocale(_8a1.locale);return _8a2.replace(/([a-z])\1*/ig,function(_8a4){var s;var c=_8a4.charAt(0);var l=_8a4.length;var p2="",p3="";if(_8a1.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d+";break;case "M":s=(l>2)?"\\S+ ?\\S+":p2+"[1-9]|1[0-2]";break;case "d":s="[12]\\d|"+p2+"[1-9]|3[01]";break;case "E":s="\\S+";break;case "h":s=p2+"[1-9]|1[0-2]";break;case "k":s=p2+"\\d|1[01]";break;case "H":s=p2+"\\d|1\\d|2[0-3]";break;case "K":s=p2+"[1-9]|1\\d|2[0-4]";break;case "m":case "s":s=p2+"\\d|[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_8a1.am||_8a0["dayPeriods-format-wide-am"],pm=_8a1.pm||_8a0["dayPeriods-format-wide-pm"];if(_8a1.strict){s=am+"|"+pm;}else{s=am+"|"+pm;if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}}break;default:s=".*";}if(_89f){_89f.push(_8a4);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};var _8a5=[];_866.addCustomFormats=function(_8a6,_8a7){_8a5.push({pkg:_8a6,name:_8a7});};_866._getIslamicBundle=function(_8a8){var _8a9={};arr.forEach(_8a5,function(desc){var _8aa=i18n.getLocalization(desc.pkg,desc.name,_8a8);_8a9=lang.mixin(_8a9,_8aa);},this);return _8a9;};_866.addCustomFormats("dojo.cldr","islamic");_866.getNames=function(item,type,_8ab,_8ac,date){var _8ad;var _8ae=_866._getIslamicBundle(_8ac);var _8af=[item,_8ab,type];if(_8ab=="standAlone"){var key=_8af.join("-");_8ad=_8ae[key];if(_8ad[0]==1){_8ad=undefined;}}_8af[1]="format";return (_8ad||_8ae[_8af.join("-")]).concat();};_866.weekDays=_866.getNames("days","wide","format");_866.months=_866.getNames("months","wide","format");return _866;});},"dijit/form/_FormWidgetMixin":function(){define("dijit/form/_FormWidgetMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/sniff","dojo/window","../a11y"],function(_8b0,_8b1,_8b2,_8b3,lang,_8b4,has,_8b5,a11y){return _8b1("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:false,intermediateChanges:false,scrollOnFocus:true,_setIdAttr:"focusNode",_setDisabledAttr:function(_8b6){this._set("disabled",_8b6);_8b2.set(this.focusNode,"disabled",_8b6);if(this.valueNode){_8b2.set(this.valueNode,"disabled",_8b6);}this.focusNode.setAttribute("aria-disabled",_8b6?"true":"false");if(_8b6){this._set("hovering",false);this._set("active",false);var _8b7="tabIndex" in this.attributeMap?this.attributeMap.tabIndex:("_setTabIndexAttr" in this)?this._setTabIndexAttr:"focusNode";_8b0.forEach(lang.isArray(_8b7)?_8b7:[_8b7],function(_8b8){var node=this[_8b8];if(has("webkit")||a11y.hasDefaultTabStop(node)){node.setAttribute("tabIndex","-1");}else{node.removeAttribute("tabIndex");}},this);}else{if(this.tabIndex!=""){this.set("tabIndex",this.tabIndex);}}},_onFocus:function(by){if(by=="mouse"&&this.isFocusable()){var _8b9=this.connect(this.focusNode,"onfocus",function(){this.disconnect(_8ba);this.disconnect(_8b9);});var _8ba=this.connect(this.ownerDocumentBody,"onmouseup",function(){this.disconnect(_8ba);this.disconnect(_8b9);if(this.focused){this.focus();}});}if(this.scrollOnFocus){this.defer(function(){_8b5.scrollIntoView(this.domNode);});}this.inherited(arguments);},isFocusable:function(){return !this.disabled&&this.focusNode&&(_8b3.get(this.domNode,"display")!="none");},focus:function(){if(!this.disabled&&this.focusNode.focus){try{this.focusNode.focus();}catch(e){}}},compare:function(val1,val2){if(typeof val1=="number"&&typeof val2=="number"){return (isNaN(val1)&&isNaN(val2))?0:val1-val2;}else{if(val1>val2){return 1;}else{if(val1<val2){return -1;}else{return 0;}}}},onChange:function(){},_onChangeActive:false,_handleOnChange:function(_8bb,_8bc){if(this._lastValueReported==undefined&&(_8bc===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_8bb;}this._pendingOnChange=this._pendingOnChange||(typeof _8bb!=typeof this._lastValueReported)||(this.compare(_8bb,this._lastValueReported)!=0);if((this.intermediateChanges||_8bc||_8bc===undefined)&&this._pendingOnChange){this._lastValueReported=_8bb;this._pendingOnChange=false;if(this._onChangeActive){if(this._onChangeHandle){this._onChangeHandle.remove();}this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(_8bb);});}}},create:function(){this.inherited(arguments);this._onChangeActive=true;},destroy:function(){if(this._onChangeHandle){this._onChangeHandle.remove();this.onChange(this._lastValueReported);}this.inherited(arguments);}});});},"dijit/a11yclick":function(){define("dijit/a11yclick",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","dojo/_base/unload","dojo/_base/window"],function(on,_8bd,keys,_8be,has,_8bf,win){var _8c0=null;if(has("dom-addeventlistener")){win.doc.addEventListener("keydown",function(evt){_8c0=evt.target;},true);}else{(function(){var _8c1=function(evt){_8c0=evt.srcElement;};win.doc.attachEvent("onkeydown",_8c1);_8bf.addOnWindowUnload(function(){win.doc.detachEvent("onkeydown",_8c1);});})();}function _8c2(e){return (e.keyCode===keys.ENTER||e.keyCode===keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey;};return function(node,_8c3){if(/input|button/i.test(node.nodeName)){return on(node,"click",_8c3);}else{var _8c4=[on(node,"keydown",function(e){if(_8c2(e)){_8c0=e.target;e.preventDefault();}}),on(node,"keyup",function(e){if(_8c2(e)&&e.target==_8c0){_8c0=null;on.emit(e.target,"click",{cancelable:true,bubbles:true});}}),on(node,"click",function(e){_8c3.call(this,e);})];if(has("touch")){var _8c5;_8c4.push(on(node,"touchend",function(e){var _8c6=e.target;_8c5=setTimeout(function(){_8c5=null;on.emit(_8c6,"click",{cancelable:true,bubbles:true});},600);}),on(node,"click",function(e){if(_8c5){clearTimeout(_8c5);}}));}return {remove:function(){_8bd.forEach(_8c4,function(h){h.remove();});if(_8c5){clearTimeout(_8c5);_8c5=null;}}};}};return ret;});},"url:dijit/templates/ProgressBar.html":"<div class=\"dijitProgressBar dijitProgressBarEmpty\" role=\"progressbar\"\n\t><div  data-dojo-attach-point=\"internalProgress\" class=\"dijitProgressBarFull\"\n\t\t><div class=\"dijitProgressBarTile\" role=\"presentation\"></div\n\t\t><span style=\"visibility:hidden\">&#160;</span\n\t></div\n\t><div data-dojo-attach-point=\"labelNode\" class=\"dijitProgressBarLabel\" id=\"${id}_label\"></div\n\t><img data-dojo-attach-point=\"indeterminateHighContrastImage\" class=\"dijitProgressBarIndeterminateHighContrastImage\" alt=\"\"\n/></div>\n","esri/toolbars/draw":function(){define("esri/toolbars/draw",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/Color","dojo/_base/window","dojo/has","dojo/keys","dojo/dom-construct","dojo/dom-style","esri/kernel","esri/sniff","esri/toolbars/_toolbar","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/graphic","esri/geometry/jsonUtils","esri/geometry/webMercatorUtils","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Multipoint","esri/geometry/Rect","dojo/i18n!esri/nls/jsapi"],function(_8c7,lang,_8c8,_8c9,_8ca,win,has,keys,_8cb,_8cc,_8cd,_8ce,_8cf,_8d0,_8d1,_8d2,_8d3,_8d4,_8d5,_8d6,_8d7,_8d8,Rect,_8d9){var DRAW=_8c7(_8cf,{declaredClass:"esri.toolbars.Draw",constructor:function(map,_8da){this.markerSymbol=new _8d0(_8d0.STYLE_SOLID,10,new _8d1(_8d1.STYLE_SOLID,new _8ca([255,0,0]),2),new _8ca([0,0,0,0.25]));this.lineSymbol=new _8d1(_8d1.STYLE_SOLID,new _8ca([255,0,0]),2);this.fillSymbol=new _8d2(_8d2.STYLE_SOLID,new _8d1(_8d1.STYLE_SOLID,new _8ca([255,0,0]),2),new _8ca([0,0,0,0.25]));this._points=[];this._defaultOptions={showTooltips:true,drawTime:75,tolerance:8,tooltipOffset:15};this._options=lang.mixin(lang.mixin({},this._defaultOptions),_8da||{});this._mouse=!has("esri-touch")&&!has("esri-pointer");if(!this._mouse){this._options.showTooltips=false;}this._onKeyDownHandler=lang.hitch(this,this._onKeyDownHandler);this._onMouseDownHandler=lang.hitch(this,this._onMouseDownHandler);this._onMouseUpHandler=lang.hitch(this,this._onMouseUpHandler);this._onClickHandler=lang.hitch(this,this._onClickHandler);this._onMouseMoveHandler=lang.hitch(this,this._onMouseMoveHandler);this._onMouseDragHandler=lang.hitch(this,this._onMouseDragHandler);this._onDblClickHandler=lang.hitch(this,this._onDblClickHandler);this._updateTooltip=lang.hitch(this,this._updateTooltip);this._hideTooltip=lang.hitch(this,this._hideTooltip);this._redrawGraphic=lang.hitch(this,this._redrawGraphic);},_geometryType:null,respectDrawingVertexOrder:false,setRespectDrawingVertexOrder:function(set){this.respectDrawingVertexOrder=set;},setMarkerSymbol:function(_8db){this.markerSymbol=_8db;},setLineSymbol:function(_8dc){this.lineSymbol=_8dc;},setFillSymbol:function(_8dd){this.fillSymbol=_8dd;},activate:function(_8de,_8df){if(this._geometryType){this.deactivate();}var map=this.map,dc=_8c9.connect,Draw=DRAW;this._options=lang.mixin(lang.mixin({},this._options),_8df||{});map.navigationManager.setImmediateClick(false);switch(_8de){case Draw.ARROW:case Draw.LEFT_ARROW:case Draw.RIGHT_ARROW:case Draw.UP_ARROW:case Draw.DOWN_ARROW:case Draw.TRIANGLE:case Draw.CIRCLE:case Draw.ELLIPSE:case Draw.RECTANGLE:this._deactivateMapTools(true,false,false,true);this._onClickHandler_connect=dc(map,"onClick",this._onClickHandler);this._onMouseDownHandler_connect=dc(map,!this._mouse?"onSwipeStart":"onMouseDown",this._onMouseDownHandler);this._onMouseDragHandler_connect=dc(map,!this._mouse?"onSwipeMove":"onMouseDrag",this._onMouseDragHandler);this._onMouseUpHandler_connect=dc(map,!this._mouse?"onSwipeEnd":"onMouseUp",this._onMouseUpHandler);break;case Draw.POINT:this._onClickHandler_connect=dc(map,"onClick",this._onClickHandler);break;case Draw.LINE:case Draw.EXTENT:case Draw.FREEHAND_POLYLINE:case Draw.FREEHAND_POLYGON:this._deactivateMapTools(true,false,false,true);this._onMouseDownHandler_connect=dc(map,!this._mouse?"onSwipeStart":"onMouseDown",this._onMouseDownHandler);this._onMouseDragHandler_connect=dc(map,!this._mouse?"onSwipeMove":"onMouseDrag",this._onMouseDragHandler);this._onMouseUpHandler_connect=dc(map,!this._mouse?"onSwipeEnd":"onMouseUp",this._onMouseUpHandler);break;case Draw.POLYLINE:case Draw.POLYGON:case Draw.MULTI_POINT:map.navigationManager.setImmediateClick(true);this._onClickHandler_connect=dc(map,"onClick",this._onClickHandler);this._onDblClickHandler_connect=dc(map,"onDblClick",this._onDblClickHandler);map.disableDoubleClickZoom();break;default:console.error("Unsupported geometry type: "+_8de);return;}this._onKeyDown_connect=dc(map,"onKeyDown",this._onKeyDownHandler);this._redrawConnect=dc(map,"onExtentChange",this._redrawGraphic);this._geometryType=_8de;this._toggleTooltip(true);if(map.snappingManager&&this._geometryType!=="freehandpolyline"&&this._geometryType!=="freehandpolygon"&&this._mouse){map.snappingManager._startSelectionLayerQuery();map.snappingManager._setUpSnapping();}this.onActivate(this._geometryType);},deactivate:function(){var map=this.map;this._clear();var ddc=_8c9.disconnect;ddc(this._onMouseDownHandler_connect);ddc(this._onMouseMoveHandler_connect);ddc(this._onMouseDragHandler_connect);ddc(this._onMouseUpHandler_connect);ddc(this._onClickHandler_connect);ddc(this._onDblClickHandler_connect);ddc(this._onKeyDown_connect);ddc(this._redrawConnect);this._onMouseDownHandler_connect=this._onMouseMoveHandler_connect=this._onMouseDragHandler_connect=this._onMouseUpHandler_connect=this._onClickHandler_connect=this._onDblClickHandler_connect=this._onKeyDown_connect=this._redrawConnect=null;if(map.snappingManager){map.snappingManager._stopSelectionLayerQuery();map.snappingManager._killOffSnapping();}switch(this._geometryType){case DRAW.CIRCLE:case DRAW.ELLIPSE:case DRAW.TRIANGLE:case DRAW.ARROW:case DRAW.LEFT_ARROW:case DRAW.RIGHT_ARROW:case DRAW.UP_ARROW:case DRAW.DOWN_ARROW:case DRAW.RECTANGLE:case DRAW.LINE:case DRAW.EXTENT:case DRAW.FREEHAND_POLYLINE:case DRAW.FREEHAND_POLYGON:this._activateMapTools(true,false,false,true);break;case this.POLYLINE:case this.POLYGON:case this.MULTI_POINT:map.enableDoubleClickZoom();break;}var _8e0=this._geometryType;this._geometryType=null;map.navigationManager.setImmediateClick(false);this._toggleTooltip(false);this.onDeactivate(_8e0);},_clear:function(){if(this._graphic){this.map.graphics.remove(this._graphic,true);}if(this._tGraphic){this.map.graphics.remove(this._tGraphic,true);}this._graphic=this._tGraphic=null;if(this.map.snappingManager){this.map.snappingManager._setGraphic(null);}this._points=[];},finishDrawing:function(){var _8e1,_8e2=this._points,map=this.map,_8e3=map.spatialReference,Draw=DRAW;_8e2=_8e2.slice(0,_8e2.length);switch(this._geometryType){case Draw.POLYLINE:if(!this._graphic||_8e2.length<2){return;}_8e1=new _8d6(_8e3);_8e1.addPath([].concat(_8e2));break;case Draw.POLYGON:if(!this._graphic||_8e2.length<3){return;}_8e1=new _8d7(_8e3);var ring=[].concat(_8e2,[_8e2[0].offset(0,0)]);if(!_8d7.prototype.isClockwise(ring)&&!this.respectDrawingVertexOrder){console.debug(this.declaredClass+" :  Polygons drawn in anti-clockwise direction will be reversed to be clockwise.");ring.reverse();}_8e1.addRing(ring);break;case Draw.MULTI_POINT:_8e1=new _8d8(_8e3);_8c8.forEach(_8e2,function(pt){_8e1.addPoint(pt);});break;}_8c9.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);this._drawEnd(_8e1);},_drawEnd:function(_8e4){if(_8e4){var _8e5=this.map.spatialReference,geo;this.onDrawEnd(_8e4);if(_8e5){if(_8e5.isWebMercator()){geo=_8d5.webMercatorToGeographic(_8e4,true);}else{if(_8e5.wkid===4326){geo=_8d4.fromJson(_8e4.toJson());}}}this.onDrawComplete({geometry:_8e4,geographicGeometry:geo});}},_normalizeRect:function(_8e6,end,_8e7){var sx=_8e6.x,sy=_8e6.y,ex=end.x,ey=end.y,_8e8=Math.abs(sx-ex),_8e9=Math.abs(sy-ey);return {x:Math.min(sx,ex),y:Math.max(sy,ey),width:_8e8,height:_8e9,spatialReference:_8e7};},_onMouseDownHandler:function(evt){this._dragged=false;var _8ea;if(this.map.snappingManager){_8ea=this.map.snappingManager._snappingPoint;}var _8eb=_8ea||evt.mapPoint,Draw=DRAW,map=this.map,_8ec=map.spatialReference;this._points.push(_8eb.offset(0,0));switch(this._geometryType){case Draw.LINE:this._graphic=map.graphics.add(new _8d3(new _8d6({paths:[[[_8eb.x,_8eb.y],[_8eb.x,_8eb.y]]],spatialReference:_8ec}),this.lineSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}break;case Draw.EXTENT:break;case Draw.FREEHAND_POLYLINE:this._oldPoint=evt.screenPoint;var _8ed=new _8d6(_8ec);_8ed.addPath(this._points);this._graphic=map.graphics.add(new _8d3(_8ed,this.lineSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}break;case Draw.CIRCLE:case Draw.ELLIPSE:case Draw.TRIANGLE:case Draw.ARROW:case Draw.LEFT_ARROW:case Draw.RIGHT_ARROW:case Draw.UP_ARROW:case Draw.DOWN_ARROW:case Draw.RECTANGLE:case Draw.FREEHAND_POLYGON:this._oldPoint=evt.screenPoint;var _8ee=new _8d7(_8ec);_8ee.addRing(this._points);this._graphic=map.graphics.add(new _8d3(_8ee,this.fillSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}break;}if(has("esri-touch")){evt.preventDefault();}},_onMouseMoveHandler:function(evt){var _8ef;if(this.map.snappingManager){_8ef=this.map.snappingManager._snappingPoint;}var _8f0=this._points[this._points.length-1],end=_8ef||evt.mapPoint,_8f1=this._tGraphic,geom=_8f1.geometry;switch(this._geometryType){case DRAW.POLYLINE:case DRAW.POLYGON:geom.setPoint(0,0,{x:_8f0.x,y:_8f0.y});geom.setPoint(0,1,{x:end.x,y:end.y});_8f1.setGeometry(geom);break;}},_onMouseDragHandler:function(evt){if(has("esri-touch")&&!this._points.length){evt.preventDefault();return;}this._dragged=true;var _8f2;if(this.map.snappingManager){_8f2=this.map.snappingManager._snappingPoint;}var _8f3=this._points[0],end=_8f2||evt.mapPoint,map=this.map,_8f4=map.spatialReference,_8f5=this._graphic,Draw=DRAW,_8f6=map.toScreen(_8f3),_8f7=map.toScreen(end),pts=[],a=_8f7.x-_8f6.x,b=_8f7.y-_8f6.y,_8f8=60,d=Math.sqrt(a*a+b*b);switch(this._geometryType){case Draw.CIRCLE:this._hideTooltip();_8f5.geometry=_8d7.createCircle({center:_8f6,r:d,numberOfPoints:_8f8,map:map});_8f5.setGeometry(_8f5.geometry);break;case Draw.ELLIPSE:this._hideTooltip();_8f5.geometry=_8d7.createEllipse({center:_8f6,longAxis:a,shortAxis:b,numberOfPoints:_8f8,map:map});_8f5.setGeometry(_8f5.geometry);break;case Draw.TRIANGLE:this._hideTooltip();pts=[[0,-d],[0.8660254037844386*d,0.5*d],[-0.8660254037844386*d,0.5*d],[0,-d]];_8f5.geometry=this._toPolygon(pts,_8f6.x,_8f6.y);_8f5.setGeometry(_8f5.geometry);break;case Draw.ARROW:this._hideTooltip();var sina=b/d,cosa=a/d,tana=b/a;var f=cosa*0.25*d,e=0.25*d/tana,g=sina*0.25*d;pts=[[a,b],[a-f*(1+24/e),b+24*cosa-g],[a-f*(1+12/e),b+12*cosa-g],[-12*sina,12*cosa],[12*sina,-12*cosa],[a-f*(1-12/e),b-12*cosa-g],[a-f*(1-24/e),b-24*cosa-g],[a,b]];_8f5.geometry=this._toPolygon(pts,_8f6.x,_8f6.y);_8f5.setGeometry(_8f5.geometry);break;case Draw.LEFT_ARROW:this._hideTooltip();if(a<=0){pts=[[a,0],[0.75*a,b],[0.75*a,0.5*b],[0,0.5*b],[0,-0.5*b],[0.75*a,-0.5*b],[0.75*a,-b],[a,0]];}else{pts=[[0,0],[0.25*a,b],[0.25*a,0.5*b],[a,0.5*b],[a,-0.5*b],[0.25*a,-0.5*b],[0.25*a,-b],[0,0]];}_8f5.geometry=this._toPolygon(pts,_8f6.x,_8f6.y);_8f5.setGeometry(_8f5.geometry);break;case Draw.RIGHT_ARROW:this._hideTooltip();if(a>=0){pts=[[a,0],[0.75*a,b],[0.75*a,0.5*b],[0,0.5*b],[0,-0.5*b],[0.75*a,-0.5*b],[0.75*a,-b],[a,0]];}else{pts=[[0,0],[0.25*a,b],[0.25*a,0.5*b],[a,0.5*b],[a,-0.5*b],[0.25*a,-0.5*b],[0.25*a,-b],[0,0]];}_8f5.geometry=this._toPolygon(pts,_8f6.x,_8f6.y);_8f5.setGeometry(_8f5.geometry);break;case Draw.UP_ARROW:this._hideTooltip();if(b<=0){pts=[[0,b],[-a,0.75*b],[-0.5*a,0.75*b],[-0.5*a,0],[0.5*a,0],[0.5*a,0.75*b],[a,0.75*b],[0,b]];}else{pts=[[0,0],[-a,0.25*b],[-0.5*a,0.25*b],[-0.5*a,b],[0.5*a,b],[0.5*a,0.25*b],[a,0.25*b],[0,0]];}_8f5.geometry=this._toPolygon(pts,_8f6.x,_8f6.y);_8f5.setGeometry(_8f5.geometry);break;case Draw.DOWN_ARROW:this._hideTooltip();if(b>=0){pts=[[0,b],[-a,0.75*b],[-0.5*a,0.75*b],[-0.5*a,0],[0.5*a,0],[0.5*a,0.75*b],[a,0.75*b],[0,b]];}else{pts=[[0,0],[-a,0.25*b],[-0.5*a,0.25*b],[-0.5*a,b],[0.5*a,b],[0.5*a,0.25*b],[a,0.25*b],[0,0]];}_8f5.geometry=this._toPolygon(pts,_8f6.x,_8f6.y);_8f5.setGeometry(_8f5.geometry);break;case Draw.RECTANGLE:this._hideTooltip();pts=[[0,0],[a,0],[a,b],[0,b],[0,0]];_8f5.geometry=this._toPolygon(pts,_8f6.x,_8f6.y);_8f5.setGeometry(_8f5.geometry);break;case Draw.LINE:_8f5.setGeometry(lang.mixin(_8f5.geometry,{paths:[[[_8f3.x,_8f3.y],[end.x,end.y]]]}));break;case Draw.EXTENT:if(_8f5){map.graphics.remove(_8f5,true);}var rect=new Rect(this._normalizeRect(_8f3,end,_8f4));rect._originOnly=true;this._graphic=map.graphics.add(new _8d3(rect,this.fillSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}break;case Draw.FREEHAND_POLYLINE:this._hideTooltip();if(this._canDrawFreehandPoint(evt)===false){if(has("esri-touch")){evt.preventDefault();}return;}this._points.push(evt.mapPoint.offset(0,0));_8f5.geometry._insertPoints([end.offset(0,0)],0);_8f5.setGeometry(_8f5.geometry);break;case Draw.FREEHAND_POLYGON:this._hideTooltip();if(this._canDrawFreehandPoint(evt)===false){if(has("esri-touch")){evt.preventDefault();}return;}this._points.push(evt.mapPoint.offset(0,0));_8f5.geometry._insertPoints([end.offset(0,0)],0);_8f5.setGeometry(_8f5.geometry);break;}if(has("esri-touch")){evt.preventDefault();}},_canDrawFreehandPoint:function(evt){if(!this._oldPoint){return false;}var dx=this._oldPoint.x-evt.screenPoint.x;dx=(dx<0)?dx*-1:dx;var dy=this._oldPoint.y-evt.screenPoint.y;dy=(dy<0)?dy*-1:dy;var _8f9=this._options.tolerance;if(dx<_8f9&&dy<_8f9){return false;}var now=new Date();var _8fa=now-this._startTime;if(_8fa<this._options.drawTime){return false;}this._startTime=now;this._oldPoint=evt.screenPoint;return true;},_onMouseUpHandler:function(evt){if(!this._dragged){this._clear();return;}if(this._points.length===0){this._points.push(evt.mapPoint.offset(0,0));}var _8fb;if(this.map.snappingManager){_8fb=this.map.snappingManager._snappingPoint;}var _8fc=this._points[0],end=_8fb||evt.mapPoint,map=this.map,_8fd=map.spatialReference,Draw=DRAW,_8fe;switch(this._geometryType){case Draw.CIRCLE:case Draw.ELLIPSE:case Draw.TRIANGLE:case Draw.ARROW:case Draw.LEFT_ARROW:case Draw.RIGHT_ARROW:case Draw.UP_ARROW:case Draw.DOWN_ARROW:case Draw.RECTANGLE:_8fe=this._graphic.geometry;break;case Draw.LINE:_8fe=new _8d6({paths:[[[_8fc.x,_8fc.y],[end.x,end.y]]],spatialReference:_8fd});break;case Draw.EXTENT:_8fe=(new Rect(this._normalizeRect(_8fc,end,_8fd))).getExtent();break;case Draw.FREEHAND_POLYLINE:_8fe=new _8d6(_8fd);_8fe.addPath([].concat(this._points,[end.offset(0,0)]));break;case Draw.FREEHAND_POLYGON:_8fe=new _8d7(_8fd);var ring=[].concat(this._points,[end.offset(0,0),this._points[0].offset(0,0)]);if(!_8d7.prototype.isClockwise(ring)&&!this.respectDrawingVertexOrder){console.debug(this.declaredClass+" :  Polygons drawn in anti-clockwise direction will be reversed to be clockwise.");ring.reverse();}_8fe.addRing(ring);break;}if(has("esri-touch")){evt.preventDefault();}this._clear();this._drawEnd(_8fe);},_onClickHandler:function(evt){var _8ff;if(this.map.snappingManager){_8ff=this.map.snappingManager._snappingPoint;}var _900=_8ff||evt.mapPoint,map=this.map,_901=map.toScreen(_900),Draw=DRAW,pts,dx,dy,_902,geom,_903;this._points.push(_900.offset(0,0));switch(this._geometryType){case Draw.POINT:this._drawEnd(_900.offset(0,0));this._setTooltipMessage(0);break;case Draw.POLYLINE:if(this._points.length===1){var _904=new _8d6(map.spatialReference);_904.addPath(this._points);this._graphic=map.graphics.add(new _8d3(_904,this.lineSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}this._onMouseMoveHandler_connect=_8c9.connect(map,"onMouseMove",this._onMouseMoveHandler);this._tGraphic=map.graphics.add(new _8d3(new _8d6({paths:[[[_900.x,_900.y],[_900.x,_900.y]]],spatialReference:map.spatialReference}),this.lineSymbol),true);}else{this._graphic.geometry._insertPoints([_900.offset(0,0)],0);this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.lineSymbol);_902=this._tGraphic;geom=_902.geometry;geom.setPoint(0,0,_900.offset(0,0));geom.setPoint(0,1,_900.offset(0,0));_902.setGeometry(geom);}break;case Draw.POLYGON:if(this._points.length===1){_903=new _8d7(map.spatialReference);_903.addRing(this._points);this._graphic=map.graphics.add(new _8d3(_903,this.fillSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}this._onMouseMoveHandler_connect=_8c9.connect(map,"onMouseMove",this._onMouseMoveHandler);this._tGraphic=map.graphics.add(new _8d3(new _8d6({paths:[[[_900.x,_900.y],[_900.x,_900.y]]],spatialReference:map.spatialReference}),this.fillSymbol),true);}else{this._graphic.geometry._insertPoints([_900.offset(0,0)],0);this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.fillSymbol);_902=this._tGraphic;geom=_902.geometry;geom.setPoint(0,0,_900.offset(0,0));geom.setPoint(0,1,_900.offset(0,0));_902.setGeometry(geom);}break;case Draw.MULTI_POINT:var tps=this._points;if(tps.length===1){var _905=new _8d8(map.spatialReference);_905.addPoint(tps[tps.length-1]);this._graphic=map.graphics.add(new _8d3(_905,this.markerSymbol),true);if(map.snappingManager){map.snappingManager._setGraphic(this._graphic);}}else{this._graphic.geometry.addPoint(tps[tps.length-1]);this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.markerSymbol);}break;case Draw.ARROW:pts=[[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]];dx=_901.x;dy=_901.y;this._addShape(pts,dx,dy);break;case Draw.LEFT_ARROW:pts=[[0,0],[24,24],[24,12],[96,12],[96,-12],[24,-12],[24,-24],[0,0]];dx=_901.x;dy=_901.y;this._addShape(pts,dx,dy);break;case Draw.RIGHT_ARROW:pts=[[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]];dx=_901.x;dy=_901.y;this._addShape(pts,dx,dy);break;case Draw.UP_ARROW:pts=[[0,0],[-24,24],[-12,24],[-12,96],[12,96],[12,24],[24,24],[0,0]];dx=_901.x;dy=_901.y;this._addShape(pts,dx,dy);break;case Draw.DOWN_ARROW:pts=[[0,0],[-24,-24],[-12,-24],[-12,-96],[12,-96],[12,-24],[24,-24],[0,0]];dx=_901.x;dy=_901.y;this._addShape(pts,dx,dy);break;case Draw.TRIANGLE:pts=[[0,-48],[41.56921938165306,24],[-41.56921938165306,24],[0,-48]];dx=_901.x;dy=_901.y;this._addShape(pts,dx,dy);break;case Draw.RECTANGLE:pts=[[0,-96],[96,-96],[96,0],[0,0],[0,-96]];dx=_901.x-48;dy=_901.y+48;this._addShape(pts,dx,dy);break;case Draw.CIRCLE:_903=new _8d7(map.spatialReference);this._graphic=map.graphics.add(new _8d3(_903,this.fillSymbol),true);this._graphic.geometry=_8d7.createCircle({center:_901,r:48,numberOfPoints:60,map:map});this._graphic.setGeometry(this._graphic.geometry);this._drawEnd(this._graphic.geometry);break;case Draw.ELLIPSE:_903=new _8d7(map.spatialReference);this._graphic=map.graphics.add(new _8d3(_903,this.fillSymbol),true);this._graphic.geometry=_8d7.createEllipse({center:_901,longAxis:48,shortAxis:24,numberOfPoints:60,map:map});this._graphic.setGeometry(this._graphic.geometry);this._drawEnd(this._graphic.geometry);break;}this._setTooltipMessage(this._points.length);},_addShape:function(path,dx,dy){var _906=this.map.graphics.add(new _8d3(this._toPolygon(path,dx,dy),this.fillSymbol),true);this._setTooltipMessage(0);var geom;if(_906){geom=_8d4.fromJson(_906.geometry.toJson());this.map.graphics.remove(_906,true);}this._drawEnd(geom);_906=geom=null;},_toPolygon:function(path,dx,dy){var map=this.map;var _907=new _8d7(map.spatialReference);_907.addRing(_8c8.map(path,function(pt){return map.toMap({x:pt[0]+dx,y:pt[1]+dy});}));return _907;},_onDblClickHandler:function(evt){var _908,_909=this._points,map=this.map,_90a=map.spatialReference,Draw=DRAW;if(has("esri-touch")){_909.push(evt.mapPoint);}_909=_909.slice(0,_909.length);switch(this._geometryType){case Draw.POLYLINE:if(!this._graphic||_909.length<2){_8c9.disconnect(this._onMouseMoveHandler_connect);this._clear();this._onClickHandler(evt);return;}_908=new _8d6(_90a);_908.addPath([].concat(_909));break;case Draw.POLYGON:if(!this._graphic||_909.length<2){_8c9.disconnect(this._onMouseMoveHandler_connect);this._clear();this._onClickHandler(evt);return;}_908=new _8d7(_90a);var ring=[].concat(_909,[_909[0].offset(0,0)]);if(!_8d7.prototype.isClockwise(ring)&&!this.respectDrawingVertexOrder){console.debug(this.declaredClass+" :  Polygons drawn in anti-clockwise direction will be reversed to be clockwise.");ring.reverse();}_908.addRing(ring);break;case Draw.MULTI_POINT:_908=new _8d8(_90a);_8c8.forEach(_909,function(pt){_908.addPoint(pt);});break;}_8c9.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);this._drawEnd(_908);},_onKeyDownHandler:function(evt){if(evt.keyCode===keys.ESCAPE){_8c9.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);}},_toggleTooltip:function(show){if(!this._options.showTooltips){return;}if(show){if(this._tooltip){return;}var _90b=this.map.container;this._tooltip=_8cb.create("div",{"class":"tooltip"},_90b);this._tooltip.style.display="none";this._tooltip.style.position="fixed";this._setTooltipMessage(0);this._onTooltipMouseEnterHandler_connect=_8c9.connect(this.map,"onMouseOver",this._updateTooltip);this._onTooltipMouseLeaveHandler_connect=_8c9.connect(this.map,"onMouseOut",this._hideTooltip);this._onTooltipMouseMoveHandler_connect=_8c9.connect(this.map,"onMouseMove",this._updateTooltip);}else{if(this._tooltip){_8c9.disconnect(this._onTooltipMouseEnterHandler_connect);_8c9.disconnect(this._onTooltipMouseLeaveHandler_connect);_8c9.disconnect(this._onTooltipMouseMoveHandler_connect);_8cb.destroy(this._tooltip);this._tooltip=null;}}},_hideTooltip:function(){var _90c=this._tooltip;if(!_90c){return;}_90c.style.display="none";},_setTooltipMessage:function(_90d){var _90e=this._tooltip;if(!_90e){return;}var _90f=_90d;var _910="";switch(this._geometryType){case DRAW.POINT:_910=_8d9.toolbars.draw.addPoint;break;case DRAW.ARROW:case DRAW.LEFT_ARROW:case DRAW.RIGHT_ARROW:case DRAW.UP_ARROW:case DRAW.DOWN_ARROW:case DRAW.TRIANGLE:case DRAW.RECTANGLE:case DRAW.CIRCLE:case DRAW.ELLIPSE:_910=_8d9.toolbars.draw.addShape;break;case DRAW.LINE:case DRAW.EXTENT:case DRAW.FREEHAND_POLYLINE:case DRAW.FREEHAND_POLYGON:_910=_8d9.toolbars.draw.freehand;break;case DRAW.POLYLINE:case DRAW.POLYGON:_910=_8d9.toolbars.draw.start;if(_90f===1){_910=_8d9.toolbars.draw.resume;}else{if(_90f>=2){_910=_8d9.toolbars.draw.complete;}}break;case DRAW.MULTI_POINT:_910=_8d9.toolbars.draw.addMultipoint;if(_90f>=1){_910=_8d9.toolbars.draw.finish;}break;}_90e.innerHTML=_910;},_updateTooltip:function(evt){var _911=this._tooltip;if(!_911){return;}var px,py;if(evt.clientX||evt.pageY){px=evt.clientX;py=evt.clientY;}else{px=evt.clientX+win.body().scrollLeft-win.body().clientLeft;py=evt.clientY+win.body().scrollTop-win.body().clientTop;}_911.style.display="none";_8cc.set(_911,{left:(px+this._options.tooltipOffset)+"px",top:py+"px"});_911.style.display="";},_redrawGraphic:function(_912,_913,_914,lod){if(_914||this.map.wrapAround180){var g=this._graphic;if(g){g.setGeometry(g.geometry);}g=this._tGraphic;if(g){g.setGeometry(g.geometry);}}},onActivate:function(){},onDeactivate:function(){},onDrawComplete:function(){},onDrawEnd:function(){}});lang.mixin(DRAW,{POINT:"point",MULTI_POINT:"multipoint",LINE:"line",EXTENT:"extent",POLYLINE:"polyline",POLYGON:"polygon",FREEHAND_POLYLINE:"freehandpolyline",FREEHAND_POLYGON:"freehandpolygon",ARROW:"arrow",LEFT_ARROW:"leftarrow",RIGHT_ARROW:"rightarrow",UP_ARROW:"uparrow",DOWN_ARROW:"downarrow",TRIANGLE:"triangle",CIRCLE:"circle",ELLIPSE:"ellipse",RECTANGLE:"rectangle"});if(has("extend-esri")){lang.setObject("toolbars.Draw",DRAW,_8cd);}return DRAW;});},"dojox/grid/cells":function(){define("dojox/grid/cells",["../main","./cells/_base"],function(_915){return _915.grid.cells;});},"esri/dijit/editing/Union":function(){define("esri/dijit/editing/Union",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/OperationBase","esri/dijit/editing/Cut"],function(_916,lang,has,_917,_918,Cut){var _919=_916(_918,{declaredClass:"esri.dijit.editing.Union",type:"edit",label:"Union Features",constructor:function(_91a){_91a=_91a||{};this._cut=new Cut({featureLayer:_91a.featureLayer,addedGraphics:_91a.deletedGraphics,preUpdatedGraphics:_91a.preUpdatedGraphics,postUpdatedGraphics:_91a.postUpdatedGraphics});},performUndo:function(){this._cut.performRedo();},performRedo:function(){this._cut.performUndo();}});if(has("extend-esri")){lang.setObject("dijit.editing.Union",_919,_917);}return _919;});},"dijit/Destroyable":function(){define("dijit/Destroyable",["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(_91b,_91c,_91d){return _91d("dijit.Destroyable",null,{destroy:function(_91e){this._destroyed=true;},own:function(){_91b.forEach(arguments,function(_91f){var _920="destroyRecursive" in _91f?"destroyRecursive":"destroy" in _91f?"destroy":"remove";var odh=_91c.before(this,"destroy",function(_921){_91f[_920](_921);});var hdh=_91c.after(_91f,_920,function(){odh.remove();hdh.remove();},true);},this);return arguments;}});});},"dojox/grid/_Layout":function(){define("dojox/grid/_Layout",["dojo/_base/kernel","../main","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-geometry","./cells","./_RowSelector"],function(dojo,_922,_923,_924,lang,_925){return _923("dojox.grid._Layout",null,{constructor:function(_926){this.grid=_926;},cells:[],structure:null,defaultWidth:"6em",moveColumn:function(_927,_928,_929,_92a,_92b){var _92c=this.structure[_927].cells[0];var _92d=this.structure[_928].cells[0];var cell=null;var _92e=0;var _92f=0;for(var i=0,c;c=_92c[i];i++){if(c.index==_929){_92e=i;break;}}cell=_92c.splice(_92e,1)[0];cell.view=this.grid.views.views[_928];for(i=0,c=null;c=_92d[i];i++){if(c.index==_92a){_92f=i;break;}}if(!_92b){_92f+=1;}_92d.splice(_92f,0,cell);var _930=this.grid.getCell(this.grid.getSortIndex());if(_930){_930._currentlySorted=this.grid.getSortAsc();}this.cells=[];_929=0;var v;for(i=0;v=this.structure[i];i++){for(var j=0,cs;cs=v.cells[j];j++){for(var k=0;c=cs[k];k++){c.index=_929;this.cells.push(c);if("_currentlySorted" in c){var si=_929+1;si*=c._currentlySorted?1:-1;this.grid.sortInfo=si;delete c._currentlySorted;}_929++;}}}_924.forEach(this.cells,function(c){var _931=c.markup[2].split(" ");var _932=parseInt(_931[1].substring(5));if(_932!=c.index){_931[1]="idx=\""+c.index+"\"";c.markup[2]=_931.join(" ");}});this.grid.setupHeaderMenu();},setColumnVisibility:function(_933,_934){var cell=this.cells[_933];if(cell.hidden==_934){cell.hidden=!_934;var v=cell.view,w=v.viewWidth;if(w&&w!="auto"){v._togglingColumn=_925.getMarginBox(cell.getHeaderNode()).w||0;}v.update();return true;}else{return false;}},addCellDef:function(_935,_936,_937){var self=this;var _938=function(_939){var w=0;if(_939.colSpan>1){w=0;}else{w=_939.width||self._defaultCellProps.width||self.defaultWidth;if(!isNaN(w)){w=w+"em";}}return w;};var _93a={grid:this.grid,subrow:_935,layoutIndex:_936,index:this.cells.length};if(_937&&_937 instanceof _922.grid.cells._Base){var _93b=lang.clone(_937);_93a.unitWidth=_938(_93b._props);_93b=lang.mixin(_93b,this._defaultCellProps,_937._props,_93a);return _93b;}var _93c=_937.type||_937.cellType||this._defaultCellProps.type||this._defaultCellProps.cellType||_922.grid.cells.Cell;if(lang.isString(_93c)){_93c=lang.getObject(_93c);}_93a.unitWidth=_938(_937);return new _93c(lang.mixin({},this._defaultCellProps,_937,_93a));},addRowDef:function(_93d,_93e){var _93f=[];var _940=0,_941=0,_942=true;for(var i=0,def,cell;(def=_93e[i]);i++){cell=this.addCellDef(_93d,i,def);_93f.push(cell);this.cells.push(cell);if(_942&&cell.relWidth){_940+=cell.relWidth;}else{if(cell.width){var w=cell.width;if(typeof w=="string"&&w.slice(-1)=="%"){_941+=window.parseInt(w,10);}else{if(w=="auto"){_942=false;}}}}}if(_940&&_942){_924.forEach(_93f,function(cell){if(cell.relWidth){cell.width=cell.unitWidth=((cell.relWidth/_940)*(100-_941))+"%";}});}return _93f;},addRowsDef:function(_943){var _944=[];if(lang.isArray(_943)){if(lang.isArray(_943[0])){for(var i=0,row;_943&&(row=_943[i]);i++){_944.push(this.addRowDef(i,row));}}else{_944.push(this.addRowDef(0,_943));}}return _944;},addViewDef:function(_945){this._defaultCellProps=_945.defaultCell||{};if(_945.width&&_945.width=="auto"){delete _945.width;}return lang.mixin({},_945,{cells:this.addRowsDef(_945.rows||_945.cells)});},setStructure:function(_946){this.fieldIndex=0;this.cells=[];var s=this.structure=[];if(this.grid.rowSelector){var sel={type:_922._scopeName+".grid._RowSelector"};if(lang.isString(this.grid.rowSelector)){var _947=this.grid.rowSelector;if(_947=="false"){sel=null;}else{if(_947!="true"){sel["width"]=_947;}}}else{if(!this.grid.rowSelector){sel=null;}}if(sel){s.push(this.addViewDef(sel));}}var _948=function(def){return ("name" in def||"field" in def||"get" in def);};var _949=function(def){if(lang.isArray(def)){if(lang.isArray(def[0])||_948(def[0])){return true;}}return false;};var _94a=function(def){return (def!==null&&lang.isObject(def)&&("cells" in def||"rows" in def||("type" in def&&!_948(def))));};if(lang.isArray(_946)){var _94b=false;for(var i=0,st;(st=_946[i]);i++){if(_94a(st)){_94b=true;break;}}if(!_94b){s.push(this.addViewDef({cells:_946}));}else{for(i=0;(st=_946[i]);i++){if(_949(st)){s.push(this.addViewDef({cells:st}));}else{if(_94a(st)){s.push(this.addViewDef(st));}}}}}else{if(_94a(_946)){s.push(this.addViewDef(_946));}}this.cellCount=this.cells.length;this.grid.setupHeaderMenu();}});});},"dijit/form/RangeBoundTextBox":function(){define("dijit/form/RangeBoundTextBox",["dojo/_base/declare","dojo/i18n","./MappedTextBox"],function(_94c,i18n,_94d){var _94e=_94c("dijit.form.RangeBoundTextBox",_94d,{rangeMessage:"",rangeCheck:function(_94f,_950){return ("min" in _950?(this.compare(_94f,_950.min)>=0):true)&&("max" in _950?(this.compare(_94f,_950.max)<=0):true);},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints);},_isDefinitelyOutOfRange:function(){var val=this.get("value");if(val==null){return false;}var _951=false;if("min" in this.constraints){var min=this.constraints.min;_951=this.compare(val,((typeof min=="number")&&min>=0&&val!=0)?0:min)<0;}if(!_951&&("max" in this.constraints)){var max=this.constraints.max;_951=this.compare(val,((typeof max!="number")||max>0)?max:0)>0;}return _951;},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange();},isValid:function(_952){return this.inherited(arguments)&&((this._isEmpty(this.textbox.value)&&!this.required)||this.isInRange(_952));},getErrorMessage:function(_953){var v=this.get("value");if(v!=null&&v!==""&&(typeof v!="number"||!isNaN(v))&&!this.isInRange(_953)){return this.rangeMessage;}return this.inherited(arguments);},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage){this.messages=i18n.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage;}},applyTextDir:function(){}});return _94e;});},"dijit/_editor/RichText":function(){define("dijit/_editor/RichText",["dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/query","dojo/ready","dojo/sniff","dojo/topic","dojo/_base/unload","dojo/_base/url","dojo/_base/window","../_Widget","../_CssStateMixin","./selection","./range","./html","../focus","../main"],function(_954,_955,_956,_957,dom,_958,_959,_95a,_95b,_95c,_95d,_95e,keys,lang,on,_95f,_960,has,_961,_962,_963,win,_964,_965,_966,_967,_968,_969,_96a){var _96b=_956("dijit._editor.RichText",[_964,_965],{constructor:function(_96c){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};if(_96c&&lang.isString(_96c.value)){this.value=_96c.value;}this.onLoadDeferred=new _957();},baseClass:"dijitEditor",inheritWidth:false,focusOnLoad:false,name:"",styleSheets:"",height:"300px",minHeight:"1em",isClosed:true,isLoaded:false,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:false,disableSpellCheck:false,postCreate:function(){if("textarea"===this.domNode.tagName.toLowerCase()){console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");}this.contentPreFilters=[lang.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);if(has("mozilla")){this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters);this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters);}if(has("webkit")){this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters);this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters);}if(has("ie")){this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters);this.contentDomPostFilters=[lang.hitch(this,this._stripBreakerNodes)].concat(this.contentDomPostFilters);}this.inherited(arguments);_961.publish(_96a._scopeName+"._editor.RichText::init",this);this.open();this.setupDefaultShortcuts();},setupDefaultShortcuts:function(){var exec=lang.hitch(this,function(cmd,arg){return function(){return !this.execCommand(cmd,arg);};});var _96d={b:exec("bold"),i:exec("italic"),u:exec("underline"),a:exec("selectall"),s:function(){this.save(true);},m:function(){this.isTabIndent=!this.isTabIndent;},"1":exec("formatblock","h1"),"2":exec("formatblock","h2"),"3":exec("formatblock","h3"),"4":exec("formatblock","h4"),"\\":exec("insertunorderedlist")};if(!has("ie")){_96d.Z=exec("redo");}var key;for(key in _96d){this.addKeyHandler(key,true,false,_96d[key]);}},events:["onKeyPress","onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:false,_localizeEditorCommands:function(){if(_96b._editorCommandsLocalized){this._local2NativeFormatNames=_96b._local2NativeFormatNames;this._native2LocalFormatNames=_96b._native2LocalFormatNames;return;}_96b._editorCommandsLocalized=true;_96b._local2NativeFormatNames={};_96b._native2LocalFormatNames={};this._local2NativeFormatNames=_96b._local2NativeFormatNames;this._native2LocalFormatNames=_96b._native2LocalFormatNames;var _96e=["div","p","pre","h1","h2","h3","h4","h5","h6","ol","ul","address"];var _96f="",_970,i=0;while((_970=_96e[i++])){if(_970.charAt(1)!=="l"){_96f+="<"+_970+"><span>content</span></"+_970+"><br/>";}else{_96f+="<"+_970+"><li>content</li></"+_970+"><br/>";}}var _971={position:"absolute",top:"0px",zIndex:10,opacity:0.01};var div=_95a.create("div",{style:_971,innerHTML:_96f});this.ownerDocumentBody.appendChild(div);var _972=lang.hitch(this,function(){var node=div.firstChild;while(node){try{this._sCall("selectElement",[node.firstChild]);var _973=node.tagName.toLowerCase();this._local2NativeFormatNames[_973]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[_973]]=_973;node=node.nextSibling.nextSibling;}catch(e){}}_95a.destroy(div);});this.defer(_972);},open:function(_974){if(!this.onLoadDeferred||this.onLoadDeferred.fired>=0){this.onLoadDeferred=new _957();}if(!this.isClosed){this.close();}_961.publish(_96a._scopeName+"._editor.RichText::open",this);if(arguments.length===1&&_974.nodeName){this.domNode=_974;}var dn=this.domNode;var html;if(lang.isString(this.value)){html=this.value;delete this.value;dn.innerHTML="";}else{if(dn.nodeName&&dn.nodeName.toLowerCase()=="textarea"){var ta=(this.textarea=dn);this.name=ta.name;html=ta.value;dn=this.domNode=this.ownerDocument.createElement("div");dn.setAttribute("widgetId",this.id);ta.removeAttribute("widgetId");dn.cssText=ta.cssText;dn.className+=" "+ta.className;_95a.place(dn,ta,"before");var _975=lang.hitch(this,function(){_95c.set(ta,{display:"block",position:"absolute",top:"-1000px"});if(has("ie")){var s=ta.style;this.__overflow=s.overflow;s.overflow="hidden";}});if(has("ie")){this.defer(_975,10);}else{_975();}if(ta.form){var _976=ta.value;this.reset=function(){var _977=this.getValue();if(_977!==_976){this.replaceValue(_976);}};on(ta.form,"submit",lang.hitch(this,function(){_958.set(ta,"disabled",this.disabled);ta.value=this.getValue();}));}}else{html=_968.getChildrenHtml(dn);dn.innerHTML="";}}this.value=html;if(dn.nodeName&&dn.nodeName==="LI"){dn.innerHTML=" <br>";}this.header=dn.ownerDocument.createElement("div");dn.appendChild(this.header);this.editingArea=dn.ownerDocument.createElement("div");dn.appendChild(this.editingArea);this.footer=dn.ownerDocument.createElement("div");dn.appendChild(this.footer);if(!this.name){this.name=this.id+"_AUTOGEN";}if(this.name!==""&&(!_955["useXDomain"]||_955["allowXdRichTextSave"])){var _978=dom.byId(_96a._scopeName+"._editor.RichText.value");if(_978&&_978.value!==""){var _979=_978.value.split(this._SEPARATOR),i=0,dat;while((dat=_979[i++])){var data=dat.split(this._NAME_CONTENT_SEP);if(data[0]===this.name){html=data[1];_979=_979.splice(i,1);_978.value=_979.join(this._SEPARATOR);break;}}}if(!_96b._globalSaveHandler){_96b._globalSaveHandler={};_962.addOnUnload(function(){var id;for(id in _96b._globalSaveHandler){var f=_96b._globalSaveHandler[id];if(lang.isFunction(f)){f();}}});}_96b._globalSaveHandler[this.id]=lang.hitch(this,"_saveContent");}this.isClosed=false;var ifr=(this.editorObject=this.iframe=this.ownerDocument.createElement("iframe"));ifr.id=this.id+"_iframe";ifr.style.border="none";ifr.style.width="100%";if(this._layoutMode){ifr.style.height="100%";}else{if(has("ie")>=7){if(this.height){ifr.style.height=this.height;}if(this.minHeight){ifr.style.minHeight=this.minHeight;}}else{ifr.style.height=this.height?this.height:this.minHeight;}}ifr.frameBorder=0;ifr._loadFunc=lang.hitch(this,function(w){this.window=w;this.document=this.window.document;if(has("ie")){this._localizeEditorCommands();}this.onLoad(html);});var src=this._getIframeDocTxt(),s="javascript: '"+src.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'";ifr.setAttribute("src",s);this.editingArea.appendChild(ifr);if(has("safari")<=4){src=ifr.getAttribute("src");if(!src||src.indexOf("javascript")===-1){this.defer(function(){ifr.setAttribute("src",s);});}}if(dn.nodeName==="LI"){dn.lastChild.style.marginTop="-1.2em";}_959.add(this.domNode,this.baseClass);},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var _97a=_95c.getComputedStyle(this.domNode);var html="";var _97b=true;if(has("ie")||has("webkit")||(!this.height&&!has("mozilla"))){html="<div id='dijitEditorBody'></div>";_97b=false;}else{if(has("mozilla")){this._cursorToStart=true;html="&#160;";}}var font=[_97a.fontWeight,_97a.fontSize,_97a.fontFamily].join(" ");var _97c=_97a.lineHeight;if(_97c.indexOf("px")>=0){_97c=parseFloat(_97c)/parseFloat(_97a.fontSize);}else{if(_97c.indexOf("em")>=0){_97c=parseFloat(_97c);}else{_97c="normal";}}var _97d="";var self=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(_97e){_97e=_97e.replace(/^;/ig,"")+";";var s=_97e.split(":")[0];if(s){s=lang.trim(s);s=s.toLowerCase();var i;var sC="";for(i=0;i<s.length;i++){var c=s.charAt(i);switch(c){case "-":i++;c=s.charAt(i).toUpperCase();default:sC+=c;}}_95c.set(self.domNode,sC,"");}_97d+=_97e+";";});var _97f=_95f("label[for=\""+this.id+"\"]");return [this.isLeftToRight()?"<html>\n<head>\n":"<html dir='rtl'>\n<head>\n",(has("mozilla")&&_97f.length?"<title>"+_97f[0].innerHTML+"</title>\n":""),"<meta http-equiv='Content-Type' content='text/html'>\n","<style>\n","\tbody,html {\n","\t\tbackground:transparent;\n","\t\tpadding: 1px 0 0 0;\n","\t\tmargin: -1px 0 0 0;\n",((has("webkit"))?"\t\twidth: 100%;\n":""),((has("webkit"))?"\t\theight: 100%;\n":""),"\t}\n","\tbody{\n","\t\ttop:0px;\n","\t\tleft:0px;\n","\t\tright:0px;\n","\t\tfont:",font,";\n",((this.height||has("opera"))?"":"\t\tposition: fixed;\n"),"\t\tmin-height:",this.minHeight,";\n","\t\tline-height:",_97c,";\n","\t}\n","\tp{ margin: 1em 0; }\n",(!_97b&&!this.height?"\tbody,html {overflow-y: hidden;}\n":""),"\t#dijitEditorBody{overflow-x: auto; overflow-y:"+(this.height?"auto;":"hidden;")+" outline: 0px;}\n","\tli > ul:-moz-first-node, li > ol:-moz-first-node{ padding-top: 1.2em; }\n",(!has("ie")?"\tli{ min-height:1.2em; }\n":""),"</style>\n",this._applyEditingAreaStyleSheets(),"\n","</head>\n<body ",(_97b?"id='dijitEditorBody' ":""),"onload='frameElement && frameElement._loadFunc(window,document)' ","style='"+_97d+"'>",html,"</body>\n</html>"].join("");},_applyEditingAreaStyleSheets:function(){var _980=[];if(this.styleSheets){_980=this.styleSheets.split(";");this.styleSheets="";}_980=_980.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];var text="",i=0,url;while((url=_980[i++])){var _981=(new _963(win.global.location,url)).toString();this.editingAreaStyleSheets.push(_981);text+="<link rel=\"stylesheet\" type=\"text/css\" href=\""+_981+"\"/>";}return text;},addStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)==="."||(url.charAt(0)!=="/"&&!uri.host)){url=(new _963(win.global.location,url)).toString();}if(_954.indexOf(this.editingAreaStyleSheets,url)>-1){return;}this.editingAreaStyleSheets.push(url);this.onLoadDeferred.then(lang.hitch(this,function(){if(this.document.createStyleSheet){this.document.createStyleSheet(url);}else{var head=this.document.getElementsByTagName("head")[0];var _982=this.document.createElement("link");_982.rel="stylesheet";_982.type="text/css";_982.href=url;head.appendChild(_982);}}));},removeStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)==="."||(url.charAt(0)!=="/"&&!uri.host)){url=(new _963(win.global.location,url)).toString();}var _983=_954.indexOf(this.editingAreaStyleSheets,url);if(_983===-1){return;}delete this.editingAreaStyleSheets[_983];_95f("link:[href=\""+url+"\"]",this.window.document).orphan();},disabled:false,_mozSettingProps:{"styleWithCSS":false},_setDisabledAttr:function(_984){_984=!!_984;this._set("disabled",_984);if(!this.isLoaded){return;}if(has("ie")||has("webkit")||has("opera")){var _985=has("ie")&&(this.isLoaded||!this.focusOnLoad);if(_985){this.editNode.unselectable="on";}this.editNode.contentEditable=!_984;if(_985){this.defer(function(){if(this.editNode){this.editNode.unselectable="off";}});}}else{try{this.document.designMode=(_984?"off":"on");}catch(e){return;}if(!_984&&this._mozSettingProps){var ps=this._mozSettingProps;var n;for(n in ps){if(ps.hasOwnProperty(n)){try{this.document.execCommand(n,false,ps[n]);}catch(e2){}}}}}this._disabledOK=true;},onLoad:function(html){if(!this.window.__registeredWindow){this.window.__registeredWindow=true;this._iframeRegHandle=_969.registerIframe(this.iframe);}if(!has("ie")&&!has("webkit")&&(this.height||has("mozilla"))){this.editNode=this.document.body;}else{this.editNode=this.document.body.firstChild;var _986=this;if(has("ie")){this.tabStop=_95a.create("div",{tabIndex:-1},this.editingArea);this.iframe.onfocus=function(){_986.editNode.setActive();};}}this.focusNode=this.editNode;var _987=this.events.concat(this.captureEvents);var ap=this.iframe?this.document:this.editNode;_954.forEach(_987,function(item){this.connect(ap,item.toLowerCase(),item);},this);this.connect(ap,"onmouseup","onClick");if(has("ie")){this.connect(this.document,"onmousedown","_onIEMouseDown");this.editNode.style.zoom=1;}else{this.connect(this.document,"onmousedown",function(){delete this._cursorToStart;});}if(has("webkit")){this._webkitListener=this.connect(this.document,"onmouseup","onDisplayChanged");this.connect(this.document,"onmousedown",function(e){var t=e.target;if(t&&(t===this.document.body||t===this.document)){this.defer("placeCursorAtEnd");}});}if(has("ie")){try{this.document.execCommand("RespectVisibilityInDesign",true,null);}catch(e){}}this.isLoaded=true;this.set("disabled",this.disabled);var _988=lang.hitch(this,function(){this.setValue(html);if(this.onLoadDeferred){this.onLoadDeferred.resolve(true);}this.onDisplayChanged();if(this.focusOnLoad){_960(lang.hitch(this,"defer","focus",this.updateInterval));}this.value=this.getValue(true);});if(this.setValueDeferred){this.setValueDeferred.then(_988);}else{_988();}},onKeyDown:function(e){if(e.keyCode===keys.TAB&&this.isTabIndent){_95d.stop(e);if(this.queryCommandEnabled((e.shiftKey?"outdent":"indent"))){this.execCommand((e.shiftKey?"outdent":"indent"));}}if(has("ie")){if(e.keyCode==keys.TAB&&!this.isTabIndent){if(e.shiftKey&&!e.ctrlKey&&!e.altKey){this.iframe.focus();}else{if(!e.shiftKey&&!e.ctrlKey&&!e.altKey){this.tabStop.focus();}}}else{if(e.keyCode===keys.BACKSPACE&&this.document.selection.type==="Control"){_95d.stop(e);this.execCommand("delete");}else{if((65<=e.keyCode&&e.keyCode<=90)||(e.keyCode>=37&&e.keyCode<=40)){e.charCode=e.keyCode;this.onKeyPress(e);}}}}if(has("ff")){if(e.keyCode===keys.PAGE_UP||e.keyCode===keys.PAGE_DOWN){if(this.editNode.clientHeight>=this.editNode.scrollHeight){e.preventDefault();}}}return true;},onKeyUp:function(){},setDisabled:function(_989){_95e.deprecated("dijit.Editor::setDisabled is deprecated","use dijit.Editor::attr(\"disabled\",boolean) instead",2);this.set("disabled",_989);},_setValueAttr:function(_98a){this.setValue(_98a);},_setDisableSpellCheckAttr:function(_98b){if(this.document){_958.set(this.document.body,"spellcheck",!_98b);}else{this.onLoadDeferred.then(lang.hitch(this,function(){_958.set(this.document.body,"spellcheck",!_98b);}));}this._set("disableSpellCheck",_98b);},onKeyPress:function(e){var c=(e.keyChar&&e.keyChar.toLowerCase())||e.keyCode,_98c=this._keyHandlers[c],args=arguments;if(_98c&&!e.altKey){_954.some(_98c,function(h){if(!(h.shift^e.shiftKey)&&!(h.ctrl^(e.ctrlKey||e.metaKey))){if(!h.handler.apply(this,args)){e.preventDefault();}return true;}},this);}if(!this._onKeyHitch){this._onKeyHitch=lang.hitch(this,"onKeyPressed");}this.defer("_onKeyHitch",1);return true;},addKeyHandler:function(key,ctrl,_98d,_98e){if(!lang.isArray(this._keyHandlers[key])){this._keyHandlers[key]=[];}this._keyHandlers[key].push({shift:_98d||false,ctrl:ctrl||false,handler:_98e});},onKeyPressed:function(){this.onDisplayChanged();},onClick:function(e){this.onDisplayChanged(e);},_onIEMouseDown:function(){if(!this.focused&&!this.disabled){this.focus();}},_onBlur:function(e){this.inherited(arguments);var _98f=this.getValue(true);if(_98f!==this.value){this.onChange(_98f);}this._set("value",_98f);},_onFocus:function(e){if(!this.disabled){if(!this._disabledOK){this.set("disabled",false);}this.inherited(arguments);}},blur:function(){if(!has("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus){this.window.document.documentElement.focus();}else{if(this.ownerDocumentBody.focus){this.ownerDocumentBody.focus();}}},focus:function(){if(!this.isLoaded){this.focusOnLoad=true;return;}if(this._cursorToStart){delete this._cursorToStart;if(this.editNode.childNodes){this.placeCursorAtStart();return;}}if(!has("ie")){_969.focus(this.iframe);}else{if(this.editNode&&this.editNode.focus){this.iframe.fireEvent("onfocus",document.createEventObject());}}},updateInterval:200,_updateTimer:null,onDisplayChanged:function(){if(this._updateTimer){this._updateTimer.remove();}this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval);},onNormalizedDisplayChanged:function(){delete this._updateTimer;},onChange:function(){},_normalizeCommand:function(cmd,_990){var _991=cmd.toLowerCase();if(_991==="formatblock"){if(has("safari")&&_990===undefined){_991="heading";}}else{if(_991==="hilitecolor"&&!has("mozilla")){_991="backcolor";}}return _991;},_qcaCache:{},queryCommandAvailable:function(_992){var ca=this._qcaCache[_992];if(ca!==undefined){return ca;}return (this._qcaCache[_992]=this._queryCommandAvailable(_992));},_queryCommandAvailable:function(_993){var ie=1;var _994=1<<1;var _995=1<<2;var _996=1<<3;function _997(_998){return {ie:Boolean(_998&ie),mozilla:Boolean(_998&_994),webkit:Boolean(_998&_995),opera:Boolean(_998&_996)};};var _999=null;switch(_993.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":_999=_997(_994|ie|_995|_996);break;case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":_999=_997(_994|ie|_996|_995);break;case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":_999=_997(ie);break;case "cut":case "copy":case "paste":_999=_997(ie|_994|_995|_996);break;case "inserttable":_999=_997(_994|ie);break;case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":_999=_997(ie|_994);break;default:return false;}return (has("ie")&&_999.ie)||(has("mozilla")&&_999.mozilla)||(has("webkit")&&_999.webkit)||(has("opera")&&_999.opera);},execCommand:function(_99a,_99b){var _99c;this.focus();_99a=this._normalizeCommand(_99a,_99b);if(_99b!==undefined){if(_99a==="heading"){throw new Error("unimplemented");}else{if((_99a==="formatblock")&&has("ie")){_99b="<"+_99b+">";}}}var _99d="_"+_99a+"Impl";if(this[_99d]){_99c=this[_99d](_99b);}else{_99b=arguments.length>1?_99b:null;if(_99b||_99a!=="createlink"){_99c=this.document.execCommand(_99a,false,_99b);}}this.onDisplayChanged();return _99c;},queryCommandEnabled:function(_99e){if(this.disabled||!this._disabledOK){return false;}_99e=this._normalizeCommand(_99e);var _99f="_"+_99e+"EnabledImpl";if(this[_99f]){return this[_99f](_99e);}else{return this._browserQueryCommandEnabled(_99e);}},queryCommandState:function(_9a0){if(this.disabled||!this._disabledOK){return false;}_9a0=this._normalizeCommand(_9a0);try{return this.document.queryCommandState(_9a0);}catch(e){return false;}},queryCommandValue:function(_9a1){if(this.disabled||!this._disabledOK){return false;}var r;_9a1=this._normalizeCommand(_9a1);if(has("ie")&&_9a1==="formatblock"){r=this._native2LocalFormatNames[this.document.queryCommandValue(_9a1)];}else{if(has("mozilla")&&_9a1==="hilitecolor"){var _9a2;try{_9a2=this.document.queryCommandValue("styleWithCSS");}catch(e){_9a2=false;}this.document.execCommand("styleWithCSS",false,true);r=this.document.queryCommandValue(_9a1);this.document.execCommand("styleWithCSS",false,_9a2);}else{r=this.document.queryCommandValue(_9a1);}}return r;},_sCall:function(name,args){return win.withGlobal(this.window,name,_966,args);},placeCursorAtStart:function(){this.focus();var _9a3=false;if(has("mozilla")){var _9a4=this.editNode.firstChild;while(_9a4){if(_9a4.nodeType===3){if(_9a4.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_9a3=true;this._sCall("selectElement",[_9a4]);break;}}else{if(_9a4.nodeType===1){_9a3=true;var tg=_9a4.tagName?_9a4.tagName.toLowerCase():"";if(/br|input|img|base|meta|area|basefont|hr|link/.test(tg)){this._sCall("selectElement",[_9a4]);}else{this._sCall("selectElementChildren",[_9a4]);}break;}}_9a4=_9a4.nextSibling;}}else{_9a3=true;this._sCall("selectElementChildren",[this.editNode]);}if(_9a3){this._sCall("collapse",[true]);}},placeCursorAtEnd:function(){this.focus();var _9a5=false;if(has("mozilla")){var last=this.editNode.lastChild;while(last){if(last.nodeType===3){if(last.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_9a5=true;this._sCall("selectElement",[last]);break;}}else{if(last.nodeType===1){_9a5=true;this._sCall("selectElement",[last.lastChild||last]);break;}}last=last.previousSibling;}}else{_9a5=true;this._sCall("selectElementChildren",[this.editNode]);}if(_9a5){this._sCall("collapse",[false]);}},getValue:function(_9a6){if(this.textarea){if(this.isClosed||!this.isLoaded){return this.textarea.value;}}return this._postFilterContent(null,_9a6);},_getValueAttr:function(){return this.getValue(true);},setValue:function(html){if(!this.isLoaded){this.onLoadDeferred.then(lang.hitch(this,function(){this.setValue(html);}));return;}this._cursorToStart=true;if(this.textarea&&(this.isClosed||!this.isLoaded)){this.textarea.value=html;}else{html=this._preFilterContent(html);var node=this.isClosed?this.domNode:this.editNode;if(html&&has("mozilla")&&html.toLowerCase()==="<p></p>"){html="<p>&#160;</p>";}if(!html&&has("webkit")){html="&#160;";}node.innerHTML=html;this._preDomFilterContent(node);}this.onDisplayChanged();this._set("value",this.getValue(true));},replaceValue:function(html){if(this.isClosed){this.setValue(html);}else{if(this.window&&this.window.getSelection&&!has("mozilla")){this.setValue(html);}else{if(this.window&&this.window.getSelection){html=this._preFilterContent(html);this.execCommand("selectall");if(!html){this._cursorToStart=true;html="&#160;";}this.execCommand("inserthtml",html);this._preDomFilterContent(this.editNode);}else{if(this.document&&this.document.selection){this.setValue(html);}}}}this._set("value",this.getValue(true));},_preFilterContent:function(html){var ec=html;_954.forEach(this.contentPreFilters,function(ef){if(ef){ec=ef(ec);}});return ec;},_preDomFilterContent:function(dom){dom=dom||this.editNode;_954.forEach(this.contentDomPreFilters,function(ef){if(ef&&lang.isFunction(ef)){ef(dom);}},this);},_postFilterContent:function(dom,_9a7){var ec;if(!lang.isString(dom)){dom=dom||this.editNode;if(this.contentDomPostFilters.length){if(_9a7){dom=lang.clone(dom);}_954.forEach(this.contentDomPostFilters,function(ef){dom=ef(dom);});}ec=_968.getChildrenHtml(dom);}else{ec=dom;}if(!lang.trim(ec.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length){ec="";}_954.forEach(this.contentPostFilters,function(ef){ec=ef(ec);});return ec;},_saveContent:function(){var _9a8=dom.byId(_96a._scopeName+"._editor.RichText.value");if(_9a8){if(_9a8.value){_9a8.value+=this._SEPARATOR;}_9a8.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(true);}},escapeXml:function(str,_9a9){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_9a9){str=str.replace(/'/gm,"&#39;");}return str;},getNodeHtml:function(node){_95e.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit/_editor/html::getNodeHtml instead",2);return _968.getNodeHtml(node);},getNodeChildrenHtml:function(dom){_95e.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2);return _968.getChildrenHtml(dom);},close:function(save){if(this.isClosed){return;}if(!arguments.length){save=true;}if(save){this._set("value",this.getValue(true));}if(this.interval){clearInterval(this.interval);}if(this._webkitListener){this.disconnect(this._webkitListener);delete this._webkitListener;}if(has("ie")){this.iframe.onfocus=null;}this.iframe._loadFunc=null;if(this._iframeRegHandle){this._iframeRegHandle.remove();delete this._iframeRegHandle;}if(this.textarea){var s=this.textarea.style;s.position="";s.left=s.top="";if(has("ie")){s.overflow=this.__overflow;this.__overflow=null;}this.textarea.value=this.value;_95a.destroy(this.domNode);this.domNode=this.textarea;}else{this.domNode.innerHTML=this.value;}delete this.iframe;_959.remove(this.domNode,this.baseClass);this.isClosed=true;this.isLoaded=false;delete this.editNode;delete this.focusNode;if(this.window&&this.window._frameElement){this.window._frameElement=null;}this.window=null;this.document=null;this.editingArea=null;this.editorObject=null;},destroy:function(){if(!this.isClosed){this.close(false);}if(this._updateTimer){this._updateTimer.remove();}this.inherited(arguments);if(_96b._globalSaveHandler){delete _96b._globalSaveHandler[this.id];}},_removeMozBogus:function(html){return html.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"");},_removeWebkitBogus:function(html){html=html.replace(/\sclass="webkit-block-placeholder"/gi,"");html=html.replace(/\sclass="apple-style-span"/gi,"");html=html.replace(/<meta charset=\"utf-8\" \/>/gi,"");return html;},_normalizeFontStyle:function(html){return html.replace(/<(\/)?strong([ \>])/gi,"<$1b$2").replace(/<(\/)?em([ \>])/gi,"<$1i$2");},_preFixUrlAttributes:function(html){return html.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2");},_browserQueryCommandEnabled:function(_9aa){if(!_9aa){return false;}var elem=has("ie")?this.document.selection.createRange():this.document;try{return elem.queryCommandEnabled(_9aa);}catch(e){return false;}},_createlinkEnabledImpl:function(){var _9ab=true;if(has("opera")){var sel=this.window.getSelection();if(sel.isCollapsed){_9ab=true;}else{_9ab=this.document.queryCommandEnabled("createlink");}}else{_9ab=this._browserQueryCommandEnabled("createlink");}return _9ab;},_unlinkEnabledImpl:function(){var _9ac=true;if(has("mozilla")||has("webkit")){_9ac=this._sCall("hasAncestorElement",["a"]);}else{_9ac=this._browserQueryCommandEnabled("unlink");}return _9ac;},_inserttableEnabledImpl:function(){var _9ad=true;if(has("mozilla")||has("webkit")){_9ad=true;}else{_9ad=this._browserQueryCommandEnabled("inserttable");}return _9ad;},_cutEnabledImpl:function(){var _9ae=true;if(has("webkit")){var sel=this.window.getSelection();if(sel){sel=sel.toString();}_9ae=!!sel;}else{_9ae=this._browserQueryCommandEnabled("cut");}return _9ae;},_copyEnabledImpl:function(){var _9af=true;if(has("webkit")){var sel=this.window.getSelection();if(sel){sel=sel.toString();}_9af=!!sel;}else{_9af=this._browserQueryCommandEnabled("copy");}return _9af;},_pasteEnabledImpl:function(){var _9b0=true;if(has("webkit")){return true;}else{_9b0=this._browserQueryCommandEnabled("paste");}return _9b0;},_inserthorizontalruleImpl:function(_9b1){if(has("ie")){return this._inserthtmlImpl("<hr>");}return this.document.execCommand("inserthorizontalrule",false,_9b1);},_unlinkImpl:function(_9b2){if((this.queryCommandEnabled("unlink"))&&(has("mozilla")||has("webkit"))){var a=this._sCall("getAncestorElement",["a"]);this._sCall("selectElement",[a]);return this.document.execCommand("unlink",false,null);}return this.document.execCommand("unlink",false,_9b2);},_hilitecolorImpl:function(_9b3){var _9b4;var _9b5=this._handleTextColorOrProperties("hilitecolor",_9b3);if(!_9b5){if(has("mozilla")){this.document.execCommand("styleWithCSS",false,true);console.log("Executing color command.");_9b4=this.document.execCommand("hilitecolor",false,_9b3);this.document.execCommand("styleWithCSS",false,false);}else{_9b4=this.document.execCommand("hilitecolor",false,_9b3);}}return _9b4;},_backcolorImpl:function(_9b6){if(has("ie")){_9b6=_9b6?_9b6:null;}var _9b7=this._handleTextColorOrProperties("backcolor",_9b6);if(!_9b7){_9b7=this.document.execCommand("backcolor",false,_9b6);}return _9b7;},_forecolorImpl:function(_9b8){if(has("ie")){_9b8=_9b8?_9b8:null;}var _9b9=false;_9b9=this._handleTextColorOrProperties("forecolor",_9b8);if(!_9b9){_9b9=this.document.execCommand("forecolor",false,_9b8);}return _9b9;},_inserthtmlImpl:function(_9ba){_9ba=this._preFilterContent(_9ba);var rv=true;if(has("ie")){var _9bb=this.document.selection.createRange();if(this.document.selection.type.toUpperCase()==="CONTROL"){var n=_9bb.item(0);while(_9bb.length){_9bb.remove(_9bb.item(0));}n.outerHTML=_9ba;}else{_9bb.pasteHTML(_9ba);}_9bb.select();}else{if(has("mozilla")&&!_9ba.length){this._sCall("remove");}else{rv=this.document.execCommand("inserthtml",false,_9ba);}}return rv;},_boldImpl:function(_9bc){var _9bd=false;if(has("ie")){this._adaptIESelection();_9bd=this._adaptIEFormatAreaAndExec("bold");}if(!_9bd){_9bd=this.document.execCommand("bold",false,_9bc);}return _9bd;},_italicImpl:function(_9be){var _9bf=false;if(has("ie")){this._adaptIESelection();_9bf=this._adaptIEFormatAreaAndExec("italic");}if(!_9bf){_9bf=this.document.execCommand("italic",false,_9be);}return _9bf;},_underlineImpl:function(_9c0){var _9c1=false;if(has("ie")){this._adaptIESelection();_9c1=this._adaptIEFormatAreaAndExec("underline");}if(!_9c1){_9c1=this.document.execCommand("underline",false,_9c0);}return _9c1;},_strikethroughImpl:function(_9c2){var _9c3=false;if(has("ie")){this._adaptIESelection();_9c3=this._adaptIEFormatAreaAndExec("strikethrough");}if(!_9c3){_9c3=this.document.execCommand("strikethrough",false,_9c2);}return _9c3;},_superscriptImpl:function(_9c4){var _9c5=false;if(has("ie")){this._adaptIESelection();_9c5=this._adaptIEFormatAreaAndExec("superscript");}if(!_9c5){_9c5=this.document.execCommand("superscript",false,_9c4);}return _9c5;},_subscriptImpl:function(_9c6){var _9c7=false;if(has("ie")){this._adaptIESelection();_9c7=this._adaptIEFormatAreaAndExec("subscript");}if(!_9c7){_9c7=this.document.execCommand("subscript",false,_9c6);}return _9c7;},_fontnameImpl:function(_9c8){var _9c9;if(has("ie")){_9c9=this._handleTextColorOrProperties("fontname",_9c8);}if(!_9c9){_9c9=this.document.execCommand("fontname",false,_9c8);}return _9c9;},_fontsizeImpl:function(_9ca){var _9cb;if(has("ie")){_9cb=this._handleTextColorOrProperties("fontsize",_9ca);}if(!_9cb){_9cb=this.document.execCommand("fontsize",false,_9ca);}return _9cb;},_insertorderedlistImpl:function(_9cc){var _9cd=false;if(has("ie")){_9cd=this._adaptIEList("insertorderedlist",_9cc);}if(!_9cd){_9cd=this.document.execCommand("insertorderedlist",false,_9cc);}return _9cd;},_insertunorderedlistImpl:function(_9ce){var _9cf=false;if(has("ie")){_9cf=this._adaptIEList("insertunorderedlist",_9ce);}if(!_9cf){_9cf=this.document.execCommand("insertunorderedlist",false,_9ce);}return _9cf;},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header);},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer);},_getNodeChildrenHeight:function(node){var h=0;if(node&&node.childNodes){var i;for(i=0;i<node.childNodes.length;i++){var size=_95b.position(node.childNodes[i]);h+=size.h;}}return h;},_isNodeEmpty:function(node,_9d0){if(node.nodeType===1){if(node.childNodes.length>0){return this._isNodeEmpty(node.childNodes[0],_9d0);}return true;}else{if(node.nodeType===3){return (node.nodeValue.substring(_9d0)==="");}}return false;},_removeStartingRangeFromRange:function(node,_9d1){if(node.nextSibling){_9d1.setStart(node.nextSibling,0);}else{var _9d2=node.parentNode;while(_9d2&&_9d2.nextSibling==null){_9d2=_9d2.parentNode;}if(_9d2){_9d1.setStart(_9d2.nextSibling,0);}}return _9d1;},_adaptIESelection:function(){var _9d3=_967.getSelection(this.window);if(_9d3&&_9d3.rangeCount&&!_9d3.isCollapsed){var _9d4=_9d3.getRangeAt(0);var _9d5=_9d4.startContainer;var _9d6=_9d4.startOffset;while(_9d5.nodeType===3&&_9d6>=_9d5.length&&_9d5.nextSibling){_9d6=_9d6-_9d5.length;_9d5=_9d5.nextSibling;}var _9d7=null;while(this._isNodeEmpty(_9d5,_9d6)&&_9d5!==_9d7){_9d7=_9d5;_9d4=this._removeStartingRangeFromRange(_9d5,_9d4);_9d5=_9d4.startContainer;_9d6=0;}_9d3.removeAllRanges();_9d3.addRange(_9d4);}},_adaptIEFormatAreaAndExec:function(_9d8){var _9d9=_967.getSelection(this.window);var doc=this.document;var rs,ret,_9da,txt,_9db,_9dc,_9dd,_9de;if(_9d8&&_9d9&&_9d9.isCollapsed){var _9df=this.queryCommandValue(_9d8);if(_9df){var _9e0=this._tagNamesForCommand(_9d8);_9da=_9d9.getRangeAt(0);var fs=_9da.startContainer;if(fs.nodeType===3){var _9e1=_9da.endOffset;if(fs.length<_9e1){ret=this._adjustNodeAndOffset(rs,_9e1);fs=ret.node;_9e1=ret.offset;}}var _9e2;while(fs&&fs!==this.editNode){var _9e3=fs.tagName?fs.tagName.toLowerCase():"";if(_954.indexOf(_9e0,_9e3)>-1){_9e2=fs;break;}fs=fs.parentNode;}if(_9e2){rs=_9da.startContainer;var _9e4=doc.createElement(_9e2.tagName);_95a.place(_9e4,_9e2,"after");if(rs&&rs.nodeType===3){var _9e5,_9e6;var _9e7=_9da.endOffset;if(rs.length<_9e7){ret=this._adjustNodeAndOffset(rs,_9e7);rs=ret.node;_9e7=ret.offset;}txt=rs.nodeValue;_9db=doc.createTextNode(txt.substring(0,_9e7));var _9e8=txt.substring(_9e7,txt.length);if(_9e8){_9dc=doc.createTextNode(_9e8);}_95a.place(_9db,rs,"before");if(_9dc){_9dd=doc.createElement("span");_9dd.className="ieFormatBreakerSpan";_95a.place(_9dd,rs,"after");_95a.place(_9dc,_9dd,"after");_9dc=_9dd;}_95a.destroy(rs);var _9e9=_9db.parentNode;var _9ea=[];var _9eb;while(_9e9!==_9e2){var tg=_9e9.tagName;_9eb={tagName:tg};_9ea.push(_9eb);var _9ec=doc.createElement(tg);if(_9e9.style){if(_9ec.style){if(_9e9.style.cssText){_9ec.style.cssText=_9e9.style.cssText;_9eb.cssText=_9e9.style.cssText;}}}if(_9e9.tagName==="FONT"){if(_9e9.color){_9ec.color=_9e9.color;_9eb.color=_9e9.color;}if(_9e9.face){_9ec.face=_9e9.face;_9eb.face=_9e9.face;}if(_9e9.size){_9ec.size=_9e9.size;_9eb.size=_9e9.size;}}if(_9e9.className){_9ec.className=_9e9.className;_9eb.className=_9e9.className;}if(_9dc){_9e5=_9dc;while(_9e5){_9e6=_9e5.nextSibling;_9ec.appendChild(_9e5);_9e5=_9e6;}}if(_9ec.tagName==_9e9.tagName){_9dd=doc.createElement("span");_9dd.className="ieFormatBreakerSpan";_95a.place(_9dd,_9e9,"after");_95a.place(_9ec,_9dd,"after");}else{_95a.place(_9ec,_9e9,"after");}_9db=_9e9;_9dc=_9ec;_9e9=_9e9.parentNode;}if(_9dc){_9e5=_9dc;if(_9e5.nodeType===1||(_9e5.nodeType===3&&_9e5.nodeValue)){_9e4.innerHTML="";}while(_9e5){_9e6=_9e5.nextSibling;_9e4.appendChild(_9e5);_9e5=_9e6;}}var _9ed;if(_9ea.length){_9eb=_9ea.pop();var _9ee=doc.createElement(_9eb.tagName);if(_9eb.cssText&&_9ee.style){_9ee.style.cssText=_9eb.cssText;}if(_9eb.className){_9ee.className=_9eb.className;}if(_9eb.tagName==="FONT"){if(_9eb.color){_9ee.color=_9eb.color;}if(_9eb.face){_9ee.face=_9eb.face;}if(_9eb.size){_9ee.size=_9eb.size;}}_95a.place(_9ee,_9e4,"before");while(_9ea.length){_9eb=_9ea.pop();var _9ef=doc.createElement(_9eb.tagName);if(_9eb.cssText&&_9ef.style){_9ef.style.cssText=_9eb.cssText;}if(_9eb.className){_9ef.className=_9eb.className;}if(_9eb.tagName==="FONT"){if(_9eb.color){_9ef.color=_9eb.color;}if(_9eb.face){_9ef.face=_9eb.face;}if(_9eb.size){_9ef.size=_9eb.size;}}_9ee.appendChild(_9ef);_9ee=_9ef;}_9de=doc.createTextNode(".");_9dd.appendChild(_9de);_9ee.appendChild(_9de);_9ed=_967.create(this.window);_9ed.setStart(_9de,0);_9ed.setEnd(_9de,_9de.length);_9d9.removeAllRanges();_9d9.addRange(_9ed);this._sCall("collapse",[false]);_9de.parentNode.innerHTML="";}else{_9dd=doc.createElement("span");_9dd.className="ieFormatBreakerSpan";_9de=doc.createTextNode(".");_9dd.appendChild(_9de);_95a.place(_9dd,_9e4,"before");_9ed=_967.create(this.window);_9ed.setStart(_9de,0);_9ed.setEnd(_9de,_9de.length);_9d9.removeAllRanges();_9d9.addRange(_9ed);this._sCall("collapse",[false]);_9de.parentNode.innerHTML="";}if(!_9e4.firstChild){_95a.destroy(_9e4);}return true;}}return false;}else{_9da=_9d9.getRangeAt(0);rs=_9da.startContainer;if(rs&&rs.nodeType===3){var _9e1=_9da.startOffset;if(rs.length<_9e1){ret=this._adjustNodeAndOffset(rs,_9e1);rs=ret.node;_9e1=ret.offset;}txt=rs.nodeValue;_9db=doc.createTextNode(txt.substring(0,_9e1));var _9e8=txt.substring(_9e1);if(_9e8!==""){_9dc=doc.createTextNode(txt.substring(_9e1));}_9dd=doc.createElement("span");_9de=doc.createTextNode(".");_9dd.appendChild(_9de);if(_9db.length){_95a.place(_9db,rs,"after");}else{_9db=rs;}_95a.place(_9dd,_9db,"after");if(_9dc){_95a.place(_9dc,_9dd,"after");}_95a.destroy(rs);var _9ed=_967.create(this.window);_9ed.setStart(_9de,0);_9ed.setEnd(_9de,_9de.length);_9d9.removeAllRanges();_9d9.addRange(_9ed);doc.execCommand(_9d8);_95a.place(_9dd.firstChild,_9dd,"before");_95a.destroy(_9dd);_9ed.setStart(_9de,0);_9ed.setEnd(_9de,_9de.length);_9d9.removeAllRanges();_9d9.addRange(_9ed);this._sCall("collapse",[false]);_9de.parentNode.innerHTML="";return true;}}}else{return false;}},_adaptIEList:function(_9f0){var _9f1=_967.getSelection(this.window);if(_9f1.isCollapsed){if(_9f1.rangeCount&&!this.queryCommandValue(_9f0)){var _9f2=_9f1.getRangeAt(0);var sc=_9f2.startContainer;if(sc&&sc.nodeType==3){if(!_9f2.startOffset){var _9f3="ul";if(_9f0==="insertorderedlist"){_9f3="ol";}var list=this.document.createElement(_9f3);var li=_95a.create("li",null,list);_95a.place(list,sc,"before");li.appendChild(sc);_95a.create("br",null,list,"after");var _9f4=_967.create(this.window);_9f4.setStart(sc,0);_9f4.setEnd(sc,sc.length);_9f1.removeAllRanges();_9f1.addRange(_9f4);this._sCall("collapse",[true]);return true;}}}}return false;},_handleTextColorOrProperties:function(_9f5,_9f6){var _9f7=_967.getSelection(this.window);var doc=this.document;var rs,ret,_9f8,txt,_9f9,_9fa,_9fb,_9fc;_9f6=_9f6||null;if(_9f5&&_9f7&&_9f7.isCollapsed){if(_9f7.rangeCount){_9f8=_9f7.getRangeAt(0);rs=_9f8.startContainer;if(rs&&rs.nodeType===3){var _9fd=_9f8.startOffset;if(rs.length<_9fd){ret=this._adjustNodeAndOffset(rs,_9fd);rs=ret.node;_9fd=ret.offset;}txt=rs.nodeValue;_9f9=doc.createTextNode(txt.substring(0,_9fd));var _9fe=txt.substring(_9fd);if(_9fe!==""){_9fa=doc.createTextNode(txt.substring(_9fd));}_9fb=doc.createElement("span");_9fc=doc.createTextNode(".");_9fb.appendChild(_9fc);var _9ff=doc.createElement("span");_9fb.appendChild(_9ff);if(_9f9.length){_95a.place(_9f9,rs,"after");}else{_9f9=rs;}_95a.place(_9fb,_9f9,"after");if(_9fa){_95a.place(_9fa,_9fb,"after");}_95a.destroy(rs);var _a00=_967.create(this.window);_a00.setStart(_9fc,0);_a00.setEnd(_9fc,_9fc.length);_9f7.removeAllRanges();_9f7.addRange(_a00);if(has("webkit")){var _a01="color";if(_9f5==="hilitecolor"||_9f5==="backcolor"){_a01="backgroundColor";}_95c.set(_9fb,_a01,_9f6);this._sCall("remove",[]);_95a.destroy(_9ff);_9fb.innerHTML="&#160;";this._sCall("selectElement",[_9fb]);this.focus();}else{this.execCommand(_9f5,_9f6);_95a.place(_9fb.firstChild,_9fb,"before");_95a.destroy(_9fb);_a00.setStart(_9fc,0);_a00.setEnd(_9fc,_9fc.length);_9f7.removeAllRanges();_9f7.addRange(_a00);this._sCall("collapse",[false]);_9fc.parentNode.removeChild(_9fc);}return true;}}}return false;},_adjustNodeAndOffset:function(node,_a02){while(node.length<_a02&&node.nextSibling&&node.nextSibling.nodeType===3){_a02=_a02-node.length;node=node.nextSibling;}return {"node":node,"offset":_a02};},_tagNamesForCommand:function(_a03){if(_a03==="bold"){return ["b","strong"];}else{if(_a03==="italic"){return ["i","em"];}else{if(_a03==="strikethrough"){return ["s","strike"];}else{if(_a03==="superscript"){return ["sup"];}else{if(_a03==="subscript"){return ["sub"];}else{if(_a03==="underline"){return ["u"];}}}}}}return [];},_stripBreakerNodes:function(node){if(!this.isLoaded){return;}_95f(".ieFormatBreakerSpan",node).forEach(function(b){while(b.firstChild){_95a.place(b.firstChild,b,"before");}_95a.destroy(b);});return node;}});return _96b;});},"esri/tasks/AreasAndLengthsParameters":function(){define("esri/tasks/AreasAndLengthsParameters",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel"],function(_a04,lang,_a05,_a06,has,_a07){var _a08=_a04(null,{declaredClass:"esri.tasks.AreasAndLengthsParameters",polygons:null,lengthUnit:null,areaUnit:null,calculationType:null,toJson:function(){var _a09=_a05.map(this.polygons,function(geom){return geom.toJson();});var json={};json.polygons=_a06.toJson(_a09);var _a0a=this.polygons[0].spatialReference;json.sr=_a0a.wkid?_a0a.wkid:_a06.toJson(_a0a.toJson());if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.areaUnit){if(lang.isString(this.areaUnit)){json.areaUnit=_a06.toJson({"areaUnit":this.areaUnit});}else{json.areaUnit=this.areaUnit;}}if(this.calculationType){json.calculationType=this.calculationType;}return json;}});if(has("extend-esri")){lang.setObject("tasks.AreasAndLengthsParameters",_a08,_a07);}return _a08;});},"dojo/dnd/Moveable":function(){define(["../_base/array","../_base/declare","../_base/event","../_base/lang","../dom","../dom-class","../Evented","../on","../topic","../touch","./common","./Mover","../_base/window"],function(_a0b,_a0c,_a0d,lang,dom,_a0e,_a0f,on,_a10,_a11,dnd,_a12,win){var _a13=_a0c("dojo.dnd.Moveable",[_a0f],{handle:"",delay:0,skip:false,constructor:function(node,_a14){this.node=dom.byId(node);if(!_a14){_a14={};}this.handle=_a14.handle?dom.byId(_a14.handle):null;if(!this.handle){this.handle=this.node;}this.delay=_a14.delay>0?_a14.delay:0;this.skip=_a14.skip;this.mover=_a14.mover?_a14.mover:_a12;this.events=[on(this.handle,_a11.press,lang.hitch(this,"onMouseDown")),on(this.handle,"dragstart",lang.hitch(this,"onSelectStart")),on(this.handle,"selectstart",lang.hitch(this,"onSelectStart"))];},markupFactory:function(_a15,node,Ctor){return new Ctor(node,_a15);},destroy:function(){_a0b.forEach(this.events,function(_a16){_a16.remove();});this.events=this.node=this.handle=null;},onMouseDown:function(e){if(this.skip&&dnd.isFormElement(e)){return;}if(this.delay){this.events.push(on(this.handle,_a11.move,lang.hitch(this,"onMouseMove")),on(this.handle,_a11.release,lang.hitch(this,"onMouseUp")));this._lastX=e.pageX;this._lastY=e.pageY;}else{this.onDragDetected(e);}_a0d.stop(e);},onMouseMove:function(e){if(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay){this.onMouseUp(e);this.onDragDetected(e);}_a0d.stop(e);},onMouseUp:function(e){for(var i=0;i<2;++i){this.events.pop().remove();}_a0d.stop(e);},onSelectStart:function(e){if(!this.skip||!dnd.isFormElement(e)){_a0d.stop(e);}},onDragDetected:function(e){new this.mover(this.node,e,this);},onMoveStart:function(_a17){_a10.publish("/dnd/move/start",_a17);_a0e.add(win.body(),"dojoMove");_a0e.add(this.node,"dojoMoveItem");},onMoveStop:function(_a18){_a10.publish("/dnd/move/stop",_a18);_a0e.remove(win.body(),"dojoMove");_a0e.remove(this.node,"dojoMoveItem");},onFirstMove:function(){},onMove:function(_a19,_a1a){this.onMoving(_a19,_a1a);var s=_a19.node.style;s.left=_a1a.l+"px";s.top=_a1a.t+"px";this.onMoved(_a19,_a1a);},onMoving:function(){},onMoved:function(){}});return _a13;});},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(_a1b){return function(_a1c,_a1d){switch(typeof _a1c){default:throw new Error("Can not query with a "+typeof _a1c);case "object":case "undefined":var _a1e=_a1c;_a1c=function(_a1f){for(var key in _a1e){var _a20=_a1e[key];if(_a20&&_a20.test){if(!_a20.test(_a1f[key],_a1f)){return false;}}else{if(_a20!=_a1f[key]){return false;}}}return true;};break;case "string":if(!this[_a1c]){throw new Error("No filter function "+_a1c+" was found in store");}_a1c=this[_a1c];case "function":}function _a21(_a22){var _a23=_a1b.filter(_a22,_a1c);var _a24=_a1d&&_a1d.sort;if(_a24){_a23.sort(typeof _a24=="function"?_a24:function(a,b){for(var sort,i=0;sort=_a24[i];i++){var _a25=a[sort.attribute];var _a26=b[sort.attribute];if(_a25!=_a26){return !!sort.descending==(_a25==null||_a25>_a26)?-1:1;}}return 0;});}if(_a1d&&(_a1d.start||_a1d.count)){var _a27=_a23.length;_a23=_a23.slice(_a1d.start||0,(_a1d.start||0)+(_a1d.count||Infinity));_a23.total=_a27;}return _a23;};_a21.matches=_a1c;return _a21;};});},"dojox/grid/_View":function(){require({cache:{"url:dojox/grid/resources/View.html":"<div class=\"dojoxGridView\" role=\"presentation\">\n\t<div class=\"dojoxGridHeader\" dojoAttachPoint=\"headerNode\" role=\"presentation\">\n\t\t<div dojoAttachPoint=\"headerNodeContainer\" style=\"width:9000em\" role=\"presentation\">\n\t\t\t<div dojoAttachPoint=\"headerContentNode\" role=\"row\"></div>\n\t\t</div>\n\t</div>\n\t<input type=\"checkbox\" class=\"dojoxGridHiddenFocus\" dojoAttachPoint=\"hiddenFocusNode\" role=\"presentation\" />\n\t<input type=\"checkbox\" class=\"dojoxGridHiddenFocus\" role=\"presentation\" />\n\t<div class=\"dojoxGridScrollbox\" dojoAttachPoint=\"scrollboxNode\" role=\"presentation\">\n\t\t<div class=\"dojoxGridContent\" dojoAttachPoint=\"contentNode\" hidefocus=\"hidefocus\" role=\"presentation\"></div>\n\t</div>\n</div>\n"}});define("dojox/grid/_View",["dojo","dijit/registry","../main","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/connect","dojo/_base/sniff","dojo/query","dojo/_base/window","dojo/text!./resources/View.html","dojo/dnd/Source","dijit/_Widget","dijit/_TemplatedMixin","dojox/html/metrics","./util","dojo/_base/html","./_Builder","dojo/dnd/Avatar","dojo/dnd/Manager"],function(dojo,_a28,_a29,_a2a,_a2b,lang,_a2c,has,_a2d,win,_a2e,_a2f,_a30,_a31,_a32,util,html,_a33,_a34,_a35){var _a36=function(_a37,_a38){return _a37.style.cssText==undefined?_a37.getAttribute("style"):_a37.style.cssText;};var _a39=_a2a("dojox.grid._View",[_a30,_a31],{defaultWidth:"18em",viewWidth:"",templateString:_a2e,classTag:"dojoxGrid",marginBottom:0,rowPad:2,_togglingColumn:-1,_headerBuilderClass:_a33._HeaderBuilder,_contentBuilderClass:_a33._ContentBuilder,postMixInProperties:function(){this.rowNodes={};},postCreate:function(){this.connect(this.scrollboxNode,"onscroll","doscroll");util.funnelEvents(this.contentNode,this,"doContentEvent",["mouseover","mouseout","click","dblclick","contextmenu","mousedown"]);util.funnelEvents(this.headerNode,this,"doHeaderEvent",["dblclick","mouseover","mouseout","mousemove","mousedown","click","contextmenu"]);this.content=new this._contentBuilderClass(this);this.header=new this._headerBuilderClass(this);if(!this.grid.isLeftToRight()){this.headerNodeContainer.style.width="";}},destroy:function(){html.destroy(this.headerNode);delete this.headerNode;for(var i in this.rowNodes){this._cleanupRowWidgets(this.rowNodes[i]);html.destroy(this.rowNodes[i]);}this.rowNodes={};if(this.source){this.source.destroy();}this.inherited(arguments);},focus:function(){if(has("ie")||has("webkit")||has("opera")){this.hiddenFocusNode.focus();}else{this.scrollboxNode.focus();}},setStructure:function(_a3a){var vs=(this.structure=_a3a);if(vs.width&&!isNaN(vs.width)){this.viewWidth=vs.width+"em";}else{this.viewWidth=vs.width||(vs.noscroll?"auto":this.viewWidth);}this._onBeforeRow=vs.onBeforeRow||function(){};this._onAfterRow=vs.onAfterRow||function(){};this.noscroll=vs.noscroll;if(this.noscroll){this.scrollboxNode.style.overflow="hidden";}this.simpleStructure=Boolean(vs.cells.length==1);this.testFlexCells();this.updateStructure();},_cleanupRowWidgets:function(_a3b){if(_a3b){_a2b.forEach(_a2d("[widgetId]",_a3b).map(_a28.byNode),function(w){if(w._destroyOnRemove){w.destroy();delete w;}else{if(w.domNode&&w.domNode.parentNode){w.domNode.parentNode.removeChild(w.domNode);}}});}},onBeforeRow:function(_a3c,_a3d){this._onBeforeRow(_a3c,_a3d);if(_a3c>=0){this._cleanupRowWidgets(this.getRowNode(_a3c));}},onAfterRow:function(_a3e,_a3f,_a40){this._onAfterRow(_a3e,_a3f,_a40);var g=this.grid;_a2b.forEach(_a2d(".dojoxGridStubNode",_a40),function(n){if(n&&n.parentNode){var lw=n.getAttribute("linkWidget");var _a41=window.parseInt(html.attr(n,"cellIdx"),10);var _a42=g.getCell(_a41);var w=_a28.byId(lw);if(w){n.parentNode.replaceChild(w.domNode,n);if(!w._started){w.startup();}dojo.destroy(n);}else{n.innerHTML="";}}},this);},testFlexCells:function(){this.flexCells=false;for(var j=0,row;(row=this.structure.cells[j]);j++){for(var i=0,cell;(cell=row[i]);i++){cell.view=this;this.flexCells=this.flexCells||cell.isFlex();}}return this.flexCells;},updateStructure:function(){this.header.update();this.content.update();},getScrollbarWidth:function(){var _a43=this.hasVScrollbar();var _a44=html.style(this.scrollboxNode,"overflow");if(this.noscroll||!_a44||_a44=="hidden"){_a43=false;}else{if(_a44=="scroll"){_a43=true;}}return (_a43?_a32.getScrollbar().w:0);},getColumnsWidth:function(){var h=this.headerContentNode;return h&&h.firstChild?(h.firstChild.offsetWidth||html.style(h.firstChild,"width")):0;},setColumnsWidth:function(_a45){this.headerContentNode.firstChild.style.width=_a45+"px";if(this.viewWidth){this.viewWidth=_a45+"px";}},getWidth:function(){return this.viewWidth||(this.getColumnsWidth()+this.getScrollbarWidth())+"px";},getContentWidth:function(){return Math.max(0,html._getContentBox(this.domNode).w-this.getScrollbarWidth())+"px";},render:function(){this.scrollboxNode.style.height="";this.renderHeader();if(this._togglingColumn>=0){this.setColumnsWidth(this.getColumnsWidth()-this._togglingColumn);this._togglingColumn=-1;}var _a46=this.grid.layout.cells;var _a47=lang.hitch(this,function(node,_a48){!this.grid.isLeftToRight()&&(_a48=!_a48);var inc=_a48?-1:1;var idx=this.header.getCellNodeIndex(node)+inc;var cell=_a46[idx];while(cell&&cell.getHeaderNode()&&cell.getHeaderNode().style.display=="none"){idx+=inc;cell=_a46[idx];}if(cell){return cell.getHeaderNode();}return null;});if(this.grid.columnReordering&&this.simpleStructure){if(this.source){this.source.destroy();}var _a49="dojoxGrid_bottomMarker";var _a4a="dojoxGrid_topMarker";if(this.bottomMarker){html.destroy(this.bottomMarker);}this.bottomMarker=html.byId(_a49);if(this.topMarker){html.destroy(this.topMarker);}this.topMarker=html.byId(_a4a);if(!this.bottomMarker){this.bottomMarker=html.create("div",{"id":_a49,"class":"dojoxGridColPlaceBottom"},win.body());this._hide(this.bottomMarker);this.topMarker=html.create("div",{"id":_a4a,"class":"dojoxGridColPlaceTop"},win.body());this._hide(this.topMarker);}this.arrowDim=html.contentBox(this.bottomMarker);var _a4b=html.contentBox(this.headerContentNode.firstChild.rows[0]).h;this.source=new _a2f(this.headerContentNode.firstChild.rows[0],{horizontal:true,accept:["gridColumn_"+this.grid.id],viewIndex:this.index,generateText:false,onMouseDown:lang.hitch(this,function(e){this.header.decorateEvent(e);if((this.header.overRightResizeArea(e)||this.header.overLeftResizeArea(e))&&this.header.canResize(e)&&!this.header.moveable){this.header.beginColumnResize(e);}else{if(this.grid.headerMenu){this.grid.headerMenu.onCancel(true);}if(e.button===(has("ie")<9?1:0)){_a2f.prototype.onMouseDown.call(this.source,e);}}}),onMouseOver:lang.hitch(this,function(e){var src=this.source;if(src._getChildByEvent(e)){_a2f.prototype.onMouseOver.apply(src,arguments);}}),_markTargetAnchor:lang.hitch(this,function(_a4c){var src=this.source;if(src.current==src.targetAnchor&&src.before==_a4c){return;}if(src.targetAnchor&&_a47(src.targetAnchor,src.before)){src._removeItemClass(_a47(src.targetAnchor,src.before),src.before?"After":"Before");}_a2f.prototype._markTargetAnchor.call(src,_a4c);var _a4d=_a4c?src.targetAnchor:_a47(src.targetAnchor,src.before);var _a4e=0;if(!_a4d){_a4d=src.targetAnchor;_a4e=html.contentBox(_a4d).w+this.arrowDim.w/2+2;}var pos=html.position(_a4d,true);var left=Math.floor(pos.x-this.arrowDim.w/2+_a4e);html.style(this.bottomMarker,"visibility","visible");html.style(this.topMarker,"visibility","visible");html.style(this.bottomMarker,{"left":left+"px","top":(_a4b+pos.y)+"px"});html.style(this.topMarker,{"left":left+"px","top":(pos.y-this.arrowDim.h)+"px"});if(src.targetAnchor&&_a47(src.targetAnchor,src.before)){src._addItemClass(_a47(src.targetAnchor,src.before),src.before?"After":"Before");}}),_unmarkTargetAnchor:lang.hitch(this,function(){var src=this.source;if(!src.targetAnchor){return;}if(src.targetAnchor&&_a47(src.targetAnchor,src.before)){src._removeItemClass(_a47(src.targetAnchor,src.before),src.before?"After":"Before");}this._hide(this.bottomMarker);this._hide(this.topMarker);_a2f.prototype._unmarkTargetAnchor.call(src);}),destroy:lang.hitch(this,function(){_a2c.disconnect(this._source_conn);_a2c.unsubscribe(this._source_sub);_a2f.prototype.destroy.call(this.source);if(this.bottomMarker){html.destroy(this.bottomMarker);delete this.bottomMarker;}if(this.topMarker){html.destroy(this.topMarker);delete this.topMarker;}}),onDndCancel:lang.hitch(this,function(){_a2f.prototype.onDndCancel.call(this.source);this._hide(this.bottomMarker);this._hide(this.topMarker);})});this._source_conn=_a2c.connect(this.source,"onDndDrop",this,"_onDndDrop");this._source_sub=_a2c.subscribe("/dnd/drop/before",this,"_onDndDropBefore");this.source.startup();}},_hide:function(node){html.style(node,{top:"-10000px","visibility":"hidden"});},_onDndDropBefore:function(_a4f,_a50,copy){if(_a35.manager().target!==this.source){return;}this.source._targetNode=this.source.targetAnchor;this.source._beforeTarget=this.source.before;var _a51=this.grid.views.views;var _a52=_a51[_a4f.viewIndex];var _a53=_a51[this.index];if(_a53!=_a52){_a52.convertColPctToFixed();_a53.convertColPctToFixed();}},_onDndDrop:function(_a54,_a55,copy){if(_a35.manager().target!==this.source){if(_a35.manager().source===this.source){this._removingColumn=true;}return;}this._hide(this.bottomMarker);this._hide(this.topMarker);var _a56=function(n){return n?html.attr(n,"idx"):null;};var w=html.marginBox(_a55[0]).w;if(_a54.viewIndex!==this.index){var _a57=this.grid.views.views;var _a58=_a57[_a54.viewIndex];var _a59=_a57[this.index];if(_a58.viewWidth&&_a58.viewWidth!="auto"){_a58.setColumnsWidth(_a58.getColumnsWidth()-w);}if(_a59.viewWidth&&_a59.viewWidth!="auto"){_a59.setColumnsWidth(_a59.getColumnsWidth());}}var stn=this.source._targetNode;var stb=this.source._beforeTarget;!this.grid.isLeftToRight()&&(stb=!stb);var _a5a=this.grid.layout;var idx=this.index;delete this.source._targetNode;delete this.source._beforeTarget;_a5a.moveColumn(_a54.viewIndex,idx,_a56(_a55[0]),_a56(stn),stb);},renderHeader:function(){this.headerContentNode.innerHTML=this.header.generateHtml(this._getHeaderContent);if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth;}util.fire(this,"onAfterRow",[-1,this.structure.cells,this.headerContentNode]);},_getHeaderContent:function(_a5b){var n=_a5b.name||_a5b.grid.getCellName(_a5b);if(/^\s+$/.test(n)){n="&nbsp;";}var ret=["<div class=\"dojoxGridSortNode"];if(_a5b.index!=_a5b.grid.getSortIndex()){ret.push("\">");}else{ret=ret.concat([" ",_a5b.grid.sortInfo>0?"dojoxGridSortUp":"dojoxGridSortDown","\"><div class=\"dojoxGridArrowButtonChar\">",_a5b.grid.sortInfo>0?"&#9650;":"&#9660;","</div><div class=\"dojoxGridArrowButtonNode\" role=\"presentation\"></div>","<div class=\"dojoxGridColCaption\">"]);}ret=ret.concat([n,"</div></div>"]);return ret.join("");},resize:function(){this.adaptHeight();this.adaptWidth();},hasHScrollbar:function(_a5c){var _a5d=this._hasHScroll||false;if(this._hasHScroll==undefined||_a5c){if(this.noscroll){this._hasHScroll=false;}else{var _a5e=html.style(this.scrollboxNode,"overflow");if(_a5e=="hidden"){this._hasHScroll=false;}else{if(_a5e=="scroll"){this._hasHScroll=true;}else{this._hasHScroll=(this.scrollboxNode.offsetWidth-this.getScrollbarWidth()<this.contentNode.offsetWidth);}}}}if(_a5d!==this._hasHScroll){this.grid.update();}return this._hasHScroll;},hasVScrollbar:function(_a5f){var _a60=this._hasVScroll||false;if(this._hasVScroll==undefined||_a5f){if(this.noscroll){this._hasVScroll=false;}else{var _a61=html.style(this.scrollboxNode,"overflow");if(_a61=="hidden"){this._hasVScroll=false;}else{if(_a61=="scroll"){this._hasVScroll=true;}else{this._hasVScroll=(this.scrollboxNode.scrollHeight>this.scrollboxNode.clientHeight);}}}}if(_a60!==this._hasVScroll){this.grid.update();}return this._hasVScroll;},convertColPctToFixed:function(){var _a62=false;this.grid.initialWidth="";var _a63=_a2d("th",this.headerContentNode);var _a64=_a2b.map(_a63,function(c,vIdx){var w=c.style.width;html.attr(c,"vIdx",vIdx);if(w&&w.slice(-1)=="%"){_a62=true;}else{if(w&&w.slice(-2)=="px"){return window.parseInt(w,10);}}return html.contentBox(c).w;});if(_a62){_a2b.forEach(this.grid.layout.cells,function(cell,idx){if(cell.view==this){var _a65=cell.view.getHeaderCellNode(cell.index);if(_a65&&html.hasAttr(_a65,"vIdx")){var vIdx=window.parseInt(html.attr(_a65,"vIdx"));this.setColWidth(idx,_a64[vIdx]);html.removeAttr(_a65,"vIdx");}}},this);return true;}return false;},adaptHeight:function(_a66){if(!this.grid._autoHeight){var h=(this.domNode.style.height&&parseInt(this.domNode.style.height.replace(/px/,""),10))||this.domNode.clientHeight;var self=this;var _a67=function(){var v;for(var i in self.grid.views.views){v=self.grid.views.views[i];if(v!==self&&v.hasHScrollbar()){return true;}}return false;};if(_a66||(this.noscroll&&_a67())){h-=_a32.getScrollbar().h;}util.setStyleHeightPx(this.scrollboxNode,h);}this.hasVScrollbar(true);},adaptWidth:function(){if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth;}var w=this.scrollboxNode.offsetWidth-this.getScrollbarWidth();if(!this._removingColumn){w=Math.max(w,this.getColumnsWidth())+"px";}else{w=Math.min(w,this.getColumnsWidth())+"px";this._removingColumn=false;}var cn=this.contentNode;cn.style.width=w;this.hasHScrollbar(true);},setSize:function(w,h){var ds=this.domNode.style;var hs=this.headerNode.style;if(w){ds.width=w;hs.width=w;}ds.height=(h>=0?h+"px":"");},renderRow:function(_a68){var _a69=this.createRowNode(_a68);this.buildRow(_a68,_a69);return _a69;},createRowNode:function(_a6a){var node=document.createElement("div");node.className=this.classTag+"Row";if(this instanceof _a29.grid._RowSelector){html.attr(node,"role","presentation");}else{html.attr(node,"role","row");if(this.grid.selectionMode!="none"){node.setAttribute("aria-selected","false");}}node[util.gridViewTag]=this.id;node[util.rowIndexTag]=_a6a;this.rowNodes[_a6a]=node;return node;},buildRow:function(_a6b,_a6c){this.buildRowContent(_a6b,_a6c);this.styleRow(_a6b,_a6c);},buildRowContent:function(_a6d,_a6e){_a6e.innerHTML=this.content.generateHtml(_a6d,_a6d);if(this.flexCells&&this.contentWidth){_a6e.firstChild.style.width=this.contentWidth;}util.fire(this,"onAfterRow",[_a6d,this.structure.cells,_a6e]);},rowRemoved:function(_a6f){if(_a6f>=0){this._cleanupRowWidgets(this.getRowNode(_a6f));}this.grid.edit.save(this,_a6f);delete this.rowNodes[_a6f];},getRowNode:function(_a70){return this.rowNodes[_a70];},getCellNode:function(_a71,_a72){var row=this.getRowNode(_a71);if(row){return this.content.getCellNode(row,_a72);}},getHeaderCellNode:function(_a73){if(this.headerContentNode){return this.header.getCellNode(this.headerContentNode,_a73);}},styleRow:function(_a74,_a75){_a75._style=_a36(_a75);this.styleRowNode(_a74,_a75);},styleRowNode:function(_a76,_a77){if(_a77){this.doStyleRowNode(_a76,_a77);}},doStyleRowNode:function(_a78,_a79){this.grid.styleRowNode(_a78,_a79);},updateRow:function(_a7a){var _a7b=this.getRowNode(_a7a);if(_a7b){_a7b.style.height="";this.buildRow(_a7a,_a7b);}return _a7b;},updateRowStyles:function(_a7c){this.styleRowNode(_a7c,this.getRowNode(_a7c));},lastTop:0,firstScroll:0,_nativeScroll:false,doscroll:function(_a7d){if(has("ff")>=13){this._nativeScroll=true;}var _a7e=this.grid.isLeftToRight();if(this.firstScroll<2){if((!_a7e&&this.firstScroll==1)||(_a7e&&this.firstScroll===0)){var s=html.marginBox(this.headerNodeContainer);if(has("ie")){this.headerNodeContainer.style.width=s.w+this.getScrollbarWidth()+"px";}else{if(has("mozilla")){this.headerNodeContainer.style.width=s.w-this.getScrollbarWidth()+"px";this.scrollboxNode.scrollLeft=_a7e?this.scrollboxNode.clientWidth-this.scrollboxNode.scrollWidth:this.scrollboxNode.scrollWidth-this.scrollboxNode.clientWidth;}}}this.firstScroll++;}this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;var top=this.scrollboxNode.scrollTop;if(top!==this.lastTop){this.grid.scrollTo(top);}this._nativeScroll=false;},setScrollTop:function(_a7f){this.lastTop=_a7f;if(!this._nativeScroll){this.scrollboxNode.scrollTop=_a7f;}return this.scrollboxNode.scrollTop;},doContentEvent:function(e){if(this.content.decorateEvent(e)){this.grid.onContentEvent(e);}},doHeaderEvent:function(e){if(this.header.decorateEvent(e)){this.grid.onHeaderEvent(e);}},dispatchContentEvent:function(e){return this.content.dispatchEvent(e);},dispatchHeaderEvent:function(e){return this.header.dispatchEvent(e);},setColWidth:function(_a80,_a81){this.grid.setCellWidth(_a80,_a81+"px");},update:function(){if(!this.domNode){return;}this.content.update();this.grid.update();var left=this.scrollboxNode.scrollLeft;this.scrollboxNode.scrollLeft=left;this.headerNode.scrollLeft=left;}});var _a82=_a2a("dojox.grid._GridAvatar",_a34,{construct:function(){var dd=win.doc;var a=dd.createElement("table");a.cellPadding=a.cellSpacing="0";a.className="dojoxGridDndAvatar";a.style.position="absolute";a.style.zIndex=1999;a.style.margin="0px";var b=dd.createElement("tbody");var tr=dd.createElement("tr");var td=dd.createElement("td");var img=dd.createElement("td");tr.className="dojoxGridDndAvatarItem";img.className="dojoxGridDndAvatarItemImage";img.style.width="16px";var _a83=this.manager.source,node;if(_a83.creator){node=_a83._normalizedCreator(_a83.getItem(this.manager.nodes[0].id).data,"avatar").node;}else{node=this.manager.nodes[0].cloneNode(true);var _a84,_a85;if(node.tagName.toLowerCase()=="tr"){_a84=dd.createElement("table");_a85=dd.createElement("tbody");_a85.appendChild(node);_a84.appendChild(_a85);node=_a84;}else{if(node.tagName.toLowerCase()=="th"){_a84=dd.createElement("table");_a85=dd.createElement("tbody");var r=dd.createElement("tr");_a84.cellPadding=_a84.cellSpacing="0";r.appendChild(node);_a85.appendChild(r);_a84.appendChild(_a85);node=_a84;}}}node.id="";td.appendChild(node);tr.appendChild(img);tr.appendChild(td);html.style(tr,"opacity",0.9);b.appendChild(tr);a.appendChild(b);this.node=a;var m=_a35.manager();this.oldOffsetY=m.OFFSET_Y;m.OFFSET_Y=1;},destroy:function(){_a35.manager().OFFSET_Y=this.oldOffsetY;this.inherited(arguments);}});var _a86=_a35.manager().makeAvatar;_a35.manager().makeAvatar=function(){var src=this.source;if(src.viewIndex!==undefined&&!html.hasClass(win.body(),"dijit_a11y")){return new _a82(this);}return _a86.call(_a35.manager());};return _a39;});},"dijit/typematic":function(){define("dijit/typematic",["dojo/_base/array","dojo/_base/connect","dojo/_base/event","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/sniff","./main"],function(_a87,_a88,_a89,_a8a,lang,on,has,_a8b){var _a8c=(_a8b.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:(this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay)),this._minDelay);this._timer=setTimeout(lang.hitch(this,"_fireEventAndReload"),this._currentTimeout);},trigger:function(evt,_a8d,node,_a8e,obj,_a8f,_a90,_a91){if(obj!=this._obj){this.stop();this._initialDelay=_a90||500;this._subsequentDelay=_a8f||0.9;this._minDelay=_a91||10;this._obj=obj;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=lang.hitch(_a8d,_a8e);this._evt={faux:true};for(var attr in evt){if(attr!="layerX"&&attr!="layerY"){var v=evt[attr];if(typeof v!="function"&&typeof v!="undefined"){this._evt[attr]=v;}}}this._fireEventAndReload();}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null;}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null;}},addKeyListener:function(node,_a92,_a93,_a94,_a95,_a96,_a97){if(_a92.keyCode){_a92.charOrCode=_a92.keyCode;_a8a.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}else{if(_a92.charCode){_a92.charOrCode=String.fromCharCode(_a92.charCode);_a8a.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}}var _a98=[on(node,_a88._keypress,lang.hitch(this,function(evt){if(evt.charOrCode==_a92.charOrCode&&(_a92.ctrlKey===undefined||_a92.ctrlKey==evt.ctrlKey)&&(_a92.altKey===undefined||_a92.altKey==evt.altKey)&&(_a92.metaKey===undefined||_a92.metaKey==(evt.metaKey||false))&&(_a92.shiftKey===undefined||_a92.shiftKey==evt.shiftKey)){_a89.stop(evt);_a8c.trigger(evt,_a93,node,_a94,_a92,_a95,_a96,_a97);}else{if(_a8c._obj==_a92){_a8c.stop();}}})),on(node,"keyup",lang.hitch(this,function(){if(_a8c._obj==_a92){_a8c.stop();}}))];return {remove:function(){_a87.forEach(_a98,function(h){h.remove();});}};},addMouseListener:function(node,_a99,_a9a,_a9b,_a9c,_a9d){var _a9e=[on(node,"mousedown",lang.hitch(this,function(evt){evt.preventDefault();_a8c.trigger(evt,_a99,node,_a9a,node,_a9b,_a9c,_a9d);})),on(node,"mouseup",lang.hitch(this,function(evt){if(this._obj){evt.preventDefault();}_a8c.stop();})),on(node,"mouseout",lang.hitch(this,function(evt){if(this._obj){evt.preventDefault();}_a8c.stop();})),on(node,"dblclick",lang.hitch(this,function(evt){evt.preventDefault();if(has("ie")<9){_a8c.trigger(evt,_a99,node,_a9a,node,_a9b,_a9c,_a9d);setTimeout(lang.hitch(this,_a8c.stop),50);}}))];return {remove:function(){_a87.forEach(_a9e,function(h){h.remove();});}};},addListener:function(_a9f,_aa0,_aa1,_aa2,_aa3,_aa4,_aa5,_aa6){var _aa7=[this.addKeyListener(_aa0,_aa1,_aa2,_aa3,_aa4,_aa5,_aa6),this.addMouseListener(_a9f,_aa2,_aa3,_aa4,_aa5,_aa6)];return {remove:function(){_a87.forEach(_aa7,function(h){h.remove();});}};}});return _a8c;});},"dijit/MenuItem":function(){require({cache:{"url:dijit/templates/MenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\n\t\t<div data-dojo-attach-point=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuExpand\"/>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</div>\n\t</td>\n</tr>\n"}});define("dijit/MenuItem",["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/kernel","dojo/sniff","./_Widget","./_TemplatedMixin","./_Contained","./_CssStateMixin","dojo/text!./templates/MenuItem.html"],function(_aa8,dom,_aa9,_aaa,_aab,has,_aac,_aad,_aae,_aaf,_ab0){return _aa8("dijit.MenuItem",[_aac,_aad,_aae,_aaf],{templateString:_ab0,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(val){this.containerNode.innerHTML=val;this._set("label",val);if(this.textDir==="auto"){this.applyTextDir(this.focusNode,this.label);}},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:false,_fillContent:function(_ab1){if(_ab1&&!("label" in this.params)){this.set("label",_ab1.innerHTML);}},buildRendering:function(){this.inherited(arguments);var _ab2=this.id+"_text";_aa9.set(this.containerNode,"id",_ab2);if(this.accelKeyNode){_aa9.set(this.accelKeyNode,"id",this.id+"_accel");_ab2+=" "+this.id+"_accel";}this.domNode.setAttribute("aria-labelledby",_ab2);dom.setSelectable(this.domNode,false);},onClick:function(){},focus:function(){try{if(has("ie")==8){this.containerNode.focus();}this.focusNode.focus();}catch(e){}},_onFocus:function(){this._setSelected(true);this.getParent()._onItemFocus(this);this.inherited(arguments);},_setSelected:function(_ab3){_aaa.toggle(this.domNode,"dijitMenuItemSelected",_ab3);},setLabel:function(_ab4){_aab.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_ab4);},setDisabled:function(_ab5){_aab.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",_ab5);},_setDisabledAttr:function(_ab6){this.focusNode.setAttribute("aria-disabled",_ab6?"true":"false");this._set("disabled",_ab6);},_setAccelKeyAttr:function(_ab7){this.accelKeyNode.style.display=_ab7?"":"none";this.accelKeyNode.innerHTML=_ab7;_aa9.set(this.containerNode,"colSpan",_ab7?"1":"2");this._set("accelKey",_ab7);},_setTextDirAttr:function(_ab8){if(!this._created||this.textDir!=_ab8){this._set("textDir",_ab8);this.applyTextDir(this.focusNode,this.label);}}});});},"esri/dijit/editing/AttachmentEditor":function(){define(["require","dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/_base/kernel","dojo/has","dojo/query","dojo/io-query","dojo/dom-attr","dijit/_Widget","dijit/_Templated","esri/kernel","esri/lang","esri/domUtils","dojo/text!esri/dijit/editing/templates/AttachmentEditor.html","dojo/i18n!esri/nls/jsapi","dojo/NodeList-dom"],function(_ab9,_aba,lang,_abb,_abc,_abd,has,_abe,_abf,_ac0,_ac1,_ac2,_ac3,_ac4,_ac5,_ac6,_ac7){var AE=_aba([_ac1,_ac2],{declaredClass:"esri.dijit.editing.AttachmentEditor",widgetsInTemplate:true,templateString:_ac6,basePath:_ab9.toUrl("esri/dijit/editing")+"/",_listHtml:"<span id='node_${oid}_${attid}'><a href='${href}' target='_blank'>${name}</a>",_deleteBtnHtml:"(<span style='cursor:pointer;color:red;font-weight:bold;' class='deleteAttachment' id='${attid}');'>X</span>)",_endHtml:"<br/></span>",_aeConnects:[],_layerEditingCapChecked:{},_layerEditingCap:{},constructor:function(_ac8,_ac9){lang.mixin(this,_ac7.widgets.attachmentEditor);},startup:function(){this.inherited(arguments);this._uploadField_connect=_abb.connect(this._uploadField,"onchange",this,"_addAttachment");this._uploadFieldFocus_connect=_abb.connect(this._uploadField,"onfocus",lang.hitch(this,function(e){_ac5.hide(this._attachmentError);}));},destroy:function(){_abc.forEach(this._aeConnects,_abb.disconnect);_abb.disconnect(this._uploadField_connect);_abb.disconnect(this._uploadFieldFocus_connect);this.inherited(arguments);},showAttachments:function(_aca,_acb){var list=this._attachmentList;list.innerHTML=this.NLS_none;this._uploadField.value="";_abc.forEach(this.domNode.children,function(_acc,idx){_ac5.show(_acc);});_ac5.hide(this._attachmentError);if(!_aca){return;}this._featureLayer=_aca.getLayer()||_acb;if(!this._featureLayer){return;}if(this._featureLayer.declaredClass!=="esri.layers.FeatureLayer"||!this._featureLayer.getEditCapabilities){_ac5.hide(this._uploadForm);_abc.forEach(this.domNode.children,function(_acd,idx){_ac5.hide(_acd);});return;}this._currentLayerId=this._featureLayer.id;if(!this._layerEditingCapChecked[this._currentLayerId]){this._layerEditingCap[this._currentLayerId]=this._featureLayer.getEditCapabilities();this._layerEditingCapChecked[this._currentLayerId]=true;}this._featureCanUpdate=this._featureLayer.getEditCapabilities({feature:_aca}).canUpdate;this._oid=_aca.attributes[this._featureLayer.objectIdField];this._getAttachments(_aca);},_getAttachments:function(_ace){if(!this._featureLayer||!this._featureLayer.queryAttachmentInfos){return;}this._featureLayer.queryAttachmentInfos(this._oid,lang.hitch(this,"_onQueryAttachmentInfosComplete"));},_addAttachment:function(){_ac5.hide(this._attachmentError);if(!this._featureLayer||!this._featureLayer.addAttachment){return;}this._featureLayer.addAttachment(this._oid,this._uploadForm,lang.hitch(this,"_onAddAttachmentComplete"),lang.hitch(this,"_onAddAttachmentError"));},_deleteAttachment:function(oid,_acf){this._featureLayer.deleteAttachments(oid,[_acf],lang.hitch(this,"_onDeleteAttachmentComplete"));},_onQueryAttachmentInfosComplete:function(_ad0){var _ad1=this._listHtml+this._deleteBtnHtml+this._endHtml;this._uploadForm.style.display="block";if((!this._featureCanUpdate&&this._layerEditingCap[this._currentLayerId].canUpdate)||(!this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate)){_ad1=this._listHtml+this._endHtml;this._uploadForm.style.display="none";}else{if(this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate){_ad1=this._listHtml+this._endHtml;}}var list=this._attachmentList,_ad2=_abc.map(_ad0,lang.hitch(this,function(info){return _ac4.substitute({href:info.url,name:info.name,oid:info.objectId,attid:info.id},_ad1);}));list.innerHTML=_ad2.join("")||this.NLS_none;this._updateConnects();},_onAddAttachmentComplete:function(_ad3){var _ad4=this._uploadField;var _ad5=_ad4.value;var pos=_ad5.lastIndexOf("\\");if(pos>-1){_ad5=_ad5.substring(pos+1,_ad5.length);}_ad5=_ad5.replace(/\ /g,"_");var list=this._attachmentList,_ad6=_abf.objectToQuery({gdbVersion:this._featureLayer.gdbVersion,token:this._featureLayer._getToken()});var _ad7=this._listHtml+this._deleteBtnHtml+this._endHtml;if(this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate){_ad7=this._listHtml+this._endHtml;}var link=_ac4.substitute({href:this._featureLayer._url.path+"/"+_ad3.objectId+"/attachments/"+_ad3.attachmentId+(_ad6?("?"+_ad6):""),name:_ad5,oid:_ad3.objectId,attid:_ad3.attachmentId},_ad7);list.innerHTML=list.innerHTML==this.NLS_none?link:(list.innerHTML+link);this._updateConnects();_ad4.value="";},_onAddAttachmentError:function(_ad8){if(_ad8&&_ac4.isDefined(_ad8.code)){var _ad9,_ada=this._attachmentError;if(_ad8.code===400){_ad9=this.NLS_fileNotSupported;}else{_ad9=_ad8.message||(_ad8.details&&_ad8.details.length&&_ad8.details[0]);}_ac0.set(_ada,"innerHTML",(_ad9||this.NLS_error));_ac5.show(_ada);}},_onDeleteAttachmentComplete:function(_adb){var _adc=_abc.every(_adb,function(_add){return _add.success;}),list=this._attachmentList;if(_adc){_abd.query("#node_"+_adb[0].objectId+"_"+_adb[0].attachmentId).orphan();if(!list.children||!list.children.length){list.innerHTML=this.NLS_none;}}},_updateConnects:function(){_abc.forEach(this._aeConnects,_abb.disconnect);_abd.query(".deleteAttachment").forEach(function(item){this._aeConnects.push(_abb.connect(item,"onclick",lang.hitch(this,"_deleteAttachment",this._oid,item.id)));},this);}});if(has("extend-esri")){lang.setObject("dijit.editing.AttachmentEditor",AE,_ac3);}return AE;});},"dijit/ToolbarSeparator":function(){define("dijit/ToolbarSeparator",["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],function(_ade,dom,_adf,_ae0){return _ade("dijit.ToolbarSeparator",[_adf,_ae0],{templateString:"<div class=\"dijitToolbarSeparator dijitInline\" role=\"presentation\"></div>",buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});});},"dijit/layout/_LayoutWidget":function(){define("dijit/layout/_LayoutWidget",["dojo/_base/lang","../_Widget","../_Container","../_Contained","../Viewport","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style"],function(lang,_ae1,_ae2,_ae3,_ae4,_ae5,_ae6,_ae7,_ae8){return _ae5("dijit.layout._LayoutWidget",[_ae1,_ae2,_ae3],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,buildRendering:function(){this.inherited(arguments);_ae6.add(this.domNode,"dijitContainer");},startup:function(){if(this._started){return;}this.inherited(arguments);var _ae9=this.getParent&&this.getParent();if(!(_ae9&&_ae9.isLayoutContainer)){this.resize();this.own(_ae4.on("resize",lang.hitch(this,"resize")));}},resize:function(_aea,_aeb){var node=this.domNode;if(_aea){_ae7.setMarginBox(node,_aea);}var mb=_aeb||{};lang.mixin(mb,_aea||{});if(!("h" in mb)||!("w" in mb)){mb=lang.mixin(_ae7.getMarginBox(node),mb);}var cs=_ae8.getComputedStyle(node);var me=_ae7.getMarginExtents(node,cs);var be=_ae7.getBorderExtents(node,cs);var bb=(this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)});var pe=_ae7.getPadExtents(node,cs);this._contentBox={l:_ae8.toPixelValue(node,cs.paddingLeft),t:_ae8.toPixelValue(node,cs.paddingTop),w:bb.w-pe.w,h:bb.h-pe.h};this.layout();},layout:function(){},_setupChild:function(_aec){var cls=this.baseClass+"-child "+(_aec.baseClass?this.baseClass+"-"+_aec.baseClass:"");_ae6.add(_aec.domNode,cls);},addChild:function(_aed,_aee){this.inherited(arguments);if(this._started){this._setupChild(_aed);}},removeChild:function(_aef){var cls=this.baseClass+"-child"+(_aef.baseClass?" "+this.baseClass+"-"+_aef.baseClass:"");_ae6.remove(_aef.domNode,cls);this.inherited(arguments);}});});},"dijit/popup":function(){define("dijit/popup",["dojo/_base/array","dojo/aspect","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./place","./BackgroundIframe","./main"],function(_af0,_af1,_af2,_af3,dom,_af4,_af5,_af6,_af7,_af8,keys,lang,on,has,_af9,_afa,_afb){function _afc(){if(this._popupWrapper){_af5.destroy(this._popupWrapper);delete this._popupWrapper;}};var _afd=_af3(null,{_stack:[],_beginZIndex:1000,_idGen:1,_createWrapper:function(_afe){var _aff=_afe._popupWrapper,node=_afe.domNode;if(!_aff){_aff=_af5.create("div",{"class":"dijitPopup",style:{display:"none"},role:"presentation"},_afe.ownerDocumentBody);_aff.appendChild(node);var s=node.style;s.display="";s.visibility="";s.position="";s.top="0px";_afe._popupWrapper=_aff;_af1.after(_afe,"destroy",_afc,true);}return _aff;},moveOffScreen:function(_b00){var _b01=this._createWrapper(_b00);_af7.set(_b01,{visibility:"hidden",top:"-9999px",display:""});},hide:function(_b02){var _b03=this._createWrapper(_b02);_af7.set(_b03,"display","none");},getTopPopup:function(){var _b04=this._stack;for(var pi=_b04.length-1;pi>0&&_b04[pi].parent===_b04[pi-1].widget;pi--){}return _b04[pi];},open:function(args){var _b05=this._stack,_b06=args.popup,_b07=args.orient||["below","below-alt","above","above-alt"],ltr=args.parent?args.parent.isLeftToRight():_af6.isBodyLtr(_b06.ownerDocument),_b08=args.around,id=(args.around&&args.around.id)?(args.around.id+"_dropdown"):("popup_"+this._idGen++);while(_b05.length&&(!args.parent||!dom.isDescendant(args.parent.domNode,_b05[_b05.length-1].widget.domNode))){this.close(_b05[_b05.length-1].widget);}var _b09=this._createWrapper(_b06);_af4.set(_b09,{id:id,style:{zIndex:this._beginZIndex+_b05.length},"class":"dijitPopup "+(_b06.baseClass||_b06["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:args.parent?args.parent.id:""});if(has("ie")||has("mozilla")){if(!_b06.bgIframe){_b06.bgIframe=new _afa(_b09);}}var best=_b08?_af9.around(_b09,_b08,_b07,ltr,_b06.orient?lang.hitch(_b06,"orient"):null):_af9.at(_b09,args,_b07=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],args.padding);_b09.style.display="";_b09.style.visibility="visible";_b06.domNode.style.visibility="visible";var _b0a=[];_b0a.push(on(_b09,_af2._keypress,lang.hitch(this,function(evt){if(evt.charOrCode==keys.ESCAPE&&args.onCancel){_af8.stop(evt);args.onCancel();}else{if(evt.charOrCode===keys.TAB){_af8.stop(evt);var _b0b=this.getTopPopup();if(_b0b&&_b0b.onCancel){_b0b.onCancel();}}}})));if(_b06.onCancel&&args.onCancel){_b0a.push(_b06.on("cancel",args.onCancel));}_b0a.push(_b06.on(_b06.onExecute?"execute":"change",lang.hitch(this,function(){var _b0c=this.getTopPopup();if(_b0c&&_b0c.onExecute){_b0c.onExecute();}})));_b05.push({widget:_b06,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:_b0a});if(_b06.onOpen){_b06.onOpen(best);}return best;},close:function(_b0d){var _b0e=this._stack;while((_b0d&&_af0.some(_b0e,function(elem){return elem.widget==_b0d;}))||(!_b0d&&_b0e.length)){var top=_b0e.pop(),_b0f=top.widget,_b10=top.onClose;if(_b0f.onClose){_b0f.onClose();}var h;while(h=top.handlers.pop()){h.remove();}if(_b0f&&_b0f.domNode){this.hide(_b0f);}if(_b10){_b10();}}}});return (_afb.popup=new _afd());});},"dojox/grid/_RowManager":function(){define("dojox/grid/_RowManager",["dojo/_base/declare","dojo/_base/lang","dojo/dom-class"],function(_b11,lang,_b12){var _b13=function(_b14,_b15){if(_b14.style.cssText==undefined){_b14.setAttribute("style",_b15);}else{_b14.style.cssText=_b15;}};return _b11("dojox.grid._RowManager",null,{constructor:function(_b16){this.grid=_b16;},linesToEms:2,overRow:-2,prepareStylingRow:function(_b17,_b18){return {index:_b17,node:_b18,odd:Boolean(_b17&1),selected:!!this.grid.selection.isSelected(_b17),over:this.isOver(_b17),customStyles:"",customClasses:"dojoxGridRow"};},styleRowNode:function(_b19,_b1a){var row=this.prepareStylingRow(_b19,_b1a);this.grid.onStyleRow(row);this.applyStyles(row);},applyStyles:function(_b1b){var i=_b1b;i.node.className=i.customClasses;var h=i.node.style.height;_b13(i.node,i.customStyles+";"+(i.node._style||""));i.node.style.height=h;},updateStyles:function(_b1c){this.grid.updateRowStyles(_b1c);},setOverRow:function(_b1d){var last=this.overRow;this.overRow=_b1d;if((last!=this.overRow)&&(lang.isString(last)||last>=0)){this.updateStyles(last);}this.updateStyles(this.overRow);},isOver:function(_b1e){return (this.overRow==_b1e&&!_b12.contains(this.grid.domNode,"dojoxGridColumnResizing"));}});});},"dojo/dnd/Mover":function(){define(["../_base/array","../_base/declare","../_base/event","../_base/lang","../sniff","../_base/window","../dom","../dom-geometry","../dom-style","../Evented","../on","../touch","./common","./autoscroll"],function(_b1f,_b20,_b21,lang,has,win,dom,_b22,_b23,_b24,on,_b25,dnd,_b26){return _b20("dojo.dnd.Mover",[_b24],{constructor:function(node,e,host){this.node=dom.byId(node);this.marginBox={l:e.pageX,t:e.pageY};this.mouseButton=e.button;var h=(this.host=host),d=node.ownerDocument;this.events=[on(d,_b25.move,lang.hitch(this,"onFirstMove")),on(d,_b25.move,lang.hitch(this,"onMouseMove")),on(d,_b25.release,lang.hitch(this,"onMouseUp")),on(d,"dragstart",_b21.stop),on(d.body,"selectstart",_b21.stop)];_b26.autoScrollStart(d);if(h&&h.onMoveStart){h.onMoveStart(this);}},onMouseMove:function(e){_b26.autoScroll(e);var m=this.marginBox;this.host.onMove(this,{l:m.l+e.pageX,t:m.t+e.pageY},e);_b21.stop(e);},onMouseUp:function(e){if(has("webkit")&&has("mac")&&this.mouseButton==2?e.button==0:this.mouseButton==e.button){this.destroy();}_b21.stop(e);},onFirstMove:function(e){var s=this.node.style,l,t,h=this.host;switch(s.position){case "relative":case "absolute":l=Math.round(parseFloat(s.left))||0;t=Math.round(parseFloat(s.top))||0;break;default:s.position="absolute";var m=_b22.getMarginBox(this.node);var b=win.doc.body;var bs=_b23.getComputedStyle(b);var bm=_b22.getMarginBox(b,bs);var bc=_b22.getContentBox(b,bs);l=m.l-(bc.l-bm.l);t=m.t-(bc.t-bm.t);break;}this.marginBox.l=l-this.marginBox.l;this.marginBox.t=t-this.marginBox.t;if(h&&h.onFirstMove){h.onFirstMove(this,e);}this.events.shift().remove();},destroy:function(){_b1f.forEach(this.events,function(_b27){_b27.remove();});var h=this.host;if(h&&h.onMoveStop){h.onMoveStop(this);}this.events=this.node=this.host=null;}});});},"dijit/BackgroundIframe":function(){define("dijit/BackgroundIframe",["require","./main","dojo/_base/config","dojo/dom-construct","dojo/dom-style","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window"],function(_b28,_b29,_b2a,_b2b,_b2c,lang,on,has,win){var _b2d=new function(){var _b2e=[];this.pop=function(){var _b2f;if(_b2e.length){_b2f=_b2e.pop();_b2f.style.display="";}else{if(has("ie")<9){var burl=_b2a["dojoBlankHtmlUrl"]||_b28.toUrl("dojo/resources/blank.html")||"javascript:\"\"";var html="<iframe src='"+burl+"' role='presentation'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_b2f=win.doc.createElement(html);}else{_b2f=_b2b.create("iframe");_b2f.src="javascript:\"\"";_b2f.className="dijitBackgroundIframe";_b2f.setAttribute("role","presentation");_b2c.set(_b2f,"opacity",0.1);}_b2f.tabIndex=-1;}return _b2f;};this.push=function(_b30){_b30.style.display="none";_b2e.push(_b30);};}();_b29.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(has("ie")||has("mozilla")){var _b31=(this.iframe=_b2d.pop());node.appendChild(_b31);if(has("ie")<7||has("quirks")){this.resize(node);this._conn=on(node,"resize",lang.hitch(this,function(){this.resize(node);}));}else{_b2c.set(_b31,{width:"100%",height:"100%"});}}};lang.extend(_b29.BackgroundIframe,{resize:function(node){if(this.iframe){_b2c.set(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});}},destroy:function(){if(this._conn){this._conn.remove();this._conn=null;}if(this.iframe){_b2d.push(this.iframe);delete this.iframe;}}});return _b29.BackgroundIframe;});},"url:dijit/templates/Menu.html":"<table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" role=\"menu\" tabIndex=\"${tabIndex}\"\n\t   data-dojo-attach-event=\"onkeypress:_onKeyPress\" cellspacing=\"0\">\n\t<tbody class=\"dijitReset\" data-dojo-attach-point=\"containerNode\"></tbody>\n</table>\n","dojo/dnd/Avatar":function(){define(["../_base/declare","../_base/window","../dom","../dom-attr","../dom-class","../dom-construct","../hccss","../query"],function(_b32,win,dom,_b33,_b34,_b35,has,_b36){return _b32("dojo.dnd.Avatar",null,{constructor:function(_b37){this.manager=_b37;this.construct();},construct:function(){var a=_b35.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),_b38=this.manager.source,node,b=_b35.create("tbody",null,a),tr=_b35.create("tr",null,b),td=_b35.create("td",null,tr),k=Math.min(5,this.manager.nodes.length),i=0;if(has("highcontrast")){_b35.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},td);}_b35.create("span",{innerHTML:_b38.generateText?this._generateText():""},td);_b33.set(tr,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});for(;i<k;++i){if(_b38.creator){node=_b38._normalizedCreator(_b38.getItem(this.manager.nodes[i].id).data,"avatar").node;}else{node=this.manager.nodes[i].cloneNode(true);if(node.tagName.toLowerCase()=="tr"){var _b39=_b35.create("table"),_b3a=_b35.create("tbody",null,_b39);_b3a.appendChild(node);node=_b39;}}node.id="";tr=_b35.create("tr",null,b);td=_b35.create("td",null,tr);td.appendChild(node);_b33.set(tr,{"class":"dojoDndAvatarItem",style:{opacity:(9-i)/10}});}this.node=a;},destroy:function(){_b35.destroy(this.node);this.node=false;},update:function(){_b34.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(has("highcontrast")){var icon=dom.byId("a11yIcon");var text="+";if(this.manager.canDropFlag&&!this.manager.copy){text="< ";}else{if(!this.manager.canDropFlag&&!this.manager.copy){text="o";}else{if(!this.manager.canDropFlag){text="x";}}}icon.innerHTML=text;}_b36(("tr.dojoDndAvatarHeader td span"+(has("highcontrast")?" span":"")),this.node).forEach(function(node){node.innerHTML=this.manager.source.generateText?this._generateText():"";},this);},_generateText:function(){return this.manager.nodes.length.toString();}});});},"dijit/form/_Spinner":function(){require({cache:{"url:dijit/form/templates/Spinner.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitButtonNode dijitSpinnerButtonContainer\"\n\t\t><input class=\"dijitReset dijitInputField dijitSpinnerButtonInner\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t/><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton\"\n\t\t\tdata-dojo-attach-point=\"upArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9650; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\tdata-dojo-attach-point=\"downArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' data-dojo-attach-point=\"textbox,focusNode\" type=\"${type}\" data-dojo-attach-event=\"onkeypress:_onKeyPress\"\n\t\t\trole=\"spinbutton\" autocomplete=\"off\" ${!nameAttrSetting}\n\t/></div\n></div>\n"}});define("dijit/form/_Spinner",["dojo/_base/declare","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/mouse","../typematic","./RangeBoundTextBox","dojo/text!./templates/Spinner.html","./_TextBoxMixin"],function(_b3b,_b3c,keys,lang,has,_b3d,_b3e,_b3f,_b40,_b41){return _b3b("dijit.form._Spinner",_b3f,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:_b40,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{"upArrowNode":"dijitUpArrowButton","downArrowNode":"dijitDownArrowButton"},adjust:function(val){return val;},_arrowPressed:function(_b42,_b43,_b44){if(this.disabled||this.readOnly){return;}this._setValueAttr(this.adjust(this.get("value"),_b43*_b44),false);_b41.selectInputText(this.textbox,this.textbox.value.length);},_arrowReleased:function(){this._wheelTimer=null;},_typematicCallback:function(_b45,node,evt){var inc=this.smallDelta;if(node==this.textbox){var key=evt.charOrCode;inc=(key==keys.PAGE_UP||key==keys.PAGE_DOWN)?this.largeDelta:this.smallDelta;node=(key==keys.UP_ARROW||key==keys.PAGE_UP)?this.upArrowNode:this.downArrowNode;}if(_b45==-1){this._arrowReleased(node);}else{this._arrowPressed(node,(node==this.upArrowNode)?1:-1,inc);}},_wheelTimer:null,_mouseWheeled:function(evt){_b3c.stop(evt);var _b46=evt.wheelDelta/120;if(Math.floor(_b46)!=_b46){_b46=evt.wheelDelta>0?1:-1;}var _b47=evt.detail?(evt.detail*-1):_b46;if(_b47!==0){var node=this[(_b47>0?"upArrowNode":"downArrowNode")];this._arrowPressed(node,_b47,this.smallDelta);if(this._wheelTimer){this._wheelTimer.remove();}this._wheelTimer=this.defer(function(){this._arrowReleased(node);},50);}},_setConstraintsAttr:function(_b48){this.inherited(arguments);if(this.focusNode){if(this.constraints.min!==undefined){this.focusNode.setAttribute("aria-valuemin",this.constraints.min);}else{this.focusNode.removeAttribute("aria-valuemin");}if(this.constraints.max!==undefined){this.focusNode.setAttribute("aria-valuemax",this.constraints.max);}else{this.focusNode.removeAttribute("aria-valuemax");}}},_setValueAttr:function(_b49,_b4a){this.focusNode.setAttribute("aria-valuenow",_b49);this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,_b3d.wheel,"_mouseWheeled");this.own(_b3e.addListener(this.upArrowNode,this.textbox,{charOrCode:keys.UP_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_b3e.addListener(this.downArrowNode,this.textbox,{charOrCode:keys.DOWN_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_b3e.addListener(this.upArrowNode,this.textbox,{charOrCode:keys.PAGE_UP,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_b3e.addListener(this.downArrowNode,this.textbox,{charOrCode:keys.PAGE_DOWN,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));}});});},"dijit/form/Button":function(){require({cache:{"url:dijit/form/templates/Button.html":"<span class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" role=\"presentation\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\n\t\ttabIndex=\"-1\" role=\"presentation\" data-dojo-attach-point=\"valueNode\"\n/></span>\n"}});define("dijit/form/Button",["require","dojo/_base/declare","dojo/dom-class","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/ready","./_FormWidget","./_ButtonMixin","dojo/text!./templates/Button.html"],function(_b4b,_b4c,_b4d,has,_b4e,lang,_b4f,_b50,_b51,_b52){if(has("dijit-legacy-requires")){_b4f(0,function(){var _b53=["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"];_b4b(_b53);});}return _b4c("dijit.form.Button",[_b50,_b51],{showLabel:true,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:_b52,_setValueAttr:"valueNode",_onClick:function(e){var ok=this.inherited(arguments);if(ok){if(this.valueNode){this.valueNode.click();e.preventDefault();e.stopPropagation();}}return ok;},_fillContent:function(_b54){if(_b54&&(!this.params||!("label" in this.params))){var _b55=lang.trim(_b54.innerHTML);if(_b55){this.label=_b55;}}},_setShowLabelAttr:function(val){if(this.containerNode){_b4d.toggle(this.containerNode,"dijitDisplayNone",!val);}this._set("showLabel",val);},setLabel:function(_b56){_b4e.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_b56);},_setLabelAttr:function(_b57){this.inherited(arguments);if(!this.showLabel&&!("title" in this.params)){this.titleNode.title=lang.trim(this.containerNode.innerText||this.containerNode.textContent||"");}}});});},"dojox/gfx/Moveable":function(){define("dojox/gfx/Moveable",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/_base/event","dojo/topic","dojo/touch","dojo/dom-class","dojo/_base/window","./Mover","dojo/mouse"],function(lang,_b58,arr,_b59,_b5a,_b5b,_b5c,win,_b5d,_b5e){return _b58("dojox.gfx.Moveable",null,{constructor:function(_b5f,_b60){this.shape=_b5f;this.delay=(_b60&&_b60.delay>0)?_b60.delay:0;this.mover=(_b60&&_b60.mover)?_b60.mover:_b5d;this.leftButtonOnly=_b60&&_b60.leftButtonOnly;this.events=[this.shape.connect(_b5b.press,lang.hitch(this,"onMouseDown"))];},destroy:function(){arr.forEach(this.events,function(_b61){_b61.remove();});this.events=this.shape=null;},onMouseDown:function(e){if(this.delay){this.events.push(this.shape.connect(_b5b.move,lang.hitch(this,"onMouseMove")),this.shape.connect(_b5b.release,lang.hitch(this,"onMouseUp")));this._lastX=e.clientX;this._lastY=e.clientY;}else{if(!this.leftButtonOnly||_b5e.isLeft(e)){new this.mover(this.shape,e,this);}}_b59.stop(e);},onMouseMove:function(e){var _b62=e.clientX,_b63=e.clientY;if(Math.abs(_b62-this._lastX)>this.delay||Math.abs(_b63-this._lastY)>this.delay){this.onMouseUp(e);new this.mover(this.shape,e,this);}_b59.stop(e);},onMouseUp:function(e){this.events.pop().remove();},onMoveStart:function(_b64){_b5a.publish("/gfx/move/start",_b64);_b5c.add(win.body(),"dojoMove");},onMoveStop:function(_b65){_b5a.publish("/gfx/move/stop",_b65);_b5c.remove(win.body(),"dojoMove");},onFirstMove:function(_b66){},onMove:function(_b67,_b68){this.onMoving(_b67,_b68);this.shape.applyLeftTransform(_b68);this.onMoved(_b67,_b68);},onMoving:function(_b69,_b6a){},onMoved:function(_b6b,_b6c){}});});},"dijit/_WidgetBase":function(){define("dijit/_WidgetBase",["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./Destroyable","./registry"],function(_b6d,_b6e,_b6f,_b70,_b71,_b72,dom,_b73,_b74,_b75,_b76,_b77,has,_b78,lang,on,_b79,_b7a,_b7b,win,_b7c,_b7d){has.add("dijit-legacy-requires",!_b78.isAsync);if(has("dijit-legacy-requires")){_b79(0,function(){var _b7e=["dijit/_base/manager"];_b6d(_b7e);});}var _b7f={};function _b80(obj){var ret={};for(var attr in obj){ret[attr.toLowerCase()]=true;}return ret;};function _b81(attr){return function(val){_b73[val?"set":"remove"](this.domNode,attr,val);this._set(attr,val);};};return _b72("dijit._WidgetBase",[_b7a,_b7c],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:_b81("lang"),dir:"",_setDirAttr:_b81("dir"),textDir:"","class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(val){this._set("ownerDocument",val);},attributeMap:{},_blankGif:_b70.blankGif||_b6d.toUrl("dojo/resources/blank.gif"),postscript:function(_b82,_b83){this.create(_b82,_b83);},create:function(_b84,_b85){this.srcNodeRef=dom.byId(_b85);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_b84){this.params=_b84;lang.mixin(this,_b84);}this.postMixInProperties();if(!this.id){this.id=_b7d.getUniqueId(this.declaredClass.replace(/\./g,"_"));if(this.params){delete this.params.id;}}this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:win.doc);this.ownerDocumentBody=win.body(this.ownerDocument);_b7d.add(this);this.buildRendering();var _b86;if(this.domNode){this._applyAttributes();var _b87=this.srcNodeRef;if(_b87&&_b87.parentNode&&this.domNode!==_b87){_b87.parentNode.replaceChild(this.domNode,_b87);_b86=true;}this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(_b86){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var ctor=this.constructor,list=ctor._setterAttrs;if(!list){list=(ctor._setterAttrs=[]);for(var attr in this.attributeMap){list.push(attr);}var _b88=ctor.prototype;for(var _b89 in _b88){if(_b89 in this.attributeMap){continue;}var _b8a="_set"+_b89.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();})+"Attr";if(_b8a in _b88){list.push(_b89);}}}var _b8b={};for(var key in this.params||{}){_b8b[key]=this[key];}_b6e.forEach(list,function(attr){if(attr in _b8b){}else{if(this[attr]){this.set(attr,this[attr]);}}},this);for(key in _b8b){this.set(key,_b8b[key]);}},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode){this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div");}if(this.baseClass){var _b8c=this.baseClass.split(" ");if(!this.isLeftToRight()){_b8c=_b8c.concat(_b6e.map(_b8c,function(name){return name+"Rtl";}));}_b74.add(this.domNode,_b8c);}},postCreate:function(){},startup:function(){if(this._started){return;}this._started=true;_b6e.forEach(this.getChildren(),function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}});},destroyRecursive:function(_b8d){this._beingDestroyed=true;this.destroyDescendants(_b8d);this.destroy(_b8d);},destroy:function(_b8e){this._beingDestroyed=true;this.uninitialize();function _b8f(w){if(w.destroyRecursive){w.destroyRecursive(_b8e);}else{if(w.destroy){w.destroy(_b8e);}}};_b6e.forEach(this._connects,lang.hitch(this,"disconnect"));_b6e.forEach(this._supportingWidgets,_b8f);if(this.domNode){_b6e.forEach(_b7d.findWidgets(this.domNode,this.containerNode),_b8f);}this.destroyRendering(_b8e);_b7d.remove(this.id);this._destroyed=true;},destroyRendering:function(_b90){if(this.bgIframe){this.bgIframe.destroy(_b90);delete this.bgIframe;}if(this.domNode){if(_b90){_b73.remove(this.domNode,"widgetId");}else{_b75.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_b90){_b75.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_b91){_b6e.forEach(this.getChildren(),function(_b92){if(_b92.destroyRecursive){_b92.destroyRecursive(_b91);}});},uninitialize:function(){return false;},_setStyleAttr:function(_b93){var _b94=this.domNode;if(lang.isObject(_b93)){_b77.set(_b94,_b93);}else{if(_b94.style.cssText){_b94.style.cssText+="; "+_b93;}else{_b94.style.cssText=_b93;}}this._set("style",_b93);},_attrToDom:function(attr,_b95,_b96){_b96=arguments.length>=3?_b96:this.attributeMap[attr];_b6e.forEach(lang.isArray(_b96)?_b96:[_b96],function(_b97){var _b98=this[_b97.node||_b97||"domNode"];var type=_b97.type||"attribute";switch(type){case "attribute":if(lang.isFunction(_b95)){_b95=lang.hitch(this,_b95);}var _b99=_b97.attribute?_b97.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);if(_b98.tagName){_b73.set(_b98,_b99,_b95);}else{_b98.set(_b99,_b95);}break;case "innerText":_b98.innerHTML="";_b98.appendChild(this.ownerDocument.createTextNode(_b95));break;case "innerHTML":_b98.innerHTML=_b95;break;case "class":_b74.replace(_b98,_b95,this[attr]);break;}},this);},get:function(name){var _b9a=this._getAttrNames(name);return this[_b9a.g]?this[_b9a.g]():this[name];},set:function(name,_b9b){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _b9c=this._getAttrNames(name),_b9d=this[_b9c.s];if(lang.isFunction(_b9d)){var _b9e=_b9d.apply(this,Array.prototype.slice.call(arguments,1));}else{var _b9f=this.focusNode&&!lang.isFunction(this.focusNode)?"focusNode":"domNode",_ba0,map,tag;tag=this[_b9f]&&this[_b9f].tagName;if(tag){_ba0=_b7f[tag]||(_b7f[tag]=_b80(this[_b9f]));}map=name in this.attributeMap?this.attributeMap[name]:_b9c.s in this?this[_b9c.s]:((_ba0&&_b9c.l in _ba0&&typeof _b9b!="function")||/^aria-|^data-|^role$/.test(name))?_b9f:null;if(map!=null){this._attrToDom(name,_b9b,map);}this._set(name,_b9b);}return _b9e||this;},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();});return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr",l:uc.toLowerCase()});},_set:function(name,_ba1){var _ba2=this[name];this[name]=_ba1;if(this._created&&_ba1!==_ba2){if(this._watchCallbacks){this._watchCallbacks(name,_ba2,_ba1);}this.emit("attrmodified-"+name,{detail:{prevValue:_ba2,newValue:_ba1}});}},emit:function(type,_ba3,_ba4){_ba3=_ba3||{};if(_ba3.bubbles===undefined){_ba3.bubbles=true;}if(_ba3.cancelable===undefined){_ba3.cancelable=true;}if(!_ba3.detail){_ba3.detail={};}_ba3.detail.widget=this;var ret,_ba5=this["on"+type];if(_ba5){ret=_ba5.apply(this,_ba4?_ba4:[_ba3]);}if(this._started&&!this._beingDestroyed){on.emit(this.domNode,type.toLowerCase(),_ba3);}return ret;},on:function(type,func){var _ba6=this._onMap(type);if(_ba6){return _b6f.after(this,_ba6,func,true);}return this.own(on(this.domNode,type,func))[0];},_onMap:function(type){var ctor=this.constructor,map=ctor._onMap;if(!map){map=(ctor._onMap={});for(var attr in ctor.prototype){if(/^on/.test(attr)){map[attr.replace(/^on/,"").toLowerCase()]=attr;}}}return map[typeof type=="string"&&type.toLowerCase()];},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getChildren:function(){return this.containerNode?_b7d.findWidgets(this.containerNode):[];},getParent:function(){return _b7d.getEnclosingWidget(this.domNode.parentNode);},connect:function(obj,_ba7,_ba8){return this.own(_b71.connect(obj,_ba7,this,_ba8))[0];},disconnect:function(_ba9){_ba9.remove();},subscribe:function(t,_baa){return this.own(_b7b.subscribe(t,lang.hitch(this,_baa)))[0];},unsubscribe:function(_bab){_bab.remove();},isLeftToRight:function(){return this.dir?(this.dir=="ltr"):_b76.isBodyLtr(this.ownerDocument);},isFocusable:function(){return this.focus&&(_b77.get(this.domNode,"display")!="none");},placeAt:function(_bac,_bad){var _bae=!_bac.tagName&&_b7d.byId(_bac);if(_bae&&_bae.addChild&&(!_bad||typeof _bad==="number")){_bae.addChild(this,_bad);}else{var ref=_bae?(_bae.containerNode&&!/after|before|replace/.test(_bad||"")?_bae.containerNode:_bae.domNode):dom.byId(_bac,this.ownerDocument);_b75.place(this.domNode,ref,_bad);if(!this._started&&(this.getParent()||{})._started){this.startup();}}return this;},getTextDir:function(text,_baf){return _baf;},applyTextDir:function(){},defer:function(fcn,_bb0){var _bb1=setTimeout(lang.hitch(this,function(){_bb1=null;if(!this._destroyed){lang.hitch(this,fcn)();}}),_bb0||0);return {remove:function(){if(_bb1){clearTimeout(_bb1);_bb1=null;}return null;}};}});});},"esri/tasks/RelationParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/jsonUtils"],function(_bb2,lang,_bb3,_bb4,has,_bb5,_bb6){var _bb7=_bb2(null,{declaredClass:"esri.tasks.RelationParameters",geometries1:null,geometries2:null,relation:null,relationParam:null,toJson:function(){var _bb8=_bb3.map(this.geometries1,function(geom){return geom.toJson();});var _bb9=_bb3.map(this.geometries2,function(geom){return geom.toJson();});var json={};var _bba=this.geometries1;if(_bba&&_bba.length>0){json.geometries1=_bb4.toJson({geometryType:_bb6.getJsonType(_bba[0]),geometries:_bb8});var _bbb=this.geometries1[0].spatialReference;json.sr=_bbb.wkid?_bbb.wkid:_bb4.toJson(_bbb.toJson());}var _bbc=this.geometries2;if(_bbc&&_bbc.length>0){json.geometries2=_bb4.toJson({geometryType:_bb6.getJsonType(_bbc[0]),geometries:_bb9});}if(this.relation){json.relation=this.relation;}if(this.relationParam){json.relationParam=_bb4.toJson(this.relationParam);}return json;}});lang.mixin(_bb7,{SPATIAL_REL_CROSS:"esriGeometryRelationCross",SPATIAL_REL_DISJOINT:"esriGeometryRelationDisjoint",SPATIAL_REL_IN:"esriGeometryRelationIn",SPATIAL_REL_INTERIORINTERSECTION:"esriGeometryRelationInteriorIntersection",SPATIAL_REL_INTERSECTION:"esriGeometryRelationIntersection",SPATIAL_REL_COINCIDENCE:"esriGeometryRelationLineCoincidence",SPATIAL_REL_LINETOUCH:"esriGeometryRelationLineTouch",SPATIAL_REL_OVERLAP:"esriGeometryRelationOverlap",SPATIAL_REL_POINTTOUCH:"esriGeometryRelationPointTouch",SPATIAL_REL_TOUCH:"esriGeometryRelationTouch",SPATIAL_REL_WITHIN:"esriGeometryRelationWithin",SPATIAL_REL_RELATION:"esriGeometryRelationRelation"});if(has("extend-esri")){lang.setObject("tasks.RelationParameters",_bb7,_bb5);}return _bb7;});},"esri/layers/TrackManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/graphic","esri/geometry/Polyline","esri/layers/GraphicsLayer"],function(_bbd,lang,_bbe,has,_bbf,_bc0,_bc1,_bc2){var _bc3=_bbd(null,{declaredClass:"esri.layers._TrackManager",constructor:function(_bc4){this.layer=_bc4;this.trackMap={};},initialize:function(map){this.map=map;var _bc5=this.layer,_bc6=_bc5.renderer.trackRenderer;if(_bc6&&(_bc5.geometryType==="esriGeometryPoint")){var _bc7=(this.container=new _bc2._GraphicsLayer({id:_bc5.id+"_tracks",_child:true}));_bc7.loaded=true;_bc7.onLoad(_bc7);_bc7._setMap(map,_bc5._div);_bc7.setRenderer(_bc6);}},addFeatures:function(_bc8){var tkid,_bc9=this.trackMap,_bca=this.layer,_bcb=_bca._trackIdField;_bbe.forEach(_bc8,function(_bcc){var _bcd=_bcc.attributes;tkid=_bcd[_bcb];var ary=(_bc9[tkid]=(_bc9[tkid]||[]));ary.push(_bcc);});var _bce=_bca._startTimeField,_bcf=_bca.objectIdField;var _bd0=function(a,b){var _bd1=a.attributes[_bce],_bd2=b.attributes[_bce];if(_bd1===_bd2){return (a.attributes[_bcf]<b.attributes[_bcf])?-1:1;}else{return (_bd1<_bd2)?-1:1;}};for(tkid in _bc9){_bc9[tkid].sort(_bd0);}},drawTracks:function(){var _bd3=this.container;if(!_bd3){return;}var _bd4=this.trackMap,sr=this.map.spatialReference,tkid,ary,path,i,_bd5,_bd6=this.layer._trackIdField,_bd7;for(tkid in _bd4){ary=_bd4[tkid];path=[];for(i=ary.length-1;i>=0;i--){_bd5=ary[i].geometry;if(_bd5){path.push([_bd5.x,_bd5.y]);}}_bd7={};_bd7[_bd6]=tkid;if(path.length>0){_bd3.add(new _bc0(new _bc1({paths:[path],spatialReference:sr}),null,_bd7));}}},moveLatestToFront:function(){_bbe.forEach(this.getLatestObservations(),function(_bd8){var _bd9=_bd8._shape;_bd9&&_bd9._moveToFront();this._repaint(_bd8,null,true);},this.layer);},getLatestObservations:function(){var _bda=[];if(!this.layer.renderer.latestObservationRenderer){return _bda;}var _bdb=this.trackMap,tkid;for(tkid in _bdb){var ary=_bdb[tkid];_bda.push(ary[ary.length-1]);}return _bda;},clearTracks:function(){var _bdc=this.getLatestObservations();this.trackMap={};var _bdd=this.container;if(_bdd){_bdd.clear();}_bbe.forEach(_bdc,function(_bde){this._repaint(_bde,null,true);},this.layer);},isLatestObservation:function(_bdf){var _be0=this.layer._trackIdField;var _be1=this.trackMap[_bdf.attributes[_be0]];if(_be1){return (_be1[_be1.length-1]===_bdf);}return false;},destroy:function(){var _be2=this.container;if(_be2){_be2.clear();_be2._unsetMap(this.map,this.layer._div);this.container=null;}this.map=null;this.layer=null;this.trackMap=null;}});if(has("extend-esri")){lang.setObject("layers._TrackManager",_bc3,_bbf);}return _bc3;});},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(_be3,_be4,_be5){var base=null;return _be3("dojo.store.Memory",base,{constructor:function(_be6){for(var i in _be6){this[i]=_be6[i];}this.setData(this.data||[]);},data:null,idProperty:"id",index:null,queryEngine:_be5,get:function(id){return this.data[this.index[id]];},getIdentity:function(_be7){return _be7[this.idProperty];},put:function(_be8,_be9){var data=this.data,_bea=this.index,_beb=this.idProperty;var id=_be8[_beb]=(_be9&&"id" in _be9)?_be9.id:_beb in _be8?_be8[_beb]:Math.random();if(id in _bea){if(_be9&&_be9.overwrite===false){throw new Error("Object already exists");}data[_bea[id]]=_be8;}else{_bea[id]=data.push(_be8)-1;}return id;},add:function(_bec,_bed){(_bed=_bed||{}).overwrite=false;return this.put(_bec,_bed);},remove:function(id){var _bee=this.index;var data=this.data;if(id in _bee){data.splice(_bee[id],1);this.setData(data);return true;}},query:function(_bef,_bf0){return _be4(this.queryEngine(_bef,_bf0)(this.data));},setData:function(data){if(data.items){this.idProperty=data.identifier;data=this.data=data.items;}else{this.data=data;}this.index={};for(var i=0,l=data.length;i<l;i++){this.index[data[i][this.idProperty]]=i;}}});});},"url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\n></div>\n","dojox/grid/_Grid":function(){require({cache:{"url:dojox/grid/resources/_Grid.html":"<div hidefocus=\"hidefocus\" role=\"grid\" dojoAttachEvent=\"onmouseout:_mouseOut\">\n\t<div class=\"dojoxGridMasterHeader\" dojoAttachPoint=\"viewsHeaderNode\" role=\"presentation\"></div>\n\t<div class=\"dojoxGridMasterView\" dojoAttachPoint=\"viewsNode\" role=\"presentation\"></div>\n\t<div class=\"dojoxGridMasterMessages\" style=\"display: none;\" dojoAttachPoint=\"messagesNode\"></div>\n\t<span dojoAttachPoint=\"lastFocusNode\" tabindex=\"0\"></span>\n</div>\n"}});define("dojox/grid/_Grid",["dojo/_base/kernel","../main","dojo/_base/declare","./_Events","./_Scroller","./_Layout","./_View","./_ViewManager","./_RowManager","./_FocusManager","./_EditManager","./Selection","./_RowSelector","./util","dijit/_Widget","dijit/_TemplatedMixin","dijit/CheckedMenuItem","dojo/text!./resources/_Grid.html","dojo/string","dojo/_base/array","dojo/_base/lang","dojo/_base/sniff","dojox/html/metrics","dojo/_base/html","dojo/query","dojo/dnd/common","dojo/i18n!dijit/nls/loading"],function(dojo,_bf1,_bf2,_bf3,_bf4,_bf5,_bf6,_bf7,_bf8,_bf9,_bfa,_bfb,_bfc,util,_bfd,_bfe,_bff,_c00,_c01,_c02,lang,has,_c03,html,_c04){if(!dojo.isCopyKey){dojo.isCopyKey=dojo.dnd.getCopyKeyState;}var _c05=_bf2("dojox.grid._Grid",[_bfd,_bfe,_bf3],{templateString:_c00,classTag:"dojoxGrid",rowCount:5,keepRows:75,rowsPerPage:25,autoWidth:false,initialWidth:"",autoHeight:"",rowHeight:0,autoRender:true,defaultHeight:"15em",height:"",structure:null,elasticView:-1,singleClickEdit:false,selectionMode:"extended",rowSelector:"",columnReordering:false,headerMenu:null,placeholderLabel:"GridColumns",selectable:false,_click:null,loadingMessage:"<span class='dojoxGridLoading'>${loadingState}</span>",errorMessage:"<span class='dojoxGridError'>${errorState}</span>",noDataMessage:"",escapeHTMLInData:true,formatterScope:null,editable:false,summary:"",_setSummaryAttr:"domNode",sortInfo:0,_placeholders:null,_layoutClass:_bf5,buildRendering:function(){this.inherited(arguments);if(!this.domNode.getAttribute("tabIndex")){this.domNode.tabIndex="0";}this.createScroller();this.createLayout();this.createViews();this.createManagers();this.createSelection();this.connect(this.selection,"onSelected","onSelected");this.connect(this.selection,"onDeselected","onDeselected");this.connect(this.selection,"onChanged","onSelectionChanged");_c03.initOnFontResize();this.connect(_c03,"onFontResize","textSizeChanged");util.funnelEvents(this.domNode,this,"doKeyEvent",util.keyEvents);if(this.selectionMode!="none"){this.domNode.setAttribute("aria-multiselectable",this.selectionMode=="single"?"false":"true");}html.addClass(this.domNode,this.classTag);if(!this.isLeftToRight()){html.addClass(this.domNode,this.classTag+"Rtl");}if(this.rowHeight>0){html.addClass(this.viewsNode,this.classTag+"FixedRowHeight");}},postMixInProperties:function(){this.inherited(arguments);var _c06=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=_c01.substitute(this.loadingMessage,_c06);this.errorMessage=_c01.substitute(this.errorMessage,_c06);if(this.srcNodeRef&&this.srcNodeRef.style.height){this.height=this.srcNodeRef.style.height;}this._setAutoHeightAttr(this.autoHeight,true);this.lastScrollTop=this.scrollTop=0;},postCreate:function(){this._placeholders=[];this._setHeaderMenuAttr(this.headerMenu);this._setStructureAttr(this.structure);this._click=[];this.inherited(arguments);if(this.domNode&&this.autoWidth&&this.initialWidth){this.domNode.style.width=this.initialWidth;}if(this.domNode&&!this.editable){html.attr(this.domNode,"aria-readonly","true");}},destroy:function(){this.domNode.onReveal=null;this.domNode.onSizeChange=null;delete this._click;if(this.scroller){this.scroller.destroy();delete this.scroller;}this.edit.destroy();delete this.edit;this.views.destroyViews();if(this.focus){this.focus.destroy();delete this.focus;}if(this.headerMenu&&this._placeholders.length){_c02.forEach(this._placeholders,function(p){p.unReplace(true);});this.headerMenu.unBindDomNode(this.viewsHeaderNode);}this.inherited(arguments);},_setAutoHeightAttr:function(ah,_c07){if(typeof ah=="string"){if(!ah||ah=="false"){ah=false;}else{if(ah=="true"){ah=true;}else{ah=window.parseInt(ah,10);}}}if(typeof ah=="number"){if(isNaN(ah)){ah=false;}if(ah<0){ah=true;}else{if(ah===0){ah=false;}}}this.autoHeight=ah;if(typeof ah=="boolean"){this._autoHeight=ah;}else{if(typeof ah=="number"){this._autoHeight=(ah>=this.get("rowCount"));}else{this._autoHeight=false;}}if(this._started&&!_c07){this.render();}},_getRowCountAttr:function(){return this.updating&&this.invalidated&&this.invalidated.rowCount!=undefined?this.invalidated.rowCount:this.rowCount;},textSizeChanged:function(){this.render();},sizeChange:function(){this.update();},createManagers:function(){this.rows=new _bf8(this);this.focus=new _bf9(this);this.edit=new _bfa(this);},createSelection:function(){this.selection=new _bfb(this);},createScroller:function(){this.scroller=new _bf4();this.scroller.grid=this;this.scroller.renderRow=lang.hitch(this,"renderRow");this.scroller.removeRow=lang.hitch(this,"rowRemoved");},createLayout:function(){this.layout=new this._layoutClass(this);this.connect(this.layout,"moveColumn","onMoveColumn");},onMoveColumn:function(){this.update();},onResizeColumn:function(_c08){},createViews:function(){this.views=new _bf7(this);this.views.createView=lang.hitch(this,"createView");},createView:function(_c09,idx){var c=lang.getObject(_c09);var view=new c({grid:this,index:idx});this.viewsNode.appendChild(view.domNode);this.viewsHeaderNode.appendChild(view.headerNode);this.views.addView(view);html.attr(this.domNode,"align",this.isLeftToRight()?"left":"right");return view;},buildViews:function(){for(var i=0,vs;(vs=this.layout.structure[i]);i++){this.createView(vs.type||_bf1._scopeName+".grid._View",i).setStructure(vs);}this.scroller.setContentNodes(this.views.getContentNodes());},_setStructureAttr:function(_c0a){var s=_c0a;if(s&&lang.isString(s)){dojo.deprecated("dojox.grid._Grid.set('structure', 'objVar')","use dojox.grid._Grid.set('structure', objVar) instead","2.0");s=lang.getObject(s);}this.structure=s;if(!s){if(this.layout.structure){s=this.layout.structure;}else{return;}}this.views.destroyViews();this.focus.focusView=null;if(s!==this.layout.structure){this.layout.setStructure(s);}this._structureChanged();},setStructure:function(_c0b){dojo.deprecated("dojox.grid._Grid.setStructure(obj)","use dojox.grid._Grid.set('structure', obj) instead.","2.0");this._setStructureAttr(_c0b);},getColumnTogglingItems:function(){var _c0c,_c0d=[];_c0c=_c02.map(this.layout.cells,function(cell){if(!cell.menuItems){cell.menuItems=[];}var self=this;var item=new _bff({label:cell.name,checked:!cell.hidden,_gridCell:cell,onChange:function(_c0e){if(self.layout.setColumnVisibility(this._gridCell.index,_c0e)){var _c0f=this._gridCell.menuItems;if(_c0f.length>1){_c02.forEach(_c0f,function(item){if(item!==this){item.setAttribute("checked",_c0e);}},this);}_c0e=_c02.filter(self.layout.cells,function(c){if(c.menuItems.length>1){_c02.forEach(c.menuItems,"item.set('disabled', false);");}else{c.menuItems[0].set("disabled",false);}return !c.hidden;});if(_c0e.length==1){_c02.forEach(_c0e[0].menuItems,"item.set('disabled', true);");}}},destroy:function(){var _c10=_c02.indexOf(this._gridCell.menuItems,this);this._gridCell.menuItems.splice(_c10,1);delete this._gridCell;_bff.prototype.destroy.apply(this,arguments);}});cell.menuItems.push(item);if(!cell.hidden){_c0d.push(item);}return item;},this);if(_c0d.length==1){_c0d[0].set("disabled",true);}return _c0c;},_setHeaderMenuAttr:function(menu){if(this._placeholders&&this._placeholders.length){_c02.forEach(this._placeholders,function(p){p.unReplace(true);});this._placeholders=[];}if(this.headerMenu){this.headerMenu.unBindDomNode(this.viewsHeaderNode);}this.headerMenu=menu;if(!menu){return;}this.headerMenu.bindDomNode(this.viewsHeaderNode);if(this.headerMenu.getPlaceholders){this._placeholders=this.headerMenu.getPlaceholders(this.placeholderLabel);}},setHeaderMenu:function(menu){dojo.deprecated("dojox.grid._Grid.setHeaderMenu(obj)","use dojox.grid._Grid.set('headerMenu', obj) instead.","2.0");this._setHeaderMenuAttr(menu);},setupHeaderMenu:function(){if(this._placeholders&&this._placeholders.length){_c02.forEach(this._placeholders,function(p){if(p._replaced){p.unReplace(true);}p.replace(this.getColumnTogglingItems());},this);}},_fetch:function(_c11){this.setScrollTop(0);},getItem:function(_c12){return null;},showMessage:function(_c13){if(_c13){this.messagesNode.innerHTML=_c13;this.messagesNode.style.display="";}else{this.messagesNode.innerHTML="";this.messagesNode.style.display="none";}},_structureChanged:function(){this.buildViews();if(this.autoRender&&this._started){this.render();}},hasLayout:function(){return this.layout.cells.length;},resize:function(_c14,_c15){this._pendingChangeSize=_c14;this._pendingResultSize=_c15;this.sizeChange();},_getPadBorder:function(){this._padBorder=this._padBorder||html._getPadBorderExtents(this.domNode);return this._padBorder;},_getHeaderHeight:function(){var vns=this.viewsHeaderNode.style,t=vns.display=="none"?0:this.views.measureHeader();vns.height=t+"px";this.views.normalizeHeaderNodeHeight();return t;},_resize:function(_c16,_c17){_c16=_c16||this._pendingChangeSize;_c17=_c17||this._pendingResultSize;delete this._pendingChangeSize;delete this._pendingResultSize;if(!this.domNode){return;}var pn=this.domNode.parentNode;if(!pn||pn.nodeType!=1||!this.hasLayout()||pn.style.visibility=="hidden"||pn.style.display=="none"){return;}var _c18=this._getPadBorder();var hh=undefined;var h;if(this._autoHeight){this.domNode.style.height="auto";}else{if(typeof this.autoHeight=="number"){h=hh=this._getHeaderHeight();h+=(this.scroller.averageRowHeight*this.autoHeight);this.domNode.style.height=h+"px";}else{if(this.domNode.clientHeight<=_c18.h){if(pn==document.body){this.domNode.style.height=this.defaultHeight;}else{if(this.height){this.domNode.style.height=this.height;}else{this.fitTo="parent";}}}}}if(_c17){_c16=_c17;}if(!this._autoHeight&&_c16){html.marginBox(this.domNode,_c16);this.height=this.domNode.style.height;delete this.fitTo;}else{if(this.fitTo=="parent"){h=this._parentContentBoxHeight=(this._parentContentBoxHeight>0?this._parentContentBoxHeight:html._getContentBox(pn).h);this.domNode.style.height=Math.max(0,h)+"px";}}var _c19=_c02.some(this.views.views,function(v){return v.flexCells;});if(!this._autoHeight&&(h||html._getContentBox(this.domNode).h)===0){this.viewsHeaderNode.style.display="none";}else{this.viewsHeaderNode.style.display="block";if(!_c19&&hh===undefined){hh=this._getHeaderHeight();}}if(_c19){hh=undefined;}this.adaptWidth();this.adaptHeight(hh);this.postresize();},adaptWidth:function(){var _c1a=(!this.initialWidth&&this.autoWidth);var w=_c1a?0:this.domNode.clientWidth||(this.domNode.offsetWidth-this._getPadBorder().w),vw=this.views.arrange(1,w);this.views.onEach("adaptWidth");if(_c1a){this.domNode.style.width=vw+"px";}},adaptHeight:function(_c1b){var t=_c1b===undefined?this._getHeaderHeight():_c1b;var h=(this._autoHeight?-1:Math.max(this.domNode.clientHeight-t,0)||0);this.views.onEach("setSize",[0,h]);this.views.onEach("adaptHeight");if(!this._autoHeight){var _c1c=0,_c1d=0;var _c1e=_c02.filter(this.views.views,function(v){var has=v.hasHScrollbar();if(has){_c1c++;}else{_c1d++;}return (!has);});if(_c1c>0&&_c1d>0){_c02.forEach(_c1e,function(v){v.adaptHeight(true);});}}if(this.autoHeight===true||h!=-1||(typeof this.autoHeight=="number"&&this.autoHeight>=this.get("rowCount"))){this.scroller.windowHeight=h;}else{this.scroller.windowHeight=Math.max(this.domNode.clientHeight-t,0);}},startup:function(){if(this._started){return;}this.inherited(arguments);if(this.autoRender){this.render();}},render:function(){if(!this.domNode){return;}if(!this._started){return;}if(!this.hasLayout()){this.scroller.init(0,this.keepRows,this.rowsPerPage);return;}this.update=this.defaultUpdate;this._render();},_render:function(){this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();this.setScrollTop(0);this.postrender();},prerender:function(){this.keepRows=this._autoHeight?0:this.keepRows;this.scroller.setKeepInfo(this.keepRows);this.views.render();this._resize();},postrender:function(){this.postresize();this.focus.initFocusView();html.setSelectable(this.domNode,this.selectable);},postresize:function(){if(this._autoHeight){var size=Math.max(this.views.measureContent())+"px";this.viewsNode.style.height=size;}},renderRow:function(_c1f,_c20){this.views.renderRow(_c1f,_c20,this._skipRowRenormalize);},rowRemoved:function(_c21){this.views.rowRemoved(_c21);},invalidated:null,updating:false,beginUpdate:function(){this.invalidated=[];this.updating=true;},endUpdate:function(){this.updating=false;var i=this.invalidated,r;if(i.all){this.update();}else{if(i.rowCount!=undefined){this.updateRowCount(i.rowCount);}else{for(r in i){this.updateRow(Number(r));}}}this.invalidated=[];},defaultUpdate:function(){if(!this.domNode){return;}if(this.updating){this.invalidated.all=true;return;}this.lastScrollTop=this.scrollTop;this.prerender();this.scroller.invalidateNodes();this.setScrollTop(this.lastScrollTop);this.postrender();},update:function(){this.render();},updateRow:function(_c22){_c22=Number(_c22);if(this.updating){this.invalidated[_c22]=true;}else{this.views.updateRow(_c22);this.scroller.rowHeightChanged(_c22);}},updateRows:function(_c23,_c24){_c23=Number(_c23);_c24=Number(_c24);var i;if(this.updating){for(i=0;i<_c24;i++){this.invalidated[i+_c23]=true;}}else{for(i=0;i<_c24;i++){this.views.updateRow(i+_c23,this._skipRowRenormalize);}this.scroller.rowHeightChanged(_c23);}},updateRowCount:function(_c25){if(this.updating){this.invalidated.rowCount=_c25;}else{this.rowCount=_c25;this._setAutoHeightAttr(this.autoHeight,true);if(this.layout.cells.length){this.scroller.updateRowCount(_c25);}this._resize();if(this.layout.cells.length){this.setScrollTop(this.scrollTop);}}},updateRowStyles:function(_c26){this.views.updateRowStyles(_c26);},getRowNode:function(_c27){if(this.focus.focusView&&!(this.focus.focusView instanceof _bfc)){return this.focus.focusView.rowNodes[_c27];}else{for(var i=0,_c28;(_c28=this.views.views[i]);i++){if(!(_c28 instanceof _bfc)){return _c28.rowNodes[_c27];}}}return null;},rowHeightChanged:function(_c29){this.views.renormalizeRow(_c29);this.scroller.rowHeightChanged(_c29);},fastScroll:true,delayScroll:false,scrollRedrawThreshold:(has("ie")?100:50),scrollTo:function(_c2a){if(!this.fastScroll){this.setScrollTop(_c2a);return;}var _c2b=Math.abs(this.lastScrollTop-_c2a);this.lastScrollTop=_c2a;if(_c2b>this.scrollRedrawThreshold||this.delayScroll){this.delayScroll=true;this.scrollTop=_c2a;this.views.setScrollTop(_c2a);if(this._pendingScroll){window.clearTimeout(this._pendingScroll);}var _c2c=this;this._pendingScroll=window.setTimeout(function(){delete _c2c._pendingScroll;_c2c.finishScrollJob();},200);}else{this.setScrollTop(_c2a);}},finishScrollJob:function(){this.delayScroll=false;this.setScrollTop(this.scrollTop);},setScrollTop:function(_c2d){this.scroller.scroll(this.views.setScrollTop(_c2d));},scrollToRow:function(_c2e){this.setScrollTop(this.scroller.findScrollTop(_c2e)+1);},styleRowNode:function(_c2f,_c30){if(_c30){this.rows.styleRowNode(_c2f,_c30);}},_mouseOut:function(e){this.rows.setOverRow(-2);},getCell:function(_c31){return this.layout.cells[_c31];},setCellWidth:function(_c32,_c33){this.getCell(_c32).unitWidth=_c33;},getCellName:function(_c34){return "Cell "+_c34.index;},canSort:function(_c35){},sort:function(){},getSortAsc:function(_c36){_c36=_c36==undefined?this.sortInfo:_c36;return Boolean(_c36>0);},getSortIndex:function(_c37){_c37=_c37==undefined?this.sortInfo:_c37;return Math.abs(_c37)-1;},setSortIndex:function(_c38,_c39){var si=_c38+1;if(_c39!=undefined){si*=(_c39?1:-1);}else{if(this.getSortIndex()==_c38){si=-this.sortInfo;}}this.setSortInfo(si);},setSortInfo:function(_c3a){if(this.canSort(_c3a)){this.sortInfo=_c3a;this.sort();this.update();}},doKeyEvent:function(e){e.dispatch="do"+e.type;this.onKeyEvent(e);},_dispatch:function(m,e){if(m in this){return this[m](e);}return false;},dispatchKeyEvent:function(e){this._dispatch(e.dispatch,e);},dispatchContentEvent:function(e){this.edit.dispatchEvent(e)||e.sourceView.dispatchContentEvent(e)||this._dispatch(e.dispatch,e);},dispatchHeaderEvent:function(e){e.sourceView.dispatchHeaderEvent(e)||this._dispatch("doheader"+e.type,e);},dokeydown:function(e){this.onKeyDown(e);},doclick:function(e){if(e.cellNode){this.onCellClick(e);}else{this.onRowClick(e);}},dodblclick:function(e){if(e.cellNode){this.onCellDblClick(e);}else{this.onRowDblClick(e);}},docontextmenu:function(e){if(e.cellNode){this.onCellContextMenu(e);}else{this.onRowContextMenu(e);}},doheaderclick:function(e){if(e.cellNode){this.onHeaderCellClick(e);}else{this.onHeaderClick(e);}},doheaderdblclick:function(e){if(e.cellNode){this.onHeaderCellDblClick(e);}else{this.onHeaderDblClick(e);}},doheadercontextmenu:function(e){if(e.cellNode){this.onHeaderCellContextMenu(e);}else{this.onHeaderContextMenu(e);}},doStartEdit:function(_c3b,_c3c){this.onStartEdit(_c3b,_c3c);},doApplyCellEdit:function(_c3d,_c3e,_c3f){this.onApplyCellEdit(_c3d,_c3e,_c3f);},doCancelEdit:function(_c40){this.onCancelEdit(_c40);},doApplyEdit:function(_c41){this.onApplyEdit(_c41);},addRow:function(){this.updateRowCount(this.get("rowCount")+1);},removeSelectedRows:function(){if(this.allItemsSelected){this.updateRowCount(0);}else{this.updateRowCount(Math.max(0,this.get("rowCount")-this.selection.getSelected().length));}this.selection.clear();}});_c05.markupFactory=function(_c42,node,ctor,_c43){var _c44=function(n){var w=html.attr(n,"width")||"auto";if((w!="auto")&&(w.slice(-2)!="em")&&(w.slice(-1)!="%")){w=parseInt(w,10)+"px";}return w;};if(!_c42.structure&&node.nodeName.toLowerCase()=="table"){_c42.structure=_c04("> colgroup",node).map(function(cg){var sv=html.attr(cg,"span");var v={noscroll:(html.attr(cg,"noscroll")=="true")?true:false,__span:(!!sv?parseInt(sv,10):1),cells:[]};if(html.hasAttr(cg,"width")){v.width=_c44(cg);}return v;});if(!_c42.structure.length){_c42.structure.push({__span:Infinity,cells:[]});}_c04("thead > tr",node).forEach(function(tr,_c45){var _c46=0;var _c47=0;var _c48;var _c49=null;_c04("> th",tr).map(function(th){if(!_c49){_c48=0;_c49=_c42.structure[0];}else{if(_c46>=(_c48+_c49.__span)){_c47++;_c48+=_c49.__span;var _c4a=_c49;_c49=_c42.structure[_c47];}}var cell={name:lang.trim(html.attr(th,"name")||th.innerHTML),colSpan:parseInt(html.attr(th,"colspan")||1,10),type:lang.trim(html.attr(th,"cellType")||""),id:lang.trim(html.attr(th,"id")||"")};_c46+=cell.colSpan;var _c4b=html.attr(th,"rowspan");if(_c4b){cell.rowSpan=_c4b;}if(html.hasAttr(th,"width")){cell.width=_c44(th);}if(html.hasAttr(th,"relWidth")){cell.relWidth=window.parseInt(html.attr(th,"relWidth"),10);}if(html.hasAttr(th,"hidden")){cell.hidden=(html.attr(th,"hidden")=="true"||html.attr(th,"hidden")===true);}if(_c43){_c43(th,cell);}cell.type=cell.type?lang.getObject(cell.type):_bf1.grid.cells.Cell;if(cell.type&&cell.type.markupFactory){cell.type.markupFactory(th,cell);}if(!_c49.cells[_c45]){_c49.cells[_c45]=[];}_c49.cells[_c45].push(cell);});});}return new ctor(_c42,node);};return _c05;});},"dijit/Editor":function(){define("dijit/Editor",["require","dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/i18n","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/string","dojo/topic","dojo/_base/window","./_base/focus","./_Container","./Toolbar","./ToolbarSeparator","./layout/_LayoutWidget","./form/ToggleButton","./_editor/_Plugin","./_editor/plugins/EnterKeyHandling","./_editor/html","./_editor/range","./_editor/RichText","./main","dojo/i18n!./_editor/nls/commands"],function(_c4c,_c4d,_c4e,_c4f,i18n,_c50,_c51,_c52,_c53,_c54,keys,lang,has,_c55,_c56,win,_c57,_c58,_c59,_c5a,_c5b,_c5c,_c5d,_c5e,html,_c5f,_c60,_c61){var _c62=_c4e("dijit.Editor",_c60,{plugins:null,extraPlugins:null,constructor:function(){if(!lang.isArray(this.plugins)){this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull",_c5e];}this._plugins=[];this._editInterval=this.editActionInterval*1000;if(has("ie")){this.events.push("onBeforeDeactivate");this.events.push("onBeforeActivate");}},postMixInProperties:function(){this.setValueDeferred=new _c4f();this.inherited(arguments);},postCreate:function(){this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);if(lang.isArray(this.extraPlugins)){this.plugins=this.plugins.concat(this.extraPlugins);}this.inherited(arguments);this.commands=i18n.getLocalization("dijit._editor","commands",this.lang);if(!this.toolbar){this.toolbar=new _c59({ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang});this.header.appendChild(this.toolbar.domNode);}_c4d.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.resolve(true);_c51.add(this.iframe.parentNode,"dijitEditorIFrameContainer");_c51.add(this.iframe,"dijitEditorIFrame");_c50.set(this.iframe,"allowTransparency",true);if(has("webkit")){_c53.set(this.domNode,"KhtmlUserSelect","none");}this.toolbar.startup();this.onNormalizedDisplayChanged();},destroy:function(){_c4d.forEach(this._plugins,function(p){if(p&&p.destroy){p.destroy();}});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments);},addPlugin:function(_c63,_c64){var args=lang.isString(_c63)?{name:_c63}:lang.isFunction(_c63)?{ctor:_c63}:_c63;if(!args.setEditor){var o={"args":args,"plugin":null,"editor":this};if(args.name){if(_c5d.registry[args.name]){o.plugin=_c5d.registry[args.name](args);}else{_c56.publish(_c61._scopeName+".Editor.getPlugin",o);}}if(!o.plugin){try{var pc=args.ctor||lang.getObject(args.name)||_c4c(args.name);if(pc){o.plugin=new pc(args);}}catch(e){throw new Error(this.id+": cannot find plugin ["+args.name+"]");}}if(!o.plugin){throw new Error(this.id+": cannot find plugin ["+args.name+"]");}_c63=o.plugin;}if(arguments.length>1){this._plugins[_c64]=_c63;}else{this._plugins.push(_c63);}_c63.setEditor(this);if(lang.isFunction(_c63.setToolbar)){_c63.setToolbar(this.toolbar);}},resize:function(size){if(size){_c5b.prototype.resize.apply(this,arguments);}},layout:function(){var _c65=(this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+_c52.getPadBorderExtents(this.iframe.parentNode).h+_c52.getMarginExtents(this.iframe.parentNode).h));this.editingArea.style.height=_c65+"px";if(this.iframe){this.iframe.style.height="100%";}this._layoutMode=true;},_onIEMouseDown:function(e){var _c66;var b=this.document.body;var _c67=b.clientWidth;var _c68=b.clientHeight;var _c69=b.clientLeft;var _c6a=b.offsetWidth;var _c6b=b.offsetHeight;var _c6c=b.offsetLeft;if(/^rtl$/i.test(b.dir||"")){if(_c67<_c6a&&e.x>_c67&&e.x<_c6a){_c66=true;}}else{if(e.x<_c69&&e.x>_c6c){_c66=true;}}if(!_c66){if(_c68<_c6b&&e.y>_c68&&e.y<_c6b){_c66=true;}}if(!_c66){delete this._cursorToStart;delete this._savedSelection;if(e.target.tagName=="BODY"){this.defer("placeCursorAtEnd");}this.inherited(arguments);}},onBeforeActivate:function(){this._restoreSelection();},onBeforeDeactivate:function(e){if(this.customUndo){this.endEditing(true);}if(e.target.tagName!="BODY"){this._saveSelection();}},customUndo:true,editActionInterval:3,beginEditing:function(cmd){if(!this._inEditing){this._inEditing=true;this._beginEditing(cmd);}if(this.editActionInterval>0){if(this._editTimer){this._editTimer.remove();}this._editTimer=this.defer("endEditing",this._editInterval);}},_steps:[],_undoedSteps:[],execCommand:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return this[cmd]();}else{if(this.customUndo){this.endEditing();this._beginEditing();}var r=this.inherited(arguments);if(this.customUndo){this._endEditing();}return r;}},_pasteImpl:function(){return this._clipboardCommand("paste");},_cutImpl:function(){return this._clipboardCommand("cut");},_copyImpl:function(){return this._clipboardCommand("copy");},_clipboardCommand:function(cmd){var r;try{r=this.document.execCommand(cmd,false,null);if(has("webkit")&&!r){throw {code:1011};}}catch(e){if(e.code==1011||(e.code==9&&has("opera"))){var sub=_c55.substitute,_c6d={cut:"X",copy:"C",paste:"V"};alert(sub(this.commands.systemShortcut,[this.commands[cmd],sub(this.commands[has("mac")?"appleKey":"ctrlKey"],[_c6d[cmd]])]));}r=false;}return r;},queryCommandEnabled:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return cmd=="undo"?(this._steps.length>1):(this._undoedSteps.length>0);}else{return this.inherited(arguments);}},_moveToBookmark:function(b){var _c6e=b.mark;var mark=b.mark;var col=b.isCollapsed;var r,_c6f,_c70,sel;if(mark){if(has("ie")<9){if(lang.isArray(mark)){_c6e=[];_c4d.forEach(mark,function(n){_c6e.push(_c5f.getNode(n,this.editNode));},this);win.withGlobal(this.window,"moveToBookmark",_c57,[{mark:_c6e,isCollapsed:col}]);}else{if(mark.startContainer&&mark.endContainer){sel=_c5f.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=_c5f.create(this.window);_c6f=_c5f.getNode(mark.startContainer,this.editNode);_c70=_c5f.getNode(mark.endContainer,this.editNode);if(_c6f&&_c70){r.setStart(_c6f,mark.startOffset);r.setEnd(_c70,mark.endOffset);sel.addRange(r);}}}}}else{sel=_c5f.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=_c5f.create(this.window);_c6f=_c5f.getNode(mark.startContainer,this.editNode);_c70=_c5f.getNode(mark.endContainer,this.editNode);if(_c6f&&_c70){r.setStart(_c6f,mark.startOffset);r.setEnd(_c70,mark.endOffset);sel.addRange(r);}}}}},_changeToStep:function(from,to){this.setValue(to.text);var b=to.bookmark;if(!b){return;}this._moveToBookmark(b);},undo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._steps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(s,this._steps[this._steps.length-1]);this._undoedSteps.push(s);this.onDisplayChanged();delete this._undoRedoActive;ret=true;}delete this._undoRedoActive;}return ret;},redo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._undoedSteps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(this._steps[this._steps.length-1],s);this._steps.push(s);this.onDisplayChanged();ret=true;}delete this._undoRedoActive;}return ret;},endEditing:function(_c71){if(this._editTimer){this._editTimer=this._editTimer.remove();}if(this._inEditing){this._endEditing(_c71);this._inEditing=false;}},_getBookmark:function(){var b=win.withGlobal(this.window,_c57.getBookmark);var tmp=[];if(b&&b.mark){var mark=b.mark;if(has("ie")<9){var sel=_c5f.getSelection(this.window);if(!lang.isArray(mark)){if(sel){var _c72;if(sel.rangeCount){_c72=sel.getRangeAt(0);}if(_c72){b.mark=_c72.cloneRange();}else{b.mark=win.withGlobal(this.window,_c57.getBookmark);}}}else{_c4d.forEach(b.mark,function(n){tmp.push(_c5f.getIndex(n,this.editNode).o);},this);b.mark=tmp;}}try{if(b.mark&&b.mark.startContainer){tmp=_c5f.getIndex(b.mark.startContainer,this.editNode).o;b.mark={startContainer:tmp,startOffset:b.mark.startOffset,endContainer:b.mark.endContainer===b.mark.startContainer?tmp:_c5f.getIndex(b.mark.endContainer,this.editNode).o,endOffset:b.mark.endOffset};}}catch(e){b.mark=null;}}return b;},_beginEditing:function(){if(this._steps.length===0){this._steps.push({"text":html.getChildrenHtml(this.editNode),"bookmark":this._getBookmark()});}},_endEditing:function(){var v=html.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:v,bookmark:this._getBookmark()});},onKeyDown:function(e){if(!has("ie")&&!this.iframe&&e.keyCode==keys.TAB&&!this.tabIndent){this._saveSelection();}if(!this.customUndo){this.inherited(arguments);return;}var k=e.keyCode;if(e.ctrlKey&&!e.altKey){if(k==90||k==122){_c54.stop(e);this.undo();return;}else{if(k==89||k==121){_c54.stop(e);this.redo();return;}}}this.inherited(arguments);switch(k){case keys.ENTER:case keys.BACKSPACE:case keys.DELETE:this.beginEditing();break;case 88:case 86:if(e.ctrlKey&&!e.altKey&&!e.metaKey){this.endEditing();if(e.keyCode==88){this.beginEditing("cut");}else{this.beginEditing("paste");}this.defer("endEditing",1);break;}default:if(!e.ctrlKey&&!e.altKey&&!e.metaKey&&(e.keyCode<keys.F1||e.keyCode>keys.F15)){this.beginEditing();break;}case keys.ALT:this.endEditing();break;case keys.UP_ARROW:case keys.DOWN_ARROW:case keys.LEFT_ARROW:case keys.RIGHT_ARROW:case keys.HOME:case keys.END:case keys.PAGE_UP:case keys.PAGE_DOWN:this.endEditing(true);break;case keys.CTRL:case keys.SHIFT:case keys.TAB:break;}},_onBlur:function(){this.inherited(arguments);this.endEditing(true);},_saveSelection:function(){try{this._savedSelection=this._getBookmark();}catch(e){}},_restoreSelection:function(){if(this._savedSelection){delete this._cursorToStart;if(win.withGlobal(this.window,"isCollapsed",_c57)){this._moveToBookmark(this._savedSelection);}delete this._savedSelection;}},onClick:function(){this.endEditing(true);this.inherited(arguments);},replaceValue:function(html){if(!this.customUndo){this.inherited(arguments);}else{if(this.isClosed){this.setValue(html);}else{this.beginEditing();if(!html){html="&#160;";}this.setValue(html);this.endEditing();}}},_setDisabledAttr:function(_c73){this.setValueDeferred.then(lang.hitch(this,function(){if((!this.disabled&&_c73)||(!this._buttonEnabledPlugins&&_c73)){_c4d.forEach(this._plugins,function(p){p.set("disabled",true);});}else{if(this.disabled&&!_c73){_c4d.forEach(this._plugins,function(p){p.set("disabled",false);});}}}));this.inherited(arguments);},_setStateClass:function(){try{this.inherited(arguments);if(this.document&&this.document.body){_c53.set(this.document.body,"color",_c53.get(this.iframe,"color"));}}catch(e){}}});function _c74(args){return new _c5d({command:args.name});};function _c75(args){return new _c5d({buttonClass:_c5c,command:args.name});};lang.mixin(_c5d.registry,{"undo":_c74,"redo":_c74,"cut":_c74,"copy":_c74,"paste":_c74,"insertOrderedList":_c74,"insertUnorderedList":_c74,"indent":_c74,"outdent":_c74,"justifyCenter":_c74,"justifyFull":_c74,"justifyLeft":_c74,"justifyRight":_c74,"delete":_c74,"selectAll":_c74,"removeFormat":_c74,"unlink":_c74,"insertHorizontalRule":_c74,"bold":_c75,"italic":_c75,"underline":_c75,"strikethrough":_c75,"subscript":_c75,"superscript":_c75,"|":function(){return new _c5d({setEditor:function(_c76){this.editor=_c76;this.button=new _c5a({ownerDocument:_c76.ownerDocument});}});}});return _c62;});},"esri/tasks/ProjectParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/lang","esri/geometry/jsonUtils"],function(_c77,lang,_c78,_c79,has,_c7a,_c7b,_c7c){var _c7d=_c77(null,{declaredClass:"esri.tasks.ProjectParameters",geometries:null,outSR:null,transformation:null,transformForward:null,toJson:function(){var _c7e=_c78.map(this.geometries,function(geom){return geom.toJson();});var json={};json.outSR=this.outSR.wkid||_c79.toJson(this.outSR.toJson());json.inSR=this.geometries[0].spatialReference.wkid||_c79.toJson(this.geometries[0].spatialReference.toJson());json.geometries=_c79.toJson({geometryType:_c7c.getJsonType(this.geometries[0]),geometries:_c7e});if(this.transformation){json.transformation=this.transformation.wkid||_c79.toJson(this.transformation);}if(_c7b.isDefined(this.transformForward)){json.transformForward=this.transformForward;}return json;}});if(has("extend-esri")){lang.setObject("tasks.ProjectParameters",_c7d,_c7a);}return _c7d;});},"dijit/Toolbar":function(){define("dijit/Toolbar",["require","dojo/_base/declare","dojo/has","dojo/keys","dojo/ready","./_Widget","./_KeyNavContainer","./_TemplatedMixin"],function(_c7f,_c80,has,keys,_c81,_c82,_c83,_c84){if(has("dijit-legacy-requires")){_c81(0,function(){var _c85=["dijit/ToolbarSeparator"];_c7f(_c85);});}return _c80("dijit.Toolbar",[_c82,_c84,_c83],{templateString:"<div class=\"dijit\" role=\"toolbar\" tabIndex=\"${tabIndex}\" data-dojo-attach-point=\"containerNode\">"+"</div>",baseClass:"dijitToolbar",postCreate:function(){this.inherited(arguments);this.connectKeyNavHandlers(this.isLeftToRight()?[keys.LEFT_ARROW]:[keys.RIGHT_ARROW],this.isLeftToRight()?[keys.RIGHT_ARROW]:[keys.LEFT_ARROW]);}});});},"esri/layers/SnapshotMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/SpatialReference","esri/tasks/query","esri/layers/RenderMode"],function(_c86,lang,has,_c87,_c88,_c89,_c8a){var _c8b=_c86([_c8a],{declaredClass:"esri.layers._SnapshotMode",constructor:function(_c8c){this.featureLayer=_c8c;this._featureMap={};this._drawFeatures=lang.hitch(this,this._drawFeatures);this._queryErrorHandler=lang.hitch(this,this._queryErrorHandler);},startup:function(){if(this.featureLayer._collection){this._applyTimeFilter();}else{this._fetchAll();}},propertyChangeHandler:function(type){if(this._init){if(type){if(this.featureLayer._collection){console.log("FeatureLayer: layer created by value (from a feature collection) does not support definition expressions and time definitions. Layer id = "+this.featureLayer.id);}else{this._fetchAll();}}else{this._applyTimeFilter();}}},drawFeature:function(_c8d){var _c8e=this.featureLayer,_c8f=_c8e.objectIdField,oid=_c8d.attributes[_c8f];this._addFeatureIIf(oid,_c8d);this._incRefCount(oid);},resume:function(){this.propertyChangeHandler(0);},refresh:function(){var _c90=this.featureLayer;if(_c90._collection){_c90._fireUpdateStart();_c90._refresh(true);_c90._fireUpdateEnd();}else{this._fetchAll();}},_getRequestId:function(_c91){var id="_"+_c91.name+_c91.layerId+_c91._ulid;return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_fetchAll:function(){var _c92=this.featureLayer;if(_c92._collection){return;}_c92._fireUpdateStart();this._clearIIf();this._sendRequest();},_sendRequest:function(){var map=this.map,_c93=this.featureLayer,_c94=_c93.getDefinitionExpression();var _c95=new _c89();_c95.outFields=_c93._getOutFields();_c95.where=_c94||"1=1";_c95.returnGeometry=true;_c95.outSpatialReference=new _c88(map.spatialReference.toJson());_c95.timeExtent=_c93.getTimeDefinition();_c95.maxAllowableOffset=_c93._maxOffset;if(_c93._ts){_c95._ts=(new Date()).getTime();}var _c96;if(_c93._usePatch){_c96=this._getRequestId(_c93);this._cancelPendingRequest(null,_c96);}_c93._task.execute(_c95,this._drawFeatures,this._queryErrorHandler,_c96);},_drawFeatures:function(_c97){this._purgeRequests();var _c98=_c97.features,_c99=this.featureLayer,_c9a=_c99.objectIdField,i,len=_c98.length,_c9b,oid;for(i=0;i<len;i++){_c9b=_c98[i];oid=_c9b.attributes[_c9a];this._addFeatureIIf(oid,_c9b);this._incRefCount(oid);}this._applyTimeFilter(true);_c99._fireUpdateEnd(null,_c97.exceededTransferLimit?{queryLimitExceeded:true}:null);if(_c97.exceededTransferLimit){_c99.onQueryLimitExceeded();}},_queryErrorHandler:function(err){this._purgeRequests();var _c9c=this.featureLayer;_c9c._errorHandler(err);_c9c._fireUpdateEnd(err);}});if(has("extend-esri")){lang.setObject("layers._SnapshotMode",_c8b,_c87);}return _c8b;});},"url:dojox/grid/resources/_Grid.html":"<div hidefocus=\"hidefocus\" role=\"grid\" dojoAttachEvent=\"onmouseout:_mouseOut\">\n\t<div class=\"dojoxGridMasterHeader\" dojoAttachPoint=\"viewsHeaderNode\" role=\"presentation\"></div>\n\t<div class=\"dojoxGridMasterView\" dojoAttachPoint=\"viewsNode\" role=\"presentation\"></div>\n\t<div class=\"dojoxGridMasterMessages\" style=\"display: none;\" dojoAttachPoint=\"messagesNode\"></div>\n\t<span dojoAttachPoint=\"lastFocusNode\" tabindex=\"0\"></span>\n</div>\n","dijit/DropDownMenu":function(){require({cache:{"url:dijit/templates/Menu.html":"<table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" role=\"menu\" tabIndex=\"${tabIndex}\"\n\t   data-dojo-attach-event=\"onkeypress:_onKeyPress\" cellspacing=\"0\">\n\t<tbody class=\"dijitReset\" data-dojo-attach-point=\"containerNode\"></tbody>\n</table>\n"}});define("dijit/DropDownMenu",["dojo/_base/declare","dojo/_base/event","dojo/keys","dojo/text!./templates/Menu.html","./_OnDijitClickMixin","./_MenuBase"],function(_c9d,_c9e,keys,_c9f,_ca0,_ca1){return _c9d("dijit.DropDownMenu",[_ca1,_ca0],{templateString:_c9f,baseClass:"dijitMenu",postCreate:function(){this.inherited(arguments);var l=this.isLeftToRight();this._openSubMenuKey=l?keys.RIGHT_ARROW:keys.LEFT_ARROW;this._closeSubMenuKey=l?keys.LEFT_ARROW:keys.RIGHT_ARROW;this.connectKeyNavHandlers([keys.UP_ARROW],[keys.DOWN_ARROW]);},_onKeyPress:function(evt){if(evt.ctrlKey||evt.altKey){return;}switch(evt.charOrCode){case this._openSubMenuKey:this._moveToPopup(evt);_c9e.stop(evt);break;case this._closeSubMenuKey:if(this.parentMenu){if(this.parentMenu._isMenuBar){this.parentMenu.focusPrev();}else{this.onCancel(false);}}else{_c9e.stop(evt);}break;}}});});},"dijit/_editor/plugins/LinkDialog":function(){define("dijit/_editor/plugins/LinkDialog",["require","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/_base/query","dojo/string","../../_Widget","../_Plugin","../../form/DropDownButton","../range"],function(_ca2,_ca3,_ca4,keys,lang,has,_ca5,_ca6,_ca7,_ca8,_ca9,_caa){var _cab=_ca3("dijit._editor.plugins.LinkDialog",_ca8,{buttonClass:_ca9,useDefaultCommand:false,urlRegExp:"((https?|ftps?|file)\\://|./|../|/|)(/[a-zA-Z]{1,1}:/|)(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)*(?:[a-zA-Z](?:[-\\da-zA-Z]{0,80}[\\da-zA-Z])?)\\.?)|(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])|(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]|(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]|(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])|0[xX]0*[\\da-fA-F]{1,8}|([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}|([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])))(\\:\\d+)?(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]{0,}(?:\\?[^?#\\s/]*)?(?:#.*)?)?)?",emailRegExp:"<?(mailto\\:)([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+"+"@"+"((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)|localhost|^[^-][a-zA-Z0-9_-]*>?",htmlTemplate:"<a href=\"${urlInput}\" _djrealurl=\"${urlInput}\""+" target=\"${targetSelect}\""+">${textInput}</a>",tag:"a",_hostRxp:/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,_userAtRxp:/^([!#-'*+\-\/-9=?A-Z^-~]+[.])*[!#-'*+\-\/-9=?A-Z^-~]+@/i,linkDialogTemplate:["<table role='presentation'><tr><td>","<label for='${id}_urlInput'>${url}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='true' "+"id='${id}_urlInput' name='urlInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_textInput'>${text}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='true' id='${id}_textInput' "+"name='textInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_targetSelect'>${target}</label>","</td><td>","<select id='${id}_targetSelect' name='targetSelect' data-dojo-type='dijit.form.Select'>","<option selected='selected' value='_self'>${currentWindow}</option>","<option value='_blank'>${newWindow}</option>","<option value='_top'>${topWindow}</option>","<option value='_parent'>${parentWindow}</option>","</select>","</td></tr><tr><td colspan='2'>","<button data-dojo-type='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button>","<button data-dojo-type='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button>","</td></tr></table>"].join(""),_initButton:function(){this.inherited(arguments);this.button.loadDropDown=lang.hitch(this,"_loadDropDown");this._connectTagEvents();},_loadDropDown:function(_cac){_ca2(["dojo/i18n","../../TooltipDialog","../../registry","../../form/Button","../../form/Select","../../form/ValidationTextBox","dojo/i18n!../../nls/common","dojo/i18n!../nls/LinkDialog"],lang.hitch(this,function(i18n,_cad,_cae){var _caf=this;this.tag=this.command=="insertImage"?"img":"a";var _cb0=lang.delegate(i18n.getLocalization("dijit","common",this.lang),i18n.getLocalization("dijit._editor","LinkDialog",this.lang));var _cb1=(this.dropDown=this.button.dropDown=new _cad({title:_cb0[this.command+"Title"],ownerDocument:this.editor.ownerDocument,dir:this.editor.dir,execute:lang.hitch(this,"setValue"),onOpen:function(){_caf._onOpenDialog();_cad.prototype.onOpen.apply(this,arguments);},onCancel:function(){setTimeout(lang.hitch(_caf,"_onCloseDialog"),0);}}));_cb0.urlRegExp=this.urlRegExp;_cb0.id=_cae.getUniqueId(this.editor.id);this._uniqueId=_cb0.id;this._setContent(_cb1.title+"<div style='border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'></div>"+_ca6.substitute(this.linkDialogTemplate,_cb0));_cb1.startup();this._urlInput=_cae.byId(this._uniqueId+"_urlInput");this._textInput=_cae.byId(this._uniqueId+"_textInput");this._setButton=_cae.byId(this._uniqueId+"_setButton");this.connect(_cae.byId(this._uniqueId+"_cancelButton"),"onClick",function(){this.dropDown.onCancel();});if(this._urlInput){this.connect(this._urlInput,"onChange","_checkAndFixInput");}if(this._textInput){this.connect(this._textInput,"onChange","_checkAndFixInput");}this._urlRegExp=new RegExp("^"+this.urlRegExp+"$","i");this._emailRegExp=new RegExp("^"+this.emailRegExp+"$","i");this._urlInput.isValid=lang.hitch(this,function(){var _cb2=this._urlInput.get("value");return this._urlRegExp.test(_cb2)||this._emailRegExp.test(_cb2);});this.connect(_cb1.domNode,"onkeypress",function(e){if(e&&e.charOrCode==keys.ENTER&&!e.shiftKey&&!e.metaKey&&!e.ctrlKey&&!e.altKey){if(!this._setButton.get("disabled")){_cb1.onExecute();_cb1.execute(_cb1.get("value"));}}});_cac();}));},_checkAndFixInput:function(){var self=this;var url=this._urlInput.get("value");var _cb3=function(url){var _cb4=false;var _cb5=false;if(url&&url.length>1){url=lang.trim(url);if(url.indexOf("mailto:")!==0){if(url.indexOf("/")>0){if(url.indexOf("://")===-1){if(url.charAt(0)!=="/"&&url.indexOf("./")&&url.indexOf("../")!==0){if(self._hostRxp.test(url)){_cb4=true;}}}}else{if(self._userAtRxp.test(url)){_cb5=true;}}}}if(_cb4){self._urlInput.set("value","http://"+url);}if(_cb5){self._urlInput.set("value","mailto:"+url);}self._setButton.set("disabled",!self._isValid());};if(this._delayedCheck){clearTimeout(this._delayedCheck);this._delayedCheck=null;}this._delayedCheck=setTimeout(function(){_cb3(url);},250);},_connectTagEvents:function(){this.editor.onLoadDeferred.then(lang.hitch(this,function(){this.connect(this.editor.editNode,"ondblclick",this._onDblClick);}));},_isValid:function(){return this._urlInput.isValid()&&this._textInput.isValid();},_setContent:function(_cb6){this.dropDown.set({parserScope:"dojo",content:_cb6});},_checkValues:function(args){if(args&&args.urlInput){args.urlInput=args.urlInput.replace(/"/g,"&quot;");}return args;},setValue:function(args){this._onCloseDialog();if(has("ie")<9){var sel=_caa.getSelection(this.editor.window);var _cb7=sel.getRangeAt(0);var a=_cb7.endContainer;if(a.nodeType===3){a=a.parentNode;}if(a&&(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){a=this.editor._sCall("getSelectedElement",[this.tag]);}if(a&&(a.nodeName&&a.nodeName.toLowerCase()===this.tag)){if(this.editor.queryCommandEnabled("unlink")){this.editor._sCall("selectElementChildren",[a]);this.editor.execCommand("unlink");}}}args=this._checkValues(args);this.editor.execCommand("inserthtml",_ca6.substitute(this.htmlTemplate,args));_ca5("a",this.editor.document).forEach(function(a){if(!a.innerHTML&&!_ca4.has(a,"name")){a.parentNode.removeChild(a);}},this);},_onCloseDialog:function(){this.editor.focus();},_getCurrentValues:function(a){var url,text,_cb8;if(a&&a.tagName.toLowerCase()===this.tag){url=a.getAttribute("_djrealurl")||a.getAttribute("href");_cb8=a.getAttribute("target")||"_self";text=a.textContent||a.innerText;this.editor._sCall("selectElement",[a,true]);}else{text=this.editor._sCall("getSelectedText");}return {urlInput:url||"",textInput:text||"",targetSelect:_cb8||""};},_onOpenDialog:function(){var a,b,fc;if(has("ie")){var sel=_caa.getSelection(this.editor.window);if(sel.rangeCount){var _cb9=sel.getRangeAt(0);a=_cb9.endContainer;if(a.nodeType===3){a=a.parentNode;}if(a&&(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){a=this.editor._sCall("getSelectedElement",[this.tag]);}if(!a||(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){b=this.editor._sCall("getAncestorElement",[this.tag]);if(b&&(b.nodeName&&b.nodeName.toLowerCase()==this.tag)){a=b;this.editor._sCall("selectElement",[a]);}else{if(_cb9.startContainer===_cb9.endContainer){fc=_cb9.startContainer.firstChild;if(fc&&(fc.nodeName&&fc.nodeName.toLowerCase()==this.tag)){a=fc;this.editor._sCall("selectElement",[a]);}}}}}}else{a=this.editor._sCall("getAncestorElement",[this.tag]);}this.dropDown.reset();this._setButton.set("disabled",true);this.dropDown.set("value",this._getCurrentValues(a));},_onDblClick:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag&&_ca4.get(t,"href")){var _cba=this.editor;this.editor._sCall("selectElement",[t]);_cba.onDisplayChanged();if(_cba._updateTimer){_cba._updateTimer.remove();delete _cba._updateTimer;}_cba.onNormalizedDisplayChanged();var _cbb=this.button;setTimeout(function(){_cbb.set("disabled",false);_cbb.loadAndOpenDropDown().then(function(){if(_cbb.dropDown.focus){_cbb.dropDown.focus();}});},10);}}}});var _cbc=_ca3("dijit._editor.plugins.ImgLinkDialog",[_cab],{linkDialogTemplate:["<table role='presentation'><tr><td>","<label for='${id}_urlInput'>${url}</label>","</td><td>","<input dojoType='dijit.form.ValidationTextBox' regExp='${urlRegExp}' "+"required='true' id='${id}_urlInput' name='urlInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_textInput'>${text}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='false' id='${id}_textInput' "+"name='textInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","</td><td>","</td></tr><tr><td colspan='2'>","<button data-dojo-type='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button>","<button data-dojo-type='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button>","</td></tr></table>"].join(""),htmlTemplate:"<img src=\"${urlInput}\" _djrealurl=\"${urlInput}\" alt=\"${textInput}\" />",tag:"img",_getCurrentValues:function(img){var url,text;if(img&&img.tagName.toLowerCase()===this.tag){url=img.getAttribute("_djrealurl")||img.getAttribute("src");text=img.getAttribute("alt");this.editor._sCall("selectElement",[img,true]);}else{text=this.editor._sCall("getSelectedText",[]);}return {urlInput:url||"",textInput:text||""};},_isValid:function(){return this._urlInput.isValid();},_connectTagEvents:function(){this.inherited(arguments);this.editor.onLoadDeferred.then(lang.hitch(this,function(){this.connect(this.editor.editNode,"onmousedown",this._selectTag);}));},_selectTag:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag){this.editor._sCall("selectElement",[t]);}}},_checkValues:function(args){if(args&&args.urlInput){args.urlInput=args.urlInput.replace(/"/g,"&quot;");}if(args&&args.textInput){args.textInput=args.textInput.replace(/"/g,"&quot;");}return args;},_onDblClick:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag&&_ca4.get(t,"src")){var _cbd=this.editor;this.editor._sCall("selectElement",[t]);_cbd.onDisplayChanged();if(_cbd._updateTimer){_cbd._updateTimer.remove();delete _cbd._updateTimer;}_cbd.onNormalizedDisplayChanged();var _cbe=this.button;setTimeout(function(){_cbe.set("disabled",false);_cbe.loadAndOpenDropDown().then(function(){if(_cbe.dropDown.focus){_cbe.dropDown.focus();}});},10);}}}});_ca8.registry["createLink"]=function(){return new _cab({command:"createLink"});};_ca8.registry["insertImage"]=function(){return new _cbc({command:"insertImage"});};_cab.ImgLinkDialog=_cbc;return _cab;});},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(lang,_cbf,_cc0){var _cc1={};lang.setObject("dojo.data.util.simpleFetch",_cc1);_cc1.errorHandler=function(_cc2,_cc3){if(_cc3.onError){var _cc4=_cc3.scope||_cbf.global;_cc3.onError.call(_cc4,_cc2,_cc3);}};_cc1.fetchHandler=function(_cc5,_cc6){var _cc7=_cc6.abort||null,_cc8=false,_cc9=_cc6.start?_cc6.start:0,_cca=(_cc6.count&&(_cc6.count!==Infinity))?(_cc9+_cc6.count):_cc5.length;_cc6.abort=function(){_cc8=true;if(_cc7){_cc7.call(_cc6);}};var _ccb=_cc6.scope||_cbf.global;if(!_cc6.store){_cc6.store=this;}if(_cc6.onBegin){_cc6.onBegin.call(_ccb,_cc5.length,_cc6);}if(_cc6.sort){_cc5.sort(_cc0.createSortFunction(_cc6.sort,this));}if(_cc6.onItem){for(var i=_cc9;(i<_cc5.length)&&(i<_cca);++i){var item=_cc5[i];if(!_cc8){_cc6.onItem.call(_ccb,item,_cc6);}}}if(_cc6.onComplete&&!_cc8){var _ccc=null;if(!_cc6.onItem){_ccc=_cc5.slice(_cc9,_cca);}_cc6.onComplete.call(_ccb,_ccc,_cc6);}};_cc1.fetch=function(_ccd){_ccd=_ccd||{};if(!_ccd.store){_ccd.store=this;}this._fetchItems(_ccd,lang.hitch(this,"fetchHandler"),lang.hitch(this,"errorHandler"));return _ccd;};return _cc1;});},"dijit/Menu":function(){define("dijit/Menu",["require","dojo/_base/array","dojo/_base/declare","dojo/_base/event","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","./popup","./DropDownMenu","dojo/ready"],function(_cce,_ccf,_cd0,_cd1,dom,_cd2,_cd3,_cd4,keys,lang,on,has,win,_cd5,pm,_cd6,_cd7){if(has("dijit-legacy-requires")){_cd7(0,function(){var _cd8=["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"];_cce(_cd8);});}return _cd0("dijit.Menu",_cd6,{constructor:function(){this._bindings=[];},targetNodeIds:[],selector:"",contextMenuForWindow:false,leftClickToOpen:false,refocus:true,postCreate:function(){if(this.contextMenuForWindow){this.bindDomNode(this.ownerDocumentBody);}else{_ccf.forEach(this.targetNodeIds,this.bindDomNode,this);}this.inherited(arguments);},_iframeContentWindow:function(_cd9){return _cd5.get(this._iframeContentDocument(_cd9))||this._iframeContentDocument(_cd9)["__parent__"]||(_cd9.name&&win.doc.frames[_cd9.name])||null;},_iframeContentDocument:function(_cda){return _cda.contentDocument||(_cda.contentWindow&&_cda.contentWindow.document)||(_cda.name&&win.doc.frames[_cda.name]&&win.doc.frames[_cda.name].document)||null;},bindDomNode:function(node){node=dom.byId(node,this.ownerDocument);var cn;if(node.tagName.toLowerCase()=="iframe"){var _cdb=node,_cdc=this._iframeContentWindow(_cdb);cn=win.body(_cdc.document);}else{cn=(node==win.body(this.ownerDocument)?this.ownerDocument.documentElement:node);}var _cdd={node:node,iframe:_cdb};_cd2.set(node,"_dijitMenu"+this.id,this._bindings.push(_cdd));var _cde=lang.hitch(this,function(cn){var _cdf=this.selector,_ce0=_cdf?function(_ce1){return on.selector(_cdf,_ce1);}:function(_ce2){return _ce2;},self=this;return [on(cn,_ce0(this.leftClickToOpen?"click":"contextmenu"),function(evt){_cd1.stop(evt);self._scheduleOpen(this,_cdb,{x:evt.pageX,y:evt.pageY});}),on(cn,_ce0("keydown"),function(evt){if(evt.shiftKey&&evt.keyCode==keys.F10){_cd1.stop(evt);self._scheduleOpen(this,_cdb);}})];});_cdd.connects=cn?_cde(cn):[];if(_cdb){_cdd.onloadHandler=lang.hitch(this,function(){var _ce3=this._iframeContentWindow(_cdb);cn=win.body(_ce3.document);_cdd.connects=_cde(cn);});if(_cdb.addEventListener){_cdb.addEventListener("load",_cdd.onloadHandler,false);}else{_cdb.attachEvent("onload",_cdd.onloadHandler);}}},unBindDomNode:function(_ce4){var node;try{node=dom.byId(_ce4,this.ownerDocument);}catch(e){return;}var _ce5="_dijitMenu"+this.id;if(node&&_cd2.has(node,_ce5)){var bid=_cd2.get(node,_ce5)-1,b=this._bindings[bid],h;while((h=b.connects.pop())){h.remove();}var _ce6=b.iframe;if(_ce6){if(_ce6.removeEventListener){_ce6.removeEventListener("load",b.onloadHandler,false);}else{_ce6.detachEvent("onload",b.onloadHandler);}}_cd2.remove(node,_ce5);delete this._bindings[bid];}},_scheduleOpen:function(_ce7,_ce8,_ce9){if(!this._openTimer){this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:_ce7,iframe:_ce8,coords:_ce9});},1);}},_openMyself:function(args){var _cea=args.target,_ceb=args.iframe,_cec=args.coords;this.currentTarget=_cea;if(_cec){if(_ceb){var ifc=_cd3.position(_ceb,true),_ced=this._iframeContentWindow(_ceb),_cee=_cd3.docScroll(_ced.document);var cs=_cd4.getComputedStyle(_ceb),tp=_cd4.toPixelValue,left=(has("ie")&&has("quirks")?0:tp(_ceb,cs.paddingLeft))+(has("ie")&&has("quirks")?tp(_ceb,cs.borderLeftWidth):0),top=(has("ie")&&has("quirks")?0:tp(_ceb,cs.paddingTop))+(has("ie")&&has("quirks")?tp(_ceb,cs.borderTopWidth):0);_cec.x+=ifc.x+left-_cee.x;_cec.y+=ifc.y+top-_cee.y;}}else{_cec=_cd3.position(_cea,true);_cec.x+=10;_cec.y+=10;}var self=this;var _cef=this._focusManager.get("prevNode");var _cf0=this._focusManager.get("curNode");var _cf1=!_cf0||(dom.isDescendant(_cf0,this.domNode))?_cef:_cf0;function _cf2(){if(self.refocus&&_cf1){_cf1.focus();}pm.close(self);};pm.open({popup:this,x:_cec.x,y:_cec.y,onExecute:_cf2,onCancel:_cf2,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);pm.close(this);};},destroy:function(){_ccf.forEach(this._bindings,function(b){if(b){this.unBindDomNode(b.node);}},this);this.inherited(arguments);}});});},"esri/toolbars/_toolbar":function(){define("esri/toolbars/_toolbar",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_cf3,lang,has,_cf4){var TB=_cf3(null,{declaredClass:"esri.toolbars._Toolbar",constructor:function(map){this.map=map;},_cursors:{"move":"pointer","move-v":"pointer","move-gv":"pointer","box0":"nw-resize","box1":"n-resize","box2":"ne-resize","box3":"e-resize","box4":"se-resize","box5":"s-resize","box6":"sw-resize","box7":"w-resize","box8":"pointer"},_deactivateMapTools:function(nav,_cf5,_cf6,_cf7){var map=this.map;if(nav){this._mapNavState={isDoubleClickZoom:map.isDoubleClickZoom,isClickRecenter:map.isClickRecenter,isPan:map.isPan,isRubberBandZoom:map.isRubberBandZoom,isKeyboardNavigation:map.isKeyboardNavigation,isScrollWheelZoom:map.isScrollWheelZoom};map.disableDoubleClickZoom();map.disableClickRecenter();map.disablePan();map.disableRubberBandZoom();map.disableKeyboardNavigation();}if(_cf5){map.hideZoomSlider();}if(_cf6){map.hidePanArrows();}if(_cf7){map.graphics.disableMouseEvents();}},_activateMapTools:function(nav,_cf8,_cf9,_cfa){var map=this.map,_cfb=this._mapNavState;if(nav&&_cfb){if(_cfb.isDoubleClickZoom){map.enableDoubleClickZoom();}if(_cfb.isClickRecenter){map.enableClickRecenter();}if(_cfb.isPan){map.enablePan();}if(_cfb.isRubberBandZoom){map.enableRubberBandZoom();}if(_cfb.isKeyboardNavigation){map.enableKeyboardNavigation();}if(_cfb.isScrollWheelZoom){map.enableScrollWheelZoom();}}if(_cf8){map.showZoomSlider();}if(_cf9){map.showPanArrows();}if(_cfa){map.graphics.enableMouseEvents();}}});if(has("extend-esri")){lang.setObject("toolbars._Toolbar",TB,_cf4);}return TB;});},"esri/tasks/GeometryService":function(){define("esri/tasks/GeometryService",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/_base/Deferred","dojo/has","esri/kernel","esri/request","esri/deferredUtils","esri/tasks/Task","esri/geometry/Extent","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Multipoint","esri/geometry/jsonUtils"],function(_cfc,lang,_cfd,_cfe,_cff,has,_d00,_d01,_d02,Task,_d03,_d04,_d05,_d06,_d07){var _d08=_cfc(Task,{declaredClass:"esri.tasks.GeometryService",constructor:function(url){var _d09=lang.hitch;this._projectHandler=_d09(this,this._projectHandler);this._simplifyHandler=_d09(this,this._simplifyHandler);this._bufferHandler=_d09(this,this._bufferHandler);this._areasAndLengthsHandler=_d09(this,this._areasAndLengthsHandler);this._lengthsHandler=_d09(this,this._lengthsHandler);this._labelPointsHandler=_d09(this,this._labelPointsHandler);this._relationHandler=_d09(this,this._relationHandler);this._convexHullHandler=_d09(this,this._convexHullHandler);this._unionHandler=_d09(this,this._unionHandler);this._autoCompleteHandler=_d09(this,this._autoCompleteHandler);this._reshapeHandler=_d09(this,this._reshapeHandler);this._cutHandler=_d09(this,this._cutHandler);this._intersectHandler=_d09(this,this._intersectHandler);this._differenceHandler=_d09(this,this._differenceHandler);this._trimExtendHandler=_d09(this,this._trimExtendHandler);this._densifyHandler=_d09(this,this._densifyHandler);this._generalizeHandler=_d09(this,this._densifyHandler);this._offsetHandler=_d09(this,this._offsetHandler);this._distanceHandler=_d09(this,this._distanceHandler);},_encodeGeometries:function(_d0a){var gs=[],i,il=_d0a.length;for(i=0;i<il;i++){gs.push(_d0a[i].toJson());}return {geometryType:_d07.getJsonType(_d0a[0]),geometries:gs};},_decodeGeometries:function(_d0b,_d0c,sr){var _d0d=_d07.getGeometryType(_d0c),_d0e=_d0b.geometries,fs=[],_d0f={spatialReference:sr.toJson()},_d10=lang.mixin;_cfd.forEach(_d0e,function(g,i){fs[i]=new _d0d(_d10(g,_d0f));});return fs;},_toProjectGeometry:function(_d11){var sr=_d11.spatialReference.toJson();if(_d11 instanceof _d03){return new _d05({rings:[[[_d11.xmin,_d11.ymin],[_d11.xmin,_d11.ymax],[_d11.xmax,_d11.ymax],[_d11.xmax,_d11.ymin],[_d11.xmin,_d11.ymin]]],spatialReference:sr});}else{return new _d04({paths:[[].concat(_d11.points)],spatialReference:sr});}},_fromProjectedGeometry:function(_d12,_d13,_d14){if(_d13==="esriGeometryEnvelope"){var ring=_d12.rings[0];return new _d03(ring[0][0],ring[0][1],ring[2][0],ring[2][1],_d14);}else{return new _d06({points:_d12.paths[0],spatialReference:_d14.toJson()});}},project:function(_d15,_d16,_d17,_d18){var _d19=lang.mixin({},this._url.query,{f:"json"}),_d1a;if(!_d15.geometries){_d1a=_d15[0];_d19=lang.mixin(_d19,{outSR:_d16.wkid||_cfe.toJson(_d16.toJson()),inSR:_d1a.spatialReference.wkid||_cfe.toJson(_d1a.spatialReference.toJson()),geometries:_cfe.toJson(this._encodeGeometries(_d15))});}else{_d18=_d17;_d17=_d16;_d16=_d15.outSR;_d1a=_d15.geometries[0];_d19=lang.mixin(_d19,_d15.toJson());}var _d1b=_d07.getJsonType(_d1a),_d1c=this._projectHandler,_d1d=this._errorHandler,dfd=new _cff(_d02._dfdCanceller);dfd._pendingDfd=_d01({url:this._url.path+"/project",content:_d19,callbackParamName:"callback",load:function(r,i){_d1c(r,i,_d1b,_d16,_d17,_d18,dfd);},error:function(r){_d1d(r,_d18,dfd);}});return dfd;},_projectHandler:function(_d1e,io,_d1f,_d20,_d21,_d22,dfd){try{var fs=this._decodeGeometries(_d1e,_d1f,_d20);this._successHandler([fs],"onProjectComplete",_d21,dfd);}catch(err){this._errorHandler(err,_d22,dfd);}},onProjectComplete:function(){},simplify:function(_d23,_d24,_d25){var _d26=_d23[0].spatialReference;var _d27=lang.mixin({},this._url.query,{f:"json",sr:_d26.wkid?_d26.wkid:_cfe.toJson(_d26.toJson()),geometries:_cfe.toJson(this._encodeGeometries(_d23))}),_d28=_d07.getJsonType(_d23[0]),_d29=this._simplifyHandler,_d2a=this._errorHandler,dfd=new _cff(_d02._dfdCanceller);dfd._pendingDfd=_d01({url:this._url.path+"/simplify",content:_d27,callbackParamName:"callback",load:function(r,i){_d29(r,i,_d28,_d26,_d24,_d25,dfd);},error:function(r){_d2a(r,_d25,dfd);}});return dfd;},_simplifyHandler:function(_d2b,io,_d2c,sr,_d2d,_d2e,dfd){try{var fs=this._decodeGeometries(_d2b,_d2c,sr);this._successHandler([fs],"onSimplifyComplete",_d2d,dfd);}catch(err){this._errorHandler(err,_d2e,dfd);}},onSimplifyComplete:function(){},convexHull:function(_d2f,_d30,_d31){var _d32=_d2f[0].spatialReference;var _d33=lang.mixin({},this._url.query,{f:"json",sr:_cfe.toJson(_d32.toJson()),geometries:_cfe.toJson(this._encodeGeometries(_d2f))}),_d34=this._convexHullHandler,_d35=this._errorHandler,dfd=new _cff(_d02._dfdCanceller);dfd._pendingDfd=_d01({url:this._url.path+"/convexHull",content:_d33,callbackParamName:"callback",load:function(r,i){_d34(r,i,_d32,_d30,_d31,dfd);},error:function(r){_d35(r,_d31,dfd);}});return dfd;},_convexHullHandler:function(_d36,io,_d37,_d38,_d39,dfd){try{var geom=_d07.fromJson(_d36.geometry).setSpatialReference(_d37);this._successHandler([geom],"onConvexHullComplete",_d38,dfd);}catch(err){this._errorHandler(err,_d39,dfd);}},onConvexHullComplete:function(){},union:function(_d3a,_d3b,_d3c){var _d3d=_d3a[0].spatialReference;var _d3e=lang.mixin({},this._url.query,{f:"json",sr:_cfe.toJson(_d3d.toJson()),geometries:_cfe.toJson(this._encodeGeometries(_d3a))}),_d3f=this._unionHandler,_d40=this._errorHandler,dfd=new _cff(_d02._dfdCanceller);dfd._pendingDfd=_d01({url:this._url.path+"/union",content:_d3e,callbackParamName:"callback",load:function(r,i){_d3f(r,i,_d3d,_d3b,_d3c,dfd);},error:function(r){_d40(r,_d3c,dfd);}});return dfd;},_unionHandler:function(_d41,io,_d42,_d43,_d44,dfd){try{var geom=_d07.fromJson(_d41.geometry).setSpatialReference(_d42);this._successHandler([geom],"onUnionComplete",_d43,dfd);}catch(err){this._errorHandler(err,_d44,dfd);}},onUnionComplete:function(){},autoComplete:function(_d45,_d46,_d47,_d48){var _d49=_d45[0].spatialReference;var _d4a=lang.mixin({},this._url.query,{f:"json",sr:_cfe.toJson(_d49.toJson()),polygons:_cfe.toJson(this._encodeGeometries(_d45).geometries),polylines:_cfe.toJson(this._encodeGeometries(_d46).geometries)}),_d4b=this._autoCompleteHandler,_d4c=this._errorHandler,dfd=new _cff(_d02._dfdCanceller);dfd._pendingDfd=_d01({url:this._url.path+"/autoComplete",content:_d4a,callbackParamName:"callback",load:function(r,i){_d4b(r,i,_d49,_d47,_d48,dfd);},error:function(r){_d4c(r,_d48,dfd);}});return dfd;},_autoCompleteHandler:function(_d4d,io,_d4e,_d4f,_d50,dfd){try{var _d51=_d4d.geometries,_d52=[],i,il=_d51.length;for(i=0;i<il;i++){_d52[i]=new _d05({spatialReference:_d4e,rings:_d51[i].rings});}this._successHandler([_d52],"onAutoCompleteComplete",_d4f,dfd);}catch(err){this._errorHandler(err,_d50,dfd);}},onAutoCompleteComplete:function(){},reshape:function(_d53,_d54,_d55,_d56){var _d57=_d53.spatialReference;var _d58=lang.mixin({},this._url.query,{f:"json",sr:_cfe.toJson(_d57.toJson()),target:_cfe.toJson({geometryType:_d07.getJsonType(_d53),geometry:_d53.toJson()}),reshaper:_cfe.toJson(_d54.toJson())}),_d59=this._reshapeHandler,_d5a=this._errorHandler,dfd=new _cff(_d02._dfdCanceller);dfd._pendingDfd=_d01({url:this._url.path+"/reshape",content:_d58,callbackParamName:"callback",load:function(r,i){_d59(r,i,_d57,_d55,_d56,dfd);},error:function(r){_d5a(r,_d56,dfd);}});return dfd;},_reshapeHandler:function(_d5b,io,_d5c,_d5d,_d5e,dfd){try{var geom=_d07.fromJson(_d5b.geometry).setSpatialReference(_d5c);this._successHandler([geom],"onReshapeComplete",_d5d,dfd);}catch(err){this._errorHandler(err,_d5e,dfd);}},onReshapeComplete:function(){},cut:function(_d5f,_d60,_d61,_d62){var _d63=_d5f[0].spatialReference;var _d64=_cfd.map(_d5f,function(_d65){return _d65.toJson();});var _d66=lang.mixin({},this._url.query,{f:"json",sr:_cfe.toJson(_d63.toJson()),target:_cfe.toJson({geometryType:_d07.getJsonType(_d5f[0]),geometries:_d64}),cutter:_cfe.toJson(_d60.toJson())}),_d67=this._cutHandler,_d68=this._errorHandler,dfd=new _cff(_d02._dfdCanceller);dfd._pendingDfd=_d01({url:this._url.path+"/cut",content:_d66,callbackParamName:"callback",load:function(r,i){_d67(r,i,_d63,_d61,_d62,dfd);},error:function(r){_d68(r,_d62,dfd);}});return dfd;},_cutHandler:function(_d69,io,_d6a,_d6b,_d6c,dfd){try{var _d6d=_d69.geometries;var _d6e={};_d6e.cutIndexes=_d69.cutIndexes;_d6e.geometries=[];_cfd.forEach(_d6d,function(geom){_d6e.geometries.push(_d07.fromJson(geom).setSpatialReference(_d6a));});this._successHandler([_d6e],"onCutComplete",_d6b,dfd);}catch(err){this._errorHandler(err,_d6c,dfd);}},onCutComplete:function(){},intersect:function(_d6f,_d70,_d71,_d72){var _d73=_d6f[0].spatialReference;var _d74=lang.mixin({},this._url.query,{f:"json",sr:_cfe.toJson(_d73.toJson()),geometries:_cfe.toJson(this._encodeGeometries(_d6f)),geometry:_cfe.toJson({geometryType:_d07.getJsonType(_d70),geometry:_d70.toJson()})}),_d75=this._intersectHandler,_d76=this._errorHandler,dfd=new _cff(_d02._dfdCanceller);dfd._pendingDfd=_d01({url:this._url.path+"/intersect",content:_d74,callbackParamName:"callback",load:function(r,i){_d75(r,i,_d73,_d71,_d72,dfd);},error:function(r){_d76(r,_d72,dfd);}});return dfd;},_intersectHandler:function(_d77,io,_d78,_d79,_d7a,dfd){try{var _d7b=_d77.geometries,_d7c=[];_cfd.forEach(_d7b,function(geom){_d7c.push(_d07.fromJson(geom).setSpatialReference(_d78));});this._successHandler([_d7c],"onIntersectComplete",_d79,dfd);}catch(err){this._errorHandler(err,_d7a,dfd);}},onIntersectComplete:function(){},difference:function(_d7d,_d7e,_d7f,_d80){var _d81=_d7d[0].spatialReference;var _d82=lang.mixin({},this._url.query,{f:"json",sr:_cfe.toJson(_d81.toJson()),geometries:_cfe.toJson(this._encodeGeometries(_d7d)),geometry:_cfe.toJson({geometryType:_d07.getJsonType(_d7e),geometry:_d7e.toJson()})}),_d83=this._differenceHandler,_d84=this._errorHandler,dfd=new _cff(_d02._dfdCanceller);dfd._pendingDfd=_d01({url:this._url.path+"/difference",content:_d82,callbackParamName:"callback",load:function(r,i){_d83(r,i,_d81,_d7f,_d80,dfd);},error:function(r){_d84(r,_d80,dfd);}});return dfd;},_differenceHandler:function(_d85,io,_d86,_d87,_d88,dfd){try{var _d89=_d85.geometries,_d8a=[];_cfd.forEach(_d89,function(geom){_d8a.push(_d07.fromJson(geom).setSpatialReference(_d86));});this._successHandler([_d8a],"onDifferenceComplete",_d87,dfd);}catch(err){this._errorHandler(err,_d88,dfd);}},onDifferenceComplete:function(){},buffer:function(_d8b,_d8c,_d8d){var _d8e=lang.mixin({},this._url.query,{f:"json"},_d8b.toJson()),sr=_d8b.outSpatialReference||_d8b.geometries[0].spatialReference,_d8f=this._bufferHandler,_d90=this._errorHandler,dfd=new _cff(_d02._dfdCanceller);dfd._pendingDfd=_d01({url:this._url.path+"/buffer",content:_d8e,callbackParamName:"callback",load:function(r,i){_d8f(r,i,sr,_d8c,_d8d,dfd);},error:function(r){_d90(r,_d8d,dfd);}});return dfd;},_bufferHandler:function(_d91,io,sr,_d92,_d93,dfd){try{var _d94=_d91.geometries,_d95=[],i,il=_d94.length;for(i=0;i<il;i++){_d95[i]=new _d05({spatialReference:sr,rings:_d94[i].rings});}this._successHandler([_d95],"onBufferComplete",_d92,dfd);}catch(err){this._errorHandler(err,_d93,dfd);}},onBufferComplete:function(){},areasAndLengths:function(_d96,_d97,_d98){var _d99=lang.mixin({},this._url.query,{f:"json"},_d96.toJson()),_d9a=this._areasAndLengthsHandler,_d9b=this._errorHandler,dfd=new _cff(_d02._dfdCanceller);dfd._pendingDfd=_d01({url:this._url.path+"/areasAndLengths",content:_d99,callbackParamName:"callback",load:function(r,i){_d9a(r,i,_d97,_d98,dfd);},error:function(r){_d9b(r,_d98,dfd);}});return dfd;},_areasAndLengthsHandler:function(_d9c,io,_d9d,_d9e,dfd){try{this._successHandler([_d9c],"onAreasAndLengthsComplete",_d9d,dfd);}catch(err){this._errorHandler(err,_d9e,dfd);}},onAreasAndLengthsComplete:function(){},lengths:function(_d9f,_da0,_da1){var _da2=lang.mixin({},this._url.query,{f:"json"},_d9f.toJson()),_da3=this._lengthsHandler,_da4=this._errorHandler,dfd=new _cff(_d02._dfdCanceller);dfd._pendingDfd=_d01({url:this._url.path+"/lengths",content:_da2,callbackParamName:"callback",load:function(r,i){_da3(r,i,_da0,_da1,dfd);},error:function(r){_da4(r,_da1,dfd);}});return dfd;},_lengthsHandler:function(_da5,io,_da6,_da7,dfd){try{this._successHandler([_da5],"onLengthsComplete",_da6,dfd);}catch(err){this._errorHandler(err,_da7,dfd);}},onLengthsComplete:function(){},labelPoints:function(_da8,_da9,_daa){var _dab=_cfd.map(_da8,function(geom){return geom.toJson();});var sr=_da8[0].spatialReference,_dac=lang.mixin({},this._url.query,{f:"json",sr:sr.wkid?sr.wkid:_cfe.toJson(sr.toJson()),polygons:_cfe.toJson(_dab)}),_dad=this._labelPointsHandler,_dae=this._errorHandler,dfd=new _cff(_d02._dfdCanceller);dfd._pendingDfd=_d01({url:this._url.path+"/labelPoints",content:_dac,callbackParamName:"callback",load:function(r,i){_dad(r,i,_da8,sr,_da9,_daa,dfd);},error:function(r){_dae(r,_daa,dfd);}});return dfd;},_labelPointsHandler:function(_daf,io,_db0,sr,_db1,_db2,dfd){try{var _db3=_daf.labelPoints,_db4=[];_cfd.forEach(_db3,function(geom){_db4.push(_d07.fromJson(geom).setSpatialReference(sr));});this._successHandler([_db4],"onLabelPointsComplete",_db1,dfd);}catch(err){this._errorHandler(err,_db2,dfd);}},onLabelPointsComplete:function(){},relation:function(_db5,_db6,_db7){var _db8=lang.mixin({},this._url.query,{f:"json"},_db5.toJson()),_db9=this._relationHandler,_dba=this._errorHandler,dfd=new _cff(_d02._dfdCanceller);dfd._pendingDfd=_d01({url:this._url.path+"/relation",content:_db8,callbackParamName:"callback",load:function(r,i){_db9(r,i,_db6,_db7,dfd);},error:function(r){_dba(r,_db7,dfd);}});return dfd;},_relationHandler:function(_dbb,io,_dbc,_dbd,dfd){try{var _dbe=_dbb.relations;this._successHandler([_dbe],"onRelationComplete",_dbc,dfd);}catch(err){this._errorHandler(err,_dbd,dfd);}},onRelationComplete:function(){},trimExtend:function(_dbf,_dc0,_dc1){var _dc2=lang.mixin({},this._url.query,{f:"json"},_dbf.toJson()),_dc3=_dbf.sr,_dc4=this._trimExtendHandler,_dc5=this._errorHandler,dfd=new _cff(_d02._dfdCanceller);dfd._pendingDfd=_d01({url:this._url.path+"/trimExtend",content:_dc2,callbackParamName:"callback",load:function(r,i){_dc4(r,i,_dc3,_dc0,_dc1,dfd);},error:function(r){_dc5(r,_dc1,dfd);}});return dfd;},_trimExtendHandler:function(_dc6,io,_dc7,_dc8,_dc9,dfd){try{var _dca=_dc6.geometries,_dcb=[],i,il=_dca.length;for(i=0;i<il;i++){_dcb[i]=new _d04({spatialReference:_dc7,paths:_dca[i].paths});}this._successHandler([_dcb],"onTrimExtendComplete",_dc8,dfd);}catch(err){this._errorHandler(err,_dc9,dfd);}},onTrimExtendComplete:function(){},densify:function(_dcc,_dcd,_dce){var _dcf=lang.mixin({},this._url.query,{f:"json"},_dcc.toJson()),_dd0=_dcc.geometries[0].spatialReference,_dd1=this._densifyHandler,_dd2=this._errorHandler,dfd=new _cff(_d02._dfdCanceller);dfd._pendingDfd=_d01({url:this._url.path+"/densify",content:_dcf,callbackParamName:"callback",load:function(r,i){_dd1(r,i,_dd0,_dcd,_dce,dfd);},error:function(r){_dd2(r,_dce,dfd);}});return dfd;},_densifyHandler:function(_dd3,io,_dd4,_dd5,_dd6,dfd){try{var _dd7=_dd3.geometries,_dd8=[];_cfd.forEach(_dd7,function(geom){_dd8.push(_d07.fromJson(geom).setSpatialReference(_dd4));});this._successHandler([_dd8],"onDensifyComplete",_dd5,dfd);}catch(err){this._errorHandler(err,_dd6,dfd);}},onDensifyComplete:function(){},generalize:function(_dd9,_dda,_ddb){var _ddc=lang.mixin({},this._url.query,{f:"json"},_dd9.toJson()),_ddd=_dd9.geometries[0].spatialReference,_dde=this._generalizeHandler,_ddf=this._errorHandler,dfd=new _cff(_d02._dfdCanceller);dfd._pendingDfd=_d01({url:this._url.path+"/generalize",content:_ddc,callbackParamName:"callback",load:function(r,i){_dde(r,i,_ddd,_dda,_ddb,dfd);},error:function(r){_ddf(r,_ddb,dfd);}});return dfd;},_generalizeHandler:function(_de0,io,_de1,_de2,_de3,dfd){try{var _de4=_de0.geometries,_de5=[];_cfd.forEach(_de4,function(geom){_de5.push(_d07.fromJson(geom).setSpatialReference(_de1));});this._successHandler([_de5],"onGeneralizeComplete",_de2,dfd);}catch(err){this._errorHandler(err,_de3,dfd);}},onGeneralizeComplete:function(){},offset:function(_de6,_de7,_de8){var _de9=lang.mixin({},this._url.query,{f:"json"},_de6.toJson()),_dea=_de6.geometries[0].spatialReference,_deb=this._offsetHandler,_dec=this._errorHandler,dfd=new _cff(_d02._dfdCanceller);dfd._pendingDfd=_d01({url:this._url.path+"/offset",content:_de9,callbackParamName:"callback",load:function(r,i){_deb(r,i,_dea,_de7,_de8,dfd);},error:function(r){_dec(r,_de8,dfd);}});return dfd;},_offsetHandler:function(_ded,io,_dee,_def,_df0,dfd){try{var _df1=_ded.geometries,_df2=[];_cfd.forEach(_df1,function(geom){_df2.push(_d07.fromJson(geom).setSpatialReference(_dee));});this._successHandler([_df2],"onOffsetComplete",_def,dfd);}catch(err){this._errorHandler(err,_df0,dfd);}},onOffsetComplete:function(){},distance:function(_df3,_df4,_df5){var _df6=lang.mixin({},this._url.query,{f:"json"},_df3.toJson()),_df7=_df3.geometry1.spatialReference,_df8=this._distanceHandler,_df9=this._errorHandler,dfd=new _cff(_d02._dfdCanceller);dfd._pendingDfd=_d01({url:this._url.path+"/distance",content:_df6,callbackParamName:"callback",load:function(r,i){_df8(r,i,_df7,_df4,_df5,dfd);},error:function(r){_df9(r,_df5,dfd);}});return dfd;},_distanceHandler:function(_dfa,io,_dfb,_dfc,_dfd,dfd){try{_dfa=_dfa&&_dfa.distance;this._successHandler([_dfa],"onDistanceComplete",_dfc,dfd);}catch(err){this._errorHandler(err,_dfd,dfd);}},onDistanceComplete:function(){}});lang.mixin(_d08,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});if(has("extend-esri")){lang.setObject("tasks.GeometryService",_d08,_d00);}return _d08;});},"url:dijit/form/templates/ValidationTextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n","esri/tasks/GeneralizeParameters":function(){define("esri/tasks/GeneralizeParameters",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/jsonUtils"],function(_dfe,lang,_dff,_e00,has,_e01,_e02){var _e03=_dfe(null,{declaredClass:"esri.tasks.GeneralizeParameters",geometries:null,deviationUnit:null,maxDeviation:null,toJson:function(){var _e04=_dff.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=_e00.toJson({geometryType:_e02.getJsonType(this.geometries[0]),geometries:_e04});json.sr=_e00.toJson(this.geometries[0].spatialReference.toJson());}if(this.deviationUnit){json.deviationUnit=this.deviationUnit;}if(this.maxDeviation){json.maxDeviation=this.maxDeviation;}return json;}});if(has("extend-esri")){lang.setObject("tasks.GeneralizeParameters",_e03,_e01);}return _e03;});},"esri/layers/FeatureType":function(){define("esri/layers/FeatureType",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/lang","esri/symbols/jsonUtils","esri/layers/RangeDomain","esri/layers/CodedValueDomain","esri/layers/InheritedDomain","esri/layers/FeatureTemplate"],function(_e05,lang,_e06,has,_e07,_e08,_e09,_e0a,_e0b,_e0c,_e0d){var _e0e=_e05(null,{declaredClass:"esri.layers.FeatureType",constructor:function(json){if(json&&lang.isObject(json)){this.id=json.id;this.name=json.name;var _e0f=json.symbol;if(_e0f){this.symbol=_e09.fromJson(_e0f);}var _e10=json.domains,_e11,i;var _e12=this.domains={};for(_e11 in _e10){if(_e10.hasOwnProperty(_e11)){var _e13=_e10[_e11];switch(_e13.type){case "range":_e12[_e11]=new _e0a(_e13);break;case "codedValue":_e12[_e11]=new _e0b(_e13);break;case "inherited":_e12[_e11]=new _e0c(_e13);break;}}}var _e14=json.templates;if(_e14){var _e15=this.templates=[];for(i=0;i<_e14.length;i++){_e15.push(new _e0d(_e14[i]));}}}},toJson:function(){var json={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()};var _e16,_e17=this.domains,_e18=this.templates,_e19=_e08.fixJson;if(_e17){var _e1a=json.domains={};for(_e16 in _e17){if(_e17.hasOwnProperty(_e16)){_e1a[_e16]=_e17[_e16]&&_e17[_e16].toJson();}}_e19(_e1a);}if(_e18){json.templates=_e06.map(_e18,function(_e1b){return _e1b.toJson();});}return _e19(json);}});if(has("extend-esri")){lang.setObject("layers.FeatureType",_e0e,_e07);}return _e0e;});},"url:dijit/form/templates/TextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n","dijit/_Contained":function(){define("dijit/_Contained",["dojo/_base/declare","./registry"],function(_e1c,_e1d){return _e1c("dijit._Contained",null,{_getSibling:function(_e1e){var node=this.domNode;do{node=node[_e1e+"Sibling"];}while(node&&node.nodeType!=1);return node&&_e1d.byNode(node);},getPreviousSibling:function(){return this._getSibling("previous");},getNextSibling:function(){return this._getSibling("next");},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild){return -1;}return p.getIndexOfChild(this);}});});},"dijit/_KeyNavContainer":function(){define("dijit/_KeyNavContainer",["dojo/_base/kernel","./_Container","./_FocusMixin","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/_base/event","dojo/dom-attr","dojo/_base/lang"],function(_e1f,_e20,_e21,_e22,keys,_e23,_e24,_e25,lang){return _e23("dijit._KeyNavContainer",[_e21,_e20],{tabIndex:"0",connectKeyNavHandlers:function(_e26,_e27){var _e28=(this._keyNavCodes={});var prev=lang.hitch(this,"focusPrev");var next=lang.hitch(this,"focusNext");_e22.forEach(_e26,function(code){_e28[code]=prev;});_e22.forEach(_e27,function(code){_e28[code]=next;});_e28[keys.HOME]=lang.hitch(this,"focusFirstChild");_e28[keys.END]=lang.hitch(this,"focusLastChild");this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus");},startupKeyNavChildren:function(){_e1f.deprecated("startupKeyNavChildren() call no longer needed","","2.0");},startup:function(){this.inherited(arguments);_e22.forEach(this.getChildren(),lang.hitch(this,"_startupChild"));},addChild:function(_e29,_e2a){this.inherited(arguments);this._startupChild(_e29);},focus:function(){this.focusFirstChild();},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild());},focusLastChild:function(){this.focusChild(this._getLastFocusableChild());},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1));},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),true);},focusChild:function(_e2b,last){if(!_e2b){return;}if(this.focusedChild&&_e2b!==this.focusedChild){this._onChildBlur(this.focusedChild);}_e2b.set("tabIndex",this.tabIndex);_e2b.focus(last?"end":"start");this._set("focusedChild",_e2b);},_startupChild:function(_e2c){_e2c.set("tabIndex","-1");this.connect(_e2c,"_onFocus",function(){_e2c.set("tabIndex",this.tabIndex);});this.connect(_e2c,"_onBlur",function(){_e2c.set("tabIndex","-1");});},_onContainerFocus:function(evt){if(evt.target!==this.domNode||this.focusedChild){return;}this.focusFirstChild();_e25.set(this.domNode,"tabIndex","-1");},_onBlur:function(evt){if(this.tabIndex){_e25.set(this.domNode,"tabIndex",this.tabIndex);}this.focusedChild=null;this.inherited(arguments);},_onContainerKeypress:function(evt){if(evt.ctrlKey||evt.altKey){return;}var func=this._keyNavCodes[evt.charOrCode];if(func){func();_e24.stop(evt);}},_onChildBlur:function(){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1);},_getNextFocusableChild:function(_e2d,dir){if(_e2d){_e2d=this._getSiblingOfChild(_e2d,dir);}var _e2e=this.getChildren();for(var i=0;i<_e2e.length;i++){if(!_e2d){_e2d=_e2e[(dir>0)?0:(_e2e.length-1)];}if(_e2d.isFocusable()){return _e2d;}_e2d=this._getSiblingOfChild(_e2d,dir);}return null;}});});},"esri/tasks/Task":function(){define("esri/tasks/Task",["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","esri/kernel","esri/deferredUtils","esri/urlUtils"],function(_e2f,lang,_e30,has,_e31,_e32,_e33){var Task=_e2f(null,{declaredClass:"esri.tasks._Task",constructor:function(url){if(url&&lang.isString(url)){this._url=_e33.urlToObject(this.url=url);}this.normalization=true;this._errorHandler=lang.hitch(this,this._errorHandler);},_useSSL:function(){var _e34=this._url,re=/^http:/i,rep="https:";if(this.url){this.url=this.url.replace(re,rep);}if(_e34&&_e34.path){_e34.path=_e34.path.replace(re,rep);}},_encode:function(_e35,_e36,_e37){var _e38,type,_e39={},i,p,pl;for(i in _e35){if(i==="declaredClass"){continue;}_e38=_e35[i];type=typeof _e38;if(_e38!==null&&_e38!==undefined&&type!=="function"){if(lang.isArray(_e38)){_e39[i]=[];pl=_e38.length;for(p=0;p<pl;p++){_e39[i][p]=this._encode(_e38[p]);}}else{if(type==="object"){if(_e38.toJson){var json=_e38.toJson(_e37&&_e37[i]);if(_e38.declaredClass==="esri.tasks.FeatureSet"){if(json.spatialReference){json.sr=json.spatialReference;delete json.spatialReference;}}_e39[i]=_e36?json:_e30.toJson(json);}}else{_e39[i]=_e38;}}}}return _e39;},_successHandler:function(args,_e3a,_e3b,dfd){if(_e3a){this[_e3a].apply(this,args);}if(_e3b){_e3b.apply(null,args);}if(dfd){_e32._resDfd(dfd,args);}},_errorHandler:function(err,_e3c,dfd){this.onError(err);if(_e3c){_e3c(err);}if(dfd){dfd.errback(err);}},setNormalization:function(_e3d){this.normalization=_e3d;},onError:function(){}});if(has("extend-esri")){_e31.Task=Task;}return Task;});},"dijit/form/DataList":function(){define("dijit/form/DataList",["dojo/_base/declare","dojo/dom","dojo/_base/lang","dojo/query","dojo/store/Memory","../registry"],function(_e3e,dom,lang,_e3f,_e40,_e41){function _e42(_e43){return {id:_e43.value,value:_e43.value,name:lang.trim(_e43.innerText||_e43.textContent||"")};};return _e3e("dijit.form.DataList",_e40,{constructor:function(_e44,_e45){this.domNode=dom.byId(_e45);lang.mixin(this,_e44);if(this.id){_e41.add(this);}this.domNode.style.display="none";this.inherited(arguments,[{data:_e3f("option",this.domNode).map(_e42)}]);},destroy:function(){_e41.remove(this.id);},fetchSelectedItem:function(){var _e46=_e3f("> option[selected]",this.domNode)[0]||_e3f("> option",this.domNode)[0];return _e46&&_e42(_e46);}});});},"dijit/_editor/_Plugin":function(){define("dijit/_editor/_Plugin",["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../form/Button"],function(_e47,_e48,lang,_e49){var _e4a=_e48("dijit._editor._Plugin",null,{constructor:function(args){this.params=args||{};lang.mixin(this,this.params);this._connects=[];this._attrPairNames={};},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:true,buttonClass:_e49,disabled:false,getLabel:function(key){return this.editor.commands[key];},_initButton:function(){if(this.command.length){var _e4b=this.getLabel(this.command),_e4c=this.editor,_e4d=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button){var _e4e=lang.mixin({label:_e4b,ownerDocument:_e4c.ownerDocument,dir:_e4c.dir,lang:_e4c.lang,showLabel:false,iconClass:_e4d,dropDown:this.dropDown,tabIndex:"-1"},this.params||{});this.button=new this.buttonClass(_e4e);}}if(this.get("disabled")&&this.button){this.button.set("disabled",this.get("disabled"));}},destroy:function(){var h;while(h=this._connects.pop()){h.remove();}if(this.dropDown){this.dropDown.destroyRecursive();}},connect:function(o,f,tf){this._connects.push(_e47.connect(o,f,this,tf));},updateState:function(){var e=this.editor,c=this.command,_e4f,_e50;if(!e||!e.isLoaded||!c.length){return;}var _e51=this.get("disabled");if(this.button){try{_e50=!_e51&&e.queryCommandEnabled(c);if(this.enabled!==_e50){this.enabled=_e50;this.button.set("disabled",!_e50);}if(_e50){if(typeof this.button.checked=="boolean"){_e4f=e.queryCommandState(c);if(this.checked!==_e4f){this.checked=_e4f;this.button.set("checked",e.queryCommandState(c));}}}}catch(e){console.log(e);}}},setEditor:function(_e52){this.editor=_e52;this._initButton();if(this.button&&this.useDefaultCommand){if(this.editor.queryCommandAvailable(this.command)){this.connect(this.button,"onClick",lang.hitch(this.editor,"execCommand",this.command,this.commandArg));}else{this.button.domNode.style.display="none";}}this.connect(this.editor,"onNormalizedDisplayChanged","updateState");},setToolbar:function(_e53){if(this.button){_e53.addChild(this.button);}},set:function(name,_e54){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _e55=this._getAttrNames(name);if(this[_e55.s]){var _e56=this[_e55.s].apply(this,Array.prototype.slice.call(arguments,1));}else{this._set(name,_e54);}return _e56||this;},get:function(name){var _e57=this._getAttrNames(name);return this[_e57.g]?this[_e57.g]():this[name];},_setDisabledAttr:function(_e58){this.disabled=_e58;this.updateState();},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return (apn[name]={s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"});},_set:function(name,_e59){this[name]=_e59;}});_e4a.registry={};return _e4a;});},"esri/tasks/SpatialRelationship":function(){define("esri/tasks/SpatialRelationship",["dojo/_base/lang","dojo/has","esri/kernel"],function(lang,has,_e5a){var _e5b={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};if(has("extend-esri")){lang.setObject("tasks._SpatialRelationship",_e5b,_e5a);}return _e5b;});},"esri/dijit/editing/tools/EditingTools":function(){define(["dojo/_base/lang","dojo/has","esri/toolbars/draw","esri/kernel"],function(lang,has,Draw,_e5c){var _e5d={point:{id:"esriPointTool",_enabledIcon:"toolbarIcon pointIcon",_disabledIcon:"toolbarIcon pointIconDisabled",_drawType:Draw.POINT,_geomType:"esriGeometryPoint",_label:"NLS_pointLbl"},polyline:{id:"toolDrawFreehandPolyline",_enabledIcon:"toolbarIcon polylineIcon",_disabledIcon:"toolbarIcon polylineIconDisabled",_drawType:Draw.POLYLINE,_geomType:"esriGeometryPolyline",_label:"NLS_polylineLbl"},freehandpolyline:{id:"toolDrawPolyline",_enabledIcon:"toolbarIcon freehandPolylineIcon",_disabledIcon:"toolbarIcon freehandPolylineIcon",_drawType:Draw.FREEHAND_POLYLINE,_geomType:"esriGeometryPolyline",_label:"NLS_freehandPolylineLbl"},polygon:{id:"toolDrawPolygon",_enabledIcon:"toolbarIcon polygonIcon",_disabledIcon:"toolbarIcon polygonIconDisabled",_drawType:Draw.POLYGON,_geomType:"esriGeometryPolygon",_label:"NLS_polygonLbl"},freehandpolygon:{id:"toolDrawFreehandPolygon",_enabledIcon:"toolbarIcon freehandPolygonIcon",_disabledIcon:"toolbarIcon freehandPolygonIconDisabled",_drawType:Draw.FREEHAND_POLYGON,_label:"NLS_freehandPolygonLbl",_geomType:"esriGeometryPolygon"},autocomplete:{id:"btnFeatureAutoComplete",_enabledIcon:"toolbarIcon autoCompleteIcon",_disabledIcon:"toolbarIcon autoCompleteIcon",_drawType:Draw.POLYGON,_label:"NLS_autoCompleteLbl",_geomType:"esriGeometryPolygon"},rectangle:{id:"toolDrawRect",_enabledIcon:"toolbarIcon rectangleIcon",_disabledIcon:"toolbarIcon rectangleIcon",_drawType:Draw.RECTANGLE,_geomType:"esriGeometryPolygon",_label:"NLS_rectangleLbl"},arrow:{id:"toolDrawArrow",_enabledIcon:"toolbarIcon arrowIcon",_disabledIcon:"toolbarIcon arrowIcon",_drawType:Draw.ARROW,_geomType:"esriGeometryPolygon",_label:"NLS_arrowLbl"},uparrow:{id:"toolDrawArrowUp",_enabledIcon:"toolbarIcon arrowUpIcon",_disabledIcon:"toolbarIcon arrowUpIcon",_drawType:Draw.UP_ARROW,_geomType:"esriGeometryPolygon",_label:"NLS_arrowUpLbl"},downarrow:{id:"toolDrawDownArrow",_enabledIcon:"toolbarIcon arrowDownIcon",_disabledIcon:"toolbarIcon arrowDownIcon",_drawType:Draw.DOWN_ARROW,_geomType:"esriGeometryPolygon",_label:"NLS_arrowDownLbl"},leftarrow:{id:"toolDrawLeftArrow",_enabledIcon:"toolbarIcon arrowLeftIcon",_disabledIcon:"toolbarIcon arrowLeftIcon",_drawType:Draw.LEFT_ARROW,_geomType:"esriGeometryPolygon",_label:"NLS_arrowLeftLbl"},rightarrow:{id:"toolDrawRightArrow",_enabledIcon:"toolbarIcon arrowIcon",_disabledIcon:"toolbarIcon arrowIcon",_drawType:Draw.RIGHT_ARROW,_geomType:"esriGeometryPolygon",_label:"NLS_arrowRightLbl"},circle:{id:"toolDrawCircle",_enabledIcon:"toolbarIcon circleIcon",_disabledIcon:"toolbarIcon circleIcon",_drawType:Draw.CIRCLE,_geomType:"esriGeometryPolygon",_label:"NLS_circleLbl"},ellipse:{id:"toolDrawEllipse",_enabledIcon:"toolbarIcon ellipseIcon",_disabledIcon:"toolbarIcon ellipseIcon",_drawType:Draw.ELLIPSE,_geomType:"esriGeometryPolygon",_label:"NLS_ellipseLbl"},triangle:{id:"toolDrawTriangle",_enabledIcon:"toolbarIcon triangleIcon",_disabledIcon:"toolbarIcon triangleIcon",_drawType:Draw.TRIANGLE,_geomType:"esriGeometryPolygon",_label:"NLS_triangleLbl"},attributes:{id:"btnAttributes",_enabledIcon:"toolbarIcon attributesIcon",_disabledIcon:"toolbarIcon attributesIcon",_enabled:false,_label:"NLS_attributesLbl"},del:{id:"btnDelete2",_enabledIcon:"toolbarIcon deleteFeatureIcon",_disabledIcon:"toolbarIcon deleteFeatureIcon",_enabled:false,_label:"NLS_deleteLbl"},undo:{id:"btnUndo",_enabledIcon:"dijitEditorIcon dijitEditorIconUndo",_disabledIcon:"dijitEditorIcon dijitEditorIconUndo",_enabled:false,_label:"NLS_undoLbl"},redo:{id:"btnRedo",_enabledIcon:"dijitEditorIcon dijitEditorIconRedo",_disabledIcon:"dijitEditorIcon dijitEditorIconRedo",_enabled:false,_label:"NLS_redoLbl"}};if(has("extend-esri")){lang.setObject("dijit.editing.tools.EditingTools",_e5d,_e5c);}return _e5d;});},"dijit/_Container":function(){define("dijit/_Container",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct"],function(_e5e,_e5f,_e60){return _e5f("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},addChild:function(_e61,_e62){var _e63=this.containerNode;if(_e62&&typeof _e62=="number"){var _e64=this.getChildren();if(_e64&&_e64.length>=_e62){_e63=_e64[_e62-1].domNode;_e62="after";}}_e60.place(_e61.domNode,_e63,_e62);if(this._started&&!_e61._started){_e61.startup();}},removeChild:function(_e65){if(typeof _e65=="number"){_e65=this.getChildren()[_e65];}if(_e65){var node=_e65.domNode;if(node&&node.parentNode){node.parentNode.removeChild(node);}}},hasChildren:function(){return this.getChildren().length>0;},_getSiblingOfChild:function(_e66,dir){var _e67=this.getChildren(),idx=_e5e.indexOf(this.getChildren(),_e66);return _e67[idx+dir];},getIndexOfChild:function(_e68){return _e5e.indexOf(this.getChildren(),_e68);}});});},"dojo/data/ItemFileReadStore":function(){define(["../_base/kernel","../_base/lang","../_base/declare","../_base/array","../_base/xhr","../Evented","./util/filter","./util/simpleFetch","../date/stamp"],function(_e69,lang,_e6a,_e6b,xhr,_e6c,_e6d,_e6e,_e6f){var _e70=_e6a("dojo.data.ItemFileReadStore",[_e6c],{constructor:function(_e71){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=_e71.url;this._ccUrl=_e71.url;this.url=_e71.url;this._jsonData=_e71.data;this.data=null;this._datatypeMap=_e71.typeMap||{};if(!this._datatypeMap["Date"]){this._datatypeMap["Date"]={type:Date,deserialize:function(_e72){return _e6f.fromISOString(_e72);}};}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(_e71.urlPreventCache!==undefined){this.urlPreventCache=_e71.urlPreventCache?true:false;}if(_e71.hierarchical!==undefined){this.hierarchical=_e71.hierarchical?true:false;}if(_e71.clearOnClose){this.clearOnClose=true;}if("failOk" in _e71){this.failOk=_e71.failOk?true:false;}},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error(this.declaredClass+": Invalid item argument.");}},_assertIsAttribute:function(_e73){if(typeof _e73!=="string"){throw new Error(this.declaredClass+": Invalid attribute argument.");}},getValue:function(item,_e74,_e75){var _e76=this.getValues(item,_e74);return (_e76.length>0)?_e76[0]:_e75;},getValues:function(item,_e77){this._assertIsItem(item);this._assertIsAttribute(_e77);return (item[_e77]||[]).slice(0);},getAttributes:function(item){this._assertIsItem(item);var _e78=[];for(var key in item){if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){_e78.push(key);}}return _e78;},hasAttribute:function(item,_e79){this._assertIsItem(item);this._assertIsAttribute(_e79);return (_e79 in item);},containsValue:function(item,_e7a,_e7b){var _e7c=undefined;if(typeof _e7b==="string"){_e7c=_e6d.patternToRegExp(_e7b,false);}return this._containsValue(item,_e7a,_e7b,_e7c);},_containsValue:function(item,_e7d,_e7e,_e7f){return _e6b.some(this.getValues(item,_e7d),function(_e80){if(_e80!==null&&!lang.isObject(_e80)&&_e7f){if(_e80.toString().match(_e7f)){return true;}}else{if(_e7e===_e80){return true;}}});},isItem:function(_e81){if(_e81&&_e81[this._storeRefPropName]===this){if(this._arrayOfAllItems[_e81[this._itemNumPropName]]===_e81){return true;}}return false;},isItemLoaded:function(_e82){return this.isItem(_e82);},loadItem:function(_e83){this._assertIsItem(_e83.item);},getFeatures:function(){return this._features;},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},filter:function(_e84,_e85,_e86){var _e87=[],i,key;if(_e84.query){var _e88,_e89=_e84.queryOptions?_e84.queryOptions.ignoreCase:false;var _e8a={};for(key in _e84.query){_e88=_e84.query[key];if(typeof _e88==="string"){_e8a[key]=_e6d.patternToRegExp(_e88,_e89);}else{if(_e88 instanceof RegExp){_e8a[key]=_e88;}}}for(i=0;i<_e85.length;++i){var _e8b=true;var _e8c=_e85[i];if(_e8c===null){_e8b=false;}else{for(key in _e84.query){_e88=_e84.query[key];if(!this._containsValue(_e8c,key,_e88,_e8a[key])){_e8b=false;}}}if(_e8b){_e87.push(_e8c);}}_e86(_e87,_e84);}else{for(i=0;i<_e85.length;++i){var item=_e85[i];if(item!==null){_e87.push(item);}}_e86(_e87,_e84);}},_fetchItems:function(_e8d,_e8e,_e8f){var self=this;if(this._loadFinished){this.filter(_e8d,this._getItemsArray(_e8d.queryOptions),_e8e);}else{if(this._jsonFileUrl!==this._ccUrl){_e69.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_e8d,filter:lang.hitch(self,"filter"),findCallback:lang.hitch(self,_e8e)});}else{this._loadInProgress=true;var _e90={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _e91=xhr.get(_e90);_e91.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;self.filter(_e8d,self._getItemsArray(_e8d.queryOptions),_e8e);self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_e8f(e,_e8d);}});_e91.addErrback(function(_e92){self._loadInProgress=false;_e8f(_e92,_e8d);});var _e93=null;if(_e8d.abort){_e93=_e8d.abort;}_e8d.abort=function(){var df=_e91;if(df&&df.fired===-1){df.cancel();df=null;}if(_e93){_e93.call(_e8d);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;self.filter(_e8d,this._getItemsArray(_e8d.queryOptions),_e8e);}catch(e){_e8f(e,_e8d);}}else{_e8f(new Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),_e8d);}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _e94=this._queuedFetches[i],_e95=_e94.args,_e96=_e94.filter,_e97=_e94.findCallback;if(_e96){_e96(_e95,this._getItemsArray(_e95.queryOptions),_e97);}else{this.fetchItemByIdentity(_e95);}}this._queuedFetches=[];}},_getItemsArray:function(_e98){if(_e98&&_e98.deep){return this._arrayOfAllItems;}return this._arrayOfTopLevelItems;},close:function(_e99){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if(((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null))&&this.data==null){console.debug(this.declaredClass+": WARNING!  Data reload "+" information has not been provided."+"  Please set 'url' or 'data' to the appropriate value before"+" the next fetch");}this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[];}},_getItemsFromLoadedData:function(_e9a){var _e9b=false,self=this;function _e9c(_e9d){return (_e9d!==null)&&(typeof _e9d==="object")&&(!lang.isArray(_e9d)||_e9b)&&(!lang.isFunction(_e9d))&&(_e9d.constructor==Object||lang.isArray(_e9d))&&(typeof _e9d._reference==="undefined")&&(typeof _e9d._type==="undefined")&&(typeof _e9d._value==="undefined")&&self.hierarchical;};function _e9e(_e9f){self._arrayOfAllItems.push(_e9f);for(var _ea0 in _e9f){var _ea1=_e9f[_ea0];if(_ea1){if(lang.isArray(_ea1)){var _ea2=_ea1;for(var k=0;k<_ea2.length;++k){var _ea3=_ea2[k];if(_e9c(_ea3)){_e9e(_ea3);}}}else{if(_e9c(_ea1)){_e9e(_ea1);}}}}};this._labelAttr=_e9a.label;var i,item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=_e9a.items;for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(lang.isArray(item)){_e9b=true;}_e9e(item);item[this._rootItemPropName]=true;}var _ea4={},key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var _ea5=item[key];if(_ea5!==null){if(!lang.isArray(_ea5)){item[key]=[_ea5];}}else{item[key]=[null];}}_ea4[key]=key;}}while(_ea4[this._storeRefPropName]){this._storeRefPropName+="_";}while(_ea4[this._itemNumPropName]){this._itemNumPropName+="_";}while(_ea4[this._reverseRefMap]){this._reverseRefMap+="_";}var _ea6;var _ea7=_e9a.identifier;if(_ea7){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=_ea7;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];_ea6=item[_ea7];var _ea8=_ea6[0];if(!Object.hasOwnProperty.call(this._itemsByIdentity,_ea8)){this._itemsByIdentity[_ea8]=item;}else{if(this._jsonFileUrl){throw new Error(this.declaredClass+":  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_ea7+"].  Value collided: ["+_ea8+"]");}else{if(this._jsonData){throw new Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_ea7+"].  Value collided: ["+_ea8+"]");}}}}}else{this._features["dojo.data.api.Identity"]=Number;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){_ea6=item[key];for(var j=0;j<_ea6.length;++j){_ea5=_ea6[j];if(_ea5!==null&&typeof _ea5=="object"){if(("_type" in _ea5)&&("_value" in _ea5)){var type=_ea5._type;var _ea9=this._datatypeMap[type];if(!_ea9){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");}else{if(lang.isFunction(_ea9)){_ea6[j]=new _ea9(_ea5._value);}else{if(lang.isFunction(_ea9.deserialize)){_ea6[j]=_ea9.deserialize(_ea5._value);}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}}}}if(_ea5._reference){var _eaa=_ea5._reference;if(!lang.isObject(_eaa)){_ea6[j]=this._getItemByIdentity(_eaa);}else{for(var k=0;k<this._arrayOfAllItems.length;++k){var _eab=this._arrayOfAllItems[k],_eac=true;for(var _ead in _eaa){if(_eab[_ead]!=_eaa[_ead]){_eac=false;}}if(_eac){_ea6[j]=_eab;}}}if(this.referenceIntegrity){var _eae=_ea6[j];if(this.isItem(_eae)){this._addReferenceToMap(_eae,item,key);}}}else{if(this.isItem(_ea5)){if(this.referenceIntegrity){this._addReferenceToMap(_ea5,item,key);}}}}}}}},_addReferenceToMap:function(_eaf,_eb0,_eb1){},getIdentity:function(item){var _eb2=this._features["dojo.data.api.Identity"];if(_eb2===Number){return item[this._itemNumPropName];}else{var _eb3=item[_eb2];if(_eb3){return _eb3[0];}}return null;},fetchItemByIdentity:function(_eb4){var item,_eb5;if(!this._loadFinished){var self=this;if(this._jsonFileUrl!==this._ccUrl){_e69.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_eb4});}else{this._loadInProgress=true;var _eb6={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _eb7=xhr.get(_eb6);_eb7.addCallback(function(data){var _eb8=_eb4.scope?_eb4.scope:_e69.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(_eb4.identity);if(_eb4.onItem){_eb4.onItem.call(_eb8,item);}self._handleQueuedFetches();}catch(error){self._loadInProgress=false;if(_eb4.onError){_eb4.onError.call(_eb8,error);}}});_eb7.addErrback(function(_eb9){self._loadInProgress=false;if(_eb4.onError){var _eba=_eb4.scope?_eb4.scope:_e69.global;_eb4.onError.call(_eba,_eb9);}});}}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(_eb4.identity);if(_eb4.onItem){_eb5=_eb4.scope?_eb4.scope:_e69.global;_eb4.onItem.call(_eb5,item);}}}}else{item=this._getItemByIdentity(_eb4.identity);if(_eb4.onItem){_eb5=_eb4.scope?_eb4.scope:_e69.global;_eb4.onItem.call(_eb5,item);}}},_getItemByIdentity:function(_ebb){var item=null;if(this._itemsByIdentity){if(Object.hasOwnProperty.call(this._itemsByIdentity,_ebb)){item=this._itemsByIdentity[_ebb];}}else{if(Object.hasOwnProperty.call(this._arrayOfAllItems,_ebb)){item=this._arrayOfAllItems[_ebb];}}if(item===undefined){item=null;}return item;},getIdentityAttributes:function(item){var _ebc=this._features["dojo.data.api.Identity"];if(_ebc===Number){return null;}else{return [_ebc];}},_forceLoad:function(){var self=this;if(this._jsonFileUrl!==this._ccUrl){_e69.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){var _ebd={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};var _ebe=xhr.get(_ebd);_ebe.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true;}else{if(self._loadInProgress){throw new Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}}}catch(e){console.log(e);throw e;}});_ebe.addErrback(function(_ebf){throw _ebf;});}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;}}}});lang.extend(_e70,_e6e);return _e70;});},"dojo/dnd/Source":function(){define(["../_base/array","../_base/connect","../_base/declare","../_base/kernel","../_base/lang","../dom-class","../dom-geometry","../mouse","../ready","../topic","./common","./Selector","./Manager"],function(_ec0,_ec1,_ec2,_ec3,lang,_ec4,_ec5,_ec6,_ec7,_ec8,dnd,_ec9,_eca){if(!_ec3.isAsync){_ec7(0,function(){var _ecb=["dojo/dnd/AutoSource","dojo/dnd/Target"];require(_ecb);});}var _ecc=_ec2("dojo.dnd.Source",_ec9,{isSource:true,horizontal:false,copyOnly:false,selfCopy:false,selfAccept:true,skipForm:false,withHandles:false,autoSync:false,delay:0,accept:["text"],generateText:true,constructor:function(node,_ecd){lang.mixin(this,lang.mixin({},_ecd));var type=this.accept;if(type.length){this.accept={};for(var i=0;i<type.length;++i){this.accept[type[i]]=1;}}this.isDragging=false;this.mouseDown=false;this.targetAnchor=null;this.targetBox=null;this.before=true;this._lastX=0;this._lastY=0;this.sourceState="";if(this.isSource){_ec4.add(this.node,"dojoDndSource");}this.targetState="";if(this.accept){_ec4.add(this.node,"dojoDndTarget");}if(this.horizontal){_ec4.add(this.node,"dojoDndHorizontal");}this.topics=[_ec8.subscribe("/dnd/source/over",lang.hitch(this,"onDndSourceOver")),_ec8.subscribe("/dnd/start",lang.hitch(this,"onDndStart")),_ec8.subscribe("/dnd/drop",lang.hitch(this,"onDndDrop")),_ec8.subscribe("/dnd/cancel",lang.hitch(this,"onDndCancel"))];},checkAcceptance:function(_ece,_ecf){if(this==_ece){return !this.copyOnly||this.selfAccept;}for(var i=0;i<_ecf.length;++i){var type=_ece.getItem(_ecf[i].id).type;var flag=false;for(var j=0;j<type.length;++j){if(type[j] in this.accept){flag=true;break;}}if(!flag){return false;}}return true;},copyState:function(_ed0,self){if(_ed0){return true;}if(arguments.length<2){self=this==_eca.manager().target;}if(self){if(this.copyOnly){return this.selfCopy;}}else{return this.copyOnly;}return false;},destroy:function(){_ecc.superclass.destroy.call(this);_ec0.forEach(this.topics,function(t){t.remove();});this.targetAnchor=null;},onMouseMove:function(e){if(this.isDragging&&this.targetState=="Disabled"){return;}_ecc.superclass.onMouseMove.call(this,e);var m=_eca.manager();if(!this.isDragging){if(this.mouseDown&&this.isSource&&(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay)){var _ed1=this.getSelectedNodes();if(_ed1.length){m.startDrag(this,_ed1,this.copyState(dnd.getCopyKeyState(e),true));}}}if(this.isDragging){var _ed2=false;if(this.current){if(!this.targetBox||this.targetAnchor!=this.current){this.targetBox=_ec5.position(this.current,true);}if(this.horizontal){_ed2=(e.pageX-this.targetBox.x<this.targetBox.w/2)==_ec5.isBodyLtr(this.current.ownerDocument);}else{_ed2=(e.pageY-this.targetBox.y)<(this.targetBox.h/2);}}if(this.current!=this.targetAnchor||_ed2!=this.before){this._markTargetAnchor(_ed2);m.canDrop(!this.current||m.source!=this||!(this.current.id in this.selection));}}},onMouseDown:function(e){if(!this.mouseDown&&this._legalMouseDown(e)&&(!this.skipForm||!dnd.isFormElement(e))){this.mouseDown=true;this._lastX=e.pageX;this._lastY=e.pageY;_ecc.superclass.onMouseDown.call(this,e);}},onMouseUp:function(e){if(this.mouseDown){this.mouseDown=false;_ecc.superclass.onMouseUp.call(this,e);}},onDndSourceOver:function(_ed3){if(this!==_ed3){this.mouseDown=false;if(this.targetAnchor){this._unmarkTargetAnchor();}}else{if(this.isDragging){var m=_eca.manager();m.canDrop(this.targetState!="Disabled"&&(!this.current||m.source!=this||!(this.current.id in this.selection)));}}},onDndStart:function(_ed4,_ed5,copy){if(this.autoSync){this.sync();}if(this.isSource){this._changeState("Source",this==_ed4?(copy?"Copied":"Moved"):"");}var _ed6=this.accept&&this.checkAcceptance(_ed4,_ed5);this._changeState("Target",_ed6?"":"Disabled");if(this==_ed4){_eca.manager().overSource(this);}this.isDragging=true;},onDndDrop:function(_ed7,_ed8,copy,_ed9){if(this==_ed9){this.onDrop(_ed7,_ed8,copy);}this.onDndCancel();},onDndCancel:function(){if(this.targetAnchor){this._unmarkTargetAnchor();this.targetAnchor=null;}this.before=true;this.isDragging=false;this.mouseDown=false;this._changeState("Source","");this._changeState("Target","");},onDrop:function(_eda,_edb,copy){if(this!=_eda){this.onDropExternal(_eda,_edb,copy);}else{this.onDropInternal(_edb,copy);}},onDropExternal:function(_edc,_edd,copy){var _ede=this._normalizedCreator;if(this.creator){this._normalizedCreator=function(node,hint){return _ede.call(this,_edc.getItem(node.id).data,hint);};}else{if(copy){this._normalizedCreator=function(node){var t=_edc.getItem(node.id);var n=node.cloneNode(true);n.id=dnd.getUniqueId();return {node:n,data:t.data,type:t.type};};}else{this._normalizedCreator=function(node){var t=_edc.getItem(node.id);_edc.delItem(node.id);return {node:node,data:t.data,type:t.type};};}}this.selectNone();if(!copy&&!this.creator){_edc.selectNone();}this.insertNodes(true,_edd,this.before,this.current);if(!copy&&this.creator){_edc.deleteSelectedNodes();}this._normalizedCreator=_ede;},onDropInternal:function(_edf,copy){var _ee0=this._normalizedCreator;if(this.current&&this.current.id in this.selection){return;}if(copy){if(this.creator){this._normalizedCreator=function(node,hint){return _ee0.call(this,this.getItem(node.id).data,hint);};}else{this._normalizedCreator=function(node){var t=this.getItem(node.id);var n=node.cloneNode(true);n.id=dnd.getUniqueId();return {node:n,data:t.data,type:t.type};};}}else{if(!this.current){return;}this._normalizedCreator=function(node){var t=this.getItem(node.id);return {node:node,data:t.data,type:t.type};};}this._removeSelection();this.insertNodes(true,_edf,this.before,this.current);this._normalizedCreator=_ee0;},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){_ecc.superclass.onOverEvent.call(this);_eca.manager().overSource(this);if(this.isDragging&&this.targetState!="Disabled"){this.onDraggingOver();}},onOutEvent:function(){_ecc.superclass.onOutEvent.call(this);_eca.manager().outSource(this);if(this.isDragging&&this.targetState!="Disabled"){this.onDraggingOut();}},_markTargetAnchor:function(_ee1){if(this.current==this.targetAnchor&&this.before==_ee1){return;}if(this.targetAnchor){this._removeItemClass(this.targetAnchor,this.before?"Before":"After");}this.targetAnchor=this.current;this.targetBox=null;this.before=_ee1;if(this.targetAnchor){this._addItemClass(this.targetAnchor,this.before?"Before":"After");}},_unmarkTargetAnchor:function(){if(!this.targetAnchor){return;}this._removeItemClass(this.targetAnchor,this.before?"Before":"After");this.targetAnchor=null;this.targetBox=null;this.before=true;},_markDndStatus:function(copy){this._changeState("Source",copy?"Copied":"Moved");},_legalMouseDown:function(e){if(e.type!="touchstart"&&!_ec6.isLeft(e)){return false;}if(!this.withHandles){return true;}for(var node=e.target;node&&node!==this.node;node=node.parentNode){if(_ec4.contains(node,"dojoDndHandle")){return true;}if(_ec4.contains(node,"dojoDndItem")||_ec4.contains(node,"dojoDndIgnore")){break;}}return false;}});return _ecc;});},"dijit/form/ValidationTextBox":function(){require({cache:{"url:dijit/form/templates/ValidationTextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"}});define("dijit/form/ValidationTextBox",["dojo/_base/declare","dojo/_base/kernel","dojo/i18n","./TextBox","../Tooltip","dojo/text!./templates/ValidationTextBox.html","dojo/i18n!./nls/validate"],function(_ee2,_ee3,i18n,_ee4,_ee5,_ee6){var _ee7;return _ee7=_ee2("dijit.form.ValidationTextBox",_ee4,{templateString:_ee6,required:false,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(attr,_ee8){if(_ee8!=_ee7.prototype[attr]){_ee3.deprecated("ValidationTextBox id="+this.id+", set('"+attr+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0");this.set("pattern",_ee8);}},_setRegExpGenAttr:function(_ee9){this._deprecateRegExp("regExpGen",_ee9);this.regExpGen=this._getPatternAttr;},_setRegExpAttr:function(_eea){this._deprecateRegExp("regExp",_eea);},_setValueAttr:function(){this.inherited(arguments);this.validate(this.focused);},validator:function(_eeb,_eec){return (new RegExp("^(?:"+this._getPatternAttr(_eec)+")"+(this.required?"":"?")+"$")).test(_eeb)&&(!this.required||!this._isEmpty(_eeb))&&(this._isEmpty(_eeb)||this.parse(_eeb,_eec)!==undefined);},_isValidSubset:function(){return this.textbox.value.search(this._partialre)==0;},isValid:function(){return this.validator(this.textbox.value,this.constraints);},_isEmpty:function(_eed){return (this.trim?/^\s*$/:/^$/).test(_eed);},getErrorMessage:function(){var _eee=this.invalidMessage=="$_unset_$"?this.messages.invalidMessage:!this.invalidMessage?this.promptMessage:this.invalidMessage;var _eef=this.missingMessage=="$_unset_$"?this.messages.missingMessage:!this.missingMessage?_eee:this.missingMessage;return (this.required&&this._isEmpty(this.textbox.value))?_eef:_eee;},getPromptMessage:function(){return this.promptMessage;},_maskValidSubsetError:true,validate:function(_ef0){var _ef1="";var _ef2=this.disabled||this.isValid(_ef0);if(_ef2){this._maskValidSubsetError=true;}var _ef3=this._isEmpty(this.textbox.value);var _ef4=!_ef2&&_ef0&&this._isValidSubset();this._set("state",_ef2?"":(((((!this._hasBeenBlurred||_ef0)&&_ef3)||_ef4)&&(this._maskValidSubsetError||(_ef4&&!this._hasBeenBlurred&&_ef0)))?"Incomplete":"Error"));this.focusNode.setAttribute("aria-invalid",_ef2?"false":"true");if(this.state=="Error"){this._maskValidSubsetError=_ef0&&_ef4;_ef1=this.getErrorMessage(_ef0);}else{if(this.state=="Incomplete"){_ef1=this.getPromptMessage(_ef0);this._maskValidSubsetError=!this._hasBeenBlurred||_ef0;}else{if(_ef3){_ef1=this.getPromptMessage(_ef0);}}}this.set("message",_ef1);return _ef2;},displayMessage:function(_ef5){if(_ef5&&this.focused){_ee5.show(_ef5,this.domNode,this.tooltipPosition,!this.isLeftToRight());}else{_ee5.hide(this.domNode);}},_refreshState:function(){if(this._created){this.validate(this.focused);}this.inherited(arguments);},constructor:function(_ef6){this.constraints={};this.baseClass+=" dijitValidationTextBox";},startup:function(){this.inherited(arguments);this._refreshState();},_setConstraintsAttr:function(_ef7){if(!_ef7.locale&&this.lang){_ef7.locale=this.lang;}this._set("constraints",_ef7);this._refreshState();},_setPatternAttr:function(_ef8){this._set("pattern",_ef8);},_getPatternAttr:function(_ef9){var p=this.pattern;var type=(typeof p).toLowerCase();if(type=="function"){p=this.pattern(_ef9||this.constraints);}if(p!=this._lastRegExp){var _efa="";this._lastRegExp=p;if(p!=".*"){p.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(re){switch(re.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":_efa+=re;break;case ")":_efa+="|$)";break;default:_efa+="(?:"+re+"|$)";break;}});}try{"".search(_efa);}catch(e){_efa=this.pattern;console.warn("RegExp error in "+this.declaredClass+": "+this.pattern);}this._partialre="^(?:"+_efa+")$";}return p;},postMixInProperties:function(){this.inherited(arguments);this.messages=i18n.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints);},_setDisabledAttr:function(_efb){this.inherited(arguments);this._refreshState();},_setRequiredAttr:function(_efc){this._set("required",_efc);this.focusNode.setAttribute("aria-required",_efc);this._refreshState();},_setMessageAttr:function(_efd){this._set("message",_efd);this.displayMessage(_efd);},reset:function(){this._maskValidSubsetError=true;this.inherited(arguments);},_onBlur:function(){this.displayMessage("");this.inherited(arguments);}});});},"esri/toolbars/_VertexMover":function(){define("esri/toolbars/_VertexMover",["dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/has","dojo/sniff","dojo/dom-style","dojox/gfx/Moveable","esri/kernel","esri/geometry/Point","esri/graphic","esri/geometry/webMercatorUtils"],function(_efe,lang,_eff,has,_f00,_f01,_f02,_f03,_f04,_f05,_f06){var VM=_efe(null,{declaredClass:"esri.toolbars.VertexMover",constructor:function(_f07,_f08,_f09,_f0a,_f0b,_f0c,_f0d,_f0e){this.point=_f07;this.symbol=_f08;this.relatedGraphic=_f09;this.segIndex=_f0a;this.ptIndex=_f0b;this.segLength=_f0c;this.editor=_f0d;this.map=_f0d.map;this._scratchGL=_f0d.toolbar._scratchGL;this._placeholder=_f0e||false;this._type=_f09.geometry.type;this._init();this._enable();},refresh:function(_f0f){if(_f0f||this._needRefresh()){this._disable();this._enable();}},destroy:function(){this._disable();if(this.graphic){this._scratchGL.remove(this.graphic);}this.point=this.symbol=this.graphic=this.relatedGraphic=this.segIndex=this.ptIndex=this.segLength=this.editor=this.map=this._scratchGL=null;},_init:function(){var _f10=new _f04(this.point.toJson());var _f11=new _f05(_f10,this.symbol);switch(this._type){case "multipoint":_f11._shape=this.relatedGraphic.getDojoShape().children[this.ptIndex];break;case "polyline":case "polygon":this._scratchGL.add(_f11);break;}this.graphic=_f11;},_enable:function(){var _f12=this.graphic.getDojoShape();if(_f12){_f12._hasMover=true;this._moveable=this._getMoveable(_f12);var node=_f12.getEventSource();if(node){_f01.set(node,"cursor",this.editor.toolbar._cursors[this._placeholder?"move-gv":"move-v"]);}}},_disable:function(){var _f13=this._moveable;if(_f13){_eff.disconnect(this._startHandle);_eff.disconnect(this._firstHandle);_eff.disconnect(this._movingHandle);_eff.disconnect(this._stopHandle);var _f14=_f13.shape;if(_f14){var node=_f14.getEventSource();if(node){_f01.set(node,"cursor",null);}}_f13.destroy();this._moveable=null;}},_needRefresh:function(){var _f15=this.graphic.getDojoShape(),need=false;if(_f15){switch(this._type){case "multipoint":var _f16=this.relatedGraphic.getDojoShape();if(_f16){var _f17=_f16.children[this.ptIndex];if(_f15!==_f17){_f15=_f17;this.graphic._shape=_f15;need=true;}}break;case "polyline":case "polygon":need=!_f15._hasMover;break;}}return need;},_getMoveable:function(_f18){var _f19=new _f02(_f18,_f00("mac")&&_f00("ff")&&!has("esri-touch")&&{leftButtonOnly:true});this._startHandle=_eff.connect(_f19,"onMoveStart",this,this._moveStartHandler);this._firstHandle=_eff.connect(_f19,"onFirstMove",this,this._firstMoveHandler);this._movingHandle=_eff.connect(_f19,"onMoving",this,this._movingHandler);this._stopHandle=_eff.connect(_f19,"onMoveStop",this,this._moveStopHandler);return _f19;},_getPtIndex:function(){return this.ptIndex+(this._placeholder?1:0);},_getInfo:function(){return {graphic:this.graphic,isGhost:this._placeholder,segmentIndex:this.segIndex,pointIndex:this._getPtIndex()};},_moveStartHandler:function(_f1a){var map=this.map;if(map.snappingManager){map.snappingManager._setUpSnapping();}_f1a.shape.moveToFront();this.constructor.onMoveStart(this);this.editor.toolbar.onVertexMoveStart(this.relatedGraphic,this._getInfo());},_firstMoveHandler:function(_f1b){var _f1c=_f1b.shape;var _f1d=this._getControlEdges();var _f1e=this._scratchGL._div;var i,_f1f=[],_f20=_f1b.host.shape._wrapOffsets[0]||0;for(i=0;i<_f1d.length;i++){var edge=_f1d[i];edge.x1+=_f20;edge.x2+=_f20;_f1f.push([_f1e.createLine({x1:edge.x1,y1:edge.y1,x2:edge.x2,y2:edge.y2}).setStroke(this.editor._lineStroke),edge.x1,edge.y1,edge.x2,edge.y2]);}_f1c._lines=_f1f;_f1b.shape.moveToFront();this.constructor.onFirstMove(this);this.editor.toolbar.onVertexFirstMove(this.relatedGraphic,this._getInfo());},_movingHandler:function(_f21){var _f22=_f21.shape,tx=_f22.getTransform();var i,_f23=_f22._lines;for(i=0;i<_f23.length;i++){var line=_f23[i];line[0].setShape({x1:line[1]+tx.dx,y1:line[2]+tx.dy,x2:line[3],y2:line[4]});}this.editor.toolbar.onVertexMove(this.relatedGraphic,this._getInfo(),tx);},_moveStopHandler:function(_f24){var _f25=_f24.shape,_f26=this.editor.toolbar,tx=_f25.getTransform(),map=this.map,host=this.graphic,_f27=_f26._geo?_f06.geographicToWebMercator(host.geometry):host.geometry;var i,_f28=_f25._lines;if(_f28){for(i=0;i<_f28.length;i++){_f28[i][0].removeShape();}_f25._lines=null;}var ph=false,_f29=true,info=this._getInfo();if(tx&&(tx.dx||tx.dy)){if(this._placeholder){this._placeholder=false;ph=true;}}else{_f29=false;}var _f2a;if(map.snappingManager){_f2a=map.snappingManager._snappingPoint;}var _f2b=_f2a||map.toMap(map.toScreen(_f27).offset(tx.dx,tx.dy));if(map.snappingManager){map.snappingManager._killOffSnapping();}_f25.setTransform(null);host.setGeometry(_f26._geo?_f06.webMercatorToGeographic(_f2b,true):_f2b);this.constructor.onMoveStop(this,tx);_f26.onVertexMoveStop(this.relatedGraphic,info,tx);if(!_f29){_f26.onVertexClick(this.relatedGraphic,info);}if(ph){_f26.onVertexAdd(this.relatedGraphic,this._getInfo());}},_getControlEdges:function(){var map=this.map;var _f2c=this.relatedGraphic.geometry;var _f2d=this.segIndex,_f2e=this.ptIndex,_f2f=this.segLength;var _f30=this._scratchGL._div;var _f31=_f30.getTransform();var sdx=_f31.dx,sdy=_f31.dy;var pt=map.toScreen(this.graphic.geometry);var x=pt.x-sdx,y=pt.y-sdy;var _f32=[];var _f33=this.editor._getControlPoints(this,_f2c,_f2d,_f2e,_f2f);if(_f33[0]){_f32.push({x1:x,y1:y,x2:_f33[0].x-sdx,y2:_f33[0].y-sdy});}if(_f33[1]){_f32.push({x1:x,y1:y,x2:_f33[1].x-sdx,y2:_f33[1].y-sdy});}return _f32;}});if(has("extend-esri")){lang.setObject("toolbars.VertexMover",VM,_f03);}lang.mixin(VM,{onMoveStart:function(){},onFirstMove:function(){},onMoveStop:function(){}});return VM;});},"url:esri/dijit/editing/templates/Editor.html":"<div class=\"esriEditor\">\r\n    <div class=\"esriTemplatePicker\" dojoAttachPoint=\"templatePickerDiv\"></div>\r\n    <div class=\"esriDrawingToolbar\" dojoAttachPoint=\"drawingToolbarDiv\"></div>\r\n    <div class=\"progressBar\" dojoAttachPoint=\"progressBar\" indeterminate=\"true\" dojoType=\"dijit.ProgressBar\" />\r\n</div>","esri/tasks/OffsetParameters":function(){define("esri/tasks/OffsetParameters",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/jsonUtils"],function(_f34,lang,_f35,_f36,has,_f37,_f38){var _f39=_f34(null,{declaredClass:"esri.tasks.OffsetParameters",geometries:null,bevelRatio:null,offsetDistance:null,offsetHow:null,offsetUnit:null,toJson:function(){var _f3a=_f35.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=_f36.toJson({geometryType:_f38.getJsonType(this.geometries[0]),geometries:_f3a});json.sr=_f36.toJson(this.geometries[0].spatialReference.toJson());}if(this.bevelRatio){json.bevelRatio=this.bevelRatio;}if(this.offsetDistance){json.offsetDistance=this.offsetDistance;}if(this.offsetHow){json.offsetHow=this.offsetHow;}if(this.offsetUnit){json.offsetUnit=this.offsetUnit;}return json;}});lang.mixin(_f39,{OFFSET_BEVELLED:"esriGeometryOffsetBevelled",OFFSET_MITERED:"esriGeometryOffsetMitered",OFFSET_ROUNDED:"esriGeometryOffsetRounded"});if(has("extend-esri")){lang.setObject("tasks.OffsetParameters",_f39,_f37);}return _f39;});},"esri/toolbars/edit":function(){define("esri/toolbars/edit",["dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/_base/Color","dojo/has","esri/kernel","esri/lang","esri/sniff","esri/toolbars/_toolbar","esri/toolbars/_Box","esri/toolbars/_GraphicMover","esri/toolbars/_VertexEditor","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol"],function(_f3b,lang,_f3c,_f3d,_f3e,has,_f3f,_f40,_f41,_f42,Box,_f43,_f44,_f45,_f46){var EDT=_f3b(_f42,{declaredClass:"esri.toolbars.Edit",constructor:function(map,_f47){this._map=map;this._tool=0;this._scratchGL=map.graphics;var _f48=has("esri-touch")||has("esri-pointer");this._defaultOptions=lang.mixin({vertexSymbol:new _f45(_f45.STYLE_CIRCLE,_f48?20:12,new _f46(_f46.STYLE_SOLID,new _f3e([0,0,0,0.5]),1),new _f3e([128,128,128])),ghostVertexSymbol:new _f45(_f45.STYLE_CIRCLE,_f48?18:10,new _f46(_f46.STYLE_SOLID,new _f3e([0,0,0,0.5]),1),new _f3e([255,255,255,0.75])),ghostLineSymbol:new _f46(_f46.STYLE_DOT,new _f3e([128,128,128]),2),allowDeleteVertices:true,allowAddVertices:true,rotateHandleOffset:_f48?24:16,boxLineSymbol:new _f46(_f46.STYLE_DASH,new _f3e([64,64,64]),1),boxHandleSymbol:new _f45(_f45.STYLE_SQUARE,_f48?16:9,new _f46(_f46.STYLE_SOLID,new _f3e([0,0,0,0.5]),1),new _f3e([255,255,255,0.75]))},_f47||{});},activate:function(tool,_f49,_f4a){this.deactivate();this._graphic=_f49;this._options=lang.mixin(lang.mixin({},this._defaultOptions),_f4a||{});var MOVE=EDT.MOVE,EDIT=EDT.EDIT_VERTICES,_f4b=EDT.SCALE,_f4c=EDT.ROTATE,move=false,edit=false,box=false,map=this._map,_f4d=map.spatialReference,_f4e=_f49.geometry.spatialReference;this._geo=!!(_f4d&&_f4e&&!_f4d.equals(_f4e)&&_f4d.isWebMercator()&&_f4e.wkid===4326);if((tool&MOVE)===MOVE){move=this._enableMove(_f49);}var _f4f=((tool&_f4b)===_f4b),_f50=((tool&_f4c)===_f4c);if(_f4f||_f50){box=this._enableBoxEditing(_f49,_f4f,_f50);}if((tool&EDIT)===EDIT){edit=this._enableVertexEditing(_f49);}if(!(move||edit||box)){throw new Error("[esri.toolbars.Edit::activate] Unable to activate the tool. Check if the tool is valid for the given geometry type.");}this._tool=tool;if(this._tool){this._mapPanEndHandle=_f3c.connect(map,"onPanEnd",this,this._mapPanEndHandler);this._mapExtChgHandle=_f3c.connect(map,"onExtentChange",this,this._mapExtentChangeHandler);this.onActivate(this._tool,_f49);}if(map.snappingManager&&(move||edit)){map.snappingManager._startSelectionLayerQuery();}},deactivate:function(){var tool=this._tool,_f51=this._graphic;if(!tool){return;}var _f52=!!this._modified;this._clear();_f3c.disconnect(this._mapPanEndHandle);_f3c.disconnect(this._mapExtChgHandle);this._mapPanEndHandle=this._mapExtChgHandle=null;this._graphic=this._geo=null;this.onDeactivate(tool,_f51,{isModified:_f52});if(this._map.snappingManager){this._map.snappingManager._stopSelectionLayerQuery();}},refresh:function(){this._refreshMoveables(true);},getCurrentState:function(){return {tool:this._tool,graphic:this._graphic,isModified:!!this._modified};},onActivate:function(tool,_f53){},onDeactivate:function(tool,_f54,info){},onGraphicMoveStart:function(_f55){},onGraphicFirstMove:function(_f56){this._modified=true;},onGraphicMove:function(_f57,_f58){},onGraphicMoveStop:function(_f59,_f5a){},onGraphicClick:function(_f5b,info){},onVertexMoveStart:function(_f5c,_f5d){},onVertexFirstMove:function(_f5e,_f5f){this._modified=true;},onVertexMove:function(_f60,_f61,_f62){},onVertexMoveStop:function(_f63,_f64,_f65){},onVertexAdd:function(_f66,_f67){this._modified=true;},onVertexClick:function(_f68,_f69){},onVertexMouseOver:function(_f6a,_f6b){},onVertexMouseOut:function(_f6c,_f6d){},onVertexDelete:function(_f6e,_f6f){this._modified=true;},onScaleStart:function(_f70){},onScaleFirstMove:function(_f71){this._modified=true;},onScale:function(_f72,info){},onScaleStop:function(_f73,info){},onRotateStart:function(_f74){},onRotateFirstMove:function(_f75){this._modified=true;},onRotate:function(_f76,info){},onRotateStop:function(_f77,info){},_enableMove:function(_f78){var map=this._map,type=_f78.geometry.type;switch(type){case "point":case "polyline":case "polygon":this._graphicMover=new _f43(_f78,map,this);return true;case "multipoint":break;}return false;},_enableVertexEditing:function(_f79){var map=this._map,type=_f79.geometry.type;switch(type){case "point":break;case "multipoint":case "polyline":case "polygon":this._vertexEditor=_f44.create(_f79,map,this);return true;}return false;},_enableBoxEditing:function(_f7a,_f7b,_f7c){var map=this._map,type=_f7a.geometry.type;switch(type){case "point":case "multipoint":break;case "polyline":case "polygon":this._boxEditor=new Box(_f7a,map,this,_f7b,_f7c,this._options.uniformScaling);return true;}return false;},_disableMove:function(){var _f7d=this._graphicMover;if(_f7d){_f7d.destroy();this._graphicMover=null;}},_disableVertexEditing:function(){var _f7e=this._vertexEditor;if(_f7e){_f7e.destroy();this._vertexEditor=null;}},_disableBoxEditing:function(){var box=this._boxEditor;if(box){box.destroy();this._boxEditor=null;}},_clear:function(){this._disableMove();this._disableVertexEditing();this._disableBoxEditing();this._tool=0;this._modified=false;},_mapPanEndHandler:function(){this._refreshMoveables();},_mapExtentChangeHandler:function(e,d,_f7f){if(_f7f){this._refreshMoveables();}},_refreshMoveables:function(_f80){var _f81=_f3d.filter([this._graphicMover,this._vertexEditor,this._boxEditor],_f40.isDefined);_f3d.forEach(_f81,function(mov){mov.refresh(_f80);});},_beginOperation:function(_f82){_f3d.forEach(this._getAffectedTools(_f82),function(tool){tool.suspend();});},_endOperation:function(_f83){_f3d.forEach(this._getAffectedTools(_f83),function(tool){tool.resume();});},_getAffectedTools:function(_f84){var _f85=[];switch(_f84){case "MOVE":_f85=[this._vertexEditor,this._boxEditor];break;case "VERTICES":_f85=[this._boxEditor];break;case "BOX":_f85=[this._vertexEditor];break;}_f85=_f3d.filter(_f85,_f40.isDefined);return _f85;}});lang.mixin(EDT,{MOVE:1,EDIT_VERTICES:2,SCALE:4,ROTATE:8});if(has("extend-esri")){lang.setObject("toolbars.Edit",EDT,_f3f);}return EDT;});},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(lang){var _f86={};lang.setObject("dojo.data.util.filter",_f86);_f86.patternToRegExp=function(_f87,_f88){var rxp="^";var c=null;for(var i=0;i<_f87.length;i++){c=_f87.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_f87.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_f88){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};return _f86;});},"dijit/_WidgetsInTemplateMixin":function(){define("dijit/_WidgetsInTemplateMixin",["dojo/_base/array","dojo/_base/declare","dojo/parser"],function(_f89,_f8a,_f8b){return _f8a("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:false,widgetsInTemplate:true,_beforeFillContent:function(){if(this.widgetsInTemplate){var node=this.domNode;var cw=(this._startupWidgets=_f8b.parse(node,{noStart:!this._earlyTemplatedStartup,template:true,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,scope:"dojo"}));if(!cw.isFulfilled()){throw new Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), "+"unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}this._attachTemplateNodes(cw,function(n,p){return n[p];});}},startup:function(){_f89.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);}});});},"esri/dijit/editing/toolbars/Drawing":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/has","dijit/_CssStateMixin","esri/dijit/editing/Util","esri/dijit/editing/toolbars/ToolbarBase","esri/dijit/editing/tools/ButtonToolBase","esri/dijit/editing/tools/Cut","esri/dijit/editing/tools/Union","esri/dijit/editing/tools/Reshape","esri/dijit/editing/tools/Editing","esri/dijit/editing/tools/EditingTools","esri/dijit/editing/tools/Selection","esri/dijit/editing/tools/SelectionTools","esri/kernel"],function(_f8c,lang,_f8d,_f8e,has,_f8f,_f90,_f91,_f92,Cut,_f93,_f94,_f95,_f96,_f97,_f98,_f99){var _f9a=_f8c([_f91,_f8f],{declaredClass:"esri.dijit.editing.toolbars.Drawing",onShowAttributeInspector:function(){},_activateTool:function(tool,_f9b){this._settings.editor._activeTool=tool;if(tool!=="EDITING"){this._settings.templatePicker.clearSelection();}if(tool!=="ATTRIBUTES"){this._settings.editor._hideAttributeInspector();}if(tool==="CLEAR"){return;}this.inherited(arguments);},_initializeToolbar:function(){var _f9c=this._settings.layers;_f8d.forEach(_f9c,function(_f9d){this._tbConnects.push(_f8e.connect(_f9d,"onSelectionComplete",this,"_updateUI"));},this);},activateEditing:function(_f9e,_f9f){this._tools.EDITING._activateTool(_f9e,_f9f.geometryType);this._activeTool=this._tools.EDITING;this._activeTool.setChecked(true);},_updateUI:function(){if(this._settings.undoManager){this._tools.UNDO.set("disabled",this._settings.undoManager.canUndo===false);this._tools.REDO.set("disabled",this._settings.undoManager.canRedo===false);}this._selectedFeatures=_f90.getSelection(this._settings.layers);var _fa0=this._selectedFeatures.length;if(this._tools.DELETE){this._tools.DELETE.set("disabled",_fa0<=0);}if(this._tools.CLEAR){this._tools.CLEAR.set("disabled",_fa0<=0);}if(this._tools.ATTRIBUTES){this._tools.ATTRIBUTES.set("disabled",_fa0<=0);}if(this._tools.UNION){this._tools.UNION.set("disabled",_fa0<2);}},_toolFinished:function(tool){if(tool==="ATTRIBUTES"&&(this._selectedFeatures&&this._selectedFeatures.length)){this.onShowAttributeInspector(this._selectedFeatures[0]);}if(tool==="SELECT"||tool==="CUT"||tool==="RESHAPING"||tool==="EDITING"){this._activeTool.deactivate();this._activeTool.setChecked(false);this._activeTool=null;}if(tool==="DELETE"){this.onDelete();}this._updateUI();},_createTools:function(){this._tools.SELECT=new _f97({settings:this._settings,onClick:lang.hitch(this,"_activateTool","SELECT",true),onFinished:lang.hitch(this,"_toolFinished","SELECT")});this.addChild(this._tools.SELECT);this._tools.CLEAR=new _f92(lang.mixin(_f98.selectClear,{settings:this._settings,onClick:lang.hitch(this._settings.editor,"_clearSelection",false)}));this.addChild(this._tools.CLEAR);this._createSeparator();this._tools.ATTRIBUTES=new _f92(lang.mixin(_f96.attributes,{settings:this._settings,onClick:lang.hitch(this,"_toolFinished","ATTRIBUTES")}));this.addChild(this._tools.ATTRIBUTES);this._createSeparator();this._tools.EDITING=new _f95({settings:this._settings,onClick:lang.hitch(this,"_activateTool","EDITING",true),onApplyEdits:lang.hitch(this,"onApplyEdits"),onFinished:lang.hitch(this,"_toolFinished","EDITING")});this.addChild(this._tools.EDITING);this._tools.DELETE=new _f92(lang.mixin(_f96.del,{settings:this._settings,onClick:lang.hitch(this,"_toolFinished","DELETE")}));this.addChild(this._tools.DELETE);if(this._settings.toolbarOptions){if(this._settings.toolbarOptions.cutVisible||this._settings.toolbarOptions.mergeVisible||this._settings.toolbarOptions.reshapeVisible){this._createSeparator();}if(this._settings.toolbarOptions.cutVisible){this._tools.CUT=new Cut({settings:this._settings,onFinished:lang.hitch(this,"_toolFinished","CUT"),onClick:lang.hitch(this,"_activateTool","CUT",true),onApplyEdits:lang.hitch(this,"onApplyEdits")});this.addChild(this._tools.CUT);}if(this._settings.toolbarOptions.mergeVisible){this._tools.UNION=new _f93({settings:this._settings,onFinished:lang.hitch(this,"_toolFinished","UNION"),onApplyEdits:lang.hitch(this,"onApplyEdits")});this.addChild(this._tools.UNION);}if(this._settings.toolbarOptions.reshapeVisible){this._tools.RESHAPING=new _f94({settings:this._settings,onClick:lang.hitch(this,"_activateTool","RESHAPING",true),onFinished:lang.hitch(this,"_toolFinished","RESHAPING"),onApplyEdits:lang.hitch(this,"onApplyEdits")});this.addChild(this._tools.RESHAPING);}}if(this._settings.enableUndoRedo){this._createSeparator();this._tools.UNDO=new _f92(lang.mixin(_f96.undo,{settings:this._settings,onClick:lang.hitch(this,function(){this._tools.UNDO.set("disabled",true);this._tools.REDO.set("disabled",true);this._settings.editor._undo();})}));this.addChild(this._tools.UNDO);this._tools.REDO=new _f92(lang.mixin(_f96.redo,{settings:this._settings,onClick:lang.hitch(this,function(){this._tools.UNDO.set("disabled",true);this._tools.REDO.set("disabled",true);this._settings.editor._redo();})}));this.addChild(this._tools.REDO);}}});if(has("extend-esri")){lang.setObject("dijit.editing.toolbars.Drawing",_f9a,_f99);}return _f9a;});},"dijit/_FocusMixin":function(){define("dijit/_FocusMixin",["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(_fa1,_fa2,_fa3,lang){lang.extend(_fa2,{focused:false,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus();},_onBlur:function(){this.onBlur();}});return _fa3("dijit._FocusMixin",null,{_focusManager:_fa1});});},"esri/dijit/editing/tools/Reshape":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/has","esri/layers/FeatureLayer","esri/tasks/query","esri/toolbars/draw","esri/dijit/editing/tools/ToggleToolBase","esri/kernel"],function(_fa4,lang,_fa5,_fa6,has,_fa7,_fa8,Draw,_fa9,_faa){var _fab=_fa4([_fa9],{declaredClass:"esri.dijit.editing.tools.Reshape",id:"btnFeatureReshape",_enabledIcon:"toolbarIcon reshapeIcon",_disabledIcon:"toolbarIcon reshapeIcon",_drawType:Draw.POLYLINE,_enabled:true,_label:"NLS_reshapeLbl",activate:function(){_fa6.disconnect(this._rConnect);this._rConnect=_fa6.connect(this._toolbar,"onDrawEnd",this,"_onDrawEnd");this.inherited(arguments);},deactivate:function(){this.inherited(arguments);_fa6.disconnect(this._rConnect);delete this._rConnect;},_onDrawEnd:function(_fac){var _fad=this._settings.layers;var _fae=new _fa8();_fae.geometry=_fac;var _faf=this._reshapeLayers=_fa5.filter(_fad,function(_fb0){return (_fb0.geometryType==="esriGeometryPolygon"||"esriGeometryPolyline");});this._settings.editor._selectionHelper.selectFeatures(_faf,_fae,_fa7.SELECTION_NEW,lang.hitch(this,"_reshape",_fae));},_reshape:function(_fb1,_fb2){var _fb3=[];var _fb4=_fb2;if(_fb4.length!==1){return;}this._settings.geometryService.reshape(_fb4[0].geometry,_fb1.geometry,lang.hitch(this,function(_fb5){var _fb6=[_fb4[0].setGeometry(_fb5)];this.onApplyEdits([{layer:_fb4[0].getLayer(),updates:_fb6}],lang.hitch(this,function(){this._settings.editor._selectionHelper.clearSelection(false);this.onFinished();}));}));}});if(has("extend-esri")){lang.setObject("dijit.editing.tools.Reshape",_fab,_faa);}return _fab;});},"esri/dijit/editing/tools/ToggleToolBase":function(){define("esri/dijit/editing/tools/ToggleToolBase",["dojo/_base/declare","dojo/_base/lang","dojo/has","dijit/form/ToggleButton","esri/dijit/editing/tools/ToolBase","esri/kernel"],function(_fb7,lang,has,_fb8,_fb9,_fba){var TTB=_fb7([_fb8,_fb9],{declaredClass:"esri.dijit.editing.tools.ToggleToolBase",postCreate:function(){this.inherited(arguments);if(this._setShowLabelAttr){this._setShowLabelAttr(false);}},destroy:function(){_fb8.prototype.destroy.apply(this,arguments);_fb9.prototype.destroy.apply(this,arguments);},setChecked:function(_fbb){_fb8.prototype.setChecked.apply(this,arguments);}});if(has("extend-esri")){lang.setObject("dijit.editing.tools.ToggleToolBase",TTB,_fba);}return TTB;});},"dojox/grid/_Builder":function(){define("dojox/grid/_Builder",["../main","dojo/_base/array","dojo/_base/lang","dojo/_base/window","dojo/_base/event","dojo/_base/sniff","dojo/_base/connect","dojo/dnd/Moveable","dojox/html/metrics","./util","dojo/_base/html"],function(_fbc,_fbd,lang,win,_fbe,has,_fbf,_fc0,_fc1,util,html){var dg=_fbc.grid;var _fc2=function(td){return td.cellIndex>=0?td.cellIndex:_fbd.indexOf(td.parentNode.cells,td);};var _fc3=function(tr){return tr.rowIndex>=0?tr.rowIndex:_fbd.indexOf(tr.parentNode.childNodes,tr);};var _fc4=function(_fc5,_fc6){return _fc5&&((_fc5.rows||0)[_fc6]||_fc5.childNodes[_fc6]);};var _fc7=function(node){for(var n=node;n&&n.tagName!="TABLE";n=n.parentNode){}return n;};var _fc8=function(_fc9,_fca){for(var n=_fc9;n&&_fca(n);n=n.parentNode){}return n;};var _fcb=function(_fcc){var name=_fcc.toUpperCase();return function(node){return node.tagName!=name;};};var _fcd=util.rowIndexTag;var _fce=util.gridViewTag;var _fcf=dg._Builder=lang.extend(function(view){if(view){this.view=view;this.grid=view.grid;}},{view:null,_table:"<table class=\"dojoxGridRowTable\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" role=\"presentation\"",getTableArray:function(){var html=[this._table];if(this.view.viewWidth){html.push([" style=\"width:",this.view.viewWidth,";\""].join(""));}html.push(">");return html;},generateCellMarkup:function(_fd0,_fd1,_fd2,_fd3){var _fd4=[],html;if(_fd3){var _fd5=_fd0.index!=_fd0.grid.getSortIndex()?"":_fd0.grid.sortInfo>0?"aria-sort=\"ascending\"":"aria-sort=\"descending\"";if(!_fd0.id){_fd0.id=this.grid.id+"Hdr"+_fd0.index;}html=["<th tabIndex=\"-1\" aria-readonly=\"true\" role=\"columnheader\"",_fd5,"id=\"",_fd0.id,"\""];}else{var _fd6=this.grid.editable&&!_fd0.editable?"aria-readonly=\"true\"":"";html=["<td tabIndex=\"-1\" role=\"gridcell\"",_fd6];}if(_fd0.colSpan){html.push(" colspan=\"",_fd0.colSpan,"\"");}if(_fd0.rowSpan){html.push(" rowspan=\"",_fd0.rowSpan,"\"");}html.push(" class=\"dojoxGridCell ");if(_fd0.classes){html.push(_fd0.classes," ");}if(_fd2){html.push(_fd2," ");}_fd4.push(html.join(""));_fd4.push("");html=["\" idx=\"",_fd0.index,"\" style=\""];if(_fd1&&_fd1[_fd1.length-1]!=";"){_fd1+=";";}html.push(_fd0.styles,_fd1||"",_fd0.hidden?"display:none;":"");if(_fd0.unitWidth){html.push("width:",_fd0.unitWidth,";");}_fd4.push(html.join(""));_fd4.push("");html=["\""];if(_fd0.attrs){html.push(" ",_fd0.attrs);}html.push(">");_fd4.push(html.join(""));_fd4.push("");_fd4.push(_fd3?"</th>":"</td>");return _fd4;},isCellNode:function(_fd7){return Boolean(_fd7&&_fd7!=win.doc&&html.attr(_fd7,"idx"));},getCellNodeIndex:function(_fd8){return _fd8?Number(html.attr(_fd8,"idx")):-1;},getCellNode:function(_fd9,_fda){for(var i=0,row;((row=_fc4(_fd9.firstChild,i))&&row.cells);i++){for(var j=0,cell;(cell=row.cells[j]);j++){if(this.getCellNodeIndex(cell)==_fda){return cell;}}}return null;},findCellTarget:function(_fdb,_fdc){var n=_fdb;while(n&&(!this.isCellNode(n)||(n.offsetParent&&_fce in n.offsetParent.parentNode&&n.offsetParent.parentNode[_fce]!=this.view.id))&&(n!=_fdc)){n=n.parentNode;}return n!=_fdc?n:null;},baseDecorateEvent:function(e){e.dispatch="do"+e.type;e.grid=this.grid;e.sourceView=this.view;e.cellNode=this.findCellTarget(e.target,e.rowNode);e.cellIndex=this.getCellNodeIndex(e.cellNode);e.cell=(e.cellIndex>=0?this.grid.getCell(e.cellIndex):null);},findTarget:function(_fdd,_fde){var n=_fdd;while(n&&(n!=this.domNode)&&(!(_fde in n)||(_fce in n&&n[_fce]!=this.view.id))){n=n.parentNode;}return (n!=this.domNode)?n:null;},findRowTarget:function(_fdf){return this.findTarget(_fdf,_fcd);},isIntraNodeEvent:function(e){try{return (e.cellNode&&e.relatedTarget&&html.isDescendant(e.relatedTarget,e.cellNode));}catch(x){return false;}},isIntraRowEvent:function(e){try{var row=e.relatedTarget&&this.findRowTarget(e.relatedTarget);return !row&&(e.rowIndex==-1)||row&&(e.rowIndex==row.gridRowIndex);}catch(x){return false;}},dispatchEvent:function(e){if(e.dispatch in this){return this[e.dispatch](e);}return false;},domouseover:function(e){if(e.cellNode&&(e.cellNode!=this.lastOverCellNode)){this.lastOverCellNode=e.cellNode;this.grid.onMouseOver(e);}this.grid.onMouseOverRow(e);},domouseout:function(e){if(e.cellNode&&(e.cellNode==this.lastOverCellNode)&&!this.isIntraNodeEvent(e,this.lastOverCellNode)){this.lastOverCellNode=null;this.grid.onMouseOut(e);if(!this.isIntraRowEvent(e)){this.grid.onMouseOutRow(e);}}},domousedown:function(e){if(e.cellNode){this.grid.onMouseDown(e);}this.grid.onMouseDownRow(e);}});var _fe0=dg._ContentBuilder=lang.extend(function(view){_fcf.call(this,view);},_fcf.prototype,{update:function(){this.prepareHtml();},prepareHtml:function(){var _fe1=this.grid.get,_fe2=this.view.structure.cells;for(var j=0,row;(row=_fe2[j]);j++){for(var i=0,cell;(cell=row[i]);i++){cell.get=cell.get||(cell.value==undefined)&&_fe1;cell.markup=this.generateCellMarkup(cell,cell.cellStyles,cell.cellClasses,false);if(!this.grid.editable&&cell.editable){this.grid.editable=true;}}}},generateHtml:function(_fe3,_fe4){var html=this.getTableArray(),v=this.view,_fe5=v.structure.cells,item=this.grid.getItem(_fe4);util.fire(this.view,"onBeforeRow",[_fe4,_fe5]);for(var j=0,row;(row=_fe5[j]);j++){if(row.hidden||row.header){continue;}html.push(!row.invisible?"<tr>":"<tr class=\"dojoxGridInvisible\">");for(var i=0,cell,m,cc,cs;(cell=row[i]);i++){m=cell.markup;cc=cell.customClasses=[];cs=cell.customStyles=[];m[5]=cell.format(_fe4,item);m[1]=cc.join(" ");m[3]=cs.join(";");html.push.apply(html,m);}html.push("</tr>");}html.push("</table>");return html.join("");},decorateEvent:function(e){e.rowNode=this.findRowTarget(e.target);if(!e.rowNode){return false;}e.rowIndex=e.rowNode[_fcd];this.baseDecorateEvent(e);e.cell=this.grid.getCell(e.cellIndex);return true;}});var _fe6=dg._HeaderBuilder=lang.extend(function(view){this.moveable=null;_fcf.call(this,view);},_fcf.prototype,{_skipBogusClicks:false,overResizeWidth:4,minColWidth:1,update:function(){if(this.tableMap){this.tableMap.mapRows(this.view.structure.cells);}else{this.tableMap=new dg._TableMap(this.view.structure.cells);}},generateHtml:function(_fe7,_fe8){var html=this.getTableArray(),_fe9=this.view.structure.cells;util.fire(this.view,"onBeforeRow",[-1,_fe9]);for(var j=0,row;(row=_fe9[j]);j++){if(row.hidden){continue;}html.push(!row.invisible?"<tr>":"<tr class=\"dojoxGridInvisible\">");for(var i=0,cell,_fea;(cell=row[i]);i++){cell.customClasses=[];cell.customStyles=[];if(this.view.simpleStructure){if(cell.draggable){if(cell.headerClasses){if(cell.headerClasses.indexOf("dojoDndItem")==-1){cell.headerClasses+=" dojoDndItem";}}else{cell.headerClasses="dojoDndItem";}}if(cell.attrs){if(cell.attrs.indexOf("dndType='gridColumn_")==-1){cell.attrs+=" dndType='gridColumn_"+this.grid.id+"'";}}else{cell.attrs="dndType='gridColumn_"+this.grid.id+"'";}}_fea=this.generateCellMarkup(cell,cell.headerStyles,cell.headerClasses,true);_fea[5]=(_fe8!=undefined?_fe8:_fe7(cell));_fea[3]=cell.customStyles.join(";");_fea[1]=cell.customClasses.join(" ");html.push(_fea.join(""));}html.push("</tr>");}html.push("</table>");return html.join("");},getCellX:function(e){var n,x=e.layerX;if(has("mozilla")||has("ie")>=9){n=_fc8(e.target,_fcb("th"));x-=(n&&n.offsetLeft)||0;var t=e.sourceView.getScrollbarWidth();if(!this.grid.isLeftToRight()){table=_fc8(n,_fcb("table"));x-=(table&&table.offsetLeft)||0;}}n=_fc8(e.target,function(){if(!n||n==e.cellNode){return false;}x+=(n.offsetLeft<0?0:n.offsetLeft);return true;});return x;},decorateEvent:function(e){this.baseDecorateEvent(e);e.rowIndex=-1;e.cellX=this.getCellX(e);return true;},prepareResize:function(e,mod){do{var i=e.cellIndex;e.cellNode=(i?e.cellNode.parentNode.cells[i+mod]:null);e.cellIndex=(e.cellNode?this.getCellNodeIndex(e.cellNode):-1);}while(e.cellNode&&e.cellNode.style.display=="none");return Boolean(e.cellNode);},canResize:function(e){if(!e.cellNode||e.cellNode.colSpan>1){return false;}var cell=this.grid.getCell(e.cellIndex);return !cell.noresize&&cell.canResize();},overLeftResizeArea:function(e){if(html.hasClass(win.body(),"dojoDndMove")){return false;}if(has("ie")){var tN=e.target;if(html.hasClass(tN,"dojoxGridArrowButtonNode")||html.hasClass(tN,"dojoxGridArrowButtonChar")||html.hasClass(tN,"dojoxGridColCaption")){return false;}}if(this.grid.isLeftToRight()){return (e.cellIndex>0)&&(e.cellX>0&&e.cellX<this.overResizeWidth)&&this.prepareResize(e,-1);}var t=e.cellNode&&(e.cellX>0&&e.cellX<this.overResizeWidth);return t;},overRightResizeArea:function(e){if(html.hasClass(win.body(),"dojoDndMove")){return false;}if(has("ie")){var tN=e.target;if(html.hasClass(tN,"dojoxGridArrowButtonNode")||html.hasClass(tN,"dojoxGridArrowButtonChar")||html.hasClass(tN,"dojoxGridColCaption")){return false;}}if(this.grid.isLeftToRight()){return e.cellNode&&(e.cellX>=e.cellNode.offsetWidth-this.overResizeWidth);}return (e.cellIndex>0)&&(e.cellX>=e.cellNode.offsetWidth-this.overResizeWidth)&&this.prepareResize(e,-1);},domousemove:function(e){if(!this.moveable){var c=(this.overRightResizeArea(e)?"dojoxGridColResize":(this.overLeftResizeArea(e)?"dojoxGridColResize":""));if(c&&!this.canResize(e)){c="dojoxGridColNoResize";}html.toggleClass(e.sourceView.headerNode,"dojoxGridColNoResize",(c=="dojoxGridColNoResize"));html.toggleClass(e.sourceView.headerNode,"dojoxGridColResize",(c=="dojoxGridColResize"));if(c){_fbe.stop(e);}}},domousedown:function(e){if(!this.moveable){if((this.overRightResizeArea(e)||this.overLeftResizeArea(e))&&this.canResize(e)){this.beginColumnResize(e);}else{this.grid.onMouseDown(e);this.grid.onMouseOverRow(e);}}},doclick:function(e){if(this._skipBogusClicks){_fbe.stop(e);return true;}return false;},colResizeSetup:function(e,_feb){var _fec=html.contentBox(e.sourceView.headerNode);if(_feb){this.lineDiv=document.createElement("div");var vw=html.position(e.sourceView.headerNode,true);var _fed=html.contentBox(e.sourceView.domNode);var l=e.pageX;if(!this.grid.isLeftToRight()&&has("ie")<8){l-=_fc1.getScrollbar().w;}html.style(this.lineDiv,{top:vw.y+"px",left:l+"px",height:(_fed.h+_fec.h)+"px"});html.addClass(this.lineDiv,"dojoxGridResizeColLine");this.lineDiv._origLeft=l;win.body().appendChild(this.lineDiv);}var _fee=[],_fef=this.tableMap.findOverlappingNodes(e.cellNode);for(var i=0,cell;(cell=_fef[i]);i++){_fee.push({node:cell,index:this.getCellNodeIndex(cell),width:cell.offsetWidth});}var view=e.sourceView;var adj=this.grid.isLeftToRight()?1:-1;var _ff0=e.grid.views.views;var _ff1=[];for(var j=view.idx+adj,_ff2;(_ff2=_ff0[j]);j=j+adj){_ff1.push({node:_ff2.headerNode,left:window.parseInt(_ff2.headerNode.style.left)});}var _ff3=view.headerContentNode.firstChild;var drag={scrollLeft:e.sourceView.headerNode.scrollLeft,view:view,node:e.cellNode,index:e.cellIndex,w:html.contentBox(e.cellNode).w,vw:_fec.w,table:_ff3,tw:html.contentBox(_ff3).w,spanners:_fee,followers:_ff1};return drag;},beginColumnResize:function(e){this.moverDiv=document.createElement("div");html.style(this.moverDiv,{position:"absolute",left:0});win.body().appendChild(this.moverDiv);html.addClass(this.grid.domNode,"dojoxGridColumnResizing");var m=(this.moveable=new _fc0(this.moverDiv));var drag=this.colResizeSetup(e,true);m.onMove=lang.hitch(this,"doResizeColumn",drag);_fbf.connect(m,"onMoveStop",lang.hitch(this,function(){this.endResizeColumn(drag);if(drag.node.releaseCapture){drag.node.releaseCapture();}this.moveable.destroy();delete this.moveable;this.moveable=null;html.removeClass(this.grid.domNode,"dojoxGridColumnResizing");}));if(e.cellNode.setCapture){e.cellNode.setCapture();}m.onMouseDown(e);},doResizeColumn:function(_ff4,_ff5,_ff6){var _ff7=_ff6.l;var data={deltaX:_ff7,w:_ff4.w+(this.grid.isLeftToRight()?_ff7:-_ff7),vw:_ff4.vw+_ff7,tw:_ff4.tw+_ff7};this.dragRecord={inDrag:_ff4,mover:_ff5,leftTop:_ff6};if(data.w>=this.minColWidth){if(!_ff5){this.doResizeNow(_ff4,data);}else{html.style(this.lineDiv,"left",(this.lineDiv._origLeft+data.deltaX)+"px");}}},endResizeColumn:function(_ff8){if(this.dragRecord){var _ff9=this.dragRecord.leftTop;var _ffa=this.grid.isLeftToRight()?_ff9.l:-_ff9.l;_ffa+=Math.max(_ff8.w+_ffa,this.minColWidth)-(_ff8.w+_ffa);if(has("webkit")&&_ff8.spanners.length){_ffa+=html._getPadBorderExtents(_ff8.spanners[0].node).w;}var data={deltaX:_ffa,w:_ff8.w+_ffa,vw:_ff8.vw+_ffa,tw:_ff8.tw+_ffa};this.doResizeNow(_ff8,data);delete this.dragRecord;}html.destroy(this.lineDiv);html.destroy(this.moverDiv);html.destroy(this.moverDiv);delete this.moverDiv;this._skipBogusClicks=true;_ff8.view.update();this._skipBogusClicks=false;this.grid.onResizeColumn(_ff8.index);},doResizeNow:function(_ffb,data){_ffb.view.convertColPctToFixed();if(_ffb.view.flexCells&&!_ffb.view.testFlexCells()){var t=_fc7(_ffb.node);if(t){(t.style.width="");}}var i,s,sw,f,fl;for(i=0;(s=_ffb.spanners[i]);i++){sw=s.width+data.deltaX;if(sw>0){s.node.style.width=sw+"px";_ffb.view.setColWidth(s.index,sw);}}if(this.grid.isLeftToRight()||!has("ie")){for(i=0;(f=_ffb.followers[i]);i++){fl=f.left+data.deltaX;f.node.style.left=fl+"px";}}_ffb.node.style.width=data.w+"px";_ffb.view.setColWidth(_ffb.index,data.w);_ffb.view.headerNode.style.width=data.vw+"px";_ffb.view.setColumnsWidth(data.tw);if(!this.grid.isLeftToRight()){_ffb.view.headerNode.scrollLeft=_ffb.scrollLeft+data.deltaX;}}});dg._TableMap=lang.extend(function(rows){this.mapRows(rows);},{map:null,mapRows:function(_ffc){var _ffd=_ffc.length;if(!_ffd){return;}this.map=[];var row;for(var k=0;(row=_ffc[k]);k++){this.map[k]=[];}for(var j=0;(row=_ffc[j]);j++){for(var i=0,x=0,cell,_ffe,_fff;(cell=row[i]);i++){while(this.map[j][x]){x++;}this.map[j][x]={c:i,r:j};_fff=cell.rowSpan||1;_ffe=cell.colSpan||1;for(var y=0;y<_fff;y++){for(var s=0;s<_ffe;s++){this.map[j+y][x+s]=this.map[j][x];}}x+=_ffe;}}},dumpMap:function(){for(var j=0,row,h="";(row=this.map[j]);j++,h=""){for(var i=0,cell;(cell=row[i]);i++){h+=cell.r+","+cell.c+"   ";}}},getMapCoords:function(inRow,inCol){for(var j=0,row;(row=this.map[j]);j++){for(var i=0,cell;(cell=row[i]);i++){if(cell.c==inCol&&cell.r==inRow){return {j:j,i:i};}}}return {j:-1,i:-1};},getNode:function(_1000,inRow,inCol){var row=_1000&&_1000.rows[inRow];return row&&row.cells[inCol];},_findOverlappingNodes:function(_1001,inRow,inCol){var nodes=[];var m=this.getMapCoords(inRow,inCol);for(var j=0,row;(row=this.map[j]);j++){if(j==m.j){continue;}var rw=row[m.i];var n=(rw?this.getNode(_1001,rw.r,rw.c):null);if(n){nodes.push(n);}}return nodes;},findOverlappingNodes:function(_1002){return this._findOverlappingNodes(_fc7(_1002),_fc3(_1002.parentNode),_fc2(_1002));}});return {_Builder:_fcf,_HeaderBuilder:_fe6,_ContentBuilder:_fe0};});},"dijit/form/FilteringSelect":function(){define("dijit/form/FilteringSelect",["dojo/data/util/filter","dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(_1003,_1004,lang,when,_1005,_1006){return _1004("dijit.form.FilteringSelect",[_1005,_1006],{required:true,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened;},isValid:function(){return !!this.item||(!this.required&&this.get("displayedValue")=="");},_refreshState:function(){if(!this.searchTimer){this.inherited(arguments);}},_callbackSetLabel:function(_1007,query,_1008,_1009){if((query&&query[this.searchAttr]!==this._lastQuery)||(!query&&_1007.length&&this.store.getIdentity(_1007[0])!=this._lastQuery)){return;}if(!_1007.length){this.set("value","",_1009||(_1009===undefined&&!this.focused),this.textbox.value,null);}else{this.set("item",_1007[0],_1009);}},_openResultList:function(_100a,query,_100b){if(query[this.searchAttr]!==this._lastQuery){return;}this.inherited(arguments);if(this.item===undefined){this.validate(true);}},_getValueAttr:function(){return this.valueNode.value;},_getValueField:function(){return "value";},_setValueAttr:function(value,_100c,_100d,item){if(!this._onChangeActive){_100c=null;}if(item===undefined){if(value===null||value===""){value="";if(!lang.isString(_100d)){this._setDisplayedValueAttr(_100d||"",_100c);return;}}var self=this;this._lastQuery=value;when(this.store.get(value),function(item){self._callbackSetLabel(item?[item]:[],undefined,undefined,_100c);});}else{this.valueNode.value=value;this.inherited(arguments);}},_setItemAttr:function(item,_100e,_100f){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value;},_getDisplayQueryString:function(text){return text.replace(/([\\\*\?])/g,"\\$1");},_setDisplayedValueAttr:function(label,_1010){if(label==null){label="";}if(!this._created){if(!("displayedValue" in this.params)){return;}_1010=false;}if(this.store){this.closeDropDown();var query=lang.clone(this.query);var qs=this._getDisplayQueryString(label),q;if(this.store._oldAPI){q=qs;}else{q=_1003.patternToRegExp(qs,this.ignoreCase);q.toString=function(){return qs;};}this._lastQuery=query[this.searchAttr]=q;this.textbox.value=label;this._lastDisplayedValue=label;this._set("displayedValue",label);var _1011=this;var _1012={ignoreCase:this.ignoreCase,deep:true};lang.mixin(_1012,this.fetchProperties);this._fetchHandle=this.store.query(query,_1012);when(this._fetchHandle,function(_1013){_1011._fetchHandle=null;_1011._callbackSetLabel(_1013||[],query,_1012,_1010);},function(err){_1011._fetchHandle=null;if(!_1011._cancelingQuery){console.error("dijit.form.FilteringSelect: "+err.toString());}});}},undo:function(){this.set("displayedValue",this._lastDisplayedValue);}});});},"dojox/grid/_EditManager":function(){define("dojox/grid/_EditManager",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/connect","dojo/_base/sniff","./util"],function(lang,array,_1014,_1015,has,util){return _1014("dojox.grid._EditManager",null,{constructor:function(_1016){this.grid=_1016;if(has("ie")){this.connections=[_1015.connect(document.body,"onfocus",lang.hitch(this,"_boomerangFocus"))];}else{this.connections=[_1015.connect(this.grid,"onBlur",this,"apply")];}},info:{},destroy:function(){array.forEach(this.connections,_1015.disconnect);},cellFocus:function(_1017,_1018){if(this.grid.singleClickEdit||this.isEditRow(_1018)){this.setEditCell(_1017,_1018);}else{this.apply();}if(this.isEditing()||(_1017&&_1017.editable&&_1017.alwaysEditing)){this._focusEditor(_1017,_1018);}},rowClick:function(e){if(this.isEditing()&&!this.isEditRow(e.rowIndex)){this.apply();}},styleRow:function(inRow){if(inRow.index==this.info.rowIndex){inRow.customClasses+=" dojoxGridRowEditing";}},dispatchEvent:function(e){var c=e.cell,ed=(c&&c["editable"])?c:0;return ed&&ed.dispatchEvent(e.dispatch,e);},isEditing:function(){return this.info.rowIndex!==undefined;},isEditCell:function(_1019,_101a){return (this.info.rowIndex===_1019)&&(this.info.cell.index==_101a);},isEditRow:function(_101b){return this.info.rowIndex===_101b;},setEditCell:function(_101c,_101d){if(!this.isEditCell(_101d,_101c.index)&&this.grid.canEdit&&this.grid.canEdit(_101c,_101d)){this.start(_101c,_101d,this.isEditRow(_101d)||_101c.editable);}},_focusEditor:function(_101e,_101f){util.fire(_101e,"focus",[_101f]);},focusEditor:function(){if(this.isEditing()){this._focusEditor(this.info.cell,this.info.rowIndex);}},_boomerangWindow:500,_shouldCatchBoomerang:function(){return this._catchBoomerang>new Date().getTime();},_boomerangFocus:function(){if(this._shouldCatchBoomerang()){this.grid.focus.focusGrid();this.focusEditor();this._catchBoomerang=0;}},_doCatchBoomerang:function(){if(has("ie")){this._catchBoomerang=new Date().getTime()+this._boomerangWindow;}},start:function(_1020,_1021,_1022){if(!this._isValidInput()){return;}this.grid.beginUpdate();this.editorApply();if(this.isEditing()&&!this.isEditRow(_1021)){this.applyRowEdit();this.grid.updateRow(_1021);}if(_1022){this.info={cell:_1020,rowIndex:_1021};this.grid.doStartEdit(_1020,_1021);this.grid.updateRow(_1021);}else{this.info={};}this.grid.endUpdate();this.grid.focus.focusGrid();this._focusEditor(_1020,_1021);this._doCatchBoomerang();},_editorDo:function(_1023){var c=this.info.cell;if(c&&c.editable){c[_1023](this.info.rowIndex);}},editorApply:function(){this._editorDo("apply");},editorCancel:function(){this._editorDo("cancel");},applyCellEdit:function(_1024,_1025,_1026){if(this.grid.canEdit(_1025,_1026)){this.grid.doApplyCellEdit(_1024,_1026,_1025.field);}},applyRowEdit:function(){this.grid.doApplyEdit(this.info.rowIndex,this.info.cell.field);},apply:function(){if(this.isEditing()&&this._isValidInput()){this.grid.beginUpdate();this.editorApply();this.applyRowEdit();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang();}},cancel:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorCancel();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang();}},save:function(_1027,_1028){var c=this.info.cell;if(this.isEditRow(_1027)&&(!_1028||c.view==_1028)&&c.editable){c.save(c,this.info.rowIndex);}},restore:function(_1029,_102a){var c=this.info.cell;if(this.isEditRow(_102a)&&c.view==_1029&&c.editable){c.restore(this.info.rowIndex);}},_isValidInput:function(){var w=(this.info.cell||{}).widget;if(!w||!w.isValid){return true;}w.focused=true;return w.isValid(true);}});});},"esri/OperationBase":function(){define("esri/OperationBase",["dojo/_base/declare","dojo/has","esri/kernel"],function(_102b,has,_102c){var _102d=_102b(null,{declaredClass:"esri.OperationBase",type:"not implemented",label:"not implemented",constructor:function(_102e){_102e=_102e||{};if(_102e.label){this.label=_102e.label;}},performUndo:function(){console.log("performUndo has not been implemented");},performRedo:function(){console.log("performRedo has not been implemented");}});if(has("extend-esri")){_102c.OperationBase=_102d;}return _102d;});},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(lang){var _102f={};lang.setObject("dojo.data.util.sorter",_102f);_102f.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};_102f.createSortFunction=function(_1030,store){var _1031=[];function _1032(attr,dir,comp,s){return function(itemA,itemB){var a=s.getValue(itemA,attr);var b=s.getValue(itemB,attr);return dir*comp(a,b);};};var _1033;var map=store.comparatorMap;var bc=_102f.basicComparator;for(var i=0;i<_1030.length;i++){_1033=_1030[i];var attr=_1033.attribute;if(attr){var dir=(_1033.descending)?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&("toString" in attr)){attr=attr.toString();}comp=map[attr]||bc;}_1031.push(_1032(attr,dir,comp,store));}}return function(rowA,rowB){var i=0;while(i<_1031.length){var ret=_1031[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};return _102f;});},"dijit/form/_ButtonMixin":function(){define("dijit/form/_ButtonMixin",["dojo/_base/declare","dojo/dom","dojo/_base/event","../registry"],function(_1034,dom,event,_1035){return _1034("dijit.form._ButtonMixin",null,{label:"",type:"button",_onClick:function(e){if(this.disabled){event.stop(e);return false;}var _1036=this.onClick(e)===false;if(!_1036&&this.type=="submit"&&!(this.valueNode||this.focusNode).form){for(var node=this.domNode;node.parentNode;node=node.parentNode){var _1037=_1035.byNode(node);if(_1037&&typeof _1037._onSubmit=="function"){_1037._onSubmit(e);_1036=true;break;}}}if(_1036){e.preventDefault();}return !_1036;},postCreate:function(){this.inherited(arguments);dom.setSelectable(this.focusNode,false);},onClick:function(){return true;},_setLabelAttr:function(_1038){this._set("label",_1038);(this.containerNode||this.focusNode).innerHTML=_1038;}});});},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(dojo,lang,Color,_1039){var _103a={};lang.setObject("dojo.colors",_103a);var _103b=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};dojo.colorFromRgb=Color.fromRgb=function(color,obj){var m=color.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=_1039.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return Color.fromArray(a,obj);}return Color.fromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_103b(m1,m2,H+1/3)*256,_103b(m1,m2,H)*256,_103b(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return Color.fromArray(a,obj);}}return null;};var _103c=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};Color.prototype.sanitize=function(){var t=this;t.r=Math.round(_103c(t.r,0,255));t.g=Math.round(_103c(t.g,0,255));t.b=Math.round(_103c(t.b,0,255));t.a=_103c(t.a,0,1);return this;};_103a.makeGrey=Color.makeGrey=function(g,a){return Color.fromArray([g,g,g,a]);};lang.mixin(Color.named,{"aliceblue":[240,248,255],"antiquewhite":[250,235,215],"aquamarine":[127,255,212],"azure":[240,255,255],"beige":[245,245,220],"bisque":[255,228,196],"blanchedalmond":[255,235,205],"blueviolet":[138,43,226],"brown":[165,42,42],"burlywood":[222,184,135],"cadetblue":[95,158,160],"chartreuse":[127,255,0],"chocolate":[210,105,30],"coral":[255,127,80],"cornflowerblue":[100,149,237],"cornsilk":[255,248,220],"crimson":[220,20,60],"cyan":[0,255,255],"darkblue":[0,0,139],"darkcyan":[0,139,139],"darkgoldenrod":[184,134,11],"darkgray":[169,169,169],"darkgreen":[0,100,0],"darkgrey":[169,169,169],"darkkhaki":[189,183,107],"darkmagenta":[139,0,139],"darkolivegreen":[85,107,47],"darkorange":[255,140,0],"darkorchid":[153,50,204],"darkred":[139,0,0],"darksalmon":[233,150,122],"darkseagreen":[143,188,143],"darkslateblue":[72,61,139],"darkslategray":[47,79,79],"darkslategrey":[47,79,79],"darkturquoise":[0,206,209],"darkviolet":[148,0,211],"deeppink":[255,20,147],"deepskyblue":[0,191,255],"dimgray":[105,105,105],"dimgrey":[105,105,105],"dodgerblue":[30,144,255],"firebrick":[178,34,34],"floralwhite":[255,250,240],"forestgreen":[34,139,34],"gainsboro":[220,220,220],"ghostwhite":[248,248,255],"gold":[255,215,0],"goldenrod":[218,165,32],"greenyellow":[173,255,47],"grey":[128,128,128],"honeydew":[240,255,240],"hotpink":[255,105,180],"indianred":[205,92,92],"indigo":[75,0,130],"ivory":[255,255,240],"khaki":[240,230,140],"lavender":[230,230,250],"lavenderblush":[255,240,245],"lawngreen":[124,252,0],"lemonchiffon":[255,250,205],"lightblue":[173,216,230],"lightcoral":[240,128,128],"lightcyan":[224,255,255],"lightgoldenrodyellow":[250,250,210],"lightgray":[211,211,211],"lightgreen":[144,238,144],"lightgrey":[211,211,211],"lightpink":[255,182,193],"lightsalmon":[255,160,122],"lightseagreen":[32,178,170],"lightskyblue":[135,206,250],"lightslategray":[119,136,153],"lightslategrey":[119,136,153],"lightsteelblue":[176,196,222],"lightyellow":[255,255,224],"limegreen":[50,205,50],"linen":[250,240,230],"magenta":[255,0,255],"mediumaquamarine":[102,205,170],"mediumblue":[0,0,205],"mediumorchid":[186,85,211],"mediumpurple":[147,112,219],"mediumseagreen":[60,179,113],"mediumslateblue":[123,104,238],"mediumspringgreen":[0,250,154],"mediumturquoise":[72,209,204],"mediumvioletred":[199,21,133],"midnightblue":[25,25,112],"mintcream":[245,255,250],"mistyrose":[255,228,225],"moccasin":[255,228,181],"navajowhite":[255,222,173],"oldlace":[253,245,230],"olivedrab":[107,142,35],"orange":[255,165,0],"orangered":[255,69,0],"orchid":[218,112,214],"palegoldenrod":[238,232,170],"palegreen":[152,251,152],"paleturquoise":[175,238,238],"palevioletred":[219,112,147],"papayawhip":[255,239,213],"peachpuff":[255,218,185],"peru":[205,133,63],"pink":[255,192,203],"plum":[221,160,221],"powderblue":[176,224,230],"rosybrown":[188,143,143],"royalblue":[65,105,225],"saddlebrown":[139,69,19],"salmon":[250,128,114],"sandybrown":[244,164,96],"seagreen":[46,139,87],"seashell":[255,245,238],"sienna":[160,82,45],"skyblue":[135,206,235],"slateblue":[106,90,205],"slategray":[112,128,144],"slategrey":[112,128,144],"snow":[255,250,250],"springgreen":[0,255,127],"steelblue":[70,130,180],"tan":[210,180,140],"thistle":[216,191,216],"tomato":[255,99,71],"turquoise":[64,224,208],"violet":[238,130,238],"wheat":[245,222,179],"whitesmoke":[245,245,245],"yellowgreen":[154,205,50]});return Color;});},"url:dijit/form/templates/Spinner.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitButtonNode dijitSpinnerButtonContainer\"\n\t\t><input class=\"dijitReset dijitInputField dijitSpinnerButtonInner\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t/><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton\"\n\t\t\tdata-dojo-attach-point=\"upArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9650; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\tdata-dojo-attach-point=\"downArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' data-dojo-attach-point=\"textbox,focusNode\" type=\"${type}\" data-dojo-attach-event=\"onkeypress:_onKeyPress\"\n\t\t\trole=\"spinbutton\" autocomplete=\"off\" ${!nameAttrSetting}\n\t/></div\n></div>\n","url:dojox/grid/resources/View.html":"<div class=\"dojoxGridView\" role=\"presentation\">\n\t<div class=\"dojoxGridHeader\" dojoAttachPoint=\"headerNode\" role=\"presentation\">\n\t\t<div dojoAttachPoint=\"headerNodeContainer\" style=\"width:9000em\" role=\"presentation\">\n\t\t\t<div dojoAttachPoint=\"headerContentNode\" role=\"row\"></div>\n\t\t</div>\n\t</div>\n\t<input type=\"checkbox\" class=\"dojoxGridHiddenFocus\" dojoAttachPoint=\"hiddenFocusNode\" role=\"presentation\" />\n\t<input type=\"checkbox\" class=\"dojoxGridHiddenFocus\" role=\"presentation\" />\n\t<div class=\"dojoxGridScrollbox\" dojoAttachPoint=\"scrollboxNode\" role=\"presentation\">\n\t\t<div class=\"dojoxGridContent\" dojoAttachPoint=\"contentNode\" hidefocus=\"hidefocus\" role=\"presentation\"></div>\n\t</div>\n</div>\n","dojox/date/islamic/Date":function(){define("dojox/date/islamic/Date",["dojo/_base/lang","dojo/_base/declare","dojo/date"],function(lang,_103d,dd){var IDate=_103d("dojox.date.islamic.Date",null,{_date:0,_month:0,_year:0,_hours:0,_minutes:0,_seconds:0,_milliseconds:0,_day:0,_GREGORIAN_EPOCH:1721425.5,_ISLAMIC_EPOCH:1948439.5,constructor:function(){var len=arguments.length;if(!len){this.fromGregorian(new Date());}else{if(len==1){var arg0=arguments[0];if(typeof arg0=="number"){arg0=new Date(arg0);}if(arg0 instanceof Date){this.fromGregorian(arg0);}else{if(arg0==""){this._date=new Date("");}else{this._year=arg0._year;this._month=arg0._month;this._date=arg0._date;this._hours=arg0._hours;this._minutes=arg0._minutes;this._seconds=arg0._seconds;this._milliseconds=arg0._milliseconds;}}}else{if(len>=3){this._year+=arguments[0];this._month+=arguments[1];this._date+=arguments[2];this._hours+=arguments[3]||0;this._minutes+=arguments[4]||0;this._seconds+=arguments[5]||0;this._milliseconds+=arguments[6]||0;}}}},getDate:function(){return this._date;},getMonth:function(){return this._month;},getFullYear:function(){return this._year;},getDay:function(){return this.toGregorian().getDay();},getHours:function(){return this._hours;},getMinutes:function(){return this._minutes;},getSeconds:function(){return this._seconds;},getMilliseconds:function(){return this._milliseconds;},setDate:function(date){date=parseInt(date);if(date>0&&date<=this.getDaysInIslamicMonth(this._month,this._year)){this._date=date;}else{var mdays;if(date>0){for(mdays=this.getDaysInIslamicMonth(this._month,this._year);date>mdays;date-=mdays,mdays=this.getDaysInIslamicMonth(this._month,this._year)){this._month++;if(this._month>=12){this._year++;this._month-=12;}}this._date=date;}else{for(mdays=this.getDaysInIslamicMonth((this._month-1)>=0?(this._month-1):11,((this._month-1)>=0)?this._year:this._year-1);date<=0;mdays=this.getDaysInIslamicMonth((this._month-1)>=0?(this._month-1):11,((this._month-1)>=0)?this._year:this._year-1)){this._month--;if(this._month<0){this._year--;this._month+=12;}date+=mdays;}this._date=date;}}return this;},setFullYear:function(year){this._year=+year;},setMonth:function(month){this._year+=Math.floor(month/12);if(month>0){this._month=Math.floor(month%12);}else{this._month=Math.floor(((month%12)+12)%12);}},setHours:function(){var _103e=arguments.length;var hours=0;if(_103e>=1){hours=parseInt(arguments[0]);}if(_103e>=2){this._minutes=parseInt(arguments[1]);}if(_103e>=3){this._seconds=parseInt(arguments[2]);}if(_103e==4){this._milliseconds=parseInt(arguments[3]);}while(hours>=24){this._date++;var mdays=this.getDaysInIslamicMonth(this._month,this._year);if(this._date>mdays){this._month++;if(this._month>=12){this._year++;this._month-=12;}this._date-=mdays;}hours-=24;}this._hours=hours;},_addMinutes:function(_103f){_103f+=this._minutes;this.setMinutes(_103f);this.setHours(this._hours+parseInt(_103f/60));return this;},_addSeconds:function(_1040){_1040+=this._seconds;this.setSeconds(_1040);this._addMinutes(parseInt(_1040/60));return this;},_addMilliseconds:function(_1041){_1041+=this._milliseconds;this.setMilliseconds(_1041);this._addSeconds(parseInt(_1041/1000));return this;},setMinutes:function(_1042){this._minutes=_1042%60;return this;},setSeconds:function(_1043){this._seconds=_1043%60;return this;},setMilliseconds:function(_1044){this._milliseconds=_1044%1000;return this;},toString:function(){if(isNaN(this._date)){return "Invalidate Date";}else{var x=new Date();x.setHours(this._hours);x.setMinutes(this._minutes);x.setSeconds(this._seconds);x.setMilliseconds(this._milliseconds);return this._month+" "+this._date+" "+this._year+" "+x.toTimeString();}},toGregorian:function(){var hYear=this._year;var _1045=this._month;var hDate=this._date;var _1046=hDate+Math.ceil(29.5*_1045)+(hYear-1)*354+Math.floor((3+(11*hYear))/30)+this._ISLAMIC_EPOCH-1;var wjd=Math.floor(_1046-0.5)+0.5,_1047=wjd-this._GREGORIAN_EPOCH,_1048=Math.floor(_1047/146097),dqc=this._mod(_1047,146097),cent=Math.floor(dqc/36524),dcent=this._mod(dqc,36524),quad=Math.floor(dcent/1461),dquad=this._mod(dcent,1461),_1049=Math.floor(dquad/365),year=(_1048*400)+(cent*100)+(quad*4)+_1049;if(!(cent==4||_1049==4)){year++;}var _104a=this._GREGORIAN_EPOCH+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400);var _104b=wjd-_104a;var tjd=(this._GREGORIAN_EPOCH-1)+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400)+Math.floor((739/12)+((dd.isLeapYear(new Date(year,3,1))?-1:-2))+1);var _104c=((wjd<tjd)?0:(dd.isLeapYear(new Date(year,3,1))?1:2));var month=Math.floor((((_104b+_104c)*12)+373)/367);var tjd2=(this._GREGORIAN_EPOCH-1)+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400)+Math.floor((((367*month)-362)/12)+((month<=2)?0:(dd.isLeapYear(new Date(year,month,1))?-1:-2))+1);var day=(wjd-tjd2)+1;var gdate=new Date(year,(month-1),day,this._hours,this._minutes,this._seconds,this._milliseconds);return gdate;},fromGregorian:function(gdate){var date=new Date(gdate);var gYear=date.getFullYear(),_104d=date.getMonth(),gDay=date.getDate();var _104e=(this._GREGORIAN_EPOCH-1)+(365*(gYear-1))+Math.floor((gYear-1)/4)+(-Math.floor((gYear-1)/100))+Math.floor((gYear-1)/400)+Math.floor((((367*(_104d+1))-362)/12)+(((_104d+1)<=2)?0:(dd.isLeapYear(date)?-1:-2))+gDay);_104e=Math.floor(_104e)+0.5;var days=_104e-this._ISLAMIC_EPOCH;var hYear=Math.floor((30*days+10646)/10631);var _104f=Math.ceil((days-29-this._yearStart(hYear))/29.5);_104f=Math.min(_104f,11);var hDay=Math.ceil(days-this._monthStart(hYear,_104f))+1;this._date=hDay;this._month=_104f;this._year=hYear;this._hours=date.getHours();this._minutes=date.getMinutes();this._seconds=date.getSeconds();this._milliseconds=date.getMilliseconds();this._day=date.getDay();return this;},valueOf:function(){return this.toGregorian().valueOf();},_yearStart:function(year){return (year-1)*354+Math.floor((3+11*year)/30);},_monthStart:function(year,month){return Math.ceil(29.5*month)+(year-1)*354+Math.floor((3+11*year)/30);},_civilLeapYear:function(year){return (14+11*year)%30<11;},getDaysInIslamicMonth:function(month,year){var _1050=0;_1050=29+((month+1)%2);if(month==11&&this._civilLeapYear(year)){_1050++;}return _1050;},_mod:function(a,b){return a-(b*Math.floor(a/b));}});IDate.getDaysInIslamicMonth=function(month){return new IDate().getDaysInIslamicMonth(month.getMonth(),month.getFullYear());};return IDate;});},"esri/dijit/editing/TemplatePicker":function(){define(["require","dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/html","dojo/_base/array","dojo/_base/json","dojo/_base/kernel","dojo/has","dojo/query","dojo/sniff","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dijit/_Widget","dijit/_Templated","dojo/data/ItemFileReadStore","dojox/grid/DataGrid","dojox/gfx","esri/layers/FeatureLayer","esri/symbols/PictureMarkerSymbol","esri/dijit/editing/TemplatePickerItem","esri/kernel","esri/lang","esri/request","dojo/i18n!esri/nls/jsapi","dojo/text!esri/dijit/editing/templates/TemplatePicker.html"],function(_1051,_1052,lang,_1053,html,array,_1054,_1055,has,query,sniff,_1056,_1057,_1058,_1059,_105a,_105b,_105c,_105d,gfx,_105e,_105f,_1060,_1061,_1062,_1063,_1064,_1065){var TP=_1052([_105a,_105b],{declaredClass:"esri.dijit.editing.TemplatePicker",widgetsInTemplate:true,templateString:_1065,basePath:_1051.toUrl("esri/dijit/editing")+"/",featureLayers:null,items:null,grouping:true,showTooltip:false,maxLabelLength:0,rows:4,columns:3,surfaceWidth:30,surfaceHeight:30,emptyMessage:"",useLegend:true,legendCache:{},_uniqueId:{id:0},_assumedCellWidth:90,_initialAutoWidth:300,_initialAutoHeight:200,_ieTimer:150,constructor:function(_1066,_1067){_1066=_1066||{};if(!_1066.items&&!_1066.featureLayers){console.error("TemplatePicker: please provide 'featureLayers' or 'items' parameter in the constructor");}this._dojo14x=(_1055.version.minor>=4);this._itemWidgets={};if(_1066.featureLayers&&_1066.featureLayers.length){this._flChanged=1;}this._nls=_1064.widgets.templatePicker;this.emptyMessage=_1066.emptyMessage||(this._nls&&this._nls.creationDisabled)||"";},postMixInProperties:function(){this.inherited(arguments);this._preprocess();},startup:function(){this.inherited(arguments);if(this.rows==="auto"&&this.columns==="auto"){var box=_1058.getContentBox(this.domNode);if(!box.w){this.domNode.style.width=this._initialAutoWidth+"px";}if(!box.h){this.domNode.style.height=this._initialAutoHeight+"px";}box=_1058.getContentBox(this.domNode);this._columns=Math.floor(box.w/this._assumedCellWidth)||1;}this._applyGridPatches();this._setGridLayout();_1053.connect(this.grid,"onRowClick",this,this._rowClicked);this._setGridData();this._toggleTooltip();if(has("ie")<9){this._repaintItems=lang.hitch(this,this._repaintItems);setTimeout(this._repaintItems,this._ieTimer);}},destroy:function(){this.showTooltip=false;this._toggleTooltip();this._clearLegendInfo();this.featureLayers=this.items=this.grid=this._flItems=this._itItems=this._groupRowIndices=this._selectedCell=this._selectedInfo=this._selectedItem=null;this.inherited(arguments);},getSelected:function(){return this._selectedCell?this._selectedItem:null;},clearSelection:function(){var _1068=this._selectedCell,info=this._selectedInfo;if(_1068){this._rowClicked({cellNode:_1068,rowIndex:info.selRow,cellIndex:info.selCol});}},update:function(_1069){var _106a=(this.rows==="auto"&&this.columns==="auto"&&_1069)?true:false,grid=this.grid,box;if(_106a){var _106b=this.domNode,id=_106b.id,width,item=_1055.query("#"+id+".templatePicker div.item")[0];box=_1058.getContentBox(_106b);item=item&&item.parentNode;if(item){width=html.coords(item).w;}else{width=this._assumedCellWidth;}this._columns=Math.floor((box.w-grid.views.views[0].getScrollbarWidth())/width);this._columns=this._columns||1;}var _106c=this._rows;this._preprocess();var _106d=this._rows;this._setGridLayout();this._setGridData();if(_106d!==_106c){grid.set("autoHeight",this._rows,false);}if(_106a){grid._resize({w:box.w,h:box.h});grid.viewsHeaderNode.style.display="none";}else{grid.update();}this._toggleTooltip();var self=this,_106e=this.getSelected();if(_106e){grid.store.fetch({onComplete:function(its){var found=self._locate(_106e,self._selectedInfo,its);var _106f=found&&grid.views.views[0].getCellNode(found[0],found[1]);if(_106f){self._rowClicked({cellNode:_106f,rowIndex:found[0],cellIndex:found[1]},true);}}});}if(has("ie")<9){setTimeout(this._repaintItems,this._ieTimer);}var _1070=this.featureLayers,items=this.items;if((!_1070||!_1070.length)&&(!items||!items.length)&&grid&&this.emptyMessage){grid.showMessage(this.emptyMessage);}},onSelectionChange:function(){},_setUseLegendAttr:function(use){var _1071=this.useLegend;if(!this._started||_1071!==use){if(use){this._flChanged=1;}else{this._clearLegendInfo();}}this.useLegend=use;},_setFeatureLayersAttr:function(_1072){var _1073=this.featureLayers;if(!this._started||_1073!==_1072){this._flChanged=1;}this.featureLayers=_1072;},_preprocess:function(){if(this.items){this.grouping=false;}this._autoWidth=false;if(this.rows==="auto"||this.columns==="auto"){this._autoWidth=true;}var items;if(this.featureLayers){if(this.useLegend&&this._flChanged){this._legendIndices=[];this._loadingIndices=[];this._legendSymbols={};this._ignoreLegends();this._loadingLegends=[];clearTimeout(this._legendTimer);this._legendTimer=null;this._processSelectionLayers();this._flChanged=0;}items=this._flItems=this._getItemsFromLayers(this.featureLayers);}else{items=this._itItems=this._getItemsFromItems(this.items);}if(this.rows==="auto"&&this.columns==="auto"){if(!this._started){this._rows=false;this._columns=null;this._autoWidth=false;}return;}var len=0;this._rows=this.rows;this._columns=this.columns;if(this.rows==="auto"){if(this.featureLayers){if(this.grouping){len=items.length;array.forEach(items,function(_1074){len+=Math.ceil(_1074.length/this.columns);},this);}else{array.forEach(items,function(_1075){len+=_1075.length;},this);len=Math.ceil(len/this.columns);}}else{len=Math.ceil(items.length/this.columns);}this._rows=len;}else{if(this.columns==="auto"){if(this.featureLayers){if(this.grouping){len=3;}else{array.forEach(items,function(_1076){len+=_1076.length;},this);len=Math.ceil(len/this.rows);}}else{len=Math.ceil(items.length/this.rows);}this._columns=len;}}},_processSelectionLayers:function(){var map,_1077,info,_1078,key,_1079,_107a,_107b={};array.forEach(this.featureLayers,function(layer,idx){if(layer.mode===_105e.MODE_SELECTION&&layer._map&&layer.url&&layer._params.drawMode&&!layer.source){_1077=lang.trim(layer._url.path).replace(/\/(MapServer|FeatureServer).*/ig,"/MapServer").replace(/^https?:\/\//ig,"").toLowerCase();info=(_107b[_1077]=_107b[_1077]||{});_1078=(info.featureLayers=info.featureLayers||{});_1079=(info.indices=info.indices||[]);_1078[idx]=layer;_1079.push(idx);map=layer._map;}});if(map){array.forEach(map.layerIds,function(layer){layer=map.getLayer(layer);if(layer&&layer.url&&(layer.getImageUrl||layer.getTileUrl)&&layer.loaded&&layer.version>=10.1){_1077=lang.trim(layer._url.path).replace(/(\/MapServer).*/ig,"$1");key=_1077.replace(/^https?:\/\//ig,"").toLowerCase();if(_107b[key]&&(!_107b[key].mapServiceUrl)){info=_107b[key];info.mapServiceUrl=_1077;info.mapServiceLayer=layer;this._legendIndices=this._legendIndices.concat(info.indices);_107a=this._fetchLegend({pickerInstance:this,info:info},key);if(_107a.then){this._loadingIndices=this._loadingIndices.concat(info.indices);this._loadingLegends.push(_107a);}else{this._processLegendResponse(_107a,info);}}}},this);}},_fetchLegend:function(_107c,key){var proto=TP.prototype,_107d=proto.legendCache[key];if(!_107d){_107d=(proto.legendCache[key]=_1063({url:_107c.info.mapServiceUrl+"/legend",content:{f:"json"},callbackParamName:"callback"}));_107d._contexts=[_107c];_107d.addBoth(function(_107e){if(_107d.canceled){return;}proto.legendCache[key]=_107e;var _107f=_107d._contexts;_107d._contexts=null;array.forEach(_107f,function(ctxt){var _1080=ctxt.pickerInstance,info=ctxt.info,found;if(_1080._destroyed){return;}array.forEach(info.indices,function(idx){found=array.indexOf(_1080._loadingIndices,idx);if(found>-1){_1080._loadingIndices.splice(found,1);}});found=array.indexOf(_1080._loadingLegends,_107d);if(found>-1){_1080._loadingLegends.splice(found,1);}_1080._processLegendResponse(_107e,info);});});}else{if(_107d.then){_107d._contexts.push(_107c);}}return _107d;},_clearLegendInfo:function(){clearTimeout(this._legendTimer);this._ignoreLegends();this._legendIndices=this._loadingIndices=this._legendSymbols=this._loadingLegends=this._legendTimer=null;},_ignoreLegends:function(){if(this._loadingLegends){array.forEach(this._loadingLegends,function(_1081){var found=-1;array.some(_1081._contexts,function(ctxt,idx){if(ctxt.pickerInstance===this){found=idx;}return (found>-1);},this);if(found>-1){_1081._contexts.splice(found,1);}},this);}},_processLegendResponse:function(_1082,info){if(_1082&&!(_1082 instanceof Error)){array.forEach(info.indices,function(idx){var _1083=info.featureLayers[idx].layerId,i,_1084=info.mapServiceUrl+"/"+_1083+"/images/",token=info.mapServiceLayer._getToken(),found,obj,_1085,url;if(this._legendSymbols[idx]){return;}found=null;array.some(_1082.layers,function(_1086){if(_1086.layerId==_1083){found=_1086;}return !!found;});if(found){obj=(this._legendSymbols[idx]={});array.forEach(found.legend,function(_1087){_1085=_1087.values;if(_1085&&_1085.length){for(i=0;i<_1085.length;i++){obj[_1085[i]]=_1087;}}else{obj.defaultSymbol=_1087;}url=_1087.url;if(url&&!_1087._fixed){_1087._fixed=1;if((url.search(/https?\:/)===-1)){_1087.url=_1084+url;}if(token&&_1087.url.search(/https?\:/)!==-1){_1087.url+=(((_1087.url.indexOf("?")>-1)?"&":"?")+"token="+token);}}});}},this);}else{var found;array.forEach(info.indices,function(idx){found=array.indexOf(this._legendIndices,idx);if(found>-1){this._legendIndices.splice(found,1);}},this);}var self=this;if(self._started&&!self._legendTimer){self._legendTimer=setTimeout(function(){clearTimeout(self._legendTimer);self._legendTimer=null;if(!self._destroyed){self.update();}},0);}},_applyGridPatches:function(){var grid=this.grid;var _1088=grid.adaptWidth,views,i,view;grid.adaptWidth=function(){views=this.views.views;for(i=0;view=views[i];i++){_1059.set(view.headerNode,"display","block");}_1088.apply(this,arguments);for(i=0;view=views[i];i++){_1059.set(view.headerNode,"display","none");}};if(this._dojo14x){if(this.rows!=="auto"&&this.columns!=="auto"){var _1089=_1053.connect(grid,"_onFetchComplete",this,function(){_1053.disconnect(_1089);this.grid.set("autoHeight",this._rows);});}_1053.connect(grid,"_onDelete",this,this._destroyItems);_1053.connect(grid,"_clearData",this,this._destroyItems);_1053.connect(grid,"destroy",this,this._destroyItems);var focus=grid.focus;if(focus&&focus.findAndFocusGridCell){focus.findAndFocusGridCell=function(){return false;};}}},_setGridLayout:function(){var _108a=function(_108b){return function(_108c,_108d){return this._cellGet(_108b,_108c,_108d);};};var _108e=lang.hitch(this,this._cellFormatter),cells=[],cols=this._columns,i;for(i=0;i<cols;i++){cells.push({field:"cell"+i,get:lang.hitch(this,_108a(i)),formatter:_108e});}var _108f={cells:[cells]};if(this.grouping){var _1090={field:"groupName",colSpan:cols,get:lang.hitch(this,this._cellGetGroup),formatter:lang.hitch(this,this._cellGroupFormatter)};_108f.cells.push([_1090]);}var grid=this.grid,_1091=_105d.prototype.rowsPerPage;grid.set("rowsPerPage",(this._rows>_1091)?this._rows:_1091);grid.set("structure",_108f);},_setGridData:function(){var _1092=[];if(this.grouping){this._groupRowIndices=[];var _1093,_1094,cols=this._columns;array.forEach(this._flItems,function(_1095,idx){_1092.push({});var index=(idx===0)?0:(_1093+_1094+1);this._groupRowIndices.push(index);_1093=index;_1094=Math.ceil(_1095.length/cols);_1092=_1092.concat(this._getStoreItems(_1095));},this);}else{if(this.featureLayers){array.forEach(this._flItems,function(_1096){_1092=_1092.concat(_1096);});_1092=this._getStoreItems(_1092);}else{_1092=this._getStoreItems(this._itItems);}}var store=new _105c({data:{items:_1092}});this.grid.setStore(store);},_toggleTooltip:function(){if(this.showTooltip){if(this.tooltip){return;}this.tooltip=_1057.create("div",{"class":"tooltip"},this.domNode);this.tooltip.style.display="none";this.tooltip.style.position="fixed";var grid=this.grid;this._mouseOverConnect=_1053.connect(grid,"onCellMouseOver",this,this._cellMouseOver);this._mouseOutConnect=_1053.connect(grid,"onCellMouseOut",this,this._cellMouseOut);}else{if(this.tooltip){_1053.disconnect(this._mouseOverConnect);_1053.disconnect(this._mouseOutConnect);_1057.destroy(this.tooltip);this.tooltip=null;}}},_rowClicked:function(evt,_1097){var _1098=evt.cellNode,row=evt.rowIndex,col=evt.cellIndex;var cell=this._getCellInfo(_1098,row,col);if(!cell){return;}var store=this.grid.store;if(store.getValue(cell,"loadingCell")){return;}if(this._selectedCell){_1056.remove(this._selectedCell,"selectedItem");}if(_1098!==this._selectedCell){_1056.add(_1098,"selectedItem");this._selectedCell=_1098;this._selectedItem={featureLayer:store.getValue(cell,"layer"),type:store.getValue(cell,"type"),template:store.getValue(cell,"template"),symbolInfo:store.getValue(cell,"symbolInfo"),item:this._getItem(cell)};this._selectedInfo={selRow:row,selCol:col,index1:store.getValue(cell,"index1"),index2:store.getValue(cell,"index2"),index:store.getValue(cell,"index")};}else{this._selectedCell=this._selectedInfo=this._selectedItem=null;}if(!_1097){this.onSelectionChange();}},_locate:function(_1099,info,_109a){var store=this.grid.store,cols=new Array(this._columns);var found,_109b=info.index1,_109c=info.index2,index=info.index,item=_1099.item;array.some(_109a,function(_109d,_109e){return array.some(cols,function(_109f,_10a0){var cell=store.getValue(_109d,"cell"+_10a0);if(cell&&(item?(index===store.getValue(cell,"index")):(_109b===store.getValue(cell,"index1")&&_109c===store.getValue(cell,"index2")))){found=[_109e,_10a0];return true;}else{return false;}});});return found;},_getCellInfo:function(_10a1,row,col){if(!_10a1){return;}var grid=this.grid;var item=grid.getItem(row);var cell=grid.store.getValue(item,"cell"+col);return cell;},_getItem:function(cell){var items=this.items;if(items){return items[this.grid.store.getValue(cell,"index")];}},_cellMouseOver:function(evt){var _10a2=this.tooltip;var _10a3=evt.cellNode,row=evt.rowIndex,col=evt.cellIndex;var cell=this._getCellInfo(_10a3,row,col);if(_10a2&&cell){var store=this.grid.store;var _10a4=store.getValue(cell,"template");var type=store.getValue(cell,"type");var _10a5=store.getValue(cell,"symbolInfo");var layer=store.getValue(cell,"layer");var item=this._getItem(cell);var label=(item&&(item.label+(item.description?(": "+item.description):"")))||(_10a4&&(_10a4.name+(_10a4.description?(": "+_10a4.description):"")))||(type&&type.name)||(_10a5&&(_10a5.label+(_10a5.description?(": "+_10a5.description):"")))||((layer&&layer.name+": ")+"Default");_10a2.style.display="none";_10a2.innerHTML=label;var _10a6=html.coords(_10a3.firstChild);_1059.set(_10a2,{left:(_10a6.x)+"px",top:(_10a6.y+_10a6.h+5)+"px"});_10a2.style.display="";}},_cellMouseOut:function(){var _10a7=this.tooltip;if(_10a7){_10a7.style.display="none";}},_destroyItems:function(){var _10a8=this._itemWidgets,w;for(w in _10a8){if(!_10a8[w]){continue;}_10a8[w].destroy();delete _10a8[w];}},_repaintItems:function(){var _10a9=this._itemWidgets,w;for(w in _10a9){var _10aa=_10a9[w];if(_10aa){_10aa._repaint(_10aa._surface);}}},_getStoreItems:function(_10ab){var uid=this._uniqueId;_10ab=array.map(_10ab,function(item){return lang.mixin({"surfaceId":"tpick-surface-"+(uid.id++)},item);});var len=_10ab.length,index=0,obj={},k=0,prop,_10ac=[],flag=true,cols=this._columns;while(index<len){flag=true;prop="cell"+k;obj[prop]=_10ab[index];index++;k++;if(k%cols===0){flag=false;_10ac.push(obj);obj={};k=0;}}if(flag&&len){_10ac.push(obj);}return _10ac;},_getItemsFromLayers:function(_10ad){var items=[];array.forEach(_10ad,function(layer,_10ae){items.push(this._getItemsFromLayer(layer,_10ae));},this);return items;},_getItemsFromLayer:function(layer,_10af){var items=[];if(this.useLegend&&array.indexOf(this._loadingIndices,_10af)>-1){return [{label:(this._nls&&this._nls.loading)||"",symbol:null,layer:layer,type:null,template:null,index1:_10af,index2:0,loadingCell:1}];}var _10b0=[];_10b0=_10b0.concat(layer.templates);array.forEach(layer.types,function(fType){var _10b1=fType.templates;array.forEach(_10b1,function(_10b2){_10b2._type_=fType;});_10b0=_10b0.concat(_10b1);});_10b0=array.filter(_10b0,_1062.isDefined);var _10b3=layer.renderer;if(_10b3){var _10b4=_10b3.declaredClass.replace("esri.renderer.","");if(_10b0.length>0){array.forEach(_10b0,function(_10b5){var proto=_10b5.prototype;if(proto){var _10b6=_10b3.getSymbol(proto);if(_10b6){var found=null,pms,_10b7;if(this.useLegend&&array.indexOf(this._legendIndices,_10af)>-1){_10b7=this._legendSymbols&&this._legendSymbols[_10af];if(_10b7){switch(_10b4){case "SimpleRenderer":found=_10b7.defaultSymbol;break;case "UniqueValueRenderer":array.some(_10b3.infos,function(info){if(info.symbol===_10b6){found=_10b7[info.value];}return !!found;});break;case "ClassBreaksRenderer":array.some(_10b3.infos,function(info){if(info.symbol===_10b6){found=_10b7[info.maxValue];}return !!found;});break;}}if(found){pms=_1054.fromJson(_1054.toJson(_105f.defaultProps));pms.url=found.url;pms.imageData=found.imageData;pms.contentType=found.contentType;pms.width=found.width;pms.height=found.height;if(!_1062.isDefined(pms.width)||!_1062.isDefined(pms.height)){pms.width=15;pms.height=15;}found=new _105f(pms);}}items.push({label:this._trimLabel(_10b5.name),symbol:found||_10b6,legendOverride:!!found,layer:layer,type:_10b5._type_,template:_10b5,index1:_10af,index2:items.length});}}delete _10b5._type_;},this);}else{var infos=[];if(_10b4==="TemporalRenderer"){_10b3=_10b3.observationRenderer;if(_10b3){_10b4=_10b3.declaredClass.replace("esri.renderer.","");}}switch(_10b4){case "SimpleRenderer":infos=[{symbol:_10b3.symbol,label:_10b3.label,description:_10b3.description}];break;case "UniqueValueRenderer":case "ClassBreaksRenderer":infos=_10b3.infos;break;}items=array.map(infos,function(info,idx){return {label:this._trimLabel(info.label),description:info.description,symbolInfo:lang.mixin({constructor:function(){}},info),symbol:info.symbol,layer:layer,index1:_10af,index2:idx};},this);}}return items;},_getItemsFromItems:function(_10b8){return array.map(_10b8,function(item,idx){item=lang.mixin({index:idx},item);item.label=this._trimLabel(item.label);return item;},this);},_trimLabel:function(label){var max=this.maxLabelLength;if(max&&label){if(label.length>max){label=label.substr(0,max)+"...";}}return label||"";},_cellGet:function(_10b9,_10ba,_10bb){if(!_10bb){return "";}return this.grid.store.getValue(_10bb,"cell"+_10b9);},_cellFormatter:function(value){if(value){var _10bc=this._itemWidgets,store=this.grid.store;var sid=store.getValue(value,"surfaceId");var w=_10bc[sid];if(!w){w=(_10bc[sid]=new _1060({id:sid,label:store.getValue(value,"label"),symbol:store.getValue(value,"symbol"),legendOverride:store.getValue(value,"legendOverride"),surfaceWidth:this.surfaceWidth,surfaceHeight:this.surfaceHeight,template:store.getValue(value,"template")}));}return w||"";}else{return "";}},_cellGetGroup:function(_10bd,_10be){if(!this._groupRowIndices){return "";}var found=array.indexOf(this._groupRowIndices,_10bd);if(!_10be||found===-1){return "";}return (this.featureLayers[found]&&this.featureLayers[found].name)||"";},_cellGroupFormatter:function(value){if(value){return "<div class='groupLabel'>"+value+"</div>";}else{return "";}}});if(has("extend-esri")){lang.setObject("dijit.editing.TemplatePicker",TP,_1061);}return TP;});},"dijit/_editor/range":function(){define("dijit/_editor/range",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/window","../main"],function(array,_10bf,lang,win,dijit){dijit.range={};dijit.range.getIndex=function(node,_10c0){var ret=[],retR=[];var onode=node;var pnode,n;while(node!=_10c0){var i=0;pnode=node.parentNode;while((n=pnode.childNodes[i++])){if(n===node){--i;break;}}ret.unshift(i);retR.unshift(i-pnode.childNodes.length);node=pnode;}if(ret.length>0&&onode.nodeType==3){n=onode.previousSibling;while(n&&n.nodeType==3){ret[ret.length-1]--;n=n.previousSibling;}n=onode.nextSibling;while(n&&n.nodeType==3){retR[retR.length-1]++;n=n.nextSibling;}}return {o:ret,r:retR};};dijit.range.getNode=function(index,_10c1){if(!lang.isArray(index)||index.length==0){return _10c1;}var node=_10c1;array.every(index,function(i){if(i>=0&&i<node.childNodes.length){node=node.childNodes[i];}else{node=null;return false;}return true;});return node;};dijit.range.getCommonAncestor=function(n1,n2,root){root=root||n1.ownerDocument.body;var _10c2=function(n){var as=[];while(n){as.unshift(n);if(n!==root){n=n.parentNode;}else{break;}}return as;};var n1as=_10c2(n1);var n2as=_10c2(n2);var m=Math.min(n1as.length,n2as.length);var com=n1as[0];for(var i=1;i<m;i++){if(n1as[i]===n2as[i]){com=n1as[i];}else{break;}}return com;};dijit.range.getAncestor=function(node,regex,root){root=root||node.ownerDocument.body;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(regex.test(name)){return node;}node=node.parentNode;}return null;};dijit.range.BlockTagNames=/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/;dijit.range.getBlockAncestor=function(node,regex,root){root=root||node.ownerDocument.body;regex=regex||dijit.range.BlockTagNames;var block=null,_10c3;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(!block&&regex.test(name)){block=node;}if(!_10c3&&(/^(?:BODY|TD|TH|CAPTION)$/).test(name)){_10c3=node;}node=node.parentNode;}return {blockNode:block,blockContainer:_10c3||node.ownerDocument.body};};dijit.range.atBeginningOfContainer=function(_10c4,node,_10c5){var _10c6=false;var _10c7=(_10c5==0);if(!_10c7&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(0,_10c5))){_10c7=true;}}if(_10c7){var cnode=node;_10c6=true;while(cnode&&cnode!==_10c4){if(cnode.previousSibling){_10c6=false;break;}cnode=cnode.parentNode;}}return _10c6;};dijit.range.atEndOfContainer=function(_10c8,node,_10c9){var atEnd=false;var _10ca=(_10c9==(node.length||node.childNodes.length));if(!_10ca&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(_10c9))){_10ca=true;}}if(_10ca){var cnode=node;atEnd=true;while(cnode&&cnode!==_10c8){if(cnode.nextSibling){atEnd=false;break;}cnode=cnode.parentNode;}}return atEnd;};dijit.range.adjacentNoneTextNode=function(_10cb,next){var node=_10cb;var len=(0-_10cb.length)||0;var prop=next?"nextSibling":"previousSibling";while(node){if(node.nodeType!=3){break;}len+=node.length;node=node[prop];}return [node,len];};dijit.range.create=function(win){win=win||window;if(win.getSelection){return win.document.createRange();}else{return new dijit.range.W3CRange();}};dijit.range.getSelection=function(_10cc,_10cd){if(_10cc.getSelection){return _10cc.getSelection();}else{var s=new dijit.range.ie.selection(_10cc);if(!_10cd){s._getCurrentSelection();}return s;}};if(!window.getSelection){dijit.range.ie={cachedSelection:{},selection:function(_10ce){this._ranges=[];this.addRange=function(r,_10cf){this._ranges.push(r);if(!_10cf){r._select();}this.rangeCount=this._ranges.length;};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0;};var _10d0=function(){var r=_10ce.document.selection.createRange();var type=_10ce.document.selection.type.toUpperCase();if(type=="CONTROL"){return new dijit.range.W3CRange(dijit.range.ie.decomposeControlRange(r));}else{return new dijit.range.W3CRange(dijit.range.ie.decomposeTextRange(r));}};this.getRangeAt=function(i){return this._ranges[i];};this._getCurrentSelection=function(){this.removeAllRanges();var r=_10d0();if(r){this.addRange(r,true);this.isCollapsed=r.collapsed;}else{this.isCollapsed=true;}};},decomposeControlRange:function(range){var _10d1=range.item(0),_10d2=range.item(range.length-1);var _10d3=_10d1.parentNode,_10d4=_10d2.parentNode;var _10d5=dijit.range.getIndex(_10d1,_10d3).o[0];var _10d6=dijit.range.getIndex(_10d2,_10d4).o[0]+1;return [_10d3,_10d5,_10d4,_10d6];},getEndPoint:function(range,end){var _10d7=range.duplicate();_10d7.collapse(!end);var _10d8="EndTo"+(end?"End":"Start");var _10d9=_10d7.parentElement();var _10da,_10db,_10dc;if(_10d9.childNodes.length>0){array.every(_10d9.childNodes,function(node,i){var _10dd;if(node.nodeType!=3){_10d7.moveToElementText(node);if(_10d7.compareEndPoints(_10d8,range)>0){if(_10dc&&_10dc.nodeType==3){_10da=_10dc;_10dd=true;}else{_10da=_10d9;_10db=i;return false;}}else{if(i==_10d9.childNodes.length-1){_10da=_10d9;_10db=_10d9.childNodes.length;return false;}}}else{if(i==_10d9.childNodes.length-1){_10da=node;_10dd=true;}}if(_10dd&&_10da){var _10de=dijit.range.adjacentNoneTextNode(_10da)[0];if(_10de){_10da=_10de.nextSibling;}else{_10da=_10d9.firstChild;}var _10df=dijit.range.adjacentNoneTextNode(_10da);_10de=_10df[0];var _10e0=_10df[1];if(_10de){_10d7.moveToElementText(_10de);_10d7.collapse(false);}else{_10d7.moveToElementText(_10d9);}_10d7.setEndPoint(_10d8,range);_10db=_10d7.text.length-_10e0;return false;}_10dc=node;return true;});}else{_10da=_10d9;_10db=0;}if(!end&&_10da.nodeType==1&&_10db==_10da.childNodes.length){var _10e1=_10da.nextSibling;if(_10e1&&_10e1.nodeType==3){_10da=_10e1;_10db=0;}}return [_10da,_10db];},setEndPoint:function(range,_10e2,_10e3){var _10e4=range.duplicate(),node,len;if(_10e2.nodeType!=3){if(_10e3>0){node=_10e2.childNodes[_10e3-1];if(node){if(node.nodeType==3){_10e2=node;_10e3=node.length;}else{if(node.nextSibling&&node.nextSibling.nodeType==3){_10e2=node.nextSibling;_10e3=0;}else{_10e4.moveToElementText(node.nextSibling?node:_10e2);var _10e5=node.parentNode;var _10e6=_10e5.insertBefore(node.ownerDocument.createTextNode(" "),node.nextSibling);_10e4.collapse(false);_10e5.removeChild(_10e6);}}}}else{_10e4.moveToElementText(_10e2);_10e4.collapse(true);}}if(_10e2.nodeType==3){var _10e7=dijit.range.adjacentNoneTextNode(_10e2);var _10e8=_10e7[0];len=_10e7[1];if(_10e8){_10e4.moveToElementText(_10e8);_10e4.collapse(false);if(_10e8.contentEditable!="inherit"){len++;}}else{_10e4.moveToElementText(_10e2.parentNode);_10e4.collapse(true);_10e4.move("character",1);_10e4.move("character",-1);}_10e3+=len;if(_10e3>0){if(_10e4.move("character",_10e3)!=_10e3){console.error("Error when moving!");}}}return _10e4;},decomposeTextRange:function(range){var _10e9=dijit.range.ie.getEndPoint(range);var _10ea=_10e9[0],_10eb=_10e9[1];var _10ec=_10e9[0],_10ed=_10e9[1];if(range.htmlText.length){if(range.htmlText==range.text){_10ed=_10eb+range.text.length;}else{_10e9=dijit.range.ie.getEndPoint(range,true);_10ec=_10e9[0],_10ed=_10e9[1];}}return [_10ea,_10eb,_10ec,_10ed];},setRange:function(range,_10ee,_10ef,_10f0,_10f1,_10f2){var start=dijit.range.ie.setEndPoint(range,_10ee,_10ef);range.setEndPoint("StartToStart",start);if(!_10f2){var end=dijit.range.ie.setEndPoint(range,_10f0,_10f1);}range.setEndPoint("EndToEnd",end||start);return range;}};_10bf("dijit.range.W3CRange",null,{constructor:function(){if(arguments.length>0){this.setStart(arguments[0][0],arguments[0][1]);this.setEnd(arguments[0][2],arguments[0][3]);}else{this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}},_updateInternal:function(){if(this.startContainer!==this.endContainer){this.commonAncestorContainer=dijit.range.getCommonAncestor(this.startContainer,this.endContainer);}else{this.commonAncestorContainer=this.startContainer;}this.collapsed=(this.startContainer===this.endContainer)&&(this.startOffset==this.endOffset);},setStart:function(node,_10f3){_10f3=parseInt(_10f3);if(this.startContainer===node&&this.startOffset==_10f3){return;}delete this._cachedBookmark;this.startContainer=node;this.startOffset=_10f3;if(!this.endContainer){this.setEnd(node,_10f3);}else{this._updateInternal();}},setEnd:function(node,_10f4){_10f4=parseInt(_10f4);if(this.endContainer===node&&this.endOffset==_10f4){return;}delete this._cachedBookmark;this.endContainer=node;this.endOffset=_10f4;if(!this.startContainer){this.setStart(node,_10f4);}else{this._updateInternal();}},setStartAfter:function(node,_10f5){this._setPoint("setStart",node,_10f5,1);},setStartBefore:function(node,_10f6){this._setPoint("setStart",node,_10f6,0);},setEndAfter:function(node,_10f7){this._setPoint("setEnd",node,_10f7,1);},setEndBefore:function(node,_10f8){this._setPoint("setEnd",node,_10f8,0);},_setPoint:function(what,node,_10f9,ext){var index=dijit.range.getIndex(node,node.parentNode).o;this[what](node.parentNode,index.pop()+ext);},_getIERange:function(){var r=(this._body||this.endContainer.ownerDocument.body).createTextRange();dijit.range.ie.setRange(r,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return r;},getBookmark:function(){this._getIERange();return this._cachedBookmark;},_select:function(){var r=this._getIERange();r.select();},deleteContents:function(){var s=this.startContainer,r=this._getIERange();if(s.nodeType===3&&!this.startOffset){this.setStartBefore(s);}r.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=true;},cloneRange:function(){var r=new dijit.range.W3CRange([this.startContainer,this.startOffset,this.endContainer,this.endOffset]);r._body=this._body;return r;},detach:function(){this._body=null;this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}});}return dijit.range;});},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../_base/Deferred"],function(array,lang,_10fa){var _10fb=function(_10fc){if(!_10fc){return _10fc;}if(_10fc.then){_10fc=lang.delegate(_10fc);}function _10fd(_10fe){if(!_10fc[_10fe]){_10fc[_10fe]=function(){var args=arguments;return _10fa.when(_10fc,function(_10ff){Array.prototype.unshift.call(args,_10ff);return _10fb(array[_10fe].apply(array,args));});};}};_10fd("forEach");_10fd("filter");_10fd("map");if(!_10fc.total){_10fc.total=_10fa.when(_10fc,function(_1100){return _1100.length;});}return _10fc;};lang.setObject("dojo.store.util.QueryResults",_10fb);return _10fb;});},"dijit/form/_ListBase":function(){define("dijit/form/_ListBase",["dojo/_base/declare","dojo/on","dojo/window"],function(_1101,on,_1102){return _1101("dijit.form._ListBase",null,{selected:null,_listConnect:function(_1103,_1104){var self=this;return self.own(on(self.containerNode,on.selector(function(_1105,_1106,_1107){return _1105.parentNode==_1107;},_1103),function(evt){evt.preventDefault();self[_1104](evt,this);}));},selectFirstNode:function(){var first=this.containerNode.firstChild;while(first&&first.style.display=="none"){first=first.nextSibling;}this._setSelectedAttr(first);},selectLastNode:function(){var last=this.containerNode.lastChild;while(last&&last.style.display=="none"){last=last.previousSibling;}this._setSelectedAttr(last);},selectNextNode:function(){var _1108=this.selected;if(!_1108){this.selectFirstNode();}else{var next=_1108.nextSibling;while(next&&next.style.display=="none"){next=next.nextSibling;}if(!next){this.selectFirstNode();}else{this._setSelectedAttr(next);}}},selectPreviousNode:function(){var _1109=this.selected;if(!_1109){this.selectLastNode();}else{var prev=_1109.previousSibling;while(prev&&prev.style.display=="none"){prev=prev.previousSibling;}if(!prev){this.selectLastNode();}else{this._setSelectedAttr(prev);}}},_setSelectedAttr:function(node){if(this.selected!=node){var _110a=this.selected;if(_110a){this.onDeselect(_110a);this.selected=null;}if(node){this.selected=node;_1102.scrollIntoView(node);this.onSelect(node);}}else{if(node){this.onSelect(node);}}}});});},"dijit/form/_FormWidget":function(){define("dijit/form/_FormWidget",["dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/ready","../_Widget","../_CssStateMixin","../_TemplatedMixin","./_FormWidgetMixin"],function(_110b,has,_110c,ready,_110d,_110e,_110f,_1110){if(has("dijit-legacy-requires")){ready(0,function(){var _1111=["dijit/form/_FormValueWidget"];require(_1111);});}return _110b("dijit.form._FormWidget",[_110d,_110f,_110e,_1110],{setDisabled:function(_1112){_110c.deprecated("setDisabled("+_1112+") is deprecated. Use set('disabled',"+_1112+") instead.","","2.0");this.set("disabled",_1112);},setValue:function(value){_110c.deprecated("dijit.form._FormWidget:setValue("+value+") is deprecated.  Use set('value',"+value+") instead.","","2.0");this.set("value",value);},getValue:function(){_110c.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value");},postMixInProperties:function(){this.nameAttrSetting=this.name?("name=\""+this.name.replace(/"/g,"&quot;")+"\""):"";this.inherited(arguments);},_setTypeAttr:null});});},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(dojo,_1113,_1114){dojo.DeferredList=function(list,_1115,_1116,_1117,_1118){var _1119=[];_1113.call(this);var self=this;if(list.length===0&&!_1115){this.resolve([0,[]]);}var _111a=0;_1114.forEach(list,function(item,i){item.then(function(_111b){if(_1115){self.resolve([i,_111b]);}else{_111c(true,_111b);}},function(error){if(_1116){self.reject(error);}else{_111c(false,error);}if(_1117){return null;}throw error;});function _111c(_111d,_111e){_1119[i]=[_111d,_111e];_111a++;if(_111a===list.length){self.resolve(_1119);}};});};dojo.DeferredList.prototype=new _1113();dojo.DeferredList.prototype.gatherResults=function(_111f){var d=new dojo.DeferredList(_111f,false,true,false);d.addCallback(function(_1120){var ret=[];_1114.forEach(_1120,function(_1121){ret.push(_1121[1]);});return ret;});return d;};return dojo.DeferredList;});},"dojo/dnd/common":function(){define(["../_base/connect","../_base/kernel","../_base/lang","../dom"],function(_1122,_1123,lang,dom){var _1124=lang.getObject("dojo.dnd",true);_1124.getCopyKeyState=_1122.isCopyKey;_1124._uniqueId=0;_1124.getUniqueId=function(){var id;do{id=_1123._scopeName+"Unique"+(++_1124._uniqueId);}while(dom.byId(id));return id;};_1124._empty={};_1124.isFormElement=function(e){var t=e.target;if(t.nodeType==3){t=t.parentNode;}return " button textarea input select option ".indexOf(" "+t.tagName.toLowerCase()+" ")>=0;};return _1124;});},"dijit/CalendarLite":function(){require({cache:{"url:dijit/templates/Calendar.html":"<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" aria-labelledby=\"${id}_mddb ${id}_year\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' colspan=\"5\">\n\t\t\t\t<div data-dojo-attach-point=\"monthNode\">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role=\"row\">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point=\"dateRowsNode\" data-dojo-attach-event=\"onclick: _onDayClick\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\" role=\"presentation\">\n\t\t\t\t<div class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span data-dojo-attach-point=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\" role=\"button\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" role=\"button\" id=\"${id}_year\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\" role=\"button\"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n"}});define("dijit/CalendarLite",["dojo/_base/array","dojo/_base/declare","dojo/cldr/supplemental","dojo/date","dojo/date/locale","dojo/date/stamp","dojo/dom","dojo/dom-class","dojo/_base/event","dojo/_base/lang","dojo/sniff","dojo/string","./_WidgetBase","./_TemplatedMixin","dojo/text!./templates/Calendar.html","./hccss"],function(array,_1125,_1126,date,_1127,stamp,dom,_1128,event,lang,has,_1129,_112a,_112b,_112c){var _112d=_1125("dijit.CalendarLite",[_112a,_112b],{templateString:_112c,dowTemplateString:"<th class=\"dijitReset dijitCalendarDayLabelTemplate\" role=\"columnheader\"><span class=\"dijitCalendarDayLabel\">${d}</span></th>",dateTemplateString:"<td class=\"dijitReset\" role=\"gridcell\" data-dojo-attach-point=\"dateCells\"><span class=\"dijitCalendarDateLabel\" data-dojo-attach-point=\"dateLabels\"></span></td>",weekTemplateString:"<tr class=\"dijitReset dijitCalendarWeekTemplate\" role=\"row\">${d}${d}${d}${d}${d}${d}${d}</tr>",value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date(),baseClass:"dijitCalendar",_isValidDate:function(value){return value&&!isNaN(value)&&typeof value=="object"&&value.toString()!=this.constructor.prototype.value.toString();},_getValueAttr:function(){if(this.value&&!isNaN(this.value)){var value=new this.dateClassObj(this.value);value.setHours(0,0,0,0);if(value.getDate()<this.value.getDate()){value=this.dateModule.add(value,"hour",1);}return value;}else{return null;}},_setValueAttr:function(value,_112e){if(typeof value=="string"){value=stamp.fromISOString(value);}value=this._patchDate(value);if(this._isValidDate(value)&&!this.isDisabledDate(value,this.lang)){this._set("value",value);this.set("currentFocus",value);this._markSelectedDates([value]);if(this._created&&(_112e||typeof _112e=="undefined")){this.onChange(this.get("value"));}}else{this._set("value",null);this._markSelectedDates([]);}},_patchDate:function(value){if(value){value=new this.dateClassObj(value);value.setHours(1,0,0,0);}return value;},_setText:function(node,text){while(node.firstChild){node.removeChild(node.firstChild);}node.appendChild(node.ownerDocument.createTextNode(text));},_populateGrid:function(){var month=new this.dateClassObj(this.currentFocus);month.setDate(1);var _112f=month.getDay(),_1130=this.dateModule.getDaysInMonth(month),_1131=this.dateModule.getDaysInMonth(this.dateModule.add(month,"month",-1)),today=new this.dateClassObj(),_1132=_1126.getFirstDayOfWeek(this.lang);if(_1132>_112f){_1132-=7;}this._date2cell={};array.forEach(this.dateCells,function(_1133,idx){var i=idx+_1132;var date=new this.dateClassObj(month),_1134,clazz="dijitCalendar",adj=0;if(i<_112f){_1134=_1131-_112f+i+1;adj=-1;clazz+="Previous";}else{if(i>=(_112f+_1130)){_1134=i-_112f-_1130+1;adj=1;clazz+="Next";}else{_1134=i-_112f+1;clazz+="Current";}}if(adj){date=this.dateModule.add(date,"month",adj);}date.setDate(_1134);if(!this.dateModule.compare(date,today,"date")){clazz="dijitCalendarCurrentDate "+clazz;}if(this.isDisabledDate(date,this.lang)){clazz="dijitCalendarDisabledDate "+clazz;_1133.setAttribute("aria-disabled","true");}else{clazz="dijitCalendarEnabledDate "+clazz;_1133.removeAttribute("aria-disabled");_1133.setAttribute("aria-selected","false");}var _1135=this.getClassForDate(date,this.lang);if(_1135){clazz=_1135+" "+clazz;}_1133.className=clazz+"Month dijitCalendarDateTemplate";var _1136=date.valueOf();this._date2cell[_1136]=_1133;_1133.dijitDateValue=_1136;this._setText(this.dateLabels[idx],date.getDateLocalized?date.getDateLocalized(this.lang):date.getDate());},this);},_populateControls:function(){var month=new this.dateClassObj(this.currentFocus);month.setDate(1);this.monthWidget.set("month",month);var y=month.getFullYear()-1;var d=new this.dateClassObj();array.forEach(["previous","current","next"],function(name){d.setFullYear(y++);this._setText(this[name+"YearLabelNode"],this.dateLocaleModule.format(d,{selector:"year",locale:this.lang}));},this);},goToToday:function(){this.set("value",new this.dateClassObj());},constructor:function(_1137){this.dateModule=_1137.datePackage?lang.getObject(_1137.datePackage,false):date;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=_1137.datePackage?lang.getObject(_1137.datePackage+".locale",false):_1127;},_createMonthWidget:function(){return _112d._MonthWidget({id:this.id+"_mw",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode);},buildRendering:function(){var d=this.dowTemplateString,_1138=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),_1139=_1126.getFirstDayOfWeek(this.lang);this.dayCellsHtml=_1129.substitute([d,d,d,d,d,d,d].join(""),{d:""},function(){return _1138[_1139++%7];});var r=_1129.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[r,r,r,r,r,r].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);dom.setSelectable(this.domNode,false);var _113a=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",_113a,false);},postCreate:function(){this.inherited(arguments);this._connectControls();},_connectControls:function(){var _113b=lang.hitch(this,function(_113c,part,_113d){this.connect(this[_113c],"onclick",function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,part,_113d));});});_113b("incrementMonth","month",1);_113b("decrementMonth","month",-1);_113b("nextYearLabelNode","year",1);_113b("previousYearLabelNode","year",-1);},_setCurrentFocusAttr:function(date,_113e){var _113f=this.currentFocus,_1140=this._getNodeByDate(_113f);date=this._patchDate(date);this._set("currentFocus",date);if(!this._date2cell||this.dateModule.difference(_113f,date,"month")!=0){this._populateGrid();this._populateControls();this._markSelectedDates([this.value]);}var _1141=this._getNodeByDate(date);_1141.setAttribute("tabIndex",this.tabIndex);if(this.focused||_113e){_1141.focus();}if(_1140&&_1140!=_1141){if(has("webkit")){_1140.setAttribute("tabIndex","-1");}else{_1140.removeAttribute("tabIndex");}}},focus:function(){this._setCurrentFocusAttr(this.currentFocus,true);},_onDayClick:function(evt){event.stop(evt);for(var node=evt.target;node&&!node.dijitDateValue;node=node.parentNode){}if(node&&!_1128.contains(node,"dijitCalendarDisabledDate")){this.set("value",node.dijitDateValue);}},_getNodeByDate:function(value){value=this._patchDate(value);return value&&this._date2cell?this._date2cell[value.valueOf()]:null;},_markSelectedDates:function(dates){function mark(_1142,cell){_1128.toggle(cell,"dijitCalendarSelectedDate",_1142);cell.setAttribute("aria-selected",_1142?"true":"false");};array.forEach(this._selectedCells||[],lang.partial(mark,false));this._selectedCells=array.filter(array.map(dates,this._getNodeByDate,this),function(n){return n;});array.forEach(this._selectedCells,lang.partial(mark,true));},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});_112d._MonthWidget=_1125("dijit.CalendarLite._MonthWidget",_112a,{_setMonthAttr:function(month){var _1143=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,month),_1144=(has("ie")==6?"":"<div class='dijitSpacer'>"+array.map(_1143,function(s){return "<div>"+s+"</div>";}).join("")+"</div>");this.domNode.innerHTML=_1144+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+_1143[month.getMonth()]+"</div>";}});return _112d;});},"dijit/CheckedMenuItem":function(){require({cache:{"url:dijit/templates/CheckedMenuItem.html":"<tr class=\"dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitemcheckbox\" tabIndex=\"-1\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuItemIcon dijitCheckedMenuItemIcon\" data-dojo-attach-point=\"iconNode\"/>\n\t\t<span class=\"dijitCheckedMenuItemIconChar\">&#10003;</span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,labelNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">&#160;</td>\n</tr>\n"}});define("dijit/CheckedMenuItem",["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(_1145,_1146,_1147,_1148){return _1145("dijit.CheckedMenuItem",_1147,{templateString:_1148,checked:false,_setCheckedAttr:function(_1149){_1146.toggle(this.domNode,"dijitCheckedMenuItemChecked",_1149);this.domNode.setAttribute("aria-checked",_1149?"true":"false");this._set("checked",_1149);},iconClass:"",onChange:function(){},_onClick:function(evt){if(!this.disabled){this.set("checked",!this.checked);this.onChange(this.checked);}this.onClick(evt);}});});},"esri/dijit/editing/Cut":function(){define("esri/dijit/editing/Cut",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/geometry/jsonUtils","esri/OperationBase"],function(_114a,lang,has,_114b,_114c,_114d){var Cut=_114a(_114d,{declaredClass:"esri.dijit.editing.Cut",type:"edit",label:"Cut Features",constructor:function(_114e){var i;_114e=_114e||{};if(!_114e.featureLayer){console.error("In constructor of 'esri.dijit.editing.Cut', featureLayer not provided");return;}this._featureLayer=_114e.featureLayer;if(!_114e.addedGraphics){console.error("In constructor of 'esri.dijit.editing.Cut', addedGraphics for cut not provided");return;}this._addedGraphics=_114e.addedGraphics;if(!_114e.preUpdatedGraphics){console.error("In constructor of 'esri.dijit.editing.Cut', preUpdatedGraphics not provided");return;}this._preUpdatedGraphicsGeometries=[];this._preUpdatedGraphicsAttributes=[];for(i=0;i<_114e.preUpdatedGraphics.length;i++){this._preUpdatedGraphicsGeometries.push(_114e.preUpdatedGraphics[i].geometry.toJson());this._preUpdatedGraphicsAttributes.push(_114e.preUpdatedGraphics[i].attributes);}if(!_114e.postUpdatedGraphics){console.error("In constructor of 'esri.dijit.editing.Cut', postUpdatedGraphics not provided");return;}this._postUpdatedGraphics=_114e.postUpdatedGraphics;this._postUpdatedGraphicsGeometries=[];this._postUpdatedGraphicsAttributes=[];for(i=0;i<_114e.postUpdatedGraphics.length;i++){this._postUpdatedGraphicsGeometries.push(_114e.postUpdatedGraphics[i].geometry.toJson());this._postUpdatedGraphicsAttributes.push(lang.clone(_114e.postUpdatedGraphics[i].attributes));}},performUndo:function(){var i;for(i=0;i<this._postUpdatedGraphics.length;i++){this._postUpdatedGraphics[i].setGeometry(_114c.fromJson(this._preUpdatedGraphicsGeometries[i]));this._postUpdatedGraphics[i].setAttributes(this._preUpdatedGraphicsAttributes[i]);}this._featureLayer.applyEdits(null,this._postUpdatedGraphics,this._addedGraphics);},performRedo:function(){var i;for(i=0;i<this._postUpdatedGraphics.length;i++){this._postUpdatedGraphics[i].setGeometry(_114c.fromJson(this._postUpdatedGraphicsGeometries[i]));this._postUpdatedGraphics[i].setAttributes(this._postUpdatedGraphicsAttributes[i]);}this._featureLayer.applyEdits(this._addedGraphics,this._postUpdatedGraphics,null);}});if(has("extend-esri")){lang.setObject("dijit.editing.Cut",Cut,_114b);}return Cut;});},"dojox/grid/_Events":function(){define("dojox/grid/_Events",["dojo/keys","dojo/dom-class","dojo/_base/declare","dojo/_base/event","dojo/_base/sniff"],function(keys,_114f,_1150,event,has){return _1150("dojox.grid._Events",null,{cellOverClass:"dojoxGridCellOver",onKeyEvent:function(e){this.dispatchKeyEvent(e);},onContentEvent:function(e){this.dispatchContentEvent(e);},onHeaderEvent:function(e){this.dispatchHeaderEvent(e);},onStyleRow:function(inRow){var i=inRow;i.customClasses+=(i.odd?" dojoxGridRowOdd":"")+(i.selected?" dojoxGridRowSelected":"")+(i.over?" dojoxGridRowOver":"");this.focus.styleRow(inRow);this.edit.styleRow(inRow);},onKeyDown:function(e){if(e.altKey||e.metaKey){return;}var _1151;switch(e.keyCode){case keys.ESCAPE:this.edit.cancel();break;case keys.ENTER:if(!this.edit.isEditing()){_1151=this.focus.getHeaderIndex();if(_1151>=0){this.setSortIndex(_1151);break;}else{this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(e),e.shiftKey);}event.stop(e);}if(!e.shiftKey){var _1152=this.edit.isEditing();this.edit.apply();if(!_1152){this.edit.setEditCell(this.focus.cell,this.focus.rowIndex);}}if(!this.edit.isEditing()){var _1153=this.focus.focusView||this.views.views[0];_1153.content.decorateEvent(e);this.onRowClick(e);event.stop(e);}break;case keys.SPACE:if(!this.edit.isEditing()){_1151=this.focus.getHeaderIndex();if(_1151>=0){this.setSortIndex(_1151);break;}else{this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(e),e.shiftKey);}event.stop(e);}break;case keys.TAB:this.focus[e.shiftKey?"previousKey":"nextKey"](e);break;case keys.LEFT_ARROW:case keys.RIGHT_ARROW:if(!this.edit.isEditing()){var _1154=e.keyCode;event.stop(e);_1151=this.focus.getHeaderIndex();if(_1151>=0&&(e.shiftKey&&e.ctrlKey)){this.focus.colSizeAdjust(e,_1151,(_1154==keys.LEFT_ARROW?-1:1)*5);}else{var _1155=(_1154==keys.LEFT_ARROW)?1:-1;if(this.isLeftToRight()){_1155*=-1;}this.focus.move(0,_1155);}}break;case keys.UP_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex!==0){event.stop(e);this.focus.move(-1,0);}break;case keys.DOWN_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount){event.stop(e);this.focus.move(1,0);}break;case keys.PAGE_UP:if(!this.edit.isEditing()&&this.focus.rowIndex!==0){event.stop(e);if(this.focus.rowIndex!=this.scroller.firstVisibleRow+1){this.focus.move(this.scroller.firstVisibleRow-this.focus.rowIndex,0);}else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex-1));this.focus.move(this.scroller.firstVisibleRow-this.scroller.lastVisibleRow+1,0);}}break;case keys.PAGE_DOWN:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount){event.stop(e);if(this.focus.rowIndex!=this.scroller.lastVisibleRow-1){this.focus.move(this.scroller.lastVisibleRow-this.focus.rowIndex-1,0);}else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex+1));this.focus.move(this.scroller.lastVisibleRow-this.scroller.firstVisibleRow-1,0);}}break;default:break;}},onMouseOver:function(e){e.rowIndex==-1?this.onHeaderCellMouseOver(e):this.onCellMouseOver(e);},onMouseOut:function(e){e.rowIndex==-1?this.onHeaderCellMouseOut(e):this.onCellMouseOut(e);},onMouseDown:function(e){e.rowIndex==-1?this.onHeaderCellMouseDown(e):this.onCellMouseDown(e);},onMouseOverRow:function(e){if(!this.rows.isOver(e.rowIndex)){this.rows.setOverRow(e.rowIndex);e.rowIndex==-1?this.onHeaderMouseOver(e):this.onRowMouseOver(e);}},onMouseOutRow:function(e){if(this.rows.isOver(-1)){this.onHeaderMouseOut(e);}else{if(!this.rows.isOver(-2)){this.rows.setOverRow(-2);this.onRowMouseOut(e);}}},onMouseDownRow:function(e){if(e.rowIndex!=-1){this.onRowMouseDown(e);}},onCellMouseOver:function(e){if(e.cellNode){_114f.add(e.cellNode,this.cellOverClass);}},onCellMouseOut:function(e){if(e.cellNode){_114f.remove(e.cellNode,this.cellOverClass);}},onCellMouseDown:function(e){},onCellClick:function(e){this._click[0]=this._click[1];this._click[1]=e;if(!this.edit.isEditCell(e.rowIndex,e.cellIndex)){this.focus.setFocusCell(e.cell,e.rowIndex);}if(this._click.length>1&&this._click[0]==null){this._click.shift();}this.onRowClick(e);},onCellDblClick:function(e){var event;if(this._click.length>1&&has("ie")){event=this._click[1];}else{if(this._click.length>1&&this._click[0].rowIndex!=this._click[1].rowIndex){event=this._click[0];}else{event=e;}}this.focus.setFocusCell(event.cell,event.rowIndex);this.onRowClick(event);this.edit.setEditCell(event.cell,event.rowIndex);this.onRowDblClick(e);},onCellContextMenu:function(e){this.onRowContextMenu(e);},onCellFocus:function(_1156,_1157){this.edit.cellFocus(_1156,_1157);},onRowClick:function(e){this.edit.rowClick(e);this.selection.clickSelectEvent(e);},onRowDblClick:function(e){},onRowMouseOver:function(e){},onRowMouseOut:function(e){},onRowMouseDown:function(e){},onRowContextMenu:function(e){event.stop(e);},onHeaderMouseOver:function(e){},onHeaderMouseOut:function(e){},onHeaderCellMouseOver:function(e){if(e.cellNode){_114f.add(e.cellNode,this.cellOverClass);}},onHeaderCellMouseOut:function(e){if(e.cellNode){_114f.remove(e.cellNode,this.cellOverClass);}},onHeaderCellMouseDown:function(e){},onHeaderClick:function(e){},onHeaderCellClick:function(e){this.setSortIndex(e.cell.index);this.onHeaderClick(e);},onHeaderDblClick:function(e){},onHeaderCellDblClick:function(e){this.onHeaderDblClick(e);},onHeaderCellContextMenu:function(e){this.onHeaderContextMenu(e);},onHeaderContextMenu:function(e){if(!this.headerMenu){event.stop(e);}},onStartEdit:function(_1158,_1159){},onApplyCellEdit:function(_115a,_115b,_115c){},onCancelEdit:function(_115d){},onApplyEdit:function(_115e){},onCanSelect:function(_115f){return true;},onCanDeselect:function(_1160){return true;},onSelected:function(_1161){this.updateRowStyles(_1161);},onDeselected:function(_1162){this.updateRowStyles(_1162);},onSelectionChanged:function(){}});});},"dijit/Viewport":function(){define("dijit/Viewport",["dojo/Evented","dojo/on","dojo/ready","dojo/sniff","dojo/_base/window","dojo/window"],function(_1163,on,ready,has,win,_1164){var _1165=new _1163();ready(200,function(){var _1166=_1164.getBox();_1165._rlh=on(win.global,"resize",function(){var _1167=_1164.getBox();if(_1166.h==_1167.h&&_1166.w==_1167.w){return;}_1166=_1167;_1165.emit("resize");});if(has("ie")==8){var _1168=screen.deviceXDPI;setInterval(function(){if(screen.deviceXDPI!=_1168){_1168=screen.deviceXDPI;_1165.emit("resize");}},500);}});return _1165;});},"esri/tasks/geometry":function(){define("esri/tasks/geometry",["esri/tasks/GeometryService","esri/tasks/TrimExtendParameters","esri/tasks/BufferParameters","esri/tasks/AreasAndLengthsParameters","esri/tasks/LengthsParameters","esri/tasks/RelationParameters","esri/tasks/DensifyParameters","esri/tasks/GeneralizeParameters","esri/tasks/OffsetParameters","esri/tasks/DistanceParameters","esri/tasks/ProjectParameters"],function(){return {};});},"dojox/gfx/Mover":function(){define("dojox/gfx/Mover",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/on","dojo/touch","dojo/_base/event"],function(lang,arr,_1169,on,touch,event){return _1169("dojox.gfx.Mover",null,{constructor:function(shape,e,host){this.shape=shape;this.lastX=e.clientX;this.lastY=e.clientY;var h=this.host=host,d=document,_116a=on(d,touch.move,lang.hitch(this,"onFirstMove"));this.events=[on(d,touch.move,lang.hitch(this,"onMouseMove")),on(d,touch.release,lang.hitch(this,"destroy")),on(d,"dragstart",lang.hitch(event,"stop")),on(d,"selectstart",lang.hitch(event,"stop")),_116a];if(h&&h.onMoveStart){h.onMoveStart(this);}},onMouseMove:function(e){var x=e.clientX;var y=e.clientY;this.host.onMove(this,{dx:x-this.lastX,dy:y-this.lastY});this.lastX=x;this.lastY=y;event.stop(e);},onFirstMove:function(){this.host.onFirstMove(this);this.events.pop().remove();},destroy:function(){arr.forEach(this.events,function(_116b){_116b.remove();});var h=this.host;if(h&&h.onMoveStop){h.onMoveStop(this);}this.events=this.shape=null;}});});},"esri/tasks/DistanceParameters":function(){define("esri/tasks/DistanceParameters",["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/jsonUtils"],function(_116c,lang,_116d,has,_116e,_116f){var _1170=_116c(null,{declaredClass:"esri.tasks.DistanceParameters",geometry1:null,geometry2:null,distanceUnit:null,geodesic:null,toJson:function(){var json={};var _1171=this.geometry1;if(_1171){json.geometry1=_116d.toJson({geometryType:_116f.getJsonType(_1171),geometry:_1171});}var _1172=this.geometry2;if(_1172){json.geometry2=_116d.toJson({geometryType:_116f.getJsonType(_1172),geometry:_1172});}json.sr=_116d.toJson(this.geometry1.spatialReference.toJson());if(this.distanceUnit){json.distanceUnit=this.distanceUnit;}if(this.geodesic){json.geodesic=this.geodesic;}return json;}});if(has("extend-esri")){lang.setObject("tasks.DistanceParameters",_1170,_116e);}return _1170;});},"dojox/grid/util":function(){define("dojox/grid/util",["../main","dojo/_base/lang","dojo/dom"],function(dojox,lang,dom){var dgu=lang.getObject("grid.util",true,dojox);dgu.na="...";dgu.rowIndexTag="gridRowIndex";dgu.gridViewTag="gridView";dgu.fire=function(ob,ev,args){var fn=ob&&ev&&ob[ev];return fn&&(args?fn.apply(ob,args):ob[ev]());};dgu.setStyleHeightPx=function(_1173,_1174){if(_1174>=0){var s=_1173.style;var v=_1174+"px";if(_1173&&s["height"]!=v){s["height"]=v;}}};dgu.mouseEvents=["mouseover","mouseout","mousedown","mouseup","click","dblclick","contextmenu"];dgu.keyEvents=["keyup","keydown","keypress"];dgu.funnelEvents=function(_1175,_1176,_1177,_1178){var evts=(_1178?_1178:dgu.mouseEvents.concat(dgu.keyEvents));for(var i=0,l=evts.length;i<l;i++){_1176.connect(_1175,"on"+evts[i],_1177);}};dgu.removeNode=function(_1179){_1179=dom.byId(_1179);_1179&&_1179.parentNode&&_1179.parentNode.removeChild(_1179);return _1179;};dgu.arrayCompare=function(inA,inB){for(var i=0,l=inA.length;i<l;i++){if(inA[i]!=inB[i]){return false;}}return (inA.length==inB.length);};dgu.arrayInsert=function(_117a,_117b,_117c){if(_117a.length<=_117b){_117a[_117b]=_117c;}else{_117a.splice(_117b,0,_117c);}};dgu.arrayRemove=function(_117d,_117e){_117d.splice(_117e,1);};dgu.arraySwap=function(_117f,inI,inJ){var cache=_117f[inI];_117f[inI]=_117f[inJ];_117f[inJ]=cache;};return dgu;});},"dijit/form/_ComboBoxMenu":function(){define("dijit/form/_ComboBoxMenu",["dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/keys","../_WidgetBase","../_TemplatedMixin","./_ComboBoxMenuMixin","./_ListMouseMixin"],function(_1180,_1181,_1182,keys,_1183,_1184,_1185,_1186){return _1180("dijit.form._ComboBoxMenu",[_1183,_1184,_1186,_1185],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;' role='listbox'>"+"<div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div>"+"<div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div>"+"</div>",baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);if(!this.isLeftToRight()){_1181.add(this.previousButton,"dijitMenuItemRtl");_1181.add(this.nextButton,"dijitMenuItemRtl");}},_createMenuItem:function(){var item=this.ownerDocument.createElement("div");item.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");item.setAttribute("role","option");return item;},onHover:function(node){_1181.add(node,"dijitMenuItemHover");},onUnhover:function(node){_1181.remove(node,"dijitMenuItemHover");},onSelect:function(node){_1181.add(node,"dijitMenuItemSelected");},onDeselect:function(node){_1181.remove(node,"dijitMenuItemSelected");},_page:function(up){var _1187=0;var _1188=this.domNode.scrollTop;var _1189=_1182.get(this.domNode,"height");if(!this.getHighlightedOption()){this.selectNextNode();}while(_1187<_1189){var _118a=this.getHighlightedOption();if(up){if(!_118a.previousSibling||_118a.previousSibling.style.display=="none"){break;}this.selectPreviousNode();}else{if(!_118a.nextSibling||_118a.nextSibling.style.display=="none"){break;}this.selectNextNode();}var _118b=this.domNode.scrollTop;_1187+=(_118b-_1188)*(up?-1:1);_1188=_118b;}},handleKey:function(evt){switch(evt.keyCode){case keys.DOWN_ARROW:this.selectNextNode();return false;case keys.PAGE_DOWN:this._page(false);return false;case keys.UP_ARROW:this.selectPreviousNode();return false;case keys.PAGE_UP:this._page(true);return false;default:return true;}}});});},"url:esri/dijit/editing/templates/AttachmentEditor.html":"<div class=\"attachmentEditor\">\r\n    <br />\r\n    <div>\r\n        <b>${NLS_attachments}</b>\r\n        <hr />\r\n        <div dojoAttachPoint=\"_attachmentError\" style='color:red;display:none'></div>\r\n        <br />\r\n        <span dojoAttachPoint='_attachmentList' style='word-wrap: break-word;'></span>\r\n        <br><br>\r\n        <form dojoAttachPoint='_uploadForm'> ${NLS_add}:&nbsp;&nbsp;<input type='file' name='attachment' dojoAttachPoint='_uploadField' /> </form>\r\n    </div>\r\n</div>","dojox/grid/cells/_base":function(){define("dojox/grid/cells/_base",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/event","dojo/_base/connect","dojo/_base/array","dojo/_base/sniff","dojo/dom","dojo/dom-attr","dojo/dom-construct","dijit/_Widget","../util"],function(dojo,_118c,lang,event,_118d,array,has,dom,_118e,_118f,_1190,util){var _1191=_118c("dojox.grid._DeferredTextWidget",_1190,{deferred:null,_destroyOnRemove:true,postCreate:function(){if(this.deferred){this.deferred.addBoth(lang.hitch(this,function(text){if(this.domNode){this.domNode.innerHTML=text;}}));}}});var _1192=function(_1193){try{util.fire(_1193,"focus");util.fire(_1193,"select");}catch(e){}};var _1194=function(){setTimeout(lang.hitch.apply(dojo,arguments),0);};var _1195=_118c("dojox.grid.cells._Base",null,{styles:"",classes:"",editable:false,alwaysEditing:false,formatter:null,defaultValue:"...",value:null,hidden:false,noresize:false,draggable:true,_valueProp:"value",_formatPending:false,constructor:function(_1196){this._props=_1196||{};lang.mixin(this,_1196);if(this.draggable===undefined){this.draggable=true;}},_defaultFormat:function(_1197,_1198){var s=this.grid.formatterScope||this;var f=this.formatter;if(f&&s&&typeof f=="string"){f=this.formatter=s[f];}var v=(_1197!=this.defaultValue&&f)?f.apply(s,_1198):_1197;if(typeof v=="undefined"){return this.defaultValue;}if(v&&v.addBoth){v=new _1191({deferred:v},_118f.create("span",{innerHTML:this.defaultValue}));}if(v&&v.declaredClass&&v.startup){return "<div class='dojoxGridStubNode' linkWidget='"+v.id+"' cellIdx='"+this.index+"'>"+this.defaultValue+"</div>";}return v;},format:function(_1199,_119a){var f,i=this.grid.edit.info,d=this.get?this.get(_1199,_119a):(this.value||this.defaultValue);d=(d&&d.replace&&this.grid.escapeHTMLInData)?d.replace(/&(?![a-z0-9]{1,8}\;)/ig,"&amp;").replace(/</g,"&lt;"):d;if(this.editable&&(this.alwaysEditing||(i.rowIndex==_1199&&i.cell==this))){return this.formatEditing(d,_1199);}else{return this._defaultFormat(d,[d,_1199,this]);}},formatEditing:function(_119b,_119c){},getNode:function(_119d){return this.view.getCellNode(_119d,this.index);},getHeaderNode:function(){return this.view.getHeaderCellNode(this.index);},getEditNode:function(_119e){return (this.getNode(_119e)||0).firstChild||0;},canResize:function(){var uw=this.unitWidth;return uw&&(uw!=="auto");},isFlex:function(){var uw=this.unitWidth;return uw&&lang.isString(uw)&&(uw=="auto"||uw.slice(-1)=="%");},applyEdit:function(_119f,_11a0){if(this.getNode(_11a0)){this.grid.edit.applyCellEdit(_119f,this,_11a0);}},cancelEdit:function(_11a1){this.grid.doCancelEdit(_11a1);},_onEditBlur:function(_11a2){if(this.grid.edit.isEditCell(_11a2,this.index)){this.grid.edit.apply();}},registerOnBlur:function(_11a3,_11a4){if(this.commitOnBlur){_118d.connect(_11a3,"onblur",function(e){setTimeout(lang.hitch(this,"_onEditBlur",_11a4),250);});}},needFormatNode:function(_11a5,_11a6){this._formatPending=true;_1194(this,"_formatNode",_11a5,_11a6);},cancelFormatNode:function(){this._formatPending=false;},_formatNode:function(_11a7,_11a8){if(this._formatPending){this._formatPending=false;if(!has("ie")){dom.setSelectable(this.grid.domNode,true);}this.formatNode(this.getEditNode(_11a8),_11a7,_11a8);}},formatNode:function(_11a9,_11aa,_11ab){if(has("ie")){_1194(this,"focus",_11ab,_11a9);}else{this.focus(_11ab,_11a9);}},dispatchEvent:function(m,e){if(m in this){return this[m](e);}},getValue:function(_11ac){return this.getEditNode(_11ac)[this._valueProp];},setValue:function(_11ad,_11ae){var n=this.getEditNode(_11ad);if(n){n[this._valueProp]=_11ae;}},focus:function(_11af,_11b0){_1192(_11b0||this.getEditNode(_11af));},save:function(_11b1){this.value=this.value||this.getValue(_11b1);},restore:function(_11b2){this.setValue(_11b2,this.value);},_finish:function(_11b3){dom.setSelectable(this.grid.domNode,false);this.cancelFormatNode();},apply:function(_11b4){this.applyEdit(this.getValue(_11b4),_11b4);this._finish(_11b4);},cancel:function(_11b5){this.cancelEdit(_11b5);this._finish(_11b5);}});_1195.markupFactory=function(node,_11b6){var _11b7=lang.trim(_118e.get(node,"formatter")||"");if(_11b7){_11b6.formatter=lang.getObject(_11b7)||_11b7;}var get=lang.trim(_118e.get(node,"get")||"");if(get){_11b6.get=lang.getObject(get);}var _11b8=function(attr,cell,_11b9){var value=lang.trim(_118e.get(node,attr)||"");if(value){cell[_11b9||attr]=!(value.toLowerCase()=="false");}};_11b8("sortDesc",_11b6);_11b8("editable",_11b6);_11b8("alwaysEditing",_11b6);_11b8("noresize",_11b6);_11b8("draggable",_11b6);var value=lang.trim(_118e.get(node,"loadingText")||_118e.get(node,"defaultValue")||"");if(value){_11b6.defaultValue=value;}var _11ba=function(attr,cell,_11bb){var value=lang.trim(_118e.get(node,attr)||"")||undefined;if(value){cell[_11bb||attr]=value;}};_11ba("styles",_11b6);_11ba("headerStyles",_11b6);_11ba("cellStyles",_11b6);_11ba("classes",_11b6);_11ba("headerClasses",_11b6);_11ba("cellClasses",_11b6);};var Cell=_118c("dojox.grid.cells.Cell",_1195,{constructor:function(){this.keyFilter=this.keyFilter;},keyFilter:null,formatEditing:function(_11bc,_11bd){this.needFormatNode(_11bc,_11bd);return "<input class=\"dojoxGridInput\" type=\"text\" value=\""+_11bc+"\">";},formatNode:function(_11be,_11bf,_11c0){this.inherited(arguments);this.registerOnBlur(_11be,_11c0);},doKey:function(e){if(this.keyFilter){var key=String.fromCharCode(e.charCode);if(key.search(this.keyFilter)==-1){event.stop(e);}}},_finish:function(_11c1){this.inherited(arguments);var n=this.getEditNode(_11c1);try{util.fire(n,"blur");}catch(e){}}});Cell.markupFactory=function(node,_11c2){_1195.markupFactory(node,_11c2);var _11c3=lang.trim(_118e.get(node,"keyFilter")||"");if(_11c3){_11c2.keyFilter=new RegExp(_11c3);}};var _11c4=_118c("dojox.grid.cells.RowIndex",Cell,{name:"Row",postscript:function(){this.editable=false;},get:function(_11c5){return _11c5+1;}});_11c4.markupFactory=function(node,_11c6){Cell.markupFactory(node,_11c6);};var _11c7=_118c("dojox.grid.cells.Select",Cell,{options:null,values:null,returnIndex:-1,constructor:function(_11c8){this.values=this.values||this.options;},formatEditing:function(_11c9,_11ca){this.needFormatNode(_11c9,_11ca);var h=["<select class=\"dojoxGridSelect\">"];for(var i=0,o,v;((o=this.options[i])!==undefined)&&((v=this.values[i])!==undefined);i++){v=v.replace?v.replace(/&/g,"&amp;").replace(/</g,"&lt;"):v;o=o.replace?o.replace(/&/g,"&amp;").replace(/</g,"&lt;"):o;h.push("<option",(_11c9==v?" selected":"")," value=\""+v+"\"",">",o,"</option>");}h.push("</select>");return h.join("");},_defaultFormat:function(_11cb,_11cc){var v=this.inherited(arguments);if(!this.formatter&&this.values&&this.options){var i=array.indexOf(this.values,v);if(i>=0){v=this.options[i];}}return v;},getValue:function(_11cd){var n=this.getEditNode(_11cd);if(n){var i=n.selectedIndex,o=n.options[i];return this.returnIndex>-1?i:o.value||o.innerHTML;}}});_11c7.markupFactory=function(node,cell){Cell.markupFactory(node,cell);var _11ce=lang.trim(_118e.get(node,"options")||"");if(_11ce){var o=_11ce.split(",");if(o[0]!=_11ce){cell.options=o;}}var _11cf=lang.trim(_118e.get(node,"values")||"");if(_11cf){var v=_11cf.split(",");if(v[0]!=_11cf){cell.values=v;}}};var _11d0=_118c("dojox.grid.cells.AlwaysEdit",Cell,{alwaysEditing:true,_formatNode:function(_11d1,_11d2){this.formatNode(this.getEditNode(_11d2),_11d1,_11d2);},applyStaticValue:function(_11d3){var e=this.grid.edit;e.applyCellEdit(this.getValue(_11d3),this,_11d3);e.start(this,_11d3,true);}});_11d0.markupFactory=function(node,cell){Cell.markupFactory(node,cell);};var Bool=_118c("dojox.grid.cells.Bool",_11d0,{_valueProp:"checked",formatEditing:function(_11d4,_11d5){return "<input class=\"dojoxGridInput\" type=\"checkbox\""+(_11d4?" checked=\"checked\"":"")+" style=\"width: auto\" />";},doclick:function(e){if(e.target.tagName=="INPUT"){this.applyStaticValue(e.rowIndex);}}});Bool.markupFactory=function(node,cell){_11d0.markupFactory(node,cell);};return _1195;});},"dijit/form/_DateTimeTextBox":function(){require({cache:{"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"button presentation\" aria-hidden=\"true\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"}});define("dijit/form/_DateTimeTextBox",["dojo/date","dojo/date/locale","dojo/date/stamp","dojo/_base/declare","dojo/_base/lang","./RangeBoundTextBox","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(date,_11d6,stamp,_11d7,lang,_11d8,_11d9,_11da){new Date("X");var _11db=_11d7("dijit.form._DateTimeTextBox",[_11d8,_11d9],{templateString:_11da,hasDownArrow:true,cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},pattern:_11d6.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text");},compare:function(val1,val2){var _11dc=this._isInvalidDate(val1);var _11dd=this._isInvalidDate(val2);return _11dc?(_11dd?0:-1):(_11dd?1:date.compare(val1,val2,this._selector));},forceWidth:true,format:function(value,_11de){if(!value){return "";}return this.dateLocaleModule.format(value,_11de);},"parse":function(value,_11df){return this.dateLocaleModule.parse(value,_11df)||(this._isEmpty(value)?null:undefined);},serialize:function(val,_11e0){if(val.toGregorian){val=val.toGregorian();}return stamp.toISOString(val,_11e0);},dropDownDefaultValue:new Date(),value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(_11e1){this.dateModule=_11e1.datePackage?lang.getObject(_11e1.datePackage,false):date;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=_11e1.datePackage?lang.getObject(_11e1.datePackage+".locale",false):_11d6;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString();},buildRendering:function(){this.inherited(arguments);if(!this.hasDownArrow){this._buttonNode.style.display="none";}if(!this.hasDownArrow){this._buttonNode=this.domNode;this.baseClass+=" dijitComboBoxOpenOnClick";}},_setConstraintsAttr:function(_11e2){_11e2.selector=this._selector;_11e2.fullYear=true;var _11e3=stamp.fromISOString;if(typeof _11e2.min=="string"){_11e2.min=_11e3(_11e2.min);}if(typeof _11e2.max=="string"){_11e2.max=_11e3(_11e2.max);}this.inherited(arguments);},_isInvalidDate:function(value){return !value||isNaN(value)||typeof value!="object"||value.toString()==this._invalidDate;},_setValueAttr:function(value,_11e4,_11e5){if(value!==undefined){if(typeof value=="string"){value=stamp.fromISOString(value);}if(this._isInvalidDate(value)){value=null;}if(value instanceof Date&&!(this.dateClassObj instanceof Date)){value=new this.dateClassObj(value);}}this.inherited(arguments);if(this.value instanceof Date){this.filterString="";}if(this.dropDown){this.dropDown.set("value",value,false);}},_set:function(attr,value){if(attr=="value"&&this.value instanceof Date&&this.compare(value,this.value)==0){return;}this.inherited(arguments);},_setDropDownDefaultValueAttr:function(val){if(this._isInvalidDate(val)){val=new this.dateClassObj();}this.dropDownDefaultValue=val;},openDropDown:function(_11e6){if(this.dropDown){this.dropDown.destroy();}var _11e7=lang.isString(this.popupClass)?lang.getObject(this.popupClass,false):this.popupClass,_11e8=this,value=this.get("value");this.dropDown=new _11e7({onChange:function(value){_11e8.set("value",value,true);},id:this.id+"_popup",dir:_11e8.dir,lang:_11e8.lang,value:value,currentFocus:!this._isInvalidDate(value)?value:this.dropDownDefaultValue,constraints:_11e8.constraints,filterString:_11e8.filterString,datePackage:_11e8.params.datePackage,isDisabledDate:function(date){return !_11e8.rangeCheck(date,_11e8.constraints);}});this.inherited(arguments);},_getDisplayedValueAttr:function(){return this.textbox.value;},_setDisplayedValueAttr:function(value,_11e9){this._setValueAttr(this.parse(value,this.constraints),_11e9,value);}});return _11db;});},"dijit/_base/focus":function(){define("dijit/_base/focus",["dojo/_base/array","dojo/dom","dojo/_base/lang","dojo/topic","dojo/_base/window","../focus","../main"],function(array,dom,lang,topic,win,focus,dijit){var _11ea={_curFocus:null,_prevFocus:null,isCollapsed:function(){return dijit.getBookmark().isCollapsed;},getBookmark:function(){var bm,rg,tg,sel=win.doc.selection,cf=focus.curNode;if(win.global.getSelection){sel=win.global.getSelection();if(sel){if(sel.isCollapsed){tg=cf?cf.tagName:"";if(tg){tg=tg.toLowerCase();if(tg=="textarea"||(tg=="input"&&(!cf.type||cf.type.toLowerCase()=="text"))){sel={start:cf.selectionStart,end:cf.selectionEnd,node:cf,pRange:true};return {isCollapsed:(sel.end<=sel.start),mark:sel};}}bm={isCollapsed:true};if(sel.rangeCount){bm.mark=sel.getRangeAt(0).cloneRange();}}else{rg=sel.getRangeAt(0);bm={isCollapsed:false,mark:rg.cloneRange()};}}}else{if(sel){tg=cf?cf.tagName:"";tg=tg.toLowerCase();if(cf&&tg&&(tg=="button"||tg=="textarea"||tg=="input")){if(sel.type&&sel.type.toLowerCase()=="none"){return {isCollapsed:true,mark:null};}else{rg=sel.createRange();return {isCollapsed:rg.text&&rg.text.length?false:true,mark:{range:rg,pRange:true}};}}bm={};try{rg=sel.createRange();bm.isCollapsed=!(sel.type=="Text"?rg.htmlText.length:rg.length);}catch(e){bm.isCollapsed=true;return bm;}if(sel.type.toUpperCase()=="CONTROL"){if(rg.length){bm.mark=[];var i=0,len=rg.length;while(i<len){bm.mark.push(rg.item(i++));}}else{bm.isCollapsed=true;bm.mark=null;}}else{bm.mark=rg.getBookmark();}}else{console.warn("No idea how to store the current selection for this browser!");}}return bm;},moveToBookmark:function(_11eb){var _11ec=win.doc,mark=_11eb.mark;if(mark){if(win.global.getSelection){var sel=win.global.getSelection();if(sel&&sel.removeAllRanges){if(mark.pRange){var n=mark.node;n.selectionStart=mark.start;n.selectionEnd=mark.end;}else{sel.removeAllRanges();sel.addRange(mark);}}else{console.warn("No idea how to restore selection for this browser!");}}else{if(_11ec.selection&&mark){var rg;if(mark.pRange){rg=mark.range;}else{if(lang.isArray(mark)){rg=_11ec.body.createControlRange();array.forEach(mark,function(n){rg.addElement(n);});}else{rg=_11ec.body.createTextRange();rg.moveToBookmark(mark);}}rg.select();}}}},getFocus:function(menu,_11ed){var node=!focus.curNode||(menu&&dom.isDescendant(focus.curNode,menu.domNode))?dijit._prevFocus:focus.curNode;return {node:node,bookmark:node&&(node==focus.curNode)&&win.withGlobal(_11ed||win.global,dijit.getBookmark),openedForWindow:_11ed};},_activeStack:[],registerIframe:function(_11ee){return focus.registerIframe(_11ee);},unregisterIframe:function(_11ef){_11ef&&_11ef.remove();},registerWin:function(_11f0,_11f1){return focus.registerWin(_11f0,_11f1);},unregisterWin:function(_11f2){_11f2&&_11f2.remove();}};focus.focus=function(_11f3){if(!_11f3){return;}var node="node" in _11f3?_11f3.node:_11f3,_11f4=_11f3.bookmark,_11f5=_11f3.openedForWindow,_11f6=_11f4?_11f4.isCollapsed:false;if(node){var _11f7=(node.tagName.toLowerCase()=="iframe")?node.contentWindow:node;if(_11f7&&_11f7.focus){try{_11f7.focus();}catch(e){}}focus._onFocusNode(node);}if(_11f4&&win.withGlobal(_11f5||win.global,dijit.isCollapsed)&&!_11f6){if(_11f5){_11f5.focus();}try{win.withGlobal(_11f5||win.global,dijit.moveToBookmark,null,[_11f4]);}catch(e2){}}};focus.watch("curNode",function(name,_11f8,_11f9){dijit._curFocus=_11f9;dijit._prevFocus=_11f8;if(_11f9){topic.publish("focusNode",_11f9);}});focus.watch("activeStack",function(name,_11fa,_11fb){dijit._activeStack=_11fb;});focus.on("widget-blur",function(_11fc,by){topic.publish("widgetBlur",_11fc,by);});focus.on("widget-focus",function(_11fd,by){topic.publish("widgetFocus",_11fd,by);});lang.mixin(dijit,_11ea);return dijit;});},"url:esri/dijit/templates/AttributeInspector.html":"<div class=\"esriAttributeInspector\">\r\n    <div class=\"atiLayerName\" dojoAttachPoint=\"layerName\"></div>\r\n    <div class=\"atiAttributes\" dojoAttachPoint=\"attributeTable\"></div>\r\n    <div dojoAttachPoint=\"attachmentEditor\"></div>\r\n    <div class=\"atiEditorTrackingInfo\" dojoAttachPoint=\"editorTrackingInfoDiv\"></div>\r\n    <div class=\"atiButtons\" dojoAttachPoint=\"editButtons\">\r\n        <button  dojoType=\"dijit.form.Button\" class=\"atiButton atiDeleteButton\"  dojoAttachPoint=\"deleteBtn\" dojoAttachEvent=\"onClick: onDeleteBtn\" showLabel=\"true\" type=\"button\">${NLS_deleteFeature}</button>\r\n        <div class=\"atiNavButtons\" dojoAttachPoint=\"navButtons\">\r\n            <div class=\"atiNavMessage\" dojoAttachPoint=\"navMessage\"></div>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiFirstIcon\" dojoAttachPoint=\"firstFeatureButton\" dojoAttachEvent=\"onClick: onFirstFeature\" showLabel=\"false\" type=\"button\">${NLS_first}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiPrevIcon\" dojoAttachPoint=\"prevFeatureButton\" dojoAttachEvent=\"onClick: onPreviousFeature\" showLabel=\"false\" type=\"button\">${NLS_previous}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiNextIcon\" dojoAttachPoint=\"nextFeatureButton\" dojoAttachEvent=\"onClick: onNextFeature\" showLabel=\"false\" type=\"button\">${NLS_next}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiLastIcon\" dojoAttachPoint=\"lastFeatureButton\" dojoAttachEvent=\"onClick: onLastFeature\" showLabel=\"false\" type=\"button\">${NLS_last}</button>\r\n        </div>\r\n    </div>\r\n</div>\r\n","esri/dijit/editing/Delete":function(){define("esri/dijit/editing/Delete",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/OperationBase","esri/dijit/editing/Add"],function(_11fe,lang,has,_11ff,_1200,Add){var _1201=_11fe(_1200,{declaredClass:"esri.dijit.editing.Delete",type:"edit",label:"Delete Features",constructor:function(_1202){_1202=_1202||{};this._add=new Add({featureLayer:_1202.featureLayer,addedGraphics:_1202.deletedGraphics});},performUndo:function(){this._add.performRedo();},performRedo:function(){this._add.performUndo();}});if(has("extend-esri")){lang.setObject("dijit.editing.Delete",_1201,_11ff);}return _1201;});},"dijit/a11y":function(){define("dijit/a11y",["dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/sniff","./main"],function(array,_1203,_1204,dom,_1205,_1206,has,dijit){var shown=(dijit._isElementShown=function(elem){var s=_1206.get(elem);return (s.visibility!="hidden")&&(s.visibility!="collapsed")&&(s.display!="none")&&(_1205.get(elem,"type")!="hidden");});dijit.hasDefaultTabStop=function(elem){switch(elem.nodeName.toLowerCase()){case "a":return _1205.has(elem,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":var body;try{var _1207=elem.contentDocument;if("designMode" in _1207&&_1207.designMode=="on"){return true;}body=_1207.body;}catch(e1){try{body=elem.contentWindow.document.body;}catch(e2){return false;}}return body&&(body.contentEditable=="true"||(body.firstChild&&body.firstChild.contentEditable=="true"));default:return elem.contentEditable=="true";}};var _1208=(dijit.isTabNavigable=function(elem){if(_1205.get(elem,"disabled")){return false;}else{if(_1205.has(elem,"tabIndex")){return _1205.get(elem,"tabIndex")>=0;}else{return dijit.hasDefaultTabStop(elem);}}});dijit._getTabNavigable=function(root){var first,last,_1209,_120a,_120b,_120c,_120d={};function _120e(node){return node&&node.tagName.toLowerCase()=="input"&&node.type&&node.type.toLowerCase()=="radio"&&node.name&&node.name.toLowerCase();};var _120f=function(_1210){for(var child=_1210.firstChild;child;child=child.nextSibling){if(child.nodeType!=1||(has("ie")<=9&&child.scopeName!=="HTML")||!shown(child)){continue;}if(_1208(child)){var _1211=+_1205.get(child,"tabIndex");if(!_1205.has(child,"tabIndex")||_1211==0){if(!first){first=child;}last=child;}else{if(_1211>0){if(!_1209||_1211<_120a){_120a=_1211;_1209=child;}if(!_120b||_1211>=_120c){_120c=_1211;_120b=child;}}}var rn=_120e(child);if(_1205.get(child,"checked")&&rn){_120d[rn]=child;}}if(child.nodeName.toUpperCase()!="SELECT"){_120f(child);}}};if(shown(root)){_120f(root);}function rs(node){return _120d[_120e(node)]||node;};return {first:rs(first),last:rs(last),lowest:rs(_1209),highest:rs(_120b)};};dijit.getFirstInTabbingOrder=function(root,doc){var elems=dijit._getTabNavigable(dom.byId(root,doc));return elems.lowest?elems.lowest:elems.first;};dijit.getLastInTabbingOrder=function(root,doc){var elems=dijit._getTabNavigable(dom.byId(root,doc));return elems.last?elems.last:elems.highest;};return {hasDefaultTabStop:dijit.hasDefaultTabStop,isTabNavigable:dijit.isTabNavigable,_getTabNavigable:dijit._getTabNavigable,getFirstInTabbingOrder:dijit.getFirstInTabbingOrder,getLastInTabbingOrder:dijit.getLastInTabbingOrder};});},"dojox/grid/_Scroller":function(){define("dojox/grid/_Scroller",["dijit/registry","dojo/_base/declare","dojo/_base/lang","./util","dojo/_base/html"],function(_1212,_1213,lang,util,html){var _1214=function(_1215){var i=0,n,p=_1215.parentNode;while((n=p.childNodes[i++])){if(n==_1215){return i-1;}}return -1;};var _1216=function(_1217){if(!_1217){return;}dojo.forEach(_1212.toArray(),function(w){if(w.domNode&&html.isDescendant(w.domNode,_1217,true)){w.destroy();}});};var _1218=function(_1219){var node=html.byId(_1219);return (node&&node.tagName?node.tagName.toLowerCase():"");};var _121a=function(_121b,inTag){var _121c=[];var i=0,n;while((n=_121b.childNodes[i])){i++;if(_1218(n)==inTag){_121c.push(n);}}return _121c;};var _121d=function(_121e){return _121a(_121e,"div");};return _1213("dojox.grid._Scroller",null,{constructor:function(_121f){this.setContentNodes(_121f);this.pageHeights=[];this.pageNodes=[];this.stack=[];},rowCount:0,defaultRowHeight:32,keepRows:100,contentNode:null,scrollboxNode:null,defaultPageHeight:0,keepPages:10,pageCount:0,windowHeight:0,firstVisibleRow:0,lastVisibleRow:0,averageRowHeight:0,page:0,pageTop:0,init:function(_1220,_1221,_1222){switch(arguments.length){case 3:this.rowsPerPage=_1222;case 2:this.keepRows=_1221;case 1:this.rowCount=_1220;default:break;}this.defaultPageHeight=(this.grid.rowHeight>0?this.grid.rowHeight:this.defaultRowHeight)*this.rowsPerPage;this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);this.setKeepInfo(this.keepRows);this.invalidate();if(this.scrollboxNode){this.scrollboxNode.scrollTop=0;this.scroll(0);this.scrollboxNode.onscroll=lang.hitch(this,"onscroll");}},_getPageCount:function(_1223,_1224){return _1223?(Math.ceil(_1223/_1224)||1):0;},destroy:function(){this.invalidateNodes();delete this.contentNodes;delete this.contentNode;delete this.scrollboxNode;},setKeepInfo:function(_1225){this.keepRows=_1225;this.keepPages=!this.keepRows?this.keepPages:Math.max(Math.ceil(this.keepRows/this.rowsPerPage),2);},setContentNodes:function(_1226){this.contentNodes=_1226;this.colCount=(this.contentNodes?this.contentNodes.length:0);this.pageNodes=[];for(var i=0;i<this.colCount;i++){this.pageNodes[i]=[];}},getDefaultNodes:function(){return this.pageNodes[0]||[];},invalidate:function(){this._invalidating=true;this.invalidateNodes();this.pageHeights=[];this.height=(this.pageCount?(this.pageCount-1)*this.defaultPageHeight+this.calcLastPageHeight():0);this.resize();this._invalidating=false;},updateRowCount:function(_1227){this.invalidateNodes();this.rowCount=_1227;var _1228=this.pageCount;if(_1228===0){this.height=1;}this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);if(this.pageCount<_1228){for(var i=_1228-1;i>=this.pageCount;i--){this.height-=this.getPageHeight(i);delete this.pageHeights[i];}}else{if(this.pageCount>_1228){this.height+=this.defaultPageHeight*(this.pageCount-_1228-1)+this.calcLastPageHeight();}}this.resize();},pageExists:function(_1229){return Boolean(this.getDefaultPageNode(_1229));},measurePage:function(_122a){if(this.grid.rowHeight){return ((_122a+1)*this.rowsPerPage>this.rowCount?this.rowCount-_122a*this.rowsPerPage:this.rowsPerPage)*this.grid.rowHeight;}var n=this.getDefaultPageNode(_122a);return (n&&n.innerHTML)?n.offsetHeight:undefined;},positionPage:function(_122b,inPos){for(var i=0;i<this.colCount;i++){this.pageNodes[i][_122b].style.top=inPos+"px";}},repositionPages:function(_122c){var nodes=this.getDefaultNodes();var last=0;for(var i=0;i<this.stack.length;i++){last=Math.max(this.stack[i],last);}var n=nodes[_122c];var y=(n?this.getPageNodePosition(n)+this.getPageHeight(_122c):0);for(var p=_122c+1;p<=last;p++){n=nodes[p];if(n){if(this.getPageNodePosition(n)==y){return;}this.positionPage(p,y);}y+=this.getPageHeight(p);}},installPage:function(_122d){for(var i=0;i<this.colCount;i++){this.contentNodes[i].appendChild(this.pageNodes[i][_122d]);}},preparePage:function(_122e,_122f){var p=(_122f?this.popPage():null);for(var i=0;i<this.colCount;i++){var nodes=this.pageNodes[i];var new_p=(p===null?this.createPageNode():this.invalidatePageNode(p,nodes));new_p.pageIndex=_122e;nodes[_122e]=new_p;}},renderPage:function(_1230){var nodes=[];var i,j;for(i=0;i<this.colCount;i++){nodes[i]=this.pageNodes[i][_1230];}for(i=0,j=_1230*this.rowsPerPage;(i<this.rowsPerPage)&&(j<this.rowCount);i++,j++){this.renderRow(j,nodes);}},removePage:function(_1231){for(var i=0,j=_1231*this.rowsPerPage;i<this.rowsPerPage;i++,j++){this.removeRow(j);}},destroyPage:function(_1232){for(var i=0;i<this.colCount;i++){var n=this.invalidatePageNode(_1232,this.pageNodes[i]);if(n){html.destroy(n);}}},pacify:function(_1233){},pacifying:false,pacifyTicks:200,setPacifying:function(_1234){if(this.pacifying!=_1234){this.pacifying=_1234;this.pacify(this.pacifying);}},startPacify:function(){this.startPacifyTicks=new Date().getTime();},doPacify:function(){var _1235=(new Date().getTime()-this.startPacifyTicks)>this.pacifyTicks;this.setPacifying(true);this.startPacify();return _1235;},endPacify:function(){this.setPacifying(false);},resize:function(){if(this.scrollboxNode){this.windowHeight=this.scrollboxNode.clientHeight;}for(var i=0;i<this.colCount;i++){util.setStyleHeightPx(this.contentNodes[i],Math.max(1,this.height));}var _1236=(!this._invalidating);if(!_1236){var ah=this.grid.get("autoHeight");if(typeof ah=="number"&&ah<=Math.min(this.rowsPerPage,this.rowCount)){_1236=true;}}if(_1236){this.needPage(this.page,this.pageTop);}var _1237=(this.page<this.pageCount-1)?this.rowsPerPage:((this.rowCount%this.rowsPerPage)||this.rowsPerPage);var _1238=this.getPageHeight(this.page);this.averageRowHeight=(_1238>0&&_1237>0)?(_1238/_1237):0;},calcLastPageHeight:function(){if(!this.pageCount){return 0;}var _1239=this.pageCount-1;var _123a=((this.rowCount%this.rowsPerPage)||(this.rowsPerPage))*this.defaultRowHeight;this.pageHeights[_1239]=_123a;return _123a;},updateContentHeight:function(inDh){this.height+=inDh;this.resize();},updatePageHeight:function(_123b,_123c,_123d){if(this.pageExists(_123b)){var oh=this.getPageHeight(_123b);var h=(this.measurePage(_123b));if(h===undefined){h=oh;}this.pageHeights[_123b]=h;if(oh!=h){this.updateContentHeight(h-oh);var ah=this.grid.get("autoHeight");if((typeof ah=="number"&&ah>this.rowCount)||(ah===true&&!_123c)){if(!_123d){this.grid.sizeChange();}else{var ns=this.grid.viewsNode.style;ns.height=parseInt(ns.height)+h-oh+"px";this.repositionPages(_123b);}}else{this.repositionPages(_123b);}}return h;}return 0;},rowHeightChanged:function(_123e,_123f){this.updatePageHeight(Math.floor(_123e/this.rowsPerPage),false,_123f);},invalidateNodes:function(){while(this.stack.length){this.destroyPage(this.popPage());}},createPageNode:function(){var p=document.createElement("div");html.attr(p,"role","presentation");p.style.position="absolute";p.style[this.grid.isLeftToRight()?"left":"right"]="0";return p;},getPageHeight:function(_1240){var ph=this.pageHeights[_1240];return (ph!==undefined?ph:this.defaultPageHeight);},pushPage:function(_1241){return this.stack.push(_1241);},popPage:function(){return this.stack.shift();},findPage:function(inTop){var i=0,h=0;for(var ph=0;i<this.pageCount;i++,h+=ph){ph=this.getPageHeight(i);if(h+ph>=inTop){break;}}this.page=i;this.pageTop=h;},buildPage:function(_1242,_1243,inPos){this.preparePage(_1242,_1243);this.positionPage(_1242,inPos);this.installPage(_1242);this.renderPage(_1242);this.pushPage(_1242);},needPage:function(_1244,inPos){var h=this.getPageHeight(_1244),oh=h;if(!this.pageExists(_1244)){this.buildPage(_1244,(!this.grid._autoHeight&&this.keepPages&&(this.stack.length>=this.keepPages)),inPos);h=this.updatePageHeight(_1244,true);}else{this.positionPage(_1244,inPos);}return h;},onscroll:function(){this.scroll(this.scrollboxNode.scrollTop);},scroll:function(inTop){this.grid.scrollTop=inTop;if(this.colCount){this.startPacify();this.findPage(inTop);var h=this.height;var b=this.getScrollBottom(inTop);for(var p=this.page,y=this.pageTop;(p<this.pageCount)&&((b<0)||(y<b));p++){y+=this.needPage(p,y);}this.firstVisibleRow=this.getFirstVisibleRow(this.page,this.pageTop,inTop);this.lastVisibleRow=this.getLastVisibleRow(p-1,y,b);if(h!=this.height){this.repositionPages(p-1);}this.endPacify();}},getScrollBottom:function(inTop){return (this.windowHeight>=0?inTop+this.windowHeight:-1);},processNodeEvent:function(e,_1245){var t=e.target;while(t&&(t!=_1245)&&t.parentNode&&(t.parentNode.parentNode!=_1245)){t=t.parentNode;}if(!t||!t.parentNode||(t.parentNode.parentNode!=_1245)){return false;}var page=t.parentNode;e.topRowIndex=page.pageIndex*this.rowsPerPage;e.rowIndex=e.topRowIndex+_1214(t);e.rowTarget=t;return true;},processEvent:function(e){return this.processNodeEvent(e,this.contentNode);},renderRow:function(_1246,_1247){},removeRow:function(_1248){},getDefaultPageNode:function(_1249){return this.getDefaultNodes()[_1249];},positionPageNode:function(_124a,inPos){},getPageNodePosition:function(_124b){return _124b.offsetTop;},invalidatePageNode:function(_124c,_124d){var p=_124d[_124c];if(p){delete _124d[_124c];this.removePage(_124c,p);_1216(p);p.innerHTML="";}return p;},getPageRow:function(_124e){return _124e*this.rowsPerPage;},getLastPageRow:function(_124f){return Math.min(this.rowCount,this.getPageRow(_124f+1))-1;},getFirstVisibleRow:function(_1250,_1251,_1252){if(!this.pageExists(_1250)){return 0;}var row=this.getPageRow(_1250);var nodes=this.getDefaultNodes();var rows=_121d(nodes[_1250]);for(var i=0,l=rows.length;i<l&&_1251<_1252;i++,row++){_1251+=rows[i].offsetHeight;}return (row?row-1:row);},getLastVisibleRow:function(_1253,_1254,_1255){if(!this.pageExists(_1253)){return 0;}var nodes=this.getDefaultNodes();var row=this.getLastPageRow(_1253);var rows=_121d(nodes[_1253]);for(var i=rows.length-1;i>=0&&_1254>_1255;i--,row--){_1254-=rows[i].offsetHeight;}return row+1;},findTopRow:function(_1256){var nodes=this.getDefaultNodes();var rows=_121d(nodes[this.page]);for(var i=0,l=rows.length,t=this.pageTop,h;i<l;i++){h=rows[i].offsetHeight;t+=h;if(t>=_1256){this.offset=h-(t-_1256);return i+this.page*this.rowsPerPage;}}return -1;},findScrollTop:function(inRow){var _1257=Math.floor(inRow/this.rowsPerPage);var t=0;var i,l;for(i=0;i<_1257;i++){t+=this.getPageHeight(i);}this.pageTop=t;this.page=_1257;this.needPage(_1257,this.pageTop);var nodes=this.getDefaultNodes();var rows=_121d(nodes[_1257]);var r=inRow-this.rowsPerPage*_1257;for(i=0,l=rows.length;i<l&&i<r;i++){t+=rows[i].offsetHeight;}return t;},dummy:0});});},"dijit/Calendar":function(){define("dijit/Calendar",["dojo/_base/array","dojo/date","dojo/date/locale","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/_base/event","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/sniff","./CalendarLite","./_Widget","./_CssStateMixin","./_TemplatedMixin","./form/DropDownButton"],function(array,date,local,_1258,_1259,_125a,event,_125b,keys,lang,has,_125c,_125d,_125e,_125f,_1260){var _1261=_1258("dijit.Calendar",[_125c,_125d,_125e],{cssStateNodes:{"decrementMonth":"dijitCalendarArrow","incrementMonth":"dijitCalendarArrow","previousYearLabelNode":"dijitCalendarPreviousYear","nextYearLabelNode":"dijitCalendarNextYear"},setValue:function(value){_125b.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",value);},_createMonthWidget:function(){return new _1261._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:lang.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode);},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onkeydown","_onKeyDown");this.connect(this.dateRowsNode,"onmouseover","_onDayMouseOver");this.connect(this.dateRowsNode,"onmouseout","_onDayMouseOut");this.connect(this.dateRowsNode,"onmousedown","_onDayMouseDown");this.connect(this.dateRowsNode,"onmouseup","_onDayMouseUp");},_onMonthSelect:function(_1262){var date=new this.dateClassObj(this.currentFocus);date.setDate(1);date.setMonth(_1262);var _1263=this.dateModule.getDaysInMonth(date);var _1264=this.currentFocus.getDate();date.setDate(Math.min(_1264,_1263));this._setCurrentFocusAttr(date);},_onDayMouseOver:function(evt){var node=_125a.contains(evt.target,"dijitCalendarDateLabel")?evt.target.parentNode:evt.target;if(node&&((node.dijitDateValue&&!_125a.contains(node,"dijitCalendarDisabledDate"))||node==this.previousYearLabelNode||node==this.nextYearLabelNode)){_125a.add(node,"dijitCalendarHoveredDate");this._currentNode=node;}},_onDayMouseOut:function(evt){if(!this._currentNode){return;}if(evt.relatedTarget&&evt.relatedTarget.parentNode==this._currentNode){return;}var cls="dijitCalendarHoveredDate";if(_125a.contains(this._currentNode,"dijitCalendarActiveDate")){cls+=" dijitCalendarActiveDate";}_125a.remove(this._currentNode,cls);this._currentNode=null;},_onDayMouseDown:function(evt){var node=evt.target.parentNode;if(node&&node.dijitDateValue&&!_125a.contains(node,"dijitCalendarDisabledDate")){_125a.add(node,"dijitCalendarActiveDate");this._currentNode=node;}},_onDayMouseUp:function(evt){var node=evt.target.parentNode;if(node&&node.dijitDateValue){_125a.remove(node,"dijitCalendarActiveDate");}},handleKey:function(evt){var _1265=-1,_1266,_1267=this.currentFocus;switch(evt.keyCode){case keys.RIGHT_ARROW:_1265=1;case keys.LEFT_ARROW:_1266="day";if(!this.isLeftToRight()){_1265*=-1;}break;case keys.DOWN_ARROW:_1265=1;case keys.UP_ARROW:_1266="week";break;case keys.PAGE_DOWN:_1265=1;case keys.PAGE_UP:_1266=evt.ctrlKey||evt.altKey?"year":"month";break;case keys.END:_1267=this.dateModule.add(_1267,"month",1);_1266="day";case keys.HOME:_1267=new this.dateClassObj(_1267);_1267.setDate(1);break;case keys.ENTER:case keys.SPACE:this.set("value",this.currentFocus);break;default:return true;}if(_1266){_1267=this.dateModule.add(_1267,_1266,_1265);}this._setCurrentFocusAttr(_1267);return false;},_onKeyDown:function(evt){if(!this.handleKey(evt)){event.stop(evt);}},onValueSelected:function(){},onChange:function(value){this.onValueSelected(value);},getClassForDate:function(){}});_1261._MonthDropDownButton=_1258("dijit.Calendar._MonthDropDownButton",_1260,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new _1261._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect});},_setMonthAttr:function(month){var _1268=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,month);this.dropDown.set("months",_1268);this.containerNode.innerHTML=(has("ie")==6?"":"<div class='dijitSpacer'>"+this.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+_1268[month.getMonth()]+"</div>";}});_1261._MonthDropDown=_1258("dijit.Calendar._MonthDropDown",[_125d,_125f],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' "+"data-dojo-attach-event='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(_1269){this.domNode.innerHTML=array.map(_1269,function(month,idx){return month?"<div class='dijitCalendarMonthLabel' month='"+idx+"'>"+month+"</div>":"";}).join("");},_onClick:function(evt){this.onChange(_1259.get(evt.target,"month"));},onChange:function(){},_onMenuHover:function(evt){_125a.toggle(evt.target,"dijitCalendarMonthLabelHover",evt.type=="mouseover");}});return _1261;});},"dijit/form/_ToggleButtonMixin":function(){define("dijit/form/_ToggleButtonMixin",["dojo/_base/declare","dojo/dom-attr"],function(_126a,_126b){return _126a("dijit.form._ToggleButtonMixin",null,{checked:false,_aria_attr:"aria-pressed",_onClick:function(evt){var _126c=this.checked;this._set("checked",!_126c);var ret=this.inherited(arguments);this.set("checked",ret?this.checked:_126c);return ret;},_setCheckedAttr:function(value,_126d){this._set("checked",value);var node=this.focusNode||this.domNode;_126b.set(node,"checked",!!value);if(value){node.setAttribute("checked","");}else{node.removeAttribute("checked");}node.setAttribute(this._aria_attr,String(value));this._handleOnChange(value,_126d);},reset:function(){this._hasBeenBlurred=false;this.set("checked",this.params.checked||false);}});});},"dojo/dnd/Container":function(){define(["../_base/array","../_base/declare","../_base/event","../_base/kernel","../_base/lang","../_base/window","../dom","../dom-class","../dom-construct","../Evented","../has","../on","../query","../ready","../touch","./common"],function(array,_126e,event,_126f,lang,win,dom,_1270,_1271,_1272,has,on,query,ready,touch,dnd){var _1273=_126e("dojo.dnd.Container",_1272,{skipForm:false,allowNested:false,constructor:function(node,_1274){this.node=dom.byId(node);if(!_1274){_1274={};}this.creator=_1274.creator||null;this.skipForm=_1274.skipForm;this.parent=_1274.dropParent&&dom.byId(_1274.dropParent);this.map={};this.current=null;this.containerState="";_1270.add(this.node,"dojoDndContainer");if(!(_1274&&_1274._skipStartup)){this.startup();}this.events=[on(this.node,touch.over,lang.hitch(this,"onMouseOver")),on(this.node,touch.out,lang.hitch(this,"onMouseOut")),on(this.node,"dragstart",lang.hitch(this,"onSelectStart")),on(this.node,"selectstart",lang.hitch(this,"onSelectStart"))];},creator:function(){},getItem:function(key){return this.map[key];},setItem:function(key,data){this.map[key]=data;},delItem:function(key){delete this.map[key];},forInItems:function(f,o){o=o||_126f.global;var m=this.map,e=dnd._empty;for(var i in m){if(i in e){continue;}f.call(o,m[i],i,this);}return o;},clearItems:function(){this.map={};},getAllNodes:function(){return query((this.allowNested?"":"> ")+".dojoDndItem",this.parent);},sync:function(){var map={};this.getAllNodes().forEach(function(node){if(node.id){var item=this.getItem(node.id);if(item){map[node.id]=item;return;}}else{node.id=dnd.getUniqueId();}var type=node.getAttribute("dndType"),data=node.getAttribute("dndData");map[node.id]={data:data||node.innerHTML,type:type?type.split(/\s*,\s*/):["text"]};},this);this.map=map;return this;},insertNodes:function(data,_1275,_1276){if(!this.parent.firstChild){_1276=null;}else{if(_1275){if(!_1276){_1276=this.parent.firstChild;}}else{if(_1276){_1276=_1276.nextSibling;}}}var i,t;if(_1276){for(i=0;i<data.length;++i){t=this._normalizedCreator(data[i]);this.setItem(t.node.id,{data:t.data,type:t.type});_1276.parentNode.insertBefore(t.node,_1276);}}else{for(i=0;i<data.length;++i){t=this._normalizedCreator(data[i]);this.setItem(t.node.id,{data:t.data,type:t.type});this.parent.appendChild(t.node);}}return this;},destroy:function(){array.forEach(this.events,function(_1277){_1277.remove();});this.clearItems();this.node=this.parent=this.current=null;},markupFactory:function(_1278,node,Ctor){_1278._skipStartup=true;return new Ctor(node,_1278);},startup:function(){if(!this.parent){this.parent=this.node;if(this.parent.tagName.toLowerCase()=="table"){var c=this.parent.getElementsByTagName("tbody");if(c&&c.length){this.parent=c[0];}}}this.defaultCreator=dnd._defaultCreator(this.parent);this.sync();},onMouseOver:function(e){var n=e.relatedTarget;while(n){if(n==this.node){break;}try{n=n.parentNode;}catch(x){n=null;}}if(!n){this._changeState("Container","Over");this.onOverEvent();}n=this._getChildByEvent(e);if(this.current==n){return;}if(this.current){this._removeItemClass(this.current,"Over");}if(n){this._addItemClass(n,"Over");}this.current=n;},onMouseOut:function(e){for(var n=e.relatedTarget;n;){if(n==this.node){return;}try{n=n.parentNode;}catch(x){n=null;}}if(this.current){this._removeItemClass(this.current,"Over");this.current=null;}this._changeState("Container","");this.onOutEvent();},onSelectStart:function(e){if(!this.skipForm||!dnd.isFormElement(e)){event.stop(e);}},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(type,_1279){var _127a="dojoDnd"+type;var state=type.toLowerCase()+"State";_1270.replace(this.node,_127a+_1279,_127a+this[state]);this[state]=_1279;},_addItemClass:function(node,type){_1270.add(node,"dojoDndItem"+type);},_removeItemClass:function(node,type){_1270.remove(node,"dojoDndItem"+type);},_getChildByEvent:function(e){var node=e.target;if(node){for(var _127b=node.parentNode;_127b;node=_127b,_127b=node.parentNode){if((_127b==this.parent||this.allowNested)&&_1270.contains(node,"dojoDndItem")){return node;}}}return null;},_normalizedCreator:function(item,hint){var t=(this.creator||this.defaultCreator).call(this,item,hint);if(!lang.isArray(t.type)){t.type=["text"];}if(!t.node.id){t.node.id=dnd.getUniqueId();}_1270.add(t.node,"dojoDndItem");return t;}});dnd._createNode=function(tag){if(!tag){return dnd._createSpan;}return function(text){return _1271.create(tag,{innerHTML:text});};};dnd._createTrTd=function(text){var tr=_1271.create("tr");_1271.create("td",{innerHTML:text},tr);return tr;};dnd._createSpan=function(text){return _1271.create("span",{innerHTML:text});};dnd._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};dnd._defaultCreator=function(node){var tag=node.tagName.toLowerCase();var c=tag=="tbody"||tag=="thead"?dnd._createTrTd:dnd._createNode(dnd._defaultCreatorNodes[tag]);return function(item,hint){var isObj=item&&lang.isObject(item),data,type,n;if(isObj&&item.tagName&&item.nodeType&&item.getAttribute){data=item.getAttribute("dndData")||item.innerHTML;type=item.getAttribute("dndType");type=type?type.split(/\s*,\s*/):["text"];n=item;}else{data=(isObj&&item.data)?item.data:item;type=(isObj&&item.type)?item.type:["text"];n=(hint=="avatar"?dnd._createSpan:c)(String(data));}if(!n.id){n.id=dnd.getUniqueId();}return {node:n,data:data,type:type};};};return _1273;});},"dojox/date/islamic":function(){define("dojox/date/islamic",["..","dojo/_base/lang","dojo/date","./islamic/Date"],function(dojox,lang,dd,IDate){var _127c=lang.getObject("date.islamic",true,dojox);_127c.getDaysInMonth=function(month){return month.getDaysInIslamicMonth(month.getMonth(),month.getFullYear());};_127c.compare=function(date1,date2,_127d){if(date1 instanceof IDate){date1=date1.toGregorian();}if(date2 instanceof IDate){date2=date2.toGregorian();}return dd.compare.apply(null,arguments);};_127c.add=function(date,_127e,_127f){var _1280=new IDate(date);switch(_127e){case "day":_1280.setDate(date.getDate()+_127f);break;case "weekday":var day=date.getDay();if(((day+_127f)<5)&&((day+_127f)>0)){_1280.setDate(date.getDate()+_127f);}else{var _1281=0,_1282=0;if(day==5){day=4;_1282=(_127f>0)?-1:1;}else{if(day==6){day=4;_1282=(_127f>0)?-2:2;}}var add=(_127f>0)?(5-day-1):-day;var _1283=_127f-add;var div=parseInt(_1283/5);if(_1283%5!=0){_1281=(_127f>0)?2:-2;}_1281=_1281+div*7+_1283%5+add;_1280.setDate(date.getDate()+_1281+_1282);}break;case "year":_1280.setFullYear(date.getFullYear()+_127f);break;case "week":_127f*=7;_1280.setDate(date.getDate()+_127f);break;case "month":var month=date.getMonth();_1280.setMonth(month+_127f);break;case "hour":_1280.setHours(date.getHours()+_127f);break;case "minute":_1280._addMinutes(_127f);break;case "second":_1280._addSeconds(_127f);break;case "millisecond":_1280._addMilliseconds(_127f);break;}return _1280;};_127c.difference=function(date1,date2,_1284){date2=date2||new IDate();_1284=_1284||"day";var _1285=date2.getFullYear()-date1.getFullYear();var delta=1;switch(_1284){case "weekday":var days=Math.round(_127c.difference(date1,date2,"day"));var weeks=parseInt(_127c.difference(date1,date2,"week"));var mod=days%7;if(mod==0){days=weeks*5;}else{var adj=0;var aDay=date1.getDay();var bDay=date2.getDay();weeks=parseInt(days/7);mod=days%7;var _1286=new IDate(date1);_1286.setDate(_1286.getDate()+(weeks*7));var _1287=_1286.getDay();if(days>0){switch(true){case aDay==5:adj=-1;break;case aDay==6:adj=0;break;case bDay==5:adj=-1;break;case bDay==6:adj=-2;break;case (_1287+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==5:adj=0;break;case aDay==6:adj=1;break;case bDay==5:adj=2;break;case bDay==6:adj=1;break;case (_1287+mod)<0:adj=2;}}}days+=adj;days-=(weeks*2);}delta=days;break;case "year":delta=_1285;break;case "month":var _1288=(date2.toGregorian()>date1.toGregorian())?date2:date1;var _1289=(date2.toGregorian()>date1.toGregorian())?date1:date2;var _128a=_1288.getMonth();var _128b=_1289.getMonth();if(_1285==0){delta=_1288.getMonth()-_1289.getMonth();}else{delta=12-_128b;delta+=_128a;var i=_1289.getFullYear()+1;var e=_1288.getFullYear();for(i;i<e;i++){delta+=12;}}if(date2.toGregorian()<date1.toGregorian()){delta=-delta;}break;case "week":delta=parseInt(_127c.difference(date1,date2,"day")/7);break;case "day":delta/=24;case "hour":delta/=60;case "minute":delta/=60;case "second":delta/=1000;case "millisecond":delta*=date2.toGregorian().getTime()-date1.toGregorian().getTime();}return Math.round(delta);};return _127c;});},"dijit/_Widget":function(){define("dijit/_Widget",["dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/ready","./registry","./_WidgetBase","./_OnDijitClickMixin","./_FocusMixin","dojo/uacss","./hccss"],function(_128c,_128d,_128e,_128f,has,_1290,lang,query,ready,_1291,_1292,_1293,_1294){function _1295(){};function _1296(_1297){return function(obj,event,scope,_1298){if(obj&&typeof event=="string"&&obj[event]==_1295){return obj.on(event.substring(2).toLowerCase(),lang.hitch(scope,_1298));}return _1297.apply(_128e,arguments);};};_128c.around(_128e,"connect",_1296);if(_1290.connect){_128c.around(_1290,"connect",_1296);}var _1299=_128f("dijit._Widget",[_1292,_1293,_1294],{onClick:_1295,onDblClick:_1295,onKeyDown:_1295,onKeyPress:_1295,onKeyUp:_1295,onMouseDown:_1295,onMouseMove:_1295,onMouseOut:_1295,onMouseOver:_1295,onMouseLeave:_1295,onMouseEnter:_1295,onMouseUp:_1295,constructor:function(_129a){this._toConnect={};for(var name in _129a){if(this[name]===_1295){this._toConnect[name.replace(/^on/,"").toLowerCase()]=_129a[name];delete _129a[name];}}},postCreate:function(){this.inherited(arguments);for(var name in this._toConnect){this.on(name,this._toConnect[name]);}delete this._toConnect;},on:function(type,func){if(this[this._onMap(type)]===_1295){return _128e.connect(this.domNode,type.toLowerCase(),this,func);}return this.inherited(arguments);},_setFocusedAttr:function(val){this._focused=val;this._set("focused",val);},setAttribute:function(attr,value){_1290.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(attr,value);},attr:function(name,value){if(_128d.isDebug){var _129b=arguments.callee._ach||(arguments.callee._ach={}),_129c=(arguments.callee.caller||"unknown caller").toString();if(!_129b[_129c]){_1290.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+_129c,"","2.0");_129b[_129c]=true;}}var args=arguments.length;if(args>=2||typeof name==="object"){return this.set.apply(this,arguments);}else{return this.get(name);}},getDescendants:function(){_1290.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?query("[widgetId]",this.containerNode).map(_1291.byNode):[];},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){},onClose:function(){return true;}});if(has("dijit-legacy-requires")){ready(0,function(){var _129d=["dijit/_base"];require(_129d);});}return _1299;});},"dojo/touch":function(){define(["./_base/kernel","./aspect","./dom","./_base/lang","./on","./has","./mouse","./domReady","./_base/window"],function(dojo,_129e,dom,lang,on,has,mouse,_129f,win){var _12a0=navigator.msPointerEnabled;var _12a1;function _12a2(_12a3,_12a4,_12a5){if(_12a0&&_12a5){return function(node,_12a6){return on(node,_12a5,_12a6);};}else{if(has("touch")){return function(node,_12a7){var _12a8=on(node,_12a4,_12a7),_12a9=on(node,_12a3,function(evt){if(!_12a1||(new Date()).getTime()>_12a1+1000){_12a7.call(this,evt);}});return {remove:function(){_12a8.remove();_12a9.remove();}};};}else{return function(node,_12aa){return on(node,_12a3,_12aa);};}}};var _12ab,_12ac,_12ad;if(has("touch")&&!_12a0){_129f(function(){_12ad=win.body();win.doc.addEventListener("touchstart",function(event){_12a1=(new Date()).getTime();var _12ae=_12ad;_12ad=event.target;if(_12ad.dojoElementFromPoint){_12ad=_12ad.dojoElementFromPoint(event.changedTouches[0].clientX,event.changedTouches[0].clientY);}if(_12ae){on.emit(_12ae,"dojotouchout",{target:_12ae,relatedTarget:_12ad,bubbles:true});}if(_12ad){on.emit(_12ad,"dojotouchover",{target:_12ad,relatedTarget:_12ae,bubbles:true});}},true);on(win.doc,"touchmove",function(event){_12a1=(new Date()).getTime();_12ac=event;var _12af=win.doc.elementFromPoint(event.clientX,event.clientY);if(_12af){var _12b0=_12af;if(_12af.dojoElementFromPoint){_12af=_12af.dojoElementFromPoint(event.clientX,event.clientY);}if(_12ad!==_12af){if(_12ad){on.emit(_12b0,"dojotouchout",{target:_12ad,relatedTarget:_12af,bubbles:true});}if(_12af){on.emit(_12b0,"dojotouchover",{target:_12af,relatedTarget:_12ad,bubbles:true});}_12ad=_12af;}on.emit(_12b0,"dojotouchmove",{target:_12af,bubbles:true});}});on(win.doc,"touchend",function(event){var node=win.doc.elementFromPoint(event.clientX,event.clientY);var _12b1=node;if(node.dojoElementFromPoint){node=node.dojoElementFromPoint(event.clientX,event.clientY);}if(node){on.emit(_12b1,"dojotouchend",lang.delegate(event,{target:node,bubbles:true}));}});});_12ab=function(node,_12b2){return on(node,"dojotouchmove",function(_12b3){_12b2(lang.delegate(_12ac,{target:_12b3.target,preventDefault:function(){_12ac.preventDefault();},stopPropagation:function(){_12b3.stopPropagation();}}));});};}var touch={press:_12a2("mousedown","touchstart","MSPointerDown"),move:_12a2("mousemove",_12ab,"MSPointerMove"),release:_12a2("mouseup","dojotouchend","MSPointerUp"),cancel:_12a2(mouse.leave,"touchcancel",has("touch")?"MSPointerCancel":null),over:_12a2("mouseover","dojotouchover","MSPointerOver"),out:_12a2("mouseout","dojotouchout","MSPointerOut"),enter:mouse._eventHandler(_12a2("mouseover","dojotouchover","MSPointerOver")),leave:mouse._eventHandler(_12a2("mouseout","dojotouchout","MSPointerOut"))};1&&(dojo.touch=touch);return touch;});},"dojox/grid/DataSelection":function(){define("dojox/grid/DataSelection",["dojo/_base/declare","./_SelectionPreserver","./Selection"],function(_12b4,_12b5,_12b6){return _12b4("dojox.grid.DataSelection",_12b6,{constructor:function(grid){if(grid.keepSelection){this.preserver=new _12b5(this);}},destroy:function(){if(this.preserver){this.preserver.destroy();}},getFirstSelected:function(){var idx=_12b6.prototype.getFirstSelected.call(this);if(idx==-1){return null;}return this.grid.getItem(idx);},getNextSelected:function(_12b7){var _12b8=this.grid.getItemIndex(_12b7);var idx=_12b6.prototype.getNextSelected.call(this,_12b8);if(idx==-1){return null;}return this.grid.getItem(idx);},getSelected:function(){var _12b9=[];for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){_12b9.push(this.grid.getItem(i));}}return _12b9;},addToSelection:function(_12ba){if(this.mode=="none"){return;}var idx=null;if(typeof _12ba=="number"||typeof _12ba=="string"){idx=_12ba;}else{idx=this.grid.getItemIndex(_12ba);}_12b6.prototype.addToSelection.call(this,idx);},deselect:function(_12bb){if(this.mode=="none"){return;}var idx=null;if(typeof _12bb=="number"||typeof _12bb=="string"){idx=_12bb;}else{idx=this.grid.getItemIndex(_12bb);}_12b6.prototype.deselect.call(this,idx);},deselectAll:function(_12bc){var idx=null;if(_12bc||typeof _12bc=="number"){if(typeof _12bc=="number"||typeof _12bc=="string"){idx=_12bc;}else{idx=this.grid.getItemIndex(_12bc);}_12b6.prototype.deselectAll.call(this,idx);}else{this.inherited(arguments);}}});});},"dijit/_editor/selection":function(){define("dijit/_editor/selection",["dojo/dom","dojo/_base/lang","dojo/sniff","dojo/_base/window","../main"],function(dom,lang,has,win,dijit){var _12bd={getType:function(){if(win.doc.getSelection){var stype="text";var oSel;try{oSel=win.global.getSelection();}catch(e){}if(oSel&&oSel.rangeCount==1){var _12be=oSel.getRangeAt(0);if((_12be.startContainer==_12be.endContainer)&&((_12be.endOffset-_12be.startOffset)==1)&&(_12be.startContainer.nodeType!=3)){stype="control";}}return stype;}else{return win.doc.selection.type.toLowerCase();}},getSelectedText:function(){if(win.doc.getSelection){var _12bf=win.global.getSelection();return _12bf?_12bf.toString():"";}else{if(dijit._editor.selection.getType()=="control"){return null;}return win.doc.selection.createRange().text;}},getSelectedHtml:function(){if(win.doc.getSelection){var _12c0=win.global.getSelection();if(_12c0&&_12c0.rangeCount){var i;var html="";for(i=0;i<_12c0.rangeCount;i++){var frag=_12c0.getRangeAt(i).cloneContents();var div=win.doc.createElement("div");div.appendChild(frag);html+=div.innerHTML;}return html;}return null;}else{if(dijit._editor.selection.getType()=="control"){return null;}return win.doc.selection.createRange().htmlText;}},getSelectedElement:function(){if(dijit._editor.selection.getType()=="control"){if(win.doc.getSelection){var _12c1=win.global.getSelection();return _12c1.anchorNode.childNodes[_12c1.anchorOffset];}else{var range=win.doc.selection.createRange();if(range&&range.item){return win.doc.selection.createRange().item(0);}}}return null;},getParentElement:function(){if(dijit._editor.selection.getType()=="control"){var p=this.getSelectedElement();if(p){return p.parentNode;}}else{if(win.doc.getSelection){var _12c2=win.global.getSelection();if(_12c2){var node=_12c2.anchorNode;while(node&&(node.nodeType!=1)){node=node.parentNode;}return node;}}else{var r=win.doc.selection.createRange();r.collapse(true);return r.parentElement();}}return null;},hasAncestorElement:function(_12c3){return this.getAncestorElement.apply(this,arguments)!=null;},getAncestorElement:function(_12c4){var node=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(node,arguments);},isTag:function(node,tags){if(node&&node.tagName){var _12c5=node.tagName.toLowerCase();for(var i=0;i<tags.length;i++){var _12c6=String(tags[i]).toLowerCase();if(_12c5==_12c6){return _12c6;}}}return "";},getParentOfType:function(node,tags){while(node){if(this.isTag(node,tags).length){return node;}node=node.parentNode;}return null;},collapse:function(_12c7){if(win.doc.getSelection){var _12c8=win.global.getSelection();if(_12c8.removeAllRanges){if(_12c7){_12c8.collapseToStart();}else{_12c8.collapseToEnd();}}else{_12c8.collapse(_12c7);}}else{var range=win.doc.selection.createRange();range.collapse(_12c7);range.select();}},remove:function(){var sel=win.doc.selection;if(win.doc.getSelection){sel=win.global.getSelection();sel.deleteFromDocument();return sel;}else{if(sel.type.toLowerCase()!="none"){sel.clear();}return sel;}},selectElementChildren:function(_12c9,_12ca){var doc=win.doc;var range;_12c9=dom.byId(_12c9);if(win.doc.getSelection){var _12cb=win.global.getSelection();if(has("opera")){if(_12cb.rangeCount){range=_12cb.getRangeAt(0);}else{range=doc.createRange();}range.setStart(_12c9,0);range.setEnd(_12c9,(_12c9.nodeType==3)?_12c9.length:_12c9.childNodes.length);_12cb.addRange(range);}else{_12cb.selectAllChildren(_12c9);}}else{range=_12c9.ownerDocument.body.createTextRange();range.moveToElementText(_12c9);if(!_12ca){try{range.select();}catch(e){}}}},selectElement:function(_12cc,_12cd){var range;_12cc=dom.byId(_12cc);var doc=_12cc.ownerDocument;var _12ce=win.global;if(doc.getSelection){var _12cf=_12ce.getSelection();range=doc.createRange();if(_12cf.removeAllRanges){if(has("opera")){if(_12cf.getRangeAt(0)){range=_12cf.getRangeAt(0);}}range.selectNode(_12cc);_12cf.removeAllRanges();_12cf.addRange(range);}}else{try{var tg=_12cc.tagName?_12cc.tagName.toLowerCase():"";if(tg==="img"||tg==="table"){range=win.body(doc).createControlRange();}else{range=win.body(doc).createRange();}range.addElement(_12cc);if(!_12cd){range.select();}}catch(e){this.selectElementChildren(_12cc,_12cd);}}},inSelection:function(node){if(node){var _12d0;var doc=win.doc;var range;if(win.doc.getSelection){var sel=win.global.getSelection();if(sel&&sel.rangeCount>0){range=sel.getRangeAt(0);}if(range&&range.compareBoundaryPoints&&doc.createRange){try{_12d0=doc.createRange();_12d0.setStart(node,0);if(range.compareBoundaryPoints(range.START_TO_END,_12d0)===1){return true;}}catch(e){}}}else{range=doc.selection.createRange();try{_12d0=node.ownerDocument.body.createControlRange();if(_12d0){_12d0.addElement(node);}}catch(e1){try{_12d0=node.ownerDocument.body.createTextRange();_12d0.moveToElementText(node);}catch(e2){}}if(range&&_12d0){if(range.compareEndPoints("EndToStart",_12d0)===1){return true;}}}}return false;}};lang.setObject("dijit._editor.selection",_12bd);return _12bd;});},"dojox/grid/_SelectionPreserver":function(){define("dojox/grid/_SelectionPreserver",["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array"],function(_12d1,_12d2,lang,array){return _12d1("dojox.grid._SelectionPreserver",null,{constructor:function(_12d3){this.selection=_12d3;var grid=this.grid=_12d3.grid;this.reset();this._connects=[_12d2.connect(grid,"_setStore",this,"reset"),_12d2.connect(grid,"_addItem",this,"_reSelectById"),_12d2.connect(_12d3,"onSelected",lang.hitch(this,"_selectById",true)),_12d2.connect(_12d3,"onDeselected",lang.hitch(this,"_selectById",false)),_12d2.connect(_12d3,"deselectAll",this,"reset")];},destroy:function(){this.reset();array.forEach(this._connects,_12d2.disconnect);delete this._connects;},reset:function(){this._selectedById={};},_reSelectById:function(item,index){if(item&&this.grid._hasIdentity){this.selection.selected[index]=this._selectedById[this.grid.store.getIdentity(item)];}},_selectById:function(_12d4,_12d5){if(this.selection.mode=="none"||!this.grid._hasIdentity){return;}var item=_12d5,g=this.grid;if(typeof _12d5=="number"||typeof _12d5=="string"){var entry=g._by_idx[_12d5];item=entry&&entry.item;}if(item){this._selectedById[g.store.getIdentity(item)]=!!_12d4;}return item;}});});},"esri/tasks/DensifyParameters":function(){define("esri/tasks/DensifyParameters",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/jsonUtils"],function(_12d6,lang,array,_12d7,has,_12d8,_12d9){var _12da=_12d6(null,{declaredClass:"esri.tasks.DensifyParameters",geometries:null,geodesic:null,lengthUnit:null,maxSegmentLength:null,toJson:function(){var geoms=array.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=_12d7.toJson({geometryType:_12d9.getJsonType(this.geometries[0]),geometries:geoms});json.sr=_12d7.toJson(this.geometries[0].spatialReference.toJson());}if(this.geodesic){json.geodesic=this.geodesic;}if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.maxSegmentLength){json.maxSegmentLength=this.maxSegmentLength;}return json;}});if(has("extend-esri")){lang.setObject("tasks.DensifyParameters",_12da,_12d8);}return _12da;});},"esri/layers/FeatureLayer":function(){define("esri/layers/FeatureLayer",["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/_base/Deferred","dojo/date/locale","dojo/sniff","dojo/io-query","dojo/dom-construct","dojo/i18n","esri/kernel","esri/lang","esri/request","esri/deferredUtils","esri/SpatialReference","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/symbols/jsonUtils","esri/renderers/SimpleRenderer","esri/renderers/UniqueValueRenderer","esri/renderers/jsonUtils","esri/tasks/QueryTask","esri/tasks/query","esri/tasks/FeatureSet","esri/geometry/Extent","esri/geometry/jsonUtils","esri/geometry/normalizeUtils","esri/layers/GraphicsLayer","esri/layers/Field","esri/layers/TimeInfo","esri/layers/FeatureType","esri/layers/FeatureTemplate","esri/layers/FeatureEditResult","esri/layers/SnapshotMode","esri/layers/OnDemandMode","esri/layers/SelectionMode","esri/layers/TrackManager","dojo/i18n!esri/nls/jsapi","dojo/has!extend-esri?esri/layers/agscommon"],function(_12db,_12dc,lang,array,_12dd,_12de,_12df,has,ioq,_12e0,i18n,_12e1,_12e2,_12e3,_12e4,_12e5,_12e6,_12e7,_12e8,_12e9,_12ea,_12eb,_12ec,_12ed,Query,_12ee,_12ef,_12f0,_12f1,_12f2,Field,_12f3,_12f4,_12f5,_12f6,_12f7,_12f8,_12f9,_12fa){var _12fb=_12db(_12f2,{declaredClass:"esri.layers.FeatureLayer",invalidParams:"query contains one or more unsupported parameters",constructor:function(url,_12fc){this.i18n=i18n.getLocalization("esri","jsapi");this._outFields=_12fc&&_12fc.outFields;this._loadCallback=_12fc&&_12fc.loadCallback;var patch=_12fc&&_12fc._usePatch;this._usePatch=(patch===null||patch===undefined)?true:patch;this._trackIdField=_12fc&&_12fc.trackIdField;this.objectIdField=_12fc&&_12fc.objectIdField;this._maxOffset=_12fc&&_12fc.maxAllowableOffset;this._optEditable=_12fc&&_12fc.editable;this._optAutoGen=_12fc&&_12fc.autoGeneralize;this.editSummaryCallback=_12fc&&_12fc.editSummaryCallback;this.userId=_12fc&&_12fc.userId;this.userIsAdmin=_12fc&&_12fc.userIsAdmin;this.useMapTime=(_12fc&&_12fc.hasOwnProperty("useMapTime"))?(!!_12fc.useMapTime):true;this.source=_12fc&&_12fc.source;this.gdbVersion=_12fc&&_12fc.gdbVersion;this._selectedFeatures={};this._selectedFeaturesArr=[];this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();var ctor=this.constructor,mode=this.mode=(_12e2.isDefined(_12fc&&_12fc.mode)?_12fc.mode:ctor.MODE_ONDEMAND);switch(mode){case ctor.MODE_SNAPSHOT:this._mode=new _12f7(this);this._isSnapshot=true;break;case ctor.MODE_ONDEMAND:this._tileWidth=(_12fc&&_12fc.tileWidth)||512;this._tileHeight=(_12fc&&_12fc.tileHeight)||512;this._mode=new _12f8(this);var _12fd=_12fc&&_12fc.latticeTiling;this.latticeTiling=_12fd;break;case ctor.MODE_SELECTION:this._mode=new _12f9(this);this._isSelOnly=true;break;}this._initLayer=lang.hitch(this,this._initLayer);this._selectHandler=lang.hitch(this,this._selectHandler);this._editable=false;if(lang.isObject(url)&&url.layerDefinition){var json=url;this._collection=true;this.mode=ctor.MODE_SNAPSHOT;this._initLayer(json);return this;}this._task=new _12ed(this.url,{source:this.source,gdbVersion:this.gdbVersion});var _12fe=this._url.path;this._fserver=false;if(_12fe.search(/\/FeatureServer\//i)!==-1){this._fserver=true;}var _12ff=_12fc&&_12fc.resourceInfo;if(_12ff){this._initLayer(_12ff);}else{if(this.source){var layer={source:this.source.toJson()};this._url.query=lang.mixin(this._url.query,{layer:_12dd.toJson(layer)});}if(this.gdbVersion){this._url.query=lang.mixin(this._url.query,{gdbVersion:this.gdbVersion});}_12e3({url:_12fe,content:lang.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});}},_initLayer:function(_1300,io){if(_1300||io){this._json=_1300;this._findCredential();var ssl=(this.credential&&this.credential.ssl)||(_1300&&_1300._ssl);if(ssl){this._useSSL();this._task._useSSL();}if(this._collection){this._mode=new _12f7(this);this._isSnapshot=true;this._featureSet=_1300.featureSet;this._nextId=_1300.nextObjectId;_1300=_1300.layerDefinition;}if(_1300.hasOwnProperty("capabilities")){var _1301=(this.capabilities=_1300.capabilities);if(_1301&&_1301.toLowerCase().indexOf("editing")!==-1){this._editable=true;}else{this._editable=false;}}else{if(!this._collection){this._editable=this._fserver;}}if(_12e2.isDefined(this._optEditable)){this._editable=this._optEditable;delete this._optEditable;}this._json=_12dd.toJson(this._json);if(this.isEditable()){delete this._maxOffset;}else{if(this.mode!==this.constructor.MODE_SNAPSHOT&&((_1300.geometryType==="esriGeometryPolyline")||(_1300.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=_12e2.isDefined(this._optAutoGen)?this._optAutoGen:(this.mode===this.constructor.MODE_ONDEMAND);delete this._optAutoGen;}}var _1302=_1300.effectiveMinScale||_1300.minScale,_1303=_1300.effectiveMaxScale||_1300.maxScale;if(!this._hasMin&&_1302){this.setMinScale(_1302);}if(!this._hasMax&&_1303){this.setMaxScale(_1303);}this.layerId=_1300.id;this.name=_1300.name;this.description=_1300.description;this.copyright=_1300.copyrightText;this.type=_1300.type;this.geometryType=_1300.geometryType;this.displayField=_1300.displayField;this.defaultDefinitionExpression=_1300.definitionExpression;this.fullExtent=new _12ef(_1300.extent);this.initialExtent=new _12ef(this.fullExtent.toJson());if(this.fullExtent.spatialReference){this.spatialReference=new _12e5(this.fullExtent.spatialReference.toJson());}this.defaultVisibility=_1300.defaultVisibility;if((this.geometryType==="esriGeometryPoint")||(this.geometryType==="esriGeometryMultipoint")){this.latticeTiling=false;}this.indexedFields=_1300.indexedFields;this.maxRecordCount=_1300.maxRecordCount;this.canModifyLayer=_1300.canModifyLayer;this.supportsStatistics=_1300.supportsStatistics;this.supportsAdvancedQueries=_1300.supportsAdvancedQueries;this.hasLabels=_1300.hasLabels;this.canScaleSymbols=_1300.canScaleSymbols;this.supportsRollbackOnFailure=_1300.supportsRollbackOnFailure;this.syncCanReturnChanges=_1300.syncCanReturnChanges;this.isDataVersioned=_1300.isDataVersioned;this.editFieldsInfo=_1300.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=_1300.ownershipBasedAccessControlForFeatures;if(this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures){this.creatorField=this.editFieldsInfo.creatorField;}this.relationships=_1300.relationships;this.allowGeometryUpdates=_12e2.isDefined(_1300.allowGeometryUpdates)?_1300.allowGeometryUpdates:true;this._isTable=(this.type==="Table");var _1304=(this.fields=[]),_1305=_1300.fields,i;for(i=0;i<_1305.length;i++){_1304.push(new Field(_1305[i]));}if(!this.objectIdField){this.objectIdField=_1300.objectIdField;if(!this.objectIdField){_1305=_1300.fields;for(i=0;i<_1305.length;i++){var field=_1305[i];if(field.type==="esriFieldTypeOID"){this.objectIdField=field.name;break;}}}if(!this.objectIdField){console.debug("esri.layers.FeatureLayer: "+_12e2.substitute({url:this.url},"objectIdField is not set [url: ${url}]"));}}if(!_12e2.isDefined(this._nextId)){var _1306=this.objectIdField,maxId=-1;if(this._collection&&_1306){var fset=this._featureSet,_1307=fset&&fset.features,il=_1307?_1307.length:0,oid,attr;for(i=0;i<il;i++){attr=_1307[i].attributes;oid=attr&&attr[_1306];if(oid>maxId){maxId=oid;}}}this._nextId=(maxId+1);}this.globalIdField=_1300.globalIdField;var _1308=(this.typeIdField=_1300.typeIdField),_1309;if(_1308){_1309=!this._getField(_1308)&&this._getField(_1308,true);if(_1309){this.typeIdField=_1309.name;}}this.visibilityField=_1300.visibilityField;var _130a=_1300.defaultSymbol;if(_130a){this.defaultSymbol=_12e9.fromJson(_130a);}var _130b=this.types=[],types=_1300.types,fType,_130c,_130d,_130e=this.editFieldsInfo,_130f=_130e&&_130e.creatorField,_1310=_130e&&_130e.editorField,fix=(_130f||_1310),_1311=[];if(types){for(i=0;i<types.length;i++){fType=new _12f4(types[i]);_130c=fType.templates;if(fix&&_130c&&_130c.length){_1311=_1311.concat(_130c);}_130b.push(fType);}}var _1312=_1300.templates,_1313,_1314=this.templates=[];if(_1312){for(i=0;i<_1312.length;i++){_1313=new _12f5(_1312[i]);if(fix){_1311.push(_1313);}_1314.push(_1313);}}for(i=0;i<_1311.length;i++){_130d=lang.getObject("prototype.attributes",false,_1311[i]);if(_130d){if(_130f){delete _130d[_130f];}if(_1310){delete _130d[_1310];}}}var _1315=_1300.timeInfo;if(_1315){this.timeInfo=new _12f3(_1315);this._startTimeField=_1315.startTimeField;this._endTimeField=_1315.endTimeField;if(this._startTimeField&&this._endTimeField){this._twoTimeFields=true;}if(this._trackIdField){_1315.trackIdField=this._trackIdField;}else{this._trackIdField=_1315.trackIdField;}}this.hasAttachments=(!this._collection&&_1300.hasAttachments)?true:false;this.htmlPopupType=_1300.htmlPopupType;var _1316=_1300.drawingInfo,_1317;if(!this.renderer){if(_1316&&_1316.renderer){_1317=_1316.renderer;this.setRenderer(_12ec.fromJson(_1317));if(_1317.type==="classBreaks"){this.renderer.setMaxInclusive(true);}if(!this._collection){var _1318=_1317.type,_1319=[];_1317=this.renderer;switch(_1318){case "simple":_1319.push(_1317.symbol);break;case "uniqueValue":case "classBreaks":_1319.push(_1317.defaultSymbol);_1319=_1319.concat(array.map(_1317.infos,function(info){return info.symbol;}));break;}_1319=array.filter(_1319,_12e2.isDefined);var _131a=this._url.path+"/images/",token=this._getToken();array.forEach(_1319,function(sym){var url=sym.url;if(url){if((url.search(/https?\:/)===-1)&&(url.indexOf("data:")===-1)){sym.url=_131a+url;}if(token&&sym.url.search(/https?\:/)!==-1){sym.url+=("?token="+token);}}});}}else{if(_130a){types=this.types;if(types.length>0){_1317=new _12eb(this.defaultSymbol,this.typeIdField);array.forEach(types,function(type){_1317.addValue(type.id,type.symbol);});}else{_1317=new _12ea(this.defaultSymbol);}this.setRenderer(_1317);}else{if(!this._isTable){var _131b;switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":_131b=new _12e6();break;case "esriGeometryPolyline":_131b=new _12e7();break;case "esriGeometryPolygon":_131b=new _12e8();break;}this.setRenderer(_131b?new _12ea(_131b):null);}}}}var _131c=(_1316&&_1316.transparency)||0;if(!_12e2.isDefined(this.opacity)&&_131c>0){this.opacity=1-(_131c/100);}this.version=_1300.currentVersion;if(!this.version){var ver;if("capabilities" in _1300||"drawingInfo" in _1300||"hasAttachments" in _1300||"htmlPopupType" in _1300||"relationships" in _1300||"timeInfo" in _1300||"typeIdField" in _1300||"types" in _1300){ver=10;}else{ver=9.3;}this.version=ver;}if((has("ie")||has("safari"))&&this.isEditable()&&this.version<10.02){this._ts=true;}this.loaded=true;this._fixRendererFields();this._checkFields();this._updateCaps();var _131d=function(){this.onLoad(this);var _131e=this._loadCallback;if(_131e){delete this._loadCallback;_131e(this);}};if(this._collection){this._fireUpdateStart();var _131f=this._featureSet;delete this._featureSet;this._mode._drawFeatures(new _12ee(_131f));this._fcAdded=true;_131d.call(this);}else{this._forceIdentity(_131d);}}},setRenderer:function(ren){this.inherited("setRenderer",arguments);var _1320=this.renderer;if(_1320){this._ager=(_1320.declaredClass.indexOf("TemporalRenderer")!==-1&&_1320.observationAger&&_1320.observationRenderer);var _1321=array.filter([_1320,_1320.observationRenderer,_1320.latestObservationRenderer,_1320.trackRenderer],_12e2.isDefined);var _1322=[];array.forEach(_1321,function(rnd){if(!lang.isFunction(rnd.attributeField)){_1322.push(rnd.attributeField);}_1322.push(rnd.attributeField2);_1322.push(rnd.attributeField3);},this);this._rendererFields=array.filter(_1322,_12e2.isDefined);}else{this._ager=false;this._rendererFields=[];}if(this.loaded&&this._rendererFields.length>0){this._fixRendererFields();this._checkFields(this._rendererFields);}if(this.loaded&&this._collection){this._typesDirty=true;}},_setMap:function(map){var div=this.inherited(arguments),mode=this._mode;if(mode){mode.initialize(map);}return div;},_unsetMap:function(map){var mode=this._mode;if(mode){mode.suspend();}if(this._trackManager){this._trackManager.destroy();this._trackManager=null;}_12dc.disconnect(this._zoomConnect);this._zoomConnect=null;this._toggleTime(false);this.inherited("_unsetMap",arguments);},refresh:function(){var mode=this._mode;if(mode){mode.refresh();}},setEditable:function(_1323){if(!this._collection){console.log("FeatureLayer:setEditable - this functionality is not yet supported for layer in a feature service");return this;}if(!this.loaded){this._optEditable=_1323;return this;}var _1324=this._editable;this._editable=_1323;this._updateCaps();if(_1324!==_1323){this.onCapabilitiesChange();}return this;},getEditCapabilities:function(_1325){var _1326={"canCreate":false,"canUpdate":false,"canDelete":false};if(!this.loaded||!this.isEditable()){return _1326;}var _1327=_1325&&_1325.feature,_1328=_1325&&_1325.userId,caps=array.map((this.capabilities?this.capabilities.toLowerCase().split(","):[]),lang.trim),_1329=array.indexOf(caps,"editing")>-1,_132a=_1329&&(array.indexOf(caps,"create")>-1),_132b=_1329&&(array.indexOf(caps,"update")>-1),_132c=_1329&&(array.indexOf(caps,"delete")>-1),_132d=this.ownershipBasedAccessControlForFeatures,_132e=this.editFieldsInfo,_132f=_132e&&_132e.creatorField,realm=_132e&&_132e.realm,_1330=_1327&&_1327.attributes,_1331=(_1330&&_132f)?_1330[_132f]:undefined,_1332,_1333=!!this.userIsAdmin,_1334=!_132d||_1333||!!(_132d.allowOthersToUpdate||_132d.allowUpdateToOthers),_1335=!_132d||_1333||!!(_132d.allowOthersToDelete||_132d.allowDeleteToOthers);if(_1333||(_1329&&!(_132a||_132b||_132c))){_132a=_132b=_132c=true;}_1332={"canCreate":_132a,"canUpdate":_132b,"canDelete":_132c};if(_1331===null){_1332.canUpdate=_132b&&_1334;_1332.canDelete=_132c&&_1335;}else{if(_1331===""){return _1332;}else{if(_1331){_1328=_1328||this.getUserId();if(_1328&&realm){_1328=_1328+"@"+realm;}if(_1328.toLowerCase()===_1331.toLowerCase()){return _1332;}else{_1332.canUpdate=_132b&&_1334;_1332.canDelete=_132c&&_1335;}}}}return _1332;},getUserId:function(){var _1336;if(this.loaded){_1336=(this.credential&&this.credential.userId)||this.userId||"";}return _1336;},setUserIsAdmin:function(_1337){this.userIsAdmin=_1337;},setEditSummaryCallback:function(_1338){this.editSummaryCallback=_1338;},getEditSummary:function(_1339,_133a,_133b){_133b=_12e2.isDefined(_133b)?_133b:(new Date()).getTime();var _133c="",info=this.getEditInfo(_1339,_133a,_133b),_133d=(_133a&&_133a.callback)||this.editSummaryCallback;if(_133d){info=_133d(_1339,info)||"";}if(lang.isString(info)){_133c=info;}else{if(info){var _133e=info.action,_133f=info.userId,_1340=info.timeValue,count=0;if(_133e){count++;}if(_133f){count++;}if(_12e2.isDefined(_1340)){count++;}if(count>1){_133c=(_133e==="edit"?"edit":"create")+(_133f?"User":"")+(_12e2.isDefined(_1340)?info.displayPattern:"");}}_133c=_133c&&_12e2.substitute(info,this.i18n.layers.FeatureLayer[_133c]);}return _133c;},getEditInfo:function(_1341,_1342,_1343){if(!this.loaded){return;}_1343=_12e2.isDefined(_1343)?_1343:(new Date()).getTime();var _1344=(_1342&&_1342.action)||"last",_1345=this.editFieldsInfo,_1346=_1345&&_1345.creatorField,_1347=_1345&&_1345.creationDateField,_1348=_1345&&_1345.editorField,_1349=_1345&&_1345.editDateField,realm=_1345&&_1345.realm,_134a=_1341&&_1341.attributes,_134b=(_134a&&_1346)?_134a[_1346]:undefined,_134c=(_134a&&_1347)?_134a[_1347]:null,_134d=(_134a&&_1348)?_134a[_1348]:undefined,_134e=(_134a&&_1349)?_134a[_1349]:null,_134f=this._getEditData(_134b,_134c,_1343),_1350=this._getEditData(_134d,_134e,_1343),_1351;switch(_1344){case "creation":_1351=_134f;break;case "edit":_1351=_1350;break;case "last":_1351=_1350||_134f;break;}if(_1351){_1351.action=(_1351===_1350)?"edit":"creation";}return _1351;},_getEditData:function(_1352,_1353,_1354){var data,_1355,_1356,_1357=60000,_1358=3600000,_1359=2*_1358,_135a=24*_1358,days7=7*_135a;if(_12e2.isDefined(_1353)){_1355=_1354-_1353;if(_1355<0){_1356="Full";}else{if(_1355<_1357){_1356="Seconds";}else{if(_1355<(2*_1357)){_1356="Minute";}else{if(_1355<_1358){_1356="Minutes";}else{if(_1355<_1359){_1356="Hour";}else{if(_1355<_135a){_1356="Hours";}else{if(_1355<days7){_1356="WeekDay";}else{_1356="Full";}}}}}}}}if((_1352!==undefined)||_1356){data=data||{};data.userId=_1352;if(_1356){var _135b=_12df.format,_135c=new Date(_1353);data.minutes=Math.floor(_1355/_1357);data.hours=Math.floor(_1355/_1358);data.weekDay=_135b(_135c,{datePattern:"EEEE",selector:"date"});data.formattedDate=_135b(_135c,{selector:"date"});data.formattedTime=_135b(_135c,{selector:"time"});data.displayPattern=_1356;data.timeValue=_1353;}}return data;},isEditable:function(){return !!(this._editable||this.userIsAdmin);},setMaxAllowableOffset:function(_135d){if(!this.isEditable()){this._maxOffset=_135d;}return this;},getMaxAllowableOffset:function(){return this._maxOffset;},setAutoGeneralize:function(_135e){if(!this.loaded){this._optAutoGen=_135e;}else{if(!this.isEditable()&&(this.mode!==this.constructor.MODE_SNAPSHOT)&&((this.geometryType==="esriGeometryPolyline")||(this.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=_135e;if(_135e){var map=this._map;if(map&&map.loaded){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}}else{delete this._maxOffset;}}}return this;},setGDBVersion:function(_135f){if(!this._collection&&(_135f!==this.gdbVersion)&&(_135f||this.gdbVersion)){this.gdbVersion=_135f;this._task.gdbVersion=_135f;this._url.query=lang.mixin(this._url.query,{gdbVersion:_135f});if(this.loaded){this.clearSelection();if(this._map){this.refresh();}}this.onGDBVersionChange();}return this;},setDefinitionExpression:function(expr){this._defnExpr=expr;var mode=this._mode;if(mode){mode.propertyChangeHandler(1);}return this;},getDefinitionExpression:function(){return this._defnExpr;},setTimeDefinition:function(_1360){if(this._isSnapshot){this._timeDefn=_1360;var mode=this._mode;if(mode){mode.propertyChangeHandler(2);}}else{console.log("FeatureLayer.setTimeDefinition: layer in on-demand or selection mode does not support time definitions. Layer id = "+this.id+", Layer URL = "+this.url);}return this;},getTimeDefinition:function(){return this._timeDefn;},setTimeOffset:function(_1361,_1362){this._timeOffset=_1361;this._timeOffsetUnits=_1362;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}return this;},setUseMapTime:function(use){this.useMapTime=use;this._toggleTime(!this.suspended);var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},selectFeatures:function(query,_1363,_1364,_1365){_1363=_1363||this.constructor.SELECTION_NEW;var _1366=this._getShallowClone(query),map=this._map,_1367,dfd=_12e4._fixDfd(new _12de(_12e4._dfdCanceller));_1366.outFields=this._getOutFields();_1366.returnGeometry=true;if(map){_1366.outSpatialReference=new _12e5(map.spatialReference.toJson());}if(!this._applyQueryFilters(_1366)){_1367={features:[]};this._selectHandler(_1367,_1363,_1364,_1365,dfd);return dfd;}var _1368=this._canDoClientSideQuery(_1366);if(_1368){_1367={features:this._doQuery(_1366,_1368)};this._selectHandler(_1367,_1363,_1364,_1365,dfd);return dfd;}else{if(this._collection){var err=new Error("FeatureLayer::selectFeatures - "+this.invalidParams);this._resolve([err],null,_1365,dfd,true);return dfd;}var self=this;if(this._ts){_1366._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task.execute(_1366);temp.addCallbacks(function(_1369){self._selectHandler(_1369,_1363,_1364,_1365,dfd);},function(err){self._resolve([err],null,_1365,dfd,true);});return dfd;}},getSelectedFeatures:function(){var _136a=this._selectedFeatures,_136b=[],item;for(item in _136a){if(_136a.hasOwnProperty(item)){_136b.push(_136a[item]);}}return _136b;},clearSelection:function(_136c){var _136d=this._selectedFeatures,mode=this._mode,item;for(item in _136d){if(_136d.hasOwnProperty(item)){this._unSelectFeatureIIf(item,mode);mode._removeFeatureIIf(item);}}this._selectedFeatures={};if(this._isSelOnly){mode._applyTimeFilter(true);}if(!_136c){this.onSelectionClear();}return this;},setSelectionSymbol:function(_136e){this._selectionSymbol=_136e;if(_136e){var _136f=this._selectedFeatures,item;for(item in _136f){if(_136f.hasOwnProperty(item)){_136f[item].setSymbol(_136e);}}}return this;},getSelectionSymbol:function(){return this._selectionSymbol;},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(adds,_1370,_1371,_1372,_1373,_1374){var _1375=_1374.assembly,dfd=_1374.dfd;this._applyNormalized(adds,_1375&&_1375[0]);this._applyNormalized(_1370,_1375&&_1375[1]);this.onBeforeApplyEdits(adds,_1370,_1371);var i,_1376={},_1377=this.objectIdField,_1378={f:"json"},dirty=false;if(this._collection){var _1379={};_1379.addResults=adds?array.map(adds,function(){dirty=true;return {objectId:this._nextId++,success:true};},this):null;_1379.updateResults=_1370?array.map(_1370,function(_137a){dirty=true;var oid=_137a.attributes[_1377];_1376[oid]=_137a;return {objectId:oid,success:true};},this):null;_1379.deleteResults=_1371?array.map(_1371,function(_137b){dirty=true;return {objectId:_137b.attributes[_1377],success:true};},this):null;if(dirty){this._editHandler(_1379,adds,_1376,_1372,_1373,dfd);}return;}if(adds&&adds.length>0){_1378.adds=this._convertFeaturesToJson(adds,0,1);dirty=true;}if(_1370&&_1370.length>0){for(i=0;i<_1370.length;i++){var _137c=_1370[i];_1376[_137c.attributes[_1377]]=_137c;}_1378.updates=this._convertFeaturesToJson(_1370,0,0,1);dirty=true;}if(_1371&&_1371.length>0){var ids=[];for(i=0;i<_1371.length;i++){ids.push(_1371[i].attributes[_1377]);}_1378.deletes=ids.join(",");dirty=true;}if(dirty){var self=this;return _12e3({url:this._url.path+"/applyEdits",content:lang.mixin(_1378,this._url.query),callbackParamName:"callback",load:function(_137d){self._editHandler(_137d,adds,_1376,_1372,_1373,dfd);},error:function(err){self._resolve([err],null,_1373,dfd,true);}},{usePost:true});}},queryFeatures:function(query,_137e,_137f){return this._query("execute","onQueryFeaturesComplete",query,_137e,_137f);},queryRelatedFeatures:function(query,_1380,_1381){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",query,_1380,_1381);},queryIds:function(query,_1382,_1383){return this._query("executeForIds","onQueryIdsComplete",query,_1382,_1383);},queryCount:function(query,_1384,_1385){return this._query("executeForCount","onQueryCountComplete",query,_1384,_1385);},queryAttachmentInfos:function(_1386,_1387,_1388){var url=this._url.path+"/"+_1386+"/attachments",dfd=new _12de(_12e4._dfdCanceller),self=this;dfd._pendingDfd=_12e3({url:url,content:lang.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(_1389){var infos=_1389.attachmentInfos,_138a;array.forEach(infos,function(info){_138a=ioq.objectToQuery({gdbVersion:self._url.query&&self._url.query.gdbVersion,layer:self._url.query&&self._url.query.layer,token:self._getToken()});info.url=url+"/"+info.id+(_138a?("?"+_138a):"");info.objectId=_1386;});self._resolve([infos],"onQueryAttachmentInfosComplete",_1387,dfd);},error:function(err){self._resolve([err],null,_1388,dfd,true);}});return dfd;},addAttachment:function(_138b,_138c,_138d,_138e){return this._sendAttachment("add",_138b,_138c,_138d,_138e);},updateAttachment:function(_138f,_1390,_1391,_1392,_1393){_1391.appendChild(_12e0.create("input",{type:"hidden",name:"attachmentId",value:_1390}));return this._sendAttachment("update",_138f,_1391,_1392,_1393);},deleteAttachments:function(_1394,_1395,_1396,_1397){var url=this._url.path+"/"+_1394+"/deleteAttachments",dfd=new _12de(_12e4._dfdCanceller),self=this,_1398={f:"json",attachmentIds:_1395.join(",")};dfd._pendingDfd=_12e3({url:url,content:lang.mixin(_1398,this._url.query),callbackParamName:"callback",load:lang.hitch(this,function(_1399){var _139a=_1399.deleteAttachmentResults;_139a=array.map(_139a,function(_139b){var res=new _12f6(_139b);res.attachmentId=res.objectId;res.objectId=_1394;return res;});self._resolve([_139a],"onDeleteAttachmentsComplete",_1396,dfd);}),error:function(err){self._resolve([err],null,_1397,dfd,true);}},{usePost:true});return dfd;},addType:function(_139c){var types=this.types;if(types){var found=array.some(types,function(type){if(type.id==_139c.id){return true;}return false;});if(found){return false;}else{types.push(_139c);}}else{this.types=[_139c];}this._typesDirty=true;return true;},deleteType:function(_139d){if(!this._collection){return;}var types=this.types;if(types){var found=-1;array.some(types,function(type,index){if(type.id==_139d){found=index;return true;}return false;});if(found>-1){this._typesDirty=true;return types.splice(found,1)[0];}}},toJson:function(){var _139e=this._json,json=lang.isString(_139e)?_12dd.fromJson(_139e):lang.clone(_139e);if(!json){return;}json=json.layerDefinition?json:{layerDefinition:json};var _139f=json.layerDefinition,_13a0=this._collection;if(_13a0&&this._typesDirty){_139f.types=array.map(this.types||[],function(type){return type.toJson();});var _13a1=this.renderer,_13a2=_139f.drawingInfo;if(_13a2&&_13a1&&_13a1.declaredClass.indexOf("TemporalRenderer")===-1){_13a2.renderer=_13a1.toJson();}}var _13a3=null;if(!(_13a0&&!this._fcAdded)){_13a3={geometryType:_139f.geometryType,features:this._convertFeaturesToJson(this.graphics,true)};}json.featureSet=lang.mixin({},json.featureSet||{},_13a3);if(_13a0){json.nextObjectId=this._nextId;_139f.capabilities=this.capabilities;}return json;},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},_forceIdentity:function(_13a4){var self=this,path=this._url&&this._url.path;if((this.ownershipBasedAccessControlForFeatures||this.userIsAdmin)&&!this._getToken()&&path&&_12e1.id&&_12e1.id._hasPortalSession()&&_12e1.id._doPortalSignIn(path)){_12e1.id.getCredential(path).then(function(){self._findCredential();_13a4.call(self);},function(){_13a4.call(self);});}else{_13a4.call(this);}},_updateCaps:function(){var _13a5=this._editable,_13a6=lang.trim(this.capabilities||""),_13a7=array.map((_13a6?_13a6.split(","):[]),lang.trim),caps=array.map((_13a6?_13a6.toLowerCase().split(","):[]),lang.trim),found=array.indexOf(caps,"editing"),cap,i,_13a8,_13a9={"Create":array.indexOf(caps,"create"),"Update":array.indexOf(caps,"update"),"Delete":array.indexOf(caps,"delete")};if(_13a5&&found===-1){_13a7.push("Editing");}else{if(!_13a5&&found>-1){_13a8=[found];for(cap in _13a9){if(_13a9[cap]>-1){_13a8.push(_13a9[cap]);}}_13a8.sort();for(i=_13a8.length-1;i>=0;i--){_13a7.splice(_13a8[i],1);}}}this.capabilities=_13a7.join(",");},_counter:{value:0},_getUniqueId:function(){return this._counter.value++;},onSuspend:function(){this.inherited(arguments);this._toggleTime(false);var mode=this._mode;if(mode){mode.suspend();}},onResume:function(evt){this.inherited(arguments);this._toggleTime(true);this._updateMaxOffset();var mode=this._mode,map=this._map,_13aa=this.renderer;if(evt.firstOccurrence){this.clearSelection();if(this.timeInfo){if(this._trackIdField||(_13aa&&(_13aa.latestObservationRenderer||_13aa.trackRenderer))){this._trackManager=new _12fa(this);this._trackManager.initialize(map);}}this._zoomConnect=_12dc.connect(map,"onZoomEnd",this,this._updateMaxOffset);}if(mode){evt.firstOccurrence?mode.startup():mode.resume();}},_updateMaxOffset:function(){var map=this._map;if(map&&map.loaded){if(this._autoGeneralize){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}}},_toggleTime:function(_13ab){var map=this._map;if(_13ab&&this.timeInfo&&this.useMapTime&&map){this._mapTimeExtent=map.timeExtent;if(!this._timeConnect){this._timeConnect=_12dc.connect(map,"onTimeExtentChange",this,this._timeChangeHandler);}}else{this._mapTimeExtent=null;_12dc.disconnect(this._timeConnect);this._timeConnect=null;}},_timeChangeHandler:function(_13ac){this._mapTimeExtent=_13ac;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},_getOffsettedTE:function(_13ad){var _13ae=this._timeOffset,units=this._timeOffsetUnits;return (_13ad&&_13ae&&units)?_13ad.offset(-1*_13ae,units):_13ad;},_getTimeOverlap:function(_13af,_13b0){if(_13af&&_13b0){return _13af.intersection(_13b0);}else{return _13af||_13b0;}},_getTimeFilter:function(_13b1){var _13b2=this.getTimeDefinition(),_13b3=null,_13b4;if(_13b2||_13b3){_13b4=this._getTimeOverlap(_13b2,_13b3);if(!_13b4){return [false];}}if(_13b1){_13b1=_13b4?this._getTimeOverlap(_13b1,_13b4):_13b1;if(!_13b1){return [false];}}else{_13b1=_13b4;}return [true,_13b1];},_getAttributeFilter:function(_13b5){var _13b6=this.getDefinitionExpression();if(_13b5){_13b5=_13b6?"("+_13b6+") AND ("+_13b5+")":_13b5;}else{_13b5=_13b6;}return _13b5;},_applyQueryFilters:function(query){query.where=this._getAttributeFilter(query.where);query.maxAllowableOffset=this._maxOffset;if(this.timeInfo){var _13b7=this._getTimeFilter(query.timeExtent);if(!_13b7[0]){return false;}else{query.timeExtent=_13b7[1];}}return true;},_add:function(_13b8){var _13b9=this._selectionSymbol,attr=_13b8.attributes,_13ba=this.visibilityField;if(_13b9&&this._isSelOnly){_13b8.setSymbol(_13b9);}if(_13ba&&attr&&attr.hasOwnProperty(_13ba)){_13b8[attr[_13ba]?"show":"hide"]();}return this.add.apply(this,arguments);},_remove:function(){return this.remove.apply(this,arguments);},_canDoClientSideQuery:function(query){var _13bb=[],map=this._map;if(this._isTable||!map){return;}if(query.text||(query.where&&query.where!==this.getDefinitionExpression())){return;}var _13bc=this._isSnapshot,_13bd=this._isSelOnly;var _13be=query.geometry;if(_13be){if(!_13bd&&query.spatialRelationship===Query.SPATIAL_REL_INTERSECTS&&(_13be.type==="extent"&&(_13bc||map.extent.contains(_13be)))){_13bb.push(1);}else{return;}}var ids=query.objectIds;if(ids){if(_13bc){_13bb.push(2);}else{var len=ids.length,mode=this._mode,_13bf=0,i;for(i=0;i<len;i++){if(mode._getFeature(ids[i])){_13bf++;}}if(_13bf===len){_13bb.push(2);}else{return;}}}if(this.timeInfo){var _13c0=query.timeExtent,_13c1=this._mapTimeExtent;if(_13bc){if(_13c0){_13bb.push(3);}}else{if(_13bd){if(_13c0){return;}}else{if(_13c1){if(array.indexOf(_13bb,2)!==-1){if(_13c0){_13bb.push(3);}}else{return;}}else{if(_13bb.length>0){if(_13c0){_13bb.push(3);}}else{if(_13c0){return;}}}}}}return _13bb.length>0?_13bb:null;},_doQuery:function(query,_13c2,_13c3){var _13c4=[],mode=this._mode,_13c5=this.objectIdField,i,len,_13c6;if(array.indexOf(_13c2,2)!==-1){_13c4=[];var ids=query.objectIds;len=ids.length;for(i=0;i<len;i++){var obj=mode._getFeature(ids[i]);if(obj){_13c4.push(obj);}}if(_13c4.length===0){return [];}}if(array.indexOf(_13c2,1)!==-1){_13c6=_13c4.length>0?_13c4:this.graphics;len=_13c6.length;var _13c7=query.geometry._normalize(null,true);_13c4=[];for(i=0;i<len;i++){var _13c8=_13c6[i],_13c9=_13c8.geometry;if(_13c9){if(this.normalization&&_13c7.length){if(_13c7[0].intersects(_13c9)||_13c7[1].intersects(_13c9)){_13c4.push(_13c8);}}else{if(_13c7.intersects(_13c9)){_13c4.push(_13c8);}}}}if(_13c4.length===0){return [];}}if(array.indexOf(_13c2,3)!==-1){if(this.timeInfo){_13c6=_13c4.length>0?_13c4:this.graphics;var time=query.timeExtent,_13ca=this._filterByTime(_13c6,time.startTime,time.endTime);_13c4=_13ca.match;}}if(_13c3){return array.map(_13c4,function(obj){return obj.attributes[_13c5];},this);}else{return _13c4;}},_filterByTime:function(_13cb,_13cc,_13cd){var _13ce=this._startTimeField,_13cf=this._endTimeField,_13d0;if(!this._twoTimeFields){_13d0=_13ce||_13cf;}var isDef=_12e2.isDefined,yea=[],nay=[],i,len=_13cb.length,_13d1,_13d2;_13cc=_13cc?_13cc.getTime():-Infinity;_13cd=_13cd?_13cd.getTime():Infinity;if(_13d0){for(i=0;i<len;i++){_13d1=_13cb[i];_13d2=_13d1.attributes;var time=_13d2[_13d0];if(time>=_13cc&&time<=_13cd){yea.push(_13d1);}else{nay.push(_13d1);}}}else{for(i=0;i<len;i++){_13d1=_13cb[i];_13d2=_13d1.attributes;var start=_13d2[_13ce],end=_13d2[_13cf];start=isDef(start)?start:-Infinity;end=isDef(end)?end:Infinity;if((start>=_13cc&&start<=_13cd)||(end>=_13cc&&end<=_13cd)||(_13cc>=start&&_13cd<=end)){yea.push(_13d1);}else{nay.push(_13d1);}}}return {match:yea,noMatch:nay};},_resolve:function(args,_13d3,_13d4,dfd,_13d5){if(_13d3){this[_13d3].apply(this,args);}if(_13d4){_13d4.apply(null,args);}if(dfd){_12e4._resDfd(dfd,args,_13d5);}},_getShallowClone:function(query){var _13d6=new Query(),prop;for(prop in query){if(query.hasOwnProperty(prop)){_13d6[prop]=query[prop];}}return _13d6;},_query:function(type,_13d7,query,_13d8,_13d9){var that=this,map=this._map,dfd=new _12de(_12e4._dfdCanceller),_13da=query;var _13db=function(_13dc,_13dd){if(!_13dd&&type==="execute"&&!that._isTable){var _13de=_13dc.features,mode=that._mode,_13df=that.objectIdField,il=_13de.length,i;for(i=il-1;i>=0;i--){var oid=_13de[i].attributes[_13df];var _13e0=mode._getFeature(oid);if(_13e0){_13de.splice(i,1,_13e0);}}}that._resolve([_13dc],_13d7,_13d8,dfd);};if(type!=="executeRelationshipQuery"){_13da=this._getShallowClone(query);_13da.outFields=this._getOutFields();_13da.returnGeometry=(!map&&query.hasOwnProperty("returnGeometry"))?query.returnGeometry:true;var _13e1;if(map){_13da.outSpatialReference=new _12e5(map.spatialReference.toJson());}if(!this._applyQueryFilters(_13da)){switch(type){case "execute":_13e1=new _12ee({features:[]});break;case "executeForIds":_13e1=[];break;case "executeForCount":_13e1=0;break;}_13db(_13e1,true);return dfd;}var _13e2=this._canDoClientSideQuery(_13da);if(_13e2){var _13e3=this._doQuery(_13da,_13e2,(type==="executeForIds"||type==="executeForCount"));switch(type){case "execute":_13e1=new _12ee();_13e1.features=_13e3;break;case "executeForIds":_13e1=_13e3;break;case "executeForCount":_13e1=_13e3.length;break;}_13db(_13e1,true);return dfd;}}if(this._collection){var err=new Error("FeatureLayer::_query - "+this.invalidParams);this._resolve([err],null,_13d9,dfd,true);return dfd;}if(this._ts){_13da._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task[type](_13da);temp.addCallbacks(_13db,function(err){that._resolve([err],null,_13d9,dfd,true);});return dfd;},_convertFeaturesToJson:function(_13e4,_13e5,isAdd,_13e6){var json=[],_13e7=this._selectionSymbol,_13e8=this.visibilityField,i,_13e9,_13ea=this.objectIdField;if(this.loaded&&(isAdd||_13e6)){_13e9=array.filter(this.fields,function(field){return (field.editable===false)&&(!_13e6||(field.name!==_13ea));});}for(i=0;i<_13e4.length;i++){var _13eb=_13e4[i],_13ec={},_13ed=_13eb.geometry,attr=_13eb.attributes,_13ee=_13eb.symbol;if(_13ed&&(!_13e6||!this.loaded||this.allowGeometryUpdates)){_13ec.geometry=_13ed.toJson();}if(_13e8){_13ec.attributes=attr=lang.mixin({},attr);attr[_13e8]=_13eb.visible?1:0;}else{if(attr){_13ec.attributes=lang.mixin({},attr);}}if(_13ec.attributes&&_13e9&&_13e9.length){array.forEach(_13e9,function(field){delete _13ec.attributes[field.name];});}if(_13ee&&(_13ee!==_13e7)){_13ec.symbol=_13ee.toJson();}json.push(_13ec);}return _13e5?json:_12dd.toJson(json);},_selectHandler:function(_13ef,_13f0,_13f1,_13f2,dfd){var _13f3,ctor=this.constructor;switch(_13f0){case ctor.SELECTION_NEW:this.clearSelection(true);_13f3=true;break;case ctor.SELECTION_ADD:_13f3=true;break;case ctor.SELECTION_SUBTRACT:_13f3=false;break;}var i,_13f4=_13ef.features,mode=this._mode,_13f5=[],_13f6=this.objectIdField,_13f7,oid;if(_13f3){for(i=0;i<_13f4.length;i++){_13f7=_13f4[i];oid=_13f7.attributes[_13f6];var added=mode._addFeatureIIf(oid,_13f7);_13f5.push(added);this._selectFeatureIIf(oid,added,mode);}}else{for(i=0;i<_13f4.length;i++){_13f7=_13f4[i];oid=_13f7.attributes[_13f6];this._unSelectFeatureIIf(oid,mode);var _13f8=mode._removeFeatureIIf(oid);_13f5.push(_13f8||_13f7);}}if(this._isSelOnly){mode._applyTimeFilter(true);}this._resolve([_13f5,_13f0,_13ef.exceededTransferLimit?{queryLimitExceeded:true}:null],"onSelectionComplete",_13f1,dfd);if(_13ef.exceededTransferLimit){this.onQueryLimitExceeded();}},_selectFeatureIIf:function(oid,_13f9,mode){var _13fa=this._selectedFeatures,found=_13fa[oid];if(!found){mode._incRefCount(oid);_13fa[oid]=_13f9;if(!this._isTable){this._setSelectSymbol(_13f9);}}return found||_13f9;},_unSelectFeatureIIf:function(oid,mode){var found=this._selectedFeatures[oid];if(found){mode._decRefCount(oid);delete this._selectedFeatures[oid];if(!this._isTable){this._setUnSelectSymbol(found);}}return found;},_isSelected:function(_13fb){},_setSelectSymbol:function(_13fc){var _13fd=this._selectionSymbol;if(_13fd&&!this._isSelOnly){_13fc.setSymbol(_13fd);}},_setUnSelectSymbol:function(_13fe){var _13ff=this._selectionSymbol;if(_13ff&&!this._isSelOnly){if(_13ff===_13fe.symbol){_13fe.setSymbol(null,true);}}},_getOutFields:function(){var _1400=array.filter([this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._rendererFields),function(field,index,arr){return !!field&&(array.indexOf(arr,field)===index);});var _1401=lang.clone(this._outFields);if(_1401){if(array.indexOf(_1401,"*")!==-1){return _1401;}array.forEach(_1400,function(field){if(array.indexOf(_1401,field)===-1){_1401.push(field);}});return _1401;}else{return _1400;}},_checkFields:function(_1402){var _1403=_1402||this._getOutFields();array.forEach(_1403,function(_1404){if(_1404==="*"){return;}if(!this._getField(_1404)){console.debug("esri.layers.FeatureLayer: "+_12e2.substitute({url:this.url,field:_1404},"unable to find '${field}' field in the layer 'fields' information [url: ${url}]"));}},this);if(!_1402&&!this._isTable&&!this._fserver&&!this._collection){var found=array.some(this.fields,function(_1405){return (_1405&&_1405.type==="esriFieldTypeGeometry")?true:false;});if(!found){console.debug("esri.layers.FeatureLayer: "+_12e2.substitute({url:this.url},"unable to find a field of type 'esriFieldTypeGeometry' in the layer 'fields' information. If you are using a map service layer, features will not have geometry [url: ${url}]"));}}},_fixRendererFields:function(){var _1406=this.renderer;if(_1406&&this.fields.length>0){var _1407=array.filter([_1406,_1406.observationRenderer,_1406.latestObservationRenderer,_1406.trackRenderer],_12e2.isDefined);var _1408=[];array.forEach(_1407,function(rnd){var _1409,_140a;_140a=rnd.attributeField;if(_140a&&!lang.isFunction(_140a)){_1409=!this._getField(_140a)&&this._getField(_140a,true);if(_1409){rnd.attributeField=_1409.name;}}_140a=rnd.attributeField2;if(_140a){_1409=!this._getField(_140a)&&this._getField(_140a,true);if(_1409){rnd.attributeField2=_1409.name;}}_140a=rnd.attributeField3;if(_140a){_1409=!this._getField(_140a)&&this._getField(_140a,true);if(_1409){rnd.attributeField3=_1409.name;}}if(!lang.isFunction(rnd.attributeField)){_1408.push(rnd.attributeField);}_1408.push(rnd.attributeField2);_1408.push(rnd.attributeField3);},this);this._rendererFields=array.filter(_1408,_12e2.isDefined);}},_getField:function(_140b,_140c){var _140d=this.fields;if(_140d.length===0){return null;}var _140e;if(_140c){_140b=_140b.toLowerCase();}array.some(_140d,function(_140f){var found=false;if(_140c){found=(_140f&&_140f.name.toLowerCase()===_140b)?true:false;}else{found=(_140f&&_140f.name===_140b)?true:false;}if(found){_140e=_140f;}return found;});return _140e;},_getDateOpts:function(){if(!this._dtOpts){var props=array.map(array.filter(this.fields,function(_1410){return !!(_1410&&_1410.type==="esriFieldTypeDate");}),function(_1411){return _1411.name;});this._dtOpts={properties:props};}return this._dtOpts;},_applyNormalized:function(_1412,_1413){if(_1412&&_1413){array.forEach(_1412,function(_1414,index){if(_1414&&_1413[index]){_1414.setGeometry(_1413[index]);}});}},_editHandler:function(_1415,adds,_1416,_1417,_1418,dfd){var _1419=_1415.addResults,_141a=_1415.updateResults,_141b=_1415.deleteResults,i,_141c,oid,_141d,attr,_141e=this.objectIdField,mode=this._mode,_141f=this._isTable;var _1420=this.editFieldsInfo,_1421=this._getOutFields()||[],_1422=_1420&&_1420.creatorField,_1423=_1420&&_1420.creationDateField,_1424=_1420&&_1420.editorField,_1425=_1420&&_1420.editDateField,realm=_1420&&_1420.realm;if(array.indexOf(_1421,"*")===-1){if(_1422&&array.indexOf(_1421,_1422)===-1){_1422=null;}if(_1423&&array.indexOf(_1421,_1423)===-1){_1423=null;}if(_1424&&array.indexOf(_1421,_1424)===-1){_1424=null;}if(_1425&&array.indexOf(_1421,_1425)===-1){_1425=null;}}var _1426=(_1423||_1425)?(new Date()).getTime():null,_1427=(_1422||_1424)?this.getUserId():undefined;if(_1427&&realm){_1427=_1427+"@"+realm;}if(_1419){for(i=0;i<_1419.length;i++){_1419[i]=new _12f6(_1419[i]);if(_141f){continue;}_141c=_1419[i];if(_141c.success){oid=_141c.objectId;_141d=adds[i];var gl=_141d._graphicsLayer;if(gl&&gl!==this){gl.remove(_141d);}attr=_141d.attributes||{};attr[_141e]=oid;if(_1422){attr[_1422]=_1427;}if(_1424){attr[_1424]=_1427;}if(_1423){attr[_1423]=_1426;}if(_1425){attr[_1425]=_1426;}_141d.setAttributes(attr);if(mode._init){mode.drawFeature(_141d);}}}}if(_141a){for(i=0;i<_141a.length;i++){_141a[i]=new _12f6(_141a[i]);if(_141f){continue;}_141c=_141a[i];if(_141c.success){oid=_141c.objectId;_141d=_1416[oid];var found=mode._getFeature(oid);if(found){if(found.geometry!==_141d.geometry){found.setGeometry(_12f0.fromJson(_141d.geometry.toJson()));}this._repaint(found,oid);}_141d=found||_141d;attr=_141d.attributes||{};if(_1424){attr[_1424]=_1427;}if(_1425){attr[_1425]=_1426;}_141d.setAttributes(attr);}}}if(_141b){var _1428=[];for(i=0;i<_141b.length;i++){_141b[i]=new _12f6(_141b[i]);if(_141f){continue;}_141c=_141b[i];if(_141c.success){oid=_141c.objectId;_141d=mode._getFeature(oid);if(_141d){if(this._unSelectFeatureIIf(oid,mode)){_1428.push(_141d);}_141d._count=0;mode._removeFeatureIIf(oid);}}}if(_1428.length>0){this.onSelectionComplete(_1428,this.constructor.SELECTION_SUBTRACT);}}this._resolve([_1419,_141a,_141b],"onEditsComplete",_1417,dfd);},_sendAttachment:function(type,_1429,_142a,_142b,_142c){var _142d=(type==="add")?"addAttachment":"updateAttachment",url=this._url.path+"/"+_1429+"/"+_142d,self=this;var dfd=_12e3({url:url,form:_142a,content:lang.mixin(this._url.query,{f:"json",token:this._getToken()||undefined}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(_142e){var _142f=(type==="add")?"addAttachmentResult":"updateAttachmentResult",_1430=(type==="add")?"onAddAttachmentComplete":"onUpdateAttachmentComplete",_1431=new _12f6(_142e[_142f]);_1431.attachmentId=_1431.objectId;_1431.objectId=_1429;self._resolve([_1431],_1430,_142b);return _1431;}).addErrback(function(error){self._resolve([error],null,_142c,null,true);});return dfd;},_repaint:function(_1432,oid,force){oid=_12e2.isDefined(oid)?oid:_1432.attributes[this.objectIdField];if(!(oid in this._selectedFeatures)||!this._selectionSymbol){_1432.setSymbol(_1432.symbol,force);}},_getKind:function(_1433){var _1434=this._trackManager;if(_1434){return _1434.isLatestObservation(_1433)?1:0;}return 0;}});lang.mixin(_12fb,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});_12f1._createWrappers(_12fb);if(has("extend-esri")){lang.setObject("layers.FeatureLayer",_12fb,_12e1);}return _12fb;});},"esri/dijit/editing/toolbars/ToolbarBase":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/has","dijit/Toolbar","dijit/ToolbarSeparator","esri/kernel","esri/lang"],function(_1435,lang,array,_1436,has,_1437,_1438,_1439,_143a){var TBB=_1435([_1437],{declaredClass:"esri.dijit.editing.toolbars.ToolbarBase",_enabled:true,graphicsAdded:function(){},drawEnd:function(){},onApplyEdits:function(){},onDelete:function(){},constructor:function(_143b,_143c){if(!_143b||!_143b.settings){return;}this._tools=[];this._tbConnects=[];this._initialize(_143b.settings);},postCreate:function(){this._createTools();this.deactivate();},destroy:function(){var tool;var tools=this._tools;for(tool in tools){if(tools.hasOwnProperty(tool)&&_143a.isDefined(this._tools[tool])){this._tools[tool].destroy();}}array.forEach(this._tbConnects,_1436.disconnect);this.inherited(arguments);},activate:function(_143d){this._enabled=true;},deactivate:function(){var tool;this._enabled=false;this._layer=null;this._geometryType=null;var tools=this._tools;for(tool in tools){if(tools.hasOwnProperty(tool)){this._tools[tool].deactivate();this._tools[tool].setChecked(false);}}},isEnabled:function(){return this._enabled;},setActiveSymbol:function(_143e){this._activeSymbol=_143e;},_getSymbol:function(){},_createTools:function(){},_initialize:function(_143f){this._settings=_143f;this._toolbar=_143f.drawToolbar;this._editToolbar=_143f.editToolbar;this._initializeToolbar();},_activateTool:function(tool,_1440){if(this._activeTool){this._activeTool.deactivate();}if(_1440===true&&this._activeTool==this._tools[tool]){this._activeTool.setChecked(false);this._activeTool=null;}else{this._activeTool=this._tools[tool];this._activeTool.setChecked(true);this._activeTool.activate(null);}},_createSeparator:function(){this.addChild(new _1438());}});if(has("extend-esri")){lang.setObject("dijit.editing.toolbars.ToolbarBase",TBB,_1439);}return TBB;});},"dijit/form/_FormValueWidget":function(){define("dijit/form/_FormValueWidget",["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(_1441,has,_1442,_1443){return _1441("dijit.form._FormValueWidget",[_1442,_1443],{_layoutHackIE7:function(){if(has("ie")==7){var _1444=this.domNode;var _1445=_1444.parentNode;var _1446=_1444.firstChild||_1444;var _1447=_1446.style.filter;var _1448=this;while(_1445&&_1445.clientHeight==0){(function ping(){var _1449=_1448.connect(_1445,"onscroll",function(){_1448.disconnect(_1449);_1446.style.filter=(new Date()).getMilliseconds();_1448.defer(function(){_1446.style.filter=_1447;});});})();_1445=_1445.parentNode;}}}});});},"*now":function(r){r(["dojo/i18n!*preload*esri/dijit/editing/nls/Editor-all*[\"ar\",\"az\",\"ca\",\"cs\",\"da\",\"de-de\",\"el\",\"en-gb\",\"en-us\",\"es-es\",\"fi-fi\",\"fr-fr\",\"he-il\",\"hu\",\"it-it\",\"ja-jp\",\"ko-kr\",\"nl-nl\",\"nb\",\"pl\",\"pt-br\",\"pt-pt\",\"ro\",\"ru\",\"sk\",\"sl\",\"sv\",\"th\",\"tr\",\"zh-tw\",\"zh-cn\",\"ROOT\"]"]);},"*noref":1}});define("esri/dijit/editing/Editor-all",["esri/layers/FeatureLayer","esri/toolbars/_toolbar","esri/toolbars/draw","esri/toolbars/edit","esri/tasks/geometry","esri/dijit/AttributeInspector","esri/dijit/editing/AttachmentEditor","esri/dijit/editing/Editor","esri/dijit/editing/TemplatePicker","esri/dijit/editing/Util","esri/dijit/editing/SelectionHelper"],function(_144a,_144b,Draw,Edit,_144c,_144d,_144e,_144f,_1450,Util,_1451){return {};});