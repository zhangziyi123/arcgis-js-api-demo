/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
define("esri/dijit/analysis/BufferTool",["dijit","dojo","dojox","dojo/require!dijit/_Widget,dijit/_Templated,dijit/form/Form,dijit/form/Select,dijit/form/ComboBox,dijit/form/CheckBox,dijit/Menu,dijit/MenuItem,esri/dijit/analysis/HelpWindow,esri/dijit/analysis/utils,esri/dijit/analysis/HelpWindow,esri/dijit/analysis/AnalysisBase"],function(_1,_2,_3){_2.provide("esri.dijit.analysis.BufferTool");_2.require("dijit._Widget");_2.require("dijit._Templated");_2.require("dijit.form.Form");_2.require("dijit.form.Select");_2.require("dijit.form.ComboBox");_2.require("dijit.form.CheckBox");_2.require("dijit.Menu");_2.require("dijit.MenuItem");_2.require("esri.dijit.analysis.HelpWindow");_2.require("esri.dijit.analysis.utils");_2.require("esri.dijit.analysis.HelpWindow");_2.require("esri.dijit.analysis.AnalysisBase");_2.declare("esri.dijit.analysis.BufferTool",[_1._Widget,_1._Templated,esri.dijit.analysis.AnalysisBase],{widgetsInTemplate:true,templateString:"<div class=\"esriAnalysis\">\r\n    <div data-dojo-type=\"dijit.layout.ContentPane\" style=\"margin-top:0.5em; margin-bottom: 0.5em;\">\r\n      <div data-dojo-attach-point=\"_bufferToolContentTitle\" class=\"analysisTitle\">\r\n         <table class=\"esriFormTable\" >\r\n            <tr>\r\n              <td><div class=\"buffersIcon\"></div></td>\r\n              <td>${i18n.bufferToolName}</td>\r\n              <td>\r\n                <div class=\"esriFloatTrailing\" style=\"padding:0;\">\r\n                  <a href=\"#\" class='esriFloatLeading helpIcon' esriHelpTopic=\"toolDescription\"></a>\r\n                  <a href=\"#\" data-dojo-attach-point=\"_closeBtn\" title=\"${i18n.close}\" class=\"closeIcon\">              \r\n                  <img src=\"images/close.gif\" border=\"0\"/></a>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n         </table>\r\n      </div>\r\n      <div style=\"clear:both; border-bottom: #333 thin solid; height:1px;width:100%;\"></div>\r\n    </div>\r\n    <div data-dojo-type=\"dijit.form.Form\" data-dojo-attach-point=\"_form\" readOnly=\"true\">\r\n     <table class=\"esriFormTable\"  data-dojo-attach-point=\"_bufferTable\">\r\n       <tbody>\r\n        <tr>\r\n          <td colspan=\"2\" class=\"sectionHeader esriLeadingMargin1\" data-dojo-attach-point=\"_bufferToolDescription\" >\r\n            <div>${i18n.bufferDefine}</div>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td style=\"padding-top:5px;\">\r\n            <label data-dojo-attach-point=\"_labelOne\" class=\"esriFloatLeading esriTrailingMargin025\">${i18n.oneLabel}</label>\r\n            <label data-dojo-attach-point=\"_polylabel\" class=\"\">${i18n.sizeLabel}</label>\r\n          </td>\r\n          <td class=\"longTextInput\">\r\n            <a href=\"#\" class='esriFloatTrailing helpIcon' data-dojo-attach-point=\"_analysisFieldHelpLink\" esriHelpTopic=\"BufferSize\"></a>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td colspan=\"2\">\r\n            <table>\r\n              <tr>\r\n                <td>\r\n                  <div class=\"esriLeadingMargin4 bufferSelector selected\" dojoAttachPoint=\"_Distance\" >\r\n                    <div class=\"bufferIcon bufferDistanceIcon\"></div>\r\n                    <div><label class=\"esriSelectLabel\">${i18n.distance}</label></div>\r\n                  </div>\r\n                </td>\r\n                <td>\r\n                  <div class=\"bufferSelector\" dojoAttachPoint=\"_Attribute\">\r\n                    <div class=\"bufferIcon bufferAttributeIcon\"></div>\r\n                    <div><label class=\"esriSelectLabel\">${i18n.field}</label></div>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            </table>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n         <td colspan=\"2\">\r\n         <table style=\"width:99%;\">\r\n          <tr>\r\n          <td style=\"width:45%;\">\r\n            <input type=\"text\" class=\"\" data-dojo-type=\"dijit.form.ValidationTextBox\" data-dojo-props=\"intermediateChanges:true,value:'1',required:true,missingMessage:'${i18n.distanceMsg}'\" data-dojo-attach-point=\"_bufferDist\" style=\"width:95%;\"></input>\r\n            <select class=\"\" dojoAttachPoint=\"_bufferDistAttribute\" data-dojo-type=\"dijit.form.Select\" style=\"display:none; width:95%;table-layout:fixed;\"></select>\r\n          </td>\r\n          <td style=\"width:55%;\"> \r\n            <!-- Default, Centimeters, DecimalDegrees, Feet, Inches, Kilometers, Meters, Miles, Millimeters, NauticalMiles, Points, Yards -->\r\n            <select class=\"mediumInput\" data-dojo-type=\"dijit.form.Select\" dojoAttachPoint=\"_bufferUnits\" style=\"width:105%;table-layout:fixed;\">\r\n              <option value=\"Miles\">${i18n.miles}</option>\r\n              <option value=\"DecimalDegrees\">${i18n.degree}</option>\r\n              <option value=\"Feet\">${i18n.feet}</option>\r\n              <option value=\"Inches\">${i18n.inches}</option>\r\n              <option value=\"Kilometers\">${i18n.kilometers}</option>\r\n              <option value=\"Meters\">${i18n.meters}</option>\r\n              <option value=\"Miles\">${i18n.miles}</option>\r\n              <option value=\"NauticalMiles\">${i18n.nautMiles}</option>\r\n              <option value=\"Points\">${i18n.pointsUnit}</option>\r\n              <option value=\"Yards\">${i18n.yards}</option>\r\n            </select>\r\n          </td>\r\n          </tr>\r\n          <tr>\r\n            <td class=\"shortTextInput\" colspan=\"2\" align=\"center\" data-dojo-attach-point=\"_sizeHelp\">\r\n              <small>${i18n.sizeHelp}</small>\r\n            </td>\r\n          </tr>\r\n         </table>\r\n         </td>\r\n        </tr>\r\n\r\n        <tr data-dojo-attach-point=\"_optionsRow\">\r\n          <td colspan=\"2\" style=\"padding:5px 0px;\">\r\n            <div class=\"optionsClose\" style=\"width:99%\" data-dojo-attach-point=\"_optionsDiv\">\r\n              <div class=\"dijitTreeExpando\" data-dojo-attach-event=\"onclick:_handleOptionsBtnClick\"><label class=\"esriLeadingMargin2\">${i18n.optionsLabel}</label></div>\r\n              <a style=\"position:relative; top:-16px; left:1px; \"href=\"#\" class='esriFloatTrailing helpIcon' data-dojo-attach-point=\"_bufferOptionsHelpLink\" esriHelpTopic=\"BufferOptionPoly\"></a>\r\n              <table class=\"esriFormTable optionsTable\">\r\n                <tbody>\r\n\r\n                <tr>\r\n                  <td colspan=\"2\" align=\"\">\r\n                    <div class=\"esriFloatLeading esriLeadingMargin2\">${i18n.typeLabel}</div>\r\n                  </td>\r\n                </tr> \r\n\r\n                <tr>\r\n                  <td>\r\n                    <table>\r\n                      <tr>\r\n                        <td>\r\n                          <div class=\"esriLeadingMargin4 bufferSelector selected\" data-dojo-attach-point=\"_Overlap\">\r\n                            <div class=\"bufferIcon bufferOverlapIcon\"></div>\r\n                            <div><label class=\"esriSelectLabel\">${i18n.overlap}</label></div>\r\n                          </div>\r\n                        </td>\r\n                        <td>\r\n                          <div class=\"bufferSelector\" data-dojo-attach-point=\"_Dissolve\">\r\n                            <div class=\"bufferIcon bufferDissolveIcon\"></div>\r\n                            <div><label class=\"esriSelectLabel\">${i18n.dissolve}</label></div>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    </table>\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr>\r\n                  <td colspan=\"2\" align=\"\">\r\n                    <table data-dojo-attach-point=\"polygonTypes\" style=\"display:none;\">\r\n                      <tr>\r\n                        <td colspan=\"2\" align=\"\">\r\n                          <div class=\"esriFloatLeading esriLeadingMargin2\">${i18n.areaofInputPoly}</div>\r\n                        </td>\r\n                      </tr>\r\n                      <tr>\r\n                        <td>\r\n                          <table>\r\n                            <tr>\r\n                              <td>\r\n                                <div class=\"esriLeadingMargin4 bufferSelector selected\" data-dojo-attach-point=\"_Include\">\r\n                                  <div class=\"bufferIcon bufferIncludeIcon\"></div>\r\n                                  <div><label class=\"esriSelectLabel\">${i18n.include}</label></div>\r\n                                </div>\r\n                              </td>\r\n                              <td>\r\n                                <div class=\"bufferSelector\" data-dojo-attach-point=\"_Exclude\">\r\n                                  <div class=\"bufferIcon bufferExcludeIcon\"></div>\r\n                                  <div><label class=\"esriSelectLabel\">${i18n.exclude}</label></div>\r\n                                </div>\r\n                              </td>\r\n                            </tr>\r\n                          </table>\r\n                        </td>\r\n                      </tr>\r\n                    </table>\r\n                  </td>\r\n                </tr>\r\n\r\n\r\n\r\n                <tr>\r\n                  <td colspan=\"2\">\r\n                    <div>\r\n                    <table data-dojo-attach-point=\"sideTypes\" style=\"display:none;\">\r\n                      <tr>\r\n                        <td align=\"center\" colspan=\"3\">\r\n                          <div class=\"esriFloatLeading esriLeadingMargin2\">${i18n.sideType}</div>\r\n                        </td>\r\n                      </tr>\r\n                      <tr>\r\n                          <td>\r\n                            <div class=\"esriLeadingMargin4 bufferSelector selected\" data-dojo-attach-point=\"_Around\">\r\n                              <div class=\"bufferIcon bufferAroundIcon\"></div>\r\n                              <div><label class=\"esriSelectLabel\">${i18n.around}</label></div>\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div class=\"bufferSelector\" data-dojo-attach-point=\"_Left\" >\r\n                              <div class=\"bufferIcon bufferLeftIcon\"></div>\r\n                              <div><label class=\"esriSelectLabel\">${i18n.left}</label></div>\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div class=\"bufferSelector\" data-dojo-attach-point=\"_Right\">\r\n                              <div class=\"bufferIcon bufferRightIcon\"></div>\r\n                              <div><label class=\"esriSelectLabel\">${i18n.right}</label></div>\r\n                            </div>\r\n                          </td>\r\n                      </tr>\r\n                     </table>\r\n                    </div>\r\n                    <div>\r\n                     <table data-dojo-attach-point=\"endTypes\" style=\"display:none;\">\r\n                      <tr>\r\n                        <td align=\"center\" colspan=\"2\">\r\n                          <div class=\"esriFloatLeading esriLeadingMargin2\">${i18n.endType}</div>\r\n                        </td>\r\n                      </tr>\r\n                      <tr>\r\n                          <td>\r\n                            <div class=\"esriLeadingMargin4 bufferSelector selected\" data-dojo-attach-point=\"_Round\" >\r\n                              <div class=\"bufferIcon bufferRoundIcon\"></div>\r\n                              <div><label class=\"esriSelectLabel\">${i18n.round}</label></div>\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div class=\"bufferSelector\" data-dojo-attach-point=\"_Flat\">\r\n                              <div class=\"bufferIcon bufferFlatIcon\"></div>\r\n                              <div><label class=\"esriSelectLabel\">${i18n.flat}</label></div>\r\n                            </div>\r\n                          </td>\r\n                      </tr>\r\n                    </table>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n\r\n                <tr>\r\n                  <td colspan=\"2\" align=\"center\">\r\n                    <table data-dojo-attach-point=\"ringTypes\" style=\"display:none;\">\r\n                      <tr>\r\n                        <td colspan=2 align=\"center\">\r\n                          <div class=\"esriFloatLeading esriLeadingMargin2\">${i18n.multipleDistance}</div>\r\n                        </td>\r\n                      </tr>\r\n                      <tr>\r\n                          <td>\r\n                            <div>\r\n                            <table>\r\n                            <tr>\r\n                            <td>\r\n                              <div class=\"esriLeadingMargin4 bufferSelector selected\" data-dojo-attach-point=\"_Rings\">\r\n                                <div class=\"bufferIcon bufferRingsIcon\"></div>\r\n                                <div><label class=\"esriSelectLabel\">${i18n.rings}</label></div>\r\n                              </div>\r\n                            </td>\r\n                            <td>\r\n                              <div class=\"bufferSelector\" data-dojo-attach-point=\"_Disks\">\r\n                                <div class=\"bufferIcon bufferDisksIcon\"></div>\r\n                                <div><label class=\"esriSelectLabel\">${i18n.disks}</label></div>\r\n                              </div>\r\n                            </td>\r\n                            </tr>\r\n                            </table>\r\n                            </div>\r\n                          </td>  \r\n                      </tr>\r\n                    </table>\r\n                  </td>\r\n                </tr>\r\n    \r\n\r\n\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n    \r\n        <tr>\r\n          <td  style=\"padding:5px 0px;\">\r\n            <label data-dojo-attach-point=\"_labelOne\" class=\"esriFloatLeading esriTrailingMargin025\">${i18n.twoLabel}</label>\r\n            <label data-dojo-attach-point=\"_polylabel\" class=\"\">${i18n.resultLabel}</label>\r\n          </td>\r\n          <td class=\"longTextInput\">\r\n            <a href=\"#\" class='esriFloatTrailing helpIcon' data-dojo-attach-point=\"_analysisFieldHelpLink\" esriHelpTopic=\"BufferLayer\"></a>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td colspan=\"2\">\r\n            <input type=\"text\" data-dojo-type=\"dijit.form.TextBox\" class=\"longInput\" data-dojo-attach-point=\"outputLayerInput\"  value=\"\">\r\n          </td>\r\n        </tr>\r\n      \r\n       </tbody>\r\n      </table>\r\n\r\n    </div>\r\n    <div id=\"buttonToolContentButtons\" style=\"padding:5px;margin-top:5px;border-top:solid 1px #BBB;\">\r\n        <button dojoType=\"dijit.form.Button\" dojoAttachPoint=\"_saveBtn\" class=\"esriLeadingMargin4\" dojoAttachEvent=\"onClick:_handleSaveBtnClick\">\r\n            ${i18n.runAnalysis}\r\n        </button>\r\n        <div dojoAttachPoint=\"_statusDiv\"></div>\r\n    </div>\r\n</div>\r\n",inputLayer:null,inputType:null,outputLayerName:null,bufferDistance:null,i18n:null,toolName:"CreateBuffers",helpFileName:"CreateBuffers",resultParameter:"BufferLayer",constructor:function(_4,_5){this.inherited(arguments);this._pbConnects=[];if(_4.containerNode){this.container=_4.containerNode;}},destroy:function(){this.inherited(arguments);_2.forEach(this._pbConnects,_2.disconnect);delete this._pbConnects;},postMixInProperties:function(){this.inherited(arguments);this.i18n={};_2.mixin(this.i18n,_2.i18n.getLocalization("esri","jsapi").common);_2.mixin(this.i18n,_2.i18n.getLocalization("esri","jsapi").analysisTools);_2.mixin(this.i18n,_2.i18n.getLocalization("esri","jsapi").bufferTool);},postCreate:function(){this.inherited(arguments);_2.addClass(this._form,"esriSimpleForm");this.bufferDistance=[];this.bufferDistance.push(this._bufferDist.get("value"));this._buildUI();},startup:function(){},_onClose:function(_6){if(_6){this._save();this.onSave();}this.onClose();},_toUpperFirstLetter:function(_7){return (_7.slice(0,1).toUpperCase()+_7.slice(1));},_handleSaveBtnClick:function(e){var _8={},_9={};if(this.inputLayer.url){_8.InputLayer=_2.toJson({url:this.inputLayer.url});var _a={url:this.inputLayer.url};if(this.inputLayer.getDefinitionExpression()){_a.filter=this.inputLayer.getDefinitionExpression();}_8.InputLayer=_2.toJson(_a);}else{if(!this.inputLayer.url){var _b={};var _c=this.inputLayer.toJson();_b.featureCollection=_c.layerDefinition;_b.featureCollection.features=_c.featureSet.features;_8.InputLayer=_2.toJson(_b);}}_8.DissolveType=(this._DissolveType&&this._DissolveType==="dissolve")?"Dissolve":"None";if(this.bufferDistType=="Attribute"){_8.Field=this._bufferDistAttribute.get("value");}else{_8.Distances=this.bufferDistance;}_8.Units=this._bufferUnits.get("value");if(this.bufferDistance.length){_8.RingType=(this._RingType==="rings")?"Rings":"Disks";}if(this.inputLayer.geometryType==="esriGeometryPolyline"||this.inputLayer.geometryType==="esriGeometryPolygon"){if(this.inputLayer.geometryType==="esriGeometryPolyline"){_8.SideType=(this._SideType&&this._SideType==="left")?"Left":((this._SideType&&this._SideType==="right")?"Right":"Full");}else{_8.SideType=(this._SideType&&this._SideType==="outside")?"Outside":"Full";}_8.EndType=(this._EndType&&this._EndType==="flat")?"Flat":"Round";}_8.OutputName=_2.toJson({serviceProperties:{name:_2.attr(this.outputLayerInput,"value")}});_9.jobParams=_8;_9.itemParams={"description":_2.string.substitute(this.i18n.itemDescription,{layername:this.inputLayer.name,distance_field:_8.Distances||_8.Field,units:_8.Units}),"tags":_2.string.substitute(this.i18n.itemTags,{layername:this.inputLayer.name}),"snippet":this.i18n.itemSnippet};this.execute(_9);},_handleLayerChange:function(_d){},_handleAttrSelectChange:function(_e){if(_e!=="0"){statsSelect=this.get("statisticSelect");if(statsSelect.get("value")!=="0"){if(!statsSelect.get("isnewRowAdded")){removeTd=statsSelect.get("removeTd");_2.style(removeTd,"display","block");var _f=statsSelect.get("referenceWidget");_2.hitch(_f,_f._createStatsRow());statsSelect.set("isnewRowAdded",true);}}}},_handleRadiusTypeChange:function(_10){this.bufferDistType=_10;_2.removeClass(this._Distance,"selected");_2.removeClass(this._Attribute,"selected");var _11=_2.attr(this._bufferDist,"value").split(" ");if(_10=="attribute"){_2.style(this._bufferDistAttribute.domNode,"display","block");_2.style(this._bufferDist.domNode,"display","none");_2.style(this._sizeHelp,"visibility","hidden");_2.style(this.ringTypes,"display","none");if(this.inputType=="polygon"){_2.style(this.polygonTypes,"display","block");_2.style(this.sideTypes,"display","none");_2.style(this.endTypes,"display","none");}else{if(this.inputType=="line"){_2.style(this.sideTypes,"display","block");_2.style(this.endTypes,"display","block");_2.style(this.polygonTypes,"display","none");}}_2.addClass(this._Attribute,"selected");}else{if(_10=="distance"){_2.style(this._bufferDistAttribute.domNode,"display","none");_2.style(this._bufferDist.domNode,"display","block");_2.style(this._sizeHelp,"visibility","visible");_2.addClass(this._Distance,"selected");if(_11.length>1){_2.style(this.ringTypes,"display","block");_2.style(this.sideTypes,"display","none");_2.style(this.endTypes,"display","none");_2.style(this.polygonTypes,"display","none");}else{if(this.inputType=="polygon"){_2.style(this.ringTypes,"display","none");_2.style(this.sideTypes,"display","none");_2.style(this.endTypes,"display","none");_2.style(this.polygonTypes,"display","block");}else{if(this.inputType=="line"){_2.style(this.ringTypes,"display","none");_2.style(this.sideTypes,"display","block");_2.style(this.endTypes,"display","block");_2.style(this.polygonTypes,"display","none");}}}}}},_handleDissolveTypeChange:function(_12){this._DissolveType=_12;_2.removeClass(this._Overlap,"selected");_2.removeClass(this._Dissolve,"selected");_2.addClass((_12=="none")?this._Overlap:this._Dissolve,"selected");},_handleRingTypeChange:function(_13){this._RingType=_13;_2.removeClass(this._Rings,"selected");_2.removeClass(this._Disks,"selected");_2.addClass((_13=="rings")?this._Rings:this._Disks,"selected");},_handlePolygonTypeChange:function(_14){this._SideType=_14;_2.removeClass(this._Include,"selected");_2.removeClass(this._Exclude,"selected");_2.addClass((_14=="full")?this._Include:this._Exclude,"selected");},_handleSideTypeChange:function(obj,_15){this._SideType=_15;_2.removeClass(this._Around,"selected");_2.removeClass(this._Left,"selected");_2.removeClass(this._Right,"selected");_2.addClass(obj,"selected");},_handleEndTypeChange:function(_16){this._EndType=_16;_2.removeClass(this._Round,"selected");_2.removeClass(this._Flat,"selected");_2.addClass((_16=="round")?this._Round:this._Flat,"selected");},_handleOptionsBtnClick:function(){if(_2.hasClass(this._optionsDiv,"disabled")){return;}else{if(_2.hasClass(this._optionsDiv,"optionsClose")){_2.removeClass(this._optionsDiv,"optionsClose");_2.addClass(this._optionsDiv,"optionsOpen");}else{if(_2.hasClass(this._optionsDiv,"optionsOpen")){_2.removeClass(this._optionsDiv,"optionsOpen");_2.addClass(this._optionsDiv,"optionsClose");}}}},_handleDistanceChange:function(){var val=_2.trim(_2.attr(this._bufferDist,"value")).split(" ");if(val.length>1){_2.style(this.ringTypes,"display","block");_2.style(this.sideTypes,"display","none");_2.style(this.endTypes,"display","none");_2.style(this.polygonTypes,"display","none");}else{if(this.inputType=="line"){_2.style(this.sideTypes,"display","block");_2.style(this.endTypes,"display","block");}else{if(this.inputType=="polygon"){_2.style(this.polygonTypes,"display","block");}}_2.style(this.ringTypes,"display","none");}this.bufferDistance=val;},_save:function(){},_buildUI:function(){this._loadConnections();esri.dijit.analysis.utils.initHelpLinks(this.domNode);if(this.inputLayer){_2.attr(this._bufferToolDescription,"innerHTML",_2.string.substitute(this.i18n.bufferDefine,{layername:this.inputLayer.name}));this.outputLayerInput.set("value",_2.string.substitute(this.i18n.outputLayerName,{layername:this.inputLayer.name}));var _17="";this.inputLayer.fields.forEach(function(f){if(f.type=="esriFieldTypeDouble"||f.type=="esriFieldTypeInteger"){this._bufferDistAttribute.addOption({label:f.alias,value:f.name});}},this);_2.attr(this._bufferOptionsHelpLink,"esriHelpTopic",(this.inputType==="polygon"?"BufferOptionPoly":(this.inputType==="line"?"BufferOptionsLine":"BufferType")));}this._bufferDist.set("validator",_2.hitch(this,this.validateDistance));if(this.inputType=="line"){_2.style(this.sideTypes,"display","block");_2.style(this.endTypes,"display","block");}else{if(this.inputType=="polygon"){_2.style(this.polygonTypes,"display","block");}}if(this.outputLayerName){this.outputLayerInput.set("value",this.outputLayerName);}},validateDistance:function(){var _18=this;this._handleDistanceChange();var val=_2.trim(this._bufferDist.value).split(" ");if(val.length===0){return false;}var _19=[];val.forEach(function(v){var _1a=_2.trim(v).match(/\D/g);if(_1a){_1a.forEach(function(m){if(m=="."){_19.push(1);}else{if(m=="-"&&_18.inputType=="polygon"){_19.push(1);}else{_19.push(0);}}});}});if(_2.indexOf(_19,0)!==-1){return false;}else{return true;}},_loadConnections:function(){this._connect(this,"onExecute",_2.hitch(this,"_onClose",false));this._connect(this._closeBtn,"onclick",_2.hitch(this,"_onClose",false));_2.connect(this._Distance,"onclick",_2.hitch(this,"_handleRadiusTypeChange","distance"));_2.connect(this._Attribute,"onclick",_2.hitch(this,"_handleRadiusTypeChange","attribute"));_2.connect(this._Overlap,"onclick",_2.hitch(this,"_handleDissolveTypeChange","none"));_2.connect(this._Dissolve,"onclick",_2.hitch(this,"_handleDissolveTypeChange","dissolve"));_2.connect(this._Include,"onclick",_2.hitch(this,"_handlePolygonTypeChange","full"));_2.connect(this._Exclude,"onclick",_2.hitch(this,"_handlePolygonTypeChange","outside"));_2.connect(this._Rings,"onclick",_2.hitch(this,"_handleRingTypeChange","rings"));_2.connect(this._Disks,"onclick",_2.hitch(this,"_handleRingTypeChange","disks"));_2.connect(this._Around,"onclick",_2.hitch(this,"_handleSideTypeChange",this._Around,"full"));_2.connect(this._Left,"onclick",_2.hitch(this,"_handleSideTypeChange",this._Left,"left"));_2.connect(this._Right,"onclick",_2.hitch(this,"_handleSideTypeChange",this._Right,"right"));_2.connect(this._Round,"onclick",_2.hitch(this,"_handleEndTypeChange","round"));_2.connect(this._Flat,"onclick",_2.hitch(this,"_handleEndTypeChange","flat"));},_setAnalysisGpServerAttr:function(url){this.analysisGpServer=url;this.set("toolServiceUrl",this.analysisGpServer+"/"+this.toolName);},_setInputLayerAttr:function(_1b){if(_1b.geometryType==="esriGeometryPolygon"){this.inputLayer=_1b;this.inputType="polygon";}else{if(_1b.geometryType==="esriGeometryPolyline"){this.inputLayer=_1b;this.inputType="line";}else{if(_1b.geometryType==="esriGeometryPoint"){this.inputLayer=_1b;this.inputType="point";}}}},_setLayerAttr:function(_1c){if(_1c.geometryType==="esriGeometryPolygon"){this.inputType="polygon";}else{if(_1c.geometryType==="esriGeometryPolyline"){this.inputType="line";}else{if(_1c.geometryType==="esriGeometryPoint"){this.inputType="point";}}}this.inputLayer=_1c;},_setLayersAttr:function(_1d){this._setLayerAttr(_1d);},_setDisableRunAnalysisAttr:function(_1e){this._saveBtn.set("disabled",_1e);},_connect:function(_1f,evt,_20){this._pbConnects.push(_2.connect(_1f,evt,_20));},onSave:function(){},onClose:function(){}});});