/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
require({cache:{"esri/layers/FeatureType":function(){define("esri/layers/FeatureType",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/lang","esri/symbols/jsonUtils","esri/layers/RangeDomain","esri/layers/CodedValueDomain","esri/layers/InheritedDomain","esri/layers/FeatureTemplate"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b){var _c=_1(null,{declaredClass:"esri.layers.FeatureType",constructor:function(_d){if(_d&&_2.isObject(_d)){this.id=_d.id;this.name=_d.name;var _e=_d.symbol;if(_e){this.symbol=_7.fromJson(_e);}var _f=_d.domains,_10,i;var _11=this.domains={};for(_10 in _f){if(_f.hasOwnProperty(_10)){var _12=_f[_10];switch(_12.type){case "range":_11[_10]=new _8(_12);break;case "codedValue":_11[_10]=new _9(_12);break;case "inherited":_11[_10]=new _a(_12);break;}}}var _13=_d.templates;if(_13){var _14=this.templates=[];for(i=0;i<_13.length;i++){_14.push(new _b(_13[i]));}}}},toJson:function(){var _15={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()};var _16,_17=this.domains,_18=this.templates,_19=_6.fixJson;if(_17){var _1a=_15.domains={};for(_16 in _17){if(_17.hasOwnProperty(_16)){_1a[_16]=_17[_16]&&_17[_16].toJson();}}_19(_1a);}if(_18){_15.templates=_3.map(_18,function(_1b){return _1b.toJson();});}return _19(_15);}});if(_4("extend-esri")){_2.setObject("layers.FeatureType",_c,_5);}return _c;});},"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"button presentation\" aria-hidden=\"true\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n","dijit/form/ComboBoxMixin":function(){require({cache:{"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"button presentation\" aria-hidden=\"true\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"}});define("dijit/form/ComboBoxMixin",["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/kernel","dojo/_base/lang","dojo/store/util/QueryResults","./_AutoCompleterMixin","./_ComboBoxMenu","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(_1c,_1d,_1e,_1f,_20,_21,_22,_23,_24){return _1c("dijit.form.ComboBoxMixin",[_23,_21],{dropDownClass:_22,hasDownArrow:true,templateString:_24,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},_setHasDownArrowAttr:function(val){this._set("hasDownArrow",val);this._buttonNode.style.display=val?"":"none";},_showResultList:function(){this.displayMessage("");this.inherited(arguments);},_setStoreAttr:function(_25){if(!_25.get){_1f.mixin(_25,{_oldAPI:true,get:function(id){var _26=new _1d();this.fetchItemByIdentity({identity:id,onItem:function(_27){_26.resolve(_27);},onError:function(_28){_26.reject(_28);}});return _26.promise;},query:function(_29,_2a){var _2b=new _1d(function(){_2c.abort&&_2c.abort();});_2b.total=new _1d();var _2c=this.fetch(_1f.mixin({query:_29,onBegin:function(_2d){_2b.total.resolve(_2d);},onComplete:function(_2e){_2b.resolve(_2e);},onError:function(_2f){_2b.reject(_2f);}},_2a));return _20(_2b);}});}this._set("store",_25);},postMixInProperties:function(){var _30=this.params.store||this.store;if(_30){this._setStoreAttr(_30);}this.inherited(arguments);if(!this.params.store&&!this.store._oldAPI){var _31=this.declaredClass;_1f.mixin(this.store,{getValue:function(_32,_33){_1e.deprecated(_31+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return _32[_33];},getLabel:function(_34){_1e.deprecated(_31+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return _34.name;},fetch:function(_35){_1e.deprecated(_31+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");var _36=["dojo/data/ObjectStore"];require(_36,_1f.hitch(this,function(_37){new _37({objectStore:this}).fetch(_35);}));}});}}});});},"dijit/form/RangeBoundTextBox":function(){define("dijit/form/RangeBoundTextBox",["dojo/_base/declare","dojo/i18n","./MappedTextBox"],function(_38,_39,_3a){var _3b=_38("dijit.form.RangeBoundTextBox",_3a,{rangeMessage:"",rangeCheck:function(_3c,_3d){return ("min" in _3d?(this.compare(_3c,_3d.min)>=0):true)&&("max" in _3d?(this.compare(_3c,_3d.max)<=0):true);},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints);},_isDefinitelyOutOfRange:function(){var val=this.get("value");if(val==null){return false;}var _3e=false;if("min" in this.constraints){var min=this.constraints.min;_3e=this.compare(val,((typeof min=="number")&&min>=0&&val!=0)?0:min)<0;}if(!_3e&&("max" in this.constraints)){var max=this.constraints.max;_3e=this.compare(val,((typeof max!="number")||max>0)?max:0)>0;}return _3e;},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange();},isValid:function(_3f){return this.inherited(arguments)&&((this._isEmpty(this.textbox.value)&&!this.required)||this.isInRange(_3f));},getErrorMessage:function(_40){var v=this.get("value");if(v!=null&&v!==""&&(typeof v!="number"||!isNaN(v))&&!this.isInRange(_40)){return this.rangeMessage;}return this.inherited(arguments);},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage){this.messages=_39.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage;}},applyTextDir:function(){}});return _3b;});},"dijit/hccss":function(){define("dijit/hccss",["dojo/dom-class","dojo/hccss","dojo/ready","dojo/_base/window"],function(_41,has,_42,win){_42(90,function(){if(has("highcontrast")){_41.add(win.body(),"dijit_a11y");}});return has;});},"dijit/_Contained":function(){define("dijit/_Contained",["dojo/_base/declare","./registry"],function(_43,_44){return _43("dijit._Contained",null,{_getSibling:function(_45){var _46=this.domNode;do{_46=_46[_45+"Sibling"];}while(_46&&_46.nodeType!=1);return _46&&_44.byNode(_46);},getPreviousSibling:function(){return this._getSibling("previous");},getNextSibling:function(){return this._getSibling("next");},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild){return -1;}return p.getIndexOfChild(this);}});});},"dijit/form/_TextBoxMixin":function(){define("dijit/form/_TextBoxMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/on","../main"],function(_47,_48,dom,_49,_4a,_4b,on,_4c){var _4d=_48("dijit.form._TextBoxMixin",null,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints);},_setValueAttr:function(_4e,_4f,_50){var _51;if(_4e!==undefined){_51=this.filter(_4e);if(typeof _50!="string"){if(_51!==null&&((typeof _51!="number")||!isNaN(_51))){_50=this.filter(this.format(_51,this.constraints));}else{_50="";}}}if(_50!=null&&((typeof _50)!="number"||!isNaN(_50))&&this.textbox.value!=_50){this.textbox.value=_50;this._set("displayedValue",this.get("displayedValue"));}if(this.textDir=="auto"){this.applyTextDir(this.focusNode,_50);}this.inherited(arguments,[_51,_4f]);},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value);},_setDisplayedValueAttr:function(_52){if(_52==null){_52="";}else{if(typeof _52!="string"){_52=String(_52);}}this.textbox.value=_52;this._setValueAttr(this.get("value"),undefined);this._set("displayedValue",this.get("displayedValue"));if(this.textDir=="auto"){this.applyTextDir(this.focusNode,_52);}},format:function(_53){return _53==null?"":(_53.toString?_53.toString():_53);},parse:function(_54){return _54;},_refreshState:function(){},onInput:function(){},__skipInputEvent:false,_onInput:function(evt){if(this.textDir=="auto"){this.applyTextDir(this.focusNode,this.focusNode.value);}this._processInput(evt);},_processInput:function(evt){this._refreshState();this._set("displayedValue",this.get("displayedValue"));},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);var _55=function(e){var _56;if(e.type=="keydown"){_56=e.keyCode;switch(_56){case _4a.SHIFT:case _4a.ALT:case _4a.CTRL:case _4a.META:case _4a.CAPS_LOCK:case _4a.NUM_LOCK:case _4a.SCROLL_LOCK:return;}if(!e.ctrlKey&&!e.metaKey&&!e.altKey){switch(_56){case _4a.NUMPAD_0:case _4a.NUMPAD_1:case _4a.NUMPAD_2:case _4a.NUMPAD_3:case _4a.NUMPAD_4:case _4a.NUMPAD_5:case _4a.NUMPAD_6:case _4a.NUMPAD_7:case _4a.NUMPAD_8:case _4a.NUMPAD_9:case _4a.NUMPAD_MULTIPLY:case _4a.NUMPAD_PLUS:case _4a.NUMPAD_ENTER:case _4a.NUMPAD_MINUS:case _4a.NUMPAD_PERIOD:case _4a.NUMPAD_DIVIDE:return;}if((_56>=65&&_56<=90)||(_56>=48&&_56<=57)||_56==_4a.SPACE){return;}var _57=false;for(var i in _4a){if(_4a[i]===e.keyCode){_57=true;break;}}if(!_57){return;}}}_56=e.charCode>=32?String.fromCharCode(e.charCode):e.charCode;if(!_56){_56=(e.keyCode>=65&&e.keyCode<=90)||(e.keyCode>=48&&e.keyCode<=57)||e.keyCode==_4a.SPACE?String.fromCharCode(e.keyCode):e.keyCode;}if(!_56){_56=229;}if(e.type=="keypress"){if(typeof _56!="string"){return;}if((_56>="a"&&_56<="z")||(_56>="A"&&_56<="Z")||(_56>="0"&&_56<="9")||(_56===" ")){if(e.ctrlKey||e.metaKey||e.altKey){return;}}}if(e.type=="input"){if(this.__skipInputEvent){this.__skipInputEvent=false;return;}}else{this.__skipInputEvent=true;}var _58={faux:true},_59;for(_59 in e){if(_59!="layerX"&&_59!="layerY"){var v=e[_59];if(typeof v!="function"&&typeof v!="undefined"){_58[_59]=v;}}}_4b.mixin(_58,{charOrCode:_56,_wasConsumed:false,preventDefault:function(){_58._wasConsumed=true;e.preventDefault();},stopPropagation:function(){e.stopPropagation();}});if(this.onInput(_58)===false){_58.preventDefault();_58.stopPropagation();}if(_58._wasConsumed){return;}this.defer(function(){this._onInput(_58);});};this.own(on(this.textbox,"keydown, keypress, paste, cut, input, compositionend",_4b.hitch(this,_55)));},_blankValue:"",filter:function(val){if(val===null){return this._blankValue;}if(typeof val!="string"){return val;}if(this.trim){val=_4b.trim(val);}if(this.uppercase){val=val.toUpperCase();}if(this.lowercase){val=val.toLowerCase();}if(this.propercase){val=val.replace(/[^\s]+/g,function(_5a){return _5a.substring(0,1).toUpperCase()+_5a.substring(1);});}return val;},_setBlurValue:function(){this._setValueAttr(this.get("value"),true);},_onBlur:function(e){if(this.disabled){return;}this._setBlurValue();this.inherited(arguments);},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd;},_onFocus:function(by){if(this.disabled||this.readOnly){return;}if(this.selectOnClick&&by=="mouse"){this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);this._selectOnClickHandle=null;if(!this._isTextSelected()){_4d.selectInputText(this.textbox);}});this.defer(function(){if(this._selectOnClickHandle){this.disconnect(this._selectOnClickHandle);this._selectOnClickHandle=null;}},500);}this.inherited(arguments);this._refreshState();},reset:function(){this.textbox.value="";this.inherited(arguments);},_setTextDirAttr:function(_5b){if(!this._created||this.textDir!=_5b){this._set("textDir",_5b);this.applyTextDir(this.focusNode,this.focusNode.value);}}});_4d._setSelectionRange=_4c._setSelectionRange=function(_5c,_5d,_5e){if(_5c.setSelectionRange){_5c.setSelectionRange(_5d,_5e);}};_4d.selectInputText=_4c.selectInputText=function(_5f,_60,_61){_5f=dom.byId(_5f);if(isNaN(_60)){_60=0;}if(isNaN(_61)){_61=_5f.value?_5f.value.length:0;}try{_5f.focus();_4d._setSelectionRange(_5f,_60,_61);}catch(e){}};return _4d;});},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(_62){return function(_63,_64){switch(typeof _63){default:throw new Error("Can not query with a "+typeof _63);case "object":case "undefined":var _65=_63;_63=function(_66){for(var key in _65){var _67=_65[key];if(_67&&_67.test){if(!_67.test(_66[key],_66)){return false;}}else{if(_67!=_66[key]){return false;}}}return true;};break;case "string":if(!this[_63]){throw new Error("No filter function "+_63+" was found in store");}_63=this[_63];case "function":}function _68(_69){var _6a=_62.filter(_69,_63);var _6b=_64&&_64.sort;if(_6b){_6a.sort(typeof _6b=="function"?_6b:function(a,b){for(var _6c,i=0;_6c=_6b[i];i++){var _6d=a[_6c.attribute];var _6e=b[_6c.attribute];if(_6d!=_6e){return !!_6c.descending==(_6d==null||_6d>_6e)?-1:1;}}return 0;});}if(_64&&(_64.start||_64.count)){var _6f=_6a.length;_6a=_6a.slice(_64.start||0,(_64.start||0)+(_64.count||Infinity));_6a.total=_6f;}return _6a;};_68.matches=_63;return _68;};});},"dijit/form/ToggleButton":function(){define("dijit/form/ToggleButton",["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(_70,_71,_72,_73){return _70("dijit.form.ToggleButton",[_72,_73],{baseClass:"dijitToggleButton",setChecked:function(_74){_71.deprecated("setChecked("+_74+") is deprecated. Use set('checked',"+_74+") instead.","","2.0");this.set("checked",_74);}});});},"dijit/Toolbar":function(){define("dijit/Toolbar",["require","dojo/_base/declare","dojo/has","dojo/keys","dojo/ready","./_Widget","./_KeyNavContainer","./_TemplatedMixin"],function(_75,_76,has,_77,_78,_79,_7a,_7b){if(has("dijit-legacy-requires")){_78(0,function(){var _7c=["dijit/ToolbarSeparator"];_75(_7c);});}return _76("dijit.Toolbar",[_79,_7b,_7a],{templateString:"<div class=\"dijit\" role=\"toolbar\" tabIndex=\"${tabIndex}\" data-dojo-attach-point=\"containerNode\">"+"</div>",baseClass:"dijitToolbar",postCreate:function(){this.inherited(arguments);this.connectKeyNavHandlers(this.isLeftToRight()?[_77.LEFT_ARROW]:[_77.RIGHT_ARROW],this.isLeftToRight()?[_77.RIGHT_ARROW]:[_77.LEFT_ARROW]);}});});},"dijit/Viewport":function(){define("dijit/Viewport",["dojo/Evented","dojo/on","dojo/ready","dojo/sniff","dojo/_base/window","dojo/window"],function(_7d,on,_7e,has,win,_7f){var _80=new _7d();_7e(200,function(){var _81=_7f.getBox();_80._rlh=on(win.global,"resize",function(){var _82=_7f.getBox();if(_81.h==_82.h&&_81.w==_82.w){return;}_81=_82;_80.emit("resize");});if(has("ie")==8){var _83=screen.deviceXDPI;setInterval(function(){if(screen.deviceXDPI!=_83){_83=screen.deviceXDPI;_80.emit("resize");}},500);}});return _80;});},"dojo/parser":function(){define(["require","./_base/kernel","./_base/lang","./_base/array","./_base/config","./_base/html","./_base/window","./_base/url","./_base/json","./aspect","./date/stamp","./Deferred","./has","./query","./on","./ready"],function(_84,_85,_86,_87,_88,_89,_8a,_8b,_8c,_8d,_8e,_8f,has,_90,don,_91){new Date("X");var _92=0;_8d.after(_86,"extend",function(){_92++;},true);function _93(_94){var map=_94._nameCaseMap,_95=_94.prototype;if(!map||map._extendCnt<_92){map=_94._nameCaseMap={};for(var _96 in _95){if(_96.charAt(0)==="_"){continue;}map[_96.toLowerCase()]=_96;}map._extendCnt=_92;}return map;};var _97={};function _98(_99){var ts=_99.join();if(!_97[ts]){var _9a=[];for(var i=0,l=_99.length;i<l;i++){var t=_99[i];_9a[_9a.length]=(_97[t]=_97[t]||(_86.getObject(t)||(~t.indexOf("/")&&_84(t))));}var _9b=_9a.shift();_97[ts]=_9a.length?(_9b.createSubclass?_9b.createSubclass(_9a):_9b.extend.apply(_9b,_9a)):_9b;}return _97[ts];};var _9c={_clearCache:function(){_92++;_97={};},_functionFromScript:function(_9d,_9e){var _9f="",_a0="",_a1=(_9d.getAttribute(_9e+"args")||_9d.getAttribute("args")),_a2=_9d.getAttribute("with");var _a3=(_a1||"").split(/\s*,\s*/);if(_a2&&_a2.length){_87.forEach(_a2.split(/\s*,\s*/),function(_a4){_9f+="with("+_a4+"){";_a0+="}";});}return new Function(_a3,_9f+_9d.innerHTML+_a0);},instantiate:function(_a5,_a6,_a7){_a6=_a6||{};_a7=_a7||{};var _a8=(_a7.scope||_85._scopeName)+"Type",_a9="data-"+(_a7.scope||_85._scopeName)+"-",_aa=_a9+"type",_ab=_a9+"mixins";var _ac=[];_87.forEach(_a5,function(_ad){var _ae=_a8 in _a6?_a6[_a8]:_ad.getAttribute(_aa)||_ad.getAttribute(_a8);if(_ae){var _af=_ad.getAttribute(_ab),_b0=_af?[_ae].concat(_af.split(/\s*,\s*/)):[_ae];_ac.push({node:_ad,types:_b0});}});return this._instantiate(_ac,_a6,_a7);},_instantiate:function(_b1,_b2,_b3){var _b4=_87.map(_b1,function(obj){var _b5=obj.ctor||_98(obj.types);if(!_b5){throw new Error("Unable to resolve constructor for: '"+obj.types.join()+"'");}return this.construct(_b5,obj.node,_b2,_b3,obj.scripts,obj.inherited);},this);if(!_b2._started&&!_b3.noStart){_87.forEach(_b4,function(_b6){if(typeof _b6.startup==="function"&&!_b6._started){_b6.startup();}});}return _b4;},construct:function(_b7,_b8,_b9,_ba,_bb,_bc){var _bd=_b7&&_b7.prototype;_ba=_ba||{};var _be={};if(_ba.defaults){_86.mixin(_be,_ba.defaults);}if(_bc){_86.mixin(_be,_bc);}var _bf;if(has("dom-attributes-explicit")){_bf=_b8.attributes;}else{if(has("dom-attributes-specified-flag")){_bf=_87.filter(_b8.attributes,function(a){return a.specified;});}else{var _c0=/^input$|^img$/i.test(_b8.nodeName)?_b8:_b8.cloneNode(false),_c1=_c0.outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,"");_bf=_87.map(_c1.split(/\s+/),function(_c2){var _c3=_c2.toLowerCase();return {name:_c2,value:(_b8.nodeName=="LI"&&_c2=="value")||_c3=="enctype"?_b8.getAttribute(_c3):_b8.getAttributeNode(_c3).value};});}}var _c4=_ba.scope||_85._scopeName,_c5="data-"+_c4+"-",_c6={};if(_c4!=="dojo"){_c6[_c5+"props"]="data-dojo-props";_c6[_c5+"type"]="data-dojo-type";_c6[_c5+"mixins"]="data-dojo-mixins";_c6[_c4+"type"]="dojoType";_c6[_c5+"id"]="data-dojo-id";}var i=0,_c7,_c8=[],_c9,_ca;while(_c7=_bf[i++]){var _cb=_c7.name,_cc=_cb.toLowerCase(),_cd=_c7.value;switch(_c6[_cc]||_cc){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":_ca=_cd;break;case "data-dojo-id":case "jsid":_c9=_cd;break;case "data-dojo-attach-point":case "dojoattachpoint":_be.dojoAttachPoint=_cd;break;case "data-dojo-attach-event":case "dojoattachevent":_be.dojoAttachEvent=_cd;break;case "class":_be["class"]=_b8.className;break;case "style":_be["style"]=_b8.style&&_b8.style.cssText;break;default:if(!(_cb in _bd)){var map=_93(_b7);_cb=map[_cc]||_cb;}if(_cb in _bd){switch(typeof _bd[_cb]){case "string":_be[_cb]=_cd;break;case "number":_be[_cb]=_cd.length?Number(_cd):NaN;break;case "boolean":_be[_cb]=_cd.toLowerCase()!="false";break;case "function":if(_cd===""||_cd.search(/[^\w\.]+/i)!=-1){_be[_cb]=new Function(_cd);}else{_be[_cb]=_86.getObject(_cd,false)||new Function(_cd);}_c8.push(_cb);break;default:var _ce=_bd[_cb];_be[_cb]=(_ce&&"length" in _ce)?(_cd?_cd.split(/\s*,\s*/):[]):(_ce instanceof Date)?(_cd==""?new Date(""):_cd=="now"?new Date():_8e.fromISOString(_cd)):(_ce instanceof _8b)?(_85.baseUrl+_cd):_8c.fromJson(_cd);}}else{_be[_cb]=_cd;}}}for(var j=0;j<_c8.length;j++){var _cf=_c8[j].toLowerCase();_b8.removeAttribute(_cf);_b8[_cf]=null;}if(_ca){try{_ca=_8c.fromJson.call(_ba.propsThis,"{"+_ca+"}");_86.mixin(_be,_ca);}catch(e){throw new Error(e.toString()+" in data-dojo-props='"+_ca+"'");}}_86.mixin(_be,_b9);if(!_bb){_bb=(_b7&&(_b7._noScript||_bd._noScript)?[]:_90("> script[type^='dojo/']",_b8));}var _d0=[],_d1=[],_d2=[],ons=[];if(_bb){for(i=0;i<_bb.length;i++){var _d3=_bb[i];_b8.removeChild(_d3);var _d4=(_d3.getAttribute(_c5+"event")||_d3.getAttribute("event")),_d5=_d3.getAttribute(_c5+"prop"),_d6=_d3.getAttribute(_c5+"method"),_d7=_d3.getAttribute(_c5+"advice"),_d8=_d3.getAttribute("type"),nf=this._functionFromScript(_d3,_c5);if(_d4){if(_d8=="dojo/connect"){_d0.push({method:_d4,func:nf});}else{if(_d8=="dojo/on"){ons.push({event:_d4,func:nf});}else{_be[_d4]=nf;}}}else{if(_d8=="dojo/aspect"){_d0.push({method:_d6,advice:_d7,func:nf});}else{if(_d8=="dojo/watch"){_d2.push({prop:_d5,func:nf});}else{_d1.push(nf);}}}}}var _d9=_b7.markupFactory||_bd.markupFactory;var _da=_d9?_d9(_be,_b8,_b7):new _b7(_be,_b8);if(_c9){_86.setObject(_c9,_da);}for(i=0;i<_d0.length;i++){_8d[_d0[i].advice||"after"](_da,_d0[i].method,_86.hitch(_da,_d0[i].func),true);}for(i=0;i<_d1.length;i++){_d1[i].call(_da);}for(i=0;i<_d2.length;i++){_da.watch(_d2[i].prop,_d2[i].func);}for(i=0;i<ons.length;i++){don(_da,ons[i].event,ons[i].func);}return _da;},scan:function(_db,_dc){var _dd=[],_de=[],_df={};var _e0=(_dc.scope||_85._scopeName)+"Type",_e1="data-"+(_dc.scope||_85._scopeName)+"-",_e2=_e1+"type",_e3=_e1+"textdir",_e4=_e1+"mixins";var _e5=_db.firstChild;var _e6=_dc.inherited;if(!_e6){function _e7(_e8,_e9){return (_e8.getAttribute&&_e8.getAttribute(_e9))||(_e8.parentNode&&_e7(_e8.parentNode,_e9));};_e6={dir:_e7(_db,"dir"),lang:_e7(_db,"lang"),textDir:_e7(_db,_e3)};for(var key in _e6){if(!_e6[key]){delete _e6[key];}}}var _ea={inherited:_e6};var _eb;var _ec;function _ed(_ee){if(!_ee.inherited){_ee.inherited={};var _ef=_ee.node,_f0=_ed(_ee.parent);var _f1={dir:_ef.getAttribute("dir")||_f0.dir,lang:_ef.getAttribute("lang")||_f0.lang,textDir:_ef.getAttribute(_e3)||_f0.textDir};for(var key in _f1){if(_f1[key]){_ee.inherited[key]=_f1[key];}}}return _ee.inherited;};while(true){if(!_e5){if(!_ea||!_ea.node){break;}_e5=_ea.node.nextSibling;_ec=false;_ea=_ea.parent;_eb=_ea.scripts;continue;}if(_e5.nodeType!=1){_e5=_e5.nextSibling;continue;}if(_eb&&_e5.nodeName.toLowerCase()=="script"){_f2=_e5.getAttribute("type");if(_f2&&/^dojo\/\w/i.test(_f2)){_eb.push(_e5);}_e5=_e5.nextSibling;continue;}if(_ec){_e5=_e5.nextSibling;continue;}var _f2=_e5.getAttribute(_e2)||_e5.getAttribute(_e0);var _f3=_e5.firstChild;if(!_f2&&(!_f3||(_f3.nodeType==3&&!_f3.nextSibling))){_e5=_e5.nextSibling;continue;}var _f4;var _f5=null;if(_f2){var _f6=_e5.getAttribute(_e4),_f7=_f6?[_f2].concat(_f6.split(/\s*,\s*/)):[_f2];try{_f5=_98(_f7);}catch(e){}if(!_f5){_87.forEach(_f7,function(t){if(~t.indexOf("/")&&!_df[t]){_df[t]=true;_de[_de.length]=t;}});}var _f8=_f5&&!_f5.prototype._noScript?[]:null;_f4={types:_f7,ctor:_f5,parent:_ea,node:_e5,scripts:_f8};_f4.inherited=_ed(_f4);_dd.push(_f4);}else{_f4={node:_e5,scripts:_eb,parent:_ea};}_e5=_f3;_eb=_f8;_ec=_f5&&_f5.prototype.stopParser&&!(_dc.template);_ea=_f4;}var d=new _8f();if(_de.length){if(has("dojo-debug-messages")){console.warn("WARNING: Modules being Auto-Required: "+_de.join(", "));}_84(_de,function(){d.resolve(_87.filter(_dd,function(_f9){if(!_f9.ctor){try{_f9.ctor=_98(_f9.types);}catch(e){}}var _fa=_f9.parent;while(_fa&&!_fa.types){_fa=_fa.parent;}var _fb=_f9.ctor&&_f9.ctor.prototype;_f9.instantiateChildren=!(_fb&&_fb.stopParser&&!(_dc.template));_f9.instantiate=!_fa||(_fa.instantiate&&_fa.instantiateChildren);return _f9.instantiate;}));});}else{d.resolve(_dd);}return d.promise;},_require:function(_fc){var _fd=_8c.fromJson("{"+_fc.innerHTML+"}"),_fe=[],_ff=[],d=new _8f();for(var name in _fd){_fe.push(name);_ff.push(_fd[name]);}_84(_ff,function(){for(var i=0;i<_fe.length;i++){_86.setObject(_fe[i],arguments[i]);}d.resolve(arguments);});return d.promise;},_scanAmd:function(root){var _100=new _8f(),_101=_100.promise;_100.resolve(true);var self=this;_90("script[type='dojo/require']",root).forEach(function(node){_101=_101.then(function(){return self._require(node);});node.parentNode.removeChild(node);});return _101;},parse:function(_102,_103){var root;if(!_103&&_102&&_102.rootNode){_103=_102;root=_103.rootNode;}else{if(_102&&_86.isObject(_102)&&!("nodeType" in _102)){_103=_102;}else{root=_102;}}root=root?_89.byId(root):_8a.body();_103=_103||{};var _104=_103.template?{template:true}:{},_105=[],self=this;var p=this._scanAmd(root,_103).then(function(){return self.scan(root,_103);}).then(function(_106){return _105=_105.concat(self._instantiate(_106,_104,_103));}).otherwise(function(e){console.error("dojo/parser::parse() error",e);throw e;});_86.mixin(_105,p);return _105;}};if(1){_85.parser=_9c;}if(_88.parseOnLoad){_91(100,_9c,"parse");}return _9c;});},"url:esri/dijit/templates/AttributeInspector.html":"<div class=\"esriAttributeInspector\">\r\n    <div class=\"atiLayerName\" dojoAttachPoint=\"layerName\"></div>\r\n    <div class=\"atiAttributes\" dojoAttachPoint=\"attributeTable\"></div>\r\n    <div dojoAttachPoint=\"attachmentEditor\"></div>\r\n    <div class=\"atiEditorTrackingInfo\" dojoAttachPoint=\"editorTrackingInfoDiv\"></div>\r\n    <div class=\"atiButtons\" dojoAttachPoint=\"editButtons\">\r\n        <button  dojoType=\"dijit.form.Button\" class=\"atiButton atiDeleteButton\"  dojoAttachPoint=\"deleteBtn\" dojoAttachEvent=\"onClick: onDeleteBtn\" showLabel=\"true\" type=\"button\">${NLS_deleteFeature}</button>\r\n        <div class=\"atiNavButtons\" dojoAttachPoint=\"navButtons\">\r\n            <div class=\"atiNavMessage\" dojoAttachPoint=\"navMessage\"></div>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiFirstIcon\" dojoAttachPoint=\"firstFeatureButton\" dojoAttachEvent=\"onClick: onFirstFeature\" showLabel=\"false\" type=\"button\">${NLS_first}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiPrevIcon\" dojoAttachPoint=\"prevFeatureButton\" dojoAttachEvent=\"onClick: onPreviousFeature\" showLabel=\"false\" type=\"button\">${NLS_previous}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiNextIcon\" dojoAttachPoint=\"nextFeatureButton\" dojoAttachEvent=\"onClick: onNextFeature\" showLabel=\"false\" type=\"button\">${NLS_next}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiLastIcon\" dojoAttachPoint=\"lastFeatureButton\" dojoAttachEvent=\"onClick: onLastFeature\" showLabel=\"false\" type=\"button\">${NLS_last}</button>\r\n        </div>\r\n    </div>\r\n</div>\r\n","dijit/_Container":function(){define("dijit/_Container",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct"],function(_107,_108,_109){return _108("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},addChild:function(_10a,_10b){var _10c=this.containerNode;if(_10b&&typeof _10b=="number"){var _10d=this.getChildren();if(_10d&&_10d.length>=_10b){_10c=_10d[_10b-1].domNode;_10b="after";}}_109.place(_10a.domNode,_10c,_10b);if(this._started&&!_10a._started){_10a.startup();}},removeChild:function(_10e){if(typeof _10e=="number"){_10e=this.getChildren()[_10e];}if(_10e){var node=_10e.domNode;if(node&&node.parentNode){node.parentNode.removeChild(node);}}},hasChildren:function(){return this.getChildren().length>0;},_getSiblingOfChild:function(_10f,dir){var _110=this.getChildren(),idx=_107.indexOf(this.getChildren(),_10f);return _110[idx+dir];},getIndexOfChild:function(_111){return _107.indexOf(this.getChildren(),_111);}});});},"dijit/a11yclick":function(){define("dijit/a11yclick",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","dojo/_base/unload","dojo/_base/window"],function(on,_112,keys,_113,has,_114,win){var _115=null;if(has("dom-addeventlistener")){win.doc.addEventListener("keydown",function(evt){_115=evt.target;},true);}else{(function(){var _116=function(evt){_115=evt.srcElement;};win.doc.attachEvent("onkeydown",_116);_114.addOnWindowUnload(function(){win.doc.detachEvent("onkeydown",_116);});})();}function _117(e){return (e.keyCode===keys.ENTER||e.keyCode===keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey;};return function(node,_118){if(/input|button/i.test(node.nodeName)){return on(node,"click",_118);}else{var _119=[on(node,"keydown",function(e){if(_117(e)){_115=e.target;e.preventDefault();}}),on(node,"keyup",function(e){if(_117(e)&&e.target==_115){_115=null;on.emit(e.target,"click",{cancelable:true,bubbles:true});}}),on(node,"click",function(e){_118.call(this,e);})];if(has("touch")){var _11a;_119.push(on(node,"touchend",function(e){var _11b=e.target;_11a=setTimeout(function(){_11a=null;on.emit(_11b,"click",{cancelable:true,bubbles:true});},600);}),on(node,"click",function(e){if(_11a){clearTimeout(_11a);}}));}return {remove:function(){_112.forEach(_119,function(h){h.remove();});if(_11a){clearTimeout(_11a);_11a=null;}}};}};return ret;});},"dijit/Editor":function(){define("dijit/Editor",["require","dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/i18n","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/string","dojo/topic","dojo/_base/window","./_base/focus","./_Container","./Toolbar","./ToolbarSeparator","./layout/_LayoutWidget","./form/ToggleButton","./_editor/_Plugin","./_editor/plugins/EnterKeyHandling","./_editor/html","./_editor/range","./_editor/RichText","./main","dojo/i18n!./_editor/nls/commands"],function(_11c,_11d,_11e,_11f,i18n,_120,_121,_122,_123,_124,keys,lang,has,_125,_126,win,_127,_128,_129,_12a,_12b,_12c,_12d,_12e,html,_12f,_130,_131){var _132=_11e("dijit.Editor",_130,{plugins:null,extraPlugins:null,constructor:function(){if(!lang.isArray(this.plugins)){this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull",_12e];}this._plugins=[];this._editInterval=this.editActionInterval*1000;if(has("ie")){this.events.push("onBeforeDeactivate");this.events.push("onBeforeActivate");}},postMixInProperties:function(){this.setValueDeferred=new _11f();this.inherited(arguments);},postCreate:function(){this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);if(lang.isArray(this.extraPlugins)){this.plugins=this.plugins.concat(this.extraPlugins);}this.inherited(arguments);this.commands=i18n.getLocalization("dijit._editor","commands",this.lang);if(!this.toolbar){this.toolbar=new _129({ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang});this.header.appendChild(this.toolbar.domNode);}_11d.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.resolve(true);_121.add(this.iframe.parentNode,"dijitEditorIFrameContainer");_121.add(this.iframe,"dijitEditorIFrame");_120.set(this.iframe,"allowTransparency",true);if(has("webkit")){_123.set(this.domNode,"KhtmlUserSelect","none");}this.toolbar.startup();this.onNormalizedDisplayChanged();},destroy:function(){_11d.forEach(this._plugins,function(p){if(p&&p.destroy){p.destroy();}});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments);},addPlugin:function(_133,_134){var args=lang.isString(_133)?{name:_133}:lang.isFunction(_133)?{ctor:_133}:_133;if(!args.setEditor){var o={"args":args,"plugin":null,"editor":this};if(args.name){if(_12d.registry[args.name]){o.plugin=_12d.registry[args.name](args);}else{_126.publish(_131._scopeName+".Editor.getPlugin",o);}}if(!o.plugin){try{var pc=args.ctor||lang.getObject(args.name)||_11c(args.name);if(pc){o.plugin=new pc(args);}}catch(e){throw new Error(this.id+": cannot find plugin ["+args.name+"]");}}if(!o.plugin){throw new Error(this.id+": cannot find plugin ["+args.name+"]");}_133=o.plugin;}if(arguments.length>1){this._plugins[_134]=_133;}else{this._plugins.push(_133);}_133.setEditor(this);if(lang.isFunction(_133.setToolbar)){_133.setToolbar(this.toolbar);}},resize:function(size){if(size){_12b.prototype.resize.apply(this,arguments);}},layout:function(){var _135=(this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+_122.getPadBorderExtents(this.iframe.parentNode).h+_122.getMarginExtents(this.iframe.parentNode).h));this.editingArea.style.height=_135+"px";if(this.iframe){this.iframe.style.height="100%";}this._layoutMode=true;},_onIEMouseDown:function(e){var _136;var b=this.document.body;var _137=b.clientWidth;var _138=b.clientHeight;var _139=b.clientLeft;var _13a=b.offsetWidth;var _13b=b.offsetHeight;var _13c=b.offsetLeft;if(/^rtl$/i.test(b.dir||"")){if(_137<_13a&&e.x>_137&&e.x<_13a){_136=true;}}else{if(e.x<_139&&e.x>_13c){_136=true;}}if(!_136){if(_138<_13b&&e.y>_138&&e.y<_13b){_136=true;}}if(!_136){delete this._cursorToStart;delete this._savedSelection;if(e.target.tagName=="BODY"){this.defer("placeCursorAtEnd");}this.inherited(arguments);}},onBeforeActivate:function(){this._restoreSelection();},onBeforeDeactivate:function(e){if(this.customUndo){this.endEditing(true);}if(e.target.tagName!="BODY"){this._saveSelection();}},customUndo:true,editActionInterval:3,beginEditing:function(cmd){if(!this._inEditing){this._inEditing=true;this._beginEditing(cmd);}if(this.editActionInterval>0){if(this._editTimer){this._editTimer.remove();}this._editTimer=this.defer("endEditing",this._editInterval);}},_steps:[],_undoedSteps:[],execCommand:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return this[cmd]();}else{if(this.customUndo){this.endEditing();this._beginEditing();}var r=this.inherited(arguments);if(this.customUndo){this._endEditing();}return r;}},_pasteImpl:function(){return this._clipboardCommand("paste");},_cutImpl:function(){return this._clipboardCommand("cut");},_copyImpl:function(){return this._clipboardCommand("copy");},_clipboardCommand:function(cmd){var r;try{r=this.document.execCommand(cmd,false,null);if(has("webkit")&&!r){throw {code:1011};}}catch(e){if(e.code==1011||(e.code==9&&has("opera"))){var sub=_125.substitute,_13d={cut:"X",copy:"C",paste:"V"};alert(sub(this.commands.systemShortcut,[this.commands[cmd],sub(this.commands[has("mac")?"appleKey":"ctrlKey"],[_13d[cmd]])]));}r=false;}return r;},queryCommandEnabled:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return cmd=="undo"?(this._steps.length>1):(this._undoedSteps.length>0);}else{return this.inherited(arguments);}},_moveToBookmark:function(b){var _13e=b.mark;var mark=b.mark;var col=b.isCollapsed;var r,_13f,_140,sel;if(mark){if(has("ie")<9){if(lang.isArray(mark)){_13e=[];_11d.forEach(mark,function(n){_13e.push(_12f.getNode(n,this.editNode));},this);win.withGlobal(this.window,"moveToBookmark",_127,[{mark:_13e,isCollapsed:col}]);}else{if(mark.startContainer&&mark.endContainer){sel=_12f.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=_12f.create(this.window);_13f=_12f.getNode(mark.startContainer,this.editNode);_140=_12f.getNode(mark.endContainer,this.editNode);if(_13f&&_140){r.setStart(_13f,mark.startOffset);r.setEnd(_140,mark.endOffset);sel.addRange(r);}}}}}else{sel=_12f.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=_12f.create(this.window);_13f=_12f.getNode(mark.startContainer,this.editNode);_140=_12f.getNode(mark.endContainer,this.editNode);if(_13f&&_140){r.setStart(_13f,mark.startOffset);r.setEnd(_140,mark.endOffset);sel.addRange(r);}}}}},_changeToStep:function(from,to){this.setValue(to.text);var b=to.bookmark;if(!b){return;}this._moveToBookmark(b);},undo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._steps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(s,this._steps[this._steps.length-1]);this._undoedSteps.push(s);this.onDisplayChanged();delete this._undoRedoActive;ret=true;}delete this._undoRedoActive;}return ret;},redo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._undoedSteps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(this._steps[this._steps.length-1],s);this._steps.push(s);this.onDisplayChanged();ret=true;}delete this._undoRedoActive;}return ret;},endEditing:function(_141){if(this._editTimer){this._editTimer=this._editTimer.remove();}if(this._inEditing){this._endEditing(_141);this._inEditing=false;}},_getBookmark:function(){var b=win.withGlobal(this.window,_127.getBookmark);var tmp=[];if(b&&b.mark){var mark=b.mark;if(has("ie")<9){var sel=_12f.getSelection(this.window);if(!lang.isArray(mark)){if(sel){var _142;if(sel.rangeCount){_142=sel.getRangeAt(0);}if(_142){b.mark=_142.cloneRange();}else{b.mark=win.withGlobal(this.window,_127.getBookmark);}}}else{_11d.forEach(b.mark,function(n){tmp.push(_12f.getIndex(n,this.editNode).o);},this);b.mark=tmp;}}try{if(b.mark&&b.mark.startContainer){tmp=_12f.getIndex(b.mark.startContainer,this.editNode).o;b.mark={startContainer:tmp,startOffset:b.mark.startOffset,endContainer:b.mark.endContainer===b.mark.startContainer?tmp:_12f.getIndex(b.mark.endContainer,this.editNode).o,endOffset:b.mark.endOffset};}}catch(e){b.mark=null;}}return b;},_beginEditing:function(){if(this._steps.length===0){this._steps.push({"text":html.getChildrenHtml(this.editNode),"bookmark":this._getBookmark()});}},_endEditing:function(){var v=html.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:v,bookmark:this._getBookmark()});},onKeyDown:function(e){if(!has("ie")&&!this.iframe&&e.keyCode==keys.TAB&&!this.tabIndent){this._saveSelection();}if(!this.customUndo){this.inherited(arguments);return;}var k=e.keyCode;if(e.ctrlKey&&!e.altKey){if(k==90||k==122){_124.stop(e);this.undo();return;}else{if(k==89||k==121){_124.stop(e);this.redo();return;}}}this.inherited(arguments);switch(k){case keys.ENTER:case keys.BACKSPACE:case keys.DELETE:this.beginEditing();break;case 88:case 86:if(e.ctrlKey&&!e.altKey&&!e.metaKey){this.endEditing();if(e.keyCode==88){this.beginEditing("cut");}else{this.beginEditing("paste");}this.defer("endEditing",1);break;}default:if(!e.ctrlKey&&!e.altKey&&!e.metaKey&&(e.keyCode<keys.F1||e.keyCode>keys.F15)){this.beginEditing();break;}case keys.ALT:this.endEditing();break;case keys.UP_ARROW:case keys.DOWN_ARROW:case keys.LEFT_ARROW:case keys.RIGHT_ARROW:case keys.HOME:case keys.END:case keys.PAGE_UP:case keys.PAGE_DOWN:this.endEditing(true);break;case keys.CTRL:case keys.SHIFT:case keys.TAB:break;}},_onBlur:function(){this.inherited(arguments);this.endEditing(true);},_saveSelection:function(){try{this._savedSelection=this._getBookmark();}catch(e){}},_restoreSelection:function(){if(this._savedSelection){delete this._cursorToStart;if(win.withGlobal(this.window,"isCollapsed",_127)){this._moveToBookmark(this._savedSelection);}delete this._savedSelection;}},onClick:function(){this.endEditing(true);this.inherited(arguments);},replaceValue:function(html){if(!this.customUndo){this.inherited(arguments);}else{if(this.isClosed){this.setValue(html);}else{this.beginEditing();if(!html){html="&#160;";}this.setValue(html);this.endEditing();}}},_setDisabledAttr:function(_143){this.setValueDeferred.then(lang.hitch(this,function(){if((!this.disabled&&_143)||(!this._buttonEnabledPlugins&&_143)){_11d.forEach(this._plugins,function(p){p.set("disabled",true);});}else{if(this.disabled&&!_143){_11d.forEach(this._plugins,function(p){p.set("disabled",false);});}}}));this.inherited(arguments);},_setStateClass:function(){try{this.inherited(arguments);if(this.document&&this.document.body){_123.set(this.document.body,"color",_123.get(this.iframe,"color"));}}catch(e){}}});function _144(args){return new _12d({command:args.name});};function _145(args){return new _12d({buttonClass:_12c,command:args.name});};lang.mixin(_12d.registry,{"undo":_144,"redo":_144,"cut":_144,"copy":_144,"paste":_144,"insertOrderedList":_144,"insertUnorderedList":_144,"indent":_144,"outdent":_144,"justifyCenter":_144,"justifyFull":_144,"justifyLeft":_144,"justifyRight":_144,"delete":_144,"selectAll":_144,"removeFormat":_144,"unlink":_144,"insertHorizontalRule":_144,"bold":_145,"italic":_145,"underline":_145,"strikethrough":_145,"subscript":_145,"superscript":_145,"|":function(){return new _12d({setEditor:function(_146){this.editor=_146;this.button=new _12a({ownerDocument:_146.ownerDocument});}});}});return _132;});},"dijit/form/TextBox":function(){require({cache:{"url:dijit/form/templates/TextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"}});define("dijit/form/TextBox",["dojo/_base/declare","dojo/dom-construct","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","dojo/sniff","./_FormValueWidget","./_TextBoxMixin","dojo/text!./templates/TextBox.html","../main"],function(_147,_148,_149,_14a,lang,has,_14b,_14c,_14d,_14e){var _14f=_147("dijit.form.TextBox",[_14b,_14c],{templateString:_14d,_singleNodeTemplate:"<input class=\"dijit dijitReset dijitLeft dijitInputField\" data-dojo-attach-point=\"textbox,focusNode\" autocomplete=\"off\" type=\"${type}\" ${!nameAttrSetting} />",_buttonInputDisabled:has("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var type=this.type.toLowerCase();if(this.templateString&&this.templateString.toLowerCase()=="input"||((type=="hidden"||type=="file")&&this.templateString==this.constructor.prototype.templateString)){this.templateString=this._singleNodeTemplate;}this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(has("ie")<9){this.defer(function(){try{var s=_149.getComputedStyle(this.domNode);if(s){var ff=s.fontFamily;if(ff){var _150=this.domNode.getElementsByTagName("INPUT");if(_150){for(var i=0;i<_150.length;i++){_150[i].style.fontFamily=ff;}}}}}catch(e){}});}},_onInput:function(e){this.inherited(arguments);if(this.intermediateChanges){this.defer(function(){this._handleOnChange(this.get("value"),false);});}},_setPlaceHolderAttr:function(v){this._set("placeHolder",v);if(!this._phspan){this._attachPoints.push("_phspan");this._phspan=_148.create("span",{onmousedown:function(e){e.preventDefault();},className:"dijitPlaceHolder dijitInputField"},this.textbox,"after");}this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(v));this._updatePlaceHolder();},_updatePlaceHolder:function(){if(this._phspan){this._phspan.style.display=(this.placeHolder&&!this.focused&&!this.textbox.value)?"":"none";}},_setValueAttr:function(_151,_152,_153){this.inherited(arguments);this._updatePlaceHolder();},getDisplayedValue:function(){_14a.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue");},setDisplayedValue:function(_154){_14a.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",_154);},_onBlur:function(e){if(this.disabled){return;}this.inherited(arguments);this._updatePlaceHolder();if(has("mozilla")){if(this.selectOnClick){this.textbox.selectionStart=this.textbox.selectionEnd=undefined;}}},_onFocus:function(by){if(this.disabled||this.readOnly){return;}this.inherited(arguments);this._updatePlaceHolder();}});if(has("ie")){_14f.prototype._isTextSelected=function(){var _155=this.ownerDocument.selection.createRange();var _156=_155.parentElement();return _156==this.textbox&&_155.text.length>0;};_14e._setSelectionRange=_14c._setSelectionRange=function(_157,_158,stop){if(_157.createTextRange){var r=_157.createTextRange();r.collapse(true);r.moveStart("character",-99999);r.moveStart("character",_158);r.moveEnd("character",stop-_158);r.select();}};}return _14f;});},"dijit/layout/_LayoutWidget":function(){define("dijit/layout/_LayoutWidget",["dojo/_base/lang","../_Widget","../_Container","../_Contained","../Viewport","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style"],function(lang,_159,_15a,_15b,_15c,_15d,_15e,_15f,_160){return _15d("dijit.layout._LayoutWidget",[_159,_15a,_15b],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,buildRendering:function(){this.inherited(arguments);_15e.add(this.domNode,"dijitContainer");},startup:function(){if(this._started){return;}this.inherited(arguments);var _161=this.getParent&&this.getParent();if(!(_161&&_161.isLayoutContainer)){this.resize();this.own(_15c.on("resize",lang.hitch(this,"resize")));}},resize:function(_162,_163){var node=this.domNode;if(_162){_15f.setMarginBox(node,_162);}var mb=_163||{};lang.mixin(mb,_162||{});if(!("h" in mb)||!("w" in mb)){mb=lang.mixin(_15f.getMarginBox(node),mb);}var cs=_160.getComputedStyle(node);var me=_15f.getMarginExtents(node,cs);var be=_15f.getBorderExtents(node,cs);var bb=(this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)});var pe=_15f.getPadExtents(node,cs);this._contentBox={l:_160.toPixelValue(node,cs.paddingLeft),t:_160.toPixelValue(node,cs.paddingTop),w:bb.w-pe.w,h:bb.h-pe.h};this.layout();},layout:function(){},_setupChild:function(_164){var cls=this.baseClass+"-child "+(_164.baseClass?this.baseClass+"-"+_164.baseClass:"");_15e.add(_164.domNode,cls);},addChild:function(_165,_166){this.inherited(arguments);if(this._started){this._setupChild(_165);}},removeChild:function(_167){var cls=this.baseClass+"-child"+(_167.baseClass?" "+this.baseClass+"-"+_167.baseClass:"");_15e.remove(_167.domNode,cls);this.inherited(arguments);}});});},"esri/layers/RenderMode":function(){define("esri/layers/RenderMode",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","dojo/io/script","esri/kernel"],function(_168,_169,lang,_16a,has,_16b,_16c){var _16d=_169(null,{declaredClass:"esri.layers._RenderMode",constructor:function(){this._prefix="jsonp_"+(_168._scopeName||"dojo")+"IoScript";},initialize:function(map){this.map=map;this._init=true;},startup:function(){},propertyChangeHandler:function(type){},destroy:function(){this._init=false;},drawFeature:function(_16e){},suspend:function(){},resume:function(){},refresh:function(){},_incRefCount:function(oid){var _16f=this._featureMap[oid];if(_16f){_16f._count++;}},_decRefCount:function(oid){var _170=this._featureMap[oid];if(_170){_170._count--;}},_getFeature:function(oid){return this._featureMap[oid];},_addFeatureIIf:function(oid,_171){var fmap=this._featureMap,_172=fmap[oid],_173=this.featureLayer;if(!_172){fmap[oid]=_171;_173._add(_171);_171._count=0;}return _172||_171;},_removeFeatureIIf:function(oid){var _174=this._featureMap[oid],_175=this.featureLayer;if(_174){if(_174._count){return;}delete this._featureMap[oid];_175._remove(_174);}return _174;},_clearIIf:function(){var i,_176=this.featureLayer,_177=_176.graphics,_178=_176._selectedFeatures,_179=_176.objectIdField;for(i=_177.length-1;i>=0;i--){var _17a=_177[i];var oid=_17a.attributes[_179];if(oid in _178){_17a._count=1;continue;}_17a._count=0;this._removeFeatureIIf(oid);}},_isPending:function(id){var dfd=_16b[this._prefix+id];return dfd?true:false;},_cancelPendingRequest:function(dfd,id){dfd=dfd||_16b[this._prefix+id];if(dfd){try{dfd.cancel();_16b._validCheck(dfd);}catch(e){}}},_purgeRequests:function(){_16b._validCheck(null);},_toggleVisibility:function(show){var _17b=this.featureLayer,_17c=_17b.graphics,_17d=show?"show":"hide",i,len=_17c.length;show=show&&_17b._ager;for(i=0;i<len;i++){var _17e=_17c[i];_17e[_17d]();if(show){_17b._repaint(_17e);}}},_applyTimeFilter:function(_17f){var _180=this.featureLayer;if(!_180.timeInfo||_180.suspended){return;}if(!_17f){_180._fireUpdateStart();}var _181=_180._trackManager;if(_181){_181.clearTracks();}var defn=_180.getTimeDefinition(),_182=_180._getOffsettedTE(_180._mapTimeExtent);if(_182){_182=_180._getTimeOverlap(defn,_182);if(_182){var _183=_180._filterByTime(_180.graphics,_182.startTime,_182.endTime);if(_181){_181.addFeatures(_183.match);}_16a.forEach(_183.match,function(_184){var _185=_184._shape;if(!_184.visible){_184.show();_185=_184._shape;_185&&_185._moveToFront();}if(_180._ager&&_185){_180._repaint(_184);}});_16a.forEach(_183.noMatch,function(_186){if(_186.visible){_186.hide();}});}else{this._toggleVisibility(false);}}else{if(_181){_181.addFeatures(_180.graphics);}this._toggleVisibility(true);}if(_181){_181.moveLatestToFront();_181.drawTracks();}if(!_17f){_180._fireUpdateEnd();}}});if(has("extend-esri")){lang.setObject("layers._RenderMode",_16d,_16c);}return _16d;});},"dijit/form/_SearchMixin":function(){define("dijit/form/_SearchMixin",["dojo/data/util/filter","dojo/_base/declare","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/query","dojo/sniff","dojo/string","dojo/when","../registry"],function(_187,_188,_189,keys,lang,_18a,has,_18b,when,_18c){return _188("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:true,_abortQuery:function(){if(this.searchTimer){this.searchTimer=this.searchTimer.remove();}if(this._queryDeferHandle){this._queryDeferHandle=this._queryDeferHandle.remove();}if(this._fetchHandle){if(this._fetchHandle.abort){this._cancelingQuery=true;this._fetchHandle.abort();this._cancelingQuery=false;}if(this._fetchHandle.cancel){this._cancelingQuery=true;this._fetchHandle.cancel();this._cancelingQuery=false;}this._fetchHandle=null;}},_processInput:function(evt){if(this.disabled||this.readOnly){return;}var key=evt.charOrCode;if(evt.altKey||((evt.ctrlKey||evt.metaKey)&&(key!="x"&&key!="v"))||key==keys.SHIFT){return;}var _18d=false;this._prev_key_backspace=false;switch(key){case keys.DELETE:case keys.BACKSPACE:this._prev_key_backspace=true;this._maskValidSubsetError=true;_18d=true;break;default:_18d=typeof key=="string"||key==229;}if(_18d){if(!this.store){this.onSearch();}else{this.searchTimer=this.defer("_startSearchFromInput",1);}}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"));},_startSearch:function(text){this._abortQuery();var _18e=this,_18a=lang.clone(this.query),_18f={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:true}},qs=_18b.substitute(this.queryExpr,[text]),q,_190=function(){var _191=_18e._fetchHandle=_18e.store.query(_18a,_18f);if(_18e.disabled||_18e.readOnly||(q!==_18e._lastQuery)){return;}when(_191,function(res){_18e._fetchHandle=null;if(!_18e.disabled&&!_18e.readOnly&&(q===_18e._lastQuery)){when(_191.total,function(_192){res.total=_192;var _193=_18e.pageSize;if(isNaN(_193)||_193>res.total){_193=res.total;}res.nextPage=function(_194){_18f.direction=_194=_194!==false;_18f.count=_193;if(_194){_18f.start+=res.length;if(_18f.start>=res.total){_18f.count=0;}}else{_18f.start-=_193;if(_18f.start<0){_18f.count=Math.max(_193+_18f.start,0);_18f.start=0;}}if(_18f.count<=0){res.length=0;_18e.onSearch(res,_18a,_18f);}else{_190();}};_18e.onSearch(res,_18a,_18f);});}},function(err){_18e._fetchHandle=null;if(!_18e._cancelingQuery){console.error(_18e.declaredClass+" "+err.toString());}});};lang.mixin(_18f,this.fetchProperties);if(this.store._oldAPI){q=qs;}else{q=_187.patternToRegExp(qs,this.ignoreCase);q.toString=function(){return qs;};}this._lastQuery=_18a[this.searchAttr]=q;this._queryDeferHandle=this.defer(_190,this.searchDelay);},constructor:function(){this.query={};this.fetchProperties={};},postMixInProperties:function(){if(!this.store){var list=this.list;if(list){this.store=_18c.byId(list);}}this.inherited(arguments);}});});},"dijit/form/DateTextBox":function(){define("dijit/form/DateTextBox",["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(_195,_196,_197){return _195("dijit.form.DateTextBox",_197,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:_196,_selector:"date",value:new Date("")});});},"url:dijit/form/templates/Spinner.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitButtonNode dijitSpinnerButtonContainer\"\n\t\t><input class=\"dijitReset dijitInputField dijitSpinnerButtonInner\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t/><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton\"\n\t\t\tdata-dojo-attach-point=\"upArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9650; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\tdata-dojo-attach-point=\"downArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' data-dojo-attach-point=\"textbox,focusNode\" type=\"${type}\" data-dojo-attach-event=\"onkeypress:_onKeyPress\"\n\t\t\trole=\"spinbutton\" autocomplete=\"off\" ${!nameAttrSetting}\n\t/></div\n></div>\n","dijit/form/_FormWidgetMixin":function(){define("dijit/form/_FormWidgetMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/sniff","dojo/window","../a11y"],function(_198,_199,_19a,_19b,lang,_19c,has,_19d,a11y){return _199("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:false,intermediateChanges:false,scrollOnFocus:true,_setIdAttr:"focusNode",_setDisabledAttr:function(_19e){this._set("disabled",_19e);_19a.set(this.focusNode,"disabled",_19e);if(this.valueNode){_19a.set(this.valueNode,"disabled",_19e);}this.focusNode.setAttribute("aria-disabled",_19e?"true":"false");if(_19e){this._set("hovering",false);this._set("active",false);var _19f="tabIndex" in this.attributeMap?this.attributeMap.tabIndex:("_setTabIndexAttr" in this)?this._setTabIndexAttr:"focusNode";_198.forEach(lang.isArray(_19f)?_19f:[_19f],function(_1a0){var node=this[_1a0];if(has("webkit")||a11y.hasDefaultTabStop(node)){node.setAttribute("tabIndex","-1");}else{node.removeAttribute("tabIndex");}},this);}else{if(this.tabIndex!=""){this.set("tabIndex",this.tabIndex);}}},_onFocus:function(by){if(by=="mouse"&&this.isFocusable()){var _1a1=this.connect(this.focusNode,"onfocus",function(){this.disconnect(_1a2);this.disconnect(_1a1);});var _1a2=this.connect(this.ownerDocumentBody,"onmouseup",function(){this.disconnect(_1a2);this.disconnect(_1a1);if(this.focused){this.focus();}});}if(this.scrollOnFocus){this.defer(function(){_19d.scrollIntoView(this.domNode);});}this.inherited(arguments);},isFocusable:function(){return !this.disabled&&this.focusNode&&(_19b.get(this.domNode,"display")!="none");},focus:function(){if(!this.disabled&&this.focusNode.focus){try{this.focusNode.focus();}catch(e){}}},compare:function(val1,val2){if(typeof val1=="number"&&typeof val2=="number"){return (isNaN(val1)&&isNaN(val2))?0:val1-val2;}else{if(val1>val2){return 1;}else{if(val1<val2){return -1;}else{return 0;}}}},onChange:function(){},_onChangeActive:false,_handleOnChange:function(_1a3,_1a4){if(this._lastValueReported==undefined&&(_1a4===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_1a3;}this._pendingOnChange=this._pendingOnChange||(typeof _1a3!=typeof this._lastValueReported)||(this.compare(_1a3,this._lastValueReported)!=0);if((this.intermediateChanges||_1a4||_1a4===undefined)&&this._pendingOnChange){this._lastValueReported=_1a3;this._pendingOnChange=false;if(this._onChangeActive){if(this._onChangeHandle){this._onChangeHandle.remove();}this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(_1a3);});}}},create:function(){this.inherited(arguments);this._onChangeActive=true;},destroy:function(){if(this._onChangeHandle){this._onChangeHandle.remove();this.onChange(this._lastValueReported);}this.inherited(arguments);}});});},"dijit/BackgroundIframe":function(){define("dijit/BackgroundIframe",["require","./main","dojo/_base/config","dojo/dom-construct","dojo/dom-style","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window"],function(_1a5,_1a6,_1a7,_1a8,_1a9,lang,on,has,win){var _1aa=new function(){var _1ab=[];this.pop=function(){var _1ac;if(_1ab.length){_1ac=_1ab.pop();_1ac.style.display="";}else{if(has("ie")<9){var burl=_1a7["dojoBlankHtmlUrl"]||_1a5.toUrl("dojo/resources/blank.html")||"javascript:\"\"";var html="<iframe src='"+burl+"' role='presentation'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_1ac=win.doc.createElement(html);}else{_1ac=_1a8.create("iframe");_1ac.src="javascript:\"\"";_1ac.className="dijitBackgroundIframe";_1ac.setAttribute("role","presentation");_1a9.set(_1ac,"opacity",0.1);}_1ac.tabIndex=-1;}return _1ac;};this.push=function(_1ad){_1ad.style.display="none";_1ab.push(_1ad);};}();_1a6.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(has("ie")||has("mozilla")){var _1ae=(this.iframe=_1aa.pop());node.appendChild(_1ae);if(has("ie")<7||has("quirks")){this.resize(node);this._conn=on(node,"resize",lang.hitch(this,function(){this.resize(node);}));}else{_1a9.set(_1ae,{width:"100%",height:"100%"});}}};lang.extend(_1a6.BackgroundIframe,{resize:function(node){if(this.iframe){_1a9.set(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});}},destroy:function(){if(this._conn){this._conn.remove();this._conn=null;}if(this.iframe){_1aa.push(this.iframe);delete this.iframe;}}});return _1a6.BackgroundIframe;});},"dijit/form/ValidationTextBox":function(){require({cache:{"url:dijit/form/templates/ValidationTextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"}});define("dijit/form/ValidationTextBox",["dojo/_base/declare","dojo/_base/kernel","dojo/i18n","./TextBox","../Tooltip","dojo/text!./templates/ValidationTextBox.html","dojo/i18n!./nls/validate"],function(_1af,_1b0,i18n,_1b1,_1b2,_1b3){var _1b4;return _1b4=_1af("dijit.form.ValidationTextBox",_1b1,{templateString:_1b3,required:false,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(attr,_1b5){if(_1b5!=_1b4.prototype[attr]){_1b0.deprecated("ValidationTextBox id="+this.id+", set('"+attr+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0");this.set("pattern",_1b5);}},_setRegExpGenAttr:function(_1b6){this._deprecateRegExp("regExpGen",_1b6);this.regExpGen=this._getPatternAttr;},_setRegExpAttr:function(_1b7){this._deprecateRegExp("regExp",_1b7);},_setValueAttr:function(){this.inherited(arguments);this.validate(this.focused);},validator:function(_1b8,_1b9){return (new RegExp("^(?:"+this._getPatternAttr(_1b9)+")"+(this.required?"":"?")+"$")).test(_1b8)&&(!this.required||!this._isEmpty(_1b8))&&(this._isEmpty(_1b8)||this.parse(_1b8,_1b9)!==undefined);},_isValidSubset:function(){return this.textbox.value.search(this._partialre)==0;},isValid:function(){return this.validator(this.textbox.value,this.constraints);},_isEmpty:function(_1ba){return (this.trim?/^\s*$/:/^$/).test(_1ba);},getErrorMessage:function(){var _1bb=this.invalidMessage=="$_unset_$"?this.messages.invalidMessage:!this.invalidMessage?this.promptMessage:this.invalidMessage;var _1bc=this.missingMessage=="$_unset_$"?this.messages.missingMessage:!this.missingMessage?_1bb:this.missingMessage;return (this.required&&this._isEmpty(this.textbox.value))?_1bc:_1bb;},getPromptMessage:function(){return this.promptMessage;},_maskValidSubsetError:true,validate:function(_1bd){var _1be="";var _1bf=this.disabled||this.isValid(_1bd);if(_1bf){this._maskValidSubsetError=true;}var _1c0=this._isEmpty(this.textbox.value);var _1c1=!_1bf&&_1bd&&this._isValidSubset();this._set("state",_1bf?"":(((((!this._hasBeenBlurred||_1bd)&&_1c0)||_1c1)&&(this._maskValidSubsetError||(_1c1&&!this._hasBeenBlurred&&_1bd)))?"Incomplete":"Error"));this.focusNode.setAttribute("aria-invalid",_1bf?"false":"true");if(this.state=="Error"){this._maskValidSubsetError=_1bd&&_1c1;_1be=this.getErrorMessage(_1bd);}else{if(this.state=="Incomplete"){_1be=this.getPromptMessage(_1bd);this._maskValidSubsetError=!this._hasBeenBlurred||_1bd;}else{if(_1c0){_1be=this.getPromptMessage(_1bd);}}}this.set("message",_1be);return _1bf;},displayMessage:function(_1c2){if(_1c2&&this.focused){_1b2.show(_1c2,this.domNode,this.tooltipPosition,!this.isLeftToRight());}else{_1b2.hide(this.domNode);}},_refreshState:function(){if(this._created){this.validate(this.focused);}this.inherited(arguments);},constructor:function(_1c3){this.constraints={};this.baseClass+=" dijitValidationTextBox";},startup:function(){this.inherited(arguments);this._refreshState();},_setConstraintsAttr:function(_1c4){if(!_1c4.locale&&this.lang){_1c4.locale=this.lang;}this._set("constraints",_1c4);this._refreshState();},_setPatternAttr:function(_1c5){this._set("pattern",_1c5);},_getPatternAttr:function(_1c6){var p=this.pattern;var type=(typeof p).toLowerCase();if(type=="function"){p=this.pattern(_1c6||this.constraints);}if(p!=this._lastRegExp){var _1c7="";this._lastRegExp=p;if(p!=".*"){p.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(re){switch(re.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":_1c7+=re;break;case ")":_1c7+="|$)";break;default:_1c7+="(?:"+re+"|$)";break;}});}try{"".search(_1c7);}catch(e){_1c7=this.pattern;console.warn("RegExp error in "+this.declaredClass+": "+this.pattern);}this._partialre="^(?:"+_1c7+")$";}return p;},postMixInProperties:function(){this.inherited(arguments);this.messages=i18n.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints);},_setDisabledAttr:function(_1c8){this.inherited(arguments);this._refreshState();},_setRequiredAttr:function(_1c9){this._set("required",_1c9);this.focusNode.setAttribute("aria-required",_1c9);this._refreshState();},_setMessageAttr:function(_1ca){this._set("message",_1ca);this.displayMessage(_1ca);},reset:function(){this._maskValidSubsetError=true;this.inherited(arguments);},_onBlur:function(){this.displayMessage("");this.inherited(arguments);}});});},"dojo/_base/query":function(){define(["../query","./NodeList"],function(_1cb){return _1cb;});},"dijit/_WidgetsInTemplateMixin":function(){define("dijit/_WidgetsInTemplateMixin",["dojo/_base/array","dojo/_base/declare","dojo/parser"],function(_1cc,_1cd,_1ce){return _1cd("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:false,widgetsInTemplate:true,_beforeFillContent:function(){if(this.widgetsInTemplate){var node=this.domNode;var cw=(this._startupWidgets=_1ce.parse(node,{noStart:!this._earlyTemplatedStartup,template:true,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,scope:"dojo"}));if(!cw.isFulfilled()){throw new Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), "+"unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}this._attachTemplateNodes(cw,function(n,p){return n[p];});}},startup:function(){_1cc.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);}});});},"dijit/form/_FormValueMixin":function(){define("dijit/form/_FormValueMixin",["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/sniff","./_FormWidgetMixin"],function(_1cf,_1d0,keys,has,_1d1){return _1cf("dijit.form._FormValueMixin",_1d1,{readOnly:false,_setReadOnlyAttr:function(_1d2){_1d0.set(this.focusNode,"readOnly",_1d2);this._set("readOnly",_1d2);},postCreate:function(){this.inherited(arguments);if(has("ie")){this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);}if(this._resetValue===undefined){this._lastValueReported=this._resetValue=this.value;}},_setValueAttr:function(_1d3,_1d4){this._handleOnChange(_1d3,_1d4);},_handleOnChange:function(_1d5,_1d6){this._set("value",_1d5);this.inherited(arguments);},undo:function(){this._setValueAttr(this._lastValueReported,false);},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);},_onKeyDown:function(e){if(e.keyCode==keys.ESCAPE&&!(e.ctrlKey||e.altKey||e.metaKey)){if(has("ie")<9||(has("ie")&&has("quirks"))){e.preventDefault();var node=e.srcElement,te=node.ownerDocument.createEventObject();te.keyCode=keys.ESCAPE;te.shiftKey=e.shiftKey;node.fireEvent("onkeypress",te);}}}});});},"url:dijit/form/templates/ValidationTextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n","esri/tasks/query":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/jsonUtils","esri/tasks/SpatialRelationship","dojo/has!extend-esri?esri/tasks/QueryTask","dojo/has!extend-esri?esri/tasks/RelationshipQuery","dojo/has!extend-esri?esri/tasks/StatisticDefinition"],function(_1d7,lang,_1d8,_1d9,has,_1da,_1db,_1dc){var _1dd=_1d7(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=_1dd.SPATIAL_REL_INTERSECTS;},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:false,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,toJson:function(_1de){var json={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},g=_1de&&_1de["geometry"]||this.geometry,ids=this.objectIds,_1df=this.outFields,_1e0=this.outSpatialReference,_1e1=this.groupByFieldsForStatistics,_1e2=this.orderByFields,_1e3=this.outStatistics;if(g){json.geometry=g;json.geometryType=_1db.getJsonType(g);json.inSR=g.spatialReference.wkid||_1d9.toJson(g.spatialReference.toJson());}if(ids){json.objectIds=ids.join(",");}if(_1df){json.outFields=_1df.join(",");}if(_1e1){json.groupByFieldsForStatistics=_1e1.join(",");}if(_1e2){json.orderByFields=_1e2.join(",");}if(_1e3){var _1e4=[];_1d8.forEach(_1e3,function(item,idx){_1e4.push(item.toJson());});json.outStatistics=_1d9.toJson(_1e4);}if(_1e0!==null){json.outSR=_1e0.wkid||_1d9.toJson(_1e0.toJson());}else{if(g){json.outSR=g.spatialReference.wkid||_1d9.toJson(g.spatialReference.toJson());}}var _1e5=this.timeExtent;json.time=_1e5?_1e5.toJson().join(","):null;var _1e6=this.relationParam;if(_1e6&&this.spatialRelationship===_1dd.SPATIAL_REL_RELATION){json.relationParam=_1e6;}json._ts=this._ts;return json;}});lang.mixin(_1dd,_1dc);if(has("extend-esri")){lang.setObject("tasks.Query",_1dd,_1da);}return _1dd;});},"dojox/main":function(){define("dojox/main",["dojo/_base/kernel"],function(dojo){return dojo.dojox;});},"esri/layers/FeatureTemplate":function(){define("esri/layers/FeatureTemplate",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/graphic"],function(_1e7,lang,has,_1e8,_1e9,_1ea){var _1eb=_1e7(null,{declaredClass:"esri.layers.FeatureTemplate",constructor:function(json){if(json&&lang.isObject(json)){this.name=json.name;this.description=json.description;this.drawingTool=json.drawingTool;var _1ec=json.prototype;this.prototype=new _1ea(_1ec.geometry,null,_1ec.attributes);}},toJson:function(){return _1e9.fixJson({name:this.name,description:this.description,drawingTool:this.drawingTool,prototype:this.prototype&&this.prototype.toJson()});}});lang.mixin(_1eb,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});if(has("extend-esri")){lang.setObject("layers.FeatureTemplate",_1eb,_1e8);}return _1eb;});},"dijit/form/_DateTimeTextBox":function(){require({cache:{"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"button presentation\" aria-hidden=\"true\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"}});define("dijit/form/_DateTimeTextBox",["dojo/date","dojo/date/locale","dojo/date/stamp","dojo/_base/declare","dojo/_base/lang","./RangeBoundTextBox","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(date,_1ed,_1ee,_1ef,lang,_1f0,_1f1,_1f2){new Date("X");var _1f3=_1ef("dijit.form._DateTimeTextBox",[_1f0,_1f1],{templateString:_1f2,hasDownArrow:true,cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},pattern:_1ed.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text");},compare:function(val1,val2){var _1f4=this._isInvalidDate(val1);var _1f5=this._isInvalidDate(val2);return _1f4?(_1f5?0:-1):(_1f5?1:date.compare(val1,val2,this._selector));},forceWidth:true,format:function(_1f6,_1f7){if(!_1f6){return "";}return this.dateLocaleModule.format(_1f6,_1f7);},"parse":function(_1f8,_1f9){return this.dateLocaleModule.parse(_1f8,_1f9)||(this._isEmpty(_1f8)?null:undefined);},serialize:function(val,_1fa){if(val.toGregorian){val=val.toGregorian();}return _1ee.toISOString(val,_1fa);},dropDownDefaultValue:new Date(),value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(_1fb){this.dateModule=_1fb.datePackage?lang.getObject(_1fb.datePackage,false):date;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=_1fb.datePackage?lang.getObject(_1fb.datePackage+".locale",false):_1ed;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString();},buildRendering:function(){this.inherited(arguments);if(!this.hasDownArrow){this._buttonNode.style.display="none";}if(!this.hasDownArrow){this._buttonNode=this.domNode;this.baseClass+=" dijitComboBoxOpenOnClick";}},_setConstraintsAttr:function(_1fc){_1fc.selector=this._selector;_1fc.fullYear=true;var _1fd=_1ee.fromISOString;if(typeof _1fc.min=="string"){_1fc.min=_1fd(_1fc.min);}if(typeof _1fc.max=="string"){_1fc.max=_1fd(_1fc.max);}this.inherited(arguments);},_isInvalidDate:function(_1fe){return !_1fe||isNaN(_1fe)||typeof _1fe!="object"||_1fe.toString()==this._invalidDate;},_setValueAttr:function(_1ff,_200,_201){if(_1ff!==undefined){if(typeof _1ff=="string"){_1ff=_1ee.fromISOString(_1ff);}if(this._isInvalidDate(_1ff)){_1ff=null;}if(_1ff instanceof Date&&!(this.dateClassObj instanceof Date)){_1ff=new this.dateClassObj(_1ff);}}this.inherited(arguments);if(this.value instanceof Date){this.filterString="";}if(this.dropDown){this.dropDown.set("value",_1ff,false);}},_set:function(attr,_202){if(attr=="value"&&this.value instanceof Date&&this.compare(_202,this.value)==0){return;}this.inherited(arguments);},_setDropDownDefaultValueAttr:function(val){if(this._isInvalidDate(val)){val=new this.dateClassObj();}this.dropDownDefaultValue=val;},openDropDown:function(_203){if(this.dropDown){this.dropDown.destroy();}var _204=lang.isString(this.popupClass)?lang.getObject(this.popupClass,false):this.popupClass,_205=this,_206=this.get("value");this.dropDown=new _204({onChange:function(_207){_205.set("value",_207,true);},id:this.id+"_popup",dir:_205.dir,lang:_205.lang,value:_206,currentFocus:!this._isInvalidDate(_206)?_206:this.dropDownDefaultValue,constraints:_205.constraints,filterString:_205.filterString,datePackage:_205.params.datePackage,isDisabledDate:function(date){return !_205.rangeCheck(date,_205.constraints);}});this.inherited(arguments);},_getDisplayedValueAttr:function(){return this.textbox.value;},_setDisplayedValueAttr:function(_208,_209){this._setValueAttr(this.parse(_208,this.constraints),_209,_208);}});return _1f3;});},"dijit/_editor/_Plugin":function(){define("dijit/_editor/_Plugin",["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../form/Button"],function(_20a,_20b,lang,_20c){var _20d=_20b("dijit._editor._Plugin",null,{constructor:function(args){this.params=args||{};lang.mixin(this,this.params);this._connects=[];this._attrPairNames={};},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:true,buttonClass:_20c,disabled:false,getLabel:function(key){return this.editor.commands[key];},_initButton:function(){if(this.command.length){var _20e=this.getLabel(this.command),_20f=this.editor,_210=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button){var _211=lang.mixin({label:_20e,ownerDocument:_20f.ownerDocument,dir:_20f.dir,lang:_20f.lang,showLabel:false,iconClass:_210,dropDown:this.dropDown,tabIndex:"-1"},this.params||{});this.button=new this.buttonClass(_211);}}if(this.get("disabled")&&this.button){this.button.set("disabled",this.get("disabled"));}},destroy:function(){var h;while(h=this._connects.pop()){h.remove();}if(this.dropDown){this.dropDown.destroyRecursive();}},connect:function(o,f,tf){this._connects.push(_20a.connect(o,f,this,tf));},updateState:function(){var e=this.editor,c=this.command,_212,_213;if(!e||!e.isLoaded||!c.length){return;}var _214=this.get("disabled");if(this.button){try{_213=!_214&&e.queryCommandEnabled(c);if(this.enabled!==_213){this.enabled=_213;this.button.set("disabled",!_213);}if(_213){if(typeof this.button.checked=="boolean"){_212=e.queryCommandState(c);if(this.checked!==_212){this.checked=_212;this.button.set("checked",e.queryCommandState(c));}}}}catch(e){console.log(e);}}},setEditor:function(_215){this.editor=_215;this._initButton();if(this.button&&this.useDefaultCommand){if(this.editor.queryCommandAvailable(this.command)){this.connect(this.button,"onClick",lang.hitch(this.editor,"execCommand",this.command,this.commandArg));}else{this.button.domNode.style.display="none";}}this.connect(this.editor,"onNormalizedDisplayChanged","updateState");},setToolbar:function(_216){if(this.button){_216.addChild(this.button);}},set:function(name,_217){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _218=this._getAttrNames(name);if(this[_218.s]){var _219=this[_218.s].apply(this,Array.prototype.slice.call(arguments,1));}else{this._set(name,_217);}return _219||this;},get:function(name){var _21a=this._getAttrNames(name);return this[_21a.g]?this[_21a.g]():this[name];},_setDisabledAttr:function(_21b){this.disabled=_21b;this.updateState();},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return (apn[name]={s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"});},_set:function(name,_21c){this[name]=_21c;}});_20d.registry={};return _20d;});},"esri/layers/FeatureEditResult":function(){define("esri/layers/FeatureEditResult",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_21d,lang,has,_21e){var _21f=_21d(null,{declaredClass:"esri.layers.FeatureEditResult",constructor:function(json){if(json&&lang.isObject(json)){this.objectId=json.objectId;this.success=json.success;if(!json.success){var err=json.error;this.error=new Error();this.error.code=err.code;this.error.message=err.description;}}}});if(has("extend-esri")){lang.setObject("layers.FeatureEditResult",_21f,_21e);}return _21f;});},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(lang){var _220={};lang.setObject("dojo.data.util.sorter",_220);_220.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};_220.createSortFunction=function(_221,_222){var _223=[];function _224(attr,dir,comp,s){return function(_225,_226){var a=s.getValue(_225,attr);var b=s.getValue(_226,attr);return dir*comp(a,b);};};var _227;var map=_222.comparatorMap;var bc=_220.basicComparator;for(var i=0;i<_221.length;i++){_227=_221[i];var attr=_227.attribute;if(attr){var dir=(_227.descending)?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&("toString" in attr)){attr=attr.toString();}comp=map[attr]||bc;}_223.push(_224(attr,dir,comp,_222));}}return function(rowA,rowB){var i=0;while(i<_223.length){var ret=_223[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};return _220;});},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../_base/Deferred"],function(_228,lang,_229){var _22a=function(_22b){if(!_22b){return _22b;}if(_22b.then){_22b=lang.delegate(_22b);}function _22c(_22d){if(!_22b[_22d]){_22b[_22d]=function(){var args=arguments;return _229.when(_22b,function(_22e){Array.prototype.unshift.call(args,_22e);return _22a(_228[_22d].apply(_228,args));});};}};_22c("forEach");_22c("filter");_22c("map");if(!_22b.total){_22b.total=_229.when(_22b,function(_22f){return _22f.length;});}return _22b;};lang.setObject("dojo.store.util.QueryResults",_22a);return _22a;});},"dojo/touch":function(){define(["./_base/kernel","./aspect","./dom","./_base/lang","./on","./has","./mouse","./domReady","./_base/window"],function(dojo,_230,dom,lang,on,has,_231,_232,win){var _233=navigator.msPointerEnabled;var _234;function _235(_236,_237,_238){if(_233&&_238){return function(node,_239){return on(node,_238,_239);};}else{if(has("touch")){return function(node,_23a){var _23b=on(node,_237,_23a),_23c=on(node,_236,function(evt){if(!_234||(new Date()).getTime()>_234+1000){_23a.call(this,evt);}});return {remove:function(){_23b.remove();_23c.remove();}};};}else{return function(node,_23d){return on(node,_236,_23d);};}}};var _23e,_23f,_240;if(has("touch")&&!_233){_232(function(){_240=win.body();win.doc.addEventListener("touchstart",function(_241){_234=(new Date()).getTime();var _242=_240;_240=_241.target;if(_240.dojoElementFromPoint){_240=_240.dojoElementFromPoint(_241.changedTouches[0].clientX,_241.changedTouches[0].clientY);}if(_242){on.emit(_242,"dojotouchout",{target:_242,relatedTarget:_240,bubbles:true});}if(_240){on.emit(_240,"dojotouchover",{target:_240,relatedTarget:_242,bubbles:true});}},true);on(win.doc,"touchmove",function(_243){_234=(new Date()).getTime();_23f=_243;var _244=win.doc.elementFromPoint(_243.clientX,_243.clientY);if(_244){var _245=_244;if(_244.dojoElementFromPoint){_244=_244.dojoElementFromPoint(_243.clientX,_243.clientY);}if(_240!==_244){if(_240){on.emit(_245,"dojotouchout",{target:_240,relatedTarget:_244,bubbles:true});}if(_244){on.emit(_245,"dojotouchover",{target:_244,relatedTarget:_240,bubbles:true});}_240=_244;}on.emit(_245,"dojotouchmove",{target:_244,bubbles:true});}});on(win.doc,"touchend",function(_246){var node=win.doc.elementFromPoint(_246.clientX,_246.clientY);var _247=node;if(node.dojoElementFromPoint){node=node.dojoElementFromPoint(_246.clientX,_246.clientY);}if(node){on.emit(_247,"dojotouchend",lang.delegate(_246,{target:node,bubbles:true}));}});});_23e=function(node,_248){return on(node,"dojotouchmove",function(_249){_248(lang.delegate(_23f,{target:_249.target,preventDefault:function(){_23f.preventDefault();},stopPropagation:function(){_249.stopPropagation();}}));});};}var _24a={press:_235("mousedown","touchstart","MSPointerDown"),move:_235("mousemove",_23e,"MSPointerMove"),release:_235("mouseup","dojotouchend","MSPointerUp"),cancel:_235(_231.leave,"touchcancel",has("touch")?"MSPointerCancel":null),over:_235("mouseover","dojotouchover","MSPointerOver"),out:_235("mouseout","dojotouchout","MSPointerOut"),enter:_231._eventHandler(_235("mouseover","dojotouchover","MSPointerOver")),leave:_231._eventHandler(_235("mouseout","dojotouchout","MSPointerOut"))};1&&(dojo.touch=_24a);return _24a;});},"dijit/_CssStateMixin":function(){define("dijit/_CssStateMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/has","dojo/_base/lang","dojo/on","dojo/ready","dojo/_base/window","./registry"],function(_24b,_24c,dom,_24d,has,lang,on,_24e,win,_24f){var _250=_24c("dijit._CssStateMixin",[],{cssStateNodes:{},hovering:false,active:false,_applyAttributes:function(){this.inherited(arguments);_24b.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active","_opened"],function(attr){this.watch(attr,lang.hitch(this,"_setStateClass"));},this);for(var ap in this.cssStateNodes){this._trackMouseState(this[ap],this.cssStateNodes[ap]);}this._trackMouseState(this.domNode,this.baseClass);this._setStateClass();},_cssMouseEvent:function(_251){if(!this.disabled){switch(_251.type){case "mouseover":this._set("hovering",true);this._set("active",this._mouseDown);break;case "mouseout":this._set("hovering",false);this._set("active",false);break;case "mousedown":case "touchstart":this._set("active",true);break;case "mouseup":case "touchend":this._set("active",false);break;}}},_setStateClass:function(){var _252=this.baseClass.split(" ");function _253(_254){_252=_252.concat(_24b.map(_252,function(c){return c+_254;}),"dijit"+_254);};if(!this.isLeftToRight()){_253("Rtl");}var _255=this.checked=="mixed"?"Mixed":(this.checked?"Checked":"");if(this.checked){_253(_255);}if(this.state){_253(this.state);}if(this.selected){_253("Selected");}if(this._opened){_253("Opened");}if(this.disabled){_253("Disabled");}else{if(this.readOnly){_253("ReadOnly");}else{if(this.active){_253("Active");}else{if(this.hovering){_253("Hover");}}}}if(this.focused){_253("Focused");}var tn=this.stateNode||this.domNode,_256={};_24b.forEach(tn.className.split(" "),function(c){_256[c]=true;});if("_stateClasses" in this){_24b.forEach(this._stateClasses,function(c){delete _256[c];});}_24b.forEach(_252,function(c){_256[c]=true;});var _257=[];for(var c in _256){_257.push(c);}tn.className=_257.join(" ");this._stateClasses=_252;},_subnodeCssMouseEvent:function(node,_258,evt){if(this.disabled||this.readOnly){return;}function _259(_25a){_24d.toggle(node,_258+"Hover",_25a);};function _25b(_25c){_24d.toggle(node,_258+"Active",_25c);};function _25d(_25e){_24d.toggle(node,_258+"Focused",_25e);};switch(evt.type){case "mouseover":_259(true);break;case "mouseout":_259(false);_25b(false);break;case "mousedown":case "touchstart":_25b(true);break;case "mouseup":case "touchend":_25b(false);break;case "focus":case "focusin":_25d(true);break;case "blur":case "focusout":_25d(false);break;}},_trackMouseState:function(node,_25f){node._cssState=_25f;}});_24e(function(){function _260(evt){if(!dom.isDescendant(evt.relatedTarget,evt.target)){for(var node=evt.target;node&&node!=evt.relatedTarget;node=node.parentNode){if(node._cssState){var _261=_24f.getEnclosingWidget(node);if(_261){if(node==_261.domNode){_261._cssMouseEvent(evt);}else{_261._subnodeCssMouseEvent(node,node._cssState,evt);}}}}}};function _262(evt){evt.target=evt.srcElement;_260(evt);};var body=win.body(),_263=(has("touch")?[]:["mouseover","mouseout"]).concat(["mousedown","touchstart","mouseup","touchend"]);_24b.forEach(_263,function(type){if(body.addEventListener){body.addEventListener(type,_260,true);}else{body.attachEvent("on"+type,_262);}});on(body,"focusin, focusout",function(evt){var node=evt.target;if(node._cssState&&!node.getAttribute("widgetId")){var _264=_24f.getEnclosingWidget(node);_264._subnodeCssMouseEvent(node,node._cssState,evt);}});});return _250;});},"esri/dijit/editing/AttachmentEditor":function(){define(["require","dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/_base/kernel","dojo/has","dojo/query","dojo/io-query","dojo/dom-attr","dijit/_Widget","dijit/_Templated","esri/kernel","esri/lang","esri/domUtils","dojo/text!esri/dijit/editing/templates/AttachmentEditor.html","dojo/i18n!esri/nls/jsapi","dojo/NodeList-dom"],function(_265,_266,lang,_267,_268,_269,has,_26a,_26b,_26c,_26d,_26e,_26f,_270,_271,_272,_273){var AE=_266([_26d,_26e],{declaredClass:"esri.dijit.editing.AttachmentEditor",widgetsInTemplate:true,templateString:_272,basePath:_265.toUrl("esri/dijit/editing")+"/",_listHtml:"<span id='node_${oid}_${attid}'><a href='${href}' target='_blank'>${name}</a>",_deleteBtnHtml:"(<span style='cursor:pointer;color:red;font-weight:bold;' class='deleteAttachment' id='${attid}');'>X</span>)",_endHtml:"<br/></span>",_aeConnects:[],_layerEditingCapChecked:{},_layerEditingCap:{},constructor:function(_274,_275){lang.mixin(this,_273.widgets.attachmentEditor);},startup:function(){this.inherited(arguments);this._uploadField_connect=_267.connect(this._uploadField,"onchange",this,"_addAttachment");this._uploadFieldFocus_connect=_267.connect(this._uploadField,"onfocus",lang.hitch(this,function(e){_271.hide(this._attachmentError);}));},destroy:function(){_268.forEach(this._aeConnects,_267.disconnect);_267.disconnect(this._uploadField_connect);_267.disconnect(this._uploadFieldFocus_connect);this.inherited(arguments);},showAttachments:function(_276,_277){var list=this._attachmentList;list.innerHTML=this.NLS_none;this._uploadField.value="";_268.forEach(this.domNode.children,function(_278,idx){_271.show(_278);});_271.hide(this._attachmentError);if(!_276){return;}this._featureLayer=_276.getLayer()||_277;if(!this._featureLayer){return;}if(this._featureLayer.declaredClass!=="esri.layers.FeatureLayer"||!this._featureLayer.getEditCapabilities){_271.hide(this._uploadForm);_268.forEach(this.domNode.children,function(_279,idx){_271.hide(_279);});return;}this._currentLayerId=this._featureLayer.id;if(!this._layerEditingCapChecked[this._currentLayerId]){this._layerEditingCap[this._currentLayerId]=this._featureLayer.getEditCapabilities();this._layerEditingCapChecked[this._currentLayerId]=true;}this._featureCanUpdate=this._featureLayer.getEditCapabilities({feature:_276}).canUpdate;this._oid=_276.attributes[this._featureLayer.objectIdField];this._getAttachments(_276);},_getAttachments:function(_27a){if(!this._featureLayer||!this._featureLayer.queryAttachmentInfos){return;}this._featureLayer.queryAttachmentInfos(this._oid,lang.hitch(this,"_onQueryAttachmentInfosComplete"));},_addAttachment:function(){_271.hide(this._attachmentError);if(!this._featureLayer||!this._featureLayer.addAttachment){return;}this._featureLayer.addAttachment(this._oid,this._uploadForm,lang.hitch(this,"_onAddAttachmentComplete"),lang.hitch(this,"_onAddAttachmentError"));},_deleteAttachment:function(oid,_27b){this._featureLayer.deleteAttachments(oid,[_27b],lang.hitch(this,"_onDeleteAttachmentComplete"));},_onQueryAttachmentInfosComplete:function(_27c){var _27d=this._listHtml+this._deleteBtnHtml+this._endHtml;this._uploadForm.style.display="block";if((!this._featureCanUpdate&&this._layerEditingCap[this._currentLayerId].canUpdate)||(!this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate)){_27d=this._listHtml+this._endHtml;this._uploadForm.style.display="none";}else{if(this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate){_27d=this._listHtml+this._endHtml;}}var list=this._attachmentList,_27e=_268.map(_27c,lang.hitch(this,function(info){return _270.substitute({href:info.url,name:info.name,oid:info.objectId,attid:info.id},_27d);}));list.innerHTML=_27e.join("")||this.NLS_none;this._updateConnects();},_onAddAttachmentComplete:function(_27f){var _280=this._uploadField;var _281=_280.value;var pos=_281.lastIndexOf("\\");if(pos>-1){_281=_281.substring(pos+1,_281.length);}_281=_281.replace(/\ /g,"_");var list=this._attachmentList,_282=_26b.objectToQuery({gdbVersion:this._featureLayer.gdbVersion,token:this._featureLayer._getToken()});var _283=this._listHtml+this._deleteBtnHtml+this._endHtml;if(this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate){_283=this._listHtml+this._endHtml;}var link=_270.substitute({href:this._featureLayer._url.path+"/"+_27f.objectId+"/attachments/"+_27f.attachmentId+(_282?("?"+_282):""),name:_281,oid:_27f.objectId,attid:_27f.attachmentId},_283);list.innerHTML=list.innerHTML==this.NLS_none?link:(list.innerHTML+link);this._updateConnects();_280.value="";},_onAddAttachmentError:function(_284){if(_284&&_270.isDefined(_284.code)){var _285,_286=this._attachmentError;if(_284.code===400){_285=this.NLS_fileNotSupported;}else{_285=_284.message||(_284.details&&_284.details.length&&_284.details[0]);}_26c.set(_286,"innerHTML",(_285||this.NLS_error));_271.show(_286);}},_onDeleteAttachmentComplete:function(_287){var _288=_268.every(_287,function(_289){return _289.success;}),list=this._attachmentList;if(_288){_269.query("#node_"+_287[0].objectId+"_"+_287[0].attachmentId).orphan();if(!list.children||!list.children.length){list.innerHTML=this.NLS_none;}}},_updateConnects:function(){_268.forEach(this._aeConnects,_267.disconnect);_269.query(".deleteAttachment").forEach(function(item){this._aeConnects.push(_267.connect(item,"onclick",lang.hitch(this,"_deleteAttachment",this._oid,item.id)));},this);}});if(has("extend-esri")){lang.setObject("dijit.editing.AttachmentEditor",AE,_26f);}return AE;});},"dojo/hccss":function(){define(["require","./_base/config","./dom-class","./dom-style","./has","./ready","./_base/window"],function(_28a,_28b,_28c,_28d,has,_28e,win){has.add("highcontrast",function(){var div=win.doc.createElement("div");div.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;"+"background-image: url("+(_28b.blankGif||_28a.toUrl("./resources/blank.gif"))+");";win.body().appendChild(div);var cs=_28d.getComputedStyle(div),_28f=cs.backgroundImage,hc=(cs.borderTopColor==cs.borderRightColor)||(_28f&&(_28f=="none"||_28f=="url(invalid-url:)"));if(has("ie")<=8){div.outerHTML="";}else{win.body().removeChild(div);}return hc;});_28e(90,function(){if(has("highcontrast")){_28c.add(win.body(),"dj_a11y");}});return has;});},"dijit/form/_FormValueWidget":function(){define("dijit/form/_FormValueWidget",["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(_290,has,_291,_292){return _290("dijit.form._FormValueWidget",[_291,_292],{_layoutHackIE7:function(){if(has("ie")==7){var _293=this.domNode;var _294=_293.parentNode;var _295=_293.firstChild||_293;var _296=_295.style.filter;var _297=this;while(_294&&_294.clientHeight==0){(function ping(){var _298=_297.connect(_294,"onscroll",function(){_297.disconnect(_298);_295.style.filter=(new Date()).getMilliseconds();_297.defer(function(){_295.style.filter=_296;});});})();_294=_294.parentNode;}}}});});},"dijit/ToolbarSeparator":function(){define("dijit/ToolbarSeparator",["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],function(_299,dom,_29a,_29b){return _299("dijit.ToolbarSeparator",[_29a,_29b],{templateString:"<div class=\"dijitToolbarSeparator dijitInline\" role=\"presentation\"></div>",buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});});},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(lang){var _29c={};lang.setObject("dojo.data.util.filter",_29c);_29c.patternToRegExp=function(_29d,_29e){var rxp="^";var c=null;for(var i=0;i<_29d.length;i++){c=_29d.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_29d.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_29e){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};return _29c;});},"dijit/form/Button":function(){require({cache:{"url:dijit/form/templates/Button.html":"<span class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" role=\"presentation\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\n\t\ttabIndex=\"-1\" role=\"presentation\" data-dojo-attach-point=\"valueNode\"\n/></span>\n"}});define("dijit/form/Button",["require","dojo/_base/declare","dojo/dom-class","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/ready","./_FormWidget","./_ButtonMixin","dojo/text!./templates/Button.html"],function(_29f,_2a0,_2a1,has,_2a2,lang,_2a3,_2a4,_2a5,_2a6){if(has("dijit-legacy-requires")){_2a3(0,function(){var _2a7=["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"];_29f(_2a7);});}return _2a0("dijit.form.Button",[_2a4,_2a5],{showLabel:true,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:_2a6,_setValueAttr:"valueNode",_onClick:function(e){var ok=this.inherited(arguments);if(ok){if(this.valueNode){this.valueNode.click();e.preventDefault();e.stopPropagation();}}return ok;},_fillContent:function(_2a8){if(_2a8&&(!this.params||!("label" in this.params))){var _2a9=lang.trim(_2a8.innerHTML);if(_2a9){this.label=_2a9;}}},_setShowLabelAttr:function(val){if(this.containerNode){_2a1.toggle(this.containerNode,"dijitDisplayNone",!val);}this._set("showLabel",val);},setLabel:function(_2aa){_2a2.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_2aa);},_setLabelAttr:function(_2ab){this.inherited(arguments);if(!this.showLabel&&!("title" in this.params)){this.titleNode.title=lang.trim(this.containerNode.innerText||this.containerNode.textContent||"");}}});});},"dijit/_editor/html":function(){define("dijit/_editor/html",["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(_2ac,lang,has){var _2ad={};lang.setObject("dijit._editor.html",_2ad);var _2ae=_2ad.escapeXml=function(str,_2af){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_2af){str=str.replace(/'/gm,"&#39;");}return str;};_2ad.getNodeHtml=function(node){var _2b0=[];_2ad.getNodeHtmlHelper(node,_2b0);return _2b0.join("");};_2ad.getNodeHtmlHelper=function(node,_2b1){switch(node.nodeType){case 1:var _2b2=node.nodeName.toLowerCase();if(!_2b2||_2b2.charAt(0)=="/"){return "";}_2b1.push("<",_2b2);var _2b3=[],_2b4={};var attr;if(has("dom-attributes-explicit")||has("dom-attributes-specified-flag")){var i=0;while((attr=node.attributes[i++])){var n=attr.name;if(n.substr(0,3)!=="_dj"&&(!has("dom-attributes-specified-flag")||attr.specified)&&!(n in _2b4)){var v=attr.value;if(n=="src"||n=="href"){if(node.getAttribute("_djrealurl")){v=node.getAttribute("_djrealurl");}}if(has("ie")===8&&n==="style"){v=v.replace("HEIGHT:","height:").replace("WIDTH:","width:");}_2b3.push([n,v]);_2b4[n]=v;}}}else{var _2b5=/^input$|^img$/i.test(node.nodeName)?node:node.cloneNode(false);var s=_2b5.outerHTML;var _2b6=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;var _2b7=s.match(_2b6);s=s.substr(0,s.indexOf(">"));_2ac.forEach(_2b7,function(attr){if(attr){var idx=attr.indexOf("=");if(idx>0){var key=attr.substring(0,idx);if(key.substr(0,3)!="_dj"){if(key=="src"||key=="href"){if(node.getAttribute("_djrealurl")){_2b3.push([key,node.getAttribute("_djrealurl")]);return;}}var val,_2b8;switch(key){case "style":val=node.style.cssText.toLowerCase();break;case "class":val=node.className;break;case "width":if(_2b2==="img"){_2b8=/width=(\S+)/i.exec(s);if(_2b8){val=_2b8[1];}break;}case "height":if(_2b2==="img"){_2b8=/height=(\S+)/i.exec(s);if(_2b8){val=_2b8[1];}break;}default:val=node.getAttribute(key);}if(val!=null){_2b3.push([key,val.toString()]);}}}}},this);}_2b3.sort(function(a,b){return a[0]<b[0]?-1:(a[0]==b[0]?0:1);});var j=0;while((attr=_2b3[j++])){_2b1.push(" ",attr[0],"=\"",(typeof attr[1]==="string"?_2ae(attr[1],true):attr[1]),"\"");}switch(_2b2){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":_2b1.push(" />");break;case "script":_2b1.push(">",node.innerHTML,"</",_2b2,">");break;default:_2b1.push(">");if(node.hasChildNodes()){_2ad.getChildrenHtmlHelper(node,_2b1);}_2b1.push("</",_2b2,">");}break;case 4:case 3:_2b1.push(_2ae(node.nodeValue,true));break;case 8:_2b1.push("<!--",_2ae(node.nodeValue,true),"-->");break;default:_2b1.push("<!-- Element not recognized - Type: ",node.nodeType," Name: ",node.nodeName,"-->");}};_2ad.getChildrenHtml=function(node){var _2b9=[];_2ad.getChildrenHtmlHelper(node,_2b9);return _2b9.join("");};_2ad.getChildrenHtmlHelper=function(dom,_2ba){if(!dom){return;}var _2bb=dom["childNodes"]||dom;var _2bc=!has("ie")||_2bb!==dom;var node,i=0;while((node=_2bb[i++])){if(!_2bc||node.parentNode==dom){_2ad.getNodeHtmlHelper(node,_2ba);}}};return _2ad;});},"dijit/_KeyNavContainer":function(){define("dijit/_KeyNavContainer",["dojo/_base/kernel","./_Container","./_FocusMixin","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/_base/event","dojo/dom-attr","dojo/_base/lang"],function(_2bd,_2be,_2bf,_2c0,keys,_2c1,_2c2,_2c3,lang){return _2c1("dijit._KeyNavContainer",[_2bf,_2be],{tabIndex:"0",connectKeyNavHandlers:function(_2c4,_2c5){var _2c6=(this._keyNavCodes={});var prev=lang.hitch(this,"focusPrev");var next=lang.hitch(this,"focusNext");_2c0.forEach(_2c4,function(code){_2c6[code]=prev;});_2c0.forEach(_2c5,function(code){_2c6[code]=next;});_2c6[keys.HOME]=lang.hitch(this,"focusFirstChild");_2c6[keys.END]=lang.hitch(this,"focusLastChild");this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus");},startupKeyNavChildren:function(){_2bd.deprecated("startupKeyNavChildren() call no longer needed","","2.0");},startup:function(){this.inherited(arguments);_2c0.forEach(this.getChildren(),lang.hitch(this,"_startupChild"));},addChild:function(_2c7,_2c8){this.inherited(arguments);this._startupChild(_2c7);},focus:function(){this.focusFirstChild();},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild());},focusLastChild:function(){this.focusChild(this._getLastFocusableChild());},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1));},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),true);},focusChild:function(_2c9,last){if(!_2c9){return;}if(this.focusedChild&&_2c9!==this.focusedChild){this._onChildBlur(this.focusedChild);}_2c9.set("tabIndex",this.tabIndex);_2c9.focus(last?"end":"start");this._set("focusedChild",_2c9);},_startupChild:function(_2ca){_2ca.set("tabIndex","-1");this.connect(_2ca,"_onFocus",function(){_2ca.set("tabIndex",this.tabIndex);});this.connect(_2ca,"_onBlur",function(){_2ca.set("tabIndex","-1");});},_onContainerFocus:function(evt){if(evt.target!==this.domNode||this.focusedChild){return;}this.focusFirstChild();_2c3.set(this.domNode,"tabIndex","-1");},_onBlur:function(evt){if(this.tabIndex){_2c3.set(this.domNode,"tabIndex",this.tabIndex);}this.focusedChild=null;this.inherited(arguments);},_onContainerKeypress:function(evt){if(evt.ctrlKey||evt.altKey){return;}var func=this._keyNavCodes[evt.charOrCode];if(func){func();_2c2.stop(evt);}},_onChildBlur:function(){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1);},_getNextFocusableChild:function(_2cb,dir){if(_2cb){_2cb=this._getSiblingOfChild(_2cb,dir);}var _2cc=this.getChildren();for(var i=0;i<_2cc.length;i++){if(!_2cb){_2cb=_2cc[(dir>0)?0:(_2cc.length-1)];}if(_2cb.isFocusable()){return _2cb;}_2cb=this._getSiblingOfChild(_2cb,dir);}return null;}});});},"url:esri/dijit/editing/templates/AttachmentEditor.html":"<div class=\"attachmentEditor\">\r\n    <br />\r\n    <div>\r\n        <b>${NLS_attachments}</b>\r\n        <hr />\r\n        <div dojoAttachPoint=\"_attachmentError\" style='color:red;display:none'></div>\r\n        <br />\r\n        <span dojoAttachPoint='_attachmentList' style='word-wrap: break-word;'></span>\r\n        <br><br>\r\n        <form dojoAttachPoint='_uploadForm'> ${NLS_add}:&nbsp;&nbsp;<input type='file' name='attachment' dojoAttachPoint='_uploadField' /> </form>\r\n    </div>\r\n</div>","esri/dijit/AttributeInspector":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/sniff","dojo/_base/kernel","dojo/has","dojo/dom-style","dojo/dom-construct","esri/kernel","esri/lang","esri/domUtils","esri/layers/InheritedDomain","esri/layers/FeatureLayer","dojo/i18n!esri/nls/jsapi","dojo/fx","dojox/gfx","dijit/_Widget","dijit/_Templated","dijit/Editor","dijit/_editor/plugins/LinkDialog","dijit/_editor/plugins/TextColor","esri/dijit/editing/AttachmentEditor","esri/dijit/editing/Util","esri/tasks/query","dijit/form/DateTextBox","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/FilteringSelect","dijit/form/NumberSpinner","dijit/form/Button","dijit/form/SimpleTextarea","dijit/Tooltip","dojo/data/ItemFileReadStore","dojox/date/islamic","dojox/date/islamic/Date","dojox/date/islamic/locale","dojo/text!esri/dijit/templates/AttributeInspector.html"],function(_2cd,lang,_2ce,_2cf,_2d0,_2d1,has,_2d2,_2d3,_2d4,_2d5,_2d6,_2d7,_2d8,_2d9,fx,gfx,_2da,_2db,_2dc,_2dd,_2de,_2df,Util,_2e0,_2e1,_2e2,_2e3,_2e4,_2e5,_2e6,_2e7,_2e8,_2e9,_2ea,_2eb,_2ec,_2ed){var ATI=_2cd([_2da,_2db],{declaredClass:"esri.dijit.AttributeInspector",widgetsInTemplate:true,templateString:_2ed,_navMessage:"( ${idx} ${of} ${numFeatures} )",onUpdate:function(){},onDelete:function(){},onAttributeChange:function(){},onNext:function(){},onReset:function(){},onCancel:function(){},constructor:function(_2ee,_2ef){lang.mixin(this,_2d9.widgets.attributeInspector);_2ee=_2ee||{};if(!_2ee.featureLayer&&!_2ee.layerInfos){console.error("esri.AttributeInspector: please provide correct parameter in the constructor");}this._userIds={};if(_2ee.featureLayer&&_2ee.featureLayer.credential){var _2f0=_2ee.featureLayer.id;this._userIds[_2f0]=_2ee.featureLayer.credential.userId;}else{if(_2ee.layerInfos){var _2f1=_2ee.layerInfos;_2ce.forEach(_2f1,function(_2f2){if(_2f2.featureLayer){var _2f3=_2f2.featureLayer.id;if(_2f2.featureLayer.credential){this._userIds[_2f3]=_2f2.featureLayer.credential.userId;}if(_2f2.userId){this._userIds[_2f3]=_2f2.userId;}}},this);}}this._datePackage=this._getDatePackage(_2ee);this._layerInfos=_2ee.layerInfos||[{featureLayer:_2ee.featureLayer,options:_2ee.options||[]}];this._aiConnects=[];this._selection=[];this._toolTips=[];this._numFeatures=0;this._featureIdx=0;this._currentLInfo=null;this._currentFeature=null;this._hideNavButtons=_2ee.hideNavButtons||false;},postCreate:function(){this._initLayerInfos();this._createAttachmentEditor();this.onFirstFeature();},destroy:function(){this._destroyAttributeTable();_2ce.forEach(this._aiConnects,_2cf.disconnect);delete this._aiConnects;if(this._attachmentEditor){this._attachmentEditor.destroy();delete this._attachmentEditor;}delete this._layerInfos;this._selection=this._currentFeature=this._currentLInfo=this._attributes=this._layerInfos=null;this.inherited(arguments);},refresh:function(){this._updateSelection();},first:function(){this.onFirstFeature();},last:function(){this.onLastFeature();},next:function(){this.onNextFeature();},previous:function(){this.onPreviousFeature();},showFeature:function(_2f4,_2f5){if(_2f5){this._createOnlyFirstTime=true;}this._updateSelection([_2f4],_2f5);this._updateUI();},onLayerSelectionChange:function(_2f6,_2f7,_2f8){this._createOnlyFirstTime=false;this._featureIdx=(_2f8===_2d8.SELECTION_NEW)?0:this._featureIdx;this._updateSelection();this._updateUI();},onLayerSelectionClear:function(){if(!this._selection||this._selection.length<=0){return;}this._numFeatures=0;this._featureIdx=0;this._selection=[];this._currentFeature=null;this._currentLInfo=null;this._updateUI();},onLayerEditsComplete:function(_2f9,adds,_2fa,_2fb){_2fb=_2fb||[];if(_2fb.length){var _2fc=this._selection;var _2fd=_2f9.featureLayer.objectIdField;_2ce.forEach(_2fb,lang.hitch(this,function(del){_2ce.some(_2fc,lang.hitch(this,function(item,idx){if(item.attributes[_2fd]!==del.objectId){return false;}this._selection.splice(idx,1);return true;}));}));}adds=adds||[];if(adds.length){this._selection=Util.findFeatures(adds,_2f9.featureLayer);this._featureIdx=0;}var _2fe=this._numFeatures=this._selection?this._selection.length:0;if(adds.length){var _2ff=_2fe?this._selection[this._featureIdx]:null;if(_2ff){var _300=_2ff.getLayer();var _301=_300.getEditCapabilities();if(!(_301.canCreate&&!_301.canUpdate)){this._showFeature(_2ff);}}}this._updateUI();},onFieldValueChange:function(_302,_303){_303=(typeof _303==="undefined")?null:_303;var _304=_302.field;if(_304.type==="esriFieldTypeDate"){_303=(_303&&_303.getTime)?_303.getTime():(_303&&_303.toGregorian?_303.toGregorian().getTime():_303);}if(this._currentFeature.attributes[_304.name]===_303){return;}var _305=this._currentLInfo;var _306=this._currentFeature;var _307=_304.name;if(_307===_305.typeIdField){var type=this._findFirst(_305.types,"id",_303);var _308=_305.fieldInfos;_2ce.forEach(_308,function(_309){_304=_309.field;if(!_304||_304.name===_305.typeIdField){return;}var node=_309.dijit;var _30a=this._setFieldDomain(node,type,_304);if(_30a&&node){this._setValue(node,_306.attributes[_304.name]+"");if(node.isValid()===false){this._setValue(node,null);}}},this);}this.onAttributeChange(_306,_307,_303);},onDeleteBtn:function(evt){this._deleteFeature();},onNextFeature:function(evt){this._onNextFeature(1);},onPreviousFeature:function(evt){this._onNextFeature(-1);},onFirstFeature:function(evt){this._onNextFeature(this._featureIdx*-1);},onLastFeature:function(evt){this._onNextFeature((this._numFeatures-1)-this._featureIdx);},_initLayerInfos:function(){var _30b=this._layerInfos;this._editorTrackingInfos={};_2ce.forEach(_30b,this._initLayerInfo,this);},_initLayerInfo:function(_30c){var _30d=_30c.featureLayer;this._connect(_30d,"onSelectionComplete",lang.hitch(this,"onLayerSelectionChange",_30c));this._connect(_30d,"onSelectionClear",lang.hitch(this,"onLayerSelectionClear",_30c));this._connect(_30d,"onEditsComplete",lang.hitch(this,"onLayerEditsComplete",_30c));_30c.showAttachments=_30d.hasAttachments?(_2d5.isDefined(_30c.showAttachments)?_30c.showAttachments:true):false;_30c.hideFields=_30c.hideFields||[];_30c.htmlFields=_30c.htmlFields||[];_30c.isEditable=_30d.isEditable()?(_2d5.isDefined(_30c.isEditable)?_30c.isEditable:true):false;_30c.typeIdField=_30d.typeIdField;_30c.layerId=_30d.id;_30c.types=_30d.types;if(!_30c.showGlobalID&&_30d.globalIdField){_30c.hideFields.push(_30d.globalIdField);}if(!_30c.showObjectID){_30c.hideFields.push(_30d.objectIdField);}var _30e=this._getFields(_30c.featureLayer);if(!_30e){return;}var _30f=_30c.fieldInfos||[];_30f=_2ce.map(_30f,function(_310){return lang.mixin({},_310);});if(!_30f.length){_30e=_2ce.filter(_30e,lang.hitch(this,function(_311){return !this._isInFields(_311.name,_30c.hideFields);}));_30c.fieldInfos=_2ce.map(_30e,lang.hitch(this,function(_312){var _313=(this._isInFields(_312.name,_30c.htmlFields)?ATI.STRING_FIELD_OPTION_RICHTEXT:ATI.STRING_FIELD_OPTION_TEXTBOX);return {"fieldName":_312.name,"field":_312,"stringFieldOption":_313};}));}else{_30c.fieldInfos=_2ce.filter(_2ce.map(_30f,lang.hitch(this,function(_314){var _315=_314.stringFieldOption||(this._isInFields(_314.fieldName,_30c.htmlFields)?ATI.STRING_FIELD_OPTION_RICHTEXT:ATI.STRING_FIELD_OPTION_TEXTBOX);return lang.mixin(_314,{"field":this._findFirst(_30e,"name",_314.fieldName),"stringFieldOption":_315});})),"return item.field;");}var _316=[];if(_30d.editFieldsInfo){if(_30d.editFieldsInfo.creatorField){_316.push(_30d.editFieldsInfo.creatorField);}if(_30d.editFieldsInfo.creationDateField){_316.push(_30d.editFieldsInfo.creationDateField);}if(_30d.editFieldsInfo.editorField){_316.push(_30d.editFieldsInfo.editorField);}if(_30d.editFieldsInfo.editDateField){_316.push(_30d.editFieldsInfo.editDateField);}}this._editorTrackingInfos[_30d.id]=_316;},_createAttachmentEditor:function(){this._attachmentEditor=null;var _317=this._layerInfos;var _318=_2ce.filter(_317,function(item){return item.showAttachments;});if(!_318||!_318.length){return;}this._attachmentEditor=new _2df({"class":"atiAttachmentEditor"},this.attachmentEditor);this._attachmentEditor.startup();},_setCurrentLInfo:function(_319){var _31a=this._currentLInfo?this._currentLInfo.featureLayer:null;var _31b=_319.featureLayer;if(_31a&&_31a.id===_31b.id&&!_31a.ownershipBasedAccessControlForFeatures){var _31c=_31b.getEditCapabilities();if(!(_31c.canCreate&&!_31c.canUpdate)){return;}}this._currentLInfo=_319;this._createTable();},_updateSelection:function(_31d,_31e){this._selection=_31d||[];var _31f=this._layerInfos;_2ce.forEach(_31f,this._getSelection,this);var _320=this._numFeatures=this._selection.length;var _321=_320?this._selection[this._featureIdx]:null;this._showFeature(_321,_31e);},_getSelection:function(_322){var _323=_322.featureLayer.getSelectedFeatures();this._selection=this._selection.concat(_323);},_updateUI:function(){var _324=this._numFeatures;var _325=this._currentLInfo;this.layerName.innerHTML=(!_325||_324===0)?this.NLS_noFeaturesSelected:(_325.featureLayer?_325.featureLayer.name:"");_2d2.set(this.attributeTable,"display",_324?"":"none");_2d2.set(this.editButtons,"display",_324?"":"none");_2d2.set(this.navButtons,"display",(!this._hideNavButtons&&(_324>1)?"":"none"));this.navMessage.innerHTML=_2d5.substitute({idx:this._featureIdx+1,of:this.NLS_of,numFeatures:this._numFeatures},this._navMessage);if(this._attachmentEditor){_2d2.set(this._attachmentEditor.domNode,"display",((_325&&_325.showAttachments)&&_324)?"":"none");}var _326=((_325&&_325.showDeleteButton===false)||!this._canDelete)?false:true;_2d2.set(this.deleteBtn.domNode,"display",_326?"":"none");if(this.domNode.parentNode&&this.domNode.parentNode.scrollTop>0){this.domNode.parentNode.scrollTop=0;}},_onNextFeature:function(_327){this._featureIdx+=_327;if(this._featureIdx<0){this._featureIdx=this._numFeatures-1;}else{if(this._featureIdx>=this._numFeatures){this._featureIdx=0;}}var _328=this._selection.length?this._selection[this._featureIdx]:null;this._showFeature(_328);this._updateUI();this.onNext(_328);},_deleteFeature:function(){this.onDelete(this._currentFeature);},_showFeature:function(_329,_32a){if(!_329){return;}this._currentFeature=_329;var _32b=_32a?_32a:_329.getLayer();var _32c=_32b.getEditCapabilities({feature:_329,userId:this._userIds[_32b.id]});this._canUpdate=_32c.canUpdate;this._canDelete=_32c.canDelete;var _32d=this._getLInfoFromFeatureLayer(_32b);if(!_32d){return;}this._setCurrentLInfo(_32d);var _32e=_329.attributes;var type=this._findFirst(_32d.types,"id",_32e[_32d.typeIdField]);var node,_32f=null;var _330=_32d.fieldInfos;_2ce.forEach(_330,function(_331){_32f=_331.field;node=_331.dijit||null;if(!node){return;}var _332=this._setFieldDomain(node,type,_32f);var _333=_32e[_32f.name];_333=(_333&&_332&&_332.codedValues&&_332.codedValues.length)?(_332.codedValues[_333]?_332.codedValues[_333].name:_333):_333;if(!_2d5.isDefined(_333)){_333="";}if(node.declaredClass==="dijit.form.DateTextBox"){_333=(_333==="")?null:new Date(_333);}else{if(node.declaredClass==="dijit.form.FilteringSelect"){node._lastValueReported=null;_333=_32e[_32f.name]+"";}}try{this._setValue(node,_333);if(node.declaredClass==="dijit.form.FilteringSelect"&&node.isValid()===false){this._setValue(node,null);}}catch(error){node.set("displayedValue",this.NLS_errorInvalid,false);}},this);if(this._attachmentEditor&&_32d.showAttachments){this._attachmentEditor.showAttachments(this._currentFeature);}var _334=_32b.getEditSummary(_329);if(_334){this.editorTrackingInfoDiv.innerHTML=_334;_2d6.show(this.editorTrackingInfoDiv);}else{_2d6.hide(this.editorTrackingInfoDiv);}},_setFieldDomain:function(node,type,_335){if(!node){return null;}var _336=_335.domain;if(type&&type.domains){if(type.domains[_335.name]&&type.domains[_335.name] instanceof _2d7===false){_336=type.domains[_335.name];}}if(!_336){return null;}if(_336.codedValues&&_336.codedValues.length>0){node.set("store",this._toStore(_2ce.map(_336.codedValues,function(item){return {id:item.code+="",name:item.name};})));this._setValue(node,_336.codedValues[0].code);}else{node.constraints={min:_2d5.isDefined(_336.minValue)?_336.minValue:Number.MIN_VALUE,max:_2d5.isDefined(_336.maxValue)?_336.maxValue:Number.MAX_VALUE};this._setValue(node,node.constraints.min);}return _336;},_setValue:function(node,_337){if(!node.set){return;}node._onChangeActive=false;node.set("value",_337,true);node._onChangeActive=true;},_getFields:function(_338){var _339=_338._getOutFields();if(!_339){return null;}var _33a=_338.fields;return (_339=="*")?_33a:_2ce.filter(_2ce.map(_339,lang.hitch(this,"_findFirst",_33a,"name")),_2d5.isDefined);},_isInFields:function(_33b,_33c){if(!_33b||!_33c&&!_33c.length){return false;}return _2ce.some(_33c,function(name){return name.toLowerCase()===_33b.toLowerCase();});},_findFirst:function(_33d,_33e,_33f){var _340=_2ce.filter(_33d,function(item){return item.hasOwnProperty(_33e)&&item[_33e]===_33f;});return (_340&&_340.length)?_340[0]:null;},_getLInfoFromFeatureLayer:function(_341){var _342=_341?_341.id:null;return this._findFirst(this._layerInfos,"layerId",_342);},_createTable:function(){this._destroyAttributeTable();this.attributeTable.innerHTML="";this._attributes=_2d3.create("table",{cellspacing:"0",cellpadding:"0"},this.attributeTable);var _343=_2d3.create("tbody",null,this._attributes);var _344=this._currentFeature;var _345=this._currentLInfo;var type=this._findFirst(_345.types,"id",_344.attributes[_345.typeIdField]);var _346=_345.fieldInfos;_2ce.forEach(_346,lang.hitch(this,"_createField",type,_343),this);this._createOnlyFirstTime=false;},_createField:function(type,_347,_348){var _349=this._currentLInfo;var _34a=_348.field;if(this._isInFields(_34a.name,_349.hideFields)){return;}if(this._isInFields(_34a.name,this._editorTrackingInfos[_349.featureLayer.id])){return;}var node=_2d3.create("tr",null,_347);var td=_2d3.create("td",{innerHTML:_348.label||_34a.alias||_34a.name,"class":"atiLabel"},node);td=_2d3.create("td",null,node);var _34b=null;var _34c=false;if(_348.customField){_2d3.place(_348.customField.domNode||_348.customField,_2d3.create("div",null,td),"first");_34b=_348.customField;}else{if(_349.isEditable===false||_34a.editable===false||_348.isEditable===false||_34a.type==="esriFieldTypeOID"||_34a.type==="esriFieldTypeGlobalID"||(!this._canUpdate&&!this._createOnlyFirstTime)){_34c=true;}}if(!_34b&&(_349.typeIdField&&_34a.name.toLowerCase()==_349.typeIdField.toLowerCase())){_34b=this._createTypeField(_34a,_348,td);}else{if(!_34b){_34b=this._createDomainField(_34a,_348,type,td);}}if(!_34b){switch(_34a.type){case "esriFieldTypeString":_34b=this._createStringField(_34a,_348,td);break;case "esriFieldTypeDate":_34b=this._createDateField(_34a,_348,td);break;case "esriFieldTypeInteger":case "esriFieldTypeSmallInteger":_34b=this._createIntField(_34a,_348,td);break;case "esriFieldTypeSingle":case "esriFieldTypeDouble":_34b=this._createFltField(_34a,_348,td);break;default:_34b=this._createStringField(_34a,_348,td);break;}}if(_348.tooltip&&_348.tooltip.length){this._toolTips.push(new _2e8({connectId:[_34b.id],label:_348.tooltip}));}_34b.onChange=lang.hitch(this,"onFieldValueChange",_348);_34b.set("disabled",_34c);_348.dijit=_34b;},_createTypeField:function(_34d,_34e,node){return new _2e4({"class":"atiField",name:_34d.alias||_34d.name,store:this._toStore(_2ce.map(this._currentLInfo.types,function(item){return {id:item.id,name:item.name};})),searchAttr:"name"},_2d3.create("div",null,node));},_createDomainField:function(_34f,_350,type,node){var _351=_34f.domain;if(type&&type.domains){if(type.domains[_34f.name]&&type.domains[_34f.name] instanceof _2d7===false){_351=type.domains[_34f.name];}}if(!_351){return null;}if(_351.codedValues){return new _2e4({"class":"atiField",name:_34f.alias||_34f.name,searchAttr:"name",required:_34f.nullable||false},_2d3.create("div",null,node));}else{return new _2e5({"class":"atiField"},_2d3.create("div",null,node));}},_createStringField:function(_352,_353,node){var _354={"class":"atiField",trim:true,maxLength:_352.length};if(_353.stringFieldOption===ATI.STRING_FIELD_OPTION_TEXTAREA){_354["class"]+=" atiTextAreaField";return new _2e7(_354,_2d3.create("div",null,node));}else{if(_353.stringFieldOption===ATI.STRING_FIELD_OPTION_RICHTEXT){_354["class"]+=" atiRichTextField";_354.height="100%";_354.width="100%";_354.plugins=_353.richTextPlugins||["bold","italic","underline","foreColor","hiliteColor","|","justifyLeft","justifyCenter","justifyRight","justifyFull","|","insertOrderedList","insertUnorderedList","indent","outdent","|","createLink"];return new _2dc(_354,_2d3.create("div",null,node));}else{return new _2e2(_354,_2d3.create("div",null,node));}}},_createDateField:function(_355,_356,node){var _357={"class":"atiField","trim":true};if(this._datePackage){_357.datePackage=this._datePackage;}return new _2e1(_357,_2d3.create("div",null,node));},_createIntField:function(_358,_359,node){return new _2e3({"class":"atiField",constraints:{places:0},invalidMessage:this.NLS_validationInt,trim:true},_2d3.create("div",null,node));},_createFltField:function(_35a,_35b,node){return new _2e3({"class":"atiField",trim:true,invalidMessage:this.NLS_validationFlt},_2d3.create("div",null,node));},_toStore:function(_35c){return new _2e9({data:{identifier:"id",label:"name",items:_35c}});},_connect:function(node,evt,func){this._aiConnects.push(_2cf.connect(node,evt,func));},_getDatePackage:function(_35d){if(_35d.datePackage===null){return null;}else{if(_35d.datePackage){return _35d.datePackage;}else{if(_2d1.locale==="ar"){return "dojox.date.islamic";}}}return null;},_destroyAttributeTable:function(){var _35e=this._layerInfos;_2ce.forEach(_35e,function(_35f){var _360=_35f.fieldInfos;_2ce.forEach(_360,function(_361){var _362=_361.dijit;if(_362){_362._onChangeHandle=null;if(_361.customField){return;}if(_362.destroyRecursive){_362.destroyRecursive();}else{if(_362.destroy){_362.destroy();}}}_361.dijit=null;},this);},this);var _363=this._toolTips;_2ce.forEach(_363,function(item){item.destroy();delete item;});this._toolTips=[];if(this._attributes){_2d3.destroy(this._attributes);}}});lang.mixin(ATI,{STRING_FIELD_OPTION_RICHTEXT:"richtext",STRING_FIELD_OPTION_TEXTAREA:"textarea",STRING_FIELD_OPTION_TEXTBOX:"textbox"});if(has("extend-esri")){lang.setObject("dijit.AttributeInspector",ATI,_2d4);}return ATI;});},"dijit/Destroyable":function(){define("dijit/Destroyable",["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(_364,_365,_366){return _366("dijit.Destroyable",null,{destroy:function(_367){this._destroyed=true;},own:function(){_364.forEach(arguments,function(_368){var _369="destroyRecursive" in _368?"destroyRecursive":"destroy" in _368?"destroy":"remove";var odh=_365.before(this,"destroy",function(_36a){_368[_369](_36a);});var hdh=_365.after(_368,_369,function(){odh.remove();hdh.remove();},true);},this);return arguments;}});});},"dojox/date/islamic/locale":function(){define("dojox/date/islamic/locale",["../..","dojo/_base/lang","dojo/_base/array","dojo/date","dojo/i18n","dojo/regexp","dojo/string","./Date","dojo/i18n!dojo/cldr/nls/islamic"],function(_36b,lang,arr,dd,i18n,_36c,_36d,_36e,_36f){var _370=lang.getObject("date.islamic.locale",true,_36b);function _371(_372,_373,_374,_375,_376){return _376.replace(/([a-z])\1*/ig,function(_377){var s,pad;var c=_377.charAt(0);var l=_377.length;var _378=["abbr","wide","narrow"];switch(c){case "G":s=_373["eraAbbr"][0];break;case "y":s=String(_372.getFullYear());break;case "M":var m=_372.getMonth();if(l<3){s=m+1;pad=true;}else{var _379=["months","format",_378[l-3]].join("-");s=_373[_379][m];}break;case "d":s=_372.getDate(true);pad=true;break;case "E":var d=_372.getDay();if(l<3){s=d+1;pad=true;}else{var _37a=["days","format",_378[l-3]].join("-");s=_373[_37a][d];}break;case "a":var _37b=(_372.getHours()<12)?"am":"pm";s=_373["dayPeriods-format-wide-"+_37b];break;case "h":case "H":case "K":case "k":var h=_372.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_372.getMinutes();pad=true;break;case "s":s=_372.getSeconds();pad=true;break;case "S":s=Math.round(_372.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "z":s=dd.getTimezoneName(_372.toGregorian());if(s){break;}l=4;case "Z":var _37c=_372.toGregorian().getTimezoneOffset();var tz=[(_37c<=0?"+":"-"),_36d.pad(Math.floor(Math.abs(_37c)/60),2),_36d.pad(Math.abs(_37c)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojox.date.islamic.locale.formatPattern: invalid pattern char: "+_376);}if(pad){s=_36d.pad(s,l);}return s;});};_370.format=function(_37d,_37e){_37e=_37e||{};var _37f=i18n.normalizeLocale(_37e.locale);var _380=_37e.formatLength||"short";var _381=_370._getIslamicBundle(_37f);var str=[];var _382=lang.hitch(this,_371,_37d,_381,_37f,_37e.fullYear);if(_37e.selector=="year"){var year=_37d.getFullYear();return year;}if(_37e.selector!="time"){var _383=_37e.datePattern||_381["dateFormat-"+_380];if(_383){str.push(_384(_383,_382));}}if(_37e.selector!="date"){var _385=_37e.timePattern||_381["timeFormat-"+_380];if(_385){str.push(_384(_385,_382));}}var _386=str.join(" ");return _386;};_370.regexp=function(_387){return _370._parseInfo(_387).regexp;};_370._parseInfo=function(_388){_388=_388||{};var _389=i18n.normalizeLocale(_388.locale);var _38a=_370._getIslamicBundle(_389);var _38b=_388.formatLength||"short";var _38c=_388.datePattern||_38a["dateFormat-"+_38b];var _38d=_388.timePattern||_38a["timeFormat-"+_38b];var _38e;if(_388.selector=="date"){_38e=_38c;}else{if(_388.selector=="time"){_38e=_38d;}else{_38e=(typeof (_38d)=="undefined")?_38c:_38c+" "+_38d;}}var _38f=[];var re=_384(_38e,lang.hitch(this,_390,_38f,_38a,_388));return {regexp:re,tokens:_38f,bundle:_38a};};_370.parse=function(_391,_392){_391=_391.replace(/[\u200E\u200F\u202A\u202E]/g,"");if(!_392){_392={};}var info=_370._parseInfo(_392);var _393=info.tokens,_36f=info.bundle;var _394=info.regexp.replace(/[\u200E\u200F\u202A\u202E]/g,"");var re=new RegExp("^"+_394+"$");var _395=re.exec(_391);var _396=i18n.normalizeLocale(_392.locale);if(!_395){return null;}var date,_397;var _398=[1389,0,1,0,0,0,0];var amPm="";var _399=0;var _39a=["abbr","wide","narrow"];var _39b=arr.every(_395,function(v,i){if(!i){return true;}var _39c=_393[i-1];var l=_39c.length;switch(_39c.charAt(0)){case "y":_398[0]=Number(v);break;case "M":if(l>2){var _39d=_36f["months-format-"+_39a[l-3]].concat();if(!_392.strict){v=v.replace(".","").toLowerCase();_39d=arr.map(_39d,function(s){return s?s.replace(".","").toLowerCase():s;});}v=arr.indexOf(_39d,v);if(v==-1){return false;}_399=l;}else{v--;}_398[1]=Number(v);break;case "D":_398[1]=0;case "d":_398[2]=Number(v);break;case "a":var am=_392.am||_36f["dayPeriods-format-wide-am"],pm=_392.pm||_36f["dayPeriods-format-wide-pm"];if(!_392.strict){var _39e=/\./g;v=v.replace(_39e,"").toLowerCase();am=am.replace(_39e,"").toLowerCase();pm=pm.replace(_39e,"").toLowerCase();}if(_392.strict&&v!=am&&v!=pm){return false;}amPm=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":_398[3]=Number(v);break;case "m":_398[4]=Number(v);break;case "s":_398[5]=Number(v);break;case "S":_398[6]=Number(v);}return true;});var _39f=+_398[3];if(amPm==="p"&&_39f<12){_398[3]=_39f+12;}else{if(amPm==="a"&&_39f==12){_398[3]=0;}}var _3a0=new _36e(_398[0],_398[1],_398[2],_398[3],_398[4],_398[5],_398[6]);return _3a0;};function _384(_3a1,_3a2,_3a3,_3a4){var _3a5=function(x){return x;};_3a2=_3a2||_3a5;_3a3=_3a3||_3a5;_3a4=_3a4||_3a5;var _3a6=_3a1.match(/(''|[^'])+/g);var _3a7=_3a1.charAt(0)=="'";arr.forEach(_3a6,function(_3a8,i){if(!_3a8){_3a6[i]="";}else{_3a6[i]=(_3a7?_3a3:_3a2)(_3a8);_3a7=!_3a7;}});return _3a4(_3a6.join(""));};function _390(_3a9,_3aa,_3ab,_3ac){_3ac=_36c.escapeString(_3ac);var _3ad=i18n.normalizeLocale(_3ab.locale);return _3ac.replace(/([a-z])\1*/ig,function(_3ae){var s;var c=_3ae.charAt(0);var l=_3ae.length;var p2="",p3="";if(_3ab.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d+";break;case "M":s=(l>2)?"\\S+ ?\\S+":p2+"[1-9]|1[0-2]";break;case "d":s="[12]\\d|"+p2+"[1-9]|3[01]";break;case "E":s="\\S+";break;case "h":s=p2+"[1-9]|1[0-2]";break;case "k":s=p2+"\\d|1[01]";break;case "H":s=p2+"\\d|1\\d|2[0-3]";break;case "K":s=p2+"[1-9]|1\\d|2[0-4]";break;case "m":case "s":s=p2+"\\d|[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_3ab.am||_3aa["dayPeriods-format-wide-am"],pm=_3ab.pm||_3aa["dayPeriods-format-wide-pm"];if(_3ab.strict){s=am+"|"+pm;}else{s=am+"|"+pm;if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}}break;default:s=".*";}if(_3a9){_3a9.push(_3ae);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};var _3af=[];_370.addCustomFormats=function(_3b0,_3b1){_3af.push({pkg:_3b0,name:_3b1});};_370._getIslamicBundle=function(_3b2){var _3b3={};arr.forEach(_3af,function(desc){var _3b4=i18n.getLocalization(desc.pkg,desc.name,_3b2);_3b3=lang.mixin(_3b3,_3b4);},this);return _3b3;};_370.addCustomFormats("dojo.cldr","islamic");_370.getNames=function(item,type,_3b5,_3b6,date){var _3b7;var _3b8=_370._getIslamicBundle(_3b6);var _3b9=[item,_3b5,type];if(_3b5=="standAlone"){var key=_3b9.join("-");_3b7=_3b8[key];if(_3b7[0]==1){_3b7=undefined;}}_3b9[1]="format";return (_3b7||_3b8[_3b9.join("-")]).concat();};_370.weekDays=_370.getNames("days","wide","format");_370.months=_370.getNames("months","wide","format");return _370;});},"esri/layers/FeatureLayer":function(){define("esri/layers/FeatureLayer",["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/_base/Deferred","dojo/date/locale","dojo/sniff","dojo/io-query","dojo/dom-construct","dojo/i18n","esri/kernel","esri/lang","esri/request","esri/deferredUtils","esri/SpatialReference","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/symbols/jsonUtils","esri/renderers/SimpleRenderer","esri/renderers/UniqueValueRenderer","esri/renderers/jsonUtils","esri/tasks/QueryTask","esri/tasks/query","esri/tasks/FeatureSet","esri/geometry/Extent","esri/geometry/jsonUtils","esri/geometry/normalizeUtils","esri/layers/GraphicsLayer","esri/layers/Field","esri/layers/TimeInfo","esri/layers/FeatureType","esri/layers/FeatureTemplate","esri/layers/FeatureEditResult","esri/layers/SnapshotMode","esri/layers/OnDemandMode","esri/layers/SelectionMode","esri/layers/TrackManager","dojo/i18n!esri/nls/jsapi","dojo/has!extend-esri?esri/layers/agscommon"],function(_3ba,_3bb,lang,_3bc,_3bd,_3be,_3bf,has,ioq,_3c0,i18n,_3c1,_3c2,_3c3,_3c4,_3c5,_3c6,_3c7,_3c8,_3c9,_3ca,_3cb,_3cc,_3cd,_3ce,_3cf,_3d0,_3d1,_3d2,_3d3,_3d4,_3d5,_3d6,_3d7,_3d8,_3d9,_3da,_3db,_3dc){var _3dd=_3ba(_3d3,{declaredClass:"esri.layers.FeatureLayer",invalidParams:"query contains one or more unsupported parameters",constructor:function(url,_3de){this.i18n=i18n.getLocalization("esri","jsapi");this._outFields=_3de&&_3de.outFields;this._loadCallback=_3de&&_3de.loadCallback;var _3df=_3de&&_3de._usePatch;this._usePatch=(_3df===null||_3df===undefined)?true:_3df;this._trackIdField=_3de&&_3de.trackIdField;this.objectIdField=_3de&&_3de.objectIdField;this._maxOffset=_3de&&_3de.maxAllowableOffset;this._optEditable=_3de&&_3de.editable;this._optAutoGen=_3de&&_3de.autoGeneralize;this.editSummaryCallback=_3de&&_3de.editSummaryCallback;this.userId=_3de&&_3de.userId;this.userIsAdmin=_3de&&_3de.userIsAdmin;this.useMapTime=(_3de&&_3de.hasOwnProperty("useMapTime"))?(!!_3de.useMapTime):true;this.source=_3de&&_3de.source;this.gdbVersion=_3de&&_3de.gdbVersion;this._selectedFeatures={};this._selectedFeaturesArr=[];this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();var ctor=this.constructor,mode=this.mode=(_3c2.isDefined(_3de&&_3de.mode)?_3de.mode:ctor.MODE_ONDEMAND);switch(mode){case ctor.MODE_SNAPSHOT:this._mode=new _3d9(this);this._isSnapshot=true;break;case ctor.MODE_ONDEMAND:this._tileWidth=(_3de&&_3de.tileWidth)||512;this._tileHeight=(_3de&&_3de.tileHeight)||512;this._mode=new _3da(this);var _3e0=_3de&&_3de.latticeTiling;this.latticeTiling=_3e0;break;case ctor.MODE_SELECTION:this._mode=new _3db(this);this._isSelOnly=true;break;}this._initLayer=lang.hitch(this,this._initLayer);this._selectHandler=lang.hitch(this,this._selectHandler);this._editable=false;if(lang.isObject(url)&&url.layerDefinition){var json=url;this._collection=true;this.mode=ctor.MODE_SNAPSHOT;this._initLayer(json);return this;}this._task=new _3cd(this.url,{source:this.source,gdbVersion:this.gdbVersion});var _3e1=this._url.path;this._fserver=false;if(_3e1.search(/\/FeatureServer\//i)!==-1){this._fserver=true;}var _3e2=_3de&&_3de.resourceInfo;if(_3e2){this._initLayer(_3e2);}else{if(this.source){var _3e3={source:this.source.toJson()};this._url.query=lang.mixin(this._url.query,{layer:_3bd.toJson(_3e3)});}if(this.gdbVersion){this._url.query=lang.mixin(this._url.query,{gdbVersion:this.gdbVersion});}_3c3({url:_3e1,content:lang.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});}},_initLayer:function(_3e4,io){if(_3e4||io){this._json=_3e4;this._findCredential();var ssl=(this.credential&&this.credential.ssl)||(_3e4&&_3e4._ssl);if(ssl){this._useSSL();this._task._useSSL();}if(this._collection){this._mode=new _3d9(this);this._isSnapshot=true;this._featureSet=_3e4.featureSet;this._nextId=_3e4.nextObjectId;_3e4=_3e4.layerDefinition;}if(_3e4.hasOwnProperty("capabilities")){var _3e5=(this.capabilities=_3e4.capabilities);if(_3e5&&_3e5.toLowerCase().indexOf("editing")!==-1){this._editable=true;}else{this._editable=false;}}else{if(!this._collection){this._editable=this._fserver;}}if(_3c2.isDefined(this._optEditable)){this._editable=this._optEditable;delete this._optEditable;}this._json=_3bd.toJson(this._json);if(this.isEditable()){delete this._maxOffset;}else{if(this.mode!==this.constructor.MODE_SNAPSHOT&&((_3e4.geometryType==="esriGeometryPolyline")||(_3e4.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=_3c2.isDefined(this._optAutoGen)?this._optAutoGen:(this.mode===this.constructor.MODE_ONDEMAND);delete this._optAutoGen;}}var _3e6=_3e4.effectiveMinScale||_3e4.minScale,_3e7=_3e4.effectiveMaxScale||_3e4.maxScale;if(!this._hasMin&&_3e6){this.setMinScale(_3e6);}if(!this._hasMax&&_3e7){this.setMaxScale(_3e7);}this.layerId=_3e4.id;this.name=_3e4.name;this.description=_3e4.description;this.copyright=_3e4.copyrightText;this.type=_3e4.type;this.geometryType=_3e4.geometryType;this.displayField=_3e4.displayField;this.defaultDefinitionExpression=_3e4.definitionExpression;this.fullExtent=new _3d0(_3e4.extent);this.initialExtent=new _3d0(this.fullExtent.toJson());if(this.fullExtent.spatialReference){this.spatialReference=new _3c5(this.fullExtent.spatialReference.toJson());}this.defaultVisibility=_3e4.defaultVisibility;if((this.geometryType==="esriGeometryPoint")||(this.geometryType==="esriGeometryMultipoint")){this.latticeTiling=false;}this.indexedFields=_3e4.indexedFields;this.maxRecordCount=_3e4.maxRecordCount;this.canModifyLayer=_3e4.canModifyLayer;this.supportsStatistics=_3e4.supportsStatistics;this.supportsAdvancedQueries=_3e4.supportsAdvancedQueries;this.hasLabels=_3e4.hasLabels;this.canScaleSymbols=_3e4.canScaleSymbols;this.supportsRollbackOnFailure=_3e4.supportsRollbackOnFailure;this.syncCanReturnChanges=_3e4.syncCanReturnChanges;this.isDataVersioned=_3e4.isDataVersioned;this.editFieldsInfo=_3e4.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=_3e4.ownershipBasedAccessControlForFeatures;if(this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures){this.creatorField=this.editFieldsInfo.creatorField;}this.relationships=_3e4.relationships;this.allowGeometryUpdates=_3c2.isDefined(_3e4.allowGeometryUpdates)?_3e4.allowGeometryUpdates:true;this._isTable=(this.type==="Table");var _3e8=(this.fields=[]),_3e9=_3e4.fields,i;for(i=0;i<_3e9.length;i++){_3e8.push(new _3d4(_3e9[i]));}if(!this.objectIdField){this.objectIdField=_3e4.objectIdField;if(!this.objectIdField){_3e9=_3e4.fields;for(i=0;i<_3e9.length;i++){var _3ea=_3e9[i];if(_3ea.type==="esriFieldTypeOID"){this.objectIdField=_3ea.name;break;}}}if(!this.objectIdField){console.debug("esri.layers.FeatureLayer: "+_3c2.substitute({url:this.url},"objectIdField is not set [url: ${url}]"));}}if(!_3c2.isDefined(this._nextId)){var _3eb=this.objectIdField,_3ec=-1;if(this._collection&&_3eb){var fset=this._featureSet,_3ed=fset&&fset.features,il=_3ed?_3ed.length:0,oid,attr;for(i=0;i<il;i++){attr=_3ed[i].attributes;oid=attr&&attr[_3eb];if(oid>_3ec){_3ec=oid;}}}this._nextId=(_3ec+1);}this.globalIdField=_3e4.globalIdField;var _3ee=(this.typeIdField=_3e4.typeIdField),_3ef;if(_3ee){_3ef=!this._getField(_3ee)&&this._getField(_3ee,true);if(_3ef){this.typeIdField=_3ef.name;}}this.visibilityField=_3e4.visibilityField;var _3f0=_3e4.defaultSymbol;if(_3f0){this.defaultSymbol=_3c9.fromJson(_3f0);}var _3f1=this.types=[],_3f2=_3e4.types,_3f3,_3f4,_3f5,_3f6=this.editFieldsInfo,_3f7=_3f6&&_3f6.creatorField,_3f8=_3f6&&_3f6.editorField,fix=(_3f7||_3f8),_3f9=[];if(_3f2){for(i=0;i<_3f2.length;i++){_3f3=new _3d6(_3f2[i]);_3f4=_3f3.templates;if(fix&&_3f4&&_3f4.length){_3f9=_3f9.concat(_3f4);}_3f1.push(_3f3);}}var _3fa=_3e4.templates,_3fb,_3fc=this.templates=[];if(_3fa){for(i=0;i<_3fa.length;i++){_3fb=new _3d7(_3fa[i]);if(fix){_3f9.push(_3fb);}_3fc.push(_3fb);}}for(i=0;i<_3f9.length;i++){_3f5=lang.getObject("prototype.attributes",false,_3f9[i]);if(_3f5){if(_3f7){delete _3f5[_3f7];}if(_3f8){delete _3f5[_3f8];}}}var _3fd=_3e4.timeInfo;if(_3fd){this.timeInfo=new _3d5(_3fd);this._startTimeField=_3fd.startTimeField;this._endTimeField=_3fd.endTimeField;if(this._startTimeField&&this._endTimeField){this._twoTimeFields=true;}if(this._trackIdField){_3fd.trackIdField=this._trackIdField;}else{this._trackIdField=_3fd.trackIdField;}}this.hasAttachments=(!this._collection&&_3e4.hasAttachments)?true:false;this.htmlPopupType=_3e4.htmlPopupType;var _3fe=_3e4.drawingInfo,_3ff;if(!this.renderer){if(_3fe&&_3fe.renderer){_3ff=_3fe.renderer;this.setRenderer(_3cc.fromJson(_3ff));if(_3ff.type==="classBreaks"){this.renderer.setMaxInclusive(true);}if(!this._collection){var _400=_3ff.type,_401=[];_3ff=this.renderer;switch(_400){case "simple":_401.push(_3ff.symbol);break;case "uniqueValue":case "classBreaks":_401.push(_3ff.defaultSymbol);_401=_401.concat(_3bc.map(_3ff.infos,function(info){return info.symbol;}));break;}_401=_3bc.filter(_401,_3c2.isDefined);var _402=this._url.path+"/images/",_403=this._getToken();_3bc.forEach(_401,function(sym){var url=sym.url;if(url){if((url.search(/https?\:/)===-1)&&(url.indexOf("data:")===-1)){sym.url=_402+url;}if(_403&&sym.url.search(/https?\:/)!==-1){sym.url+=("?token="+_403);}}});}}else{if(_3f0){_3f2=this.types;if(_3f2.length>0){_3ff=new _3cb(this.defaultSymbol,this.typeIdField);_3bc.forEach(_3f2,function(type){_3ff.addValue(type.id,type.symbol);});}else{_3ff=new _3ca(this.defaultSymbol);}this.setRenderer(_3ff);}else{if(!this._isTable){var _404;switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":_404=new _3c6();break;case "esriGeometryPolyline":_404=new _3c7();break;case "esriGeometryPolygon":_404=new _3c8();break;}this.setRenderer(_404?new _3ca(_404):null);}}}}var _405=(_3fe&&_3fe.transparency)||0;if(!_3c2.isDefined(this.opacity)&&_405>0){this.opacity=1-(_405/100);}this.version=_3e4.currentVersion;if(!this.version){var ver;if("capabilities" in _3e4||"drawingInfo" in _3e4||"hasAttachments" in _3e4||"htmlPopupType" in _3e4||"relationships" in _3e4||"timeInfo" in _3e4||"typeIdField" in _3e4||"types" in _3e4){ver=10;}else{ver=9.3;}this.version=ver;}if((has("ie")||has("safari"))&&this.isEditable()&&this.version<10.02){this._ts=true;}this.loaded=true;this._fixRendererFields();this._checkFields();this._updateCaps();var _406=function(){this.onLoad(this);var _407=this._loadCallback;if(_407){delete this._loadCallback;_407(this);}};if(this._collection){this._fireUpdateStart();var _408=this._featureSet;delete this._featureSet;this._mode._drawFeatures(new _3cf(_408));this._fcAdded=true;_406.call(this);}else{this._forceIdentity(_406);}}},setRenderer:function(ren){this.inherited("setRenderer",arguments);var _409=this.renderer;if(_409){this._ager=(_409.declaredClass.indexOf("TemporalRenderer")!==-1&&_409.observationAger&&_409.observationRenderer);var _40a=_3bc.filter([_409,_409.observationRenderer,_409.latestObservationRenderer,_409.trackRenderer],_3c2.isDefined);var _40b=[];_3bc.forEach(_40a,function(rnd){if(!lang.isFunction(rnd.attributeField)){_40b.push(rnd.attributeField);}_40b.push(rnd.attributeField2);_40b.push(rnd.attributeField3);},this);this._rendererFields=_3bc.filter(_40b,_3c2.isDefined);}else{this._ager=false;this._rendererFields=[];}if(this.loaded&&this._rendererFields.length>0){this._fixRendererFields();this._checkFields(this._rendererFields);}if(this.loaded&&this._collection){this._typesDirty=true;}},_setMap:function(map){var div=this.inherited(arguments),mode=this._mode;if(mode){mode.initialize(map);}return div;},_unsetMap:function(map){var mode=this._mode;if(mode){mode.suspend();}if(this._trackManager){this._trackManager.destroy();this._trackManager=null;}_3bb.disconnect(this._zoomConnect);this._zoomConnect=null;this._toggleTime(false);this.inherited("_unsetMap",arguments);},refresh:function(){var mode=this._mode;if(mode){mode.refresh();}},setEditable:function(_40c){if(!this._collection){console.log("FeatureLayer:setEditable - this functionality is not yet supported for layer in a feature service");return this;}if(!this.loaded){this._optEditable=_40c;return this;}var _40d=this._editable;this._editable=_40c;this._updateCaps();if(_40d!==_40c){this.onCapabilitiesChange();}return this;},getEditCapabilities:function(_40e){var _40f={"canCreate":false,"canUpdate":false,"canDelete":false};if(!this.loaded||!this.isEditable()){return _40f;}var _410=_40e&&_40e.feature,_411=_40e&&_40e.userId,caps=_3bc.map((this.capabilities?this.capabilities.toLowerCase().split(","):[]),lang.trim),_412=_3bc.indexOf(caps,"editing")>-1,_413=_412&&(_3bc.indexOf(caps,"create")>-1),_414=_412&&(_3bc.indexOf(caps,"update")>-1),_415=_412&&(_3bc.indexOf(caps,"delete")>-1),_416=this.ownershipBasedAccessControlForFeatures,_417=this.editFieldsInfo,_418=_417&&_417.creatorField,_419=_417&&_417.realm,_41a=_410&&_410.attributes,_41b=(_41a&&_418)?_41a[_418]:undefined,_41c,_41d=!!this.userIsAdmin,_41e=!_416||_41d||!!(_416.allowOthersToUpdate||_416.allowUpdateToOthers),_41f=!_416||_41d||!!(_416.allowOthersToDelete||_416.allowDeleteToOthers);if(_41d||(_412&&!(_413||_414||_415))){_413=_414=_415=true;}_41c={"canCreate":_413,"canUpdate":_414,"canDelete":_415};if(_41b===null){_41c.canUpdate=_414&&_41e;_41c.canDelete=_415&&_41f;}else{if(_41b===""){return _41c;}else{if(_41b){_411=_411||this.getUserId();if(_411&&_419){_411=_411+"@"+_419;}if(_411.toLowerCase()===_41b.toLowerCase()){return _41c;}else{_41c.canUpdate=_414&&_41e;_41c.canDelete=_415&&_41f;}}}}return _41c;},getUserId:function(){var _420;if(this.loaded){_420=(this.credential&&this.credential.userId)||this.userId||"";}return _420;},setUserIsAdmin:function(_421){this.userIsAdmin=_421;},setEditSummaryCallback:function(_422){this.editSummaryCallback=_422;},getEditSummary:function(_423,_424,_425){_425=_3c2.isDefined(_425)?_425:(new Date()).getTime();var _426="",info=this.getEditInfo(_423,_424,_425),_427=(_424&&_424.callback)||this.editSummaryCallback;if(_427){info=_427(_423,info)||"";}if(lang.isString(info)){_426=info;}else{if(info){var _428=info.action,_429=info.userId,_42a=info.timeValue,_42b=0;if(_428){_42b++;}if(_429){_42b++;}if(_3c2.isDefined(_42a)){_42b++;}if(_42b>1){_426=(_428==="edit"?"edit":"create")+(_429?"User":"")+(_3c2.isDefined(_42a)?info.displayPattern:"");}}_426=_426&&_3c2.substitute(info,this.i18n.layers.FeatureLayer[_426]);}return _426;},getEditInfo:function(_42c,_42d,_42e){if(!this.loaded){return;}_42e=_3c2.isDefined(_42e)?_42e:(new Date()).getTime();var _42f=(_42d&&_42d.action)||"last",_430=this.editFieldsInfo,_431=_430&&_430.creatorField,_432=_430&&_430.creationDateField,_433=_430&&_430.editorField,_434=_430&&_430.editDateField,_435=_430&&_430.realm,_436=_42c&&_42c.attributes,_437=(_436&&_431)?_436[_431]:undefined,_438=(_436&&_432)?_436[_432]:null,_439=(_436&&_433)?_436[_433]:undefined,_43a=(_436&&_434)?_436[_434]:null,_43b=this._getEditData(_437,_438,_42e),_43c=this._getEditData(_439,_43a,_42e),_43d;switch(_42f){case "creation":_43d=_43b;break;case "edit":_43d=_43c;break;case "last":_43d=_43c||_43b;break;}if(_43d){_43d.action=(_43d===_43c)?"edit":"creation";}return _43d;},_getEditData:function(_43e,_43f,_440){var data,_441,_442,_443=60000,_444=3600000,_445=2*_444,_446=24*_444,_447=7*_446;if(_3c2.isDefined(_43f)){_441=_440-_43f;if(_441<0){_442="Full";}else{if(_441<_443){_442="Seconds";}else{if(_441<(2*_443)){_442="Minute";}else{if(_441<_444){_442="Minutes";}else{if(_441<_445){_442="Hour";}else{if(_441<_446){_442="Hours";}else{if(_441<_447){_442="WeekDay";}else{_442="Full";}}}}}}}}if((_43e!==undefined)||_442){data=data||{};data.userId=_43e;if(_442){var _448=_3bf.format,_449=new Date(_43f);data.minutes=Math.floor(_441/_443);data.hours=Math.floor(_441/_444);data.weekDay=_448(_449,{datePattern:"EEEE",selector:"date"});data.formattedDate=_448(_449,{selector:"date"});data.formattedTime=_448(_449,{selector:"time"});data.displayPattern=_442;data.timeValue=_43f;}}return data;},isEditable:function(){return !!(this._editable||this.userIsAdmin);},setMaxAllowableOffset:function(_44a){if(!this.isEditable()){this._maxOffset=_44a;}return this;},getMaxAllowableOffset:function(){return this._maxOffset;},setAutoGeneralize:function(_44b){if(!this.loaded){this._optAutoGen=_44b;}else{if(!this.isEditable()&&(this.mode!==this.constructor.MODE_SNAPSHOT)&&((this.geometryType==="esriGeometryPolyline")||(this.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=_44b;if(_44b){var map=this._map;if(map&&map.loaded){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}}else{delete this._maxOffset;}}}return this;},setGDBVersion:function(_44c){if(!this._collection&&(_44c!==this.gdbVersion)&&(_44c||this.gdbVersion)){this.gdbVersion=_44c;this._task.gdbVersion=_44c;this._url.query=lang.mixin(this._url.query,{gdbVersion:_44c});if(this.loaded){this.clearSelection();if(this._map){this.refresh();}}this.onGDBVersionChange();}return this;},setDefinitionExpression:function(expr){this._defnExpr=expr;var mode=this._mode;if(mode){mode.propertyChangeHandler(1);}return this;},getDefinitionExpression:function(){return this._defnExpr;},setTimeDefinition:function(_44d){if(this._isSnapshot){this._timeDefn=_44d;var mode=this._mode;if(mode){mode.propertyChangeHandler(2);}}else{console.log("FeatureLayer.setTimeDefinition: layer in on-demand or selection mode does not support time definitions. Layer id = "+this.id+", Layer URL = "+this.url);}return this;},getTimeDefinition:function(){return this._timeDefn;},setTimeOffset:function(_44e,_44f){this._timeOffset=_44e;this._timeOffsetUnits=_44f;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}return this;},setUseMapTime:function(use){this.useMapTime=use;this._toggleTime(!this.suspended);var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},selectFeatures:function(_450,_451,_452,_453){_451=_451||this.constructor.SELECTION_NEW;var _454=this._getShallowClone(_450),map=this._map,_455,dfd=_3c4._fixDfd(new _3be(_3c4._dfdCanceller));_454.outFields=this._getOutFields();_454.returnGeometry=true;if(map){_454.outSpatialReference=new _3c5(map.spatialReference.toJson());}if(!this._applyQueryFilters(_454)){_455={features:[]};this._selectHandler(_455,_451,_452,_453,dfd);return dfd;}var _456=this._canDoClientSideQuery(_454);if(_456){_455={features:this._doQuery(_454,_456)};this._selectHandler(_455,_451,_452,_453,dfd);return dfd;}else{if(this._collection){var err=new Error("FeatureLayer::selectFeatures - "+this.invalidParams);this._resolve([err],null,_453,dfd,true);return dfd;}var self=this;if(this._ts){_454._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task.execute(_454);temp.addCallbacks(function(_457){self._selectHandler(_457,_451,_452,_453,dfd);},function(err){self._resolve([err],null,_453,dfd,true);});return dfd;}},getSelectedFeatures:function(){var _458=this._selectedFeatures,_459=[],item;for(item in _458){if(_458.hasOwnProperty(item)){_459.push(_458[item]);}}return _459;},clearSelection:function(_45a){var _45b=this._selectedFeatures,mode=this._mode,item;for(item in _45b){if(_45b.hasOwnProperty(item)){this._unSelectFeatureIIf(item,mode);mode._removeFeatureIIf(item);}}this._selectedFeatures={};if(this._isSelOnly){mode._applyTimeFilter(true);}if(!_45a){this.onSelectionClear();}return this;},setSelectionSymbol:function(_45c){this._selectionSymbol=_45c;if(_45c){var _45d=this._selectedFeatures,item;for(item in _45d){if(_45d.hasOwnProperty(item)){_45d[item].setSymbol(_45c);}}}return this;},getSelectionSymbol:function(){return this._selectionSymbol;},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(adds,_45e,_45f,_460,_461,_462){var _463=_462.assembly,dfd=_462.dfd;this._applyNormalized(adds,_463&&_463[0]);this._applyNormalized(_45e,_463&&_463[1]);this.onBeforeApplyEdits(adds,_45e,_45f);var i,_464={},_465=this.objectIdField,_466={f:"json"},_467=false;if(this._collection){var _468={};_468.addResults=adds?_3bc.map(adds,function(){_467=true;return {objectId:this._nextId++,success:true};},this):null;_468.updateResults=_45e?_3bc.map(_45e,function(_469){_467=true;var oid=_469.attributes[_465];_464[oid]=_469;return {objectId:oid,success:true};},this):null;_468.deleteResults=_45f?_3bc.map(_45f,function(_46a){_467=true;return {objectId:_46a.attributes[_465],success:true};},this):null;if(_467){this._editHandler(_468,adds,_464,_460,_461,dfd);}return;}if(adds&&adds.length>0){_466.adds=this._convertFeaturesToJson(adds,0,1);_467=true;}if(_45e&&_45e.length>0){for(i=0;i<_45e.length;i++){var _46b=_45e[i];_464[_46b.attributes[_465]]=_46b;}_466.updates=this._convertFeaturesToJson(_45e,0,0,1);_467=true;}if(_45f&&_45f.length>0){var ids=[];for(i=0;i<_45f.length;i++){ids.push(_45f[i].attributes[_465]);}_466.deletes=ids.join(",");_467=true;}if(_467){var self=this;return _3c3({url:this._url.path+"/applyEdits",content:lang.mixin(_466,this._url.query),callbackParamName:"callback",load:function(_46c){self._editHandler(_46c,adds,_464,_460,_461,dfd);},error:function(err){self._resolve([err],null,_461,dfd,true);}},{usePost:true});}},queryFeatures:function(_46d,_46e,_46f){return this._query("execute","onQueryFeaturesComplete",_46d,_46e,_46f);},queryRelatedFeatures:function(_470,_471,_472){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",_470,_471,_472);},queryIds:function(_473,_474,_475){return this._query("executeForIds","onQueryIdsComplete",_473,_474,_475);},queryCount:function(_476,_477,_478){return this._query("executeForCount","onQueryCountComplete",_476,_477,_478);},queryAttachmentInfos:function(_479,_47a,_47b){var url=this._url.path+"/"+_479+"/attachments",dfd=new _3be(_3c4._dfdCanceller),self=this;dfd._pendingDfd=_3c3({url:url,content:lang.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(_47c){var _47d=_47c.attachmentInfos,_47e;_3bc.forEach(_47d,function(info){_47e=ioq.objectToQuery({gdbVersion:self._url.query&&self._url.query.gdbVersion,layer:self._url.query&&self._url.query.layer,token:self._getToken()});info.url=url+"/"+info.id+(_47e?("?"+_47e):"");info.objectId=_479;});self._resolve([_47d],"onQueryAttachmentInfosComplete",_47a,dfd);},error:function(err){self._resolve([err],null,_47b,dfd,true);}});return dfd;},addAttachment:function(_47f,_480,_481,_482){return this._sendAttachment("add",_47f,_480,_481,_482);},updateAttachment:function(_483,_484,_485,_486,_487){_485.appendChild(_3c0.create("input",{type:"hidden",name:"attachmentId",value:_484}));return this._sendAttachment("update",_483,_485,_486,_487);},deleteAttachments:function(_488,_489,_48a,_48b){var url=this._url.path+"/"+_488+"/deleteAttachments",dfd=new _3be(_3c4._dfdCanceller),self=this,_48c={f:"json",attachmentIds:_489.join(",")};dfd._pendingDfd=_3c3({url:url,content:lang.mixin(_48c,this._url.query),callbackParamName:"callback",load:lang.hitch(this,function(_48d){var _48e=_48d.deleteAttachmentResults;_48e=_3bc.map(_48e,function(_48f){var res=new _3d8(_48f);res.attachmentId=res.objectId;res.objectId=_488;return res;});self._resolve([_48e],"onDeleteAttachmentsComplete",_48a,dfd);}),error:function(err){self._resolve([err],null,_48b,dfd,true);}},{usePost:true});return dfd;},addType:function(_490){var _491=this.types;if(_491){var _492=_3bc.some(_491,function(type){if(type.id==_490.id){return true;}return false;});if(_492){return false;}else{_491.push(_490);}}else{this.types=[_490];}this._typesDirty=true;return true;},deleteType:function(_493){if(!this._collection){return;}var _494=this.types;if(_494){var _495=-1;_3bc.some(_494,function(type,_496){if(type.id==_493){_495=_496;return true;}return false;});if(_495>-1){this._typesDirty=true;return _494.splice(_495,1)[0];}}},toJson:function(){var _497=this._json,json=lang.isString(_497)?_3bd.fromJson(_497):lang.clone(_497);if(!json){return;}json=json.layerDefinition?json:{layerDefinition:json};var _498=json.layerDefinition,_499=this._collection;if(_499&&this._typesDirty){_498.types=_3bc.map(this.types||[],function(type){return type.toJson();});var _49a=this.renderer,_49b=_498.drawingInfo;if(_49b&&_49a&&_49a.declaredClass.indexOf("TemporalRenderer")===-1){_49b.renderer=_49a.toJson();}}var _49c=null;if(!(_499&&!this._fcAdded)){_49c={geometryType:_498.geometryType,features:this._convertFeaturesToJson(this.graphics,true)};}json.featureSet=lang.mixin({},json.featureSet||{},_49c);if(_499){json.nextObjectId=this._nextId;_498.capabilities=this.capabilities;}return json;},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},_forceIdentity:function(_49d){var self=this,path=this._url&&this._url.path;if((this.ownershipBasedAccessControlForFeatures||this.userIsAdmin)&&!this._getToken()&&path&&_3c1.id&&_3c1.id._hasPortalSession()&&_3c1.id._doPortalSignIn(path)){_3c1.id.getCredential(path).then(function(){self._findCredential();_49d.call(self);},function(){_49d.call(self);});}else{_49d.call(this);}},_updateCaps:function(){var _49e=this._editable,_49f=lang.trim(this.capabilities||""),_4a0=_3bc.map((_49f?_49f.split(","):[]),lang.trim),caps=_3bc.map((_49f?_49f.toLowerCase().split(","):[]),lang.trim),_4a1=_3bc.indexOf(caps,"editing"),cap,i,_4a2,_4a3={"Create":_3bc.indexOf(caps,"create"),"Update":_3bc.indexOf(caps,"update"),"Delete":_3bc.indexOf(caps,"delete")};if(_49e&&_4a1===-1){_4a0.push("Editing");}else{if(!_49e&&_4a1>-1){_4a2=[_4a1];for(cap in _4a3){if(_4a3[cap]>-1){_4a2.push(_4a3[cap]);}}_4a2.sort();for(i=_4a2.length-1;i>=0;i--){_4a0.splice(_4a2[i],1);}}}this.capabilities=_4a0.join(",");},_counter:{value:0},_getUniqueId:function(){return this._counter.value++;},onSuspend:function(){this.inherited(arguments);this._toggleTime(false);var mode=this._mode;if(mode){mode.suspend();}},onResume:function(evt){this.inherited(arguments);this._toggleTime(true);this._updateMaxOffset();var mode=this._mode,map=this._map,_4a4=this.renderer;if(evt.firstOccurrence){this.clearSelection();if(this.timeInfo){if(this._trackIdField||(_4a4&&(_4a4.latestObservationRenderer||_4a4.trackRenderer))){this._trackManager=new _3dc(this);this._trackManager.initialize(map);}}this._zoomConnect=_3bb.connect(map,"onZoomEnd",this,this._updateMaxOffset);}if(mode){evt.firstOccurrence?mode.startup():mode.resume();}},_updateMaxOffset:function(){var map=this._map;if(map&&map.loaded){if(this._autoGeneralize){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}}},_toggleTime:function(_4a5){var map=this._map;if(_4a5&&this.timeInfo&&this.useMapTime&&map){this._mapTimeExtent=map.timeExtent;if(!this._timeConnect){this._timeConnect=_3bb.connect(map,"onTimeExtentChange",this,this._timeChangeHandler);}}else{this._mapTimeExtent=null;_3bb.disconnect(this._timeConnect);this._timeConnect=null;}},_timeChangeHandler:function(_4a6){this._mapTimeExtent=_4a6;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},_getOffsettedTE:function(_4a7){var _4a8=this._timeOffset,_4a9=this._timeOffsetUnits;return (_4a7&&_4a8&&_4a9)?_4a7.offset(-1*_4a8,_4a9):_4a7;},_getTimeOverlap:function(_4aa,_4ab){if(_4aa&&_4ab){return _4aa.intersection(_4ab);}else{return _4aa||_4ab;}},_getTimeFilter:function(_4ac){var _4ad=this.getTimeDefinition(),_4ae=null,_4af;if(_4ad||_4ae){_4af=this._getTimeOverlap(_4ad,_4ae);if(!_4af){return [false];}}if(_4ac){_4ac=_4af?this._getTimeOverlap(_4ac,_4af):_4ac;if(!_4ac){return [false];}}else{_4ac=_4af;}return [true,_4ac];},_getAttributeFilter:function(_4b0){var _4b1=this.getDefinitionExpression();if(_4b0){_4b0=_4b1?"("+_4b1+") AND ("+_4b0+")":_4b0;}else{_4b0=_4b1;}return _4b0;},_applyQueryFilters:function(_4b2){_4b2.where=this._getAttributeFilter(_4b2.where);_4b2.maxAllowableOffset=this._maxOffset;if(this.timeInfo){var _4b3=this._getTimeFilter(_4b2.timeExtent);if(!_4b3[0]){return false;}else{_4b2.timeExtent=_4b3[1];}}return true;},_add:function(_4b4){var _4b5=this._selectionSymbol,attr=_4b4.attributes,_4b6=this.visibilityField;if(_4b5&&this._isSelOnly){_4b4.setSymbol(_4b5);}if(_4b6&&attr&&attr.hasOwnProperty(_4b6)){_4b4[attr[_4b6]?"show":"hide"]();}return this.add.apply(this,arguments);},_remove:function(){return this.remove.apply(this,arguments);},_canDoClientSideQuery:function(_4b7){var _4b8=[],map=this._map;if(this._isTable||!map){return;}if(_4b7.text||(_4b7.where&&_4b7.where!==this.getDefinitionExpression())){return;}var _4b9=this._isSnapshot,_4ba=this._isSelOnly;var _4bb=_4b7.geometry;if(_4bb){if(!_4ba&&_4b7.spatialRelationship===_3ce.SPATIAL_REL_INTERSECTS&&(_4bb.type==="extent"&&(_4b9||map.extent.contains(_4bb)))){_4b8.push(1);}else{return;}}var ids=_4b7.objectIds;if(ids){if(_4b9){_4b8.push(2);}else{var len=ids.length,mode=this._mode,_4bc=0,i;for(i=0;i<len;i++){if(mode._getFeature(ids[i])){_4bc++;}}if(_4bc===len){_4b8.push(2);}else{return;}}}if(this.timeInfo){var _4bd=_4b7.timeExtent,_4be=this._mapTimeExtent;if(_4b9){if(_4bd){_4b8.push(3);}}else{if(_4ba){if(_4bd){return;}}else{if(_4be){if(_3bc.indexOf(_4b8,2)!==-1){if(_4bd){_4b8.push(3);}}else{return;}}else{if(_4b8.length>0){if(_4bd){_4b8.push(3);}}else{if(_4bd){return;}}}}}}return _4b8.length>0?_4b8:null;},_doQuery:function(_4bf,_4c0,_4c1){var _4c2=[],mode=this._mode,_4c3=this.objectIdField,i,len,_4c4;if(_3bc.indexOf(_4c0,2)!==-1){_4c2=[];var ids=_4bf.objectIds;len=ids.length;for(i=0;i<len;i++){var obj=mode._getFeature(ids[i]);if(obj){_4c2.push(obj);}}if(_4c2.length===0){return [];}}if(_3bc.indexOf(_4c0,1)!==-1){_4c4=_4c2.length>0?_4c2:this.graphics;len=_4c4.length;var _4c5=_4bf.geometry._normalize(null,true);_4c2=[];for(i=0;i<len;i++){var _4c6=_4c4[i],_4c7=_4c6.geometry;if(_4c7){if(this.normalization&&_4c5.length){if(_4c5[0].intersects(_4c7)||_4c5[1].intersects(_4c7)){_4c2.push(_4c6);}}else{if(_4c5.intersects(_4c7)){_4c2.push(_4c6);}}}}if(_4c2.length===0){return [];}}if(_3bc.indexOf(_4c0,3)!==-1){if(this.timeInfo){_4c4=_4c2.length>0?_4c2:this.graphics;var time=_4bf.timeExtent,_4c8=this._filterByTime(_4c4,time.startTime,time.endTime);_4c2=_4c8.match;}}if(_4c1){return _3bc.map(_4c2,function(obj){return obj.attributes[_4c3];},this);}else{return _4c2;}},_filterByTime:function(_4c9,_4ca,_4cb){var _4cc=this._startTimeField,_4cd=this._endTimeField,_4ce;if(!this._twoTimeFields){_4ce=_4cc||_4cd;}var _4cf=_3c2.isDefined,yea=[],nay=[],i,len=_4c9.length,_4d0,_4d1;_4ca=_4ca?_4ca.getTime():-Infinity;_4cb=_4cb?_4cb.getTime():Infinity;if(_4ce){for(i=0;i<len;i++){_4d0=_4c9[i];_4d1=_4d0.attributes;var time=_4d1[_4ce];if(time>=_4ca&&time<=_4cb){yea.push(_4d0);}else{nay.push(_4d0);}}}else{for(i=0;i<len;i++){_4d0=_4c9[i];_4d1=_4d0.attributes;var _4d2=_4d1[_4cc],end=_4d1[_4cd];_4d2=_4cf(_4d2)?_4d2:-Infinity;end=_4cf(end)?end:Infinity;if((_4d2>=_4ca&&_4d2<=_4cb)||(end>=_4ca&&end<=_4cb)||(_4ca>=_4d2&&_4cb<=end)){yea.push(_4d0);}else{nay.push(_4d0);}}}return {match:yea,noMatch:nay};},_resolve:function(args,_4d3,_4d4,dfd,_4d5){if(_4d3){this[_4d3].apply(this,args);}if(_4d4){_4d4.apply(null,args);}if(dfd){_3c4._resDfd(dfd,args,_4d5);}},_getShallowClone:function(_4d6){var _4d7=new _3ce(),prop;for(prop in _4d6){if(_4d6.hasOwnProperty(prop)){_4d7[prop]=_4d6[prop];}}return _4d7;},_query:function(type,_4d8,_4d9,_4da,_4db){var that=this,map=this._map,dfd=new _3be(_3c4._dfdCanceller),_4dc=_4d9;var _4dd=function(_4de,_4df){if(!_4df&&type==="execute"&&!that._isTable){var _4e0=_4de.features,mode=that._mode,_4e1=that.objectIdField,il=_4e0.length,i;for(i=il-1;i>=0;i--){var oid=_4e0[i].attributes[_4e1];var _4e2=mode._getFeature(oid);if(_4e2){_4e0.splice(i,1,_4e2);}}}that._resolve([_4de],_4d8,_4da,dfd);};if(type!=="executeRelationshipQuery"){_4dc=this._getShallowClone(_4d9);_4dc.outFields=this._getOutFields();_4dc.returnGeometry=(!map&&_4d9.hasOwnProperty("returnGeometry"))?_4d9.returnGeometry:true;var _4e3;if(map){_4dc.outSpatialReference=new _3c5(map.spatialReference.toJson());}if(!this._applyQueryFilters(_4dc)){switch(type){case "execute":_4e3=new _3cf({features:[]});break;case "executeForIds":_4e3=[];break;case "executeForCount":_4e3=0;break;}_4dd(_4e3,true);return dfd;}var _4e4=this._canDoClientSideQuery(_4dc);if(_4e4){var _4e5=this._doQuery(_4dc,_4e4,(type==="executeForIds"||type==="executeForCount"));switch(type){case "execute":_4e3=new _3cf();_4e3.features=_4e5;break;case "executeForIds":_4e3=_4e5;break;case "executeForCount":_4e3=_4e5.length;break;}_4dd(_4e3,true);return dfd;}}if(this._collection){var err=new Error("FeatureLayer::_query - "+this.invalidParams);this._resolve([err],null,_4db,dfd,true);return dfd;}if(this._ts){_4dc._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task[type](_4dc);temp.addCallbacks(_4dd,function(err){that._resolve([err],null,_4db,dfd,true);});return dfd;},_convertFeaturesToJson:function(_4e6,_4e7,_4e8,_4e9){var json=[],_4ea=this._selectionSymbol,_4eb=this.visibilityField,i,_4ec,_4ed=this.objectIdField;if(this.loaded&&(_4e8||_4e9)){_4ec=_3bc.filter(this.fields,function(_4ee){return (_4ee.editable===false)&&(!_4e9||(_4ee.name!==_4ed));});}for(i=0;i<_4e6.length;i++){var _4ef=_4e6[i],_4f0={},_4f1=_4ef.geometry,attr=_4ef.attributes,_4f2=_4ef.symbol;if(_4f1&&(!_4e9||!this.loaded||this.allowGeometryUpdates)){_4f0.geometry=_4f1.toJson();}if(_4eb){_4f0.attributes=attr=lang.mixin({},attr);attr[_4eb]=_4ef.visible?1:0;}else{if(attr){_4f0.attributes=lang.mixin({},attr);}}if(_4f0.attributes&&_4ec&&_4ec.length){_3bc.forEach(_4ec,function(_4f3){delete _4f0.attributes[_4f3.name];});}if(_4f2&&(_4f2!==_4ea)){_4f0.symbol=_4f2.toJson();}json.push(_4f0);}return _4e7?json:_3bd.toJson(json);},_selectHandler:function(_4f4,_4f5,_4f6,_4f7,dfd){var _4f8,ctor=this.constructor;switch(_4f5){case ctor.SELECTION_NEW:this.clearSelection(true);_4f8=true;break;case ctor.SELECTION_ADD:_4f8=true;break;case ctor.SELECTION_SUBTRACT:_4f8=false;break;}var i,_4f9=_4f4.features,mode=this._mode,_4fa=[],_4fb=this.objectIdField,_4fc,oid;if(_4f8){for(i=0;i<_4f9.length;i++){_4fc=_4f9[i];oid=_4fc.attributes[_4fb];var _4fd=mode._addFeatureIIf(oid,_4fc);_4fa.push(_4fd);this._selectFeatureIIf(oid,_4fd,mode);}}else{for(i=0;i<_4f9.length;i++){_4fc=_4f9[i];oid=_4fc.attributes[_4fb];this._unSelectFeatureIIf(oid,mode);var _4fe=mode._removeFeatureIIf(oid);_4fa.push(_4fe||_4fc);}}if(this._isSelOnly){mode._applyTimeFilter(true);}this._resolve([_4fa,_4f5,_4f4.exceededTransferLimit?{queryLimitExceeded:true}:null],"onSelectionComplete",_4f6,dfd);if(_4f4.exceededTransferLimit){this.onQueryLimitExceeded();}},_selectFeatureIIf:function(oid,_4ff,mode){var _500=this._selectedFeatures,_501=_500[oid];if(!_501){mode._incRefCount(oid);_500[oid]=_4ff;if(!this._isTable){this._setSelectSymbol(_4ff);}}return _501||_4ff;},_unSelectFeatureIIf:function(oid,mode){var _502=this._selectedFeatures[oid];if(_502){mode._decRefCount(oid);delete this._selectedFeatures[oid];if(!this._isTable){this._setUnSelectSymbol(_502);}}return _502;},_isSelected:function(_503){},_setSelectSymbol:function(_504){var _505=this._selectionSymbol;if(_505&&!this._isSelOnly){_504.setSymbol(_505);}},_setUnSelectSymbol:function(_506){var _507=this._selectionSymbol;if(_507&&!this._isSelOnly){if(_507===_506.symbol){_506.setSymbol(null,true);}}},_getOutFields:function(){var _508=_3bc.filter([this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._rendererFields),function(_509,_50a,arr){return !!_509&&(_3bc.indexOf(arr,_509)===_50a);});var _50b=lang.clone(this._outFields);if(_50b){if(_3bc.indexOf(_50b,"*")!==-1){return _50b;}_3bc.forEach(_508,function(_50c){if(_3bc.indexOf(_50b,_50c)===-1){_50b.push(_50c);}});return _50b;}else{return _508;}},_checkFields:function(_50d){var _50e=_50d||this._getOutFields();_3bc.forEach(_50e,function(_50f){if(_50f==="*"){return;}if(!this._getField(_50f)){console.debug("esri.layers.FeatureLayer: "+_3c2.substitute({url:this.url,field:_50f},"unable to find '${field}' field in the layer 'fields' information [url: ${url}]"));}},this);if(!_50d&&!this._isTable&&!this._fserver&&!this._collection){var _510=_3bc.some(this.fields,function(_511){return (_511&&_511.type==="esriFieldTypeGeometry")?true:false;});if(!_510){console.debug("esri.layers.FeatureLayer: "+_3c2.substitute({url:this.url},"unable to find a field of type 'esriFieldTypeGeometry' in the layer 'fields' information. If you are using a map service layer, features will not have geometry [url: ${url}]"));}}},_fixRendererFields:function(){var _512=this.renderer;if(_512&&this.fields.length>0){var _513=_3bc.filter([_512,_512.observationRenderer,_512.latestObservationRenderer,_512.trackRenderer],_3c2.isDefined);var _514=[];_3bc.forEach(_513,function(rnd){var _515,_516;_516=rnd.attributeField;if(_516&&!lang.isFunction(_516)){_515=!this._getField(_516)&&this._getField(_516,true);if(_515){rnd.attributeField=_515.name;}}_516=rnd.attributeField2;if(_516){_515=!this._getField(_516)&&this._getField(_516,true);if(_515){rnd.attributeField2=_515.name;}}_516=rnd.attributeField3;if(_516){_515=!this._getField(_516)&&this._getField(_516,true);if(_515){rnd.attributeField3=_515.name;}}if(!lang.isFunction(rnd.attributeField)){_514.push(rnd.attributeField);}_514.push(rnd.attributeField2);_514.push(rnd.attributeField3);},this);this._rendererFields=_3bc.filter(_514,_3c2.isDefined);}},_getField:function(_517,_518){var _519=this.fields;if(_519.length===0){return null;}var _51a;if(_518){_517=_517.toLowerCase();}_3bc.some(_519,function(_51b){var _51c=false;if(_518){_51c=(_51b&&_51b.name.toLowerCase()===_517)?true:false;}else{_51c=(_51b&&_51b.name===_517)?true:false;}if(_51c){_51a=_51b;}return _51c;});return _51a;},_getDateOpts:function(){if(!this._dtOpts){var _51d=_3bc.map(_3bc.filter(this.fields,function(_51e){return !!(_51e&&_51e.type==="esriFieldTypeDate");}),function(_51f){return _51f.name;});this._dtOpts={properties:_51d};}return this._dtOpts;},_applyNormalized:function(_520,_521){if(_520&&_521){_3bc.forEach(_520,function(_522,_523){if(_522&&_521[_523]){_522.setGeometry(_521[_523]);}});}},_editHandler:function(_524,adds,_525,_526,_527,dfd){var _528=_524.addResults,_529=_524.updateResults,_52a=_524.deleteResults,i,_52b,oid,_52c,attr,_52d=this.objectIdField,mode=this._mode,_52e=this._isTable;var _52f=this.editFieldsInfo,_530=this._getOutFields()||[],_531=_52f&&_52f.creatorField,_532=_52f&&_52f.creationDateField,_533=_52f&&_52f.editorField,_534=_52f&&_52f.editDateField,_535=_52f&&_52f.realm;if(_3bc.indexOf(_530,"*")===-1){if(_531&&_3bc.indexOf(_530,_531)===-1){_531=null;}if(_532&&_3bc.indexOf(_530,_532)===-1){_532=null;}if(_533&&_3bc.indexOf(_530,_533)===-1){_533=null;}if(_534&&_3bc.indexOf(_530,_534)===-1){_534=null;}}var _536=(_532||_534)?(new Date()).getTime():null,_537=(_531||_533)?this.getUserId():undefined;if(_537&&_535){_537=_537+"@"+_535;}if(_528){for(i=0;i<_528.length;i++){_528[i]=new _3d8(_528[i]);if(_52e){continue;}_52b=_528[i];if(_52b.success){oid=_52b.objectId;_52c=adds[i];var gl=_52c._graphicsLayer;if(gl&&gl!==this){gl.remove(_52c);}attr=_52c.attributes||{};attr[_52d]=oid;if(_531){attr[_531]=_537;}if(_533){attr[_533]=_537;}if(_532){attr[_532]=_536;}if(_534){attr[_534]=_536;}_52c.setAttributes(attr);if(mode._init){mode.drawFeature(_52c);}}}}if(_529){for(i=0;i<_529.length;i++){_529[i]=new _3d8(_529[i]);if(_52e){continue;}_52b=_529[i];if(_52b.success){oid=_52b.objectId;_52c=_525[oid];var _538=mode._getFeature(oid);if(_538){if(_538.geometry!==_52c.geometry){_538.setGeometry(_3d1.fromJson(_52c.geometry.toJson()));}this._repaint(_538,oid);}_52c=_538||_52c;attr=_52c.attributes||{};if(_533){attr[_533]=_537;}if(_534){attr[_534]=_536;}_52c.setAttributes(attr);}}}if(_52a){var _539=[];for(i=0;i<_52a.length;i++){_52a[i]=new _3d8(_52a[i]);if(_52e){continue;}_52b=_52a[i];if(_52b.success){oid=_52b.objectId;_52c=mode._getFeature(oid);if(_52c){if(this._unSelectFeatureIIf(oid,mode)){_539.push(_52c);}_52c._count=0;mode._removeFeatureIIf(oid);}}}if(_539.length>0){this.onSelectionComplete(_539,this.constructor.SELECTION_SUBTRACT);}}this._resolve([_528,_529,_52a],"onEditsComplete",_526,dfd);},_sendAttachment:function(type,_53a,_53b,_53c,_53d){var _53e=(type==="add")?"addAttachment":"updateAttachment",url=this._url.path+"/"+_53a+"/"+_53e,self=this;var dfd=_3c3({url:url,form:_53b,content:lang.mixin(this._url.query,{f:"json",token:this._getToken()||undefined}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(_53f){var _540=(type==="add")?"addAttachmentResult":"updateAttachmentResult",_541=(type==="add")?"onAddAttachmentComplete":"onUpdateAttachmentComplete",_542=new _3d8(_53f[_540]);_542.attachmentId=_542.objectId;_542.objectId=_53a;self._resolve([_542],_541,_53c);return _542;}).addErrback(function(_543){self._resolve([_543],null,_53d,null,true);});return dfd;},_repaint:function(_544,oid,_545){oid=_3c2.isDefined(oid)?oid:_544.attributes[this.objectIdField];if(!(oid in this._selectedFeatures)||!this._selectionSymbol){_544.setSymbol(_544.symbol,_545);}},_getKind:function(_546){var _547=this._trackManager;if(_547){return _547.isLatestObservation(_546)?1:0;}return 0;}});lang.mixin(_3dd,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});_3d2._createWrappers(_3dd);if(has("extend-esri")){lang.setObject("layers.FeatureLayer",_3dd,_3c1);}return _3dd;});},"dijit/form/_ListMouseMixin":function(){define("dijit/form/_ListMouseMixin",["dojo/_base/declare","dojo/mouse","dojo/on","dojo/touch","./_ListBase"],function(_548,_549,on,_54a,_54b){return _548("dijit.form._ListMouseMixin",_54b,{postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,_54a.press,function(evt){evt.preventDefault();}));this._listConnect(_54a.press,"_onMouseDown");this._listConnect(_54a.release,"_onMouseUp");this._listConnect(_549.enter,"_onMouseOver");this._listConnect(_549.leave,"_onMouseOut");},_onMouseDown:function(evt,_54c){if(this._hoveredNode){this.onUnhover(this._hoveredNode);this._hoveredNode=null;}this._isDragging=true;this._setSelectedAttr(_54c);},_onMouseUp:function(evt,_54d){this._isDragging=false;var _54e=this.selected;var _54f=this._hoveredNode;if(_54e&&_54d==_54e){this.onClick(_54e);}else{if(_54f&&_54d==_54f){this._setSelectedAttr(_54f);this.onClick(_54f);}}},_onMouseOut:function(evt,_550){if(this._hoveredNode){this.onUnhover(this._hoveredNode);this._hoveredNode=null;}if(this._isDragging){this._cancelDrag=(new Date()).getTime()+1000;}},_onMouseOver:function(evt,_551){if(this._cancelDrag){var time=(new Date()).getTime();if(time>this._cancelDrag){this._isDragging=false;}this._cancelDrag=null;}this._hoveredNode=_551;this.onHover(_551);if(this._isDragging){this._setSelectedAttr(_551);}}});});},"dijit/_editor/RichText":function(){define("dijit/_editor/RichText",["dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/query","dojo/ready","dojo/sniff","dojo/topic","dojo/_base/unload","dojo/_base/url","dojo/_base/window","../_Widget","../_CssStateMixin","./selection","./range","./html","../focus","../main"],function(_552,_553,_554,_555,dom,_556,_557,_558,_559,_55a,_55b,_55c,keys,lang,on,_55d,_55e,has,_55f,_560,_561,win,_562,_563,_564,_565,_566,_567,_568){var _569=_554("dijit._editor.RichText",[_562,_563],{constructor:function(_56a){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};if(_56a&&lang.isString(_56a.value)){this.value=_56a.value;}this.onLoadDeferred=new _555();},baseClass:"dijitEditor",inheritWidth:false,focusOnLoad:false,name:"",styleSheets:"",height:"300px",minHeight:"1em",isClosed:true,isLoaded:false,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:false,disableSpellCheck:false,postCreate:function(){if("textarea"===this.domNode.tagName.toLowerCase()){console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");}this.contentPreFilters=[lang.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);if(has("mozilla")){this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters);this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters);}if(has("webkit")){this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters);this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters);}if(has("ie")){this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters);this.contentDomPostFilters=[lang.hitch(this,this._stripBreakerNodes)].concat(this.contentDomPostFilters);}this.inherited(arguments);_55f.publish(_568._scopeName+"._editor.RichText::init",this);this.open();this.setupDefaultShortcuts();},setupDefaultShortcuts:function(){var exec=lang.hitch(this,function(cmd,arg){return function(){return !this.execCommand(cmd,arg);};});var _56b={b:exec("bold"),i:exec("italic"),u:exec("underline"),a:exec("selectall"),s:function(){this.save(true);},m:function(){this.isTabIndent=!this.isTabIndent;},"1":exec("formatblock","h1"),"2":exec("formatblock","h2"),"3":exec("formatblock","h3"),"4":exec("formatblock","h4"),"\\":exec("insertunorderedlist")};if(!has("ie")){_56b.Z=exec("redo");}var key;for(key in _56b){this.addKeyHandler(key,true,false,_56b[key]);}},events:["onKeyPress","onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:false,_localizeEditorCommands:function(){if(_569._editorCommandsLocalized){this._local2NativeFormatNames=_569._local2NativeFormatNames;this._native2LocalFormatNames=_569._native2LocalFormatNames;return;}_569._editorCommandsLocalized=true;_569._local2NativeFormatNames={};_569._native2LocalFormatNames={};this._local2NativeFormatNames=_569._local2NativeFormatNames;this._native2LocalFormatNames=_569._native2LocalFormatNames;var _56c=["div","p","pre","h1","h2","h3","h4","h5","h6","ol","ul","address"];var _56d="",_56e,i=0;while((_56e=_56c[i++])){if(_56e.charAt(1)!=="l"){_56d+="<"+_56e+"><span>content</span></"+_56e+"><br/>";}else{_56d+="<"+_56e+"><li>content</li></"+_56e+"><br/>";}}var _56f={position:"absolute",top:"0px",zIndex:10,opacity:0.01};var div=_558.create("div",{style:_56f,innerHTML:_56d});this.ownerDocumentBody.appendChild(div);var _570=lang.hitch(this,function(){var node=div.firstChild;while(node){try{this._sCall("selectElement",[node.firstChild]);var _571=node.tagName.toLowerCase();this._local2NativeFormatNames[_571]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[_571]]=_571;node=node.nextSibling.nextSibling;}catch(e){}}_558.destroy(div);});this.defer(_570);},open:function(_572){if(!this.onLoadDeferred||this.onLoadDeferred.fired>=0){this.onLoadDeferred=new _555();}if(!this.isClosed){this.close();}_55f.publish(_568._scopeName+"._editor.RichText::open",this);if(arguments.length===1&&_572.nodeName){this.domNode=_572;}var dn=this.domNode;var html;if(lang.isString(this.value)){html=this.value;delete this.value;dn.innerHTML="";}else{if(dn.nodeName&&dn.nodeName.toLowerCase()=="textarea"){var ta=(this.textarea=dn);this.name=ta.name;html=ta.value;dn=this.domNode=this.ownerDocument.createElement("div");dn.setAttribute("widgetId",this.id);ta.removeAttribute("widgetId");dn.cssText=ta.cssText;dn.className+=" "+ta.className;_558.place(dn,ta,"before");var _573=lang.hitch(this,function(){_55a.set(ta,{display:"block",position:"absolute",top:"-1000px"});if(has("ie")){var s=ta.style;this.__overflow=s.overflow;s.overflow="hidden";}});if(has("ie")){this.defer(_573,10);}else{_573();}if(ta.form){var _574=ta.value;this.reset=function(){var _575=this.getValue();if(_575!==_574){this.replaceValue(_574);}};on(ta.form,"submit",lang.hitch(this,function(){_556.set(ta,"disabled",this.disabled);ta.value=this.getValue();}));}}else{html=_566.getChildrenHtml(dn);dn.innerHTML="";}}this.value=html;if(dn.nodeName&&dn.nodeName==="LI"){dn.innerHTML=" <br>";}this.header=dn.ownerDocument.createElement("div");dn.appendChild(this.header);this.editingArea=dn.ownerDocument.createElement("div");dn.appendChild(this.editingArea);this.footer=dn.ownerDocument.createElement("div");dn.appendChild(this.footer);if(!this.name){this.name=this.id+"_AUTOGEN";}if(this.name!==""&&(!_553["useXDomain"]||_553["allowXdRichTextSave"])){var _576=dom.byId(_568._scopeName+"._editor.RichText.value");if(_576&&_576.value!==""){var _577=_576.value.split(this._SEPARATOR),i=0,dat;while((dat=_577[i++])){var data=dat.split(this._NAME_CONTENT_SEP);if(data[0]===this.name){html=data[1];_577=_577.splice(i,1);_576.value=_577.join(this._SEPARATOR);break;}}}if(!_569._globalSaveHandler){_569._globalSaveHandler={};_560.addOnUnload(function(){var id;for(id in _569._globalSaveHandler){var f=_569._globalSaveHandler[id];if(lang.isFunction(f)){f();}}});}_569._globalSaveHandler[this.id]=lang.hitch(this,"_saveContent");}this.isClosed=false;var ifr=(this.editorObject=this.iframe=this.ownerDocument.createElement("iframe"));ifr.id=this.id+"_iframe";ifr.style.border="none";ifr.style.width="100%";if(this._layoutMode){ifr.style.height="100%";}else{if(has("ie")>=7){if(this.height){ifr.style.height=this.height;}if(this.minHeight){ifr.style.minHeight=this.minHeight;}}else{ifr.style.height=this.height?this.height:this.minHeight;}}ifr.frameBorder=0;ifr._loadFunc=lang.hitch(this,function(w){this.window=w;this.document=this.window.document;if(has("ie")){this._localizeEditorCommands();}this.onLoad(html);});var src=this._getIframeDocTxt(),s="javascript: '"+src.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'";ifr.setAttribute("src",s);this.editingArea.appendChild(ifr);if(has("safari")<=4){src=ifr.getAttribute("src");if(!src||src.indexOf("javascript")===-1){this.defer(function(){ifr.setAttribute("src",s);});}}if(dn.nodeName==="LI"){dn.lastChild.style.marginTop="-1.2em";}_557.add(this.domNode,this.baseClass);},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var _578=_55a.getComputedStyle(this.domNode);var html="";var _579=true;if(has("ie")||has("webkit")||(!this.height&&!has("mozilla"))){html="<div id='dijitEditorBody'></div>";_579=false;}else{if(has("mozilla")){this._cursorToStart=true;html="&#160;";}}var font=[_578.fontWeight,_578.fontSize,_578.fontFamily].join(" ");var _57a=_578.lineHeight;if(_57a.indexOf("px")>=0){_57a=parseFloat(_57a)/parseFloat(_578.fontSize);}else{if(_57a.indexOf("em")>=0){_57a=parseFloat(_57a);}else{_57a="normal";}}var _57b="";var self=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(_57c){_57c=_57c.replace(/^;/ig,"")+";";var s=_57c.split(":")[0];if(s){s=lang.trim(s);s=s.toLowerCase();var i;var sC="";for(i=0;i<s.length;i++){var c=s.charAt(i);switch(c){case "-":i++;c=s.charAt(i).toUpperCase();default:sC+=c;}}_55a.set(self.domNode,sC,"");}_57b+=_57c+";";});var _57d=_55d("label[for=\""+this.id+"\"]");return [this.isLeftToRight()?"<html>\n<head>\n":"<html dir='rtl'>\n<head>\n",(has("mozilla")&&_57d.length?"<title>"+_57d[0].innerHTML+"</title>\n":""),"<meta http-equiv='Content-Type' content='text/html'>\n","<style>\n","\tbody,html {\n","\t\tbackground:transparent;\n","\t\tpadding: 1px 0 0 0;\n","\t\tmargin: -1px 0 0 0;\n",((has("webkit"))?"\t\twidth: 100%;\n":""),((has("webkit"))?"\t\theight: 100%;\n":""),"\t}\n","\tbody{\n","\t\ttop:0px;\n","\t\tleft:0px;\n","\t\tright:0px;\n","\t\tfont:",font,";\n",((this.height||has("opera"))?"":"\t\tposition: fixed;\n"),"\t\tmin-height:",this.minHeight,";\n","\t\tline-height:",_57a,";\n","\t}\n","\tp{ margin: 1em 0; }\n",(!_579&&!this.height?"\tbody,html {overflow-y: hidden;}\n":""),"\t#dijitEditorBody{overflow-x: auto; overflow-y:"+(this.height?"auto;":"hidden;")+" outline: 0px;}\n","\tli > ul:-moz-first-node, li > ol:-moz-first-node{ padding-top: 1.2em; }\n",(!has("ie")?"\tli{ min-height:1.2em; }\n":""),"</style>\n",this._applyEditingAreaStyleSheets(),"\n","</head>\n<body ",(_579?"id='dijitEditorBody' ":""),"onload='frameElement && frameElement._loadFunc(window,document)' ","style='"+_57b+"'>",html,"</body>\n</html>"].join("");},_applyEditingAreaStyleSheets:function(){var _57e=[];if(this.styleSheets){_57e=this.styleSheets.split(";");this.styleSheets="";}_57e=_57e.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];var text="",i=0,url;while((url=_57e[i++])){var _57f=(new _561(win.global.location,url)).toString();this.editingAreaStyleSheets.push(_57f);text+="<link rel=\"stylesheet\" type=\"text/css\" href=\""+_57f+"\"/>";}return text;},addStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)==="."||(url.charAt(0)!=="/"&&!uri.host)){url=(new _561(win.global.location,url)).toString();}if(_552.indexOf(this.editingAreaStyleSheets,url)>-1){return;}this.editingAreaStyleSheets.push(url);this.onLoadDeferred.then(lang.hitch(this,function(){if(this.document.createStyleSheet){this.document.createStyleSheet(url);}else{var head=this.document.getElementsByTagName("head")[0];var _580=this.document.createElement("link");_580.rel="stylesheet";_580.type="text/css";_580.href=url;head.appendChild(_580);}}));},removeStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)==="."||(url.charAt(0)!=="/"&&!uri.host)){url=(new _561(win.global.location,url)).toString();}var _581=_552.indexOf(this.editingAreaStyleSheets,url);if(_581===-1){return;}delete this.editingAreaStyleSheets[_581];_55d("link:[href=\""+url+"\"]",this.window.document).orphan();},disabled:false,_mozSettingProps:{"styleWithCSS":false},_setDisabledAttr:function(_582){_582=!!_582;this._set("disabled",_582);if(!this.isLoaded){return;}if(has("ie")||has("webkit")||has("opera")){var _583=has("ie")&&(this.isLoaded||!this.focusOnLoad);if(_583){this.editNode.unselectable="on";}this.editNode.contentEditable=!_582;if(_583){this.defer(function(){if(this.editNode){this.editNode.unselectable="off";}});}}else{try{this.document.designMode=(_582?"off":"on");}catch(e){return;}if(!_582&&this._mozSettingProps){var ps=this._mozSettingProps;var n;for(n in ps){if(ps.hasOwnProperty(n)){try{this.document.execCommand(n,false,ps[n]);}catch(e2){}}}}}this._disabledOK=true;},onLoad:function(html){if(!this.window.__registeredWindow){this.window.__registeredWindow=true;this._iframeRegHandle=_567.registerIframe(this.iframe);}if(!has("ie")&&!has("webkit")&&(this.height||has("mozilla"))){this.editNode=this.document.body;}else{this.editNode=this.document.body.firstChild;var _584=this;if(has("ie")){this.tabStop=_558.create("div",{tabIndex:-1},this.editingArea);this.iframe.onfocus=function(){_584.editNode.setActive();};}}this.focusNode=this.editNode;var _585=this.events.concat(this.captureEvents);var ap=this.iframe?this.document:this.editNode;_552.forEach(_585,function(item){this.connect(ap,item.toLowerCase(),item);},this);this.connect(ap,"onmouseup","onClick");if(has("ie")){this.connect(this.document,"onmousedown","_onIEMouseDown");this.editNode.style.zoom=1;}else{this.connect(this.document,"onmousedown",function(){delete this._cursorToStart;});}if(has("webkit")){this._webkitListener=this.connect(this.document,"onmouseup","onDisplayChanged");this.connect(this.document,"onmousedown",function(e){var t=e.target;if(t&&(t===this.document.body||t===this.document)){this.defer("placeCursorAtEnd");}});}if(has("ie")){try{this.document.execCommand("RespectVisibilityInDesign",true,null);}catch(e){}}this.isLoaded=true;this.set("disabled",this.disabled);var _586=lang.hitch(this,function(){this.setValue(html);if(this.onLoadDeferred){this.onLoadDeferred.resolve(true);}this.onDisplayChanged();if(this.focusOnLoad){_55e(lang.hitch(this,"defer","focus",this.updateInterval));}this.value=this.getValue(true);});if(this.setValueDeferred){this.setValueDeferred.then(_586);}else{_586();}},onKeyDown:function(e){if(e.keyCode===keys.TAB&&this.isTabIndent){_55b.stop(e);if(this.queryCommandEnabled((e.shiftKey?"outdent":"indent"))){this.execCommand((e.shiftKey?"outdent":"indent"));}}if(has("ie")){if(e.keyCode==keys.TAB&&!this.isTabIndent){if(e.shiftKey&&!e.ctrlKey&&!e.altKey){this.iframe.focus();}else{if(!e.shiftKey&&!e.ctrlKey&&!e.altKey){this.tabStop.focus();}}}else{if(e.keyCode===keys.BACKSPACE&&this.document.selection.type==="Control"){_55b.stop(e);this.execCommand("delete");}else{if((65<=e.keyCode&&e.keyCode<=90)||(e.keyCode>=37&&e.keyCode<=40)){e.charCode=e.keyCode;this.onKeyPress(e);}}}}if(has("ff")){if(e.keyCode===keys.PAGE_UP||e.keyCode===keys.PAGE_DOWN){if(this.editNode.clientHeight>=this.editNode.scrollHeight){e.preventDefault();}}}return true;},onKeyUp:function(){},setDisabled:function(_587){_55c.deprecated("dijit.Editor::setDisabled is deprecated","use dijit.Editor::attr(\"disabled\",boolean) instead",2);this.set("disabled",_587);},_setValueAttr:function(_588){this.setValue(_588);},_setDisableSpellCheckAttr:function(_589){if(this.document){_556.set(this.document.body,"spellcheck",!_589);}else{this.onLoadDeferred.then(lang.hitch(this,function(){_556.set(this.document.body,"spellcheck",!_589);}));}this._set("disableSpellCheck",_589);},onKeyPress:function(e){var c=(e.keyChar&&e.keyChar.toLowerCase())||e.keyCode,_58a=this._keyHandlers[c],args=arguments;if(_58a&&!e.altKey){_552.some(_58a,function(h){if(!(h.shift^e.shiftKey)&&!(h.ctrl^(e.ctrlKey||e.metaKey))){if(!h.handler.apply(this,args)){e.preventDefault();}return true;}},this);}if(!this._onKeyHitch){this._onKeyHitch=lang.hitch(this,"onKeyPressed");}this.defer("_onKeyHitch",1);return true;},addKeyHandler:function(key,ctrl,_58b,_58c){if(!lang.isArray(this._keyHandlers[key])){this._keyHandlers[key]=[];}this._keyHandlers[key].push({shift:_58b||false,ctrl:ctrl||false,handler:_58c});},onKeyPressed:function(){this.onDisplayChanged();},onClick:function(e){this.onDisplayChanged(e);},_onIEMouseDown:function(){if(!this.focused&&!this.disabled){this.focus();}},_onBlur:function(e){this.inherited(arguments);var _58d=this.getValue(true);if(_58d!==this.value){this.onChange(_58d);}this._set("value",_58d);},_onFocus:function(e){if(!this.disabled){if(!this._disabledOK){this.set("disabled",false);}this.inherited(arguments);}},blur:function(){if(!has("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus){this.window.document.documentElement.focus();}else{if(this.ownerDocumentBody.focus){this.ownerDocumentBody.focus();}}},focus:function(){if(!this.isLoaded){this.focusOnLoad=true;return;}if(this._cursorToStart){delete this._cursorToStart;if(this.editNode.childNodes){this.placeCursorAtStart();return;}}if(!has("ie")){_567.focus(this.iframe);}else{if(this.editNode&&this.editNode.focus){this.iframe.fireEvent("onfocus",document.createEventObject());}}},updateInterval:200,_updateTimer:null,onDisplayChanged:function(){if(this._updateTimer){this._updateTimer.remove();}this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval);},onNormalizedDisplayChanged:function(){delete this._updateTimer;},onChange:function(){},_normalizeCommand:function(cmd,_58e){var _58f=cmd.toLowerCase();if(_58f==="formatblock"){if(has("safari")&&_58e===undefined){_58f="heading";}}else{if(_58f==="hilitecolor"&&!has("mozilla")){_58f="backcolor";}}return _58f;},_qcaCache:{},queryCommandAvailable:function(_590){var ca=this._qcaCache[_590];if(ca!==undefined){return ca;}return (this._qcaCache[_590]=this._queryCommandAvailable(_590));},_queryCommandAvailable:function(_591){var ie=1;var _592=1<<1;var _593=1<<2;var _594=1<<3;function _595(_596){return {ie:Boolean(_596&ie),mozilla:Boolean(_596&_592),webkit:Boolean(_596&_593),opera:Boolean(_596&_594)};};var _597=null;switch(_591.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":_597=_595(_592|ie|_593|_594);break;case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":_597=_595(_592|ie|_594|_593);break;case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":_597=_595(ie);break;case "cut":case "copy":case "paste":_597=_595(ie|_592|_593|_594);break;case "inserttable":_597=_595(_592|ie);break;case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":_597=_595(ie|_592);break;default:return false;}return (has("ie")&&_597.ie)||(has("mozilla")&&_597.mozilla)||(has("webkit")&&_597.webkit)||(has("opera")&&_597.opera);},execCommand:function(_598,_599){var _59a;this.focus();_598=this._normalizeCommand(_598,_599);if(_599!==undefined){if(_598==="heading"){throw new Error("unimplemented");}else{if((_598==="formatblock")&&has("ie")){_599="<"+_599+">";}}}var _59b="_"+_598+"Impl";if(this[_59b]){_59a=this[_59b](_599);}else{_599=arguments.length>1?_599:null;if(_599||_598!=="createlink"){_59a=this.document.execCommand(_598,false,_599);}}this.onDisplayChanged();return _59a;},queryCommandEnabled:function(_59c){if(this.disabled||!this._disabledOK){return false;}_59c=this._normalizeCommand(_59c);var _59d="_"+_59c+"EnabledImpl";if(this[_59d]){return this[_59d](_59c);}else{return this._browserQueryCommandEnabled(_59c);}},queryCommandState:function(_59e){if(this.disabled||!this._disabledOK){return false;}_59e=this._normalizeCommand(_59e);try{return this.document.queryCommandState(_59e);}catch(e){return false;}},queryCommandValue:function(_59f){if(this.disabled||!this._disabledOK){return false;}var r;_59f=this._normalizeCommand(_59f);if(has("ie")&&_59f==="formatblock"){r=this._native2LocalFormatNames[this.document.queryCommandValue(_59f)];}else{if(has("mozilla")&&_59f==="hilitecolor"){var _5a0;try{_5a0=this.document.queryCommandValue("styleWithCSS");}catch(e){_5a0=false;}this.document.execCommand("styleWithCSS",false,true);r=this.document.queryCommandValue(_59f);this.document.execCommand("styleWithCSS",false,_5a0);}else{r=this.document.queryCommandValue(_59f);}}return r;},_sCall:function(name,args){return win.withGlobal(this.window,name,_564,args);},placeCursorAtStart:function(){this.focus();var _5a1=false;if(has("mozilla")){var _5a2=this.editNode.firstChild;while(_5a2){if(_5a2.nodeType===3){if(_5a2.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_5a1=true;this._sCall("selectElement",[_5a2]);break;}}else{if(_5a2.nodeType===1){_5a1=true;var tg=_5a2.tagName?_5a2.tagName.toLowerCase():"";if(/br|input|img|base|meta|area|basefont|hr|link/.test(tg)){this._sCall("selectElement",[_5a2]);}else{this._sCall("selectElementChildren",[_5a2]);}break;}}_5a2=_5a2.nextSibling;}}else{_5a1=true;this._sCall("selectElementChildren",[this.editNode]);}if(_5a1){this._sCall("collapse",[true]);}},placeCursorAtEnd:function(){this.focus();var _5a3=false;if(has("mozilla")){var last=this.editNode.lastChild;while(last){if(last.nodeType===3){if(last.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_5a3=true;this._sCall("selectElement",[last]);break;}}else{if(last.nodeType===1){_5a3=true;this._sCall("selectElement",[last.lastChild||last]);break;}}last=last.previousSibling;}}else{_5a3=true;this._sCall("selectElementChildren",[this.editNode]);}if(_5a3){this._sCall("collapse",[false]);}},getValue:function(_5a4){if(this.textarea){if(this.isClosed||!this.isLoaded){return this.textarea.value;}}return this._postFilterContent(null,_5a4);},_getValueAttr:function(){return this.getValue(true);},setValue:function(html){if(!this.isLoaded){this.onLoadDeferred.then(lang.hitch(this,function(){this.setValue(html);}));return;}this._cursorToStart=true;if(this.textarea&&(this.isClosed||!this.isLoaded)){this.textarea.value=html;}else{html=this._preFilterContent(html);var node=this.isClosed?this.domNode:this.editNode;if(html&&has("mozilla")&&html.toLowerCase()==="<p></p>"){html="<p>&#160;</p>";}if(!html&&has("webkit")){html="&#160;";}node.innerHTML=html;this._preDomFilterContent(node);}this.onDisplayChanged();this._set("value",this.getValue(true));},replaceValue:function(html){if(this.isClosed){this.setValue(html);}else{if(this.window&&this.window.getSelection&&!has("mozilla")){this.setValue(html);}else{if(this.window&&this.window.getSelection){html=this._preFilterContent(html);this.execCommand("selectall");if(!html){this._cursorToStart=true;html="&#160;";}this.execCommand("inserthtml",html);this._preDomFilterContent(this.editNode);}else{if(this.document&&this.document.selection){this.setValue(html);}}}}this._set("value",this.getValue(true));},_preFilterContent:function(html){var ec=html;_552.forEach(this.contentPreFilters,function(ef){if(ef){ec=ef(ec);}});return ec;},_preDomFilterContent:function(dom){dom=dom||this.editNode;_552.forEach(this.contentDomPreFilters,function(ef){if(ef&&lang.isFunction(ef)){ef(dom);}},this);},_postFilterContent:function(dom,_5a5){var ec;if(!lang.isString(dom)){dom=dom||this.editNode;if(this.contentDomPostFilters.length){if(_5a5){dom=lang.clone(dom);}_552.forEach(this.contentDomPostFilters,function(ef){dom=ef(dom);});}ec=_566.getChildrenHtml(dom);}else{ec=dom;}if(!lang.trim(ec.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length){ec="";}_552.forEach(this.contentPostFilters,function(ef){ec=ef(ec);});return ec;},_saveContent:function(){var _5a6=dom.byId(_568._scopeName+"._editor.RichText.value");if(_5a6){if(_5a6.value){_5a6.value+=this._SEPARATOR;}_5a6.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(true);}},escapeXml:function(str,_5a7){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_5a7){str=str.replace(/'/gm,"&#39;");}return str;},getNodeHtml:function(node){_55c.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit/_editor/html::getNodeHtml instead",2);return _566.getNodeHtml(node);},getNodeChildrenHtml:function(dom){_55c.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2);return _566.getChildrenHtml(dom);},close:function(save){if(this.isClosed){return;}if(!arguments.length){save=true;}if(save){this._set("value",this.getValue(true));}if(this.interval){clearInterval(this.interval);}if(this._webkitListener){this.disconnect(this._webkitListener);delete this._webkitListener;}if(has("ie")){this.iframe.onfocus=null;}this.iframe._loadFunc=null;if(this._iframeRegHandle){this._iframeRegHandle.remove();delete this._iframeRegHandle;}if(this.textarea){var s=this.textarea.style;s.position="";s.left=s.top="";if(has("ie")){s.overflow=this.__overflow;this.__overflow=null;}this.textarea.value=this.value;_558.destroy(this.domNode);this.domNode=this.textarea;}else{this.domNode.innerHTML=this.value;}delete this.iframe;_557.remove(this.domNode,this.baseClass);this.isClosed=true;this.isLoaded=false;delete this.editNode;delete this.focusNode;if(this.window&&this.window._frameElement){this.window._frameElement=null;}this.window=null;this.document=null;this.editingArea=null;this.editorObject=null;},destroy:function(){if(!this.isClosed){this.close(false);}if(this._updateTimer){this._updateTimer.remove();}this.inherited(arguments);if(_569._globalSaveHandler){delete _569._globalSaveHandler[this.id];}},_removeMozBogus:function(html){return html.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"");},_removeWebkitBogus:function(html){html=html.replace(/\sclass="webkit-block-placeholder"/gi,"");html=html.replace(/\sclass="apple-style-span"/gi,"");html=html.replace(/<meta charset=\"utf-8\" \/>/gi,"");return html;},_normalizeFontStyle:function(html){return html.replace(/<(\/)?strong([ \>])/gi,"<$1b$2").replace(/<(\/)?em([ \>])/gi,"<$1i$2");},_preFixUrlAttributes:function(html){return html.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2");},_browserQueryCommandEnabled:function(_5a8){if(!_5a8){return false;}var elem=has("ie")?this.document.selection.createRange():this.document;try{return elem.queryCommandEnabled(_5a8);}catch(e){return false;}},_createlinkEnabledImpl:function(){var _5a9=true;if(has("opera")){var sel=this.window.getSelection();if(sel.isCollapsed){_5a9=true;}else{_5a9=this.document.queryCommandEnabled("createlink");}}else{_5a9=this._browserQueryCommandEnabled("createlink");}return _5a9;},_unlinkEnabledImpl:function(){var _5aa=true;if(has("mozilla")||has("webkit")){_5aa=this._sCall("hasAncestorElement",["a"]);}else{_5aa=this._browserQueryCommandEnabled("unlink");}return _5aa;},_inserttableEnabledImpl:function(){var _5ab=true;if(has("mozilla")||has("webkit")){_5ab=true;}else{_5ab=this._browserQueryCommandEnabled("inserttable");}return _5ab;},_cutEnabledImpl:function(){var _5ac=true;if(has("webkit")){var sel=this.window.getSelection();if(sel){sel=sel.toString();}_5ac=!!sel;}else{_5ac=this._browserQueryCommandEnabled("cut");}return _5ac;},_copyEnabledImpl:function(){var _5ad=true;if(has("webkit")){var sel=this.window.getSelection();if(sel){sel=sel.toString();}_5ad=!!sel;}else{_5ad=this._browserQueryCommandEnabled("copy");}return _5ad;},_pasteEnabledImpl:function(){var _5ae=true;if(has("webkit")){return true;}else{_5ae=this._browserQueryCommandEnabled("paste");}return _5ae;},_inserthorizontalruleImpl:function(_5af){if(has("ie")){return this._inserthtmlImpl("<hr>");}return this.document.execCommand("inserthorizontalrule",false,_5af);},_unlinkImpl:function(_5b0){if((this.queryCommandEnabled("unlink"))&&(has("mozilla")||has("webkit"))){var a=this._sCall("getAncestorElement",["a"]);this._sCall("selectElement",[a]);return this.document.execCommand("unlink",false,null);}return this.document.execCommand("unlink",false,_5b0);},_hilitecolorImpl:function(_5b1){var _5b2;var _5b3=this._handleTextColorOrProperties("hilitecolor",_5b1);if(!_5b3){if(has("mozilla")){this.document.execCommand("styleWithCSS",false,true);console.log("Executing color command.");_5b2=this.document.execCommand("hilitecolor",false,_5b1);this.document.execCommand("styleWithCSS",false,false);}else{_5b2=this.document.execCommand("hilitecolor",false,_5b1);}}return _5b2;},_backcolorImpl:function(_5b4){if(has("ie")){_5b4=_5b4?_5b4:null;}var _5b5=this._handleTextColorOrProperties("backcolor",_5b4);if(!_5b5){_5b5=this.document.execCommand("backcolor",false,_5b4);}return _5b5;},_forecolorImpl:function(_5b6){if(has("ie")){_5b6=_5b6?_5b6:null;}var _5b7=false;_5b7=this._handleTextColorOrProperties("forecolor",_5b6);if(!_5b7){_5b7=this.document.execCommand("forecolor",false,_5b6);}return _5b7;},_inserthtmlImpl:function(_5b8){_5b8=this._preFilterContent(_5b8);var rv=true;if(has("ie")){var _5b9=this.document.selection.createRange();if(this.document.selection.type.toUpperCase()==="CONTROL"){var n=_5b9.item(0);while(_5b9.length){_5b9.remove(_5b9.item(0));}n.outerHTML=_5b8;}else{_5b9.pasteHTML(_5b8);}_5b9.select();}else{if(has("mozilla")&&!_5b8.length){this._sCall("remove");}else{rv=this.document.execCommand("inserthtml",false,_5b8);}}return rv;},_boldImpl:function(_5ba){var _5bb=false;if(has("ie")){this._adaptIESelection();_5bb=this._adaptIEFormatAreaAndExec("bold");}if(!_5bb){_5bb=this.document.execCommand("bold",false,_5ba);}return _5bb;},_italicImpl:function(_5bc){var _5bd=false;if(has("ie")){this._adaptIESelection();_5bd=this._adaptIEFormatAreaAndExec("italic");}if(!_5bd){_5bd=this.document.execCommand("italic",false,_5bc);}return _5bd;},_underlineImpl:function(_5be){var _5bf=false;if(has("ie")){this._adaptIESelection();_5bf=this._adaptIEFormatAreaAndExec("underline");}if(!_5bf){_5bf=this.document.execCommand("underline",false,_5be);}return _5bf;},_strikethroughImpl:function(_5c0){var _5c1=false;if(has("ie")){this._adaptIESelection();_5c1=this._adaptIEFormatAreaAndExec("strikethrough");}if(!_5c1){_5c1=this.document.execCommand("strikethrough",false,_5c0);}return _5c1;},_superscriptImpl:function(_5c2){var _5c3=false;if(has("ie")){this._adaptIESelection();_5c3=this._adaptIEFormatAreaAndExec("superscript");}if(!_5c3){_5c3=this.document.execCommand("superscript",false,_5c2);}return _5c3;},_subscriptImpl:function(_5c4){var _5c5=false;if(has("ie")){this._adaptIESelection();_5c5=this._adaptIEFormatAreaAndExec("subscript");}if(!_5c5){_5c5=this.document.execCommand("subscript",false,_5c4);}return _5c5;},_fontnameImpl:function(_5c6){var _5c7;if(has("ie")){_5c7=this._handleTextColorOrProperties("fontname",_5c6);}if(!_5c7){_5c7=this.document.execCommand("fontname",false,_5c6);}return _5c7;},_fontsizeImpl:function(_5c8){var _5c9;if(has("ie")){_5c9=this._handleTextColorOrProperties("fontsize",_5c8);}if(!_5c9){_5c9=this.document.execCommand("fontsize",false,_5c8);}return _5c9;},_insertorderedlistImpl:function(_5ca){var _5cb=false;if(has("ie")){_5cb=this._adaptIEList("insertorderedlist",_5ca);}if(!_5cb){_5cb=this.document.execCommand("insertorderedlist",false,_5ca);}return _5cb;},_insertunorderedlistImpl:function(_5cc){var _5cd=false;if(has("ie")){_5cd=this._adaptIEList("insertunorderedlist",_5cc);}if(!_5cd){_5cd=this.document.execCommand("insertunorderedlist",false,_5cc);}return _5cd;},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header);},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer);},_getNodeChildrenHeight:function(node){var h=0;if(node&&node.childNodes){var i;for(i=0;i<node.childNodes.length;i++){var size=_559.position(node.childNodes[i]);h+=size.h;}}return h;},_isNodeEmpty:function(node,_5ce){if(node.nodeType===1){if(node.childNodes.length>0){return this._isNodeEmpty(node.childNodes[0],_5ce);}return true;}else{if(node.nodeType===3){return (node.nodeValue.substring(_5ce)==="");}}return false;},_removeStartingRangeFromRange:function(node,_5cf){if(node.nextSibling){_5cf.setStart(node.nextSibling,0);}else{var _5d0=node.parentNode;while(_5d0&&_5d0.nextSibling==null){_5d0=_5d0.parentNode;}if(_5d0){_5cf.setStart(_5d0.nextSibling,0);}}return _5cf;},_adaptIESelection:function(){var _5d1=_565.getSelection(this.window);if(_5d1&&_5d1.rangeCount&&!_5d1.isCollapsed){var _5d2=_5d1.getRangeAt(0);var _5d3=_5d2.startContainer;var _5d4=_5d2.startOffset;while(_5d3.nodeType===3&&_5d4>=_5d3.length&&_5d3.nextSibling){_5d4=_5d4-_5d3.length;_5d3=_5d3.nextSibling;}var _5d5=null;while(this._isNodeEmpty(_5d3,_5d4)&&_5d3!==_5d5){_5d5=_5d3;_5d2=this._removeStartingRangeFromRange(_5d3,_5d2);_5d3=_5d2.startContainer;_5d4=0;}_5d1.removeAllRanges();_5d1.addRange(_5d2);}},_adaptIEFormatAreaAndExec:function(_5d6){var _5d7=_565.getSelection(this.window);var doc=this.document;var rs,ret,_5d8,txt,_5d9,_5da,_5db,_5dc;if(_5d6&&_5d7&&_5d7.isCollapsed){var _5dd=this.queryCommandValue(_5d6);if(_5dd){var _5de=this._tagNamesForCommand(_5d6);_5d8=_5d7.getRangeAt(0);var fs=_5d8.startContainer;if(fs.nodeType===3){var _5df=_5d8.endOffset;if(fs.length<_5df){ret=this._adjustNodeAndOffset(rs,_5df);fs=ret.node;_5df=ret.offset;}}var _5e0;while(fs&&fs!==this.editNode){var _5e1=fs.tagName?fs.tagName.toLowerCase():"";if(_552.indexOf(_5de,_5e1)>-1){_5e0=fs;break;}fs=fs.parentNode;}if(_5e0){rs=_5d8.startContainer;var _5e2=doc.createElement(_5e0.tagName);_558.place(_5e2,_5e0,"after");if(rs&&rs.nodeType===3){var _5e3,_5e4;var _5e5=_5d8.endOffset;if(rs.length<_5e5){ret=this._adjustNodeAndOffset(rs,_5e5);rs=ret.node;_5e5=ret.offset;}txt=rs.nodeValue;_5d9=doc.createTextNode(txt.substring(0,_5e5));var _5e6=txt.substring(_5e5,txt.length);if(_5e6){_5da=doc.createTextNode(_5e6);}_558.place(_5d9,rs,"before");if(_5da){_5db=doc.createElement("span");_5db.className="ieFormatBreakerSpan";_558.place(_5db,rs,"after");_558.place(_5da,_5db,"after");_5da=_5db;}_558.destroy(rs);var _5e7=_5d9.parentNode;var _5e8=[];var _5e9;while(_5e7!==_5e0){var tg=_5e7.tagName;_5e9={tagName:tg};_5e8.push(_5e9);var _5ea=doc.createElement(tg);if(_5e7.style){if(_5ea.style){if(_5e7.style.cssText){_5ea.style.cssText=_5e7.style.cssText;_5e9.cssText=_5e7.style.cssText;}}}if(_5e7.tagName==="FONT"){if(_5e7.color){_5ea.color=_5e7.color;_5e9.color=_5e7.color;}if(_5e7.face){_5ea.face=_5e7.face;_5e9.face=_5e7.face;}if(_5e7.size){_5ea.size=_5e7.size;_5e9.size=_5e7.size;}}if(_5e7.className){_5ea.className=_5e7.className;_5e9.className=_5e7.className;}if(_5da){_5e3=_5da;while(_5e3){_5e4=_5e3.nextSibling;_5ea.appendChild(_5e3);_5e3=_5e4;}}if(_5ea.tagName==_5e7.tagName){_5db=doc.createElement("span");_5db.className="ieFormatBreakerSpan";_558.place(_5db,_5e7,"after");_558.place(_5ea,_5db,"after");}else{_558.place(_5ea,_5e7,"after");}_5d9=_5e7;_5da=_5ea;_5e7=_5e7.parentNode;}if(_5da){_5e3=_5da;if(_5e3.nodeType===1||(_5e3.nodeType===3&&_5e3.nodeValue)){_5e2.innerHTML="";}while(_5e3){_5e4=_5e3.nextSibling;_5e2.appendChild(_5e3);_5e3=_5e4;}}var _5eb;if(_5e8.length){_5e9=_5e8.pop();var _5ec=doc.createElement(_5e9.tagName);if(_5e9.cssText&&_5ec.style){_5ec.style.cssText=_5e9.cssText;}if(_5e9.className){_5ec.className=_5e9.className;}if(_5e9.tagName==="FONT"){if(_5e9.color){_5ec.color=_5e9.color;}if(_5e9.face){_5ec.face=_5e9.face;}if(_5e9.size){_5ec.size=_5e9.size;}}_558.place(_5ec,_5e2,"before");while(_5e8.length){_5e9=_5e8.pop();var _5ed=doc.createElement(_5e9.tagName);if(_5e9.cssText&&_5ed.style){_5ed.style.cssText=_5e9.cssText;}if(_5e9.className){_5ed.className=_5e9.className;}if(_5e9.tagName==="FONT"){if(_5e9.color){_5ed.color=_5e9.color;}if(_5e9.face){_5ed.face=_5e9.face;}if(_5e9.size){_5ed.size=_5e9.size;}}_5ec.appendChild(_5ed);_5ec=_5ed;}_5dc=doc.createTextNode(".");_5db.appendChild(_5dc);_5ec.appendChild(_5dc);_5eb=_565.create(this.window);_5eb.setStart(_5dc,0);_5eb.setEnd(_5dc,_5dc.length);_5d7.removeAllRanges();_5d7.addRange(_5eb);this._sCall("collapse",[false]);_5dc.parentNode.innerHTML="";}else{_5db=doc.createElement("span");_5db.className="ieFormatBreakerSpan";_5dc=doc.createTextNode(".");_5db.appendChild(_5dc);_558.place(_5db,_5e2,"before");_5eb=_565.create(this.window);_5eb.setStart(_5dc,0);_5eb.setEnd(_5dc,_5dc.length);_5d7.removeAllRanges();_5d7.addRange(_5eb);this._sCall("collapse",[false]);_5dc.parentNode.innerHTML="";}if(!_5e2.firstChild){_558.destroy(_5e2);}return true;}}return false;}else{_5d8=_5d7.getRangeAt(0);rs=_5d8.startContainer;if(rs&&rs.nodeType===3){var _5df=_5d8.startOffset;if(rs.length<_5df){ret=this._adjustNodeAndOffset(rs,_5df);rs=ret.node;_5df=ret.offset;}txt=rs.nodeValue;_5d9=doc.createTextNode(txt.substring(0,_5df));var _5e6=txt.substring(_5df);if(_5e6!==""){_5da=doc.createTextNode(txt.substring(_5df));}_5db=doc.createElement("span");_5dc=doc.createTextNode(".");_5db.appendChild(_5dc);if(_5d9.length){_558.place(_5d9,rs,"after");}else{_5d9=rs;}_558.place(_5db,_5d9,"after");if(_5da){_558.place(_5da,_5db,"after");}_558.destroy(rs);var _5eb=_565.create(this.window);_5eb.setStart(_5dc,0);_5eb.setEnd(_5dc,_5dc.length);_5d7.removeAllRanges();_5d7.addRange(_5eb);doc.execCommand(_5d6);_558.place(_5db.firstChild,_5db,"before");_558.destroy(_5db);_5eb.setStart(_5dc,0);_5eb.setEnd(_5dc,_5dc.length);_5d7.removeAllRanges();_5d7.addRange(_5eb);this._sCall("collapse",[false]);_5dc.parentNode.innerHTML="";return true;}}}else{return false;}},_adaptIEList:function(_5ee){var _5ef=_565.getSelection(this.window);if(_5ef.isCollapsed){if(_5ef.rangeCount&&!this.queryCommandValue(_5ee)){var _5f0=_5ef.getRangeAt(0);var sc=_5f0.startContainer;if(sc&&sc.nodeType==3){if(!_5f0.startOffset){var _5f1="ul";if(_5ee==="insertorderedlist"){_5f1="ol";}var list=this.document.createElement(_5f1);var li=_558.create("li",null,list);_558.place(list,sc,"before");li.appendChild(sc);_558.create("br",null,list,"after");var _5f2=_565.create(this.window);_5f2.setStart(sc,0);_5f2.setEnd(sc,sc.length);_5ef.removeAllRanges();_5ef.addRange(_5f2);this._sCall("collapse",[true]);return true;}}}}return false;},_handleTextColorOrProperties:function(_5f3,_5f4){var _5f5=_565.getSelection(this.window);var doc=this.document;var rs,ret,_5f6,txt,_5f7,_5f8,_5f9,_5fa;_5f4=_5f4||null;if(_5f3&&_5f5&&_5f5.isCollapsed){if(_5f5.rangeCount){_5f6=_5f5.getRangeAt(0);rs=_5f6.startContainer;if(rs&&rs.nodeType===3){var _5fb=_5f6.startOffset;if(rs.length<_5fb){ret=this._adjustNodeAndOffset(rs,_5fb);rs=ret.node;_5fb=ret.offset;}txt=rs.nodeValue;_5f7=doc.createTextNode(txt.substring(0,_5fb));var _5fc=txt.substring(_5fb);if(_5fc!==""){_5f8=doc.createTextNode(txt.substring(_5fb));}_5f9=doc.createElement("span");_5fa=doc.createTextNode(".");_5f9.appendChild(_5fa);var _5fd=doc.createElement("span");_5f9.appendChild(_5fd);if(_5f7.length){_558.place(_5f7,rs,"after");}else{_5f7=rs;}_558.place(_5f9,_5f7,"after");if(_5f8){_558.place(_5f8,_5f9,"after");}_558.destroy(rs);var _5fe=_565.create(this.window);_5fe.setStart(_5fa,0);_5fe.setEnd(_5fa,_5fa.length);_5f5.removeAllRanges();_5f5.addRange(_5fe);if(has("webkit")){var _5ff="color";if(_5f3==="hilitecolor"||_5f3==="backcolor"){_5ff="backgroundColor";}_55a.set(_5f9,_5ff,_5f4);this._sCall("remove",[]);_558.destroy(_5fd);_5f9.innerHTML="&#160;";this._sCall("selectElement",[_5f9]);this.focus();}else{this.execCommand(_5f3,_5f4);_558.place(_5f9.firstChild,_5f9,"before");_558.destroy(_5f9);_5fe.setStart(_5fa,0);_5fe.setEnd(_5fa,_5fa.length);_5f5.removeAllRanges();_5f5.addRange(_5fe);this._sCall("collapse",[false]);_5fa.parentNode.removeChild(_5fa);}return true;}}}return false;},_adjustNodeAndOffset:function(node,_600){while(node.length<_600&&node.nextSibling&&node.nextSibling.nodeType===3){_600=_600-node.length;node=node.nextSibling;}return {"node":node,"offset":_600};},_tagNamesForCommand:function(_601){if(_601==="bold"){return ["b","strong"];}else{if(_601==="italic"){return ["i","em"];}else{if(_601==="strikethrough"){return ["s","strike"];}else{if(_601==="superscript"){return ["sup"];}else{if(_601==="subscript"){return ["sub"];}else{if(_601==="underline"){return ["u"];}}}}}}return [];},_stripBreakerNodes:function(node){if(!this.isLoaded){return;}_55d(".ieFormatBreakerSpan",node).forEach(function(b){while(b.firstChild){_558.place(b.firstChild,b,"before");}_558.destroy(b);});return node;}});return _569;});},"esri/layers/SelectionMode":function(){define("esri/layers/SelectionMode",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/layers/RenderMode"],function(_602,lang,has,_603,_604){var _605=_602([_604],{declaredClass:"esri.layers._SelectionMode",constructor:function(_606){this.featureLayer=_606;this._featureMap={};},propertyChangeHandler:function(type){if(this._init&&type===0){this._applyTimeFilter();}},resume:function(){this.propertyChangeHandler(0);}});if(has("extend-esri")){lang.setObject("layers._SelectionMode",_605,_603);}return _605;});},"dijit/form/_AutoCompleterMixin":function(){define("dijit/form/_AutoCompleterMixin",["dojo/data/util/filter","dojo/_base/declare","dojo/dom-attr","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/query","dojo/regexp","dojo/sniff","dojo/string","./DataList","../registry","./_TextBoxMixin","./_SearchMixin"],function(_607,_608,_609,_60a,keys,lang,_60b,_60c,has,_60d,_60e,_60f,_610,_611){return _608("dijit.form._AutoCompleterMixin",_611,{item:null,autoComplete:true,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:false,_getCaretPos:function(_612){var pos=0;if(typeof (_612.selectionStart)=="number"){pos=_612.selectionStart;}else{if(has("ie")){var tr=_612.ownerDocument.selection.createRange().duplicate();var ntr=_612.createTextRange();tr.move("character",0);ntr.move("character",0);try{ntr.setEndPoint("EndToEnd",tr);pos=String(ntr.text).replace(/\r/g,"").length;}catch(e){}}}return pos;},_setCaretPos:function(_613,_614){_614=parseInt(_614);_610.selectInputText(_613,_614,_614);},_setDisabledAttr:function(_615){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",_615?"true":"false");},_onKey:function(evt){if(evt.charCode>=32){return;}var key=evt.charCode||evt.keyCode;if(key==keys.ALT||key==keys.CTRL||key==keys.META||key==keys.SHIFT){return;}var pw=this.dropDown;var _616=null;this._abortQuery();this.inherited(arguments);if(evt.altKey||evt.ctrlKey||evt.metaKey){return;}if(this._opened){_616=pw.getHighlightedOption();}switch(key){case keys.PAGE_DOWN:case keys.DOWN_ARROW:case keys.PAGE_UP:case keys.UP_ARROW:if(this._opened){this._announceOption(_616);}_60a.stop(evt);break;case keys.ENTER:if(_616){if(_616==pw.nextButton){this._nextSearch(1);_60a.stop(evt);break;}else{if(_616==pw.previousButton){this._nextSearch(-1);_60a.stop(evt);break;}}_60a.stop(evt);}else{this._setBlurValue();this._setCaretPos(this.focusNode,this.focusNode.value.length);}case keys.TAB:var _617=this.get("displayedValue");if(pw&&(_617==pw._messages["previousMessage"]||_617==pw._messages["nextMessage"])){break;}if(_616){this._selectOption(_616);}case keys.ESCAPE:if(this._opened){this._lastQuery=null;this.closeDropDown();}break;}},_autoCompleteText:function(text){var fn=this.focusNode;_610.selectInputText(fn,fn.value.length);var _618=this.ignoreCase?"toLowerCase":"substr";if(text[_618](0).indexOf(this.focusNode.value[_618](0))==0){var cpos=this.autoComplete?this._getCaretPos(fn):fn.value.length;if((cpos+1)>fn.value.length){fn.value=text;_610.selectInputText(fn,cpos);}}else{fn.value=text;_610.selectInputText(fn);}},_openResultList:function(_619,_61a,_61b){var _61c=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();if(!_619.length&&_61b.start==0){this.closeDropDown();return;}this._nextSearch=this.dropDown.onPage=lang.hitch(this,function(_61d){_619.nextPage(_61d!==-1);this.focus();});this.dropDown.createOptions(_619,_61b,lang.hitch(this,"_getMenuLabelFromItem"));this._showResultList();if("direction" in _61b){if(_61b.direction){this.dropDown.highlightFirstOption();}else{if(!_61b.direction){this.dropDown.highlightLastOption();}}if(_61c){this._announceOption(this.dropDown.getHighlightedOption());}}else{if(this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(_61a[this.searchAttr].toString())){this._announceOption(this.dropDown.containerNode.firstChild.nextSibling);}}},_showResultList:function(){this.closeDropDown(true);this.openDropDown();this.domNode.setAttribute("aria-expanded","true");},loadDropDown:function(){this._startSearchAll();},isLoaded:function(){return false;},closeDropDown:function(){this._abortQuery();if(this._opened){this.inherited(arguments);this.domNode.setAttribute("aria-expanded","false");this.focusNode.removeAttribute("aria-activedescendant");}},_setBlurValue:function(){var _61e=this.get("displayedValue");var pw=this.dropDown;if(pw&&(_61e==pw._messages["previousMessage"]||_61e==pw._messages["nextMessage"])){this._setValueAttr(this._lastValueReported,true);}else{if(typeof this.item=="undefined"){this.item=null;this.set("displayedValue",_61e);}else{if(this.value!=this._lastValueReported){this._handleOnChange(this.value,true);}this._refreshState();}}},_setItemAttr:function(item,_61f,_620){var _621="";if(item){if(!_620){_620=this.store._oldAPI?this.store.getValue(item,this.searchAttr):item[this.searchAttr];}_621=this._getValueField()!=this.searchAttr?this.store.getIdentity(item):_620;}this.set("value",_621,_61f,_620,item);},_announceOption:function(node){if(!node){return;}var _622;if(node==this.dropDown.nextButton||node==this.dropDown.previousButton){_622=node.innerHTML;this.item=undefined;this.value="";}else{var item=this.dropDown.items[node.getAttribute("item")];_622=(this.store._oldAPI?this.store.getValue(item,this.searchAttr):item[this.searchAttr]).toString();this.set("item",item,false,_622);}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",_609.get(node,"id"));this._autoCompleteText(_622);},_selectOption:function(_623){this.closeDropDown();if(_623){this._announceOption(_623);}this._setCaretPos(this.focusNode,this.focusNode.value.length);this._handleOnChange(this.value,true);},_startSearchAll:function(){this._startSearch("");},_startSearchFromInput:function(){this.item=undefined;this.inherited(arguments);},_startSearch:function(key){if(!this.dropDown){var _624=this.id+"_popup",_625=lang.isString(this.dropDownClass)?lang.getObject(this.dropDownClass,false):this.dropDownClass;this.dropDown=new _625({onChange:lang.hitch(this,this._selectOption),id:_624,dir:this.dir,textDir:this.textDir});this.focusNode.removeAttribute("aria-activedescendant");this.textbox.setAttribute("aria-owns",_624);}this._lastInput=key;this.inherited(arguments);},_getValueField:function(){return this.searchAttr;},postMixInProperties:function(){this.inherited(arguments);if(!this.store){var _626=this.srcNodeRef;this.store=new _60e({},_626);if(!("value" in this.params)){var item=(this.item=this.store.fetchSelectedItem());if(item){var _627=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(item,_627):item[_627];}}}},postCreate:function(){var _628=_60b("label[for=\""+this.id+"\"]");if(_628.length){if(!_628[0].id){_628[0].id=this.id+"_label";}this.domNode.setAttribute("aria-labelledby",_628[0].id);}this.inherited(arguments);this.connect(this,"onSearch","_openResultList");},_getMenuLabelFromItem:function(item){var _629=this.labelFunc(item,this.store),_62a=this.labelType;if(this.highlightMatch!="none"&&this.labelType=="text"&&this._lastInput){_629=this.doHighlight(_629,this._lastInput);_62a="html";}return {html:_62a=="html",label:_629};},doHighlight:function(_62b,find){var _62c=(this.ignoreCase?"i":"")+(this.highlightMatch=="all"?"g":""),i=this.queryExpr.indexOf("${0}");find=_60c.escapeString(find);return this._escapeHtml(_62b.replace(new RegExp((i==0?"^":"")+"("+find+")"+(i==(this.queryExpr.length-4)?"$":""),_62c),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,"<span class=\"dijitComboBoxHighlightMatch\">$1</span>");},_escapeHtml:function(str){str=String(str).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");return str;},reset:function(){this.item=null;this.inherited(arguments);},labelFunc:function(item,_62d){return (_62d._oldAPI?_62d.getValue(item,this.labelAttr||this.searchAttr):item[this.labelAttr||this.searchAttr]).toString();},_setValueAttr:function(_62e,_62f,_630,item){this._set("item",item||null);if(_62e==null){_62e="";}this.inherited(arguments);},_setTextDirAttr:function(_631){this.inherited(arguments);if(this.dropDown){this.dropDown._set("textDir",_631);}}});});},"esri/layers/TrackManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/graphic","esri/geometry/Polyline","esri/layers/GraphicsLayer"],function(_632,lang,_633,has,_634,_635,_636,_637){var _638=_632(null,{declaredClass:"esri.layers._TrackManager",constructor:function(_639){this.layer=_639;this.trackMap={};},initialize:function(map){this.map=map;var _63a=this.layer,_63b=_63a.renderer.trackRenderer;if(_63b&&(_63a.geometryType==="esriGeometryPoint")){var _63c=(this.container=new _637._GraphicsLayer({id:_63a.id+"_tracks",_child:true}));_63c.loaded=true;_63c.onLoad(_63c);_63c._setMap(map,_63a._div);_63c.setRenderer(_63b);}},addFeatures:function(_63d){var tkid,_63e=this.trackMap,_63f=this.layer,_640=_63f._trackIdField;_633.forEach(_63d,function(_641){var _642=_641.attributes;tkid=_642[_640];var ary=(_63e[tkid]=(_63e[tkid]||[]));ary.push(_641);});var _643=_63f._startTimeField,_644=_63f.objectIdField;var _645=function(a,b){var _646=a.attributes[_643],_647=b.attributes[_643];if(_646===_647){return (a.attributes[_644]<b.attributes[_644])?-1:1;}else{return (_646<_647)?-1:1;}};for(tkid in _63e){_63e[tkid].sort(_645);}},drawTracks:function(){var _648=this.container;if(!_648){return;}var _649=this.trackMap,sr=this.map.spatialReference,tkid,ary,path,i,_64a,_64b=this.layer._trackIdField,_64c;for(tkid in _649){ary=_649[tkid];path=[];for(i=ary.length-1;i>=0;i--){_64a=ary[i].geometry;if(_64a){path.push([_64a.x,_64a.y]);}}_64c={};_64c[_64b]=tkid;if(path.length>0){_648.add(new _635(new _636({paths:[path],spatialReference:sr}),null,_64c));}}},moveLatestToFront:function(){_633.forEach(this.getLatestObservations(),function(_64d){var _64e=_64d._shape;_64e&&_64e._moveToFront();this._repaint(_64d,null,true);},this.layer);},getLatestObservations:function(){var _64f=[];if(!this.layer.renderer.latestObservationRenderer){return _64f;}var _650=this.trackMap,tkid;for(tkid in _650){var ary=_650[tkid];_64f.push(ary[ary.length-1]);}return _64f;},clearTracks:function(){var _651=this.getLatestObservations();this.trackMap={};var _652=this.container;if(_652){_652.clear();}_633.forEach(_651,function(_653){this._repaint(_653,null,true);},this.layer);},isLatestObservation:function(_654){var _655=this.layer._trackIdField;var _656=this.trackMap[_654.attributes[_655]];if(_656){return (_656[_656.length-1]===_654);}return false;},destroy:function(){var _657=this.container;if(_657){_657.clear();_657._unsetMap(this.map,this.layer._div);this.container=null;}this.map=null;this.layer=null;this.trackMap=null;}});if(has("extend-esri")){lang.setObject("layers._TrackManager",_638,_634);}return _638;});},"dijit/a11y":function(){define("dijit/a11y",["dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/sniff","./main"],function(_658,_659,_65a,dom,_65b,_65c,has,_65d){var _65e=(_65d._isElementShown=function(elem){var s=_65c.get(elem);return (s.visibility!="hidden")&&(s.visibility!="collapsed")&&(s.display!="none")&&(_65b.get(elem,"type")!="hidden");});_65d.hasDefaultTabStop=function(elem){switch(elem.nodeName.toLowerCase()){case "a":return _65b.has(elem,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":var body;try{var _65f=elem.contentDocument;if("designMode" in _65f&&_65f.designMode=="on"){return true;}body=_65f.body;}catch(e1){try{body=elem.contentWindow.document.body;}catch(e2){return false;}}return body&&(body.contentEditable=="true"||(body.firstChild&&body.firstChild.contentEditable=="true"));default:return elem.contentEditable=="true";}};var _660=(_65d.isTabNavigable=function(elem){if(_65b.get(elem,"disabled")){return false;}else{if(_65b.has(elem,"tabIndex")){return _65b.get(elem,"tabIndex")>=0;}else{return _65d.hasDefaultTabStop(elem);}}});_65d._getTabNavigable=function(root){var _661,last,_662,_663,_664,_665,_666={};function _667(node){return node&&node.tagName.toLowerCase()=="input"&&node.type&&node.type.toLowerCase()=="radio"&&node.name&&node.name.toLowerCase();};var _668=function(_669){for(var _66a=_669.firstChild;_66a;_66a=_66a.nextSibling){if(_66a.nodeType!=1||(has("ie")<=9&&_66a.scopeName!=="HTML")||!_65e(_66a)){continue;}if(_660(_66a)){var _66b=+_65b.get(_66a,"tabIndex");if(!_65b.has(_66a,"tabIndex")||_66b==0){if(!_661){_661=_66a;}last=_66a;}else{if(_66b>0){if(!_662||_66b<_663){_663=_66b;_662=_66a;}if(!_664||_66b>=_665){_665=_66b;_664=_66a;}}}var rn=_667(_66a);if(_65b.get(_66a,"checked")&&rn){_666[rn]=_66a;}}if(_66a.nodeName.toUpperCase()!="SELECT"){_668(_66a);}}};if(_65e(root)){_668(root);}function rs(node){return _666[_667(node)]||node;};return {first:rs(_661),last:rs(last),lowest:rs(_662),highest:rs(_664)};};_65d.getFirstInTabbingOrder=function(root,doc){var _66c=_65d._getTabNavigable(dom.byId(root,doc));return _66c.lowest?_66c.lowest:_66c.first;};_65d.getLastInTabbingOrder=function(root,doc){var _66d=_65d._getTabNavigable(dom.byId(root,doc));return _66d.last?_66d.last:_66d.highest;};return {hasDefaultTabStop:_65d.hasDefaultTabStop,isTabNavigable:_65d.isTabNavigable,_getTabNavigable:_65d._getTabNavigable,getFirstInTabbingOrder:_65d.getFirstInTabbingOrder,getLastInTabbingOrder:_65d.getLastInTabbingOrder};});},"dojox/date/islamic":function(){define("dojox/date/islamic",["..","dojo/_base/lang","dojo/date","./islamic/Date"],function(_66e,lang,dd,_66f){var _670=lang.getObject("date.islamic",true,_66e);_670.getDaysInMonth=function(_671){return _671.getDaysInIslamicMonth(_671.getMonth(),_671.getFullYear());};_670.compare=function(_672,_673,_674){if(_672 instanceof _66f){_672=_672.toGregorian();}if(_673 instanceof _66f){_673=_673.toGregorian();}return dd.compare.apply(null,arguments);};_670.add=function(date,_675,_676){var _677=new _66f(date);switch(_675){case "day":_677.setDate(date.getDate()+_676);break;case "weekday":var day=date.getDay();if(((day+_676)<5)&&((day+_676)>0)){_677.setDate(date.getDate()+_676);}else{var _678=0,_679=0;if(day==5){day=4;_679=(_676>0)?-1:1;}else{if(day==6){day=4;_679=(_676>0)?-2:2;}}var add=(_676>0)?(5-day-1):-day;var _67a=_676-add;var div=parseInt(_67a/5);if(_67a%5!=0){_678=(_676>0)?2:-2;}_678=_678+div*7+_67a%5+add;_677.setDate(date.getDate()+_678+_679);}break;case "year":_677.setFullYear(date.getFullYear()+_676);break;case "week":_676*=7;_677.setDate(date.getDate()+_676);break;case "month":var _67b=date.getMonth();_677.setMonth(_67b+_676);break;case "hour":_677.setHours(date.getHours()+_676);break;case "minute":_677._addMinutes(_676);break;case "second":_677._addSeconds(_676);break;case "millisecond":_677._addMilliseconds(_676);break;}return _677;};_670.difference=function(_67c,_67d,_67e){_67d=_67d||new _66f();_67e=_67e||"day";var _67f=_67d.getFullYear()-_67c.getFullYear();var _680=1;switch(_67e){case "weekday":var days=Math.round(_670.difference(_67c,_67d,"day"));var _681=parseInt(_670.difference(_67c,_67d,"week"));var mod=days%7;if(mod==0){days=_681*5;}else{var adj=0;var aDay=_67c.getDay();var bDay=_67d.getDay();_681=parseInt(days/7);mod=days%7;var _682=new _66f(_67c);_682.setDate(_682.getDate()+(_681*7));var _683=_682.getDay();if(days>0){switch(true){case aDay==5:adj=-1;break;case aDay==6:adj=0;break;case bDay==5:adj=-1;break;case bDay==6:adj=-2;break;case (_683+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==5:adj=0;break;case aDay==6:adj=1;break;case bDay==5:adj=2;break;case bDay==6:adj=1;break;case (_683+mod)<0:adj=2;}}}days+=adj;days-=(_681*2);}_680=days;break;case "year":_680=_67f;break;case "month":var _684=(_67d.toGregorian()>_67c.toGregorian())?_67d:_67c;var _685=(_67d.toGregorian()>_67c.toGregorian())?_67c:_67d;var _686=_684.getMonth();var _687=_685.getMonth();if(_67f==0){_680=_684.getMonth()-_685.getMonth();}else{_680=12-_687;_680+=_686;var i=_685.getFullYear()+1;var e=_684.getFullYear();for(i;i<e;i++){_680+=12;}}if(_67d.toGregorian()<_67c.toGregorian()){_680=-_680;}break;case "week":_680=parseInt(_670.difference(_67c,_67d,"day")/7);break;case "day":_680/=24;case "hour":_680/=60;case "minute":_680/=60;case "second":_680/=1000;case "millisecond":_680*=_67d.toGregorian().getTime()-_67c.toGregorian().getTime();}return Math.round(_680);};return _670;});},"url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\n></div>\n","esri/tasks/QueryTask":function(){define("esri/tasks/QueryTask",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/_base/json","dojo/has","esri/kernel","esri/request","esri/deferredUtils","esri/geometry/normalizeUtils","esri/tasks/Task","esri/tasks/FeatureSet"],function(_688,lang,_689,_68a,_68b,has,_68c,_68d,_68e,_68f,Task,_690){var _691=_688(Task,{declaredClass:"esri.tasks.QueryTask",constructor:function(url,_692){this._handler=lang.hitch(this,this._handler);this._relationshipQueryHandler=lang.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=lang.hitch(this,this._executeForIdsHandler);this._countHandler=lang.hitch(this,this._countHandler);this.source=_692&&_692.source;this.gdbVersion=_692&&_692.gdbVersion;},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},execute:function(_693,_694,_695,_696,_697){var _698=_697.assembly,_699=this._encode(lang.mixin({},this._url.query,{f:"json"},_693.toJson(_698&&_698[0]))),_69a=this._handler,_69b=this._errorHandler;if(this.source){var _69c={source:this.source.toJson()};_699.layer=_68b.toJson(_69c);}if(this.gdbVersion){_699.gdbVersion=this.gdbVersion;}return _68d({url:this._url.path+"/query",content:_699,callbackParamName:"callback",load:function(r,i){_69a(r,i,_694,_695,_697.dfd);},error:function(r){_69b(r,_695,_697.dfd);},callbackSuffix:_696});},executeRelationshipQuery:function(_69d,_69e,_69f){var _6a0=this._encode(lang.mixin({},this._url.query,{f:"json"},_69d.toJson())),_6a1=this._relationshipQueryHandler,_6a2=this._errorHandler;if(this.gdbVersion){_6a0.gdbVersion=this.gdbVersion;}var dfd=new _68a(_68e._dfdCanceller);dfd._pendingDfd=_68d({url:this._url.path+"/queryRelatedRecords",content:_6a0,callbackParamName:"callback",load:function(r,i){_6a1(r,i,_69e,_69f,dfd);},error:function(r){_6a2(r,_69f,dfd);}});return dfd;},executeForIds:function(_6a3,_6a4,_6a5,_6a6){var _6a7=_6a6.assembly,_6a8=this._encode(lang.mixin({},this._url.query,{f:"json",returnIdsOnly:true},_6a3.toJson(_6a7&&_6a7[0]))),_6a9=this._executeForIdsHandler,_6aa=this._errorHandler;if(this.source){var _6ab={source:this.source.toJson()};_6a8.layer=_68b.toJson(_6ab);}if(this.gdbVersion){_6a8.gdbVersion=this.gdbVersion;}return _68d({url:this._url.path+"/query",content:_6a8,callbackParamName:"callback",load:function(r,i){_6a9(r,i,_6a4,_6a5,_6a6.dfd);},error:function(r){_6aa(r,_6a5,_6a6.dfd);}});},executeForCount:function(_6ac,_6ad,_6ae,_6af){var _6b0=_6af.assembly,_6b1=this._encode(lang.mixin({},this._url.query,{f:"json",returnIdsOnly:true,returnCountOnly:true},_6ac.toJson(_6b0&&_6b0[0]))),_6b2=this._countHandler,_6b3=this._errorHandler;if(this.source){var _6b4={source:this.source.toJson()};_6b1.layer=_68b.toJson(_6b4);}if(this.gdbVersion){_6b1.gdbVersion=this.gdbVersion;}return _68d({url:this._url.path+"/query",content:_6b1,callbackParamName:"callback",load:function(r,i){_6b2(r,i,_6ad,_6ae,_6af.dfd);},error:function(r){_6b3(r,_6ae,_6af.dfd);}});},_handler:function(_6b5,io,_6b6,_6b7,dfd){try{var _6b8=new _690(_6b5);this._successHandler([_6b8],"onComplete",_6b6,dfd);}catch(err){this._errorHandler(err,_6b7,dfd);}},_relationshipQueryHandler:function(_6b9,io,_6ba,_6bb,dfd){try{var gt=_6b9.geometryType,sr=_6b9.spatialReference,_6bc={};_689.forEach(_6b9.relatedRecordGroups,function(gr){var _6bd={};_6bd.geometryType=gt;_6bd.spatialReference=sr;_6bd.features=gr.relatedRecords;var fset=new _690(_6bd);_6bc[gr.objectId]=fset;});this._successHandler([_6bc],"onExecuteRelationshipQueryComplete",_6ba,dfd);}catch(err){this._errorHandler(err,_6bb,dfd);}},_executeForIdsHandler:function(_6be,io,_6bf,_6c0,dfd){try{this._successHandler([_6be.objectIds],"onExecuteForIdsComplete",_6bf,dfd);}catch(err){this._errorHandler(err,_6c0,dfd);}},_countHandler:function(_6c1,io,_6c2,_6c3,dfd){try{var _6c4,_6c5=_6c1.features,ids=_6c1.objectIds;if(ids){_6c4=ids.length;}else{if(_6c5){throw new Error("Unable to perform query. Please check your parameters.");}else{_6c4=_6c1.count;}}this._successHandler([_6c4],"onExecuteForCountComplete",_6c2,dfd);}catch(err){this._errorHandler(err,_6c3,dfd);}}});_68f._createWrappers(_691);if(has("extend-esri")){lang.setObject("tasks.QueryTask",_691,_68c);}return _691;});},"url:dijit/form/templates/Button.html":"<span class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" role=\"presentation\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\n\t\ttabIndex=\"-1\" role=\"presentation\" data-dojo-attach-point=\"valueNode\"\n/></span>\n","dijit/typematic":function(){define("dijit/typematic",["dojo/_base/array","dojo/_base/connect","dojo/_base/event","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/sniff","./main"],function(_6c6,_6c7,_6c8,_6c9,lang,on,has,_6ca){var _6cb=(_6ca.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:(this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay)),this._minDelay);this._timer=setTimeout(lang.hitch(this,"_fireEventAndReload"),this._currentTimeout);},trigger:function(evt,_6cc,node,_6cd,obj,_6ce,_6cf,_6d0){if(obj!=this._obj){this.stop();this._initialDelay=_6cf||500;this._subsequentDelay=_6ce||0.9;this._minDelay=_6d0||10;this._obj=obj;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=lang.hitch(_6cc,_6cd);this._evt={faux:true};for(var attr in evt){if(attr!="layerX"&&attr!="layerY"){var v=evt[attr];if(typeof v!="function"&&typeof v!="undefined"){this._evt[attr]=v;}}}this._fireEventAndReload();}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null;}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null;}},addKeyListener:function(node,_6d1,_6d2,_6d3,_6d4,_6d5,_6d6){if(_6d1.keyCode){_6d1.charOrCode=_6d1.keyCode;_6c9.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}else{if(_6d1.charCode){_6d1.charOrCode=String.fromCharCode(_6d1.charCode);_6c9.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}}var _6d7=[on(node,_6c7._keypress,lang.hitch(this,function(evt){if(evt.charOrCode==_6d1.charOrCode&&(_6d1.ctrlKey===undefined||_6d1.ctrlKey==evt.ctrlKey)&&(_6d1.altKey===undefined||_6d1.altKey==evt.altKey)&&(_6d1.metaKey===undefined||_6d1.metaKey==(evt.metaKey||false))&&(_6d1.shiftKey===undefined||_6d1.shiftKey==evt.shiftKey)){_6c8.stop(evt);_6cb.trigger(evt,_6d2,node,_6d3,_6d1,_6d4,_6d5,_6d6);}else{if(_6cb._obj==_6d1){_6cb.stop();}}})),on(node,"keyup",lang.hitch(this,function(){if(_6cb._obj==_6d1){_6cb.stop();}}))];return {remove:function(){_6c6.forEach(_6d7,function(h){h.remove();});}};},addMouseListener:function(node,_6d8,_6d9,_6da,_6db,_6dc){var _6dd=[on(node,"mousedown",lang.hitch(this,function(evt){evt.preventDefault();_6cb.trigger(evt,_6d8,node,_6d9,node,_6da,_6db,_6dc);})),on(node,"mouseup",lang.hitch(this,function(evt){if(this._obj){evt.preventDefault();}_6cb.stop();})),on(node,"mouseout",lang.hitch(this,function(evt){if(this._obj){evt.preventDefault();}_6cb.stop();})),on(node,"dblclick",lang.hitch(this,function(evt){evt.preventDefault();if(has("ie")<9){_6cb.trigger(evt,_6d8,node,_6d9,node,_6da,_6db,_6dc);setTimeout(lang.hitch(this,_6cb.stop),50);}}))];return {remove:function(){_6c6.forEach(_6dd,function(h){h.remove();});}};},addListener:function(_6de,_6df,_6e0,_6e1,_6e2,_6e3,_6e4,_6e5){var _6e6=[this.addKeyListener(_6df,_6e0,_6e1,_6e2,_6e3,_6e4,_6e5),this.addMouseListener(_6de,_6e1,_6e2,_6e3,_6e4,_6e5)];return {remove:function(){_6c6.forEach(_6e6,function(h){h.remove();});}};}});return _6cb;});},"dijit/form/DropDownButton":function(){require({cache:{"url:dijit/form/templates/DropDownButton.html":"<span class=\"dijit dijitReset dijitInline\"\n\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" data-dojo-attach-point=\"_buttonNode\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\trole=\"button\" aria-haspopup=\"true\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\n\t\t\t\tdata-dojo-attach-point=\"iconNode\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode,_popupStateNode\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-point=\"valueNode\" role=\"presentation\"\n/></span>\n"}});define("dijit/form/DropDownButton",["dojo/_base/declare","dojo/_base/lang","dojo/query","../registry","../popup","./Button","../_Container","../_HasDropDown","dojo/text!./templates/DropDownButton.html"],function(_6e7,lang,_6e8,_6e9,_6ea,_6eb,_6ec,_6ed,_6ee){return _6e7("dijit.form.DropDownButton",[_6eb,_6ec,_6ed],{baseClass:"dijitDropDownButton",templateString:_6ee,_fillContent:function(){if(this.srcNodeRef){var _6ef=_6e8("*",this.srcNodeRef);this.inherited(arguments,[_6ef[0]]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}if(!this.dropDown&&this.dropDownContainer){var _6f0=_6e8("[widgetId]",this.dropDownContainer)[0];this.dropDown=_6e9.byNode(_6f0);delete this.dropDownContainer;}if(this.dropDown){_6ea.hide(this.dropDown);}this.inherited(arguments);},isLoaded:function(){var _6f1=this.dropDown;return (!!_6f1&&(!_6f1.href||_6f1.isLoaded));},loadDropDown:function(_6f2){var _6f3=this.dropDown;var _6f4=_6f3.on("load",lang.hitch(this,function(){_6f4.remove();_6f2();}));_6f3.refresh();},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown;}});});},"esri/layers/GridLayout":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/SpatialReference","esri/geometry/Extent","esri/geometry/Polyline"],function(_6f5,lang,_6f6,has,_6f7,_6f8,_6f9,_6fa){var _6fb=_6f5(null,{declaredClass:"esri.layers._GridLayout",constructor:function(_6fc,_6fd,_6fe,_6ff){this.origin=_6fc;this.cellWidth=_6fd.width;this.cellHeight=_6fd.height;this.mapWidth=_6fe.width;this.mapHeight=_6fe.height;this.srInfo=_6ff;},setResolution:function(_700){this._resolution=(_700.xmax-_700.xmin)/this.mapWidth;if(this.srInfo){var _701=Math.round((2*this.srInfo.valid[1])/this._resolution),_702=Math.round(_701/this.cellWidth);this._frameStats=[_702,0,_702-1];}},getCellCoordinates:function(_703){var res=this._resolution,_704=this.origin;return {row:Math.floor((_704.y-_703.y)/(this.cellHeight*res)),col:Math.floor((_703.x-_704.x)/(this.cellWidth*res))};},normalize:function(col){var _705=this._frameStats;if(_705){var _706=_705[0],m180=_705[1],p180=_705[2];if(col<m180){col=col%_706;col=col<m180?col+_706:col;}else{if(col>p180){col=col%_706;}}}return col;},intersects:function(_707,_708){var _709=this.srInfo;if(_709){return _6f6.some(_708._getParts(_709),function(_70a){return _707.intersects(_70a.extent);});}else{return _707.intersects(_708);}},getCellExtent:function(row,col){var res=this._resolution,_70b=this.origin,_70c=this.cellWidth,_70d=this.cellHeight;return new _6f9((col*_70c*res)+_70b.x,_70b.y-((row+1)*_70d*res),((col+1)*_70c*res)+_70b.x,_70b.y-(row*_70d*res),new _6f8(_70b.spatialReference.toJson()));},getLatticeID:function(_70e){var _70f=this.getCellCoordinates({x:_70e.xmin,y:_70e.ymax}),_710=this.getCellCoordinates({x:_70e.xmax,y:_70e.ymin}),_711=_70f.row,_712=_710.row,_713=this.normalize(_70f.col),_714=this.normalize(_710.col);return _711+"_"+_712+"_"+_713+"_"+_714;},sorter:function(a,b){return (a<b)?-1:1;},getCellsInExtent:function(_715,_716){var _717=this.getCellCoordinates({x:_715.xmin,y:_715.ymax}),_718=this.getCellCoordinates({x:_715.xmax,y:_715.ymin}),_719=_717.row,_71a=_718.row,_71b=_717.col,_71c=_718.col,_71d=[],i,j,nj,_71e=[],_71f=[],len,xmin,xmax,ymin,ymax,_720=[],_721,_722;for(i=_719;i<=_71a;i++){for(j=_71b;j<=_71c;j++){nj=this.normalize(j);_715=this.getCellExtent(i,nj);_71d.push({row:i,col:nj,extent:_715,resolution:this._resolution});if(_716){_71e.push(_715.xmin,_715.xmax);_71f.push(_715.ymin,_715.ymax);}}}_71b=this.normalize(_71b);_71c=this.normalize(_71c);_71e.sort(this.sorter);_71f.sort(this.sorter);len=_71e.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_71e[i]===_71e[i+1]){_71e.splice(i,1);}}}len=_71f.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_71f[i]===_71f[i+1]){_71f.splice(i,1);}}}if(_71e.length&&_71f.length){xmin=_71e[0];xmax=_71e[_71e.length-1];ymin=_71f[0];ymax=_71f[_71f.length-1];len=_71e.length;for(i=0;i<len;i++){_720.push([[_71e[i],ymax],[_71e[i],ymin]]);}len=_71f.length;for(i=0;i<len;i++){_720.push([[xmin,_71f[i]],[xmax,_71f[i]]]);}_721=new _6fa({paths:_720,spatialReference:this.origin.spatialReference.toJson()});_722=_719+"_"+_71a+"_"+_71b+"_"+_71c;_71d.push({latticeID:_722,lattice:_721,resolution:this._resolution});}return {minRow:_719,maxRow:_71a,minCol:_71b,maxCol:_71c,cells:_71d};}});if(has("extend-esri")){lang.setObject("layers._GridLayout",_6fb,_6f7);}return _6fb;});},"dijit/_base/focus":function(){define("dijit/_base/focus",["dojo/_base/array","dojo/dom","dojo/_base/lang","dojo/topic","dojo/_base/window","../focus","../main"],function(_723,dom,lang,_724,win,_725,_726){var _727={_curFocus:null,_prevFocus:null,isCollapsed:function(){return _726.getBookmark().isCollapsed;},getBookmark:function(){var bm,rg,tg,sel=win.doc.selection,cf=_725.curNode;if(win.global.getSelection){sel=win.global.getSelection();if(sel){if(sel.isCollapsed){tg=cf?cf.tagName:"";if(tg){tg=tg.toLowerCase();if(tg=="textarea"||(tg=="input"&&(!cf.type||cf.type.toLowerCase()=="text"))){sel={start:cf.selectionStart,end:cf.selectionEnd,node:cf,pRange:true};return {isCollapsed:(sel.end<=sel.start),mark:sel};}}bm={isCollapsed:true};if(sel.rangeCount){bm.mark=sel.getRangeAt(0).cloneRange();}}else{rg=sel.getRangeAt(0);bm={isCollapsed:false,mark:rg.cloneRange()};}}}else{if(sel){tg=cf?cf.tagName:"";tg=tg.toLowerCase();if(cf&&tg&&(tg=="button"||tg=="textarea"||tg=="input")){if(sel.type&&sel.type.toLowerCase()=="none"){return {isCollapsed:true,mark:null};}else{rg=sel.createRange();return {isCollapsed:rg.text&&rg.text.length?false:true,mark:{range:rg,pRange:true}};}}bm={};try{rg=sel.createRange();bm.isCollapsed=!(sel.type=="Text"?rg.htmlText.length:rg.length);}catch(e){bm.isCollapsed=true;return bm;}if(sel.type.toUpperCase()=="CONTROL"){if(rg.length){bm.mark=[];var i=0,len=rg.length;while(i<len){bm.mark.push(rg.item(i++));}}else{bm.isCollapsed=true;bm.mark=null;}}else{bm.mark=rg.getBookmark();}}else{console.warn("No idea how to store the current selection for this browser!");}}return bm;},moveToBookmark:function(_728){var _729=win.doc,mark=_728.mark;if(mark){if(win.global.getSelection){var sel=win.global.getSelection();if(sel&&sel.removeAllRanges){if(mark.pRange){var n=mark.node;n.selectionStart=mark.start;n.selectionEnd=mark.end;}else{sel.removeAllRanges();sel.addRange(mark);}}else{console.warn("No idea how to restore selection for this browser!");}}else{if(_729.selection&&mark){var rg;if(mark.pRange){rg=mark.range;}else{if(lang.isArray(mark)){rg=_729.body.createControlRange();_723.forEach(mark,function(n){rg.addElement(n);});}else{rg=_729.body.createTextRange();rg.moveToBookmark(mark);}}rg.select();}}}},getFocus:function(menu,_72a){var node=!_725.curNode||(menu&&dom.isDescendant(_725.curNode,menu.domNode))?_726._prevFocus:_725.curNode;return {node:node,bookmark:node&&(node==_725.curNode)&&win.withGlobal(_72a||win.global,_726.getBookmark),openedForWindow:_72a};},_activeStack:[],registerIframe:function(_72b){return _725.registerIframe(_72b);},unregisterIframe:function(_72c){_72c&&_72c.remove();},registerWin:function(_72d,_72e){return _725.registerWin(_72d,_72e);},unregisterWin:function(_72f){_72f&&_72f.remove();}};_725.focus=function(_730){if(!_730){return;}var node="node" in _730?_730.node:_730,_731=_730.bookmark,_732=_730.openedForWindow,_733=_731?_731.isCollapsed:false;if(node){var _734=(node.tagName.toLowerCase()=="iframe")?node.contentWindow:node;if(_734&&_734.focus){try{_734.focus();}catch(e){}}_725._onFocusNode(node);}if(_731&&win.withGlobal(_732||win.global,_726.isCollapsed)&&!_733){if(_732){_732.focus();}try{win.withGlobal(_732||win.global,_726.moveToBookmark,null,[_731]);}catch(e2){}}};_725.watch("curNode",function(name,_735,_736){_726._curFocus=_736;_726._prevFocus=_735;if(_736){_724.publish("focusNode",_736);}});_725.watch("activeStack",function(name,_737,_738){_726._activeStack=_738;});_725.on("widget-blur",function(_739,by){_724.publish("widgetBlur",_739,by);});_725.on("widget-focus",function(_73a,by){_724.publish("widgetFocus",_73a,by);});lang.mixin(_726,_727);return _726;});},"dijit/place":function(){define("dijit/place",["dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/window","dojo/window","./main"],function(_73b,_73c,_73d,_73e,win,_73f,_740){function _741(node,_742,_743,_744){var view=_73f.getBox(node.ownerDocument);if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body"){win.body(node.ownerDocument).appendChild(node);}var best=null;_73b.some(_742,function(_745){var _746=_745.corner;var pos=_745.pos;var _747=0;var _748={w:{"L":view.l+view.w-pos.x,"R":pos.x-view.l,"M":view.w}[_746.charAt(1)],h:{"T":view.t+view.h-pos.y,"B":pos.y-view.t,"M":view.h}[_746.charAt(0)]};var s=node.style;s.left=s.right="auto";if(_743){var res=_743(node,_745.aroundCorner,_746,_748,_744);_747=typeof res=="undefined"?0:res;}var _749=node.style;var _74a=_749.display;var _74b=_749.visibility;if(_749.display=="none"){_749.visibility="hidden";_749.display="";}var bb=_73c.position(node);_749.display=_74a;_749.visibility=_74b;var _74c={"L":pos.x,"R":pos.x-bb.w,"M":Math.max(view.l,Math.min(view.l+view.w,pos.x+(bb.w>>1))-bb.w)}[_746.charAt(1)],_74d={"T":pos.y,"B":pos.y-bb.h,"M":Math.max(view.t,Math.min(view.t+view.h,pos.y+(bb.h>>1))-bb.h)}[_746.charAt(0)],_74e=Math.max(view.l,_74c),_74f=Math.max(view.t,_74d),endX=Math.min(view.l+view.w,_74c+bb.w),endY=Math.min(view.t+view.h,_74d+bb.h),_750=endX-_74e,_751=endY-_74f;_747+=(bb.w-_750)+(bb.h-_751);if(best==null||_747<best.overflow){best={corner:_746,aroundCorner:_745.aroundCorner,x:_74e,y:_74f,w:_750,h:_751,overflow:_747,spaceAvailable:_748};}return !_747;});if(best.overflow&&_743){_743(node,best.aroundCorner,best.corner,best.spaceAvailable,_744);}var l=_73c.isBodyLtr(node.ownerDocument),s=node.style;s.top=best.y+"px";s[l?"left":"right"]=(l?best.x:view.w-best.x-best.w)+"px";s[l?"right":"left"]="auto";return best;};var _752={at:function(node,pos,_753,_754){var _755=_73b.map(_753,function(_756){var c={corner:_756,pos:{x:pos.x,y:pos.y}};if(_754){c.pos.x+=_756.charAt(1)=="L"?_754.x:-_754.x;c.pos.y+=_756.charAt(0)=="T"?_754.y:-_754.y;}return c;});return _741(node,_755);},around:function(node,_757,_758,_759,_75a){var _75b=(typeof _757=="string"||"offsetWidth" in _757)?_73c.position(_757,true):_757;if(_757.parentNode){var _75c=_73d.getComputedStyle(_757).position=="absolute";var _75d=_757.parentNode;while(_75d&&_75d.nodeType==1&&_75d.nodeName!="BODY"){var _75e=_73c.position(_75d,true),pcs=_73d.getComputedStyle(_75d);if(/relative|absolute/.test(pcs.position)){_75c=false;}if(!_75c&&/hidden|auto|scroll/.test(pcs.overflow)){var _75f=Math.min(_75b.y+_75b.h,_75e.y+_75e.h);var _760=Math.min(_75b.x+_75b.w,_75e.x+_75e.w);_75b.x=Math.max(_75b.x,_75e.x);_75b.y=Math.max(_75b.y,_75e.y);_75b.h=_75f-_75b.y;_75b.w=_760-_75b.x;}if(pcs.position=="absolute"){_75c=true;}_75d=_75d.parentNode;}}var x=_75b.x,y=_75b.y,_761="w" in _75b?_75b.w:(_75b.w=_75b.width),_762="h" in _75b?_75b.h:(_73e.deprecated("place.around: dijit/place.__Rectangle: { x:"+x+", y:"+y+", height:"+_75b.height+", width:"+_761+" } has been deprecated.  Please use { x:"+x+", y:"+y+", h:"+_75b.height+", w:"+_761+" }","","2.0"),_75b.h=_75b.height);var _763=[];function push(_764,_765){_763.push({aroundCorner:_764,corner:_765,pos:{x:{"L":x,"R":x+_761,"M":x+(_761>>1)}[_764.charAt(1)],y:{"T":y,"B":y+_762,"M":y+(_762>>1)}[_764.charAt(0)]}});};_73b.forEach(_758,function(pos){var ltr=_759;switch(pos){case "above-centered":push("TM","BM");break;case "below-centered":push("BM","TM");break;case "after-centered":ltr=!ltr;case "before-centered":push(ltr?"ML":"MR",ltr?"MR":"ML");break;case "after":ltr=!ltr;case "before":push(ltr?"TL":"TR",ltr?"TR":"TL");push(ltr?"BL":"BR",ltr?"BR":"BL");break;case "below-alt":ltr=!ltr;case "below":push(ltr?"BL":"BR",ltr?"TL":"TR");push(ltr?"BR":"BL",ltr?"TR":"TL");break;case "above-alt":ltr=!ltr;case "above":push(ltr?"TL":"TR",ltr?"BL":"BR");push(ltr?"TR":"TL",ltr?"BR":"BL");break;default:push(pos.aroundCorner,pos.corner);}});var _766=_741(node,_763,_75a,{w:_761,h:_762});_766.aroundNodePos=_75b;return _766;}};return _740.place=_752;});},"esri/tasks/Task":function(){define("esri/tasks/Task",["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","esri/kernel","esri/deferredUtils","esri/urlUtils"],function(_767,lang,_768,has,_769,_76a,_76b){var Task=_767(null,{declaredClass:"esri.tasks._Task",constructor:function(url){if(url&&lang.isString(url)){this._url=_76b.urlToObject(this.url=url);}this.normalization=true;this._errorHandler=lang.hitch(this,this._errorHandler);},_useSSL:function(){var _76c=this._url,re=/^http:/i,rep="https:";if(this.url){this.url=this.url.replace(re,rep);}if(_76c&&_76c.path){_76c.path=_76c.path.replace(re,rep);}},_encode:function(_76d,_76e,_76f){var _770,type,_771={},i,p,pl;for(i in _76d){if(i==="declaredClass"){continue;}_770=_76d[i];type=typeof _770;if(_770!==null&&_770!==undefined&&type!=="function"){if(lang.isArray(_770)){_771[i]=[];pl=_770.length;for(p=0;p<pl;p++){_771[i][p]=this._encode(_770[p]);}}else{if(type==="object"){if(_770.toJson){var json=_770.toJson(_76f&&_76f[i]);if(_770.declaredClass==="esri.tasks.FeatureSet"){if(json.spatialReference){json.sr=json.spatialReference;delete json.spatialReference;}}_771[i]=_76e?json:_768.toJson(json);}}else{_771[i]=_770;}}}}return _771;},_successHandler:function(args,_772,_773,dfd){if(_772){this[_772].apply(this,args);}if(_773){_773.apply(null,args);}if(dfd){_76a._resDfd(dfd,args);}},_errorHandler:function(err,_774,dfd){this.onError(err);if(_774){_774(err);}if(dfd){dfd.errback(err);}},setNormalization:function(_775){this.normalization=_775;},onError:function(){}});if(has("extend-esri")){_769.Task=Task;}return Task;});},"dijit/form/NumberTextBox":function(){define("dijit/form/NumberTextBox",["dojo/_base/declare","dojo/_base/lang","dojo/number","./RangeBoundTextBox"],function(_776,lang,_777,_778){var _779=_776("dijit.form.NumberTextBoxMixin",null,{pattern:_777.regexp,value:NaN,editOptions:{pattern:"#.######"},_formatter:_777.format,postMixInProperties:function(){this.inherited(arguments);this._set("type","text");},_setConstraintsAttr:function(_77a){var _77b=typeof _77a.places=="number"?_77a.places:0;if(_77b){_77b++;}if(typeof _77a.max!="number"){_77a.max=9*Math.pow(10,15-_77b);}if(typeof _77a.min!="number"){_77a.min=-9*Math.pow(10,15-_77b);}this.inherited(arguments,[_77a]);if(this.focusNode&&this.focusNode.value&&!isNaN(this.value)){this.set("value",this.value);}},_onFocus:function(){if(this.disabled){return;}var val=this.get("value");if(typeof val=="number"&&!isNaN(val)){var _77c=this.format(val,this.constraints);if(_77c!==undefined){this.textbox.value=_77c;}}this.inherited(arguments);},format:function(_77d,_77e){var _77f=String(_77d);if(typeof _77d!="number"){return _77f;}if(isNaN(_77d)){return "";}if(!("rangeCheck" in this&&this.rangeCheck(_77d,_77e))&&_77e.exponent!==false&&/\de[-+]?\d/i.test(_77f)){return _77f;}if(this.editOptions&&this.focused){_77e=lang.mixin({},_77e,this.editOptions);}return this._formatter(_77d,_77e);},_parser:_777.parse,parse:function(_780,_781){var v=this._parser(_780,lang.mixin({},_781,(this.editOptions&&this.focused)?this.editOptions:{}));if(this.editOptions&&this.focused&&isNaN(v)){v=this._parser(_780,_781);}return v;},_getDisplayedValueAttr:function(){var v=this.inherited(arguments);return isNaN(v)?this.textbox.value:v;},filter:function(_782){return (_782==null||_782==="")?NaN:this.inherited(arguments);},serialize:function(_783,_784){return (typeof _783!="number"||isNaN(_783))?"":this.inherited(arguments);},_setBlurValue:function(){var val=lang.hitch(lang.mixin({},this,{focused:true}),"get")("value");this._setValueAttr(val,true);},_setValueAttr:function(_785,_786,_787){if(_785!==undefined&&_787===undefined){_787=String(_785);if(typeof _785=="number"){if(isNaN(_785)){_787="";}else{if(("rangeCheck" in this&&this.rangeCheck(_785,this.constraints))||this.constraints.exponent===false||!/\de[-+]?\d/i.test(_787)){_787=undefined;}}}else{if(!_785){_787="";_785=NaN;}else{_785=undefined;}}}this.inherited(arguments,[_785,_786,_787]);},_getValueAttr:function(){var v=this.inherited(arguments);if(isNaN(v)&&this.textbox.value!==""){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)&&(new RegExp("^"+_777._realNumberRegexp(lang.mixin({},this.constraints))+"$").test(this.textbox.value))){var n=Number(this.textbox.value);return isNaN(n)?undefined:n;}else{return undefined;}}else{return v;}},isValid:function(_788){if(!this.focused||this._isEmpty(this.textbox.value)){return this.inherited(arguments);}else{var v=this.get("value");if(!isNaN(v)&&this.rangeCheck(v,this.constraints)){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)){return true;}else{return this.inherited(arguments);}}else{return false;}}}});var _789=_776("dijit.form.NumberTextBox",[_778,_779],{baseClass:"dijitTextBox dijitNumberTextBox"});_789.Mixin=_779;return _789;});},"esri/tasks/FeatureSet":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/lang","esri/graphic","esri/SpatialReference","esri/graphicsUtils","esri/geometry/jsonUtils","esri/symbols/jsonUtils"],function(_78a,lang,_78b,has,_78c,_78d,_78e,_78f,_790,_791,_792){var _793=_78a(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(json){if(json){lang.mixin(this,json);var _794=this.features,sr=json.spatialReference,_795=_791.getGeometryType(json.geometryType);sr=(this.spatialReference=new _78f(sr));this.geometryType=json.geometryType;if(json.fields){this.fields=json.fields;}_78b.forEach(_794,function(_796,i){var _797=_796.geometry&&_796.geometry.spatialReference;_794[i]=new _78e((_795&&_796.geometry)?new _795(_796.geometry):null,_796.symbol&&_792.fromJson(_796.symbol),_796.attributes);if(_794[i].geometry&&!_797){_794[i].geometry.setSpatialReference(sr);}});}else{this.features=[];}},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(_798){var json={};if(this.displayFieldName){json.displayFieldName=this.displayFieldName;}if(this.fields){json.fields=this.fields;}if(this.spatialReference){json.spatialReference=this.spatialReference.toJson();}else{if(this.features[0]&&this.features[0].geometry){json.spatialReference=this.features[0].geometry.spatialReference.toJson();}}if(this.features[0]){if(this.features[0].geometry){json.geometryType=_791.getJsonType(this.features[0].geometry);}json.features=_790._encodeGraphics(this.features,_798);}json.exceededTransferLimit=this.exceededTransferLimit;return _78d.fixJson(json);}});if(has("extend-esri")){lang.setObject("tasks.FeatureSet",_793,_78c);}return _793;});},"dijit/_Widget":function(){define("dijit/_Widget",["dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/ready","./registry","./_WidgetBase","./_OnDijitClickMixin","./_FocusMixin","dojo/uacss","./hccss"],function(_799,_79a,_79b,_79c,has,_79d,lang,_79e,_79f,_7a0,_7a1,_7a2,_7a3){function _7a4(){};function _7a5(_7a6){return function(obj,_7a7,_7a8,_7a9){if(obj&&typeof _7a7=="string"&&obj[_7a7]==_7a4){return obj.on(_7a7.substring(2).toLowerCase(),lang.hitch(_7a8,_7a9));}return _7a6.apply(_79b,arguments);};};_799.around(_79b,"connect",_7a5);if(_79d.connect){_799.around(_79d,"connect",_7a5);}var _7aa=_79c("dijit._Widget",[_7a1,_7a2,_7a3],{onClick:_7a4,onDblClick:_7a4,onKeyDown:_7a4,onKeyPress:_7a4,onKeyUp:_7a4,onMouseDown:_7a4,onMouseMove:_7a4,onMouseOut:_7a4,onMouseOver:_7a4,onMouseLeave:_7a4,onMouseEnter:_7a4,onMouseUp:_7a4,constructor:function(_7ab){this._toConnect={};for(var name in _7ab){if(this[name]===_7a4){this._toConnect[name.replace(/^on/,"").toLowerCase()]=_7ab[name];delete _7ab[name];}}},postCreate:function(){this.inherited(arguments);for(var name in this._toConnect){this.on(name,this._toConnect[name]);}delete this._toConnect;},on:function(type,func){if(this[this._onMap(type)]===_7a4){return _79b.connect(this.domNode,type.toLowerCase(),this,func);}return this.inherited(arguments);},_setFocusedAttr:function(val){this._focused=val;this._set("focused",val);},setAttribute:function(attr,_7ac){_79d.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(attr,_7ac);},attr:function(name,_7ad){if(_79a.isDebug){var _7ae=arguments.callee._ach||(arguments.callee._ach={}),_7af=(arguments.callee.caller||"unknown caller").toString();if(!_7ae[_7af]){_79d.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+_7af,"","2.0");_7ae[_7af]=true;}}var args=arguments.length;if(args>=2||typeof name==="object"){return this.set.apply(this,arguments);}else{return this.get(name);}},getDescendants:function(){_79d.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?_79e("[widgetId]",this.containerNode).map(_7a0.byNode):[];},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){},onClose:function(){return true;}});if(has("dijit-legacy-requires")){_79f(0,function(){var _7b0=["dijit/_base"];require(_7b0);});}return _7aa;});},"dojo/cache":function(){define(["./_base/kernel","./text"],function(dojo){return dojo.cache;});},"dijit/_OnDijitClickMixin":function(){define("dijit/_OnDijitClickMixin",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","dojo/_base/unload","dojo/_base/window","./a11yclick"],function(on,_7b1,keys,_7b2,has,_7b3,win,_7b4){var ret=_7b2("dijit._OnDijitClickMixin",null,{connect:function(obj,_7b5,_7b6){return this.inherited(arguments,[obj,_7b5=="ondijitclick"?_7b4:_7b5,_7b6]);}});ret.a11yclick=_7b4;return ret;});},"dijit/_FocusMixin":function(){define("dijit/_FocusMixin",["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(_7b7,_7b8,_7b9,lang){lang.extend(_7b8,{focused:false,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus();},_onBlur:function(){this.onBlur();}});return _7b9("dijit._FocusMixin",null,{_focusManager:_7b7});});},"dojox/date/islamic/Date":function(){define("dojox/date/islamic/Date",["dojo/_base/lang","dojo/_base/declare","dojo/date"],function(lang,_7ba,dd){var _7bb=_7ba("dojox.date.islamic.Date",null,{_date:0,_month:0,_year:0,_hours:0,_minutes:0,_seconds:0,_milliseconds:0,_day:0,_GREGORIAN_EPOCH:1721425.5,_ISLAMIC_EPOCH:1948439.5,constructor:function(){var len=arguments.length;if(!len){this.fromGregorian(new Date());}else{if(len==1){var arg0=arguments[0];if(typeof arg0=="number"){arg0=new Date(arg0);}if(arg0 instanceof Date){this.fromGregorian(arg0);}else{if(arg0==""){this._date=new Date("");}else{this._year=arg0._year;this._month=arg0._month;this._date=arg0._date;this._hours=arg0._hours;this._minutes=arg0._minutes;this._seconds=arg0._seconds;this._milliseconds=arg0._milliseconds;}}}else{if(len>=3){this._year+=arguments[0];this._month+=arguments[1];this._date+=arguments[2];this._hours+=arguments[3]||0;this._minutes+=arguments[4]||0;this._seconds+=arguments[5]||0;this._milliseconds+=arguments[6]||0;}}}},getDate:function(){return this._date;},getMonth:function(){return this._month;},getFullYear:function(){return this._year;},getDay:function(){return this.toGregorian().getDay();},getHours:function(){return this._hours;},getMinutes:function(){return this._minutes;},getSeconds:function(){return this._seconds;},getMilliseconds:function(){return this._milliseconds;},setDate:function(date){date=parseInt(date);if(date>0&&date<=this.getDaysInIslamicMonth(this._month,this._year)){this._date=date;}else{var _7bc;if(date>0){for(_7bc=this.getDaysInIslamicMonth(this._month,this._year);date>_7bc;date-=_7bc,_7bc=this.getDaysInIslamicMonth(this._month,this._year)){this._month++;if(this._month>=12){this._year++;this._month-=12;}}this._date=date;}else{for(_7bc=this.getDaysInIslamicMonth((this._month-1)>=0?(this._month-1):11,((this._month-1)>=0)?this._year:this._year-1);date<=0;_7bc=this.getDaysInIslamicMonth((this._month-1)>=0?(this._month-1):11,((this._month-1)>=0)?this._year:this._year-1)){this._month--;if(this._month<0){this._year--;this._month+=12;}date+=_7bc;}this._date=date;}}return this;},setFullYear:function(year){this._year=+year;},setMonth:function(_7bd){this._year+=Math.floor(_7bd/12);if(_7bd>0){this._month=Math.floor(_7bd%12);}else{this._month=Math.floor(((_7bd%12)+12)%12);}},setHours:function(){var _7be=arguments.length;var _7bf=0;if(_7be>=1){_7bf=parseInt(arguments[0]);}if(_7be>=2){this._minutes=parseInt(arguments[1]);}if(_7be>=3){this._seconds=parseInt(arguments[2]);}if(_7be==4){this._milliseconds=parseInt(arguments[3]);}while(_7bf>=24){this._date++;var _7c0=this.getDaysInIslamicMonth(this._month,this._year);if(this._date>_7c0){this._month++;if(this._month>=12){this._year++;this._month-=12;}this._date-=_7c0;}_7bf-=24;}this._hours=_7bf;},_addMinutes:function(_7c1){_7c1+=this._minutes;this.setMinutes(_7c1);this.setHours(this._hours+parseInt(_7c1/60));return this;},_addSeconds:function(_7c2){_7c2+=this._seconds;this.setSeconds(_7c2);this._addMinutes(parseInt(_7c2/60));return this;},_addMilliseconds:function(_7c3){_7c3+=this._milliseconds;this.setMilliseconds(_7c3);this._addSeconds(parseInt(_7c3/1000));return this;},setMinutes:function(_7c4){this._minutes=_7c4%60;return this;},setSeconds:function(_7c5){this._seconds=_7c5%60;return this;},setMilliseconds:function(_7c6){this._milliseconds=_7c6%1000;return this;},toString:function(){if(isNaN(this._date)){return "Invalidate Date";}else{var x=new Date();x.setHours(this._hours);x.setMinutes(this._minutes);x.setSeconds(this._seconds);x.setMilliseconds(this._milliseconds);return this._month+" "+this._date+" "+this._year+" "+x.toTimeString();}},toGregorian:function(){var _7c7=this._year;var _7c8=this._month;var _7c9=this._date;var _7ca=_7c9+Math.ceil(29.5*_7c8)+(_7c7-1)*354+Math.floor((3+(11*_7c7))/30)+this._ISLAMIC_EPOCH-1;var wjd=Math.floor(_7ca-0.5)+0.5,_7cb=wjd-this._GREGORIAN_EPOCH,_7cc=Math.floor(_7cb/146097),dqc=this._mod(_7cb,146097),cent=Math.floor(dqc/36524),_7cd=this._mod(dqc,36524),quad=Math.floor(_7cd/1461),_7ce=this._mod(_7cd,1461),_7cf=Math.floor(_7ce/365),year=(_7cc*400)+(cent*100)+(quad*4)+_7cf;if(!(cent==4||_7cf==4)){year++;}var _7d0=this._GREGORIAN_EPOCH+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400);var _7d1=wjd-_7d0;var tjd=(this._GREGORIAN_EPOCH-1)+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400)+Math.floor((739/12)+((dd.isLeapYear(new Date(year,3,1))?-1:-2))+1);var _7d2=((wjd<tjd)?0:(dd.isLeapYear(new Date(year,3,1))?1:2));var _7d3=Math.floor((((_7d1+_7d2)*12)+373)/367);var tjd2=(this._GREGORIAN_EPOCH-1)+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400)+Math.floor((((367*_7d3)-362)/12)+((_7d3<=2)?0:(dd.isLeapYear(new Date(year,_7d3,1))?-1:-2))+1);var day=(wjd-tjd2)+1;var _7d4=new Date(year,(_7d3-1),day,this._hours,this._minutes,this._seconds,this._milliseconds);return _7d4;},fromGregorian:function(_7d5){var date=new Date(_7d5);var _7d6=date.getFullYear(),_7d7=date.getMonth(),gDay=date.getDate();var _7d8=(this._GREGORIAN_EPOCH-1)+(365*(_7d6-1))+Math.floor((_7d6-1)/4)+(-Math.floor((_7d6-1)/100))+Math.floor((_7d6-1)/400)+Math.floor((((367*(_7d7+1))-362)/12)+(((_7d7+1)<=2)?0:(dd.isLeapYear(date)?-1:-2))+gDay);_7d8=Math.floor(_7d8)+0.5;var days=_7d8-this._ISLAMIC_EPOCH;var _7d9=Math.floor((30*days+10646)/10631);var _7da=Math.ceil((days-29-this._yearStart(_7d9))/29.5);_7da=Math.min(_7da,11);var hDay=Math.ceil(days-this._monthStart(_7d9,_7da))+1;this._date=hDay;this._month=_7da;this._year=_7d9;this._hours=date.getHours();this._minutes=date.getMinutes();this._seconds=date.getSeconds();this._milliseconds=date.getMilliseconds();this._day=date.getDay();return this;},valueOf:function(){return this.toGregorian().valueOf();},_yearStart:function(year){return (year-1)*354+Math.floor((3+11*year)/30);},_monthStart:function(year,_7db){return Math.ceil(29.5*_7db)+(year-1)*354+Math.floor((3+11*year)/30);},_civilLeapYear:function(year){return (14+11*year)%30<11;},getDaysInIslamicMonth:function(_7dc,year){var _7dd=0;_7dd=29+((_7dc+1)%2);if(_7dc==11&&this._civilLeapYear(year)){_7dd++;}return _7dd;},_mod:function(a,b){return a-(b*Math.floor(a/b));}});_7bb.getDaysInIslamicMonth=function(_7de){return new _7bb().getDaysInIslamicMonth(_7de.getMonth(),_7de.getFullYear());};return _7bb;});},"dijit/_Templated":function(){define("dijit/_Templated",["./_WidgetBase","./_TemplatedMixin","./_WidgetsInTemplateMixin","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/kernel"],function(_7df,_7e0,_7e1,_7e2,_7e3,lang,_7e4){lang.extend(_7df,{waiRole:"",waiState:""});return _7e3("dijit._Templated",[_7e0,_7e1],{widgetsInTemplate:false,constructor:function(){_7e4.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0");},_attachTemplateNodes:function(_7e5,_7e6){this.inherited(arguments);var _7e7=lang.isArray(_7e5)?_7e5:(_7e5.all||_7e5.getElementsByTagName("*"));var x=lang.isArray(_7e5)?0:-1;for(;x<_7e7.length;x++){var _7e8=(x==-1)?_7e5:_7e7[x];var role=_7e6(_7e8,"waiRole");if(role){_7e8.setAttribute("role",role);}var _7e9=_7e6(_7e8,"waiState");if(_7e9){_7e2.forEach(_7e9.split(/\s*,\s*/),function(_7ea){if(_7ea.indexOf("-")!=-1){var pair=_7ea.split("-");_7e8.setAttribute("aria-"+pair[0],pair[1]);}});}}}});});},"dijit/form/_ToggleButtonMixin":function(){define("dijit/form/_ToggleButtonMixin",["dojo/_base/declare","dojo/dom-attr"],function(_7eb,_7ec){return _7eb("dijit.form._ToggleButtonMixin",null,{checked:false,_aria_attr:"aria-pressed",_onClick:function(evt){var _7ed=this.checked;this._set("checked",!_7ed);var ret=this.inherited(arguments);this.set("checked",ret?this.checked:_7ed);return ret;},_setCheckedAttr:function(_7ee,_7ef){this._set("checked",_7ee);var node=this.focusNode||this.domNode;_7ec.set(node,"checked",!!_7ee);if(_7ee){node.setAttribute("checked","");}else{node.removeAttribute("checked");}node.setAttribute(this._aria_attr,String(_7ee));this._handleOnChange(_7ee,_7ef);},reset:function(){this._hasBeenBlurred=false;this.set("checked",this.params.checked||false);}});});},"dijit/focus":function(){define("dijit/focus",["dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/Evented","dojo/_base/lang","dojo/on","dojo/ready","dojo/sniff","dojo/Stateful","dojo/_base/unload","dojo/_base/window","dojo/window","./a11y","./registry","./main"],function(_7f0,_7f1,dom,_7f2,_7f3,_7f4,lang,on,_7f5,has,_7f6,_7f7,win,_7f8,a11y,_7f9,_7fa){var _7fb=_7f1([_7f6,_7f4],{curNode:null,activeStack:[],constructor:function(){var _7fc=lang.hitch(this,function(node){if(dom.isDescendant(this.curNode,node)){this.set("curNode",null);}if(dom.isDescendant(this.prevNode,node)){this.set("prevNode",null);}});_7f0.before(_7f3,"empty",_7fc);_7f0.before(_7f3,"destroy",_7fc);},registerIframe:function(_7fd){return this.registerWin(_7fd.contentWindow,_7fd);},registerWin:function(_7fe,_7ff){var _800=this;var _801=function(evt){_800._justMouseDowned=true;setTimeout(function(){_800._justMouseDowned=false;},0);if(has("ie")&&evt&&evt.srcElement&&evt.srcElement.parentNode==null){return;}_800._onTouchNode(_7ff||evt.target||evt.srcElement,"mouse");};var doc=has("ie")?_7fe.document.documentElement:_7fe.document;if(doc){if(has("ie")){_7fe.document.body.attachEvent("onmousedown",_801);var _802=function(evt){var tag=evt.srcElement.tagName.toLowerCase();if(tag=="#document"||tag=="body"){return;}if(a11y.isTabNavigable(evt.srcElement)){_800._onFocusNode(_7ff||evt.srcElement);}else{_800._onTouchNode(_7ff||evt.srcElement);}};doc.attachEvent("onfocusin",_802);var _803=function(evt){_800._onBlurNode(_7ff||evt.srcElement);};doc.attachEvent("onfocusout",_803);return {remove:function(){_7fe.document.detachEvent("onmousedown",_801);doc.detachEvent("onfocusin",_802);doc.detachEvent("onfocusout",_803);doc=null;}};}else{doc.body.addEventListener("mousedown",_801,true);doc.body.addEventListener("touchstart",_801,true);var _804=function(evt){_800._onFocusNode(_7ff||evt.target);};doc.addEventListener("focus",_804,true);var _805=function(evt){_800._onBlurNode(_7ff||evt.target);};doc.addEventListener("blur",_805,true);return {remove:function(){doc.body.removeEventListener("mousedown",_801,true);doc.body.removeEventListener("touchstart",_801,true);doc.removeEventListener("focus",_804,true);doc.removeEventListener("blur",_805,true);doc=null;}};}}},_onBlurNode:function(node){if(this._clearFocusTimer){clearTimeout(this._clearFocusTimer);}this._clearFocusTimer=setTimeout(lang.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null);}),0);if(this._justMouseDowned){return;}if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);}this._clearActiveWidgetsTimer=setTimeout(lang.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([]);}),0);},_onTouchNode:function(node,by){if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);delete this._clearActiveWidgetsTimer;}var _806=[];try{while(node){var _807=_7f2.get(node,"dijitPopupParent");if(_807){node=_7f9.byId(_807).domNode;}else{if(node.tagName&&node.tagName.toLowerCase()=="body"){if(node===win.body()){break;}node=_7f8.get(node.ownerDocument).frameElement;}else{var id=node.getAttribute&&node.getAttribute("widgetId"),_808=id&&_7f9.byId(id);if(_808&&!(by=="mouse"&&_808.get("disabled"))){_806.unshift(id);}node=node.parentNode;}}}}catch(e){}this._setStack(_806,by);},_onFocusNode:function(node){if(!node){return;}if(node.nodeType==9){return;}if(this._clearFocusTimer){clearTimeout(this._clearFocusTimer);delete this._clearFocusTimer;}this._onTouchNode(node);if(node==this.curNode){return;}this.set("prevNode",this.curNode);this.set("curNode",node);},_setStack:function(_809,by){var _80a=this.activeStack;this.set("activeStack",_809);for(var _80b=0;_80b<Math.min(_80a.length,_809.length);_80b++){if(_80a[_80b]!=_809[_80b]){break;}}var _80c;for(var i=_80a.length-1;i>=_80b;i--){_80c=_7f9.byId(_80a[i]);if(_80c){_80c._hasBeenBlurred=true;_80c.set("focused",false);if(_80c._focusManager==this){_80c._onBlur(by);}this.emit("widget-blur",_80c,by);}}for(i=_80b;i<_809.length;i++){_80c=_7f9.byId(_809[i]);if(_80c){_80c.set("focused",true);if(_80c._focusManager==this){_80c._onFocus(by);}this.emit("widget-focus",_80c,by);}}},focus:function(node){if(node){try{node.focus();}catch(e){}}}});var _80d=new _7fb();_7f5(function(){var _80e=_80d.registerWin(_7f8.get(win.doc));if(has("ie")){_7f7.addOnWindowUnload(function(){if(_80e){_80e.remove();_80e=null;}});}});_7fa.focus=function(node){_80d.focus(node);};for(var attr in _80d){if(!/^_/.test(attr)){_7fa.focus[attr]=typeof _80d[attr]=="function"?lang.hitch(_80d,attr):_80d[attr];}}_80d.watch(function(attr,_80f,_810){_7fa.focus[attr]=_810;});return _80d;});},"esri/dijit/editing/Util":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel"],function(lang,_811,has,_812){var util={};util={findFeatures:function(ids,_813,_814){var _815=_813.objectIdField;var _816=_813.graphics;var _817=_811.filter(_816,function(_818){return _811.some(ids,function(id){return _818.attributes[_815]===id.objectId;});});if(_814){_814(_817);}else{return _817;}},getSelection:function(_819){var _81a=[];_811.forEach(_819,function(_81b){var _81c=_81b.getSelectedFeatures();_811.forEach(_81c,function(_81d){_81a.push(_81d);});});return _81a;}};if(has("extend-esri")){lang.setObject("dijit.editing.Util.LayerHelper",util,_812);}return util;});},"dijit/form/_ListBase":function(){define("dijit/form/_ListBase",["dojo/_base/declare","dojo/on","dojo/window"],function(_81e,on,_81f){return _81e("dijit.form._ListBase",null,{selected:null,_listConnect:function(_820,_821){var self=this;return self.own(on(self.containerNode,on.selector(function(_822,_823,_824){return _822.parentNode==_824;},_820),function(evt){evt.preventDefault();self[_821](evt,this);}));},selectFirstNode:function(){var _825=this.containerNode.firstChild;while(_825&&_825.style.display=="none"){_825=_825.nextSibling;}this._setSelectedAttr(_825);},selectLastNode:function(){var last=this.containerNode.lastChild;while(last&&last.style.display=="none"){last=last.previousSibling;}this._setSelectedAttr(last);},selectNextNode:function(){var _826=this.selected;if(!_826){this.selectFirstNode();}else{var next=_826.nextSibling;while(next&&next.style.display=="none"){next=next.nextSibling;}if(!next){this.selectFirstNode();}else{this._setSelectedAttr(next);}}},selectPreviousNode:function(){var _827=this.selected;if(!_827){this.selectLastNode();}else{var prev=_827.previousSibling;while(prev&&prev.style.display=="none"){prev=prev.previousSibling;}if(!prev){this.selectLastNode();}else{this._setSelectedAttr(prev);}}},_setSelectedAttr:function(node){if(this.selected!=node){var _828=this.selected;if(_828){this.onDeselect(_828);this.selected=null;}if(node){this.selected=node;_81f.scrollIntoView(node);this.onSelect(node);}}else{if(node){this.onSelect(node);}}}});});},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(_829,_82a,_82b){var base=null;return _829("dojo.store.Memory",base,{constructor:function(_82c){for(var i in _82c){this[i]=_82c[i];}this.setData(this.data||[]);},data:null,idProperty:"id",index:null,queryEngine:_82b,get:function(id){return this.data[this.index[id]];},getIdentity:function(_82d){return _82d[this.idProperty];},put:function(_82e,_82f){var data=this.data,_830=this.index,_831=this.idProperty;var id=_82e[_831]=(_82f&&"id" in _82f)?_82f.id:_831 in _82e?_82e[_831]:Math.random();if(id in _830){if(_82f&&_82f.overwrite===false){throw new Error("Object already exists");}data[_830[id]]=_82e;}else{_830[id]=data.push(_82e)-1;}return id;},add:function(_832,_833){(_833=_833||{}).overwrite=false;return this.put(_832,_833);},remove:function(id){var _834=this.index;var data=this.data;if(id in _834){data.splice(_834[id],1);this.setData(data);return true;}},query:function(_835,_836){return _82a(this.queryEngine(_835,_836)(this.data));},setData:function(data){if(data.items){this.idProperty=data.identifier;data=this.data=data.items;}else{this.data=data;}this.index={};for(var i=0,l=data.length;i<l;i++){this.index[data[i][this.idProperty]]=i;}}});});},"dijit/_editor/plugins/LinkDialog":function(){define("dijit/_editor/plugins/LinkDialog",["require","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/_base/query","dojo/string","../../_Widget","../_Plugin","../../form/DropDownButton","../range"],function(_837,_838,_839,keys,lang,has,_83a,_83b,_83c,_83d,_83e,_83f){var _840=_838("dijit._editor.plugins.LinkDialog",_83d,{buttonClass:_83e,useDefaultCommand:false,urlRegExp:"((https?|ftps?|file)\\://|./|../|/|)(/[a-zA-Z]{1,1}:/|)(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)*(?:[a-zA-Z](?:[-\\da-zA-Z]{0,80}[\\da-zA-Z])?)\\.?)|(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])|(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]|(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]|(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])|0[xX]0*[\\da-fA-F]{1,8}|([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}|([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])))(\\:\\d+)?(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]{0,}(?:\\?[^?#\\s/]*)?(?:#.*)?)?)?",emailRegExp:"<?(mailto\\:)([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+"+"@"+"((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)|localhost|^[^-][a-zA-Z0-9_-]*>?",htmlTemplate:"<a href=\"${urlInput}\" _djrealurl=\"${urlInput}\""+" target=\"${targetSelect}\""+">${textInput}</a>",tag:"a",_hostRxp:/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,_userAtRxp:/^([!#-'*+\-\/-9=?A-Z^-~]+[.])*[!#-'*+\-\/-9=?A-Z^-~]+@/i,linkDialogTemplate:["<table role='presentation'><tr><td>","<label for='${id}_urlInput'>${url}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='true' "+"id='${id}_urlInput' name='urlInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_textInput'>${text}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='true' id='${id}_textInput' "+"name='textInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_targetSelect'>${target}</label>","</td><td>","<select id='${id}_targetSelect' name='targetSelect' data-dojo-type='dijit.form.Select'>","<option selected='selected' value='_self'>${currentWindow}</option>","<option value='_blank'>${newWindow}</option>","<option value='_top'>${topWindow}</option>","<option value='_parent'>${parentWindow}</option>","</select>","</td></tr><tr><td colspan='2'>","<button data-dojo-type='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button>","<button data-dojo-type='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button>","</td></tr></table>"].join(""),_initButton:function(){this.inherited(arguments);this.button.loadDropDown=lang.hitch(this,"_loadDropDown");this._connectTagEvents();},_loadDropDown:function(_841){_837(["dojo/i18n","../../TooltipDialog","../../registry","../../form/Button","../../form/Select","../../form/ValidationTextBox","dojo/i18n!../../nls/common","dojo/i18n!../nls/LinkDialog"],lang.hitch(this,function(i18n,_842,_843){var _844=this;this.tag=this.command=="insertImage"?"img":"a";var _845=lang.delegate(i18n.getLocalization("dijit","common",this.lang),i18n.getLocalization("dijit._editor","LinkDialog",this.lang));var _846=(this.dropDown=this.button.dropDown=new _842({title:_845[this.command+"Title"],ownerDocument:this.editor.ownerDocument,dir:this.editor.dir,execute:lang.hitch(this,"setValue"),onOpen:function(){_844._onOpenDialog();_842.prototype.onOpen.apply(this,arguments);},onCancel:function(){setTimeout(lang.hitch(_844,"_onCloseDialog"),0);}}));_845.urlRegExp=this.urlRegExp;_845.id=_843.getUniqueId(this.editor.id);this._uniqueId=_845.id;this._setContent(_846.title+"<div style='border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'></div>"+_83b.substitute(this.linkDialogTemplate,_845));_846.startup();this._urlInput=_843.byId(this._uniqueId+"_urlInput");this._textInput=_843.byId(this._uniqueId+"_textInput");this._setButton=_843.byId(this._uniqueId+"_setButton");this.connect(_843.byId(this._uniqueId+"_cancelButton"),"onClick",function(){this.dropDown.onCancel();});if(this._urlInput){this.connect(this._urlInput,"onChange","_checkAndFixInput");}if(this._textInput){this.connect(this._textInput,"onChange","_checkAndFixInput");}this._urlRegExp=new RegExp("^"+this.urlRegExp+"$","i");this._emailRegExp=new RegExp("^"+this.emailRegExp+"$","i");this._urlInput.isValid=lang.hitch(this,function(){var _847=this._urlInput.get("value");return this._urlRegExp.test(_847)||this._emailRegExp.test(_847);});this.connect(_846.domNode,"onkeypress",function(e){if(e&&e.charOrCode==keys.ENTER&&!e.shiftKey&&!e.metaKey&&!e.ctrlKey&&!e.altKey){if(!this._setButton.get("disabled")){_846.onExecute();_846.execute(_846.get("value"));}}});_841();}));},_checkAndFixInput:function(){var self=this;var url=this._urlInput.get("value");var _848=function(url){var _849=false;var _84a=false;if(url&&url.length>1){url=lang.trim(url);if(url.indexOf("mailto:")!==0){if(url.indexOf("/")>0){if(url.indexOf("://")===-1){if(url.charAt(0)!=="/"&&url.indexOf("./")&&url.indexOf("../")!==0){if(self._hostRxp.test(url)){_849=true;}}}}else{if(self._userAtRxp.test(url)){_84a=true;}}}}if(_849){self._urlInput.set("value","http://"+url);}if(_84a){self._urlInput.set("value","mailto:"+url);}self._setButton.set("disabled",!self._isValid());};if(this._delayedCheck){clearTimeout(this._delayedCheck);this._delayedCheck=null;}this._delayedCheck=setTimeout(function(){_848(url);},250);},_connectTagEvents:function(){this.editor.onLoadDeferred.then(lang.hitch(this,function(){this.connect(this.editor.editNode,"ondblclick",this._onDblClick);}));},_isValid:function(){return this._urlInput.isValid()&&this._textInput.isValid();},_setContent:function(_84b){this.dropDown.set({parserScope:"dojo",content:_84b});},_checkValues:function(args){if(args&&args.urlInput){args.urlInput=args.urlInput.replace(/"/g,"&quot;");}return args;},setValue:function(args){this._onCloseDialog();if(has("ie")<9){var sel=_83f.getSelection(this.editor.window);var _84c=sel.getRangeAt(0);var a=_84c.endContainer;if(a.nodeType===3){a=a.parentNode;}if(a&&(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){a=this.editor._sCall("getSelectedElement",[this.tag]);}if(a&&(a.nodeName&&a.nodeName.toLowerCase()===this.tag)){if(this.editor.queryCommandEnabled("unlink")){this.editor._sCall("selectElementChildren",[a]);this.editor.execCommand("unlink");}}}args=this._checkValues(args);this.editor.execCommand("inserthtml",_83b.substitute(this.htmlTemplate,args));_83a("a",this.editor.document).forEach(function(a){if(!a.innerHTML&&!_839.has(a,"name")){a.parentNode.removeChild(a);}},this);},_onCloseDialog:function(){this.editor.focus();},_getCurrentValues:function(a){var url,text,_84d;if(a&&a.tagName.toLowerCase()===this.tag){url=a.getAttribute("_djrealurl")||a.getAttribute("href");_84d=a.getAttribute("target")||"_self";text=a.textContent||a.innerText;this.editor._sCall("selectElement",[a,true]);}else{text=this.editor._sCall("getSelectedText");}return {urlInput:url||"",textInput:text||"",targetSelect:_84d||""};},_onOpenDialog:function(){var a,b,fc;if(has("ie")){var sel=_83f.getSelection(this.editor.window);if(sel.rangeCount){var _84e=sel.getRangeAt(0);a=_84e.endContainer;if(a.nodeType===3){a=a.parentNode;}if(a&&(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){a=this.editor._sCall("getSelectedElement",[this.tag]);}if(!a||(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){b=this.editor._sCall("getAncestorElement",[this.tag]);if(b&&(b.nodeName&&b.nodeName.toLowerCase()==this.tag)){a=b;this.editor._sCall("selectElement",[a]);}else{if(_84e.startContainer===_84e.endContainer){fc=_84e.startContainer.firstChild;if(fc&&(fc.nodeName&&fc.nodeName.toLowerCase()==this.tag)){a=fc;this.editor._sCall("selectElement",[a]);}}}}}}else{a=this.editor._sCall("getAncestorElement",[this.tag]);}this.dropDown.reset();this._setButton.set("disabled",true);this.dropDown.set("value",this._getCurrentValues(a));},_onDblClick:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag&&_839.get(t,"href")){var _84f=this.editor;this.editor._sCall("selectElement",[t]);_84f.onDisplayChanged();if(_84f._updateTimer){_84f._updateTimer.remove();delete _84f._updateTimer;}_84f.onNormalizedDisplayChanged();var _850=this.button;setTimeout(function(){_850.set("disabled",false);_850.loadAndOpenDropDown().then(function(){if(_850.dropDown.focus){_850.dropDown.focus();}});},10);}}}});var _851=_838("dijit._editor.plugins.ImgLinkDialog",[_840],{linkDialogTemplate:["<table role='presentation'><tr><td>","<label for='${id}_urlInput'>${url}</label>","</td><td>","<input dojoType='dijit.form.ValidationTextBox' regExp='${urlRegExp}' "+"required='true' id='${id}_urlInput' name='urlInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_textInput'>${text}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='false' id='${id}_textInput' "+"name='textInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","</td><td>","</td></tr><tr><td colspan='2'>","<button data-dojo-type='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button>","<button data-dojo-type='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button>","</td></tr></table>"].join(""),htmlTemplate:"<img src=\"${urlInput}\" _djrealurl=\"${urlInput}\" alt=\"${textInput}\" />",tag:"img",_getCurrentValues:function(img){var url,text;if(img&&img.tagName.toLowerCase()===this.tag){url=img.getAttribute("_djrealurl")||img.getAttribute("src");text=img.getAttribute("alt");this.editor._sCall("selectElement",[img,true]);}else{text=this.editor._sCall("getSelectedText",[]);}return {urlInput:url||"",textInput:text||""};},_isValid:function(){return this._urlInput.isValid();},_connectTagEvents:function(){this.inherited(arguments);this.editor.onLoadDeferred.then(lang.hitch(this,function(){this.connect(this.editor.editNode,"onmousedown",this._selectTag);}));},_selectTag:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag){this.editor._sCall("selectElement",[t]);}}},_checkValues:function(args){if(args&&args.urlInput){args.urlInput=args.urlInput.replace(/"/g,"&quot;");}if(args&&args.textInput){args.textInput=args.textInput.replace(/"/g,"&quot;");}return args;},_onDblClick:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag&&_839.get(t,"src")){var _852=this.editor;this.editor._sCall("selectElement",[t]);_852.onDisplayChanged();if(_852._updateTimer){_852._updateTimer.remove();delete _852._updateTimer;}_852.onNormalizedDisplayChanged();var _853=this.button;setTimeout(function(){_853.set("disabled",false);_853.loadAndOpenDropDown().then(function(){if(_853.dropDown.focus){_853.dropDown.focus();}});},10);}}}});_83d.registry["createLink"]=function(){return new _840({command:"createLink"});};_83d.registry["insertImage"]=function(){return new _851({command:"insertImage"});};_840.ImgLinkDialog=_851;return _840;});},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(lang,_854){var _855={};lang.setObject("dojo.date.stamp",_855);_855.fromISOString=function(_856,_857){if(!_855._isoRegExp){_855._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _858=_855._isoRegExp.exec(_856),_859=null;if(_858){_858.shift();if(_858[1]){_858[1]--;}if(_858[6]){_858[6]*=1000;}if(_857){_857=new Date(_857);_854.forEach(_854.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _857["get"+prop]();}),function(_85a,_85b){_858[_85b]=_858[_85b]||_85a;});}_859=new Date(_858[0]||1970,_858[1]||0,_858[2]||1,_858[3]||0,_858[4]||0,_858[5]||0,_858[6]||0);if(_858[0]<100){_859.setFullYear(_858[0]||1970);}var _85c=0,_85d=_858[7]&&_858[7].charAt(0);if(_85d!="Z"){_85c=((_858[8]||0)*60)+(Number(_858[9])||0);if(_85d!="-"){_85c*=-1;}}if(_85d){_85c-=_859.getTimezoneOffset();}if(_85c){_859.setTime(_859.getTime()+_85c*60000);}}return _859;};_855.toISOString=function(_85e,_85f){var _860=function(n){return (n<10)?"0"+n:n;};_85f=_85f||{};var _861=[],_862=_85f.zulu?"getUTC":"get",date="";if(_85f.selector!="time"){var year=_85e[_862+"FullYear"]();date=["0000".substr((year+"").length)+year,_860(_85e[_862+"Month"]()+1),_860(_85e[_862+"Date"]())].join("-");}_861.push(date);if(_85f.selector!="date"){var time=[_860(_85e[_862+"Hours"]()),_860(_85e[_862+"Minutes"]()),_860(_85e[_862+"Seconds"]())].join(":");var _863=_85e[_862+"Milliseconds"]();if(_85f.milliseconds){time+="."+(_863<100?"0":"")+_860(_863);}if(_85f.zulu){time+="Z";}else{if(_85f.selector!="time"){var _864=_85e.getTimezoneOffset();var _865=Math.abs(_864);time+=(_864>0?"-":"+")+_860(Math.floor(_865/60))+":"+_860(_865%60);}}_861.push(time);}return _861.join("T");};return _855;});},"url:dijit/templates/Calendar.html":"<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" aria-labelledby=\"${id}_mddb ${id}_year\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' colspan=\"5\">\n\t\t\t\t<div data-dojo-attach-point=\"monthNode\">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role=\"row\">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point=\"dateRowsNode\" data-dojo-attach-event=\"onclick: _onDayClick\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\" role=\"presentation\">\n\t\t\t\t<div class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span data-dojo-attach-point=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\" role=\"button\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" role=\"button\" id=\"${id}_year\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\" role=\"button\"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n","dijit/form/MappedTextBox":function(){define("dijit/form/MappedTextBox",["dojo/_base/declare","dojo/dom-construct","./ValidationTextBox"],function(_866,_867,_868){return _866("dijit.form.MappedTextBox",_868,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting="";},_setNameAttr:null,serialize:function(val){return val.toString?val.toString():"";},toString:function(){var val=this.filter(this.get("value"));return val!=null?(typeof val=="string"?val:this.serialize(val,this.constraints)):"";},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);this.valueNode=_867.place("<input type='hidden'"+(this.name?" name=\""+this.name.replace(/"/g,"&quot;")+"\"":"")+"/>",this.textbox,"after");},reset:function(){this.valueNode.value="";this.inherited(arguments);}});});},"dijit/form/DataList":function(){define("dijit/form/DataList",["dojo/_base/declare","dojo/dom","dojo/_base/lang","dojo/query","dojo/store/Memory","../registry"],function(_869,dom,lang,_86a,_86b,_86c){function _86d(_86e){return {id:_86e.value,value:_86e.value,name:lang.trim(_86e.innerText||_86e.textContent||"")};};return _869("dijit.form.DataList",_86b,{constructor:function(_86f,_870){this.domNode=dom.byId(_870);lang.mixin(this,_86f);if(this.id){_86c.add(this);}this.domNode.style.display="none";this.inherited(arguments,[{data:_86a("option",this.domNode).map(_86d)}]);},destroy:function(){_86c.remove(this.id);},fetchSelectedItem:function(){var _871=_86a("> option[selected]",this.domNode)[0]||_86a("> option",this.domNode)[0];return _871&&_86d(_871);}});});},"dijit/form/_Spinner":function(){require({cache:{"url:dijit/form/templates/Spinner.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitButtonNode dijitSpinnerButtonContainer\"\n\t\t><input class=\"dijitReset dijitInputField dijitSpinnerButtonInner\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t/><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton\"\n\t\t\tdata-dojo-attach-point=\"upArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9650; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\tdata-dojo-attach-point=\"downArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' data-dojo-attach-point=\"textbox,focusNode\" type=\"${type}\" data-dojo-attach-event=\"onkeypress:_onKeyPress\"\n\t\t\trole=\"spinbutton\" autocomplete=\"off\" ${!nameAttrSetting}\n\t/></div\n></div>\n"}});define("dijit/form/_Spinner",["dojo/_base/declare","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/mouse","../typematic","./RangeBoundTextBox","dojo/text!./templates/Spinner.html","./_TextBoxMixin"],function(_872,_873,keys,lang,has,_874,_875,_876,_877,_878){return _872("dijit.form._Spinner",_876,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:_877,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{"upArrowNode":"dijitUpArrowButton","downArrowNode":"dijitDownArrowButton"},adjust:function(val){return val;},_arrowPressed:function(_879,_87a,_87b){if(this.disabled||this.readOnly){return;}this._setValueAttr(this.adjust(this.get("value"),_87a*_87b),false);_878.selectInputText(this.textbox,this.textbox.value.length);},_arrowReleased:function(){this._wheelTimer=null;},_typematicCallback:function(_87c,node,evt){var inc=this.smallDelta;if(node==this.textbox){var key=evt.charOrCode;inc=(key==keys.PAGE_UP||key==keys.PAGE_DOWN)?this.largeDelta:this.smallDelta;node=(key==keys.UP_ARROW||key==keys.PAGE_UP)?this.upArrowNode:this.downArrowNode;}if(_87c==-1){this._arrowReleased(node);}else{this._arrowPressed(node,(node==this.upArrowNode)?1:-1,inc);}},_wheelTimer:null,_mouseWheeled:function(evt){_873.stop(evt);var _87d=evt.wheelDelta/120;if(Math.floor(_87d)!=_87d){_87d=evt.wheelDelta>0?1:-1;}var _87e=evt.detail?(evt.detail*-1):_87d;if(_87e!==0){var node=this[(_87e>0?"upArrowNode":"downArrowNode")];this._arrowPressed(node,_87e,this.smallDelta);if(this._wheelTimer){this._wheelTimer.remove();}this._wheelTimer=this.defer(function(){this._arrowReleased(node);},50);}},_setConstraintsAttr:function(_87f){this.inherited(arguments);if(this.focusNode){if(this.constraints.min!==undefined){this.focusNode.setAttribute("aria-valuemin",this.constraints.min);}else{this.focusNode.removeAttribute("aria-valuemin");}if(this.constraints.max!==undefined){this.focusNode.setAttribute("aria-valuemax",this.constraints.max);}else{this.focusNode.removeAttribute("aria-valuemax");}}},_setValueAttr:function(_880,_881){this.focusNode.setAttribute("aria-valuenow",_880);this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,_874.wheel,"_mouseWheeled");this.own(_875.addListener(this.upArrowNode,this.textbox,{charOrCode:keys.UP_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_875.addListener(this.downArrowNode,this.textbox,{charOrCode:keys.DOWN_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_875.addListener(this.upArrowNode,this.textbox,{charOrCode:keys.PAGE_UP,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_875.addListener(this.downArrowNode,this.textbox,{charOrCode:keys.PAGE_DOWN,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));}});});},"esri/layers/SnapshotMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/SpatialReference","esri/tasks/query","esri/layers/RenderMode"],function(_882,lang,has,_883,_884,_885,_886){var _887=_882([_886],{declaredClass:"esri.layers._SnapshotMode",constructor:function(_888){this.featureLayer=_888;this._featureMap={};this._drawFeatures=lang.hitch(this,this._drawFeatures);this._queryErrorHandler=lang.hitch(this,this._queryErrorHandler);},startup:function(){if(this.featureLayer._collection){this._applyTimeFilter();}else{this._fetchAll();}},propertyChangeHandler:function(type){if(this._init){if(type){if(this.featureLayer._collection){console.log("FeatureLayer: layer created by value (from a feature collection) does not support definition expressions and time definitions. Layer id = "+this.featureLayer.id);}else{this._fetchAll();}}else{this._applyTimeFilter();}}},drawFeature:function(_889){var _88a=this.featureLayer,_88b=_88a.objectIdField,oid=_889.attributes[_88b];this._addFeatureIIf(oid,_889);this._incRefCount(oid);},resume:function(){this.propertyChangeHandler(0);},refresh:function(){var _88c=this.featureLayer;if(_88c._collection){_88c._fireUpdateStart();_88c._refresh(true);_88c._fireUpdateEnd();}else{this._fetchAll();}},_getRequestId:function(_88d){var id="_"+_88d.name+_88d.layerId+_88d._ulid;return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_fetchAll:function(){var _88e=this.featureLayer;if(_88e._collection){return;}_88e._fireUpdateStart();this._clearIIf();this._sendRequest();},_sendRequest:function(){var map=this.map,_88f=this.featureLayer,_890=_88f.getDefinitionExpression();var _891=new _885();_891.outFields=_88f._getOutFields();_891.where=_890||"1=1";_891.returnGeometry=true;_891.outSpatialReference=new _884(map.spatialReference.toJson());_891.timeExtent=_88f.getTimeDefinition();_891.maxAllowableOffset=_88f._maxOffset;if(_88f._ts){_891._ts=(new Date()).getTime();}var _892;if(_88f._usePatch){_892=this._getRequestId(_88f);this._cancelPendingRequest(null,_892);}_88f._task.execute(_891,this._drawFeatures,this._queryErrorHandler,_892);},_drawFeatures:function(_893){this._purgeRequests();var _894=_893.features,_895=this.featureLayer,_896=_895.objectIdField,i,len=_894.length,_897,oid;for(i=0;i<len;i++){_897=_894[i];oid=_897.attributes[_896];this._addFeatureIIf(oid,_897);this._incRefCount(oid);}this._applyTimeFilter(true);_895._fireUpdateEnd(null,_893.exceededTransferLimit?{queryLimitExceeded:true}:null);if(_893.exceededTransferLimit){_895.onQueryLimitExceeded();}},_queryErrorHandler:function(err){this._purgeRequests();var _898=this.featureLayer;_898._errorHandler(err);_898._fireUpdateEnd(err);}});if(has("extend-esri")){lang.setObject("layers._SnapshotMode",_887,_883);}return _887;});},"dijit/form/_ButtonMixin":function(){define("dijit/form/_ButtonMixin",["dojo/_base/declare","dojo/dom","dojo/_base/event","../registry"],function(_899,dom,_89a,_89b){return _899("dijit.form._ButtonMixin",null,{label:"",type:"button",_onClick:function(e){if(this.disabled){_89a.stop(e);return false;}var _89c=this.onClick(e)===false;if(!_89c&&this.type=="submit"&&!(this.valueNode||this.focusNode).form){for(var node=this.domNode;node.parentNode;node=node.parentNode){var _89d=_89b.byNode(node);if(_89d&&typeof _89d._onSubmit=="function"){_89d._onSubmit(e);_89c=true;break;}}}if(_89c){e.preventDefault();}return !_89c;},postCreate:function(){this.inherited(arguments);dom.setSelectable(this.focusNode,false);},onClick:function(){return true;},_setLabelAttr:function(_89e){this._set("label",_89e);(this.containerNode||this.focusNode).innerHTML=_89e;}});});},"dijit/form/_FormWidget":function(){define("dijit/form/_FormWidget",["dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/ready","../_Widget","../_CssStateMixin","../_TemplatedMixin","./_FormWidgetMixin"],function(_89f,has,_8a0,_8a1,_8a2,_8a3,_8a4,_8a5){if(has("dijit-legacy-requires")){_8a1(0,function(){var _8a6=["dijit/form/_FormValueWidget"];require(_8a6);});}return _89f("dijit.form._FormWidget",[_8a2,_8a4,_8a3,_8a5],{setDisabled:function(_8a7){_8a0.deprecated("setDisabled("+_8a7+") is deprecated. Use set('disabled',"+_8a7+") instead.","","2.0");this.set("disabled",_8a7);},setValue:function(_8a8){_8a0.deprecated("dijit.form._FormWidget:setValue("+_8a8+") is deprecated.  Use set('value',"+_8a8+") instead.","","2.0");this.set("value",_8a8);},getValue:function(){_8a0.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value");},postMixInProperties:function(){this.nameAttrSetting=this.name?("name=\""+this.name.replace(/"/g,"&quot;")+"\""):"";this.inherited(arguments);},_setTypeAttr:null});});},"dijit/form/NumberSpinner":function(){define("dijit/form/NumberSpinner",["dojo/_base/declare","dojo/_base/event","dojo/keys","./_Spinner","./NumberTextBox"],function(_8a9,_8aa,keys,_8ab,_8ac){return _8a9("dijit.form.NumberSpinner",[_8ab,_8ac.Mixin],{baseClass:"dijitTextBox dijitSpinner dijitNumberTextBox",adjust:function(val,_8ad){var tc=this.constraints,v=isNaN(val),_8ae=!isNaN(tc.max),_8af=!isNaN(tc.min);if(v&&_8ad!=0){val=(_8ad>0)?_8af?tc.min:_8ae?tc.max:0:_8ae?this.constraints.max:_8af?tc.min:0;}var _8b0=val+_8ad;if(v||isNaN(_8b0)){return val;}if(_8ae&&(_8b0>tc.max)){_8b0=tc.max;}if(_8af&&(_8b0<tc.min)){_8b0=tc.min;}return _8b0;},_onKeyPress:function(e){if((e.charOrCode==keys.HOME||e.charOrCode==keys.END)&&!(e.ctrlKey||e.altKey||e.metaKey)&&typeof this.get("value")!="undefined"){var _8b1=this.constraints[(e.charOrCode==keys.HOME?"min":"max")];if(typeof _8b1=="number"){this._setValueAttr(_8b1,false);}_8aa.stop(e);}}});});},"dijit/form/FilteringSelect":function(){define("dijit/form/FilteringSelect",["dojo/data/util/filter","dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(_8b2,_8b3,lang,when,_8b4,_8b5){return _8b3("dijit.form.FilteringSelect",[_8b4,_8b5],{required:true,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened;},isValid:function(){return !!this.item||(!this.required&&this.get("displayedValue")=="");},_refreshState:function(){if(!this.searchTimer){this.inherited(arguments);}},_callbackSetLabel:function(_8b6,_8b7,_8b8,_8b9){if((_8b7&&_8b7[this.searchAttr]!==this._lastQuery)||(!_8b7&&_8b6.length&&this.store.getIdentity(_8b6[0])!=this._lastQuery)){return;}if(!_8b6.length){this.set("value","",_8b9||(_8b9===undefined&&!this.focused),this.textbox.value,null);}else{this.set("item",_8b6[0],_8b9);}},_openResultList:function(_8ba,_8bb,_8bc){if(_8bb[this.searchAttr]!==this._lastQuery){return;}this.inherited(arguments);if(this.item===undefined){this.validate(true);}},_getValueAttr:function(){return this.valueNode.value;},_getValueField:function(){return "value";},_setValueAttr:function(_8bd,_8be,_8bf,item){if(!this._onChangeActive){_8be=null;}if(item===undefined){if(_8bd===null||_8bd===""){_8bd="";if(!lang.isString(_8bf)){this._setDisplayedValueAttr(_8bf||"",_8be);return;}}var self=this;this._lastQuery=_8bd;when(this.store.get(_8bd),function(item){self._callbackSetLabel(item?[item]:[],undefined,undefined,_8be);});}else{this.valueNode.value=_8bd;this.inherited(arguments);}},_setItemAttr:function(item,_8c0,_8c1){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value;},_getDisplayQueryString:function(text){return text.replace(/([\\\*\?])/g,"\\$1");},_setDisplayedValueAttr:function(_8c2,_8c3){if(_8c2==null){_8c2="";}if(!this._created){if(!("displayedValue" in this.params)){return;}_8c3=false;}if(this.store){this.closeDropDown();var _8c4=lang.clone(this.query);var qs=this._getDisplayQueryString(_8c2),q;if(this.store._oldAPI){q=qs;}else{q=_8b2.patternToRegExp(qs,this.ignoreCase);q.toString=function(){return qs;};}this._lastQuery=_8c4[this.searchAttr]=q;this.textbox.value=_8c2;this._lastDisplayedValue=_8c2;this._set("displayedValue",_8c2);var _8c5=this;var _8c6={ignoreCase:this.ignoreCase,deep:true};lang.mixin(_8c6,this.fetchProperties);this._fetchHandle=this.store.query(_8c4,_8c6);when(this._fetchHandle,function(_8c7){_8c5._fetchHandle=null;_8c5._callbackSetLabel(_8c7||[],_8c4,_8c6,_8c3);},function(err){_8c5._fetchHandle=null;if(!_8c5._cancelingQuery){console.error("dijit.form.FilteringSelect: "+err.toString());}});}},undo:function(){this.set("displayedValue",this._lastDisplayedValue);}});});},"dijit/form/SimpleTextarea":function(){define("dijit/form/SimpleTextarea",["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(_8c8,_8c9,has,_8ca){return _8c8("dijit.form.SimpleTextarea",_8ca,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} data-dojo-attach-point='focusNode,containerNode,textbox' autocomplete='off'></textarea>",postMixInProperties:function(){if(!this.value&&this.srcNodeRef){this.value=this.srcNodeRef.value;}this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);if(has("ie")&&this.cols){_8c9.add(this.textbox,"dijitTextAreaCols");}},filter:function(_8cb){if(_8cb){_8cb=_8cb.replace(/\r/g,"");}return this.inherited(arguments);},_onInput:function(e){if(this.maxLength){var _8cc=parseInt(this.maxLength);var _8cd=this.textbox.value.replace(/\r/g,"");var _8ce=_8cd.length-_8cc;if(_8ce>0){var _8cf=this.textbox;if(_8cf.selectionStart){var pos=_8cf.selectionStart;var cr=0;if(has("opera")){cr=(this.textbox.value.substring(0,pos).match(/\r/g)||[]).length;}this.textbox.value=_8cd.substring(0,pos-_8ce-cr)+_8cd.substring(pos-cr);_8cf.setSelectionRange(pos-_8ce,pos-_8ce);}else{if(this.ownerDocument.selection){_8cf.focus();var _8d0=this.ownerDocument.selection.createRange();_8d0.moveStart("character",-_8ce);_8d0.text="";_8d0.select();}}}}this.inherited(arguments);}});});},"esri/tasks/SpatialRelationship":function(){define("esri/tasks/SpatialRelationship",["dojo/_base/lang","dojo/has","esri/kernel"],function(lang,has,_8d1){var _8d2={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};if(has("extend-esri")){lang.setObject("tasks._SpatialRelationship",_8d2,_8d1);}return _8d2;});},"dijit/_editor/plugins/TextColor":function(){define("dijit/_editor/plugins/TextColor",["require","dojo/colors","dojo/_base/declare","dojo/_base/lang","../_Plugin","../../form/DropDownButton"],function(_8d3,_8d4,_8d5,lang,_8d6,_8d7){var _8d8=_8d5("dijit._editor.plugins.TextColor",_8d6,{buttonClass:_8d7,useDefaultCommand:false,_initButton:function(){this.inherited(arguments);var self=this;this.button.loadDropDown=function(_8d9){_8d3(["../../ColorPalette"],lang.hitch(this,function(_8da){this.dropDown=new _8da({dir:self.editor.dir,ownerDocument:self.editor.ownerDocument,value:self.value,onChange:function(_8db){self.editor.execCommand(self.command,_8db);}});_8d9();}));};},updateState:function(){var _8dc=this.editor;var _8dd=this.command;if(!_8dc||!_8dc.isLoaded||!_8dd.length){return;}if(this.button){var _8de=this.get("disabled");this.button.set("disabled",_8de);if(_8de){return;}var _8df;try{_8df=_8dc.queryCommandValue(_8dd)||"";}catch(e){_8df="";}}if(_8df==""){_8df="#000000";}if(_8df=="transparent"){_8df="#ffffff";}if(typeof _8df=="string"){if(_8df.indexOf("rgb")>-1){_8df=_8d4.fromRgb(_8df).toHex();}}else{_8df=((_8df&255)<<16)|(_8df&65280)|((_8df&16711680)>>>16);_8df=_8df.toString(16);_8df="#000000".slice(0,7-_8df.length)+_8df;}this.value=_8df;var _8e0=this.button.dropDown;if(_8e0&&_8df!==_8e0.get("value")){_8e0.set("value",_8df,false);}}});_8d6.registry["foreColor"]=function(){return new _8d8({command:"foreColor"});};_8d6.registry["hiliteColor"]=function(){return new _8d8({command:"hiliteColor"});};return _8d8;});},"dijit/_editor/selection":function(){define("dijit/_editor/selection",["dojo/dom","dojo/_base/lang","dojo/sniff","dojo/_base/window","../main"],function(dom,lang,has,win,_8e1){var _8e2={getType:function(){if(win.doc.getSelection){var _8e3="text";var oSel;try{oSel=win.global.getSelection();}catch(e){}if(oSel&&oSel.rangeCount==1){var _8e4=oSel.getRangeAt(0);if((_8e4.startContainer==_8e4.endContainer)&&((_8e4.endOffset-_8e4.startOffset)==1)&&(_8e4.startContainer.nodeType!=3)){_8e3="control";}}return _8e3;}else{return win.doc.selection.type.toLowerCase();}},getSelectedText:function(){if(win.doc.getSelection){var _8e5=win.global.getSelection();return _8e5?_8e5.toString():"";}else{if(_8e1._editor.selection.getType()=="control"){return null;}return win.doc.selection.createRange().text;}},getSelectedHtml:function(){if(win.doc.getSelection){var _8e6=win.global.getSelection();if(_8e6&&_8e6.rangeCount){var i;var html="";for(i=0;i<_8e6.rangeCount;i++){var frag=_8e6.getRangeAt(i).cloneContents();var div=win.doc.createElement("div");div.appendChild(frag);html+=div.innerHTML;}return html;}return null;}else{if(_8e1._editor.selection.getType()=="control"){return null;}return win.doc.selection.createRange().htmlText;}},getSelectedElement:function(){if(_8e1._editor.selection.getType()=="control"){if(win.doc.getSelection){var _8e7=win.global.getSelection();return _8e7.anchorNode.childNodes[_8e7.anchorOffset];}else{var _8e8=win.doc.selection.createRange();if(_8e8&&_8e8.item){return win.doc.selection.createRange().item(0);}}}return null;},getParentElement:function(){if(_8e1._editor.selection.getType()=="control"){var p=this.getSelectedElement();if(p){return p.parentNode;}}else{if(win.doc.getSelection){var _8e9=win.global.getSelection();if(_8e9){var node=_8e9.anchorNode;while(node&&(node.nodeType!=1)){node=node.parentNode;}return node;}}else{var r=win.doc.selection.createRange();r.collapse(true);return r.parentElement();}}return null;},hasAncestorElement:function(_8ea){return this.getAncestorElement.apply(this,arguments)!=null;},getAncestorElement:function(_8eb){var node=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(node,arguments);},isTag:function(node,tags){if(node&&node.tagName){var _8ec=node.tagName.toLowerCase();for(var i=0;i<tags.length;i++){var _8ed=String(tags[i]).toLowerCase();if(_8ec==_8ed){return _8ed;}}}return "";},getParentOfType:function(node,tags){while(node){if(this.isTag(node,tags).length){return node;}node=node.parentNode;}return null;},collapse:function(_8ee){if(win.doc.getSelection){var _8ef=win.global.getSelection();if(_8ef.removeAllRanges){if(_8ee){_8ef.collapseToStart();}else{_8ef.collapseToEnd();}}else{_8ef.collapse(_8ee);}}else{var _8f0=win.doc.selection.createRange();_8f0.collapse(_8ee);_8f0.select();}},remove:function(){var sel=win.doc.selection;if(win.doc.getSelection){sel=win.global.getSelection();sel.deleteFromDocument();return sel;}else{if(sel.type.toLowerCase()!="none"){sel.clear();}return sel;}},selectElementChildren:function(_8f1,_8f2){var doc=win.doc;var _8f3;_8f1=dom.byId(_8f1);if(win.doc.getSelection){var _8f4=win.global.getSelection();if(has("opera")){if(_8f4.rangeCount){_8f3=_8f4.getRangeAt(0);}else{_8f3=doc.createRange();}_8f3.setStart(_8f1,0);_8f3.setEnd(_8f1,(_8f1.nodeType==3)?_8f1.length:_8f1.childNodes.length);_8f4.addRange(_8f3);}else{_8f4.selectAllChildren(_8f1);}}else{_8f3=_8f1.ownerDocument.body.createTextRange();_8f3.moveToElementText(_8f1);if(!_8f2){try{_8f3.select();}catch(e){}}}},selectElement:function(_8f5,_8f6){var _8f7;_8f5=dom.byId(_8f5);var doc=_8f5.ownerDocument;var _8f8=win.global;if(doc.getSelection){var _8f9=_8f8.getSelection();_8f7=doc.createRange();if(_8f9.removeAllRanges){if(has("opera")){if(_8f9.getRangeAt(0)){_8f7=_8f9.getRangeAt(0);}}_8f7.selectNode(_8f5);_8f9.removeAllRanges();_8f9.addRange(_8f7);}}else{try{var tg=_8f5.tagName?_8f5.tagName.toLowerCase():"";if(tg==="img"||tg==="table"){_8f7=win.body(doc).createControlRange();}else{_8f7=win.body(doc).createRange();}_8f7.addElement(_8f5);if(!_8f6){_8f7.select();}}catch(e){this.selectElementChildren(_8f5,_8f6);}}},inSelection:function(node){if(node){var _8fa;var doc=win.doc;var _8fb;if(win.doc.getSelection){var sel=win.global.getSelection();if(sel&&sel.rangeCount>0){_8fb=sel.getRangeAt(0);}if(_8fb&&_8fb.compareBoundaryPoints&&doc.createRange){try{_8fa=doc.createRange();_8fa.setStart(node,0);if(_8fb.compareBoundaryPoints(_8fb.START_TO_END,_8fa)===1){return true;}}catch(e){}}}else{_8fb=doc.selection.createRange();try{_8fa=node.ownerDocument.body.createControlRange();if(_8fa){_8fa.addElement(node);}}catch(e1){try{_8fa=node.ownerDocument.body.createTextRange();_8fa.moveToElementText(node);}catch(e2){}}if(_8fb&&_8fa){if(_8fb.compareEndPoints("EndToStart",_8fa)===1){return true;}}}}return false;}};lang.setObject("dijit._editor.selection",_8e2);return _8e2;});},"dijit/_TemplatedMixin":function(){define("dijit/_TemplatedMixin",["dojo/_base/lang","dojo/touch","./_WidgetBase","dojo/string","dojo/cache","dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/sniff","dojo/_base/unload"],function(lang,_8fc,_8fd,_8fe,_8ff,_900,_901,_902,has,_903){var _904=_901("dijit._TemplatedMixin",null,{templateString:null,templatePath:null,_skipNodeCache:false,_earlyTemplatedStartup:false,constructor:function(){this._attachPoints=[];this._attachEvents=[];},_stringRepl:function(tmpl){var _905=this.declaredClass,_906=this;return _8fe.substitute(tmpl,this,function(_907,key){if(key.charAt(0)=="!"){_907=lang.getObject(key.substr(1),false,_906);}if(typeof _907=="undefined"){throw new Error(_905+" template:"+key);}if(_907==null){return "";}return key.charAt(0)=="!"?_907:_907.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){if(!this.templateString){this.templateString=_8ff(this.templatePath,{sanitize:true});}var _908=_904.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);var node;if(lang.isString(_908)){node=_902.toDom(this._stringRepl(_908),this.ownerDocument);if(node.nodeType!=1){throw new Error("Invalid template: "+_908);}}else{node=_908.cloneNode(true);}this.domNode=node;this.inherited(arguments);this._attachTemplateNodes(node,function(n,p){return n.getAttribute(p);});this._beforeFillContent();this._fillContent(this.srcNodeRef);},_beforeFillContent:function(){},_fillContent:function(_909){var dest=this.containerNode;if(_909&&dest){while(_909.hasChildNodes()){dest.appendChild(_909.firstChild);}}},_attachTemplateNodes:function(_90a,_90b){var _90c=lang.isArray(_90a)?_90a:(_90a.all||_90a.getElementsByTagName("*"));var x=lang.isArray(_90a)?0:-1;for(;x<0||_90c[x];x++){var _90d=(x==-1)?_90a:_90c[x];if(this.widgetsInTemplate&&(_90b(_90d,"dojoType")||_90b(_90d,"data-dojo-type"))){continue;}var _90e=_90b(_90d,"dojoAttachPoint")||_90b(_90d,"data-dojo-attach-point");if(_90e){var _90f,_910=_90e.split(/\s*,\s*/);while((_90f=_910.shift())){if(lang.isArray(this[_90f])){this[_90f].push(_90d);}else{this[_90f]=_90d;}this._attachPoints.push(_90f);}}var _911=_90b(_90d,"dojoAttachEvent")||_90b(_90d,"data-dojo-attach-event");if(_911){var _912,_913=_911.split(/\s*,\s*/);var trim=lang.trim;while((_912=_913.shift())){if(_912){var _914=null;if(_912.indexOf(":")!=-1){var _915=_912.split(":");_912=trim(_915[0]);_914=trim(_915[1]);}else{_912=trim(_912);}if(!_914){_914=_912;}this._attachEvents.push(this.connect(_90d,_8fc[_912]||_912,_914));}}}}},destroyRendering:function(){_900.forEach(this._attachPoints,function(_916){delete this[_916];},this);this._attachPoints=[];_900.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments);}});_904._templateCache={};_904.getCachedTemplate=function(_917,_918,doc){var _919=_904._templateCache;var key=_917;var _91a=_919[key];if(_91a){try{if(!_91a.ownerDocument||_91a.ownerDocument==(doc||document)){return _91a;}}catch(e){}_902.destroy(_91a);}_917=_8fe.trim(_917);if(_918||_917.match(/\$\{([^\}]+)\}/g)){return (_919[key]=_917);}else{var node=_902.toDom(_917,doc);if(node.nodeType!=1){throw new Error("Invalid template: "+_917);}return (_919[key]=node);}};if(has("ie")){_903.addOnWindowUnload(function(){var _91b=_904._templateCache;for(var key in _91b){var _91c=_91b[key];if(typeof _91c=="object"){_902.destroy(_91c);}delete _91b[key];}});}lang.extend(_8fd,{dojoAttachEvent:"",dojoAttachPoint:""});return _904;});},"dijit/_editor/plugins/EnterKeyHandling":function(){define("dijit/_editor/plugins/EnterKeyHandling",["dojo/_base/declare","dojo/dom-construct","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/_base/window","dojo/window","../_Plugin","../RichText","../range","../../_base/focus"],function(_91d,_91e,_91f,keys,lang,has,win,_920,_921,_922,_923,_924){return _91d("dijit._editor.plugins.EnterKeyHandling",_921,{blockNodeForEnter:"BR",constructor:function(args){if(args){if("blockNodeForEnter" in args){args.blockNodeForEnter=args.blockNodeForEnter.toUpperCase();}lang.mixin(this,args);}},setEditor:function(_925){if(this.editor===_925){return;}this.editor=_925;if(this.blockNodeForEnter=="BR"){this.editor.customUndo=true;_925.onLoadDeferred.then(lang.hitch(this,function(d){this.connect(_925.document,"onkeypress",function(e){if(e.charOrCode==keys.ENTER){var ne=lang.mixin({},e);ne.shiftKey=true;if(!this.handleEnterKey(ne)){_91f.stop(e);}}});if(has("ie")>=9){this.connect(_925.document,"onpaste",function(e){setTimeout(dojo.hitch(this,function(){var r=this.editor.document.selection.createRange();r.move("character",-1);r.select();r.move("character",1);r.select();}),0);});}return d;}));}else{if(this.blockNodeForEnter){var h=lang.hitch(this,this.handleEnterKey);_925.addKeyHandler(13,0,0,h);_925.addKeyHandler(13,0,1,h);this.connect(this.editor,"onKeyPressed","onKeyPressed");}}},onKeyPressed:function(){if(this._checkListLater){if(win.withGlobal(this.editor.window,"isCollapsed",_924)){var _926=this.editor._sCall("getAncestorElement",["LI"]);if(!_926){_922.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);var _927=this.editor._sCall("getAncestorElement",[this.blockNodeForEnter]);if(_927){_927.innerHTML=this.bogusHtmlContent;if(has("ie")<=9){var r=this.editor.document.selection.createRange();r.move("character",-1);r.select();}}else{console.error("onKeyPressed: Cannot find the new block node");}}else{if(has("mozilla")){if(_926.parentNode.parentNode.nodeName=="LI"){_926=_926.parentNode.parentNode;}}var fc=_926.firstChild;if(fc&&fc.nodeType==1&&(fc.nodeName=="UL"||fc.nodeName=="OL")){_926.insertBefore(fc.ownerDocument.createTextNode(""),fc);var _928=_923.create(this.editor.window);_928.setStart(_926.firstChild,0);var _929=_923.getSelection(this.editor.window,true);_929.removeAllRanges();_929.addRange(_928);}}}this._checkListLater=false;}if(this._pressedEnterInBlock){if(this._pressedEnterInBlock.previousSibling){this.removeTrailingBr(this._pressedEnterInBlock.previousSibling);}delete this._pressedEnterInBlock;}},bogusHtmlContent:"&#160;",blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(e){var _92a,_92b,_92c,_92d,_92e,_92f,doc=this.editor.document,br,rs,txt;if(e.shiftKey){var _930=this.editor._sCall("getParentElement",[]);var _931=_923.getAncestor(_930,this.blockNodes);if(_931){if(_931.tagName=="LI"){return true;}_92a=_923.getSelection(this.editor.window);_92b=_92a.getRangeAt(0);if(!_92b.collapsed){_92b.deleteContents();_92a=_923.getSelection(this.editor.window);_92b=_92a.getRangeAt(0);}if(_923.atBeginningOfContainer(_931,_92b.startContainer,_92b.startOffset)){br=doc.createElement("br");_92c=_923.create(this.editor.window);_931.insertBefore(br,_931.firstChild);_92c.setStartAfter(br);_92a.removeAllRanges();_92a.addRange(_92c);}else{if(_923.atEndOfContainer(_931,_92b.startContainer,_92b.startOffset)){_92c=_923.create(this.editor.window);br=doc.createElement("br");_931.appendChild(br);_931.appendChild(doc.createTextNode(""));_92c.setStart(_931.lastChild,0);_92a.removeAllRanges();_92a.addRange(_92c);}else{rs=_92b.startContainer;if(rs&&rs.nodeType==3){txt=rs.nodeValue;_92d=doc.createTextNode(txt.substring(0,_92b.startOffset));_92e=doc.createTextNode(txt.substring(_92b.startOffset));_92f=doc.createElement("br");if(_92e.nodeValue==""&&has("webkit")){_92e=doc.createTextNode("");}_91e.place(_92d,rs,"after");_91e.place(_92f,_92d,"after");_91e.place(_92e,_92f,"after");_91e.destroy(rs);_92c=_923.create(this.editor.window);_92c.setStart(_92e,0);_92a.removeAllRanges();_92a.addRange(_92c);return false;}return true;}}}else{_92a=_923.getSelection(this.editor.window);if(_92a.rangeCount){_92b=_92a.getRangeAt(0);if(_92b&&_92b.startContainer){if(!_92b.collapsed){_92b.deleteContents();_92a=_923.getSelection(this.editor.window);_92b=_92a.getRangeAt(0);}rs=_92b.startContainer;if(rs&&rs.nodeType==3){var _932=false;var _933=_92b.startOffset;if(rs.length<_933){ret=this._adjustNodeAndOffset(rs,_933);rs=ret.node;_933=ret.offset;}txt=rs.nodeValue;_92d=doc.createTextNode(txt.substring(0,_933));_92e=doc.createTextNode(txt.substring(_933));_92f=doc.createElement("br");if(!_92e.length){_92e=doc.createTextNode("");_932=true;}if(_92d.length){_91e.place(_92d,rs,"after");}else{_92d=rs;}_91e.place(_92f,_92d,"after");_91e.place(_92e,_92f,"after");_91e.destroy(rs);_92c=_923.create(this.editor.window);_92c.setStart(_92e,0);_92c.setEnd(_92e,_92e.length);_92a.removeAllRanges();_92a.addRange(_92c);if(_932&&!has("webkit")){this.editor._sCall("remove",[]);}else{this.editor._sCall("collapse",[true]);}}else{var _934;if(_92b.startOffset>=0){_934=rs.childNodes[_92b.startOffset];}var _92f=doc.createElement("br");var _92e=doc.createTextNode("");if(!_934){rs.appendChild(_92f);rs.appendChild(_92e);}else{_91e.place(_92f,_934,"before");_91e.place(_92e,_92f,"after");}_92c=_923.create(this.editor.window);_92c.setStart(_92e,0);_92c.setEnd(_92e,_92e.length);_92a.removeAllRanges();_92a.addRange(_92c);this.editor._sCall("collapse",[true]);}}}else{_922.prototype.execCommand.call(this.editor,"inserthtml","<br>");}}return false;}var _935=true;_92a=_923.getSelection(this.editor.window);_92b=_92a.getRangeAt(0);if(!_92b.collapsed){_92b.deleteContents();_92a=_923.getSelection(this.editor.window);_92b=_92a.getRangeAt(0);}var _936=_923.getBlockAncestor(_92b.endContainer,null,this.editor.editNode);var _937=_936.blockNode;if((this._checkListLater=(_937&&(_937.nodeName=="LI"||_937.parentNode.nodeName=="LI")))){if(has("mozilla")){this._pressedEnterInBlock=_937;}if(/^(\s|&nbsp;|&#160;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|&#160;|\xA0)<\/span>)?(<br>)?$/.test(_937.innerHTML)){_937.innerHTML="";if(has("webkit")){_92c=_923.create(this.editor.window);_92c.setStart(_937,0);_92a.removeAllRanges();_92a.addRange(_92c);}this._checkListLater=false;}return true;}if(!_936.blockNode||_936.blockNode===this.editor.editNode){try{_922.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);}catch(e2){}_936={blockNode:this.editor._sCall("getAncestorElement",[this.blockNodeForEnter]),blockContainer:this.editor.editNode};if(_936.blockNode){if(_936.blockNode!=this.editor.editNode&&(!(_936.blockNode.textContent||_936.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)){this.removeTrailingBr(_936.blockNode);return false;}}else{_936.blockNode=this.editor.editNode;}_92a=_923.getSelection(this.editor.window);_92b=_92a.getRangeAt(0);}var _938=doc.createElement(this.blockNodeForEnter);_938.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(_936.blockNode);var _939=_92b.endOffset;var node=_92b.endContainer;if(node.length<_939){var ret=this._adjustNodeAndOffset(node,_939);node=ret.node;_939=ret.offset;}if(_923.atEndOfContainer(_936.blockNode,node,_939)){if(_936.blockNode===_936.blockContainer){_936.blockNode.appendChild(_938);}else{_91e.place(_938,_936.blockNode,"after");}_935=false;_92c=_923.create(this.editor.window);_92c.setStart(_938,0);_92a.removeAllRanges();_92a.addRange(_92c);if(this.editor.height){_920.scrollIntoView(_938);}}else{if(_923.atBeginningOfContainer(_936.blockNode,_92b.startContainer,_92b.startOffset)){_91e.place(_938,_936.blockNode,_936.blockNode===_936.blockContainer?"first":"before");if(_938.nextSibling&&this.editor.height){_92c=_923.create(this.editor.window);_92c.setStart(_938.nextSibling,0);_92a.removeAllRanges();_92a.addRange(_92c);_920.scrollIntoView(_938.nextSibling);}_935=false;}else{if(_936.blockNode===_936.blockContainer){_936.blockNode.appendChild(_938);}else{_91e.place(_938,_936.blockNode,"after");}_935=false;if(_936.blockNode.style){if(_938.style){if(_936.blockNode.style.cssText){_938.style.cssText=_936.blockNode.style.cssText;}}}rs=_92b.startContainer;var _93a;if(rs&&rs.nodeType==3){var _93b,_93c;_939=_92b.endOffset;if(rs.length<_939){ret=this._adjustNodeAndOffset(rs,_939);rs=ret.node;_939=ret.offset;}txt=rs.nodeValue;_92d=doc.createTextNode(txt.substring(0,_939));_92e=doc.createTextNode(txt.substring(_939,txt.length));_91e.place(_92d,rs,"before");_91e.place(_92e,rs,"after");_91e.destroy(rs);var _93d=_92d.parentNode;while(_93d!==_936.blockNode){var tg=_93d.tagName;var _93e=doc.createElement(tg);if(_93d.style){if(_93e.style){if(_93d.style.cssText){_93e.style.cssText=_93d.style.cssText;}}}if(_93d.tagName==="FONT"){if(_93d.color){_93e.color=_93d.color;}if(_93d.face){_93e.face=_93d.face;}if(_93d.size){_93e.size=_93d.size;}}_93b=_92e;while(_93b){_93c=_93b.nextSibling;_93e.appendChild(_93b);_93b=_93c;}_91e.place(_93e,_93d,"after");_92d=_93d;_92e=_93e;_93d=_93d.parentNode;}_93b=_92e;if(_93b.nodeType==1||(_93b.nodeType==3&&_93b.nodeValue)){_938.innerHTML="";}_93a=_93b;while(_93b){_93c=_93b.nextSibling;_938.appendChild(_93b);_93b=_93c;}}_92c=_923.create(this.editor.window);var _93f;var _940=_93a;if(this.blockNodeForEnter!=="BR"){while(_940){_93f=_940;_93c=_940.firstChild;_940=_93c;}if(_93f&&_93f.parentNode){_938=_93f.parentNode;_92c.setStart(_938,0);_92a.removeAllRanges();_92a.addRange(_92c);if(this.editor.height){_920.scrollIntoView(_938);}if(has("mozilla")){this._pressedEnterInBlock=_936.blockNode;}}else{_935=true;}}else{_92c.setStart(_938,0);_92a.removeAllRanges();_92a.addRange(_92c);if(this.editor.height){_920.scrollIntoView(_938);}if(has("mozilla")){this._pressedEnterInBlock=_936.blockNode;}}}}return _935;},_adjustNodeAndOffset:function(node,_941){while(node.length<_941&&node.nextSibling&&node.nextSibling.nodeType==3){_941=_941-node.length;node=node.nextSibling;}return {"node":node,"offset":_941};},removeTrailingBr:function(_942){var para=/P|DIV|LI/i.test(_942.tagName)?_942:this.editor._sCall("getParentOfType",[_942,["P","DIV","LI"]]);if(!para){return;}if(para.lastChild){if((para.childNodes.length>1&&para.lastChild.nodeType==3&&/^[\s\xAD]*$/.test(para.lastChild.nodeValue))||para.lastChild.tagName=="BR"){_91e.destroy(para.lastChild);}}if(!para.childNodes.length){para.innerHTML=this.bogusHtmlContent;}}});});},"dojo/data/ItemFileReadStore":function(){define(["../_base/kernel","../_base/lang","../_base/declare","../_base/array","../_base/xhr","../Evented","./util/filter","./util/simpleFetch","../date/stamp"],function(_943,lang,_944,_945,xhr,_946,_947,_948,_949){var _94a=_944("dojo.data.ItemFileReadStore",[_946],{constructor:function(_94b){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=_94b.url;this._ccUrl=_94b.url;this.url=_94b.url;this._jsonData=_94b.data;this.data=null;this._datatypeMap=_94b.typeMap||{};if(!this._datatypeMap["Date"]){this._datatypeMap["Date"]={type:Date,deserialize:function(_94c){return _949.fromISOString(_94c);}};}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(_94b.urlPreventCache!==undefined){this.urlPreventCache=_94b.urlPreventCache?true:false;}if(_94b.hierarchical!==undefined){this.hierarchical=_94b.hierarchical?true:false;}if(_94b.clearOnClose){this.clearOnClose=true;}if("failOk" in _94b){this.failOk=_94b.failOk?true:false;}},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error(this.declaredClass+": Invalid item argument.");}},_assertIsAttribute:function(_94d){if(typeof _94d!=="string"){throw new Error(this.declaredClass+": Invalid attribute argument.");}},getValue:function(item,_94e,_94f){var _950=this.getValues(item,_94e);return (_950.length>0)?_950[0]:_94f;},getValues:function(item,_951){this._assertIsItem(item);this._assertIsAttribute(_951);return (item[_951]||[]).slice(0);},getAttributes:function(item){this._assertIsItem(item);var _952=[];for(var key in item){if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){_952.push(key);}}return _952;},hasAttribute:function(item,_953){this._assertIsItem(item);this._assertIsAttribute(_953);return (_953 in item);},containsValue:function(item,_954,_955){var _956=undefined;if(typeof _955==="string"){_956=_947.patternToRegExp(_955,false);}return this._containsValue(item,_954,_955,_956);},_containsValue:function(item,_957,_958,_959){return _945.some(this.getValues(item,_957),function(_95a){if(_95a!==null&&!lang.isObject(_95a)&&_959){if(_95a.toString().match(_959)){return true;}}else{if(_958===_95a){return true;}}});},isItem:function(_95b){if(_95b&&_95b[this._storeRefPropName]===this){if(this._arrayOfAllItems[_95b[this._itemNumPropName]]===_95b){return true;}}return false;},isItemLoaded:function(_95c){return this.isItem(_95c);},loadItem:function(_95d){this._assertIsItem(_95d.item);},getFeatures:function(){return this._features;},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},filter:function(_95e,_95f,_960){var _961=[],i,key;if(_95e.query){var _962,_963=_95e.queryOptions?_95e.queryOptions.ignoreCase:false;var _964={};for(key in _95e.query){_962=_95e.query[key];if(typeof _962==="string"){_964[key]=_947.patternToRegExp(_962,_963);}else{if(_962 instanceof RegExp){_964[key]=_962;}}}for(i=0;i<_95f.length;++i){var _965=true;var _966=_95f[i];if(_966===null){_965=false;}else{for(key in _95e.query){_962=_95e.query[key];if(!this._containsValue(_966,key,_962,_964[key])){_965=false;}}}if(_965){_961.push(_966);}}_960(_961,_95e);}else{for(i=0;i<_95f.length;++i){var item=_95f[i];if(item!==null){_961.push(item);}}_960(_961,_95e);}},_fetchItems:function(_967,_968,_969){var self=this;if(this._loadFinished){this.filter(_967,this._getItemsArray(_967.queryOptions),_968);}else{if(this._jsonFileUrl!==this._ccUrl){_943.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_967,filter:lang.hitch(self,"filter"),findCallback:lang.hitch(self,_968)});}else{this._loadInProgress=true;var _96a={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _96b=xhr.get(_96a);_96b.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;self.filter(_967,self._getItemsArray(_967.queryOptions),_968);self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_969(e,_967);}});_96b.addErrback(function(_96c){self._loadInProgress=false;_969(_96c,_967);});var _96d=null;if(_967.abort){_96d=_967.abort;}_967.abort=function(){var df=_96b;if(df&&df.fired===-1){df.cancel();df=null;}if(_96d){_96d.call(_967);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;self.filter(_967,this._getItemsArray(_967.queryOptions),_968);}catch(e){_969(e,_967);}}else{_969(new Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),_967);}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _96e=this._queuedFetches[i],_96f=_96e.args,_970=_96e.filter,_971=_96e.findCallback;if(_970){_970(_96f,this._getItemsArray(_96f.queryOptions),_971);}else{this.fetchItemByIdentity(_96f);}}this._queuedFetches=[];}},_getItemsArray:function(_972){if(_972&&_972.deep){return this._arrayOfAllItems;}return this._arrayOfTopLevelItems;},close:function(_973){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if(((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null))&&this.data==null){console.debug(this.declaredClass+": WARNING!  Data reload "+" information has not been provided."+"  Please set 'url' or 'data' to the appropriate value before"+" the next fetch");}this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[];}},_getItemsFromLoadedData:function(_974){var _975=false,self=this;function _976(_977){return (_977!==null)&&(typeof _977==="object")&&(!lang.isArray(_977)||_975)&&(!lang.isFunction(_977))&&(_977.constructor==Object||lang.isArray(_977))&&(typeof _977._reference==="undefined")&&(typeof _977._type==="undefined")&&(typeof _977._value==="undefined")&&self.hierarchical;};function _978(_979){self._arrayOfAllItems.push(_979);for(var _97a in _979){var _97b=_979[_97a];if(_97b){if(lang.isArray(_97b)){var _97c=_97b;for(var k=0;k<_97c.length;++k){var _97d=_97c[k];if(_976(_97d)){_978(_97d);}}}else{if(_976(_97b)){_978(_97b);}}}}};this._labelAttr=_974.label;var i,item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=_974.items;for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(lang.isArray(item)){_975=true;}_978(item);item[this._rootItemPropName]=true;}var _97e={},key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var _97f=item[key];if(_97f!==null){if(!lang.isArray(_97f)){item[key]=[_97f];}}else{item[key]=[null];}}_97e[key]=key;}}while(_97e[this._storeRefPropName]){this._storeRefPropName+="_";}while(_97e[this._itemNumPropName]){this._itemNumPropName+="_";}while(_97e[this._reverseRefMap]){this._reverseRefMap+="_";}var _980;var _981=_974.identifier;if(_981){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=_981;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];_980=item[_981];var _982=_980[0];if(!Object.hasOwnProperty.call(this._itemsByIdentity,_982)){this._itemsByIdentity[_982]=item;}else{if(this._jsonFileUrl){throw new Error(this.declaredClass+":  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_981+"].  Value collided: ["+_982+"]");}else{if(this._jsonData){throw new Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_981+"].  Value collided: ["+_982+"]");}}}}}else{this._features["dojo.data.api.Identity"]=Number;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){_980=item[key];for(var j=0;j<_980.length;++j){_97f=_980[j];if(_97f!==null&&typeof _97f=="object"){if(("_type" in _97f)&&("_value" in _97f)){var type=_97f._type;var _983=this._datatypeMap[type];if(!_983){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");}else{if(lang.isFunction(_983)){_980[j]=new _983(_97f._value);}else{if(lang.isFunction(_983.deserialize)){_980[j]=_983.deserialize(_97f._value);}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}}}}if(_97f._reference){var _984=_97f._reference;if(!lang.isObject(_984)){_980[j]=this._getItemByIdentity(_984);}else{for(var k=0;k<this._arrayOfAllItems.length;++k){var _985=this._arrayOfAllItems[k],_986=true;for(var _987 in _984){if(_985[_987]!=_984[_987]){_986=false;}}if(_986){_980[j]=_985;}}}if(this.referenceIntegrity){var _988=_980[j];if(this.isItem(_988)){this._addReferenceToMap(_988,item,key);}}}else{if(this.isItem(_97f)){if(this.referenceIntegrity){this._addReferenceToMap(_97f,item,key);}}}}}}}},_addReferenceToMap:function(_989,_98a,_98b){},getIdentity:function(item){var _98c=this._features["dojo.data.api.Identity"];if(_98c===Number){return item[this._itemNumPropName];}else{var _98d=item[_98c];if(_98d){return _98d[0];}}return null;},fetchItemByIdentity:function(_98e){var item,_98f;if(!this._loadFinished){var self=this;if(this._jsonFileUrl!==this._ccUrl){_943.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_98e});}else{this._loadInProgress=true;var _990={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _991=xhr.get(_990);_991.addCallback(function(data){var _992=_98e.scope?_98e.scope:_943.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(_98e.identity);if(_98e.onItem){_98e.onItem.call(_992,item);}self._handleQueuedFetches();}catch(error){self._loadInProgress=false;if(_98e.onError){_98e.onError.call(_992,error);}}});_991.addErrback(function(_993){self._loadInProgress=false;if(_98e.onError){var _994=_98e.scope?_98e.scope:_943.global;_98e.onError.call(_994,_993);}});}}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(_98e.identity);if(_98e.onItem){_98f=_98e.scope?_98e.scope:_943.global;_98e.onItem.call(_98f,item);}}}}else{item=this._getItemByIdentity(_98e.identity);if(_98e.onItem){_98f=_98e.scope?_98e.scope:_943.global;_98e.onItem.call(_98f,item);}}},_getItemByIdentity:function(_995){var item=null;if(this._itemsByIdentity){if(Object.hasOwnProperty.call(this._itemsByIdentity,_995)){item=this._itemsByIdentity[_995];}}else{if(Object.hasOwnProperty.call(this._arrayOfAllItems,_995)){item=this._arrayOfAllItems[_995];}}if(item===undefined){item=null;}return item;},getIdentityAttributes:function(item){var _996=this._features["dojo.data.api.Identity"];if(_996===Number){return null;}else{return [_996];}},_forceLoad:function(){var self=this;if(this._jsonFileUrl!==this._ccUrl){_943.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){var _997={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};var _998=xhr.get(_997);_998.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true;}else{if(self._loadInProgress){throw new Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}}}catch(e){console.log(e);throw e;}});_998.addErrback(function(_999){throw _999;});}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;}}}});lang.extend(_94a,_948);return _94a;});},"url:dijit/form/templates/DropDownButton.html":"<span class=\"dijit dijitReset dijitInline\"\n\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" data-dojo-attach-point=\"_buttonNode\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\trole=\"button\" aria-haspopup=\"true\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\n\t\t\t\tdata-dojo-attach-point=\"iconNode\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode,_popupStateNode\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-point=\"valueNode\" role=\"presentation\"\n/></span>\n","dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(lang,_99a,_99b){var _99c={};lang.setObject("dojo.data.util.simpleFetch",_99c);_99c.errorHandler=function(_99d,_99e){if(_99e.onError){var _99f=_99e.scope||_99a.global;_99e.onError.call(_99f,_99d,_99e);}};_99c.fetchHandler=function(_9a0,_9a1){var _9a2=_9a1.abort||null,_9a3=false,_9a4=_9a1.start?_9a1.start:0,_9a5=(_9a1.count&&(_9a1.count!==Infinity))?(_9a4+_9a1.count):_9a0.length;_9a1.abort=function(){_9a3=true;if(_9a2){_9a2.call(_9a1);}};var _9a6=_9a1.scope||_99a.global;if(!_9a1.store){_9a1.store=this;}if(_9a1.onBegin){_9a1.onBegin.call(_9a6,_9a0.length,_9a1);}if(_9a1.sort){_9a0.sort(_99b.createSortFunction(_9a1.sort,this));}if(_9a1.onItem){for(var i=_9a4;(i<_9a0.length)&&(i<_9a5);++i){var item=_9a0[i];if(!_9a3){_9a1.onItem.call(_9a6,item,_9a1);}}}if(_9a1.onComplete&&!_9a3){var _9a7=null;if(!_9a1.onItem){_9a7=_9a0.slice(_9a4,_9a5);}_9a1.onComplete.call(_9a6,_9a7,_9a1);}};_99c.fetch=function(_9a8){_9a8=_9a8||{};if(!_9a8.store){_9a8.store=this;}this._fetchItems(_9a8,lang.hitch(this,"fetchHandler"),lang.hitch(this,"errorHandler"));return _9a8;};return _99c;});},"dijit/form/_ComboBoxMenuMixin":function(){define("dijit/form/_ComboBoxMenuMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/i18n","dojo/i18n!./nls/ComboBox"],function(_9a9,_9aa,_9ab,i18n){return _9aa("dijit.form._ComboBoxMenuMixin",null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=i18n.getLocalization("dijit.form","ComboBox",this.lang);},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages["previousMessage"];this.nextButton.innerHTML=this._messages["nextMessage"];},_setValueAttr:function(_9ac){this.value=_9ac;this.onChange(_9ac);},onClick:function(node){if(node==this.previousButton){this._setSelectedAttr(null);this.onPage(-1);}else{if(node==this.nextButton){this._setSelectedAttr(null);this.onPage(1);}else{this.onChange(node);}}},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null);},_createOption:function(item,_9ad){var _9ae=this._createMenuItem();var _9af=_9ad(item);if(_9af.html){_9ae.innerHTML=_9af.label;}else{_9ae.appendChild(_9ae.ownerDocument.createTextNode(_9af.label));}if(_9ae.innerHTML==""){_9ae.innerHTML="&#160;";}this.applyTextDir(_9ae,(_9ae.innerText||_9ae.textContent||""));return _9ae;},createOptions:function(_9b0,_9b1,_9b2){this.items=_9b0;this.previousButton.style.display=(_9b1.start==0)?"none":"";_9ab.set(this.previousButton,"id",this.id+"_prev");_9a9.forEach(_9b0,function(item,i){var _9b3=this._createOption(item,_9b2);_9b3.setAttribute("item",i);_9ab.set(_9b3,"id",this.id+i);this.nextButton.parentNode.insertBefore(_9b3,this.nextButton);},this);var _9b4=false;if(_9b0.total&&!_9b0.total.then&&_9b0.total!=-1){if((_9b1.start+_9b1.count)<_9b0.total){_9b4=true;}else{if((_9b1.start+_9b1.count)>_9b0.total&&_9b1.count==_9b0.length){_9b4=true;}}}else{if(_9b1.count==_9b0.length){_9b4=true;}}this.nextButton.style.display=_9b4?"":"none";_9ab.set(this.nextButton,"id",this.id+"_next");},clearResultList:function(){var _9b5=this.containerNode;while(_9b5.childNodes.length>2){_9b5.removeChild(_9b5.childNodes[_9b5.childNodes.length-2]);}this._setSelectedAttr(null);},highlightFirstOption:function(){this.selectFirstNode();},highlightLastOption:function(){this.selectLastNode();},selectFirstNode:function(){this.inherited(arguments);if(this.getHighlightedOption()==this.previousButton){this.selectNextNode();}},selectLastNode:function(){this.inherited(arguments);if(this.getHighlightedOption()==this.nextButton){this.selectPreviousNode();}},getHighlightedOption:function(){return this.selected;}});});},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(dojo,lang,_9b6,_9b7){var _9b8={};lang.setObject("dojo.colors",_9b8);var _9b9=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};dojo.colorFromRgb=_9b6.fromRgb=function(_9ba,obj){var m=_9ba.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=_9b7.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return _9b6.fromArray(a,obj);}return _9b6.fromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_9b9(m1,m2,H+1/3)*256,_9b9(m1,m2,H)*256,_9b9(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return _9b6.fromArray(a,obj);}}return null;};var _9bb=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};_9b6.prototype.sanitize=function(){var t=this;t.r=Math.round(_9bb(t.r,0,255));t.g=Math.round(_9bb(t.g,0,255));t.b=Math.round(_9bb(t.b,0,255));t.a=_9bb(t.a,0,1);return this;};_9b8.makeGrey=_9b6.makeGrey=function(g,a){return _9b6.fromArray([g,g,g,a]);};lang.mixin(_9b6.named,{"aliceblue":[240,248,255],"antiquewhite":[250,235,215],"aquamarine":[127,255,212],"azure":[240,255,255],"beige":[245,245,220],"bisque":[255,228,196],"blanchedalmond":[255,235,205],"blueviolet":[138,43,226],"brown":[165,42,42],"burlywood":[222,184,135],"cadetblue":[95,158,160],"chartreuse":[127,255,0],"chocolate":[210,105,30],"coral":[255,127,80],"cornflowerblue":[100,149,237],"cornsilk":[255,248,220],"crimson":[220,20,60],"cyan":[0,255,255],"darkblue":[0,0,139],"darkcyan":[0,139,139],"darkgoldenrod":[184,134,11],"darkgray":[169,169,169],"darkgreen":[0,100,0],"darkgrey":[169,169,169],"darkkhaki":[189,183,107],"darkmagenta":[139,0,139],"darkolivegreen":[85,107,47],"darkorange":[255,140,0],"darkorchid":[153,50,204],"darkred":[139,0,0],"darksalmon":[233,150,122],"darkseagreen":[143,188,143],"darkslateblue":[72,61,139],"darkslategray":[47,79,79],"darkslategrey":[47,79,79],"darkturquoise":[0,206,209],"darkviolet":[148,0,211],"deeppink":[255,20,147],"deepskyblue":[0,191,255],"dimgray":[105,105,105],"dimgrey":[105,105,105],"dodgerblue":[30,144,255],"firebrick":[178,34,34],"floralwhite":[255,250,240],"forestgreen":[34,139,34],"gainsboro":[220,220,220],"ghostwhite":[248,248,255],"gold":[255,215,0],"goldenrod":[218,165,32],"greenyellow":[173,255,47],"grey":[128,128,128],"honeydew":[240,255,240],"hotpink":[255,105,180],"indianred":[205,92,92],"indigo":[75,0,130],"ivory":[255,255,240],"khaki":[240,230,140],"lavender":[230,230,250],"lavenderblush":[255,240,245],"lawngreen":[124,252,0],"lemonchiffon":[255,250,205],"lightblue":[173,216,230],"lightcoral":[240,128,128],"lightcyan":[224,255,255],"lightgoldenrodyellow":[250,250,210],"lightgray":[211,211,211],"lightgreen":[144,238,144],"lightgrey":[211,211,211],"lightpink":[255,182,193],"lightsalmon":[255,160,122],"lightseagreen":[32,178,170],"lightskyblue":[135,206,250],"lightslategray":[119,136,153],"lightslategrey":[119,136,153],"lightsteelblue":[176,196,222],"lightyellow":[255,255,224],"limegreen":[50,205,50],"linen":[250,240,230],"magenta":[255,0,255],"mediumaquamarine":[102,205,170],"mediumblue":[0,0,205],"mediumorchid":[186,85,211],"mediumpurple":[147,112,219],"mediumseagreen":[60,179,113],"mediumslateblue":[123,104,238],"mediumspringgreen":[0,250,154],"mediumturquoise":[72,209,204],"mediumvioletred":[199,21,133],"midnightblue":[25,25,112],"mintcream":[245,255,250],"mistyrose":[255,228,225],"moccasin":[255,228,181],"navajowhite":[255,222,173],"oldlace":[253,245,230],"olivedrab":[107,142,35],"orange":[255,165,0],"orangered":[255,69,0],"orchid":[218,112,214],"palegoldenrod":[238,232,170],"palegreen":[152,251,152],"paleturquoise":[175,238,238],"palevioletred":[219,112,147],"papayawhip":[255,239,213],"peachpuff":[255,218,185],"peru":[205,133,63],"pink":[255,192,203],"plum":[221,160,221],"powderblue":[176,224,230],"rosybrown":[188,143,143],"royalblue":[65,105,225],"saddlebrown":[139,69,19],"salmon":[250,128,114],"sandybrown":[244,164,96],"seagreen":[46,139,87],"seashell":[255,245,238],"sienna":[160,82,45],"skyblue":[135,206,235],"slateblue":[106,90,205],"slategray":[112,128,144],"slategrey":[112,128,144],"snow":[255,250,250],"springgreen":[0,255,127],"steelblue":[70,130,180],"tan":[210,180,140],"thistle":[216,191,216],"tomato":[255,99,71],"turquoise":[64,224,208],"violet":[238,130,238],"wheat":[245,222,179],"whitesmoke":[245,245,245],"yellowgreen":[154,205,50]});return _9b6;});},"dijit/_HasDropDown":function(){define("dijit/_HasDropDown",["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/event","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","dojo/window","./registry","./focus","./popup","./_FocusMixin"],function(_9bc,_9bd,_9be,dom,_9bf,_9c0,_9c1,_9c2,has,keys,lang,on,_9c3,_9c4,_9c5,_9c6,_9c7){return _9bc("dijit._HasDropDown",_9c7,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:true,forceWidth:false,maxHeight:0,dropDownPosition:["below","above"],_stopClickEvents:true,_onDropDownMouseDown:function(e){if(this.disabled||this.readOnly){return;}e.preventDefault();this._docHandler=this.connect(this.ownerDocument,"mouseup","_onDropDownMouseUp");this.toggleDropDown();},_onDropDownMouseUp:function(e){if(e&&this._docHandler){this.disconnect(this._docHandler);}var _9c8=this.dropDown,_9c9=false;if(e&&this._opened){var c=_9c1.position(this._buttonNode,true);if(!(e.pageX>=c.x&&e.pageX<=c.x+c.w)||!(e.pageY>=c.y&&e.pageY<=c.y+c.h)){var t=e.target;while(t&&!_9c9){if(_9c0.contains(t,"dijitPopup")){_9c9=true;}else{t=t.parentNode;}}if(_9c9){t=e.target;if(_9c8.onItemClick){var _9ca;while(t&&!(_9ca=_9c4.byNode(t))){t=t.parentNode;}if(_9ca&&_9ca.onClick&&_9ca.getParent){_9ca.getParent().onItemClick(_9ca,e);}}return;}}}if(this._opened){if(_9c8.focus&&_9c8.autoFocus!==false){this._focusDropDownTimer=this.defer(function(){_9c8.focus();delete this._focusDropDownTimer;});}}else{this.defer("focus");}if(has("touch")){this._justGotMouseUp=true;this.defer(function(){this._justGotMouseUp=false;});}},_onDropDownClick:function(e){if(has("touch")&&!this._justGotMouseUp){this._onDropDownMouseDown(e);this._onDropDownMouseUp(e);}if(this._stopClickEvents){_9be.stop(e);}},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var _9cb={"after":this.isLeftToRight()?"Right":"Left","before":this.isLeftToRight()?"Left":"Right","above":"Up","below":"Down","left":"Left","right":"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";_9c0.add(this._arrowWrapperNode||this._buttonNode,"dijit"+_9cb+"ArrowButton");},postCreate:function(){this.inherited(arguments);var _9cc=this.focusNode||this.domNode;this.own(on(this._buttonNode,"mousedown",lang.hitch(this,"_onDropDownMouseDown")),on(this._buttonNode,"click",lang.hitch(this,"_onDropDownClick")),on(_9cc,"keydown",lang.hitch(this,"_onKey")),on(_9cc,"keyup",lang.hitch(this,"_onKeyUp")));},destroy:function(){if(this.dropDown){if(!this.dropDown._destroyed){this.dropDown.destroyRecursive();}delete this.dropDown;}this.inherited(arguments);},_onKey:function(e){if(this.disabled||this.readOnly){return;}var d=this.dropDown,_9cd=e.target;if(d&&this._opened&&d.handleKey){if(d.handleKey(e)===false){_9be.stop(e);return;}}if(d&&this._opened&&e.keyCode==keys.ESCAPE){this.closeDropDown();_9be.stop(e);}else{if(!this._opened&&(e.keyCode==keys.DOWN_ARROW||((e.keyCode==keys.ENTER||e.keyCode==keys.SPACE)&&((_9cd.tagName||"").toLowerCase()!=="input"||(_9cd.type&&_9cd.type.toLowerCase()!=="text"))))){this._toggleOnKeyUp=true;_9be.stop(e);}}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var d=this.dropDown;if(d&&d.focus){this.defer(lang.hitch(d,"focus"),1);}}},_onBlur:function(){var _9ce=_9c5.curNode&&this.dropDown&&dom.isDescendant(_9c5.curNode,this.dropDown.domNode);this.closeDropDown(_9ce);this.inherited(arguments);},isLoaded:function(){return true;},loadDropDown:function(_9cf){_9cf();},loadAndOpenDropDown:function(){var d=new _9bd(),_9d0=lang.hitch(this,function(){this.openDropDown();d.resolve(this.dropDown);});if(!this.isLoaded()){this.loadDropDown(_9d0);}else{_9d0();}return d;},toggleDropDown:function(){if(this.disabled||this.readOnly){return;}if(!this._opened){this.loadAndOpenDropDown();}else{this.closeDropDown();}},openDropDown:function(){var _9d1=this.dropDown,_9d2=_9d1.domNode,_9d3=this._aroundNode||this.domNode,self=this;if(!this._preparedNode){this._preparedNode=true;if(_9d2.style.width){this._explicitDDWidth=true;}if(_9d2.style.height){this._explicitDDHeight=true;}}if(this.maxHeight||this.forceWidth||this.autoWidth){var _9d4={display:"",visibility:"hidden"};if(!this._explicitDDWidth){_9d4.width="";}if(!this._explicitDDHeight){_9d4.height="";}_9c2.set(_9d2,_9d4);var _9d5=this.maxHeight;if(_9d5==-1){var _9d6=_9c3.getBox(this.ownerDocument),_9d7=_9c1.position(_9d3,false);_9d5=Math.floor(Math.max(_9d7.y,_9d6.h-(_9d7.y+_9d7.h)));}_9c6.moveOffScreen(_9d1);if(_9d1.startup&&!_9d1._started){_9d1.startup();}var mb=_9c1.getMarginSize(_9d2);var _9d8=(_9d5&&mb.h>_9d5);_9c2.set(_9d2,{overflowX:"visible",overflowY:_9d8?"auto":"visible"});if(_9d8){mb.h=_9d5;if("w" in mb){mb.w+=16;}}else{delete mb.h;}if(this.forceWidth){mb.w=_9d3.offsetWidth;}else{if(this.autoWidth){mb.w=Math.max(mb.w,_9d3.offsetWidth);}else{delete mb.w;}}if(lang.isFunction(_9d1.resize)){_9d1.resize(mb);}else{_9c1.setMarginBox(_9d2,mb);}}var _9d9=_9c6.open({parent:this,popup:_9d1,around:_9d3,orient:this.dropDownPosition,onExecute:function(){self.closeDropDown(true);},onCancel:function(){self.closeDropDown(true);},onClose:function(){_9bf.set(self._popupStateNode,"popupActive",false);_9c0.remove(self._popupStateNode,"dijitHasDropDownOpen");self._set("_opened",false);}});_9bf.set(this._popupStateNode,"popupActive","true");_9c0.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",true);this.domNode.setAttribute("aria-expanded","true");return _9d9;},closeDropDown:function(_9da){if(this._focusDropDownTimer){this._focusDropDownTimer.remove();delete this._focusDropDownTimer;}if(this._opened){this.domNode.setAttribute("aria-expanded","false");if(_9da){this.focus();}_9c6.close(this.dropDown);this._opened=false;}}});});},"dijit/_editor/range":function(){define("dijit/_editor/range",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/window","../main"],function(_9db,_9dc,lang,win,_9dd){_9dd.range={};_9dd.range.getIndex=function(node,_9de){var ret=[],retR=[];var _9df=node;var _9e0,n;while(node!=_9de){var i=0;_9e0=node.parentNode;while((n=_9e0.childNodes[i++])){if(n===node){--i;break;}}ret.unshift(i);retR.unshift(i-_9e0.childNodes.length);node=_9e0;}if(ret.length>0&&_9df.nodeType==3){n=_9df.previousSibling;while(n&&n.nodeType==3){ret[ret.length-1]--;n=n.previousSibling;}n=_9df.nextSibling;while(n&&n.nodeType==3){retR[retR.length-1]++;n=n.nextSibling;}}return {o:ret,r:retR};};_9dd.range.getNode=function(_9e1,_9e2){if(!lang.isArray(_9e1)||_9e1.length==0){return _9e2;}var node=_9e2;_9db.every(_9e1,function(i){if(i>=0&&i<node.childNodes.length){node=node.childNodes[i];}else{node=null;return false;}return true;});return node;};_9dd.range.getCommonAncestor=function(n1,n2,root){root=root||n1.ownerDocument.body;var _9e3=function(n){var as=[];while(n){as.unshift(n);if(n!==root){n=n.parentNode;}else{break;}}return as;};var n1as=_9e3(n1);var n2as=_9e3(n2);var m=Math.min(n1as.length,n2as.length);var com=n1as[0];for(var i=1;i<m;i++){if(n1as[i]===n2as[i]){com=n1as[i];}else{break;}}return com;};_9dd.range.getAncestor=function(node,_9e4,root){root=root||node.ownerDocument.body;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(_9e4.test(name)){return node;}node=node.parentNode;}return null;};_9dd.range.BlockTagNames=/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/;_9dd.range.getBlockAncestor=function(node,_9e5,root){root=root||node.ownerDocument.body;_9e5=_9e5||_9dd.range.BlockTagNames;var _9e6=null,_9e7;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(!_9e6&&_9e5.test(name)){_9e6=node;}if(!_9e7&&(/^(?:BODY|TD|TH|CAPTION)$/).test(name)){_9e7=node;}node=node.parentNode;}return {blockNode:_9e6,blockContainer:_9e7||node.ownerDocument.body};};_9dd.range.atBeginningOfContainer=function(_9e8,node,_9e9){var _9ea=false;var _9eb=(_9e9==0);if(!_9eb&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(0,_9e9))){_9eb=true;}}if(_9eb){var _9ec=node;_9ea=true;while(_9ec&&_9ec!==_9e8){if(_9ec.previousSibling){_9ea=false;break;}_9ec=_9ec.parentNode;}}return _9ea;};_9dd.range.atEndOfContainer=function(_9ed,node,_9ee){var _9ef=false;var _9f0=(_9ee==(node.length||node.childNodes.length));if(!_9f0&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(_9ee))){_9f0=true;}}if(_9f0){var _9f1=node;_9ef=true;while(_9f1&&_9f1!==_9ed){if(_9f1.nextSibling){_9ef=false;break;}_9f1=_9f1.parentNode;}}return _9ef;};_9dd.range.adjacentNoneTextNode=function(_9f2,next){var node=_9f2;var len=(0-_9f2.length)||0;var prop=next?"nextSibling":"previousSibling";while(node){if(node.nodeType!=3){break;}len+=node.length;node=node[prop];}return [node,len];};_9dd.range.create=function(win){win=win||window;if(win.getSelection){return win.document.createRange();}else{return new _9dd.range.W3CRange();}};_9dd.range.getSelection=function(_9f3,_9f4){if(_9f3.getSelection){return _9f3.getSelection();}else{var s=new _9dd.range.ie.selection(_9f3);if(!_9f4){s._getCurrentSelection();}return s;}};if(!window.getSelection){_9dd.range.ie={cachedSelection:{},selection:function(_9f5){this._ranges=[];this.addRange=function(r,_9f6){this._ranges.push(r);if(!_9f6){r._select();}this.rangeCount=this._ranges.length;};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0;};var _9f7=function(){var r=_9f5.document.selection.createRange();var type=_9f5.document.selection.type.toUpperCase();if(type=="CONTROL"){return new _9dd.range.W3CRange(_9dd.range.ie.decomposeControlRange(r));}else{return new _9dd.range.W3CRange(_9dd.range.ie.decomposeTextRange(r));}};this.getRangeAt=function(i){return this._ranges[i];};this._getCurrentSelection=function(){this.removeAllRanges();var r=_9f7();if(r){this.addRange(r,true);this.isCollapsed=r.collapsed;}else{this.isCollapsed=true;}};},decomposeControlRange:function(_9f8){var _9f9=_9f8.item(0),_9fa=_9f8.item(_9f8.length-1);var _9fb=_9f9.parentNode,_9fc=_9fa.parentNode;var _9fd=_9dd.range.getIndex(_9f9,_9fb).o[0];var _9fe=_9dd.range.getIndex(_9fa,_9fc).o[0]+1;return [_9fb,_9fd,_9fc,_9fe];},getEndPoint:function(_9ff,end){var _a00=_9ff.duplicate();_a00.collapse(!end);var _a01="EndTo"+(end?"End":"Start");var _a02=_a00.parentElement();var _a03,_a04,_a05;if(_a02.childNodes.length>0){_9db.every(_a02.childNodes,function(node,i){var _a06;if(node.nodeType!=3){_a00.moveToElementText(node);if(_a00.compareEndPoints(_a01,_9ff)>0){if(_a05&&_a05.nodeType==3){_a03=_a05;_a06=true;}else{_a03=_a02;_a04=i;return false;}}else{if(i==_a02.childNodes.length-1){_a03=_a02;_a04=_a02.childNodes.length;return false;}}}else{if(i==_a02.childNodes.length-1){_a03=node;_a06=true;}}if(_a06&&_a03){var _a07=_9dd.range.adjacentNoneTextNode(_a03)[0];if(_a07){_a03=_a07.nextSibling;}else{_a03=_a02.firstChild;}var _a08=_9dd.range.adjacentNoneTextNode(_a03);_a07=_a08[0];var _a09=_a08[1];if(_a07){_a00.moveToElementText(_a07);_a00.collapse(false);}else{_a00.moveToElementText(_a02);}_a00.setEndPoint(_a01,_9ff);_a04=_a00.text.length-_a09;return false;}_a05=node;return true;});}else{_a03=_a02;_a04=0;}if(!end&&_a03.nodeType==1&&_a04==_a03.childNodes.length){var _a0a=_a03.nextSibling;if(_a0a&&_a0a.nodeType==3){_a03=_a0a;_a04=0;}}return [_a03,_a04];},setEndPoint:function(_a0b,_a0c,_a0d){var _a0e=_a0b.duplicate(),node,len;if(_a0c.nodeType!=3){if(_a0d>0){node=_a0c.childNodes[_a0d-1];if(node){if(node.nodeType==3){_a0c=node;_a0d=node.length;}else{if(node.nextSibling&&node.nextSibling.nodeType==3){_a0c=node.nextSibling;_a0d=0;}else{_a0e.moveToElementText(node.nextSibling?node:_a0c);var _a0f=node.parentNode;var _a10=_a0f.insertBefore(node.ownerDocument.createTextNode(" "),node.nextSibling);_a0e.collapse(false);_a0f.removeChild(_a10);}}}}else{_a0e.moveToElementText(_a0c);_a0e.collapse(true);}}if(_a0c.nodeType==3){var _a11=_9dd.range.adjacentNoneTextNode(_a0c);var _a12=_a11[0];len=_a11[1];if(_a12){_a0e.moveToElementText(_a12);_a0e.collapse(false);if(_a12.contentEditable!="inherit"){len++;}}else{_a0e.moveToElementText(_a0c.parentNode);_a0e.collapse(true);_a0e.move("character",1);_a0e.move("character",-1);}_a0d+=len;if(_a0d>0){if(_a0e.move("character",_a0d)!=_a0d){console.error("Error when moving!");}}}return _a0e;},decomposeTextRange:function(_a13){var _a14=_9dd.range.ie.getEndPoint(_a13);var _a15=_a14[0],_a16=_a14[1];var _a17=_a14[0],_a18=_a14[1];if(_a13.htmlText.length){if(_a13.htmlText==_a13.text){_a18=_a16+_a13.text.length;}else{_a14=_9dd.range.ie.getEndPoint(_a13,true);_a17=_a14[0],_a18=_a14[1];}}return [_a15,_a16,_a17,_a18];},setRange:function(_a19,_a1a,_a1b,_a1c,_a1d,_a1e){var _a1f=_9dd.range.ie.setEndPoint(_a19,_a1a,_a1b);_a19.setEndPoint("StartToStart",_a1f);if(!_a1e){var end=_9dd.range.ie.setEndPoint(_a19,_a1c,_a1d);}_a19.setEndPoint("EndToEnd",end||_a1f);return _a19;}};_9dc("dijit.range.W3CRange",null,{constructor:function(){if(arguments.length>0){this.setStart(arguments[0][0],arguments[0][1]);this.setEnd(arguments[0][2],arguments[0][3]);}else{this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}},_updateInternal:function(){if(this.startContainer!==this.endContainer){this.commonAncestorContainer=_9dd.range.getCommonAncestor(this.startContainer,this.endContainer);}else{this.commonAncestorContainer=this.startContainer;}this.collapsed=(this.startContainer===this.endContainer)&&(this.startOffset==this.endOffset);},setStart:function(node,_a20){_a20=parseInt(_a20);if(this.startContainer===node&&this.startOffset==_a20){return;}delete this._cachedBookmark;this.startContainer=node;this.startOffset=_a20;if(!this.endContainer){this.setEnd(node,_a20);}else{this._updateInternal();}},setEnd:function(node,_a21){_a21=parseInt(_a21);if(this.endContainer===node&&this.endOffset==_a21){return;}delete this._cachedBookmark;this.endContainer=node;this.endOffset=_a21;if(!this.startContainer){this.setStart(node,_a21);}else{this._updateInternal();}},setStartAfter:function(node,_a22){this._setPoint("setStart",node,_a22,1);},setStartBefore:function(node,_a23){this._setPoint("setStart",node,_a23,0);},setEndAfter:function(node,_a24){this._setPoint("setEnd",node,_a24,1);},setEndBefore:function(node,_a25){this._setPoint("setEnd",node,_a25,0);},_setPoint:function(what,node,_a26,ext){var _a27=_9dd.range.getIndex(node,node.parentNode).o;this[what](node.parentNode,_a27.pop()+ext);},_getIERange:function(){var r=(this._body||this.endContainer.ownerDocument.body).createTextRange();_9dd.range.ie.setRange(r,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return r;},getBookmark:function(){this._getIERange();return this._cachedBookmark;},_select:function(){var r=this._getIERange();r.select();},deleteContents:function(){var s=this.startContainer,r=this._getIERange();if(s.nodeType===3&&!this.startOffset){this.setStartBefore(s);}r.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=true;},cloneRange:function(){var r=new _9dd.range.W3CRange([this.startContainer,this.startOffset,this.endContainer,this.endOffset]);r._body=this._body;return r;},detach:function(){this._body=null;this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}});}return _9dd.range;});},"dijit/Tooltip":function(){require({cache:{"url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\n></div>\n"}});define("dijit/Tooltip",["dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","./_base/manager","./place","./_Widget","./_TemplatedMixin","./BackgroundIframe","dojo/text!./templates/Tooltip.html","./main"],function(_a28,_a29,fx,dom,_a2a,_a2b,_a2c,lang,_a2d,on,has,_a2e,_a2f,_a30,_a31,_a32,_a33,_a34){var _a35=_a29("dijit._MasterTooltip",[_a30,_a31],{duration:_a2e.defaultDuration,templateString:_a33,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new _a32(this.domNode);this.fadeIn=fx.fadeIn({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onShow")});this.fadeOut=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onHide")});},show:function(_a36,_a37,_a38,rtl,_a39){if(this.aroundNode&&this.aroundNode===_a37&&this.containerNode.innerHTML==_a36){return;}if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_a36;if(_a39){this.set("textDir",_a39);}this.containerNode.align=rtl?"right":"left";var pos=_a2f.around(this.domNode,_a37,_a38&&_a38.length?_a38:_a3a.defaultPosition,!rtl,lang.hitch(this,"orient"));var _a3b=pos.aroundNodePos;if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){this.connectorNode.style.top=_a3b.y+((_a3b.h-this.connectorNode.offsetHeight)>>1)-pos.y+"px";this.connectorNode.style.left="";}else{if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M"){this.connectorNode.style.left=_a3b.x+((_a3b.w-this.connectorNode.offsetWidth)>>1)-pos.x+"px";}else{this.connectorNode.style.left="";this.connectorNode.style.top="";}}_a2c.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_a37;},orient:function(node,_a3c,_a3d,_a3e,_a3f){this.connectorNode.style.top="";var _a40=_a3e.h,_a41=_a3e.w;node.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_a3c+"-"+_a3d];this.domNode.style.width="auto";var size=_a2b.position(this.domNode);if(has("ie")==9){size.w+=2;}var _a42=Math.min((Math.max(_a41,1)),size.w);_a2b.setMarginBox(this.domNode,{w:_a42});if(_a3d.charAt(0)=="B"&&_a3c.charAt(0)=="B"){var bb=_a2b.position(node);var _a43=this.connectorNode.offsetHeight;if(bb.h>_a40){var _a44=_a40-((_a3f.h+_a43)>>1);this.connectorNode.style.top=_a44+"px";this.connectorNode.style.bottom="";}else{this.connectorNode.style.bottom=Math.min(Math.max(_a3f.h/2-_a43/2,0),bb.h-_a43)+"px";this.connectorNode.style.top="";}}else{this.connectorNode.style.top="";this.connectorNode.style.bottom="";}return Math.max(0,size.w-_a41);},_onShow:function(){if(has("ie")){this.domNode.style.filter="";}},hide:function(_a45){if(this._onDeck&&this._onDeck[1]==_a45){this._onDeck=null;}else{if(this.aroundNode===_a45){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}else{}}},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}},_setAutoTextDir:function(node){this.applyTextDir(node,has("ie")?node.outerText:node.textContent);_a28.forEach(node.children,function(_a46){this._setAutoTextDir(_a46);},this);},_setTextDirAttr:function(_a47){this._set("textDir",_a47);if(_a47=="auto"){this._setAutoTextDir(this.containerNode);}else{this.containerNode.dir=this.textDir;}}});_a34.showTooltip=function(_a48,_a49,_a4a,rtl,_a4b){if(_a4a){_a4a=_a28.map(_a4a,function(val){return {after:"after-centered",before:"before-centered"}[val]||val;});}if(!_a3a._masterTT){_a34._masterTT=_a3a._masterTT=new _a35();}return _a3a._masterTT.show(_a48,_a49,_a4a,rtl,_a4b);};_a34.hideTooltip=function(_a4c){return _a3a._masterTT&&_a3a._masterTT.hide(_a4c);};var _a3a=_a29("dijit.Tooltip",_a30,{label:"",showDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(_a4d){_a28.forEach(this._connections||[],function(_a4e){_a28.forEach(_a4e,function(_a4f){_a4f.remove();});},this);this._connectIds=_a28.filter(lang.isArrayLike(_a4d)?_a4d:(_a4d?[_a4d]:[]),function(id){return dom.byId(id,this.ownerDocument);},this);this._connections=_a28.map(this._connectIds,function(id){var node=dom.byId(id,this.ownerDocument),_a50=this.selector,_a51=_a50?function(_a52){return on.selector(_a50,_a52);}:function(_a53){return _a53;},self=this;return [on(node,_a51(_a2d.enter),function(){self._onHover(this);}),on(node,_a51("focusin"),function(){self._onHover(this);}),on(node,_a51(_a2d.leave),lang.hitch(self,"_onUnHover")),on(node,_a51("focusout"),lang.hitch(self,"_onUnHover"))];},this);this._set("connectId",_a4d);},addTarget:function(node){var id=node.id||node;if(_a28.indexOf(this._connectIds,id)==-1){this.set("connectId",this._connectIds.concat(id));}},removeTarget:function(node){var id=node.id||node,idx=_a28.indexOf(this._connectIds,id);if(idx>=0){this._connectIds.splice(idx,1);this.set("connectId",this._connectIds);}},buildRendering:function(){this.inherited(arguments);_a2a.add(this.domNode,"dijitTooltipData");},startup:function(){this.inherited(arguments);var ids=this.connectId;_a28.forEach(lang.isArrayLike(ids)?ids:[ids],this.addTarget,this);},getContent:function(node){return this.label||this.domNode.innerHTML;},_onHover:function(_a54){if(!this._showTimer){this._showTimer=this.defer(function(){this.open(_a54);},this.showDelay);}},_onUnHover:function(){if(this._showTimer){this._showTimer.remove();delete this._showTimer;}this.close();},open:function(_a55){if(this._showTimer){this._showTimer.remove();delete this._showTimer;}var _a56=this.getContent(_a55);if(!_a56){return;}_a3a.show(_a56,_a55,this.position,!this.isLeftToRight(),this.textDir);this._connectNode=_a55;this.onShow(_a55,this.position);},close:function(){if(this._connectNode){_a3a.hide(this._connectNode);delete this._connectNode;this.onHide();}if(this._showTimer){this._showTimer.remove();delete this._showTimer;}},onShow:function(){},onHide:function(){},destroy:function(){this.close();_a28.forEach(this._connections||[],function(_a57){_a28.forEach(_a57,function(_a58){_a58.remove();});},this);this.inherited(arguments);}});_a3a._MasterTooltip=_a35;_a3a.show=_a34.showTooltip;_a3a.hide=_a34.hideTooltip;_a3a.defaultPosition=["after-centered","before-centered"];return _a3a;});},"esri/layers/OnDemandMode":function(){define("esri/layers/OnDemandMode",["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/geometry/Point","esri/tasks/query","esri/layers/RenderMode","esri/layers/GridLayout"],function(_a59,_a5a,lang,_a5b,has,_a5c,_a5d,_a5e,_a5f,_a60){var _a61=_a59([_a5f],{declaredClass:"esri.layers._OnDemandMode",constructor:function(_a62){this.featureLayer=_a62;this._featureMap={};this._queryErrorHandler=lang.hitch(this,this._queryErrorHandler);},initialize:function(map){this.inherited(arguments);var _a63=this.featureLayer,_a64=_a63._srInfo;this._gridLayer=new _a60(new _a5d(_a64?_a64.valid[0]:map.extent.xmin,map.extent.ymax,map.spatialReference),{width:_a63._tileWidth,height:_a63._tileHeight},{width:map.width,height:map.height},_a64);this._cellMap={};this._gridLayer.setResolution(map.extent);},startup:function(){this._ioQueue=[];if(!this.featureLayer.suspended){this._zoomHandler();this._enableConnectors();}},propertyChangeHandler:function(type){if(this._init){if(type<2){this._zoomHandler();}else{console.log("FeatureLayer: layer in on-demand mode does not support time definitions. Layer id = "+this.featureLayer.id+", Layer URL = "+this.featureLayer.url);}}},destroy:function(){this._disableConnectors();this.inherited(arguments);},drawFeature:function(_a65){var _a66=this._gridLayer,geom=_a65.geometry,_a67=[];if(!geom){return;}_a67=_a66.getCellsInExtent((geom.type==="point")?{xmin:geom.x,ymin:geom.y,xmax:geom.x,ymax:geom.y}:geom.getExtent(),false).cells;var _a68=this._cellMap,i,cell,oid=_a65.attributes[this.featureLayer.objectIdField],_a69,row,col;for(i=0;i<_a67.length;i++){cell=_a67[i];_a69=cell.latticeID;row=cell.row;col=cell.col;if(_a69){cell=(_a68[_a69]=(_a68[_a69]||cell));}else{_a68[row]=_a68[row]||{};cell=(_a68[row][col]=(_a68[row][col]||cell));}cell.features=cell.features||[];cell.features.push(_a65);this._addFeatureIIf(oid,_a65);this._incRefCount(oid);}},suspend:function(){if(!this._init){return;}this._disableConnectors();},resume:function(){if(!this._init){return;}this._enableConnectors();this._zoomHandler();},refresh:function(){this._zoomHandler();},_enableConnectors:function(){var map=this.map;this._zoomConnect=_a5a.connect(map,"onZoomEnd",this,this._zoomHandler);this._panConnect=_a5a.connect(map,"onPanEnd",this,this._panHandler);this._resizeConnect=_a5a.connect(map,"onResize",this,this._panHandler);},_disableConnectors:function(){_a5a.disconnect(this._zoomConnect);_a5a.disconnect(this._panConnect);_a5a.disconnect(this._resizeConnect);},_zoomHandler:function(){this._processIOQueue(true);var _a6a=this.featureLayer,map=this.map;if(_a6a.suspended){return;}_a6a._fireUpdateStart();this._clearIIf();var _a6b=_a6a._trackManager;if(_a6b){_a6b.clearTracks();}this._cellMap={};this._gridLayer.setResolution(map.extent);this._sendRequest();},_panHandler:function(){this.featureLayer._fireUpdateStart();this._sendRequest(this.featureLayer._resized&&arguments[0]);},_getRequestId:function(_a6c,cell){var id="_"+_a6c.name+_a6c.layerId+_a6c._ulid+"_"+cell.resolution+"_"+(cell.latticeID||(cell.row+"_"+cell.col));return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_sendRequest:function(_a6d){this._exceeds=false;var _a6e=this.featureLayer,map=this.map,_a6f=_a6d||map.extent,_a70=this._gridLayer.getCellsInExtent(_a6f,_a6e.latticeTiling),_a71=_a70.cells;if(!_a6e.isEditable()){var _a72=this._cellMap;_a71=_a5b.filter(_a71,function(cell){if(cell.lattice){if(_a72[cell.latticeID]){return false;}}else{if(_a72[cell.row]&&_a72[cell.row][cell.col]){return false;}}return true;});}var _a73=_a6e._getOutFields(),_a74=_a6e.getDefinitionExpression(),time=_a6e._getOffsettedTE(_a6e._mapTimeExtent),_a75=_a6e._usePatch,_a76=this._ioQueue,i,self=this,func=this._drawFeatures,cell,_a77,_a78;this._pending=this._pending||0;for(i=0;i<_a71.length;i++){cell=_a71[i];_a77=new _a5e();_a77.geometry=cell.extent||cell.lattice;_a77.outFields=_a73;_a77.where=_a74;if(_a6e.latticeTiling&&cell.extent){_a77.spatialRelationship=_a5e.SPATIAL_REL_CONTAINS;}_a77.returnGeometry=true;_a77.timeExtent=time;_a77.maxAllowableOffset=_a6e._maxOffset;if(_a6e._ts){_a77._ts=(new Date()).getTime();}_a78=null;if(_a75){_a78=this._getRequestId(_a6e,cell);if(this._isPending(_a78)){continue;}}this._pending++;_a76.push(_a6e._task.execute(_a77,function(){var _a79=cell;return function(_a7a){func.apply(self,[_a7a,_a79]);};}.call(this),this._queryErrorHandler,_a78));}this._removeOldCells(_a6f);this._endCheck();},_drawFeatures:function(_a7b,cell){this._exceeds=this._exceeds||_a7b.exceededTransferLimit;this._finalizeIO();var _a7c=this.featureLayer,map=this.map,_a7d=map.extent,_a7e=cell.extent,row=cell.row,col=cell.col,_a7f=_a7c.objectIdField,_a80=_a7b.features,_a81=this._gridLayer,_a82=this._cellMap,i,len,_a83=cell.latticeID,_a84=_a83?_a82[_a83]:(_a82[row]&&_a82[row][col]);if((cell.resolution!=_a81._resolution)||(_a83?(_a83!==_a81.getLatticeID(_a7d)):(!_a81.intersects(_a7e,_a7d)))){if(_a84){this._removeCell(row,col,_a83);}}else{if(_a84){this._updateCell(_a84,_a80);}else{cell.features=_a80;if(_a83){_a82[_a83]=cell;}else{_a82[row]=_a82[row]||{};_a82[row][col]=cell;}len=_a80.length;for(i=0;i<len;i++){var _a85=_a80[i];var oid=_a85.attributes[_a7f];this._addFeatureIIf(oid,_a85);this._incRefCount(oid);}}}this._endCheck();},_queryErrorHandler:function(err){this._finalizeIO();this.featureLayer._errorHandler(err);this._endCheck(true);},_finalizeIO:function(){this._purgeRequests();this._pending--;},_endCheck:function(_a86){if(this._pending===0){this._processIOQueue();var _a87=this.featureLayer,_a88=_a87._trackManager;if(_a88){_a88.clearTracks();_a88.addFeatures(_a87.graphics);if(_a87._ager){_a5b.forEach(_a87.graphics,function(_a89){if(_a89._shape){_a87._repaint(_a89);}});}_a88.moveLatestToFront();_a88.drawTracks();}this.featureLayer._fireUpdateEnd(_a86&&new Error("FeatureLayer: an error occurred while updating the layer"),this._exceeds?{queryLimitExceeded:true}:null);if(this._exceeds){_a87.onQueryLimitExceeded();}}},_processIOQueue:function(_a8a){this._ioQueue=_a5b.filter(this._ioQueue,function(dfd){var keep=dfd.fired>-1?false:true;return keep;});if(_a8a){_a5b.forEach(this._ioQueue,this._cancelPendingRequest);}},_removeOldCells:function(_a8b){var _a8c=this._cellMap,_a8d=this._gridLayer,_a8e,_a8f;for(_a8e in _a8c){if(_a8c[_a8e]){var row=_a8c[_a8e],_a90=row.latticeID,_a91=0,_a92=0;if(_a90){_a91++;if(_a90!==_a8d.getLatticeID(_a8b)){this._removeCell(null,null,_a90);_a92++;}}else{for(_a8f in row){if(row[_a8f]){_a91++;var _a93=row[_a8f].extent;if(!_a8d.intersects(_a93,_a8b)){this._removeCell(_a8e,_a8f);_a92++;}}}}if(_a92===_a91){delete _a8c[_a8e];}}}},_updateCell:function(cell,_a94){var _a95=this.featureLayer,_a96=_a95.objectIdField,_a97=_a95._selectedFeatures,i,len=_a94.length;cell.features=cell.features||[];for(i=0;i<len;i++){var _a98=_a94[i];var oid=_a98.attributes[_a96];var _a99=this._addFeatureIIf(oid,_a98);if(_a99===_a98){this._incRefCount(oid);cell.features.push(_a99);}else{if(!(oid in _a97)){_a99.setGeometry(_a98.geometry);_a99.setAttributes(_a98.attributes);}}}},_removeCell:function(row,col,_a9a){var _a9b=this._cellMap,_a9c=this.featureLayer,_a9d=_a9c.objectIdField;var cell=_a9a?_a9b[_a9a]:(_a9b[row]&&_a9b[row][col]);if(cell){if(_a9a){delete _a9b[_a9a];}else{delete _a9b[row][col];}var _a9e=cell.features,i;for(i=0;i<_a9e.length;i++){var _a9f=_a9e[i];var oid=_a9f.attributes[_a9d];this._decRefCount(oid);if(oid in _a9c._selectedFeatures){continue;}this._removeFeatureIIf(oid);}}}});if(has("extend-esri")){lang.setObject("layers._OnDemandMode",_a61,_a5c);}return _a61;});},"dijit/form/_ComboBoxMenu":function(){define("dijit/form/_ComboBoxMenu",["dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/keys","../_WidgetBase","../_TemplatedMixin","./_ComboBoxMenuMixin","./_ListMouseMixin"],function(_aa0,_aa1,_aa2,keys,_aa3,_aa4,_aa5,_aa6){return _aa0("dijit.form._ComboBoxMenu",[_aa3,_aa4,_aa6,_aa5],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;' role='listbox'>"+"<div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div>"+"<div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div>"+"</div>",baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);if(!this.isLeftToRight()){_aa1.add(this.previousButton,"dijitMenuItemRtl");_aa1.add(this.nextButton,"dijitMenuItemRtl");}},_createMenuItem:function(){var item=this.ownerDocument.createElement("div");item.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");item.setAttribute("role","option");return item;},onHover:function(node){_aa1.add(node,"dijitMenuItemHover");},onUnhover:function(node){_aa1.remove(node,"dijitMenuItemHover");},onSelect:function(node){_aa1.add(node,"dijitMenuItemSelected");},onDeselect:function(node){_aa1.remove(node,"dijitMenuItemSelected");},_page:function(up){var _aa7=0;var _aa8=this.domNode.scrollTop;var _aa9=_aa2.get(this.domNode,"height");if(!this.getHighlightedOption()){this.selectNextNode();}while(_aa7<_aa9){var _aaa=this.getHighlightedOption();if(up){if(!_aaa.previousSibling||_aaa.previousSibling.style.display=="none"){break;}this.selectPreviousNode();}else{if(!_aaa.nextSibling||_aaa.nextSibling.style.display=="none"){break;}this.selectNextNode();}var _aab=this.domNode.scrollTop;_aa7+=(_aab-_aa8)*(up?-1:1);_aa8=_aab;}},handleKey:function(evt){switch(evt.keyCode){case keys.DOWN_ARROW:this.selectNextNode();return false;case keys.PAGE_DOWN:this._page(false);return false;case keys.UP_ARROW:this.selectPreviousNode();return false;case keys.PAGE_UP:this._page(true);return false;default:return true;}}});});},"dijit/Calendar":function(){define("dijit/Calendar",["dojo/_base/array","dojo/date","dojo/date/locale","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/_base/event","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/sniff","./CalendarLite","./_Widget","./_CssStateMixin","./_TemplatedMixin","./form/DropDownButton"],function(_aac,date,_aad,_aae,_aaf,_ab0,_ab1,_ab2,keys,lang,has,_ab3,_ab4,_ab5,_ab6,_ab7){var _ab8=_aae("dijit.Calendar",[_ab3,_ab4,_ab5],{cssStateNodes:{"decrementMonth":"dijitCalendarArrow","incrementMonth":"dijitCalendarArrow","previousYearLabelNode":"dijitCalendarPreviousYear","nextYearLabelNode":"dijitCalendarNextYear"},setValue:function(_ab9){_ab2.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",_ab9);},_createMonthWidget:function(){return new _ab8._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:lang.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode);},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onkeydown","_onKeyDown");this.connect(this.dateRowsNode,"onmouseover","_onDayMouseOver");this.connect(this.dateRowsNode,"onmouseout","_onDayMouseOut");this.connect(this.dateRowsNode,"onmousedown","_onDayMouseDown");this.connect(this.dateRowsNode,"onmouseup","_onDayMouseUp");},_onMonthSelect:function(_aba){var date=new this.dateClassObj(this.currentFocus);date.setDate(1);date.setMonth(_aba);var _abb=this.dateModule.getDaysInMonth(date);var _abc=this.currentFocus.getDate();date.setDate(Math.min(_abc,_abb));this._setCurrentFocusAttr(date);},_onDayMouseOver:function(evt){var node=_ab0.contains(evt.target,"dijitCalendarDateLabel")?evt.target.parentNode:evt.target;if(node&&((node.dijitDateValue&&!_ab0.contains(node,"dijitCalendarDisabledDate"))||node==this.previousYearLabelNode||node==this.nextYearLabelNode)){_ab0.add(node,"dijitCalendarHoveredDate");this._currentNode=node;}},_onDayMouseOut:function(evt){if(!this._currentNode){return;}if(evt.relatedTarget&&evt.relatedTarget.parentNode==this._currentNode){return;}var cls="dijitCalendarHoveredDate";if(_ab0.contains(this._currentNode,"dijitCalendarActiveDate")){cls+=" dijitCalendarActiveDate";}_ab0.remove(this._currentNode,cls);this._currentNode=null;},_onDayMouseDown:function(evt){var node=evt.target.parentNode;if(node&&node.dijitDateValue&&!_ab0.contains(node,"dijitCalendarDisabledDate")){_ab0.add(node,"dijitCalendarActiveDate");this._currentNode=node;}},_onDayMouseUp:function(evt){var node=evt.target.parentNode;if(node&&node.dijitDateValue){_ab0.remove(node,"dijitCalendarActiveDate");}},handleKey:function(evt){var _abd=-1,_abe,_abf=this.currentFocus;switch(evt.keyCode){case keys.RIGHT_ARROW:_abd=1;case keys.LEFT_ARROW:_abe="day";if(!this.isLeftToRight()){_abd*=-1;}break;case keys.DOWN_ARROW:_abd=1;case keys.UP_ARROW:_abe="week";break;case keys.PAGE_DOWN:_abd=1;case keys.PAGE_UP:_abe=evt.ctrlKey||evt.altKey?"year":"month";break;case keys.END:_abf=this.dateModule.add(_abf,"month",1);_abe="day";case keys.HOME:_abf=new this.dateClassObj(_abf);_abf.setDate(1);break;case keys.ENTER:case keys.SPACE:this.set("value",this.currentFocus);break;default:return true;}if(_abe){_abf=this.dateModule.add(_abf,_abe,_abd);}this._setCurrentFocusAttr(_abf);return false;},_onKeyDown:function(evt){if(!this.handleKey(evt)){_ab1.stop(evt);}},onValueSelected:function(){},onChange:function(_ac0){this.onValueSelected(_ac0);},getClassForDate:function(){}});_ab8._MonthDropDownButton=_aae("dijit.Calendar._MonthDropDownButton",_ab7,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new _ab8._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect});},_setMonthAttr:function(_ac1){var _ac2=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,_ac1);this.dropDown.set("months",_ac2);this.containerNode.innerHTML=(has("ie")==6?"":"<div class='dijitSpacer'>"+this.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+_ac2[_ac1.getMonth()]+"</div>";}});_ab8._MonthDropDown=_aae("dijit.Calendar._MonthDropDown",[_ab4,_ab6],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' "+"data-dojo-attach-event='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(_ac3){this.domNode.innerHTML=_aac.map(_ac3,function(_ac4,idx){return _ac4?"<div class='dijitCalendarMonthLabel' month='"+idx+"'>"+_ac4+"</div>":"";}).join("");},_onClick:function(evt){this.onChange(_aaf.get(evt.target,"month"));},onChange:function(){},_onMenuHover:function(evt){_ab0.toggle(evt.target,"dijitCalendarMonthLabelHover",evt.type=="mouseover");}});return _ab8;});},"url:dijit/form/templates/TextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n","dijit/popup":function(){define("dijit/popup",["dojo/_base/array","dojo/aspect","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./place","./BackgroundIframe","./main"],function(_ac5,_ac6,_ac7,_ac8,dom,_ac9,_aca,_acb,_acc,_acd,keys,lang,on,has,_ace,_acf,_ad0){function _ad1(){if(this._popupWrapper){_aca.destroy(this._popupWrapper);delete this._popupWrapper;}};var _ad2=_ac8(null,{_stack:[],_beginZIndex:1000,_idGen:1,_createWrapper:function(_ad3){var _ad4=_ad3._popupWrapper,node=_ad3.domNode;if(!_ad4){_ad4=_aca.create("div",{"class":"dijitPopup",style:{display:"none"},role:"presentation"},_ad3.ownerDocumentBody);_ad4.appendChild(node);var s=node.style;s.display="";s.visibility="";s.position="";s.top="0px";_ad3._popupWrapper=_ad4;_ac6.after(_ad3,"destroy",_ad1,true);}return _ad4;},moveOffScreen:function(_ad5){var _ad6=this._createWrapper(_ad5);_acc.set(_ad6,{visibility:"hidden",top:"-9999px",display:""});},hide:function(_ad7){var _ad8=this._createWrapper(_ad7);_acc.set(_ad8,"display","none");},getTopPopup:function(){var _ad9=this._stack;for(var pi=_ad9.length-1;pi>0&&_ad9[pi].parent===_ad9[pi-1].widget;pi--){}return _ad9[pi];},open:function(args){var _ada=this._stack,_adb=args.popup,_adc=args.orient||["below","below-alt","above","above-alt"],ltr=args.parent?args.parent.isLeftToRight():_acb.isBodyLtr(_adb.ownerDocument),_add=args.around,id=(args.around&&args.around.id)?(args.around.id+"_dropdown"):("popup_"+this._idGen++);while(_ada.length&&(!args.parent||!dom.isDescendant(args.parent.domNode,_ada[_ada.length-1].widget.domNode))){this.close(_ada[_ada.length-1].widget);}var _ade=this._createWrapper(_adb);_ac9.set(_ade,{id:id,style:{zIndex:this._beginZIndex+_ada.length},"class":"dijitPopup "+(_adb.baseClass||_adb["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:args.parent?args.parent.id:""});if(has("ie")||has("mozilla")){if(!_adb.bgIframe){_adb.bgIframe=new _acf(_ade);}}var best=_add?_ace.around(_ade,_add,_adc,ltr,_adb.orient?lang.hitch(_adb,"orient"):null):_ace.at(_ade,args,_adc=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],args.padding);_ade.style.display="";_ade.style.visibility="visible";_adb.domNode.style.visibility="visible";var _adf=[];_adf.push(on(_ade,_ac7._keypress,lang.hitch(this,function(evt){if(evt.charOrCode==keys.ESCAPE&&args.onCancel){_acd.stop(evt);args.onCancel();}else{if(evt.charOrCode===keys.TAB){_acd.stop(evt);var _ae0=this.getTopPopup();if(_ae0&&_ae0.onCancel){_ae0.onCancel();}}}})));if(_adb.onCancel&&args.onCancel){_adf.push(_adb.on("cancel",args.onCancel));}_adf.push(_adb.on(_adb.onExecute?"execute":"change",lang.hitch(this,function(){var _ae1=this.getTopPopup();if(_ae1&&_ae1.onExecute){_ae1.onExecute();}})));_ada.push({widget:_adb,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:_adf});if(_adb.onOpen){_adb.onOpen(best);}return best;},close:function(_ae2){var _ae3=this._stack;while((_ae2&&_ac5.some(_ae3,function(elem){return elem.widget==_ae2;}))||(!_ae2&&_ae3.length)){var top=_ae3.pop(),_ae4=top.widget,_ae5=top.onClose;if(_ae4.onClose){_ae4.onClose();}var h;while(h=top.handlers.pop()){h.remove();}if(_ae4&&_ae4.domNode){this.hide(_ae4);}if(_ae5){_ae5();}}}});return (_ad0.popup=new _ad2());});},"dijit/CalendarLite":function(){require({cache:{"url:dijit/templates/Calendar.html":"<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" aria-labelledby=\"${id}_mddb ${id}_year\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' colspan=\"5\">\n\t\t\t\t<div data-dojo-attach-point=\"monthNode\">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role=\"row\">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point=\"dateRowsNode\" data-dojo-attach-event=\"onclick: _onDayClick\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\" role=\"presentation\">\n\t\t\t\t<div class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span data-dojo-attach-point=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\" role=\"button\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" role=\"button\" id=\"${id}_year\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\" role=\"button\"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n"}});define("dijit/CalendarLite",["dojo/_base/array","dojo/_base/declare","dojo/cldr/supplemental","dojo/date","dojo/date/locale","dojo/date/stamp","dojo/dom","dojo/dom-class","dojo/_base/event","dojo/_base/lang","dojo/sniff","dojo/string","./_WidgetBase","./_TemplatedMixin","dojo/text!./templates/Calendar.html","./hccss"],function(_ae6,_ae7,_ae8,date,_ae9,_aea,dom,_aeb,_aec,lang,has,_aed,_aee,_aef,_af0){var _af1=_ae7("dijit.CalendarLite",[_aee,_aef],{templateString:_af0,dowTemplateString:"<th class=\"dijitReset dijitCalendarDayLabelTemplate\" role=\"columnheader\"><span class=\"dijitCalendarDayLabel\">${d}</span></th>",dateTemplateString:"<td class=\"dijitReset\" role=\"gridcell\" data-dojo-attach-point=\"dateCells\"><span class=\"dijitCalendarDateLabel\" data-dojo-attach-point=\"dateLabels\"></span></td>",weekTemplateString:"<tr class=\"dijitReset dijitCalendarWeekTemplate\" role=\"row\">${d}${d}${d}${d}${d}${d}${d}</tr>",value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date(),baseClass:"dijitCalendar",_isValidDate:function(_af2){return _af2&&!isNaN(_af2)&&typeof _af2=="object"&&_af2.toString()!=this.constructor.prototype.value.toString();},_getValueAttr:function(){if(this.value&&!isNaN(this.value)){var _af3=new this.dateClassObj(this.value);_af3.setHours(0,0,0,0);if(_af3.getDate()<this.value.getDate()){_af3=this.dateModule.add(_af3,"hour",1);}return _af3;}else{return null;}},_setValueAttr:function(_af4,_af5){if(typeof _af4=="string"){_af4=_aea.fromISOString(_af4);}_af4=this._patchDate(_af4);if(this._isValidDate(_af4)&&!this.isDisabledDate(_af4,this.lang)){this._set("value",_af4);this.set("currentFocus",_af4);this._markSelectedDates([_af4]);if(this._created&&(_af5||typeof _af5=="undefined")){this.onChange(this.get("value"));}}else{this._set("value",null);this._markSelectedDates([]);}},_patchDate:function(_af6){if(_af6){_af6=new this.dateClassObj(_af6);_af6.setHours(1,0,0,0);}return _af6;},_setText:function(node,text){while(node.firstChild){node.removeChild(node.firstChild);}node.appendChild(node.ownerDocument.createTextNode(text));},_populateGrid:function(){var _af7=new this.dateClassObj(this.currentFocus);_af7.setDate(1);var _af8=_af7.getDay(),_af9=this.dateModule.getDaysInMonth(_af7),_afa=this.dateModule.getDaysInMonth(this.dateModule.add(_af7,"month",-1)),_afb=new this.dateClassObj(),_afc=_ae8.getFirstDayOfWeek(this.lang);if(_afc>_af8){_afc-=7;}this._date2cell={};_ae6.forEach(this.dateCells,function(_afd,idx){var i=idx+_afc;var date=new this.dateClassObj(_af7),_afe,_aff="dijitCalendar",adj=0;if(i<_af8){_afe=_afa-_af8+i+1;adj=-1;_aff+="Previous";}else{if(i>=(_af8+_af9)){_afe=i-_af8-_af9+1;adj=1;_aff+="Next";}else{_afe=i-_af8+1;_aff+="Current";}}if(adj){date=this.dateModule.add(date,"month",adj);}date.setDate(_afe);if(!this.dateModule.compare(date,_afb,"date")){_aff="dijitCalendarCurrentDate "+_aff;}if(this.isDisabledDate(date,this.lang)){_aff="dijitCalendarDisabledDate "+_aff;_afd.setAttribute("aria-disabled","true");}else{_aff="dijitCalendarEnabledDate "+_aff;_afd.removeAttribute("aria-disabled");_afd.setAttribute("aria-selected","false");}var _b00=this.getClassForDate(date,this.lang);if(_b00){_aff=_b00+" "+_aff;}_afd.className=_aff+"Month dijitCalendarDateTemplate";var _b01=date.valueOf();this._date2cell[_b01]=_afd;_afd.dijitDateValue=_b01;this._setText(this.dateLabels[idx],date.getDateLocalized?date.getDateLocalized(this.lang):date.getDate());},this);},_populateControls:function(){var _b02=new this.dateClassObj(this.currentFocus);_b02.setDate(1);this.monthWidget.set("month",_b02);var y=_b02.getFullYear()-1;var d=new this.dateClassObj();_ae6.forEach(["previous","current","next"],function(name){d.setFullYear(y++);this._setText(this[name+"YearLabelNode"],this.dateLocaleModule.format(d,{selector:"year",locale:this.lang}));},this);},goToToday:function(){this.set("value",new this.dateClassObj());},constructor:function(_b03){this.dateModule=_b03.datePackage?lang.getObject(_b03.datePackage,false):date;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=_b03.datePackage?lang.getObject(_b03.datePackage+".locale",false):_ae9;},_createMonthWidget:function(){return _af1._MonthWidget({id:this.id+"_mw",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode);},buildRendering:function(){var d=this.dowTemplateString,_b04=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),_b05=_ae8.getFirstDayOfWeek(this.lang);this.dayCellsHtml=_aed.substitute([d,d,d,d,d,d,d].join(""),{d:""},function(){return _b04[_b05++%7];});var r=_aed.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[r,r,r,r,r,r].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);dom.setSelectable(this.domNode,false);var _b06=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",_b06,false);},postCreate:function(){this.inherited(arguments);this._connectControls();},_connectControls:function(){var _b07=lang.hitch(this,function(_b08,part,_b09){this.connect(this[_b08],"onclick",function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,part,_b09));});});_b07("incrementMonth","month",1);_b07("decrementMonth","month",-1);_b07("nextYearLabelNode","year",1);_b07("previousYearLabelNode","year",-1);},_setCurrentFocusAttr:function(date,_b0a){var _b0b=this.currentFocus,_b0c=this._getNodeByDate(_b0b);date=this._patchDate(date);this._set("currentFocus",date);if(!this._date2cell||this.dateModule.difference(_b0b,date,"month")!=0){this._populateGrid();this._populateControls();this._markSelectedDates([this.value]);}var _b0d=this._getNodeByDate(date);_b0d.setAttribute("tabIndex",this.tabIndex);if(this.focused||_b0a){_b0d.focus();}if(_b0c&&_b0c!=_b0d){if(has("webkit")){_b0c.setAttribute("tabIndex","-1");}else{_b0c.removeAttribute("tabIndex");}}},focus:function(){this._setCurrentFocusAttr(this.currentFocus,true);},_onDayClick:function(evt){_aec.stop(evt);for(var node=evt.target;node&&!node.dijitDateValue;node=node.parentNode){}if(node&&!_aeb.contains(node,"dijitCalendarDisabledDate")){this.set("value",node.dijitDateValue);}},_getNodeByDate:function(_b0e){_b0e=this._patchDate(_b0e);return _b0e&&this._date2cell?this._date2cell[_b0e.valueOf()]:null;},_markSelectedDates:function(_b0f){function mark(_b10,cell){_aeb.toggle(cell,"dijitCalendarSelectedDate",_b10);cell.setAttribute("aria-selected",_b10?"true":"false");};_ae6.forEach(this._selectedCells||[],lang.partial(mark,false));this._selectedCells=_ae6.filter(_ae6.map(_b0f,this._getNodeByDate,this),function(n){return n;});_ae6.forEach(this._selectedCells,lang.partial(mark,true));},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});_af1._MonthWidget=_ae7("dijit.CalendarLite._MonthWidget",_aee,{_setMonthAttr:function(_b11){var _b12=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,_b11),_b13=(has("ie")==6?"":"<div class='dijitSpacer'>"+_ae6.map(_b12,function(s){return "<div>"+s+"</div>";}).join("")+"</div>");this.domNode.innerHTML=_b13+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+_b12[_b11.getMonth()]+"</div>";}});return _af1;});},"dijit/_WidgetBase":function(){define("dijit/_WidgetBase",["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./Destroyable","./registry"],function(_b14,_b15,_b16,_b17,_b18,_b19,dom,_b1a,_b1b,_b1c,_b1d,_b1e,has,_b1f,lang,on,_b20,_b21,_b22,win,_b23,_b24){has.add("dijit-legacy-requires",!_b1f.isAsync);if(has("dijit-legacy-requires")){_b20(0,function(){var _b25=["dijit/_base/manager"];_b14(_b25);});}var _b26={};function _b27(obj){var ret={};for(var attr in obj){ret[attr.toLowerCase()]=true;}return ret;};function _b28(attr){return function(val){_b1a[val?"set":"remove"](this.domNode,attr,val);this._set(attr,val);};};return _b19("dijit._WidgetBase",[_b21,_b23],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:_b28("lang"),dir:"",_setDirAttr:_b28("dir"),textDir:"","class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(val){this._set("ownerDocument",val);},attributeMap:{},_blankGif:_b17.blankGif||_b14.toUrl("dojo/resources/blank.gif"),postscript:function(_b29,_b2a){this.create(_b29,_b2a);},create:function(_b2b,_b2c){this.srcNodeRef=dom.byId(_b2c);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_b2b){this.params=_b2b;lang.mixin(this,_b2b);}this.postMixInProperties();if(!this.id){this.id=_b24.getUniqueId(this.declaredClass.replace(/\./g,"_"));if(this.params){delete this.params.id;}}this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:win.doc);this.ownerDocumentBody=win.body(this.ownerDocument);_b24.add(this);this.buildRendering();var _b2d;if(this.domNode){this._applyAttributes();var _b2e=this.srcNodeRef;if(_b2e&&_b2e.parentNode&&this.domNode!==_b2e){_b2e.parentNode.replaceChild(this.domNode,_b2e);_b2d=true;}this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(_b2d){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var ctor=this.constructor,list=ctor._setterAttrs;if(!list){list=(ctor._setterAttrs=[]);for(var attr in this.attributeMap){list.push(attr);}var _b2f=ctor.prototype;for(var _b30 in _b2f){if(_b30 in this.attributeMap){continue;}var _b31="_set"+_b30.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();})+"Attr";if(_b31 in _b2f){list.push(_b30);}}}var _b32={};for(var key in this.params||{}){_b32[key]=this[key];}_b15.forEach(list,function(attr){if(attr in _b32){}else{if(this[attr]){this.set(attr,this[attr]);}}},this);for(key in _b32){this.set(key,_b32[key]);}},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode){this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div");}if(this.baseClass){var _b33=this.baseClass.split(" ");if(!this.isLeftToRight()){_b33=_b33.concat(_b15.map(_b33,function(name){return name+"Rtl";}));}_b1b.add(this.domNode,_b33);}},postCreate:function(){},startup:function(){if(this._started){return;}this._started=true;_b15.forEach(this.getChildren(),function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}});},destroyRecursive:function(_b34){this._beingDestroyed=true;this.destroyDescendants(_b34);this.destroy(_b34);},destroy:function(_b35){this._beingDestroyed=true;this.uninitialize();function _b36(w){if(w.destroyRecursive){w.destroyRecursive(_b35);}else{if(w.destroy){w.destroy(_b35);}}};_b15.forEach(this._connects,lang.hitch(this,"disconnect"));_b15.forEach(this._supportingWidgets,_b36);if(this.domNode){_b15.forEach(_b24.findWidgets(this.domNode,this.containerNode),_b36);}this.destroyRendering(_b35);_b24.remove(this.id);this._destroyed=true;},destroyRendering:function(_b37){if(this.bgIframe){this.bgIframe.destroy(_b37);delete this.bgIframe;}if(this.domNode){if(_b37){_b1a.remove(this.domNode,"widgetId");}else{_b1c.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_b37){_b1c.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_b38){_b15.forEach(this.getChildren(),function(_b39){if(_b39.destroyRecursive){_b39.destroyRecursive(_b38);}});},uninitialize:function(){return false;},_setStyleAttr:function(_b3a){var _b3b=this.domNode;if(lang.isObject(_b3a)){_b1e.set(_b3b,_b3a);}else{if(_b3b.style.cssText){_b3b.style.cssText+="; "+_b3a;}else{_b3b.style.cssText=_b3a;}}this._set("style",_b3a);},_attrToDom:function(attr,_b3c,_b3d){_b3d=arguments.length>=3?_b3d:this.attributeMap[attr];_b15.forEach(lang.isArray(_b3d)?_b3d:[_b3d],function(_b3e){var _b3f=this[_b3e.node||_b3e||"domNode"];var type=_b3e.type||"attribute";switch(type){case "attribute":if(lang.isFunction(_b3c)){_b3c=lang.hitch(this,_b3c);}var _b40=_b3e.attribute?_b3e.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);if(_b3f.tagName){_b1a.set(_b3f,_b40,_b3c);}else{_b3f.set(_b40,_b3c);}break;case "innerText":_b3f.innerHTML="";_b3f.appendChild(this.ownerDocument.createTextNode(_b3c));break;case "innerHTML":_b3f.innerHTML=_b3c;break;case "class":_b1b.replace(_b3f,_b3c,this[attr]);break;}},this);},get:function(name){var _b41=this._getAttrNames(name);return this[_b41.g]?this[_b41.g]():this[name];},set:function(name,_b42){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _b43=this._getAttrNames(name),_b44=this[_b43.s];if(lang.isFunction(_b44)){var _b45=_b44.apply(this,Array.prototype.slice.call(arguments,1));}else{var _b46=this.focusNode&&!lang.isFunction(this.focusNode)?"focusNode":"domNode",_b47,map,tag;tag=this[_b46]&&this[_b46].tagName;if(tag){_b47=_b26[tag]||(_b26[tag]=_b27(this[_b46]));}map=name in this.attributeMap?this.attributeMap[name]:_b43.s in this?this[_b43.s]:((_b47&&_b43.l in _b47&&typeof _b42!="function")||/^aria-|^data-|^role$/.test(name))?_b46:null;if(map!=null){this._attrToDom(name,_b42,map);}this._set(name,_b42);}return _b45||this;},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();});return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr",l:uc.toLowerCase()});},_set:function(name,_b48){var _b49=this[name];this[name]=_b48;if(this._created&&_b48!==_b49){if(this._watchCallbacks){this._watchCallbacks(name,_b49,_b48);}this.emit("attrmodified-"+name,{detail:{prevValue:_b49,newValue:_b48}});}},emit:function(type,_b4a,_b4b){_b4a=_b4a||{};if(_b4a.bubbles===undefined){_b4a.bubbles=true;}if(_b4a.cancelable===undefined){_b4a.cancelable=true;}if(!_b4a.detail){_b4a.detail={};}_b4a.detail.widget=this;var ret,_b4c=this["on"+type];if(_b4c){ret=_b4c.apply(this,_b4b?_b4b:[_b4a]);}if(this._started&&!this._beingDestroyed){on.emit(this.domNode,type.toLowerCase(),_b4a);}return ret;},on:function(type,func){var _b4d=this._onMap(type);if(_b4d){return _b16.after(this,_b4d,func,true);}return this.own(on(this.domNode,type,func))[0];},_onMap:function(type){var ctor=this.constructor,map=ctor._onMap;if(!map){map=(ctor._onMap={});for(var attr in ctor.prototype){if(/^on/.test(attr)){map[attr.replace(/^on/,"").toLowerCase()]=attr;}}}return map[typeof type=="string"&&type.toLowerCase()];},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getChildren:function(){return this.containerNode?_b24.findWidgets(this.containerNode):[];},getParent:function(){return _b24.getEnclosingWidget(this.domNode.parentNode);},connect:function(obj,_b4e,_b4f){return this.own(_b18.connect(obj,_b4e,this,_b4f))[0];},disconnect:function(_b50){_b50.remove();},subscribe:function(t,_b51){return this.own(_b22.subscribe(t,lang.hitch(this,_b51)))[0];},unsubscribe:function(_b52){_b52.remove();},isLeftToRight:function(){return this.dir?(this.dir=="ltr"):_b1d.isBodyLtr(this.ownerDocument);},isFocusable:function(){return this.focus&&(_b1e.get(this.domNode,"display")!="none");},placeAt:function(_b53,_b54){var _b55=!_b53.tagName&&_b24.byId(_b53);if(_b55&&_b55.addChild&&(!_b54||typeof _b54==="number")){_b55.addChild(this,_b54);}else{var ref=_b55?(_b55.containerNode&&!/after|before|replace/.test(_b54||"")?_b55.containerNode:_b55.domNode):dom.byId(_b53,this.ownerDocument);_b1c.place(this.domNode,ref,_b54);if(!this._started&&(this.getParent()||{})._started){this.startup();}}return this;},getTextDir:function(text,_b56){return _b56;},applyTextDir:function(){},defer:function(fcn,_b57){var _b58=setTimeout(lang.hitch(this,function(){_b58=null;if(!this._destroyed){lang.hitch(this,fcn)();}}),_b57||0);return {remove:function(){if(_b58){clearTimeout(_b58);_b58=null;}return null;}};}});});},"*now":function(r){r(["dojo/i18n!*preload*esri/dijit/nls/AttributeInspector-all*[\"ar\",\"az\",\"ca\",\"cs\",\"da\",\"de-de\",\"el\",\"en-gb\",\"en-us\",\"es-es\",\"fi-fi\",\"fr-fr\",\"he-il\",\"hu\",\"it-it\",\"ja-jp\",\"ko-kr\",\"nl-nl\",\"nb\",\"pl\",\"pt-br\",\"pt-pt\",\"ro\",\"ru\",\"sk\",\"sl\",\"sv\",\"th\",\"tr\",\"zh-tw\",\"zh-cn\",\"ROOT\"]"]);},"*noref":1}});define("esri/dijit/AttributeInspector-all",["esri/layers/FeatureLayer","esri/dijit/AttributeInspector"],function(_b59,_b5a){return {};});