/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
require({cache:{"esri/layers/TiledMapServiceLayer":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/dom-construct","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojox/collections/ArrayList","dojox/gfx/matrix","esri/kernel","esri/config","esri/sniff","esri/domUtils","esri/tileUtils","esri/geometry/Point","esri/geometry/Rect","esri/layers/layer"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,_11,_12){var _13=_c.defaults.map.zoomDuration;var _14=_1(_12,{declaredClass:"esri.layers.TiledMapServiceLayer",constructor:function(url,_15){_2.connect(this,"onLoad",this,"_initTiledLayer");this._displayLevels=_15?_15.displayLevels:null;var dh=_3.hitch;this._addImage=dh(this,this._addImage);this._tileLoadHandler=dh(this,this._tileLoadHandler);this._tileErrorHandler=dh(this,this._tileErrorHandler);this._tilePopPop=dh(this,this._tilePopPop);this._cleanUpRemovedImages=dh(this,this._cleanUpRemovedImages);this._fireOnUpdateEvent=dh(this,this._fireOnUpdateEvent);this._transitionEnd=dh(this,this._transitionEnd);},opacity:1,isPNG32:false,_initTiledLayer:function(){var ti=this.tileInfo,_16=ti.lods;this._tileW=ti.width;this._tileH=ti.height;var _17=(this.scales=[]),dl=this._displayLevels,_18=(this.declaredClass==="esri.layers.WMTSLayer"&&ti.dpi!=96),_19=-Infinity,_1a=Infinity,fe=this.fullExtent,ul=new _10(fe.xmin,fe.ymax),lr=new _10(fe.xmax,fe.ymin),_1b=_f.getContainingTileCoords,_1c,lod,i,len=_16.length;for(i=0;i<len;i++){lod=_16[i];if(_18){lod.scale=lod.scale*96/ti.dpi;}_1c=_1b(ti,ul,lod);lod.startTileRow=_1c.row<0?0:_1c.row;lod.startTileCol=_1c.col<0?0:_1c.col;_1c=_1b(ti,lr,lod);lod.endTileRow=_1c.row;lod.endTileCol=_1c.col;if(!dl||_4.indexOf(dl,lod.level)!==-1){_17[i]=lod.scale;_19=(lod.scale>_19)?lod.scale:_19;_1a=(lod.scale<_1a)?lod.scale:_1a;}}if(_18){ti.dpi=96;}if(_19!==-Infinity&&!this._hasMin){this.setMinScale(_19);}if(_1a!==Infinity&&!this._hasMax){this.setMaxScale(_1a);}this._patchIE=_d("ie")>=6&&_d("ie")<7&&(this.isPNG32||ti.format==="Mixed");},_isMapAtVisibleScale:function(){var _1d=this.inherited(arguments);if(_1d){var i,map=this._map,_1e=this.scales,_1f=map.getScale(),_20=false,_21=(map.width>map.height)?map.width:map.height;for(i=0;i<_1e.length;i++){if((Math.abs(_1e[i]-_1f)/_1e[i])<(1/_21)){_20=true;break;}}_1d=_20;}return _1d;},_setMap:function(map,_22,_23,lod){this.inherited(arguments);this._map=map;var d=(this._div=_5.create("div",null,_22)),_24=map.__visibleDelta,dc=_2.connect,_25=_b._css.names,css={position:"absolute",width:map.width+"px",height:map.height+"px",overflow:"visible"};if(map.navigationMode==="css-transforms"){css[_25.transform]=_b._css.translate(-_24.x,-_24.y);_8.set(d,css);delete css[_25.transform];css[_25.transition]=_25.transformName+" "+_13+"ms ease";_8.set((this._active=_5.create("div",null,d)),css);this._active._remove=0;this._passives=[];}else{css.left=-_24.x+"px";css.top=-_24.y+"px";_8.set(d,css);}this._onResizeHandler_connect=dc(map,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=dc(this,"onOpacityChange",this,"_opacityChangeHandler");var _26=this.tileInfo,sr=_26.spatialReference,_27=sr._getInfo();this._wrap=map.wrapAround180&&sr._isWrappable()&&Math.abs(_27.origin[0]-_26.origin.x)<=_27.dx;if(this._wrap){_f._addFrameInfo(_26,_27);}this.evaluateSuspension();if(this.suspended&&!map.loaded){var _28=_2.connect(map,"onLoad",this,function(){_2.disconnect(_28);_28=null;this.evaluateSuspension();});}return d;},_unsetMap:function(map,_29){if(!this.suspended){this._suspendImpl();}_5.destroy(this._div);this._map=this._div=null;var dd=_2.disconnect;dd(this._onResizeHandler_connect);dd(this._opacityChangeHandler_connect);this.inherited(arguments);},onSuspend:function(){this.inherited(arguments);this._suspendImpl();},_suspendImpl:function(){_e.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();var _2a=this._tiles,_2b=this._tileIds,_2c=this._loadingList,img,i,id,_2d=_2.disconnect,_2e=_5.destroy;if(_2c&&_2c.count>0){_2c.forEach(function(_2f){img=_2a[_2f];if(img){_2d(img._onload_connect);_2d(img._onerror_connect);_2d(img._onabort_connect);img._onload_connect=img._onerror_connect=img._onabort_connect=null;}});_2c.clear();this._fireUpdateEnd();}this._removeList.clear();for(i=_2b.length-1;i>=0;i--){id=_2b[i];img=id&&_2a[id];if(img){_2e(img);}}if(this._map.navigationMode==="css-transforms"){var _30=this._active,_31=this._passives,_32;this._noDom=0;for(i=_31.length-1;i>=0;i--){_32=_31[i];if(_32._endHandle){_2d(_32._endHandle);}_32._matrix=_32._multiply=_32._endHandle=null;_32._marked=_32._remove=0;_31.splice(i,1);_2e(_32);}_30._matrix=_30._multiply=null;_30._marked=_30._remove=0;}this._tileIds=this._tiles=this._tileBounds=this._ct=this._loadingList=this._removeList=this._standby=null;},onResume:function(){this.inherited(arguments);this._tileIds=[];this._tiles=[];this._tileBounds=[];this._ct=null;this._removeList=new _9();this._loadingList=new _9();_e.show(this._div);this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(_3.hitch(this,function(){if(!this.suspended){this._onExtentChangeHandler(this._map.extent,null,true,this._map.__LOD);}}),0);},_enableDrawConnectors:function(){var map=this._map,_33=_2.connect;if(map.navigationMode==="css-transforms"){this._onScaleHandler_connect=_33(map,"onScale",this,this._onScaleHandler);if(_d("esri-touch")||_d("esri-pointer")){this._standby=[];var _34=this,_35=function(){_34._noDom=1;};this._onPanStartHandler_connect=_33(map,"onPanStart",_35);this._onZoomStartHandler_connect=_33(map,"onZoomStart",_35);}}else{this._onZoomHandler_connect=_33(map,"onZoom",this,"_onZoomHandler");}this._onPanHandler_connect=_33(map,"onPan",this,"_onPanHandler");this._onExtentChangeHandler_connect=_33(map,"onExtentChange",this,"_onExtentChangeHandler");},_disableDrawConnectors:function(){var _36=_2.disconnect;_36(this._onPanHandler_connect);_36(this._onZoomHandler_connect);_36(this._onScaleHandler_connect);_36(this._onExtentChangeHandler_connect);_36(this._onPanStartHandler_connect);_36(this._onZoomStartHandler_connect);this._onPanHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=this._onExtentChangeHandler_connect=this._onPanStartHandler_connect=this._onZoomStartHandler_connect=null;},_onResizeHandler:function(_37,_38,_39){var css={width:_38+"px",height:_39+"px"},ds=_8.set,i;ds(this._div,css);if(this._map.navigationMode==="css-transforms"){if(this._active){ds(this._active,css);}for(i=this._passives.length-1;i>=0;i--){ds(this._passives[i],css);}}},_onExtentChangeHandler:function(_3a,_3b,_3c,lod){var map=this._map,i,_3d=this._standby,img,_3e;clearTimeout(this._wakeTimer);this._wakeTimer=null;if(map._isPanningOrZooming()){return;}if(map.navigationMode==="css-transforms"){if(_3c){for(i=this._passives.length-1;i>=0;i--){_3e=this._passives[i];_8.set(_3e,_b._css.names.transition,"none");if(_3e._marked){this._passives.splice(i,1);if(_3e.parentNode){_3e.parentNode.removeChild(_3e);}_5.destroy(_3e);}else{if(_3e.childNodes.length>0){_3e._multiply=_3e._multiply?_a.multiply(_3e._matrix,_3e._multiply):_3e._matrix;}}}}this._noDom=0;if(_3d&&_3d.length){for(i=_3d.length-1;i>=0;i--){img=_3d[i];_8.set(img,"visibility","visible");this._tilePopPop(img);_3d.splice(i,1);}}}this._fireUpdateStart();this._rrIndex=0;var ct=_f.getCandidateTileInfo(map,this.tileInfo,_3a),mv=map.__visibleDelta,id;if(!this._ct||ct.lod.level!==this._ct.lod.level||_3c){var _3f=(ct&&this._ct&&ct.lod.level!==this._ct.lod.level);this._ct=ct;var _40=this._tiles,_41=this._tileIds,_42=this._tileBounds,_43=this._removeList,_44,il=_41.length;this._cleanUpRemovedImages();for(i=0;i<il;i++){id=_41[i];_44=_40[id];_42[id]=_41[i]=null;if((map.navigationMode==="css-transforms")&&_3f&&_44.parentNode&&map.fadeOnZoom){_44._fadeOut=_3f;_44.parentNode._remove++;}_43.add(_44);}if(_3c){this._tileIds=[];this._tiles=[];this._tileBounds=[];}}var mx=mv.x,my=mv.y;if(map.navigationMode==="css-transforms"){var css={};css[_b._css.names.transform]=_b._css.translate(mx,my);_8.set(this._div,css);}else{_8.set(this._div,{left:mx+"px",top:my+"px"});}this.__coords_dx=mx;this.__coords_dy=my;this._updateImages(new _11(0,0,mv.width,mv.height));if(this._loadingList.count===0){this.onUpdate();this._fireUpdateEnd();}else{this._fireOnUpdate=true;}var _45,_46,_47=this._tileW,_48=this._tileH;mv=new _11(-mv.x,-mv.y,mv.width,mv.height);for(i=this._tileIds.length-1;i>=0;i--){id=this._tileIds[i];if(id){img=this._tiles[id];_45=_7.getMarginBox(img);_46=new _11(_45.l,_45.t,_47,_48);if(map.navigationMode==="css-transforms"){_46.x=img._left;_46.y=img._top;}if(mv.intersects(_46)){this._tileBounds[id]=_46;}else{if(this._loadingList.contains(id)){this._tilePopPop(img);}_5.destroy(img);this._tileIds.splice(i,1);delete this._tileBounds[id];delete this._tiles[id];}}else{this._tileIds.splice(i,1);delete this._tileBounds[id];delete this._tiles[id];}}},_onPanHandler:function(_49,_4a){var map=this._map,mv=map.__visibleDelta.offset(_4a.x,_4a.y);this.__coords_dx=this.__coords_dy=0;if(map.navigationMode==="css-transforms"){var css={};css[_b._css.names.transform]=_b._css.translate(mv.x,mv.y);_8.set(this._div,css);if(!_d("esri-touch")&&!_d("esri-pointer")){this._updateImages({x:-mv.x,y:-mv.y,width:mv.width,height:mv.height});}}else{_8.set(this._div,{left:mv.x+"px",top:mv.y+"px"});this._updateImages({x:-mv.x,y:-mv.y,width:mv.width,height:mv.height});}if(this._loadingList.count>0){this._fireUpdateStart();this._fireOnUpdate=true;}},_onScaleHandler:function(mtx,_4b){var i,css={},_4c=_b._css.names,map=this._map;for(i=this._passives.length-1;i>=0;i--){var _4d=this._passives[i];if(_4d.childNodes.length===0){this._passives.splice(i,1);_5.destroy(_4d);}else{if(_4d.style[_4c.transition]==="none"){_8.set(_4d,_4c.transition,_4c.transformName+" "+_13+"ms ease");}_8.set(_4d,_4c.transition,_4b?"none":(_4c.transformName+" "+_13+"ms ease"));_4d._matrix=mtx;css[_4c.transform]=_b._css.matrix(_4d._multiply?_a.multiply(mtx,_4d._multiply):mtx);_8.set(_4d,css);}}if(this._active&&this._active.childNodes.length===0){return;}_8.set(this._active,_4c.transition,_4b?"none":(_4c.transformName+" "+_13+"ms ease"));this._active._matrix=mtx;css[_4c.transform]=_b._css.matrix(this._active._matrix);_8.set(this._active,css);this._passives.push(this._active);css={position:"absolute",width:map.width+"px",height:map.height+"px",overflow:"visible"};css[_4c.transition]=_4c.transformName+" "+_13+"ms ease";_8.set((this._active=_5.create("div",null,this._div)),css);this._active._remove=0;if(map.fadeOnZoom){_5.place(this._active,this._div,"first");}},_onZoomHandler:function(_4e,_4f,_50){var _51=_7.getMarginBox(this._div);_50=_50.offset(-_51.l,-_51.t);var _52,_53=this._tileW*_4f,_54=this._tileH*_4f,_55=this._tileBounds,_56=this._tiles,es=_8.set;var _57=_d("ie");if(_57&&_57<8){_4.forEach(this._tileIds,function(id){_52=_55[id];es(_56[id],{left:(_52.x-((_53-_52.width)*(_50.x-_52.x)/_52.width))+"px",top:(_52.y-((_54-_52.height)*(_50.y-_52.y)/_52.height))+"px",zoom:_4f});});}else{_4.forEach(this._tileIds,function(id){_52=_55[id];es(_56[id],{left:(_52.x-((_53-_52.width)*(_50.x-_52.x)/_52.width))+"px",top:(_52.y-((_54-_52.height)*(_50.y-_52.y)/_52.height))+"px",width:_53+"px",height:_54+"px"});});}},_updateImages:function(_58){if(!this._ct){return;}var id,_59=this._tileW,_5a=this._tileH,_5b=this._ct,lod=_5b.lod,_5c=_5b.tile,off=_5c.offsets,_5d=_5c.coords,cr=_5d.row,cc=_5d.col,_5e=lod.level,_5f=this.opacity,_60=this._tileIds,_61=this._loadingList,_62=this._addImage,mId=this._map.id,tId=this.id,rx=_58.x,ry=_58.y,str=lod.startTileRow,etr=lod.endTileRow,stc=lod.startTileCol,etc=lod.endTileCol,_63=_4.indexOf,r,c,mvx=-_58.x,mvy=-_58.y,_64=off.x-this.__coords_dx,_65=off.y-this.__coords_dy,vx=((_59-_64)+mvx),vy=((_5a-_65)+mvy),_66=Math.ceil,_67=(vx>0)?(vx%_59):((_59-(Math.abs(vx)%_59))),_68=(vy>0)?(vy%_5a):((_5a-(Math.abs(vy)%_5a))),_69=(rx>0)?Math.floor((rx+_64)/_59):_66((rx-(_59-_64))/_59),_6a=(ry>0)?Math.floor((ry+_65)/_5a):_66((ry-(_5a-_65))/_5a),_6b=_69+_66((_58.width-_67)/_59),_6c=_6a+_66((_58.height-_68)/_5a),_6d,_6e,_6f,_70,col,row;if(this._wrap){_6d=lod._frameInfo;_6e=_6d[0];_6f=_6d[1];_70=_6d[2];}for(col=_69;col<=_6b;col++){for(row=_6a;row<=_6c;row++){r=cr+row;c=cc+col;if(this._wrap){if(c<_6f){c=c%_6e;c=c<_6f?c+_6e:c;}else{if(c>_70){c=c%_6e;}}}if(r>=str&&r<=etr&&c>=stc&&c<=etc){id=mId+"_"+tId+"_tile_"+_5e+"_"+row+"_"+col;if(_63(_60,id)===-1){_61.add(id);_60.push(id);_62(_5e,row,r,col,c,id,_59,_5a,_5f,_5c,off);}}}}},_cleanUpRemovedImages:function(){var _71=this._removeList,dd=_5.destroy,i,_72=_b._css.names;_71.forEach(function(img){if(!img._fadeOut){img.style.filter="";img.style.zoom=1;dd(img);}});if(this._map.navigationMode==="css-transforms"){for(i=this._passives.length-1;i>=0;i--){var _73=this._passives[i];if(_73.childNodes.length===0){this._passives.splice(i,1);dd(_73);}else{if(this._map.fadeOnZoom&&!_73._marked&&(_73._remove===_73.childNodes.length)){_8.set(_73,_72.transition,"opacity 0.65s");_8.set(_73,"opacity",0);_73._marked=1;if(_d("ie")>=10){_73.addEventListener(_72.endEvent,this._transitionEnd,false);}else{_73._endHandle=_2.connect(_73,_72.endEvent,this._transitionEnd);}}}}}_71.clear();},_transitionEnd:function(evt){var _74=evt.target,idx;if(evt.propertyName!=="opacity"){return;}if(_d("ie")>=10){_74.removeEventListener(_b._css.names.endEvent,this._transitionEnd,false);}else{_2.disconnect(_74._endHandle);_74._endHandle=null;}idx=_4.indexOf(this._passives,_74);if(idx>-1){this._passives.splice(idx,1);}if(_74.parentNode){_74.parentNode.removeChild(_74);}_5.destroy(_74);},_addImage:function(_75,row,r,col,c,id,_76,_77,_78,_79,_7a){if(this._patchIE){var div=(this._tiles[id]=_5.create("div"));div.id=id;_6.add(div,"layerTile");_8.set(div,{left:((_76*col)-_7a.x)+"px",top:((_77*row)-_7a.y)+"px",width:_76+"px",height:_77+"px",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+this.getTileUrl(_75,r,c)+"', sizingMethod='scale')"});if(_78<1){_8.set(div,"opacity",_78);}var _7b=div.appendChild(_5.create("div"));_8.set(_7b,{opacity:0,width:_76+"px",height:_77+"px"});this._div.appendChild(div);div=null;this._loadingList.remove(id);this._fireOnUpdateEvent();}else{var img=(this._tiles[id]=_5.create("img")),dc=_2.connect;img.id=id;_6.add(img,"layerTile");var _7c=(_76*col)-_7a.x,top=(_77*row)-_7a.y,map=this._map,_7d=_b._css.names,css={width:_76+"px",height:_77+"px",visibility:"hidden"};if(map.navigationMode==="css-transforms"){css[_7d.transform]=_b._css.translate(_7c,top);_8.set(img,css);img._left=_7c;img._top=top;}else{css.left=_7c+"px";css.top=top+"px";_8.set(img,css);}if(_78<1){_8.set(img,"opacity",_78);}img._onload_connect=dc(img,"onload",this,"_tileLoadHandler");img._onerror_connect=dc(img,"onerror",this,"_tileErrorHandler");img._onabort_connect=dc(img,"onabort",this,"_tileErrorHandler");var url=this.getTileUrl(_75,r,c,img);if(url){img.src=url;}if(map.navigationMode==="css-transforms"){this._active.appendChild(img);}else{this._div.appendChild(img);}img=null;}},getTileUrl:function(_7e,row,col){},refresh:function(){if(!this.suspended){this._onExtentChangeHandler(this._map.extent,null,true,this._map.__LOD);}},_tilePopPop:function(img){var dd=_2.disconnect;dd(img._onload_connect);dd(img._onerror_connect);dd(img._onabort_connect);img._onload_connect=img._onerror_connect=img._onabort_connect=null;this._loadingList.remove(img.id);this._fireOnUpdateEvent();},_tileLoadHandler:function(evt){var img=evt.currentTarget;if(this._noDom){this._standby.push(img);return;}_8.set(img,"visibility","visible");this._tilePopPop(img);},_tileErrorHandler:function(evt){var img=evt.currentTarget;this.onError(new Error("Unable to load tile: "+img.src));_8.set(img,"visibility","hidden");this._tilePopPop(img);},_fireOnUpdateEvent:function(){if(this._loadingList.count===0){this._cleanUpRemovedImages();if(this._fireOnUpdate){this._fireOnUpdate=false;this.onUpdate();this._fireUpdateEnd();}}},setOpacity:function(o){if(this.opacity!=o){this.onOpacityChange(this.opacity=o);}},onOpacityChange:function(){},_opacityChangeHandler:function(_7f){var djs=_8.set,i,j,_80;if(this._map.navigationMode==="css-transforms"){if(this._active){_80=this._active.childNodes;for(i=_80.length-1;i>=0;i--){djs(_80[i],"opacity",_7f);}}for(i=this._passives.length-1;i>=0;i--){_80=this._passives[i].childNodes;for(j=_80.length-1;j>=0;j--){djs(_80[j],"opacity",_7f);}}return;}_80=this._div.childNodes;for(i=_80.length-1;i>=0;i--){djs(_80[i],"opacity",_7f);}}});if(_d("extend-esri")){_3.setObject("layers.TiledMapServiceLayer",_14,_b);}return _14;});},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","esri/kernel","esri/geometry/Point"],function(_81,has,_82,_83){function _84(pt1,pt2){var dx=pt2.x-pt1.x,dy=pt2.y-pt1.y;return Math.sqrt(dx*dx+dy*dy);};function _85(pt1,pt2){var dx=pt2[0]-pt1[0],dy=pt2[1]-pt1[1];return Math.sqrt(dx*dx+dy*dy);};function _86(pt0,pt1,_87){if(pt0 instanceof _83){return new _83(pt0.x+_87*(pt1.x-pt0.x),pt0.y+_87*(pt1.y-pt0.y));}else{return [pt0[0]+_87*(pt1[0]-pt0[0]),pt0[1]+_87*(pt1[1]-pt0[1])];}};function _88(pt0,pt1){return _86(pt0,pt1,0.5);};function _89(n1,n2){return Math.abs(n1-n2)<1e-8;};function _8a(p0,p1,p2,p3){var _8b=10000000000,x,y,a0=_89(p0[0],p1[0])?_8b:(p0[1]-p1[1])/(p0[0]-p1[0]),a1=_89(p2[0],p3[0])?_8b:(p2[1]-p3[1])/(p2[0]-p3[0]),b0=p0[1]-a0*p0[0],b1=p2[1]-a1*p2[0];if(_89(a0,a1)){if(!_89(b0,b1)){return null;}else{if(_89(p0[0],p1[0])){if(Math.min(p0[1],p1[1])<Math.max(p2[1],p3[1])||Math.max(p0[1],p1[1])>Math.min(p2[1],p3[1])){y=(p0[1]+p1[1]+p2[1]+p3[1]-Math.min(p0[1],p1[1],p2[1],p3[1])-Math.max(p0[1],p1[1],p2[1],p3[1]))/2;x=(y-b0)/a0;}else{return null;}}else{if(Math.min(p0[0],p1[0])<Math.max(p2[0],p3[0])||Math.max(p0[0],p1[0])>Math.min(p2[0],p3[0])){x=(p0[0]+p1[0]+p2[0]+p3[0]-Math.min(p0[0],p1[0],p2[0],p3[0])-Math.max(p0[0],p1[0],p2[0],p3[0]))/2;y=a0*x+b0;}else{return null;}}return [x,y];}}if(_89(a0,_8b)){x=p0[0];y=a1*x+b1;}else{if(_89(a1,_8b)){x=p2[0];y=a0*x+b0;}else{x=-(b0-b1)/(a0-a1);y=a0*x+b0;}}return [x,y];};function _8c(_8d,_8e,_8f,_90,sr){var pt=_8a([_8d.x,_8d.y],[_8e.x,_8e.y],[_8f.x,_8f.y],[_90.x,_90.y]);if(pt){pt=new _83(pt[0],pt[1],sr);}return pt;};function _91(_92,_93){var p1=_92[0],p2=_92[1],p3=_93[0],p4=_93[1],x1=p1[0],y1=p1[1],x2=p2[0],y2=p2[1],x3=p3[0],y3=p3[1],x4=p4[0],y4=p4[1],x43=x4-x3,x13=x1-x3,x21=x2-x1,y43=y4-y3,y13=y1-y3,y21=y2-y1,_94=(y43*x21)-(x43*y21),ua,ub,px,py;if(_94===0){return false;}ua=((x43*y13)-(y43*x13))/_94;ub=((x21*y13)-(y21*x13))/_94;if(ua>=0&&ua<=1&&ub>=0&&ub<=1){px=x1+(ua*(x2-x1));py=y1+(ua*(y2-y1));return [px,py];}else{return false;}};function _95(_96,_97){var p1=_97[0],p2=_97[1],x1=p1[0],y1=p1[1],x2=p2[0],y2=p2[1],x3=_96[0],y3=_96[1],x21=x2-x1,y21=y2-y1,x31=x3-x1,y31=y3-y1,_98=Math.sqrt,pow=Math.pow,mag=_98(pow(x21,2)+pow(y21,2)),u=((x31*x21)+(y31*y21))/(mag*mag),x=x1+u*x21,y=y1+u*y21;return _98(pow(x3-x,2)+pow(y3-y,2));};var _99={getLength:_84,_getLength:_85,getPointOnLine:_86,getMidpoint:_88,_equals:_89,_getLineIntersection:_8a,getLineIntersection:_8c,_getLineIntersection2:_91,_pointLineDistance:_95};if(has("extend-esri")){_81.mixin(_81.getObject("geometry",true,_82),_99);}return _99;});},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./ready","./sniff","./_base/window"],function(_9a,_9b,_9c,has,_9d){var _9e=_9d.doc.documentElement,ie=has("ie"),_9f=has("opera"),maj=Math.floor,ff=has("ff"),_a0=_9a.boxModel.replace(/-/,""),_a1={"dj_quirks":has("quirks"),"dj_opera":_9f,"dj_khtml":has("khtml"),"dj_webkit":has("webkit"),"dj_safari":has("safari"),"dj_chrome":has("chrome"),"dj_gecko":has("mozilla")};if(ie){_a1["dj_ie"]=true;_a1["dj_ie"+maj(ie)]=true;_a1["dj_iequirks"]=has("quirks");}if(ff){_a1["dj_ff"+maj(ff)]=true;}_a1["dj_"+_a0]=true;var _a2="";for(var clz in _a1){if(_a1[clz]){_a2+=clz+" ";}}_9e.className=_9b.trim(_9e.className+" "+_a2);_9c(90,function(){if(!_9a.isBodyLtr()){var _a3="dj_rtl dijitRtl "+_a2.replace(/ /g,"-rtl ");_9e.className=_9b.trim(_9e.className+" "+_a3+"dj_rtl dijitRtl "+_a2.replace(/ /g,"-rtl "));}});return has;});},"esri/symbols/SimpleMarkerSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","dojox/gfx/_base","esri/kernel","esri/lang","esri/symbols/MarkerSymbol","esri/symbols/SimpleLineSymbol"],function(_a4,_a5,_a6,has,_a7,_a8,_a9,_aa,_ab){var _ac={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"};var _ad={style:_ac.STYLE_CIRCLE,color:[255,255,255,0.25],size:12,angle:0,xoffset:0,yoffset:0};var SMS=_a4(_aa,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},constructor:function(_ae,_af,_b0,_b1){if(_ae){if(_a5.isString(_ae)){this.style=_ae;if(_af){this.size=_af;}if(_b0){this.outline=_b0;}if(_b1){this.color=_b1;}}else{this.style=_a9.valueOf(this._styles,this.style);if(_ae.outline){this.outline=new _ab(_ae.outline);}}}else{_a5.mixin(this,_ad);this.size=_a7.pt2px(this.size);this.outline=new _ab(this.outline);this.color=new _a6(this.color);}if(!this.style){this.style=_ac.STYLE_CIRCLE;}},setStyle:function(_b2){this.style=_b2;return this;},setPath:function(_b3){this.path=_b3;this.setStyle(_ac.STYLE_PATH);return this;},setOutline:function(_b4){this.outline=_b4;return this;},getStroke:function(){return this.outline&&this.outline.getStroke();},getFill:function(){return this.color;},_setDim:function(_b5,_b6,_b7){this._targetWidth=_b5;this._targetHeight=_b6;this._spikeSize=_b7;},getShapeDescriptors:function(){var _b8,_b9,_ba;var _bb=this.style,_bc=this.size||_a7.pt2px(_ad.size),cx=0,cy=0,_bd=_bc/2,_be=cx-_bd,_bf=cx+_bd,top=cy-_bd,_c0=cy+_bd;switch(_bb){case _ac.STYLE_CIRCLE:_b8={type:"circle",cx:cx,cy:cy,r:_bd};_b9=this.getFill();_ba=this.getStroke();if(_ba){_ba.style=_ba.style||"Solid";}break;case _ac.STYLE_CROSS:_b8={type:"path",path:"M "+_be+",0 L "+_bf+",0 M 0,"+top+" L 0,"+_c0+" E"};_b9=null;_ba=this.getStroke();break;case _ac.STYLE_DIAMOND:_b8={type:"path",path:"M "+_be+",0 L 0,"+top+" L "+_bf+",0 L 0,"+_c0+" L "+_be+",0 E"};_b9=this.getFill();_ba=this.getStroke();break;case _ac.STYLE_SQUARE:_b8={type:"path",path:"M "+_be+","+_c0+" L "+_be+","+top+" L "+_bf+","+top+" L "+_bf+","+_c0+" L "+_be+","+_c0+" E"};_b9=this.getFill();_ba=this.getStroke();break;case _ac.STYLE_X:_b8={type:"path",path:"M "+_be+","+_c0+" L "+_bf+","+top+" M "+_be+","+top+" L "+_bf+","+_c0+" E"};_b9=null;_ba=this.getStroke();break;case _ac.STYLE_PATH:_b8={type:"path",path:this.path||""};_b9=this.getFill();_ba=this.getStroke();break;}return {defaultShape:_b8,fill:_b9,stroke:_ba};},toJson:function(){var _c1=_a5.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[this.style]}),_c2=this.outline;if(_c2){_c1.outline=_c2.toJson();}_c1.path=this.path;return _a9.fixJson(_c1);}});_a5.mixin(SMS,_ac);SMS.defaultProps=_ad;if(has("extend-esri")){_a5.setObject("symbol.SimpleMarkerSymbol",SMS,_a8);_a8.symbol.defaultSimpleMarkerSymbol=_ad;}return SMS;});},"esri/layers/agstiled":function(){define(["esri/layers/agscommon","esri/layers/ArcGISTiledMapServiceLayer"],function(){return {};});},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/geometry/Point"],function(_c3,_c4,has,_c5,_c6){var _c7=_c3(_c6,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}});if(has("extend-esri")){_c4.setObject("geometry.ScreenPoint",_c7,_c5);}return _c7;});},"esri/sniff":function(){define(["dojo/_base/sniff","esri/kernel"],function(has,_c8){var _c9=has("ff"),_ca=has("ie"),_cb=has("webkit"),_cc=has("opera"),_cd=has("chrome"),_ce=has("safari");var nua=navigator.userAgent,_cf;_cf=nua.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+\_\d+)/i);if(_cf){has.add("esri-iphone",parseFloat(_cf[2].replace("_",".")));}_cf=nua.match(/Android\s+(\d+\.\d+)/i);if(_cf){has.add("esri-android",parseFloat(_cf[1]));}_cf=nua.match(/Fennec\/(\d+\.\d+)/i);if(_cf){has.add("esri-fennec",parseFloat(_cf[1]));}if(nua.indexOf("BlackBerry")>=0){if(nua.indexOf("WebKit")>=0){has.add("esri-blackberry",1);}}has.add("esri-touch",(has("esri-iphone")||has("esri-android")||has("esri-blackberry")||(has("esri-fennec")>=6)||((_c9||_cb)&&document.createTouch))?true:false);has.add("esri-pointer",navigator.pointerEnabled||navigator.msPointerEnabled);_c8._getDOMAccessor=function(_d0){var _d1="";if(_c9){_d1="Moz";}else{if(_cb){_d1="Webkit";}else{if(_ca){_d1="ms";}else{if(_cc){_d1="O";}}}}return _d1+_d0.charAt(0).toUpperCase()+_d0.substr(1);};has.add("esri-cors",_cd>=4||_c9>=3.5||_ce>=4||_ca>=10);has.add("esri-file-upload",(window.FormData&&window.FileList)?true:false);has.add("esri-transforms",_ca>=9||_c9>=3.5||_cd>=4||_ce>=3.1||_cc>=10.5||has("esri-iphone")>=3.2||has("esri-android")>=2.1);has.add("esri-transitions",_ca>=10||_c9>=4||_cd>=4||_ce>=3.1||_cc>=10.5||has("esri-iphone")>=3.2||has("esri-android")>=2.1);has.add("esri-transforms3d",_ca>=11||_c9>=10||_cd>=12||_ce>=4||has("esri-iphone")>=3.2||has("esri-android")>=3);if(has("esri-android")<3){has.add("esri-transforms",false,false,true);has.add("esri-transitions",false,false,true);has.add("esri-transforms3d",false,false,true);}_c8._css=function(_d2){var _d3=has("esri-transforms3d");if(_d2!==undefined&&_d2!==null){_d3=_d2;}else{if(_d3){if(_cd||(_ce&&!has("esri-iphone"))){_d3=false;}}}var _d4=_d3?"translate3d(":"translate(",_d5=_d3?(_cd?",-1px)":",0px)"):")",_d6=_d3?"scale3d(":"scale(",_d7=_d3?",1)":")",_d8=_d3?"rotate3d(0,0,1,":"rotate(",_d9=_d3?"matrix3d(":"matrix(",_da=_d3?",0,0,":",",_db=_d3?",0,0,0,0,1,0,":",",_dc=_d3?",0,1)":")";return {names:{transition:(_cb&&"-webkit-transition")||(_c9&&"MozTransition")||(_cc&&"OTransition")||(_ca&&"msTransition"),transform:(_cb&&"-webkit-transform")||(_c9&&"MozTransform")||(_cc&&"OTransform")||(_ca&&"msTransform"),transformName:(_cb&&"-webkit-transform")||(_c9&&"-moz-transform")||(_cc&&"-o-transform")||(_ca&&"-ms-transform"),origin:(_cb&&"-webkit-transform-origin")||(_c9&&"MozTransformOrigin")||(_cc&&"OTransformOrigin")||(_ca&&"msTransformOrigin"),endEvent:(_cb&&"webkitTransitionEnd")||(_c9&&"transitionend")||(_cc&&"oTransitionEnd")||(_ca&&"MSTransitionEnd")},translate:function(x,y){return _d4+x+"px,"+y+"px"+_d5;},scale:function(_dd){return _d6+_dd+","+_dd+_d7;},rotate:function(_de){return _d8+_de+"deg)";},matrix:function(m){return _d9+m.xx+","+m.xy+_da+m.yx+","+m.yy+_db+m.dx.toFixed(10)+(_c9?"px,":",")+m.dy.toFixed(10)+(_c9?"px":"")+_dc;}};};if(has("extend-esri")){_c8.isiPhone=has("esri-iphone");_c8.isAndroid=has("esri-android");_c8.isFennec=has("esri-fennec");_c8.isBlackBerry=has("esri-blackberry");_c8.isTouchEnabled=has("esri-touch");_c8.isPointerEnabled=has("esri-pointer");_c8._hasCors=has("esri-cors");_c8._hasFileUpload=has("esri-file-upload");_c8._hasTransforms=has("esri-transforms");_c8._hasTransitions=has("esri-transitions");_c8._has3DTransforms=has("esri-transforms3d");}return has;});},"esri/layers/Field":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/layers/RangeDomain","esri/layers/CodedValueDomain"],function(_df,_e0,has,_e1,_e2,_e3){var _e4=_df(null,{declaredClass:"esri.layers.Field",constructor:function(_e5){if(_e5&&_e0.isObject(_e5)){this.name=_e5.name;this.type=_e5.type;this.alias=_e5.alias;this.length=_e5.length;this.editable=_e5.editable;this.nullable=_e5.nullable;var _e6=_e5.domain;if(_e6&&_e0.isObject(_e6)){switch(_e6.type){case "range":this.domain=new _e2(_e6);break;case "codedValue":this.domain=new _e3(_e6);break;}}}}});if(has("extend-esri")){_e0.setObject("layers.Field",_e4,_e1);}return _e4;});},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(_e7,_e8,has){var _e9=window.location,_ea=_e9.pathname,_eb={version:3.4,_appBaseUrl:_e9.protocol+"//"+_e9.host+_ea.substring(0,_ea.lastIndexOf(_ea.split("/")[_ea.split("/").length-1]))};if(!_e8.noGlobals){window.esri=_eb;}if(!_e7.isAsync){has.add("extend-esri",1);}var _ec=_eb.dijit=(_eb.dijit||{});_ec._arcgisUrl=_e9.protocol+"//www.arcgis.com/sharing/rest";return _eb;});},"esri/symbols/jsonUtils":function(){define(["dojo/_base/lang","dojo/has","esri/kernel","esri/symbols/SimpleMarkerSymbol","esri/symbols/PictureMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/CartographicLineSymbol","esri/symbols/SimpleFillSymbol","esri/symbols/PictureFillSymbol","esri/symbols/TextSymbol"],function(_ed,has,_ee,_ef,_f0,_f1,_f2,_f3,_f4,_f5){var _f6={fromJson:function(_f7){var _f8=_f7.type,_f9=null;switch(_f8.substring(0,"esriXX".length)){case "esriSM":_f9=new _ef(_f7);break;case "esriPM":_f9=new _f0(_f7);break;case "esriTS":_f9=new _f5(_f7);break;case "esriSL":if(_f7.cap!==undefined){_f9=new _f2(_f7);}else{_f9=new _f1(_f7);}break;case "esriSF":_f9=new _f3(_f7);break;case "esriPF":_f9=new _f4(_f7);break;}return _f9;},getShapeDescriptors:function(_fa){return (_fa&&_fa.getShapeDescriptors)?_fa.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null};}};if(has("extend-esri")){_ed.mixin(_ed.getObject("symbol",true,_ee),_f6);}return _f6;});},"dojox/gfx/matrix":function(){define("dojox/gfx/matrix",["./_base","dojo/_base/lang"],function(g,_fb){var m=g.matrix={};var _fc={};m._degToRad=function(_fd){return _fc[_fd]||(_fc[_fd]=(Math.PI*_fd/180));};m._radToDeg=function(_fe){return _fe/Math.PI*180;};m.Matrix2D=function(arg){if(arg){if(typeof arg=="number"){this.xx=this.yy=arg;}else{if(arg instanceof Array){if(arg.length>0){var _ff=m.normalize(arg[0]);for(var i=1;i<arg.length;++i){var l=_ff,r=m.normalize(arg[i]);_ff=new m.Matrix2D();_ff.xx=l.xx*r.xx+l.xy*r.yx;_ff.xy=l.xx*r.xy+l.xy*r.yy;_ff.yx=l.yx*r.xx+l.yy*r.yx;_ff.yy=l.yx*r.xy+l.yy*r.yy;_ff.dx=l.xx*r.dx+l.xy*r.dy+l.dx;_ff.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}_fb.mixin(this,_ff);}}else{_fb.mixin(this,arg);}}}};_fb.extend(m.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});_fb.mixin(m,{identity:new m.Matrix2D(),flipX:new m.Matrix2D({xx:-1}),flipY:new m.Matrix2D({yy:-1}),flipXY:new m.Matrix2D({xx:-1,yy:-1}),translate:function(a,b){if(arguments.length>1){return new m.Matrix2D({dx:a,dy:b});}return new m.Matrix2D({dx:a.x,dy:a.y});},scale:function(a,b){if(arguments.length>1){return new m.Matrix2D({xx:a,yy:b});}if(typeof a=="number"){return new m.Matrix2D({xx:a,yy:a});}return new m.Matrix2D({xx:a.x,yy:a.y});},rotate:function(_100){var c=Math.cos(_100);var s=Math.sin(_100);return new m.Matrix2D({xx:c,xy:-s,yx:s,yy:c});},rotateg:function(_101){return m.rotate(m._degToRad(_101));},skewX:function(_102){return new m.Matrix2D({xy:Math.tan(_102)});},skewXg:function(_103){return m.skewX(m._degToRad(_103));},skewY:function(_104){return new m.Matrix2D({yx:Math.tan(_104)});},skewYg:function(_105){return m.skewY(m._degToRad(_105));},reflect:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=2*a*b/n2;return new m.Matrix2D({xx:2*a2/n2-1,xy:xy,yx:xy,yy:2*b2/n2-1});},project:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=a*b/n2;return new m.Matrix2D({xx:a2/n2,xy:xy,yx:xy,yy:b2/n2});},normalize:function(_106){return (_106 instanceof m.Matrix2D)?_106:new m.Matrix2D(_106);},isIdentity:function(_107){return _107.xx==1&&_107.xy==0&&_107.yx==0&&_107.yy==1&&_107.dx==0&&_107.dy==0;},clone:function(_108){var obj=new m.Matrix2D();for(var i in _108){if(typeof (_108[i])=="number"&&typeof (obj[i])=="number"&&obj[i]!=_108[i]){obj[i]=_108[i];}}return obj;},invert:function(_109){var M=m.normalize(_109),D=M.xx*M.yy-M.xy*M.yx;M=new m.Matrix2D({xx:M.yy/D,xy:-M.xy/D,yx:-M.yx/D,yy:M.xx/D,dx:(M.xy*M.dy-M.yy*M.dx)/D,dy:(M.yx*M.dx-M.xx*M.dy)/D});return M;},_multiplyPoint:function(_10a,x,y){return {x:_10a.xx*x+_10a.xy*y+_10a.dx,y:_10a.yx*x+_10a.yy*y+_10a.dy};},multiplyPoint:function(_10b,a,b){var M=m.normalize(_10b);if(typeof a=="number"&&typeof b=="number"){return m._multiplyPoint(M,a,b);}return m._multiplyPoint(M,a.x,a.y);},multiplyRectangle:function(_10c,rect){var M=m.normalize(_10c);rect=rect||{x:0,y:0,width:0,height:0};if(m.isIdentity(M)){return {x:rect.x,y:rect.y,width:rect.width,height:rect.height};}var p0=m.multiplyPoint(M,rect.x,rect.y),p1=m.multiplyPoint(M,rect.x,rect.y+rect.height),p2=m.multiplyPoint(M,rect.x+rect.width,rect.y),p3=m.multiplyPoint(M,rect.x+rect.width,rect.y+rect.height),minx=Math.min(p0.x,p1.x,p2.x,p3.x),miny=Math.min(p0.y,p1.y,p2.y,p3.y),maxx=Math.max(p0.x,p1.x,p2.x,p3.x),maxy=Math.max(p0.y,p1.y,p2.y,p3.y);return {x:minx,y:miny,width:maxx-minx,height:maxy-miny};},multiply:function(_10d){var M=m.normalize(_10d);for(var i=1;i<arguments.length;++i){var l=M,r=m.normalize(arguments[i]);M=new m.Matrix2D();M.xx=l.xx*r.xx+l.xy*r.yx;M.xy=l.xx*r.xy+l.xy*r.yy;M.yx=l.yx*r.xx+l.yy*r.yx;M.yy=l.yx*r.xy+l.yy*r.yy;M.dx=l.xx*r.dx+l.xy*r.dy+l.dx;M.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}return M;},_sandwich:function(_10e,x,y){return m.multiply(m.translate(x,y),_10e,m.translate(-x,-y));},scaleAt:function(a,b,c,d){switch(arguments.length){case 4:return m._sandwich(m.scale(a,b),c,d);case 3:if(typeof c=="number"){return m._sandwich(m.scale(a),b,c);}return m._sandwich(m.scale(a,b),c.x,c.y);}return m._sandwich(m.scale(a),b.x,b.y);},rotateAt:function(_10f,a,b){if(arguments.length>2){return m._sandwich(m.rotate(_10f),a,b);}return m._sandwich(m.rotate(_10f),a.x,a.y);},rotategAt:function(_110,a,b){if(arguments.length>2){return m._sandwich(m.rotateg(_110),a,b);}return m._sandwich(m.rotateg(_110),a.x,a.y);},skewXAt:function(_111,a,b){if(arguments.length>2){return m._sandwich(m.skewX(_111),a,b);}return m._sandwich(m.skewX(_111),a.x,a.y);},skewXgAt:function(_112,a,b){if(arguments.length>2){return m._sandwich(m.skewXg(_112),a,b);}return m._sandwich(m.skewXg(_112),a.x,a.y);},skewYAt:function(_113,a,b){if(arguments.length>2){return m._sandwich(m.skewY(_113),a,b);}return m._sandwich(m.skewY(_113),a.x,a.y);},skewYgAt:function(_114,a,b){if(arguments.length>2){return m._sandwich(m.skewYg(_114),a,b);}return m._sandwich(m.skewYg(_114),a.x,a.y);}});g.Matrix2D=m.Matrix2D;return m;});},"esri/renderers/SymbolAger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_115,lang,has,_116){var _117=_115(null,{declaredClass:"esri.renderer.SymbolAger",getAgedSymbol:function(_118,_119){},_setSymbolSize:function(_11a,size){switch(_11a.type){case "simplemarkersymbol":_11a.setSize(size);break;case "picturemarkersymbol":_11a.setWidth(size);_11a.setHeight(size);break;case "simplelinesymbol":case "cartographiclinesymbol":_11a.setWidth(size);break;case "simplefillsymbol":case "picturefillsymbol":if(_11a.outline){_11a.outline.setWidth(size);}break;}}});if(has("extend-esri")){lang.setObject("renderer.SymbolAger",_117,_116);}return _117;});},"esri/geometry/normalizeUtils":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/_base/Deferred","dojo/has","esri/kernel","esri/config","esri/deferredUtils","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/webMercatorUtils","esri/geometry/jsonUtils"],function(_11b,lang,_11c,has,_11d,_11e,_11f,_120,_121,_122,_123){function _124(_125,_126){return Math.ceil((_125-_126)/(_126*2));};function _127(_128,_129){var _12a=_128.paths||_128.rings,i,j,il=_12a.length,jl;for(i=0;i<il;i++){var _12b=_12a[i];jl=_12b.length;for(j=0;j<jl;j++){var _12c=_128.getPoint(i,j);_128.setPoint(i,j,_12c.offset(_129,0));}}return _128;};function _12d(geom,_12e){if(!(geom instanceof _120||geom instanceof _121)){var msg="_straightLineDensify: the input geometry is neither polyline nor polygon";console.error(msg);throw new Error(msg);}var _12f=geom instanceof _120,_130=_12f?geom.paths:geom.rings,_131=[],_132;_11b.forEach(_130,function(ring){_131.push(_132=[]);_132.push([ring[0][0],ring[0][1]]);var x1,y1,x2,y2;var i,j,_133,_134,_135,_136,xj,yj;for(i=0;i<ring.length-1;i++){x1=ring[i][0];y1=ring[i][1];x2=ring[i+1][0];y2=ring[i+1][1];_133=Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1));_134=(y2-y1)/_133;_135=(x2-x1)/_133;_136=_133/_12e;if(_136>1){for(j=1;j<=_136-1;j++){var _137=j*_12e;xj=_135*_137+x1;yj=_134*_137+y1;_132.push([xj,yj]);}var _138=(_133+Math.floor(_136-1)*_12e)/2;xj=_135*_138+x1;yj=_134*_138+y1;_132.push([xj,yj]);}_132.push([x2,y2]);}});if(_12f){return new _120({paths:_131,spatialReference:geom.spatialReference});}else{return new _121({rings:_131,spatialReference:geom.spatialReference});}};function _139(_13a,_13b,_13c){var _13d=1000000;if(_13b){var _13e=_12d(_13a,_13d);_13a=_122.webMercatorToGeographic(_13e,true);}if(_13c){_13a=_127(_13a,_13c);}return _13a;};function _13f(_140,maxX,minX){var _141=_140.x||_140[0];var _142;if(_141>maxX){_142=_124(_141,maxX);if(_140.x){_140=_140.offset(_142*(-2*maxX),0);}else{_140[0]=_141+(_142*(-2*maxX));}}else{if(_141<minX){_142=_124(_141,minX);if(_140.x){_140=_140.offset(_142*(-2*minX),0);}else{_140[0]=_141+(_142*(-2*minX));}}}return _140;};function _143(_144,_145){var _146=-1;_11b.forEach(_145.cutIndexes,function(_147,i){var _148=_145.geometries[i];var _149=_148.rings||_148.paths;_11b.forEach(_149,function(_14a,_14b){_11b.some(_14a,function(_14c){if(_14c[0]<180){return true;}else{var _14d=0,j,jl=_14a.length,ptX;for(j=0;j<jl;j++){ptX=_14a[j][0];_14d=ptX>_14d?ptX:_14d;}var _14e=_124(_14d,180),_14f=_14e*-360,_150,_151=_14a.length;for(_150=0;_150<_151;_150++){var _152=_148.getPoint(_14b,_150);_148.setPoint(_14b,_150,_152.offset(_14f,0));}return true;}});});if(_147===_146){if(_148.rings){_11b.forEach(_148.rings,function(ring,j){_144[_147]=_144[_147].addRing(ring);});}else{_11b.forEach(_148.paths,function(path,j){_144[_147]=_144[_147].addPath(path);});}}else{_146=_147;_144[_147]=_148;}});return _144;};function _153(_154,_155,_156,_157){var dfd=new _11c();dfd.addCallbacks(_156,_157);var _158=[],_159=[],_15a,info,_15b,maxX,minX,wkid,_15c,_15d,_15e=0;_11b.forEach(_154,function(_15f){if(!_15f){_158.push(_15f);return;}if(!_15a){_15a=_15f.spatialReference;info=_15a._getInfo();_15b=_15a._isWebMercator();maxX=_15b?20037508.342788905:180;minX=_15b?-20037508.342788905:-180;wkid=_15b?102100:4326;_15c=new _120({"paths":[[[maxX,minX],[maxX,maxX]]],"spatialReference":{"wkid":wkid}});_15d=new _120({"paths":[[[minX,minX],[minX,maxX]]],"spatialReference":{"wkid":wkid}});}if(!info){_158.push(_15f);return;}var _160=_123.fromJson(_15f.toJson()),_161=_15f.getExtent();if(_15f.type==="point"){_158.push(_13f(_160,maxX,minX));}else{if(_15f.type==="multipoint"){_160.points=_11b.map(_160.points,function(_162){return _13f(_162,maxX,minX);});_158.push(_160);}else{if(_15f.type==="extent"){var _163=_161._normalize(null,null,info);_158.push(_163.rings?new _121(_163):_163);}else{var _164=_124(_161.xmin,minX),_165=_164*(2*maxX);_160=(_165===0)?_160:_127(_160,_165);_161=_161.offset(_165,0);if(_161.intersects(_15c)&&(_161.xmax!==maxX)){_15e=(_161.xmax>_15e)?_161.xmax:_15e;_160=_139(_160,_15b);_159.push(_160);_158.push("cut");}else{if(_161.intersects(_15d)&&(_161.xmin!==minX)){_15e=(_161.xmax*(2*maxX)>_15e)?_161.xmax*(2*maxX):_15e;_160=_139(_160,_15b,360);_159.push(_160);_158.push("cut");}else{_158.push(_160);}}}}}});var _166=new _120(),_167=_124(_15e,maxX),_168=-90,_169=_167;while(_167>0){var _16a=-180+(360*_167);_166.addPath([[_16a,_168],[_16a,_168*-1]]);_168=_168*-1;_167--;}if(_159.length>0&&_169>0){if(_155){_155.cut(_159,_166,function(_16b){_159=_143(_159,_16b);var _16c=[];_11b.forEach(_158,function(_16d,i){if(_16d==="cut"){var _16e=_159.shift();if((_154[i].rings)&&(_154[i].rings.length>1)&&(_16e.rings.length>=_154[i].rings.length)){_158[i]="simplify";_16c.push(_16e);}else{_158[i]=(_15b===true)?_122.geographicToWebMercator(_16e):_16e;}}});if(_16c.length>0){_155.simplify(_16c,function(_16f){_11b.forEach(_158,function(_170,i){if(_170==="simplify"){_158[i]=(_15b===true)?_122.geographicToWebMercator(_16f.shift()):_16f.shift();}});dfd.callback(_158);},function(_171){dfd.errback(_171);});}else{dfd.callback(_158);}},function(_172){dfd.errback(_172);});}else{dfd.errback(new Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing."));}}else{_11b.forEach(_158,function(_173,i){if(_173==="cut"){var _174=_159.shift();_158[i]=(_15b===true)?_122.geographicToWebMercator(_174):_174;}});dfd.callback(_158);}return dfd;};function _175(_176,_177,_178,_179){var flag=false,_17a;if(lang.isObject(_176)&&_176){if(lang.isArray(_176)){if(_176.length){_17a=_176[0]&&_176[0].declaredClass;if(_17a&&_17a.indexOf("Graphic")!==-1){_176=_11b.map(_176,function(_17b){return _17b.geometry;});flag=_176.length?true:false;}else{if(_17a&&_17a.indexOf("esri.geometry.")!==-1){flag=true;}}}}else{_17a=_176.declaredClass;if(_17a&&_17a.indexOf("FeatureSet")!==-1){_176=_11b.map(_176.features||[],function(_17c){return _17c.geometry;});flag=_176.length?true:false;}else{if(_17a&&_17a.indexOf("esri.geometry.")!==-1){flag=true;}}}}if(flag){_177.push({index:_178,property:_179,value:_176});}};function _17d(_17e,_17f){var _180=[];_11b.forEach(_17f,function(_181){var _182=_181.i,arg=_17e[_182],_183=_181.p,prop;if(!lang.isObject(arg)||!arg){return;}if(_183){if(_183[0]==="*"){for(prop in arg){if(arg.hasOwnProperty(prop)){_175(arg[prop],_180,_182,prop);}}}else{_11b.forEach(_183,function(prop){_175(lang.getObject(prop,false,arg),_180,_182,prop);});}}else{_175(arg,_180,_182);}});return _180;};function _184(_185,_186){var idx=0,_187={};_11b.forEach(_186,function(comp){var _188=comp.index,_189=comp.property,_18a=comp.value,len=_18a.length||1;var _18b=_185.slice(idx,idx+len);if(!lang.isArray(_18a)){_18b=_18b[0];}idx+=len;delete comp.value;if(_189){_187[_188]=_187[_188]||{};_187[_188][_189]=_18b;}else{_187[_188]=_18b;}});return _187;};function _18c(_18d){var _18e=(lang.isObject(_18d))?_18d.prototype:lang.getObject(_18d+".prototype");_11b.forEach(_18e.__msigns,function(sig){var _18f=_18e[sig.n];_18e[sig.n]=function(){var self=this,_190=[],i,_191=new _11c(_11f._dfdCanceller);if(sig.f){_11f._fixDfd(_191);}for(i=0;i<sig.c;i++){_190[i]=arguments[i];}var _192={dfd:_191};_190.push(_192);var _193,_194=[],_195;if(self.normalization&&!self._isTable){_193=_17d(_190,sig.a);_11b.forEach(_193,function(comp){_194=_194.concat(comp.value);});if(_194.length){_195=_153(_194,_11e.defaults.geometryService);}}if(_195){_191._pendingDfd=_195;_195.addCallbacks(function(_196){if(_191.canceled){return;}_192.assembly=_184(_196,_193);_191._pendingDfd=_18f.apply(self,_190);},function(err){var _197=self.declaredClass;if(_197&&_197.indexOf("FeatureLayer")!==-1){self._resolve([err],null,_190[sig.e],_191,true);}else{self._errorHandler(err,_190[sig.e],_191);}});}else{_191._pendingDfd=_18f.apply(self,_190);}return _191;};});};var _198={normalizeCentralMeridian:_153,_foldCutResults:_143,_prepareGeometryForCut:_139,_offsetMagnitude:_124,_pointNormalization:_13f,_updatePolyGeometry:_127,_straightLineDensify:_12d,_createWrappers:_18c,_disassemble:_17d,_addToBucket:_175,_reassemble:_184};if(has("extend-esri")){lang.mixin(lang.getObject("geometry",true,_11d),_198);}return _198;});},"dojo/request/iframe":function(){define(["module","require","./watch","./util","./handlers","../_base/lang","../io-query","../query","../has","../dom","../dom-construct","../_base/window"],function(_199,_19a,_19b,util,_19c,lang,_19d,_19e,has,dom,_19f,win){var mid=_199.id.replace(/[\/\.\-]/g,"_"),_1a0=mid+"_onload";if(!win.global[_1a0]){win.global[_1a0]=function(){var dfd=_1a1._currentDfd;if(!dfd){_1a1._fireNextRequest();return;}var _1a2=dfd.response,_1a3=_1a2.options,_1a4=dom.byId(_1a3.form)||dfd._tmpForm;if(_1a4){var _1a5=dfd._contentToClean;for(var i=0;i<_1a5.length;i++){var key=_1a5[i];for(var j=0;j<_1a4.childNodes.length;j++){var _1a6=_1a4.childNodes[j];if(_1a6.name===key){_19f.destroy(_1a6);break;}}}dfd._originalAction&&_1a4.setAttribute("action",dfd._originalAction);if(dfd._originalMethod){_1a4.setAttribute("method",dfd._originalMethod);_1a4.method=dfd._originalMethod;}if(dfd._originalTarget){_1a4.setAttribute("target",dfd._originalTarget);_1a4.target=dfd._originalTarget;}}if(dfd._tmpForm){_19f.destroy(dfd._tmpForm);delete dfd._tmpForm;}dfd._finished=true;};}function _1a7(name,_1a8,uri){if(win.global[name]){return win.global[name];}if(win.global.frames[name]){return win.global.frames[name];}if(!uri){if(has("config-useXDomain")&&!has("config-dojoBlankHtmlUrl")){console.warn("dojo/request/iframe: When using cross-domain Dojo builds,"+" please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl"+" to the path on your domain to blank.html");}uri=(has("config-dojoBlankHtmlUrl")||_19a.toUrl("dojo/resources/blank.html"));}var _1a9=_19f.place("<iframe id=\""+name+"\" name=\""+name+"\" src=\""+uri+"\" onload=\""+_1a8+"\" style=\"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden\">",win.body());win.global[name]=_1a9;return _1a9;};function _1aa(_1ab,src,_1ac){var _1ad=win.global.frames[_1ab.name];if(_1ad.contentWindow){_1ad=_1ad.contentWindow;}try{if(!_1ac){_1ad.location=src;}else{_1ad.location.replace(src);}}catch(e){console.log("dojo/request/iframe.setSrc: ",e);}};function doc(_1ae){if(_1ae.contentDocument){return _1ae.contentDocument;}var name=_1ae.name;if(name){var _1af=win.doc.getElementsByTagName("iframe");if(_1ae.document&&_1af[name].contentWindow&&_1af[name].contentWindow.document){return _1af[name].contentWindow.document;}else{if(win.doc.frames[name]&&win.doc.frames[name].document){return win.doc.frames[name].document;}}}return null;};function _1b0(){return _19f.create("form",{name:mid+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},win.body());};function _1b1(){var dfd;try{if(_1a1._currentDfd||!_1a1._dfdQueue.length){return;}do{dfd=_1a1._currentDfd=_1a1._dfdQueue.shift();}while(dfd&&(dfd.canceled||(dfd.isCanceled&&dfd.isCanceled()))&&_1a1._dfdQueue.length);if(!dfd||dfd.canceled||(dfd.isCanceled&&dfd.isCanceled())){_1a1._currentDfd=null;return;}var _1b2=dfd.response,_1b3=_1b2.options,c2c=dfd._contentToClean=[],_1b4=dom.byId(_1b3.form),_1b5=util.notify,data=_1b3.data||null,_1b6;if(!dfd._legacy&&_1b3.method==="POST"&&!_1b4){_1b4=dfd._tmpForm=_1b0();}else{if(_1b3.method==="GET"&&_1b4&&_1b2.url.indexOf("?")>-1){_1b6=_1b2.url.slice(_1b2.url.indexOf("?")+1);data=lang.mixin(_19d.queryToObject(_1b6),data);}}if(_1b4){if(!dfd._legacy){var _1b7=_1b4;do{_1b7=_1b7.parentNode;}while(_1b7!==win.doc.documentElement);if(!_1b7){_1b4.style.position="absolute";_1b4.style.left="-1000px";_1b4.style.top="-1000px";win.body().appendChild(_1b4);}if(!_1b4.name){_1b4.name=mid+"_form";}}if(data){var _1b8=function(name,_1b9){_19f.create("input",{type:"hidden",name:name,value:_1b9},_1b4);c2c.push(name);};for(var x in data){var val=data[x];if(lang.isArray(val)&&val.length>1){for(var i=0;i<val.length;i++){_1b8(x,val[i]);}}else{if(!_1b4[x]){_1b8(x,val);}else{_1b4[x].value=val;}}}}var _1ba=_1b4.getAttributeNode("action"),_1bb=_1b4.getAttributeNode("method"),_1bc=_1b4.getAttributeNode("target");if(_1b2.url){dfd._originalAction=_1ba?_1ba.value:null;if(_1ba){_1ba.value=_1b2.url;}else{_1b4.setAttribute("action",_1b2.url);}}if(!dfd._legacy){dfd._originalMethod=_1bb?_1bb.value:null;if(_1bb){_1bb.value=_1b3.method;}else{_1b4.setAttribute("method",_1b3.method);}}else{if(!_1bb||!_1bb.value){if(mthdNode){mthdNode.value=_1b3.method;}else{fn.setAttribute("method",_1b3.method);}}}dfd._originalTarget=_1bc?_1bc.value:null;if(_1bc){_1bc.value=_1a1._iframeName;}else{_1b4.setAttribute("target",_1a1._iframeName);}_1b4.target=_1a1._iframeName;_1b5&&_1b5.emit("send",_1b2,dfd.promise.cancel);_1a1._notifyStart(_1b2);_1b4.submit();}else{var _1bd="";if(_1b2.options.data){_1bd=_1b2.options.data;if(typeof _1bd!=="string"){_1bd=_19d.objectToQuery(_1bd);}}var _1be=_1b2.url+(_1b2.url.indexOf("?")>-1?"&":"?")+_1bd;_1b5&&_1b5.emit("send",_1b2,dfd.promise.cancel);_1a1._notifyStart(_1b2);_1a1.setSrc(_1a1._frame,_1be,true);}}catch(e){dfd.reject(e);}};function _1bf(_1c0){return !this.isFulfilled();};function _1c1(_1c2){return !!this._finished;};function _1c3(_1c4,_1c5){if(!_1c5){try{var _1c6=_1c4.options,doc=_1a1.doc(_1a1._frame),_1c7=_1c6.handleAs;if(_1c7!=="html"){if(_1c7==="xml"){if(doc.documentElement.tagName.toLowerCase()==="html"){_19e("a",doc.documentElement).orphan();var _1c8=doc.documentElement.innerText;_1c8=_1c8.replace(/>\s+</g,"><");_1c4.text=lang.trim(_1c8);}else{_1c4.data=doc;}}else{_1c4.text=doc.getElementsByTagName("textarea")[0].value;}_19c(_1c4);}else{_1c4.data=doc;}}catch(e){_1c5=e;}}if(_1c5){this.reject(_1c5);}else{if(this._finished){this.resolve(_1c4);}else{this.reject(new Error("Invalid dojo/request/iframe request state"));}}};function last(_1c9){this._callNext();};var _1ca={method:"POST"};function _1a1(url,_1cb,_1cc){var _1cd=util.parseArgs(url,util.deepCreate(_1ca,_1cb),true);url=_1cd.url;_1cb=_1cd.options;if(_1cb.method!=="GET"&&_1cb.method!=="POST"){throw new Error(_1cb.method+" not supported by dojo/request/iframe");}if(!_1a1._frame){_1a1._frame=_1a1.create(_1a1._iframeName,_1a0+"();");}var dfd=util.deferred(_1cd,null,_1bf,_1c1,_1c3,last);dfd._callNext=function(){if(!this._calledNext){this._calledNext=true;_1a1._currentDfd=null;_1a1._fireNextRequest();}};dfd._legacy=_1cc;_1a1._dfdQueue.push(dfd);_1a1._fireNextRequest();_19b(dfd);return _1cc?dfd:dfd.promise;};_1a1.create=_1a7;_1a1.doc=doc;_1a1.setSrc=_1aa;_1a1._iframeName=mid+"_IoIframe";_1a1._notifyStart=function(){};_1a1._dfdQueue=[];_1a1._currentDfd=null;_1a1._fireNextRequest=_1b1;util.addCommonMethods(_1a1,["GET","POST"]);return _1a1;});},"esri/symbols/CartographicLineSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","dojox/gfx/_base","esri/kernel","esri/lang","esri/symbols/SimpleLineSymbol"],function(_1ce,lang,_1cf,has,_1d0,_1d1,_1d2,_1d3){var _1d4={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"};var _1d5={color:[0,0,0,1],style:_1d4.STYLE_SOLID,width:1,cap:_1d4.CAP_BUTT,join:_1d4.JOIN_MITER,miterLimit:10};var CLS=_1ce(_1d3,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",bevel:"esriLJSBevel"},constructor:function(json,_1d6,_1d7,cap,join,_1d8){if(json){if(lang.isString(json)){this.style=json;if(_1d6){this.color=_1d6;}if(_1d7!==undefined){this.width=_1d7;}if(cap){this.cap=cap;}if(join){this.join=join;}if(_1d8!==undefined){this.miterLimit=_1d8;}}else{this.cap=_1d2.valueOf(this._caps,json.cap);this.join=_1d2.valueOf(this._joins,json.join);this.width=_1d0.pt2px(json.width);this.miterLimit=_1d0.pt2px(json.miterLimit);}}else{lang.mixin(this,_1d5);this.color=new _1cf(this.color);this.width=_1d0.pt2px(this.width);this.miterLimit=_1d0.pt2px(this.miterLimit);}},setCap:function(cap){this.cap=cap;return this;},setJoin:function(join){this.join=join;return this;},setMiterLimit:function(_1d9){this.miterLimit=_1d9;return this;},getStroke:function(){return lang.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:(this.join===_1d4.JOIN_MITER?this.miterLimit:this.join)});},getFill:function(){return null;},getShapeDescriptors:function(){return {defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()};},toJson:function(){var _1da=_1d0.px2pt(this.miterLimit);_1da=isNaN(_1da)?undefined:_1da;return _1d2.fixJson(lang.mixin(this.inherited("toJson",arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:_1da}));}});lang.mixin(CLS,_1d4);CLS.defaultProps=_1d5;if(has("extend-esri")){lang.setObject("symbol.CartographicLineSymbol",CLS,_1d1);_1d1.symbol.defaultCartographicLineSymbol=_1d5;}return CLS;});},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(lang,i18n){var _1db={};lang.setObject("dojo.cldr.supplemental",_1db);_1db.getFirstDayOfWeek=function(_1dc){var _1dd={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0};var _1de=_1db._region(_1dc);var dow=_1dd[_1de];return (dow===undefined)?1:dow;};_1db._region=function(_1df){_1df=i18n.normalizeLocale(_1df);var tags=_1df.split("-");var _1e0=tags[1];if(!_1e0){_1e0={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",he:"il",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[tags[0]];}else{if(_1e0.length==4){_1e0=tags[2];}}return _1e0;};_1db.getWeekend=function(_1e1){var _1e2={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5},_1e3={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6},_1e4=_1db._region(_1e1),_1e5=_1e2[_1e4],end=_1e3[_1e4];if(_1e5===undefined){_1e5=6;}if(end===undefined){end=0;}return {start:_1e5,end:end};};return _1db;});},"esri/geometry/scaleUtils":function(){define(["dojo/_base/lang","dojo/has","esri/kernel","esri/config","esri/lang","esri/WKIDUnitConversion"],function(lang,has,esri,_1e6,_1e7,_1e8){var _1e9=39.37,_1ea=20015077/180,ecd=_1e6.defaults,_1eb=_1e8;function _1ec(_1ed,_1ee,_1ef){return (_1ed&&_1ee)?((_1ed.getWidth()/_1ee)*(_1ef||_1ea)*_1e9*ecd.screenDPI):0;};function _1f0(_1f1,_1f2,wkid,_1f3,_1f4){var _1f5;if(_1f4){_1f5=wkid;}else{_1f5=_1eb.values[_1eb[wkid]];}return _1f1.expand(((_1f3*_1f2)/((_1f5||_1ea)*_1e9*ecd.screenDPI))/_1f1.getWidth());};var _1f6={getScale:function(map,_1f7,wkid){var _1f8,_1f9,wkt;if(arguments.length>1&&(_1e7.isDefined(_1f7)&&!_1f7.declaredClass)){_1f8=map;_1f9=_1f7;_1f7=null;}else{_1f8=map.extent;_1f9=map.width;var sr=map.spatialReference;if(sr){wkid=sr.wkid;wkt=sr.wkt;}}var _1fa;if(wkid){_1fa=_1eb.values[_1eb[wkid]];}else{if(wkt&&(wkt.search(/^PROJCS/i)!==-1)){var _1fb=/UNIT\[([^\]]+)\]\]$/i.exec(wkt);if(_1fb&&_1fb[1]){_1fa=parseFloat(_1fb[1].split(",")[1]);}}}return _1ec(_1f7||_1f8,_1f9,_1fa);},getExtentForScale:function(map,_1fc,_1fd){var wkid,wkt,sr=map.spatialReference;if(sr){wkid=sr.wkid;wkt=sr.wkt;}var _1fe;if(wkid){_1fe=_1eb.values[_1eb[wkid]];}else{if(wkt&&(wkt.search(/^PROJCS/i)!==-1)){var _1ff=/UNIT\[([^\]]+)\]\]$/i.exec(wkt);if(_1ff&&_1ff[1]){_1fe=parseFloat(_1ff[1].split(",")[1]);}}}return _1f0(_1fd||map.extent,map.width,_1fe,_1fc,true);}};if(has("extend-esri")){lang.mixin(lang.getObject("geometry",true,esri),_1f6);esri.geometry._getScale=_1ec;esri.geometry._getExtentForScale=_1f0;}return _1f6;});},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","esri/kernel"],function(lang,has,_200){var _201={_dfdCanceller:function(dfd){dfd.canceled=true;var _202=dfd._pendingDfd;if(dfd.fired===-1&&_202&&_202.fired===-1){_202.cancel();}dfd._pendingDfd=null;},_fixDfd:function(dfd){var _203=dfd.then;dfd.then=function(_204,b,c){if(_204){var _205=_204;_204=function(_206){if(_206&&_206._argsArray){return _205.apply(null,_206);}return _205(_206);};}return _203.call(this,_204,b,c);};return dfd;},_resDfd:function(dfd,args,_207){var _208=args.length;if(_208===1){if(_207){dfd.errback(args[0]);}else{dfd.callback(args[0]);}}else{if(_208>1){args._argsArray=true;dfd.callback(args);}else{dfd.callback();}}}};if(has("extend-esri")){lang.mixin(_200,_201);}return _201;});},"esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/geometry/Extent"],function(lang,_209,has,_20a,_20b){var _20c={graphicsExtent:function(_20d){var g=_20d[0].geometry,_20e=g.getExtent(),ext,i,il=_20d.length;if(_20e===null){_20e=new _20b(g.x,g.y,g.x,g.y,g.spatialReference);}for(i=1;i<il;i++){ext=(g=_20d[i].geometry).getExtent();if(ext===null){ext=new _20b(g.x,g.y,g.x,g.y,g.spatialReference);}_20e=_20e.union(ext);}if(_20e.getWidth()<=0&&_20e.getHeight()<=0){return null;}return _20e;},getGeometries:function(_20f){return _209.map(_20f,function(_210){return _210.geometry;});},_encodeGraphics:function(_211,_212){var _213=[],json,enc,norm;_209.forEach(_211,function(g,i){json=g.toJson();enc={};if(json.geometry){norm=_212&&_212[i];enc.geometry=norm&&norm.toJson()||json.geometry;}if(json.attributes){enc.attributes=json.attributes;}_213[i]=enc;});return _213;}};if(has("extend-esri")){lang.mixin(_20a,_20c);}return _20c;});},"esri/layers/LayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(_214,lang,has,_215,_216){var _217=_214(null,{declaredClass:"esri.layers.LayerInfo",constructor:function(json){lang.mixin(this,json);},toJson:function(){var json={defaultVisibility:this.defaultVisibility,id:this.id,maxScale:this.maxScale,minScale:this.minScale,name:this.name,parentLayerId:this.parentLayerId,subLayerIds:this.subLayerIds};return _216.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.LayerInfo",_217,_215);}return _217;});},"esri/geometry/jsonUtils":function(){define(["dojo/_base/lang","dojo/has","esri/kernel","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Multipoint","esri/geometry/Extent"],function(lang,has,_218,_219,_21a,_21b,_21c,_21d){function _21e(json){if(json.x!==undefined&&json.y!==undefined){return new _219(json);}else{if(json.paths!==undefined){return new _21a(json);}else{if(json.rings!==undefined){return new _21b(json);}else{if(json.points!==undefined){return new _21c(json);}else{if(json.xmin!==undefined&&json.ymin!==undefined&&json.xmax!==undefined&&json.ymax!==undefined){return new _21d(json);}}}}}};function _21f(_220){if(_220 instanceof _219){return "esriGeometryPoint";}else{if(_220 instanceof _21a){return "esriGeometryPolyline";}else{if(_220 instanceof _21b){return "esriGeometryPolygon";}else{if(_220 instanceof _21d){return "esriGeometryEnvelope";}else{if(_220 instanceof _21c){return "esriGeometryMultipoint";}}}}}return null;};function _221(_222){if(_222==="esriGeometryPoint"){return _219;}else{if(_222==="esriGeometryPolyline"){return _21a;}else{if(_222==="esriGeometryPolygon"){return _21b;}else{if(_222==="esriGeometryEnvelope"){return _21d;}else{if(_222==="esriGeometryMultipoint"){return _21c;}}}}}return null;};var _223={fromJson:_21e,getJsonType:_21f,getGeometryType:_221};if(has("extend-esri")){lang.mixin(lang.getObject("geometry",true,_218),_223);}return _223;});},"esri/MapNavigationManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/event","dojo/mouse","dojo/keys","esri/kernel","esri/MouseEvents","esri/TouchEvents","esri/PointerEvents","esri/config","esri/sniff","esri/lang","esri/fx","esri/graphic","esri/tileUtils","esri/geometry/ScreenPoint","esri/geometry/Extent","esri/geometry/Rect","esri/geometry/mathUtils","esri/symbols/SimpleFillSymbol"],function(_224,lang,_225,_226,_227,_228,keys,_229,_22a,_22b,_22c,_22d,has,_22e,_22f,_230,_231,_232,_233,Rect,_234,_235){var _236=_226.connect,_237=_226.disconnect,_238=1,_239=-1,_23a=100,_23b=10,_23c=[keys.NUMPAD_PLUS,61,keys.NUMPAD_MINUS,keys.UP_ARROW,keys.NUMPAD_8,keys.RIGHT_ARROW,keys.NUMPAD_6,keys.DOWN_ARROW,keys.NUMPAD_2,keys.LEFT_ARROW,keys.NUMPAD_4,keys.PAGE_UP,keys.NUMPAD_9,keys.PAGE_DOWN,keys.NUMPAD_3,keys.END,keys.NUMPAD_1,keys.HOME,keys.NUMPAD_7];var _23d=_224(null,{declaredClass:"esri.MapNavigationManager",eventModel:"",constructor:function(map,_23e){this.map=map;lang.mixin(this,_23e);var node=map.__container;if(has("esri-touch")){this.touchEvents=new _22b(node,{map:map});this.eventModel="touch";}else{if(has("esri-pointer")){this.pointerEvents=new _22c(node,{map:map});this.eventModel="pointer";}else{this.mouseEvents=new _22a(node,{map:map});this.eventModel="mouse";this._zoomRect=new _230(null,new _235(_22d.defaults.map.zoomSymbol));}}this._keyDx=this._keyDy=0;this._adjustPinch=lang.hitch(this,this._adjustPinch);this._adjustPinchEnd=lang.hitch(this,this._adjustPinchEnd);},_panInit:function(evt){var _23f=this.mouseEvents;if(_228.isLeft(evt)&&this.map.isPan&&!evt.shiftKey){this._dragOrigin=new _232(0,0);lang.mixin(this._dragOrigin,evt.screenPoint);this._panStartHandle=_236(_23f,"onMouseDragStart",this,this._panStart);this._panHandle=_236(_23f,"onMouseDrag",this,this._pan);this._panEndHandle=_236(_23f,"onMouseUp",this,this._panEnd);if(has("chrome")){evt.preventDefault();}}},_panStart:function(evt){this.map.setCursor("move");this.map.__panStart(evt.screenPoint.x,evt.screenPoint.y);},_pan:function(evt){this.map.__pan(evt.screenPoint.x-this._dragOrigin.x,evt.screenPoint.y-this._dragOrigin.y);},_panEnd:function(evt){_237(this._panStartHandle);_237(this._panHandle);_237(this._panEndHandle);this._panStartHandle=this._panHandle=this._panEndHandle=null;var map=this.map;if(map.__panning){map.__panEnd(evt.screenPoint.x-this._dragOrigin.x,evt.screenPoint.y-this._dragOrigin.y);map.resetMapCursor();}},_zoomInit:function(evt){var map=this.map,_240=this.mouseEvents;if(_228.isLeft(evt)&&map.isRubberBandZoom&&evt.shiftKey){map.setCursor("crosshair");this._dragOrigin=lang.mixin({},evt.screenPoint);this._zoomDir=(evt.ctrlKey||evt.metaKey)?_239:_238;this._zoomHandle=_236(_240,"onMouseDrag",this,this._zoom);this._zoomEndHandle=_236(_240,"onMouseUp",this,this._zoomEnd);if(has("chrome")){evt.preventDefault();}}},_zoom:function(evt){var map=this.map,rect=this._normalizeRect(evt).offset(map.__visibleRect.x,map.__visibleRect.y),g=map.graphics,_241=this._zoomRect;if(!_241.geometry){map.setCursor("crosshair");}if(_241.geometry){g.remove(_241,true);}var tl=map.toMap(new _232(rect.x,rect.y)),br=map.toMap(new _232(rect.x+rect.width,rect.y+rect.height));rect=new Rect(tl.x,tl.y,br.x-tl.x,tl.y-br.y,map.spatialReference);rect._originOnly=true;_241.setGeometry(rect);g.add(_241,true);},_zoomEnd:function(evt){var _242=this._zoomRect,map=this.map,ext=map.extent,sr=map.spatialReference;_237(this._zoomHandle);_237(this._zoomEndHandle);this._zoomHandle=this._zoomEndHandle=null;if(map._canZoom(this._zoomDir)&&_242.getDojoShape()){map.graphics.remove(_242);_242.geometry=null;var rect=this._normalizeRect(evt);rect.x+=map.__visibleRect.x;rect.y+=map.__visibleRect.y;var _243;if(this._zoomDir===_239){var _244=ext.getWidth(),_245=(_244*map.width)/rect.width,_246=(_245-_244)/2;_243=new _233(ext.xmin-_246,ext.ymin-_246,ext.xmax+_246,ext.ymax+_246,sr);}else{var min=map.toMap({x:rect.x,y:(rect.y+rect.height)}),max=map.toMap({x:(rect.x+rect.width),y:rect.y});_243=new _233(min.x,min.y,max.x,max.y,sr);}map._extentUtil(null,null,_243);}if(_242.getDojoShape()){map.graphics.remove(_242,true);}this._zoomDir=0;map.resetMapCursor();},_wheelZoom:function(evt,_247){var map=this.map;if(!_247){if(map.smartNavigation&&!evt.shiftKey&&!map._isPanningOrZooming()){map.disableScrollWheelZoom();this._setScrollWheelPan(true);this._wheelPan(evt);return;}var _248=evt.timeStamp;if(!_22e.isDefined(_248)||_248<=0){_248=(new Date()).getTime();}var _249=this._mwts?(_248-this._mwts):_248;if(_249<_23a){return;}this._mwts=_248;}if(!map._canZoom(evt.value)){return;}map._extentUtil({numLevels:evt.value,mapAnchor:evt.mapPoint,screenAnchor:evt.screenPoint});},_wheelPan:function(evt){var map=this.map;if(evt.shiftKey&&!map._isPanningOrZooming()){this._setScrollWheelPan(false);map.enableScrollWheelZoom();this._wheelZoom(evt);return;}var dx=0,dy=0;if(has("ff")){if(evt.axis===evt.HORIZONTAL_AXIS){dx=-evt.detail;}else{dy=-evt.detail;}}else{dx=evt.wheelDeltaX;dy=evt.wheelDeltaY;}map.translate(dx,dy);},_setScrollWheelPan:function(_24a){var map=this.map;map.isScrollWheelPan=_24a;this.mouseEvents.enableMouseWheel(_24a);_237(this._mwMacHandle);this._mwMacHandle=null;if(_24a){this._mwMacHandle=_236(this.mouseEvents,"onMouseWheel",this,this._wheelPan);}},_recenter:function(evt){if(evt.shiftKey&&!this.map._isPanningOrZooming()){this.map.centerAt(evt.mapPoint);}},_recenterZoom:function(evt){if(evt.shiftKey&&!this.map._isPanningOrZooming()){evt.value=(evt.ctrlKey||evt.metaKey)?_239:_238;this._wheelZoom(evt,true);}},_dblClickZoom:function(evt){if(!this.map._isPanningOrZooming()){evt.value=1;this._wheelZoom(evt,true);}},_twoFingerTap:function(evt){if(!this.map._isPanningOrZooming()){evt.value=-1;this._wheelZoom(evt,true);}},_keyDown:function(evt){var code=evt.keyCode,map=this.map;if(_225.indexOf(_23c,code)!==-1){if(code===keys.NUMPAD_PLUS||code===61){map._extentUtil({numLevels:1});}else{if(code===keys.NUMPAD_MINUS){map._extentUtil({numLevels:-1});}else{if(!map.__panning){map.__panStart(0,0);}switch(code){case keys.UP_ARROW:case keys.NUMPAD_8:this._keyDy+=_23b;break;case keys.RIGHT_ARROW:case keys.NUMPAD_6:this._keyDx-=_23b;break;case keys.DOWN_ARROW:case keys.NUMPAD_2:this._keyDy-=_23b;break;case keys.LEFT_ARROW:case keys.NUMPAD_4:this._keyDx+=_23b;break;case keys.PAGE_UP:case keys.NUMPAD_9:this._keyDx-=_23b;this._keyDy+=_23b;break;case keys.PAGE_DOWN:case keys.NUMPAD_3:this._keyDx-=_23b;this._keyDy-=_23b;break;case keys.END:case keys.NUMPAD_1:this._keyDx+=_23b;this._keyDy-=_23b;break;case keys.HOME:case keys.NUMPAD_7:this._keyDx+=_23b;this._keyDy+=_23b;break;default:return;}map.__pan(this._keyDx,this._keyDy);}}_227.stop(evt);}},_keyEnd:function(evt){var map=this.map;if(map.__panning&&(evt.keyCode!==keys.SHIFT)){map.__panEnd(this._keyDx,this._keyDy);this._keyDx=this._keyDy=0;}},_swipeInit:function(evt){var map=this.map,_24b=map._zoomAnim||map._panAnim;if(_24b&&_24b._active){_24b.stop();_24b._fire("onEnd",[_24b.node]);}this._dragOrigin=new _232(0,0);lang.mixin(this._dragOrigin,evt.screenPoint);_237(this._swipeHandle);_237(this._swipeEndHandle);this._swipeHandle=_236(this.touchEvents||this.pointerEvents,"onSwipeMove",this,this._swipe);this._swipeEndHandle=_236(this.touchEvents||this.pointerEvents,"onSwipeEnd",this,this._swipeEnd);},_swipe:function(evt){var map=this.map;if(map.__panning){this._panX=evt.screenPoint.x;this._panY=evt.screenPoint.y;map.__pan(evt.screenPoint.x-this._dragOrigin.x,evt.screenPoint.y-this._dragOrigin.y);}else{map.setCursor("move");map.__panStart(evt.screenPoint.x,evt.screenPoint.y);}},_swipeEnd:function(evt){_237(this._swipeHandle);_237(this._swipeEndHandle);this._swipeHandle=this._swipeEndHandle=null;var map=this.map;if(map.__panning){map.resetMapCursor();map.__panEnd(evt.screenPoint.x-this._dragOrigin.x,evt.screenPoint.y-this._dragOrigin.y);}},_pinchInit:function(evt){var map=this.map,_24c=map._zoomAnim||map._panAnim;if(_24c&&_24c._active){_24c.stop();_24c._fire("onEnd",[_24c.node]);}else{if(map.__panning){evt.screenPoint=new _232(this._panX,this._panY);evt.mapPoint=map.toMap(evt.screenPoint);this._swipeEnd(evt);}}_237(this._pinchHandle);_237(this._pinchEndHandle);this._pinchHandle=_236(this.touchEvents||this.pointerEvents,"onPinchMove",this,this._pinch);this._pinchEndHandle=_236(this.touchEvents||this.pointerEvents,"onPinchEnd",this,this._pinchEnd);},_pinch:function(evt){var map=this.map;if(evt.screenPoints){this.currLength=_234.getLength(evt.screenPoints[0],evt.screenPoints[1]);if(map.__zooming){var _24d=this.currLength/this._length;this._zoomStartExtent=this.__scaleExtent(map.extent,_24d,this._dragOrigin);map.__zoom(this._zoomStartExtent,_24d,this._dragOrigin);}else{this._dragOrigin=new _232((evt.screenPoints[0].x+evt.screenPoints[1].x)/2,(evt.screenPoints[0].y+evt.screenPoints[1].y)/2);this._length=this.currLength;map.__zoomStart(map.extent,this._dragOrigin);}map._fireOnScale(this.currLength/this._length,this._dragOrigin,true);}},_pinchEnd:function(evt){var map=this.map;_237(this._pinchHandle);_237(this._pinchEndHandle);this._pinchHandle=this._pinchEndHandle=null;if(map.__zooming&&map._zoomAnim===null){var _24e=this.currLength/this._length,_24f=map.extent.getWidth();this._zoomAnimAnchor=map.toMap(this._dragOrigin);this._zoomStartExtent=this.__scaleExtent(map.extent,1/_24e,this._zoomAnimAnchor);if(map.__tileInfo){var ct=_231.getCandidateTileInfo(map,map.__tileInfo,this._zoomStartExtent),_250=map.__getExtentForLevel(ct.lod.level,this._zoomAnimAnchor),_251=map.getMinZoom(),_252=map.getMaxZoom(),_253=_250.extent,_254=_250.lod,_255=_24f/_253.getWidth(),_256=ct.lod.level;if(_24e<1){if(_255>_24e){_256--;}}else{if(_255<_24e){_256++;}}if(_256<_251){_256=_251;}else{if(_256>_252){_256=_252;}}if(_256!==ct.lod.level){_250=map.__getExtentForLevel(_256,this._zoomAnimAnchor);_253=_250.extent;_254=_250.lod;}this._zoomEndExtent=_253;this._zoomEndLod=_254;map._zoomAnim=_22f.animateRange({range:{start:(_24f/this._zoomStartExtent.getWidth()),end:_255},duration:_22d.defaults.map.zoomDuration,rate:_22d.defaults.map.zoomRate,onAnimate:this._adjustPinch,onEnd:this._adjustPinchEnd});map._zoomAnim.play();map._fireOnScale(map.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin);}else{this._zoomEndExtent=this._zoomStartExtent;map._fireOnScale(map.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin);this._adjustPinchEnd();}}},_adjustPinch:function(_257){var _258=this.__scaleExtent(this.map.extent,_257,this._zoomAnimAnchor);this.map.__zoom(_258,_257,this._dragOrigin);},_adjustPinchEnd:function(){var map=this.map,_259=map.extent.getWidth()/this._zoomEndExtent.getWidth(),_25a=this.__scaleExtent(map.extent,1/_259,this._zoomAnimAnchor),_25b=this._dragOrigin,lod=this._zoomEndLod;this._zoomStartExtent=this._zoomEndExtent=this._zoomEndLod=this._dragOrigin=map._zoomAnim=this._zoomAnimAnchor=null;map.__zoomEnd(_25a,_259,_25b,lod,true);},__scaleExtent:function(_25c,_25d,_25e){var _25f=_25e||_25c.getCenter(),_260=_25c.expand(_25d),xmin=_25c.xmin-((_260.getWidth()-_25c.getWidth())*(_25f.x-_25c.xmin)/_25c.getWidth()),ymax=_25c.ymax-((_260.getHeight()-_25c.getHeight())*(_25f.y-_25c.ymax)/_25c.getHeight());return new _233(xmin,ymax-_260.getHeight(),xmin+_260.getWidth(),ymax,_25c.spatialReference);},_normalizeRect:function(evt){var xy=evt.screenPoint,dx=this._dragOrigin.x,dy=this._dragOrigin.y,rect=new Rect((xy.x<dx?xy.x:dx)-this.map.__visibleRect.x,(xy.y<dy?xy.y:dy)-this.map.__visibleRect.y,Math.abs(xy.x-dx),Math.abs(xy.y-dy));delete rect.spatialReference;if(rect.width===0){rect.width=1;}if(rect.height===0){rect.height=1;}return rect;},setImmediateClick:function(_261){switch(this.eventModel){case "mouse":this.mouseEvents.setImmediateClick(_261);break;case "touch":case "pointer":(this.touchEvents||this.pointerEvents).setImmediateTap(_261);break;}},enablePan:function(){this.disablePan();switch(this.eventModel){case "mouse":this._panInitHandle=_236(this.mouseEvents,"onMouseDown",this,this._panInit);break;case "touch":case "pointer":this._swipeInitHandle=_236(this.touchEvents||this.pointerEvents,"onSwipeStart",this,this._swipeInit);break;}},disablePan:function(){_237(this._panInitHandle);this._panInitHandle=null;_237(this._swipeInitHandle);this._swipeInitHandle=null;},enableRubberBandZoom:function(){this.disableRubberBandZoom();if(this.eventModel==="mouse"){this._zoomInitHandle=_236(this.mouseEvents,"onMouseDown",this,this._zoomInit);}},disableRubberBandZoom:function(){_237(this._zoomInitHandle);this._zoomInitHandle=null;},enablePinchZoom:function(){this.disablePinchZoom();if(this.eventModel==="touch"||this.eventModel==="pointer"){this._pinchInitHandle=_236(this.touchEvents||this.pointerEvents,"onPinchStart",this,this._pinchInit);}},disablePinchZoom:function(){_237(this._pinchInitHandle);this._pinchInitHandle=null;},enableScrollWheelZoom:function(){this.disableScrollWheelZoom();if(this.eventModel==="mouse"||this.eventModel==="pointer"){this._wheelHandle=_236(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelZoom);}},disableScrollWheelZoom:function(){_237(this._wheelHandle);this._wheelHandle=null;},enableDoubleClickZoom:function(){this.disableDoubleClickZoom();switch(this.eventModel){case "mouse":this._dblClickHandle=_236(this.mouseEvents,"onDblClick",this,this._dblClickZoom);break;case "touch":case "pointer":this._dblClickHandle=_236(this.touchEvents||this.pointerEvents,"onDoubleTap",this,this._dblClickZoom);this._zoomOutHandle=_236(this.touchEvents||this.pointerEvents,"onTwoFingerTap",this,this._twoFingerTap);break;}},disableDoubleClickZoom:function(){_237(this._dblClickHandle);_237(this._zoomOutHandle);this._dblClickHandle=this._zoomOutHandle=null;},enableShiftDoubleClickZoom:function(){this.disableShiftDoubleClickZoom();if(this.eventModel==="mouse"){this._sDblClickHandle=_236(this.mouseEvents,"onDblClick",this,this._recenterZoom);}},disableShiftDoubleClickZoom:function(){_237(this._sDblClickHandle);this._sDblClickHandle=null;},enableClickRecenter:function(){this.disableClickRecenter();if(this.eventModel==="mouse"){this._recenterHandle=_236(this.mouseEvents,"onClick",this,this._recenter);}},disableClickRecenter:function(){_237(this._recenterHandle);this._recenterHandle=null;},enableKeyboardNavigation:function(){this.disableKeyboardNavigation();if(this.eventModel==="mouse"){this._keyHandle=_236(this.mouseEvents,"onKeyDown",this,this._keyDown);this._keyEndHandle=_236(this.mouseEvents,"onKeyUp",this,this._keyEnd);}},disableKeyboardNavigation:function(){_237(this._keyHandle);_237(this._keyEndHandle);this._keyHandle=this._keyEndHandle=null;},enableNavigation:function(){var map=this.map;if(map&&map.loaded){map.enableDoubleClickZoom();map.enableClickRecenter();map.enablePan();map.enableRubberBandZoom();this.enablePinchZoom();map.enableKeyboardNavigation();if(map.smartNavigation){this._setScrollWheelPan(true);}else{map.enableScrollWheelZoom();}}},disableNavigation:function(){var map=this.map;if(map&&map.loaded){map.disableDoubleClickZoom();map.disableClickRecenter();map.disablePan();map.disableRubberBandZoom();this.disablePinchZoom();map.disableKeyboardNavigation();map.disableScrollWheelZoom();if(map.smartNavigation){this._setScrollWheelPan(false);}}},destroy:function(){if(this.touchEvents){this.touchEvents.destroy();}if(this.mouseEvents){this.mouseEvents.destroy();}if(this.pointerEvents){this.pointerEvents.destroy();}var i,_262=[this._panInitHandle,this._panStartHandle,this._panHandle,this._panEndHandle,this._zoomInitHandle,this._zoomHandle,this._zoomEndHandle,this._wheelHandle,this._mwMacHandle,this._dblClickHandle,this._zoomOutHandle,this._recenterHandle,this._sDblClickHandle,this._keyHandle,this._keyEndHandle,this._swipeInitHandle,this._swipeHandle,this._swipeEndHandle,this._pinchInitHandle,this._pinchHandle,this._pinchEndHandle];for(i=0;i<_262.length;i++){_237(_262[i]);}this.map=this.touchEvents=this.mouseEvents=this.eventModel=this.pointerEvents=this._zoomRect=this._dragOrigin=this._panInitHandle=this._panStartHandle=this._panHandle=this._panEndHandle=this._zoomInitHandle=this._zoomHandle=this._zoomEndHandle=this._wheelHandle=this._mwMacHandle=this._dblClickHandle=this._zoomOutHandle=this._recenterHandle=this._sDblClickHandle=this._keyHandle=this._keyEndHandle=this._swipeInitHandle=this._swipeHandle=this._swipeEndHandle=this._pinchInitHandle=this._pinchHandle=this._pinchEndHandle=null;}});if(has("extend-esri")){_229.MapNavigationManager=_23d;}return _23d;});},"esri/renderers/TemporalRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/renderers/Renderer"],function(_263,lang,has,_264,_265){var _266=_263(_265,{declaredClass:"esri.renderer.TemporalRenderer",constructor:function(_267,_268,_269,_26a){this.observationRenderer=_267;this.latestObservationRenderer=_268;this.trackRenderer=_269;this.observationAger=_26a;},getSymbol:function(_26b){var _26c=_26b.getLayer();var kind=_26c._getKind(_26b);var _26d=(kind===0)?this.observationRenderer:(this.latestObservationRenderer||this.observationRenderer);var _26e=(_26d&&_26d.getSymbol(_26b));var ager=this.observationAger;if(_26c.timeInfo&&_26c._map.timeExtent&&(_26d===this.observationRenderer)&&ager&&_26e){_26e=ager.getAgedSymbol(_26e,_26b);}return _26e;}});if(has("extend-esri")){lang.setObject("renderer.TemporalRenderer",_266,_264);}return _266;});},"esri/symbols/PictureFillSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/sniff","dojox/gfx/_base","esri/kernel","esri/lang","esri/urlUtils","esri/symbols/FillSymbol"],function(_26f,lang,has,_270,_271,_272,_273,_274){var _275={xoffset:0,yoffset:0,width:12,height:12};var PFS=_26f(_274,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(json,_276,_277,_278){if(json){if(lang.isString(json)){this.url=json;if(_276!==undefined){this.outline=_276;}if(_277!==undefined){this.width=_277;}if(_278!==undefined){this.height=_278;}}else{this.xoffset=_270.pt2px(json.xoffset);this.yoffset=_270.pt2px(json.yoffset);this.width=_270.pt2px(json.width);this.height=_270.pt2px(json.height);var _279=json.imageData;if((!(has("ie")<9))&&_279){var temp=this.url;this.url="data:"+(json.contentType||"image")+";base64,"+_279;this.imageData=temp;}}}else{lang.mixin(this,_275);this.width=_270.pt2px(this.width);this.height=_270.pt2px(this.height);}},setWidth:function(_27a){this.width=_27a;return this;},setHeight:function(_27b){this.height=_27b;return this;},setOffset:function(x,y){this.xoffset=x;this.yoffset=y;return this;},setUrl:function(url){if(url!==this.url){delete this.imageData;delete this.contentType;}this.url=url;return this;},setXScale:function(_27c){this.xscale=_27c;return this;},setYScale:function(_27d){this.yscale=_27d;return this;},getStroke:function(){return this.outline&&this.outline.getStroke();},getFill:function(){return lang.mixin({},_270.defaultPattern,{src:this.url,width:(this.width*this.xscale),height:(this.height*this.yscale),x:this.xoffset,y:this.yoffset});},getShapeDescriptors:function(){return {defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"},fill:this.getFill(),stroke:this.getStroke()};},toJson:function(){var url=this.url,_27e=this.imageData;if(url.indexOf("data:")===0){var temp=url;url=_27e;var _27f=temp.indexOf(";base64,")+8;_27e=temp.substr(_27f);}url=_273.getAbsoluteUrl(url);var _280=_270.px2pt(this.width);_280=isNaN(_280)?undefined:_280;var _281=_270.px2pt(this.height);_281=isNaN(_281)?undefined:_281;var xoff=_270.px2pt(this.xoffset);xoff=isNaN(xoff)?undefined:xoff;var yoff=_270.px2pt(this.yoffset);yoff=isNaN(yoff)?undefined:yoff;var json=_272.fixJson(lang.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:url,imageData:_27e,contentType:this.contentType,width:_280,height:_281,xoffset:xoff,yoffset:yoff,xscale:this.xscale,yscale:this.yscale}));if(!json.imageData){delete json.imageData;}return json;}});PFS.defaultProps=_275;if(has("extend-esri")){lang.setObject("symbol.PictureFillSymbol",PFS,_271);_271.symbol.defaultPictureFillSymbol=_275;}return PFS;});},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(_282,lang,has,_283,_284){var LOD=_282(null,{declaredClass:"esri.layers.LOD",constructor:function(json){lang.mixin(this,json);},toJson:function(){return _284.fixJson({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale});}});if(has("extend-esri")){lang.setObject("layers.LOD",LOD,_283);}return LOD;});},"esri/renderers/Renderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_285,lang,has,_286){var _287=_285(null,{declaredClass:"esri.renderer.Renderer",constructor:function(){this.getSymbol=lang.hitch(this,this.getSymbol);},getSymbol:function(_288){},toJson:function(){}});if(has("extend-esri")){lang.setObject("renderer.Renderer",_287,_286);}return _287;});},"esri/layers/DynamicMapServiceLayer":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/dom-construct","dojo/dom-style","dojox/xml/parser","dojox/gfx/matrix","esri/kernel","esri/config","esri/sniff","esri/request","esri/domUtils","esri/layers/layer","esri/layers/MapImage"],function(_289,_28a,lang,_28b,_28c,_28d,_28e,_28f,_290,has,_291,_292,_293,_294){var _295=_290.defaults.map.zoomDuration;var _296=_289(_293,{declaredClass:"esri.layers.DynamicMapServiceLayer",constructor:function(url,_297){this.useMapTime=(_297&&_297.hasOwnProperty("useMapTime"))?(!!_297.useMapTime):true;var _298=lang.hitch;this._exportMapImageHandler=_298(this,this._exportMapImageHandler);this._imgSrcFunc=_298(this,this._imgSrcFunc);this._divAlphaImageFunc=_298(this,this._divAlphaImageFunc);this._tileLoadHandler=_298(this,this._tileLoadHandler);this._tileErrorHandler=_298(this,this._tileErrorHandler);},opacity:1,isPNG32:false,_setMap:function(map,_299,_29a){this.inherited(arguments);this._map=map;var d=(this._div=_28b.create("div",null,_299)),_29b=_28f._css.names,css={position:"absolute",width:map.width+"px",height:map.height+"px",overflow:"visible",opacity:this.opacity},isIE=has("ie"),_29c=_28a.connect,vd=map.__visibleDelta;if(isIE&&isIE>7){delete css.opacity;}if(map.navigationMode==="css-transforms"){css[_29b.transform]=_28f._css.translate(vd.x,vd.y);_28c.set(d,css);this._left=vd.x;this._top=vd.y;}else{css.left="0px";css.top="0px";_28c.set(d,css);this._left=this._top=0;}_28c.set(d,css);this._onResizeHandler_connect=_29c(map,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=_29c(this,"onOpacityChange",this,"_opacityChangeHandler");this._img_loading=null;this._dragOrigin={x:0,y:0};this.evaluateSuspension();if(this.suspended&&!map.loaded){var _29d=_28a.connect(map,"onLoad",this,function(){_28a.disconnect(_29d);_29d=null;this.evaluateSuspension();});}return d;},_unsetMap:function(map,_29e){_28b.destroy(this._div);this._map=this._div=null;var _29f=_28a.disconnect;_29f(this._onResizeHandler_connect);_29f(this._opacityChangeHandler_connect);this._onResizeHandler_connect=this._opacityChangeHandler_connect=null;this._fireUpdateEnd();this._toggleTime();clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments);},_onResizeHandler:function(_2a0,_2a1,_2a2){_28c.set(this._div,{width:_2a1+"px",height:_2a2+"px"});this._onExtentChangeHandler(_2a0);},onSuspend:function(){this.inherited(arguments);this._fireUpdateEnd();this._toggleTime();_292.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();},onResume:function(){this.inherited(arguments);var map=this._map;this._toggleTime();if(map.navigationMode==="css-transforms"){var vd=map.__visibleDelta;this._left=vd.x;this._top=vd.y;_28c.set(this._div,_28f._css.names.transform,_28f._css.translate(this._left,this._top));}this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(lang.hitch(this,function(){if(!this.suspended){this._onExtentChangeHandler(this._map.extent);}}),0);},_enableDrawConnectors:function(){var _2a3=_28a.connect,map=this._map;if(map){this._onPanHandler_connect=_2a3(map,"onPan",this,"_onPanHandler");this._onExtentChangeHandler_connect=_2a3(map,"onExtentChange",this,"_onExtentChangeHandler");if(map.navigationMode==="css-transforms"){this._onScaleHandler_connect=_2a3(map,"onScale",this,this._onScaleHandler);}else{this._onZoomHandler_connect=_2a3(map,"onZoom",this,"_onZoomHandler");}}},_disableDrawConnectors:function(){var _2a4=_28a.disconnect;_2a4(this._onPanHandler_connect);_2a4(this._onExtentChangeHandler_connect);_2a4(this._onZoomHandler_connect);_2a4(this._onScaleHandler_connect);this._onPanHandler_connect=this._onExtentChangeHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=null;},_toggleTime:function(){var map=this._map;if(this.timeInfo&&this.useMapTime&&map&&!this.suspended){if(!this._timeConnect){this._timeConnect=_28a.connect(map,"onTimeExtentChange",this,this._onTimeExtentChangeHandler);}this._setTime(map.timeExtent);}else{_28a.disconnect(this._timeConnect);this._timeConnect=null;this._setTime(null);}},_setTime:function(_2a5){if(this._params){this._params.time=_2a5?_2a5.toJson().join(","):null;}},_onPanHandler:function(_2a6,_2a7){this._panDx=_2a7.x;this._panDy=_2a7.y;var _2a8=this._dragOrigin,vd=this._map.__visibleDelta,img=this._img;if(img){if(this._map.navigationMode==="css-transforms"){this._left=vd.x+_2a7.x;this._top=vd.y+_2a7.y;_28c.set(this._div,_28f._css.names.transform,_28f._css.translate(this._left,this._top));}else{_28c.set(img,{left:(_2a8.x+_2a7.x)+"px",top:(_2a8.y+_2a7.y)+"px"});}}},_onExtentChangeHandler:function(_2a9,_2aa,_2ab){if(this.suspended){return;}clearTimeout(this._wakeTimer);this._wakeTimer=null;var _2ac=this._map,_2ad=this._img,_2ae=_2ad&&_2ad.style,_2af=this._dragOrigin;if(_2aa&&!_2ab&&_2ad&&(_2aa.x!==this._panDx||_2aa.y!==this._panDy)){if(_2ac.navigationMode==="css-transforms"){var vd=_2ac.__visibleDelta;this._left=vd.x;this._top=vd.y;_28c.set(this._div,_28f._css.names.transform,_28f._css.translate(this._left,this._top));}else{_28c.set(_2ad,{left:(_2af.x+_2aa.x)+"px",top:(_2af.y+_2aa.y)+"px"});}}if(_2ad){_2af.x=parseInt(_2ae.left,10);_2af.y=parseInt(_2ae.top,10);}else{_2af.x=(_2af.y=0);}if(_2ac.navigationMode==="css-transforms"){if(_2ab&&_2ad){_28c.set(_2ad,_28f._css.names.transition,"none");_2ad._multiply=_2ad._multiply?_28e.multiply(_2ad._matrix,_2ad._multiply):_2ad._matrix;}}this._fireUpdateStart();var _2b0=this._img_loading;if(_2b0){_28a.disconnect(_2b0._onload_connect);_28a.disconnect(_2b0._onerror_connect);_28a.disconnect(_2b0._onabort_connect);_28b.destroy(_2b0);this._img_loading=null;var _2b1=this._jsonRequest;if(_2b1){try{_2b1.cancel();}catch(e){}this._jsonRequest=null;}}if(this.version>=10&&_2ac.wrapAround180){_2a9=_2a9._normalize(true);}if(this.isPNG32){var div=(this._img_loading=_28b.create("div"));div.id=_2ac.id+"_"+this.id+"_"+new Date().getTime();_28c.set(div,{position:"absolute",left:"0px",top:"0px",width:_2ac.width+"px",height:_2ac.height+"px"});var _2b2=div.appendChild(_28b.create("div"));_28c.set(_2b2,{opacity:0,width:_2ac.width+"px",height:_2ac.height+"px"});this.getImageUrl(_2a9,_2ac.width,_2ac.height,this._divAlphaImageFunc);div=null;}else{var img=(this._img_loading=_28b.create("img")),_2b3=_28f._css.names,isIE=has("ie"),css={position:"absolute",width:_2ac.width+"px",height:_2ac.height+"px"};if(isIE&&isIE>7){css.opacity=this.opacity;}if(_2ac.navigationMode==="css-transforms"){css[_2b3.transform]=_28f._css.translate(-this._left,-this._top);img._tdx=-this._left;img._tdy=-this._top;css[_2b3.transition]=_2b3.transformName+" "+_295+"ms ease";}else{css.left="0px";css.top="0px";}img.id=_2ac.id+"_"+this.id+"_"+new Date().getTime();_28c.set(img,css);img._onload_connect=_28a.connect(img,"onload",this,"_onLoadHandler");img._onerror_connect=_28a.connect(img,"onerror",this,"_onErrorHandler");img._onabort_connect=_28a.connect(img,"onabort",this,"_onErrorHandler");this._startRect={left:_2af.x,top:_2af.y,width:_2ad?parseInt(_2ae.width,10):_2ac.width,height:_2ad?parseInt(_2ae.height,10):_2ac.height,zoom:(_2ae&&_2ae.zoom)?parseFloat(_2ae.zoom):1};this.getImageUrl(_2a9,_2ac.width,_2ac.height,this._imgSrcFunc);img=null;}},_onTimeExtentChangeHandler:function(_2b4){if(this.suspended){return;}this._setTime(_2b4);this.refresh(true);},getImageUrl:function(_2b5,wd,ht,_2b6){},_imgSrcFunc:function(src){this._img_loading.src=src;},_divAlphaImageFunc:function(src){_28c.set(this._img_loading,"filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+src+"', sizingMethod='scale')");this._onLoadHandler({currentTarget:this._img_loading});},_onLoadHandler:function(evt){var img=evt.currentTarget,_2b7=_28a.disconnect,_2b8=this._map;_2b7(img._onload_connect);_2b7(img._onerror_connect);_2b7(img._onabort_connect);if(!_2b8||_2b8.__panning||_2b8.__zooming){_28b.destroy(img);this._fireUpdateEnd();return;}_28d.removeChildren(this._div);this._img=img;this._startRect={left:0,top:0,width:_2b8.width,height:_2b8.height,zoom:1};this._div.appendChild(img);if(!this.suspended){_292.show(this._div);}img._onload_connect=img._onerror_connect=img._onabort_connect=this._img_loading=null;var _2b9=this._dragOrigin;_2b9.x=(_2b9.y=0);this.onUpdate();this._fireUpdateEnd();},_onErrorHandler:function(evt){var img=evt.currentTarget,_2ba=_28a.disconnect;_28c.set(img,"visibility","hidden");_2ba(img._onload_connect);_2ba(img._onerror_connect);_2ba(img._onabort_connect);img._onload_connect=img._onerror_connect=img._onabort_connect=null;var _2bb=new Error("Unable to load image: "+img.src);this.onError(_2bb);this._fireUpdateEnd(_2bb);},setUseMapTime:function(use,_2bc){this.useMapTime=use;this._toggleTime();if(!_2bc){this.refresh(true);}},refresh:function(){if(this._map){this._onExtentChangeHandler(this._map.extent);}},_onScaleHandler:function(mtx,_2bd){var css={},_2be=_28f._css.names,img=this._img;if(!img){return;}_28c.set(img,_2be.transition,_2bd?"none":(_2be.transformName+" "+_295+"ms ease"));img._matrix=mtx;mtx=img._multiply?_28e.multiply(mtx,img._multiply):mtx;if(img._tdx||img._tdy){mtx=_28e.multiply(mtx,{"xx":1,"xy":0,"yx":0,"yy":1,"dx":img._tdx,"dy":img._tdy});}css[_2be.transform]=_28f._css.matrix(mtx);_28c.set(img,css);},_onZoomHandler:function(_2bf,_2c0,_2c1){var _2c2=this._startRect,_2c3=_2c2.width*_2c0,_2c4=_2c2.height*_2c0,img=this._img,isIE=has("ie");if(img){if(isIE&&isIE<8){_28c.set(img,{left:(_2c2.left-((_2c3-_2c2.width)*(_2c1.x-_2c2.left)/_2c2.width))+"px",top:(_2c2.top-((_2c4-_2c2.height)*(_2c1.y-_2c2.top)/_2c2.height))+"px",zoom:_2c0*_2c2.zoom});}else{_28c.set(img,{left:(_2c2.left-((_2c3-_2c2.width)*(_2c1.x-_2c2.left)/_2c2.width))+"px",top:(_2c2.top-((_2c4-_2c2.height)*(_2c1.y-_2c2.top)/_2c2.height))+"px",width:_2c3+"px",height:_2c4+"px"});}}},_exportMapImage:function(url,_2c5,_2c6){var _2c7=this._exportMapImageHandler;_2c5.token=this._getToken();_291({url:url,content:_2c5,callbackParamName:"callback",load:function(){_2c7(arguments[0],arguments[1],_2c6);},error:_290.defaults.io.errorHandler});},_exportMapImageHandler:function(_2c8,io,_2c9){var _2ca=new _294(_2c8);this.onMapImageExport(_2ca);if(_2c9){_2c9(_2ca);}},onMapImageExport:function(){},setOpacity:function(o){if(this.opacity!=o){this.onOpacityChange(this.opacity=o);}},onOpacityChange:function(){},_opacityChangeHandler:function(_2cb){_28c.set(this._div,"opacity",_2cb);}});if(has("extend-esri")){lang.setObject("layers.DynamicMapServiceLayer",_296,_28f);}return _296;});},"dojo/fx":function(){define(["./_base/lang","./Evented","./_base/kernel","./_base/array","./_base/connect","./_base/fx","./dom","./dom-style","./dom-geometry","./ready","require"],function(lang,_2cc,dojo,_2cd,_2ce,_2cf,dom,_2d0,geom,_2d1,_2d2){if(!dojo.isAsync){_2d1(0,function(){var _2d3=["./fx/Toggler"];_2d2(_2d3);});}var _2d4=dojo.fx={};var _2d5={_fire:function(evt,args){if(this[evt]){this[evt].apply(this,args||[]);}return this;}};var _2d6=function(_2d7){this._index=-1;this._animations=_2d7||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;_2cd.forEach(this._animations,function(a){this.duration+=a.duration;if(a.delay){this.duration+=a.delay;}},this);};_2d6.prototype=new _2cc();lang.extend(_2d6,{_onAnimate:function(){this._fire("onAnimate",arguments);},_onEnd:function(){_2ce.disconnect(this._onAnimateCtx);_2ce.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length){this._fire("onEnd");}else{this._current=this._animations[++this._index];this._onAnimateCtx=_2ce.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=_2ce.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true);}},play:function(_2d8,_2d9){if(!this._current){this._current=this._animations[this._index=0];}if(!_2d9&&this._current.status()=="playing"){return this;}var _2da=_2ce.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin");}),_2db=_2ce.connect(this._current,"onBegin",this,function(arg){this._fire("onBegin",arguments);}),_2dc=_2ce.connect(this._current,"onPlay",this,function(arg){this._fire("onPlay",arguments);_2ce.disconnect(_2da);_2ce.disconnect(_2db);_2ce.disconnect(_2dc);});if(this._onAnimateCtx){_2ce.disconnect(this._onAnimateCtx);}this._onAnimateCtx=_2ce.connect(this._current,"onAnimate",this,"_onAnimate");if(this._onEndCtx){_2ce.disconnect(this._onEndCtx);}this._onEndCtx=_2ce.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this;},pause:function(){if(this._current){var e=_2ce.connect(this._current,"onPause",this,function(arg){this._fire("onPause",arguments);_2ce.disconnect(e);});this._current.pause();}return this;},gotoPercent:function(_2dd,_2de){this.pause();var _2df=this.duration*_2dd;this._current=null;_2cd.some(this._animations,function(a){if(a.duration<=_2df){this._current=a;return true;}_2df-=a.duration;return false;});if(this._current){this._current.gotoPercent(_2df/this._current.duration,_2de);}return this;},stop:function(_2e0){if(this._current){if(_2e0){for(;this._index+1<this._animations.length;++this._index){this._animations[this._index].stop(true);}this._current=this._animations[this._index];}var e=_2ce.connect(this._current,"onStop",this,function(arg){this._fire("onStop",arguments);_2ce.disconnect(e);});this._current.stop();}return this;},status:function(){return this._current?this._current.status():"stopped";},destroy:function(){if(this._onAnimateCtx){_2ce.disconnect(this._onAnimateCtx);}if(this._onEndCtx){_2ce.disconnect(this._onEndCtx);}}});lang.extend(_2d6,_2d5);_2d4.chain=function(_2e1){return new _2d6(_2e1);};var _2e2=function(_2e3){this._animations=_2e3||[];this._connects=[];this._finished=0;this.duration=0;_2cd.forEach(_2e3,function(a){var _2e4=a.duration;if(a.delay){_2e4+=a.delay;}if(this.duration<_2e4){this.duration=_2e4;}this._connects.push(_2ce.connect(a,"onEnd",this,"_onEnd"));},this);this._pseudoAnimation=new _2cf.Animation({curve:[0,1],duration:this.duration});var self=this;_2cd.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(evt){self._connects.push(_2ce.connect(self._pseudoAnimation,evt,function(){self._fire(evt,arguments);}));});};lang.extend(_2e2,{_doAction:function(_2e5,args){_2cd.forEach(this._animations,function(a){a[_2e5].apply(a,args);});return this;},_onEnd:function(){if(++this._finished>this._animations.length){this._fire("onEnd");}},_call:function(_2e6,args){var t=this._pseudoAnimation;t[_2e6].apply(t,args);},play:function(_2e7,_2e8){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this;},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this;},gotoPercent:function(_2e9,_2ea){var ms=this.duration*_2e9;_2cd.forEach(this._animations,function(a){a.gotoPercent(a.duration<ms?1:(ms/a.duration),_2ea);});this._call("gotoPercent",arguments);return this;},stop:function(_2eb){this._doAction("stop",arguments);this._call("stop",arguments);return this;},status:function(){return this._pseudoAnimation.status();},destroy:function(){_2cd.forEach(this._connects,_2ce.disconnect);}});lang.extend(_2e2,_2d5);_2d4.combine=function(_2ec){return new _2e2(_2ec);};_2d4.wipeIn=function(args){var node=args.node=dom.byId(args.node),s=node.style,o;var anim=_2cf.animateProperty(lang.mixin({properties:{height:{start:function(){o=s.overflow;s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s.height="1px";s.display="";s.visibility="";return 1;}else{var _2ed=_2d0.get(node,"height");return Math.max(_2ed,1);}},end:function(){return node.scrollHeight;}}}},args));var fini=function(){s.height="auto";s.overflow=o;};_2ce.connect(anim,"onStop",fini);_2ce.connect(anim,"onEnd",fini);return anim;};_2d4.wipeOut=function(args){var node=args.node=dom.byId(args.node),s=node.style,o;var anim=_2cf.animateProperty(lang.mixin({properties:{height:{end:1}}},args));_2ce.connect(anim,"beforeBegin",function(){o=s.overflow;s.overflow="hidden";s.display="";});var fini=function(){s.overflow=o;s.height="auto";s.display="none";};_2ce.connect(anim,"onStop",fini);_2ce.connect(anim,"onEnd",fini);return anim;};_2d4.slideTo=function(args){var node=args.node=dom.byId(args.node),top=null,left=null;var init=(function(n){return function(){var cs=_2d0.getComputedStyle(n);var pos=cs.position;top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);left=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);if(pos!="absolute"&&pos!="relative"){var ret=geom.position(n,true);top=ret.y;left=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=left+"px";}};})(node);init();var anim=_2cf.animateProperty(lang.mixin({properties:{top:args.top||0,left:args.left||0}},args));_2ce.connect(anim,"beforeBegin",anim,init);return anim;};return _2d4;});},"esri/layers/TableDataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/DataSource"],function(_2ee,lang,has,_2ef,_2f0,_2f1){var _2f2=_2ee(_2f1,{declaredClass:"esri.layers.TableDataSource",toJson:function(){var json={type:"table",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName,gdbVersion:this.gdbVersion};return _2f0.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.TableDataSource",_2f2,_2ef);}return _2f2;});},"dojo/fx/Toggler":function(){define(["../_base/lang","../_base/declare","../_base/fx","../_base/connect"],function(lang,_2f3,_2f4,_2f5){return _2f3("dojo.fx.Toggler",null,{node:null,showFunc:_2f4.fadeIn,hideFunc:_2f4.fadeOut,showDuration:200,hideDuration:200,constructor:function(args){var _2f6=this;lang.mixin(_2f6,args);_2f6.node=args.node;_2f6._showArgs=lang.mixin({},args);_2f6._showArgs.node=_2f6.node;_2f6._showArgs.duration=_2f6.showDuration;_2f6.showAnim=_2f6.showFunc(_2f6._showArgs);_2f6._hideArgs=lang.mixin({},args);_2f6._hideArgs.node=_2f6.node;_2f6._hideArgs.duration=_2f6.hideDuration;_2f6.hideAnim=_2f6.hideFunc(_2f6._hideArgs);_2f5.connect(_2f6.showAnim,"beforeBegin",lang.hitch(_2f6.hideAnim,"stop",true));_2f5.connect(_2f6.hideAnim,"beforeBegin",lang.hitch(_2f6.showAnim,"stop",true));},show:function(_2f7){return this.showAnim.play(_2f7||0);},hide:function(_2f8){return this.hideAnim.play(_2f8||0);}});});},"esri/geometry/webMercatorUtils":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/SpatialReference","esri/geometry/Point"],function(_2f9,lang,has,_2fa,_2fb,_2fc){function _2fd(geom,func,sr,_2fe){if(geom.type==="point"){var pt=func(geom.x,geom.y,_2fe);return new geom.constructor(pt[0],pt[1],new _2fb(sr));}else{if(geom.type==="extent"){var min=func(geom.xmin,geom.ymin,_2fe),max=func(geom.xmax,geom.ymax,_2fe);return new geom.constructor(min[0],min[1],max[0],max[1],new _2fb(sr));}else{if(geom.type==="polyline"||geom.type==="polygon"){var _2ff=(geom.type==="polyline"),_300=_2ff?geom.paths:geom.rings,_301=[],_302;_2f9.forEach(_300,function(_303){_301.push(_302=[]);_2f9.forEach(_303,function(iPt){_302.push(func(iPt[0],iPt[1],_2fe));});});if(_2ff){return new geom.constructor({paths:_301,spatialReference:sr});}else{return new geom.constructor({rings:_301,spatialReference:sr});}}else{if(geom.type==="multipoint"){var oPts=[];_2f9.forEach(geom.points,function(iPt){oPts.push(func(iPt[0],iPt[1],_2fe));});return new geom.constructor({points:oPts,spatialReference:sr});}}}}};var _304={lngLatToXY:_2fc.lngLatToXY,xyToLngLat:_2fc.xyToLngLat,geographicToWebMercator:function(geom){return _2fd(geom,_2fc.lngLatToXY,{wkid:102100});},webMercatorToGeographic:function(geom,_305){return _2fd(geom,_2fc.xyToLngLat,{wkid:4326},_305);}};if(has("extend-esri")){lang.mixin(lang.getObject("geometry",true,_2fa),_304);}return _304;});},"dojo/date/locale":function(){define(["../_base/lang","../_base/array","../date","../cldr/supplemental","../i18n","../regexp","../string","../i18n!../cldr/nls/gregorian","module"],function(lang,_306,date,_307,i18n,_308,_309,_30a,_30b){var _30c={};lang.setObject(_30b.id.replace(/\//g,"."),_30c);function _30d(_30e,_30f,_310,_311){return _311.replace(/([a-z])\1*/ig,function(_312){var s,pad,c=_312.charAt(0),l=_312.length,_313=["abbr","wide","narrow"];switch(c){case "G":s=_30f[(l<4)?"eraAbbr":"eraNames"][_30e.getFullYear()<0?0:1];break;case "y":s=_30e.getFullYear();switch(l){case 1:break;case 2:if(!_310.fullYear){s=String(s);s=s.substr(s.length-2);break;}default:pad=true;}break;case "Q":case "q":s=Math.ceil((_30e.getMonth()+1)/3);pad=true;break;case "M":case "L":var m=_30e.getMonth();if(l<3){s=m+1;pad=true;}else{var _314=["months",c=="L"?"standAlone":"format",_313[l-3]].join("-");s=_30f[_314][m];}break;case "w":var _315=0;s=_30c._getWeekOfYear(_30e,_315);pad=true;break;case "d":s=_30e.getDate();pad=true;break;case "D":s=_30c._getDayOfYear(_30e);pad=true;break;case "e":case "c":var d=_30e.getDay();if(l<2){s=(d-_307.getFirstDayOfWeek(_310.locale)+8)%7;break;}case "E":d=_30e.getDay();if(l<3){s=d+1;pad=true;}else{var _316=["days",c=="c"?"standAlone":"format",_313[l-3]].join("-");s=_30f[_316][d];}break;case "a":var _317=_30e.getHours()<12?"am":"pm";s=_310[_317]||_30f["dayPeriods-format-wide-"+_317];break;case "h":case "H":case "K":case "k":var h=_30e.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_30e.getMinutes();pad=true;break;case "s":s=_30e.getSeconds();pad=true;break;case "S":s=Math.round(_30e.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "v":case "z":s=_30c._getZone(_30e,true,_310);if(s){break;}l=4;case "Z":var _318=_30c._getZone(_30e,false,_310);var tz=[(_318<=0?"+":"-"),_309.pad(Math.floor(Math.abs(_318)/60),2),_309.pad(Math.abs(_318)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+_311);}if(pad){s=_309.pad(s,l);}return s;});};_30c._getZone=function(_319,_31a,_31b){if(_31a){return date.getTimezoneName(_319);}else{return _319.getTimezoneOffset();}};_30c.format=function(_31c,_31d){_31d=_31d||{};var _31e=i18n.normalizeLocale(_31d.locale),_31f=_31d.formatLength||"short",_320=_30c._getGregorianBundle(_31e),str=[],_321=lang.hitch(this,_30d,_31c,_320,_31d);if(_31d.selector=="year"){return _322(_320["dateFormatItem-yyyy"]||"yyyy",_321);}var _323;if(_31d.selector!="date"){_323=_31d.timePattern||_320["timeFormat-"+_31f];if(_323){str.push(_322(_323,_321));}}if(_31d.selector!="time"){_323=_31d.datePattern||_320["dateFormat-"+_31f];if(_323){str.push(_322(_323,_321));}}return str.length==1?str[0]:_320["dateTimeFormat-"+_31f].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(_324,key){return str[key];});};_30c.regexp=function(_325){return _30c._parseInfo(_325).regexp;};_30c._parseInfo=function(_326){_326=_326||{};var _327=i18n.normalizeLocale(_326.locale),_328=_30c._getGregorianBundle(_327),_329=_326.formatLength||"short",_32a=_326.datePattern||_328["dateFormat-"+_329],_32b=_326.timePattern||_328["timeFormat-"+_329],_32c;if(_326.selector=="date"){_32c=_32a;}else{if(_326.selector=="time"){_32c=_32b;}else{_32c=_328["dateTimeFormat-"+_329].replace(/\{(\d+)\}/g,function(_32d,key){return [_32b,_32a][key];});}}var _32e=[],re=_322(_32c,lang.hitch(this,_32f,_32e,_328,_326));return {regexp:re,tokens:_32e,bundle:_328};};_30c.parse=function(_330,_331){var _332=/[\u200E\u200F\u202A\u202E]/g,info=_30c._parseInfo(_331),_333=info.tokens,_334=info.bundle,re=new RegExp("^"+info.regexp.replace(_332,"")+"$",info.strict?"":"i"),_335=re.exec(_330&&_330.replace(_332,""));if(!_335){return null;}var _336=["abbr","wide","narrow"],_337=[1970,0,1,0,0,0,0],amPm="",_338=_306.every(_335,function(v,i){if(!i){return true;}var _339=_333[i-1],l=_339.length,c=_339.charAt(0);switch(c){case "y":if(l!=2&&_331.strict){_337[0]=v;}else{if(v<100){v=Number(v);var year=""+new Date().getFullYear(),_33a=year.substring(0,2)*100,_33b=Math.min(Number(year.substring(2,4))+20,99);_337[0]=(v<_33b)?_33a+v:_33a-100+v;}else{if(_331.strict){return false;}_337[0]=v;}}break;case "M":case "L":if(l>2){var _33c=_334["months-"+(c=="L"?"standAlone":"format")+"-"+_336[l-3]].concat();if(!_331.strict){v=v.replace(".","").toLowerCase();_33c=_306.map(_33c,function(s){return s.replace(".","").toLowerCase();});}v=_306.indexOf(_33c,v);if(v==-1){return false;}}else{v--;}_337[1]=v;break;case "E":case "e":case "c":var days=_334["days-"+(c=="c"?"standAlone":"format")+"-"+_336[l-3]].concat();if(!_331.strict){v=v.toLowerCase();days=_306.map(days,function(d){return d.toLowerCase();});}v=_306.indexOf(days,v);if(v==-1){return false;}break;case "D":_337[1]=0;case "d":_337[2]=v;break;case "a":var am=_331.am||_334["dayPeriods-format-wide-am"],pm=_331.pm||_334["dayPeriods-format-wide-pm"];if(!_331.strict){var _33d=/\./g;v=v.replace(_33d,"").toLowerCase();am=am.replace(_33d,"").toLowerCase();pm=pm.replace(_33d,"").toLowerCase();}if(_331.strict&&v!=am&&v!=pm){return false;}amPm=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":if(v>23){return false;}_337[3]=v;break;case "m":_337[4]=v;break;case "s":_337[5]=v;break;case "S":_337[6]=v;}return true;});var _33e=+_337[3];if(amPm==="p"&&_33e<12){_337[3]=_33e+12;}else{if(amPm==="a"&&_33e==12){_337[3]=0;}}var _33f=new Date(_337[0],_337[1],_337[2],_337[3],_337[4],_337[5],_337[6]);if(_331.strict){_33f.setFullYear(_337[0]);}var _340=_333.join(""),_341=_340.indexOf("d")!=-1,_342=_340.indexOf("M")!=-1;if(!_338||(_342&&_33f.getMonth()>_337[1])||(_341&&_33f.getDate()>_337[2])){return null;}if((_342&&_33f.getMonth()<_337[1])||(_341&&_33f.getDate()<_337[2])){_33f=date.add(_33f,"hour",1);}return _33f;};function _322(_343,_344,_345,_346){var _347=function(x){return x;};_344=_344||_347;_345=_345||_347;_346=_346||_347;var _348=_343.match(/(''|[^'])+/g),_349=_343.charAt(0)=="'";_306.forEach(_348,function(_34a,i){if(!_34a){_348[i]="";}else{_348[i]=(_349?_345:_344)(_34a.replace(/''/g,"'"));_349=!_349;}});return _346(_348.join(""));};function _32f(_34b,_34c,_34d,_34e){_34e=_308.escapeString(_34e);if(!_34d.strict){_34e=_34e.replace(" a"," ?a");}return _34e.replace(/([a-z])\1*/ig,function(_34f){var s,c=_34f.charAt(0),l=_34f.length,p2="",p3="";if(_34d.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d{2,4}";break;case "M":case "L":s=(l>2)?"\\S+?":"1[0-2]|"+p2+"[1-9]";break;case "D":s="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+p2+"[1-9][0-9]|"+p3+"[1-9]";break;case "d":s="3[01]|[12]\\d|"+p2+"[1-9]";break;case "w":s="[1-4][0-9]|5[0-3]|"+p2+"[1-9]";break;case "E":case "e":case "c":s="\\S+";break;case "h":s="1[0-2]|"+p2+"[1-9]";break;case "k":s="1[01]|"+p2+"\\d";break;case "H":s="1\\d|2[0-3]|"+p2+"\\d";break;case "K":s="1\\d|2[0-4]|"+p2+"[1-9]";break;case "m":case "s":s="[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_34d.am||_34c["dayPeriods-format-wide-am"],pm=_34d.pm||_34c["dayPeriods-format-wide-pm"];s=am+"|"+pm;if(!_34d.strict){if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}if(s.indexOf(".")!=-1){s+="|"+s.replace(/\./g,"");}}s=s.replace(/\./g,"\\.");break;default:s=".*";}if(_34b){_34b.push(_34f);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};var _350=[];_30c.addCustomFormats=function(_351,_352){_350.push({pkg:_351,name:_352});};_30c._getGregorianBundle=function(_353){var _354={};_306.forEach(_350,function(desc){var _355=i18n.getLocalization(desc.pkg,desc.name,_353);_354=lang.mixin(_354,_355);},this);return _354;};_30c.addCustomFormats(_30b.id.replace(/\/date\/locale$/,".cldr"),"gregorian");_30c.getNames=function(item,type,_356,_357){var _358,_359=_30c._getGregorianBundle(_357),_35a=[item,_356,type];if(_356=="standAlone"){var key=_35a.join("-");_358=_359[key];if(_358[0]==1){_358=undefined;}}_35a[1]="format";return (_358||_359[_35a.join("-")]).concat();};_30c.isWeekend=function(_35b,_35c){var _35d=_307.getWeekend(_35c),day=(_35b||new Date()).getDay();if(_35d.end<_35d.start){_35d.end+=7;if(day<_35d.start){day+=7;}}return day>=_35d.start&&day<=_35d.end;};_30c._getDayOfYear=function(_35e){return date.difference(new Date(_35e.getFullYear(),0,1,_35e.getHours()),_35e)+1;};_30c._getWeekOfYear=function(_35f,_360){if(arguments.length==1){_360=0;}var _361=new Date(_35f.getFullYear(),0,1).getDay(),adj=(_361-_360+7)%7,week=Math.floor((_30c._getDayOfYear(_35f)+adj-1)/7);if(_361==_360){week++;}return week;};return _30c;});},"esri/symbols/MarkerSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dojox/gfx/_base","esri/kernel","esri/symbols/Symbol"],function(_362,lang,has,_363,_364,_365){var _366=_362(_365,{declaredClass:"esri.symbol.MarkerSymbol",angle:0,xoffset:0,yoffset:0,size:12,constructor:function(json){if(json&&lang.isObject(json)){this.size=_363.pt2px(this.size);this.xoffset=_363.pt2px(this.xoffset);this.yoffset=_363.pt2px(this.yoffset);}},setAngle:function(_367){this.angle=_367;return this;},setSize:function(size){this.size=size;return this;},setOffset:function(x,y){this.xoffset=x;this.yoffset=y;return this;},toJson:function(){var size=_363.px2pt(this.size);size=isNaN(size)?undefined:size;var xoff=_363.px2pt(this.xoffset);xoff=isNaN(xoff)?undefined:xoff;var yoff=_363.px2pt(this.yoffset);yoff=isNaN(yoff)?undefined:yoff;return lang.mixin(this.inherited("toJson",arguments),{size:size,angle:this.angle,xoffset:xoff,yoffset:yoff});}});if(has("extend-esri")){lang.setObject("symbol.MarkerSymbol",_366,_364);}return _366;});},"esri/_time":function(){define(["esri/TimeExtent"],function(){return {};});},"esri/symbols/FillSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/symbols/Symbol","esri/symbols/SimpleLineSymbol"],function(_368,lang,has,_369,_36a,_36b){var _36c=_368(_36a,{declaredClass:"esri.symbol.FillSymbol",constructor:function(json){if(json&&lang.isObject(json)&&json.outline){this.outline=new _36b(json.outline);}},setOutline:function(_36d){this.outline=_36d;return this;},toJson:function(){var json=this.inherited("toJson",arguments);if(this.outline){json.outline=this.outline.toJson();}return json;}});if(has("extend-esri")){lang.setObject("symbol.FillSymbol",_36c,_369);}return _36c;});},"esri/request":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/Deferred","dojo/_base/lang","dojo/_base/url","dojo/_base/xhr","dojo/io/script","dojo/io/iframe","dojo/dom-construct","dojo/io-query","esri/kernel","esri/config","esri/sniff","esri/lang","esri/urlUtils","esri/deferredUtils"],function(_36e,_36f,_370,lang,Url,xhr,_371,_372,_373,ioq,_374,_375,has,_376,_377,_378){var _379;function _37a(req,_37b,_37c,_37d){var _37e=false,_37f=false;if(_376.isDefined(_37b)){if(lang.isObject(_37b)){_37e=!!_37b.useProxy;_37f=!!_37b.usePost;}else{_37e=!!_37b;}}req=lang.mixin({},req);if(req._ssl){req.url=req.url.replace(/^http:/i,"https:");}var _380=req.content,path=req.url,form=_37c&&req.form,_381=_375.defaults.io;req.load=function(_382){var err;if(_382){if(_382.error){err=lang.mixin(new Error(),_382.error);err.log=_36f.isDebug;}else{if(_382.status==="error"){err=lang.mixin(new Error(),_382);err.log=_36f.isDebug;}}}return err||_382;};req.error=function(_383,io){if(io&&io.xhr){io.xhr.abort();}if(!(_383 instanceof Error)){_383=lang.mixin(new Error(),_383);}_383.log=_36f.isDebug;_381.errorHandler(_383,io);return _383;};if(req._token){req.content=req.content||{};req.content.token=req._token;}var len=0;if(_380&&path){len=ioq.objectToQuery(_380).length+path.length+1;}req.timeout=_376.isDefined(req.timeout)?req.timeout:_381.timeout;req.handleAs=req.handleAs||"json";try{var _384,_385,_386=_377.canUseXhr(req.url)&&!(/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(req.url)),_387=(_377.hasSameOrigin(req.url,window.location.href)||_386),_388=(_37f||_37c||len>_381.postLength)?true:false,_389=(!_387&&req.handleAs.indexOf("json")!==-1&&req.callbackParamName&&!_37c)?true:false,_38a=(!!_377.getProxyRule(req.url)||_381.alwaysUseProxy||_37e||((!_389||_388)&&!_387))?true:false;if(_37c&&!has("esri-file-upload")&&!_38a&&_386){_38a=true;}if(_38a){_384=_377.getProxyUrl(path);_385=_384.path;if(_384._xo){_386=true;}if(!_388&&(_385.length+1+len)>_381.postLength){_388=true;}req.url=_385+"?"+path;if(_388){req.content=lang.mixin(_384.query||{},_380);}else{var _38b=ioq.objectToQuery(lang.mixin(_384.query||{},_380));if(_38b){req.url+=("?"+_38b);}req.content=null;}}if(_389&&!_388){if(!_376.isDefined(req.isAsync)&&has("ff")<4){req.isAsync=true;}return _371.get(_379?_379(req):req);}else{var hdrs=req.headers;if(_386&&(!hdrs||!hdrs.hasOwnProperty("X-Requested-With"))){hdrs=req.headers=(hdrs||{});hdrs["X-Requested-With"]=null;}if(_37c){var _38c=req.callbackParamName||"callback.html",_38d=req.callbackElementName||"textarea",_38e,_38f,_390,i,il=form.elements?form.elements.length:0,el;_380=req.content;if(_380){for(_38e in _380){_390=_380[_38e];if(_376.isDefined(_390)){_38f=null;for(i=0;i<il;i++){el=form.elements[i];if(el.name===_38e){_38f=el;break;}}if(_38f){_38f.value=_390;}else{if(_37d){form.append(_38e,_390);}else{form.appendChild(_373.create("input",{type:"hidden",name:_38e,value:_390}));}}}}}if(has("esri-file-upload")){_36e.forEach(form.elements,function(el){if(el.name===_38c){form.removeChild(el);}});req.contentType=false;req.postData=_37d?form:new FormData(form);delete req.form;}else{form.enctype="multipart/form-data";if(has("ie")<9){form.encoding="multipart/form-data";}form.method="post";if(!_36e.some(form.elements,function(el){return el.name===_38c;})){form.appendChild(_373.create("input",{type:"hidden",name:_38c,value:_38d}));}if(path.toLowerCase().indexOf("addattachment")!==-1||path.toLowerCase().indexOf("updateattachment")!==-1){req.url=path+((path.indexOf("?")===-1)?"?":"&")+_38c+"="+_38d;if(_38a){req.url=_385+"?"+req.url;}}delete req.content;}}req=_379?_379(req):req;if(_388){if(_37c&&!has("esri-file-upload")){return _372.send(req);}else{return xhr.post(req);}}else{return xhr.get(req);}}}catch(e){var dfd=new _370();dfd.errback(req.error(e));return dfd;}};function _391(url){var _392=_375.defaults.io,_393=_392._processedCorsServers,_394=new Url(url),_395=-1;_394=(_394.host+(_394.port?(":"+_394.port):"")).toLowerCase();_395=_377.canUseXhr(url,true);if(_395>-1){_392.corsEnabledServers.splice(_395,1);}_393[_394]=1;return _395;};function _396(url){var _397=_375.defaults.io,_398=_397._processedCorsServers;if(!_397.corsDetection){return;}try{var _399=new Url(url);_399=(_399.host+(_399.port?(":"+_399.port):"")).toLowerCase();if(has("esri-cors")&&(url&&url.toLowerCase().indexOf("/rest/services")!==-1)&&(!_377.hasSameOrigin(url,window.location.href)&&!_377.canUseXhr(url))&&!_398[_399]){_398[_399]=-1;xhr.get({url:url.substring(0,url.toLowerCase().indexOf("/rest/")+"/rest/".length)+"info",content:{f:"json"},failOk:true,handleAs:"json",headers:{"X-Requested-With":null}}).then(function(_39a){if(_39a){_398[_399]=2;if(!_377.canUseXhr(url)){_397.corsEnabledServers.push(_399);}}else{_398[_399]=1;}},function(_39b){_398[_399]=1;});}}catch(e){console.log("esri._detectCors: an unknown error occurred while detecting CORS support");}};function _39c(_39d){_379=_39d;};function _39e(req,_39f){var dfd,form=req.form,_3a0=_39f&&_39f.disableIdentityLookup,_3a1=_39f&&_39f._preLookup,_3a2=form&&form.append,_3a3=form&&(form.elements?_36e.some(form.elements,function(el){return el.type==="file";}):_3a2),_3a4=(req.url.toLowerCase().indexOf("token=")!==-1||(req.content&&req.content.token)||(_3a3&&_36e.some(form.elements,function(el){return el.name==="token";})))?1:0;_396(req.url);if(req._usrDfd){dfd=req._usrDfd;}else{dfd=new _370(_378._dfdCanceller);dfd.addBoth(function(_3a5){if(_3a5&&(!has("ie")||!_3a5.nodeType)){_3a5._ssl=req._ssl;}});var ld=req.load,_3a6=req.error;if(ld){dfd.addCallback(function(_3a7){var _3a8=dfd._pendingDfd,_3a9=_3a8&&_3a8.ioArgs,args=_3a9&&_3a9.args;return ld.call(args,_3a7,_3a9);});}if(_3a6){dfd.addErrback(function(_3aa){var _3ab=dfd._pendingDfd,_3ac=_3ab&&_3ab.ioArgs,args=_3ac&&_3ac.args;return _3a6.call(args,_3aa,_3ac);});}}if(_374.id&&!_3a4&&!req._token&&!_374.id._isPublic(req.url)&&(!_3a0||_3a1)){var _3ad=_374.id.findCredential(req.url);if(_3ad){req._token=_3ad.token;req._ssl=_3ad.ssl;}}dfd._pendingDfd=_37a(req,_39f,_3a3,_3a2);if(!dfd._pendingDfd){dfd.ioArgs=dfd._pendingDfd&&dfd._pendingDfd.ioArgs;var err=new Error("Deferred object is missing");err.log=_36f.isDebug;req._usrDfd=null;dfd.errback(err);dfd._pendingDfd=null;return dfd;}dfd._pendingDfd.addCallback(function(_3ae){dfd.ioArgs=dfd._pendingDfd&&dfd._pendingDfd.ioArgs;req._usrDfd=null;dfd.callback(_3ae);dfd._pendingDfd=null;}).addErrback(function(_3af){if(_3af&&_3af.code==403&&_3af.message&&_3af.message.toLowerCase().indexOf("ssl")>-1&&_3af.message.toLowerCase().indexOf("permission")===-1){if(!req._ssl){req._ssl=req._sslFromServer=true;req._usrDfd=dfd;_39e(req,_39f);return;}}else{if(_3af&&_3af.status==415){var _3b0=_391(req.url);if(!req._err415){req._err415=1;req._usrDfd=dfd;_39e(req,_39f);return;}}else{if(_374.id&&_36e.indexOf(_374.id._errorCodes,_3af.code)!==-1&&!_374.id._isPublic(req.url)&&!_3a0){dfd._pendingDfd=_374.id.getCredential(req.url,{token:req._token,error:_3af});dfd._pendingDfd.addCallback(function(_3b1){req._token=_3b1.token;req._usrDfd=dfd;req._ssl=req._sslFromServer||_3b1.ssl;_39e(req,_39f);}).addErrback(function(_3b2){req._usrDfd=null;dfd.errback(_3b2);dfd._pendingDfd=null;});return;}}}dfd.ioArgs=dfd._pendingDfd&&dfd._pendingDfd.ioArgs;req._usrDfd=null;dfd.errback(_3af);dfd._pendingDfd=null;});return dfd;};_39e._request=_37a;_39e._disableCors=_391;_39e._detectCors=_396;_39e.setRequestPreCallback=_39c;if(has("extend-esri")){_374.request=_39e;_374._request=_37a;_374._disableCors=_391;_374._detectCors=_396;_374.setRequestPreCallback=_39c;}return _39e;});},"esri/symbols/SimpleLineSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","dojox/gfx/_base","esri/kernel","esri/lang","esri/symbols/LineSymbol"],function(_3b3,lang,_3b4,has,_3b5,_3b6,_3b7,_3b8){var _3b9={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"};var _3ba={color:[0,0,0,1],style:_3b9.STYLE_SOLID,width:1};var SLS=_3b3(_3b8,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",_styles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(json,_3bb,_3bc){if(json){if(lang.isString(json)){this.style=json;if(_3bb){this.color=_3bb;}if(_3bc){this.width=_3bc;}}else{this.style=_3b7.valueOf(this._styles,json.style)||_3b9.STYLE_SOLID;}}else{lang.mixin(this,_3ba);this.color=new _3b4(this.color);this.width=_3b5.pt2px(this.width);}},setStyle:function(_3bd){this.style=_3bd;return this;},getStroke:function(){return (this.style===_3b9.STYLE_NULL||this.width===0)?null:{color:this.color,style:this.style,width:this.width};},getFill:function(){return null;},getShapeDescriptors:function(){return {defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()};},toJson:function(){return _3b7.fixJson(lang.mixin(this.inherited("toJson",arguments),{type:"esriSLS",style:this._styles[this.style]}));}});lang.mixin(SLS,_3b9);SLS.defaultProps=_3ba;if(has("extend-esri")){lang.setObject("symbol.SimpleLineSymbol",SLS,_3b6);_3b6.symbol.defaultSimpleLineSymbol=_3ba;}return SLS;});},"esri/tileUtils":function(){define(["dojo/_base/array","dojo/has","esri/kernel","esri/geometry/Point","esri/geometry/Extent"],function(_3be,has,_3bf,_3c0,_3c1){function _3c2(map,ti,_3c3){var wd=map.width,ht=map.height,ew=_3c3.xmax-_3c3.xmin,eh=_3c3.ymax-_3c3.ymin,_3c4=map.getMinZoom(),_3c5=map.getMaxZoom(),ed=-1,lods=ti.lods,i,abs=Math.abs,lod,cl,ced;_3c4=(_3c4>-1)?_3c4:0;_3c5=(_3c5>-1)?_3c5:(lods.length-1);for(i=_3c4;i<=_3c5;i++){cl=lods[i];if(!cl){continue;}ced=ew>eh?abs(eh-(ht*cl.resolution)):abs(ew-(wd*cl.resolution));if(ed<0||ced<=ed){lod=cl;ed=ced;}else{break;}}return lod;};function _3c6(map,_3c7,lod){var res=lod.resolution,cx=(_3c7.xmin+_3c7.xmax)/2,cy=(_3c7.ymin+_3c7.ymax)/2,_3c8=(map.width/2)*res,_3c9=(map.height/2)*res;return new _3c1(cx-_3c8,cy-_3c9,cx+_3c8,cy+_3c9,_3c7.spatialReference);};function _3ca(map,ti,_3cb,lod){var res=lod.resolution,tw=ti.width,th=ti.height,to=ti.origin,mv=map.__visibleDelta,_3cc=Math.floor,tmw=tw*res,tmh=th*res,tr=_3cc((to.y-_3cb.y)/tmh),tc=_3cc((_3cb.x-to.x)/tmw),tmox=to.x+(tc*tmw),tmoy=to.y-(tr*tmh),oX=_3cc(Math.abs((_3cb.x-tmox)*tw/tmw))+mv.x,oY=_3cc(Math.abs((_3cb.y-tmoy)*th/tmh))+mv.y;return {point:_3cb,coords:{row:tr,col:tc},offsets:{x:oX,y:oY}};};var _3cd={_addFrameInfo:function(_3ce,_3cf){var _3d0,_3d1,_3d2=2*_3cf.origin[1],m180=_3cf.origin[0],_3d3=_3ce.origin.x,_3d4=_3ce.width,_3d5;_3be.forEach(_3ce.lods,function(lod){_3d0=Math.round(_3d2/lod.resolution);_3d1=Math.ceil(_3d0/_3d4);_3d5=Math.floor((m180-_3d3)/(_3d4*lod.resolution));if(!lod._frameInfo){lod._frameInfo=[_3d1,_3d5,_3d5+_3d1-1,_3d0];}});},getContainingTileCoords:function(ti,_3d6,lod){var to=ti.origin,res=lod.resolution,tmw=ti.width*res,tmh=ti.height*res,tc=Math.floor((_3d6.x-to.x)/tmw),tr=Math.floor((to.y-_3d6.y)/tmh);return {row:tr,col:tc};},getCandidateTileInfo:function(map,ti,_3d7){var lod=_3c2(map,ti,_3d7),adj=_3c6(map,_3d7,lod),ct=_3ca(map,ti,new _3c0(adj.xmin,adj.ymax,_3d7.spatialReference),lod);return {tile:ct,lod:lod,extent:adj};},getTileExtent:function(ti,_3d8,row,col){var to=ti.origin,lod=ti.lods[_3d8],res=lod.resolution,tw=ti.width,th=ti.height;return new _3c1(((col*res)*tw)+to.x,to.y-((row+1)*res)*th,(((col+1)*res)*tw)+to.x,to.y-((row*res)*th),ti.spatialReference);}};if(has("extend-esri")){_3bf.TileUtils=_3cd;}return _3cd;});},"esri/layers/DataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_3d9,lang,has,_3da){var _3db=_3d9(null,{declaredClass:"esri.layers.DataSource",constructor:function(json){if(json){lang.mixin(this,json);}},toJson:function(){}});if(has("extend-esri")){lang.setObject("layers.DataSource",_3db,_3da);}return _3db;});},"esri/utils":function(){define(["esri/domUtils","esri/lang","esri/urlUtils","esri/request","esri/tileUtils","esri/graphicsUtils","esri/deferredUtils","esri/layerUtils","esri/geometry/normalizeUtils"],function(){return {};});},"esri/renderers/TimeClassBreaksAger":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","dojo/date","esri/kernel","esri/lang","esri/symbols/jsonUtils","esri/renderers/SymbolAger"],function(_3dc,_3dd,lang,has,_3de,_3df,_3e0,_3e1,_3e2){var _3e3={UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"};var _3e4=_3dc(_3e2,{declaredClass:"esri.renderer.TimeClassBreaksAger",constructor:function(_3e5,_3e6){this.infos=_3e5;this.timeUnits=_3e6||"day";_3e5.sort(function(a,b){if(a.minAge<b.minAge){return -1;}if(a.minAge>b.minAge){return 1;}return 0;});},getAgedSymbol:function(_3e7,_3e8){var _3e9=_3e8.getLayer(),_3ea=_3e8.attributes,_3eb=_3e0.isDefined;_3e7=_3e1.fromJson(_3e7.toJson());var _3ec=_3e9._map.timeExtent;var _3ed=_3ec.endTime;if(!_3ed){return _3e7;}var _3ee=new Date(_3ea[_3e9._startTimeField]);var diff=_3de.difference(_3ee,_3ed,this.timeUnits);_3dd.some(this.infos,function(info){if(diff>=info.minAge&&diff<=info.maxAge){var _3ef=info.color,size=info.size,_3f0=info.alpha;if(_3ef){_3e7.setColor(_3ef);}if(_3eb(size)){this._setSymbolSize(_3e7,size);}if(_3eb(_3f0)&&_3e7.color){_3e7.color.a=_3f0;}return true;}},this);return _3e7;}});lang.mixin(_3e4,_3e3);if(has("extend-esri")){lang.setObject("renderer.TimeClassBreaksAger",_3e4,_3df);}return _3e4;});},"dojo/io/iframe":function(){define(["../_base/config","../_base/json","../_base/kernel","../_base/lang","../_base/xhr","../sniff","../_base/window","../dom","../dom-construct","../query","require","../aspect","../request/iframe"],function(_3f1,json,_3f2,lang,xhr,has,win,dom,_3f3,_3f4,_3f5,_3f6,_3f7){_3f2.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");var mid=_3f7._iframeName;mid=mid.substring(0,mid.lastIndexOf("_"));var _3f8=lang.delegate(_3f7,{create:function(){return _3f8._frame=_3f7.create.apply(_3f7,arguments);},get:null,post:null,send:function(args){var rDfd;var dfd=xhr._ioSetArgs(args,function(dfd){rDfd&&rDfd.cancel();},function(dfd){var _3f9=null,_3fa=dfd.ioArgs;try{var _3fb=_3fa.handleAs;if(_3fb==="xml"||_3fb==="html"){_3f9=rDfd.response.data;}else{_3f9=rDfd.response.text;if(_3fb==="json"){_3f9=json.fromJson(_3f9);}else{if(_3fb==="javascript"){_3f9=_3f2.eval(_3f9);}}}}catch(e){_3f9=e;}return _3f9;},function(_3fc,dfd){dfd.ioArgs._hasError=true;return _3fc;});var _3fd=dfd.ioArgs;var _3fe="GET",form=dom.byId(args.form);if(args.method&&args.method.toUpperCase()==="POST"&&form){_3fe="POST";}var _3ff={method:_3fe,handleAs:args.handleAs==="json"||args.handleAs==="javascript"?"text":args.handleAs,form:args.form,query:form?null:args.content,data:form?args.content:null,timeout:args.timeout,ioArgs:_3fd};if(_3ff.method){_3ff.method=_3ff.method.toUpperCase();}if(_3f1.ioPublish&&_3f2.publish&&_3fd.args.ioPublish!==false){var _400=_3f6.after(_3f7,"_notifyStart",function(data){if(data.options.ioArgs===_3fd){_400.remove();xhr._ioNotifyStart(dfd);}},true);}rDfd=_3f7(_3fd.url,_3ff,true);_3fd._callNext=rDfd._callNext;rDfd.then(function(){dfd.resolve(dfd);}).otherwise(function(_401){dfd.ioArgs.error=_401;dfd.reject(_401);});return dfd;},_iframeOnload:win.global[mid+"_onload"]});lang.setObject("dojo.io.iframe",_3f8);return _3f8;});},"esri/layers/agsdynamic":function(){define(["esri/layers/agscommon","esri/layers/ArcGISDynamicMapServiceLayer","esri/_time"],function(){return {};});},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","dojo/when"],function(_402,lang,_403,when){return _402("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}return (apn[name]={s:"_"+name+"Setter",g:"_"+name+"Getter"});},postscript:function(_404){if(_404){this.set(_404);}},_get:function(name,_405){return typeof this[_405.g]==="function"?this[_405.g]():this[name];},get:function(name){return this._get(name,this._getAttrNames(name));},set:function(name,_406){if(typeof name==="object"){for(var x in name){if(name.hasOwnProperty(x)&&x!="_watchCallbacks"){this.set(x,name[x]);}}return this;}var _407=this._getAttrNames(name),_408=this._get(name,_407),_409=this[_407.s],_40a;if(typeof _409==="function"){_40a=_409.apply(this,Array.prototype.slice.call(arguments,1));}else{this[name]=_406;}if(this._watchCallbacks){var self=this;when(_40a,function(){self._watchCallbacks(name,_408,_406);});}return this;},_changeAttrValue:function(name,_40b){var _40c=this.get(name);this[name]=_40b;if(this._watchCallbacks){this._watchCallbacks(name,_40c,_40b);}return this;},watch:function(name,_40d){var _40e=this._watchCallbacks;if(!_40e){var self=this;_40e=this._watchCallbacks=function(name,_40f,_410,_411){var _412=function(_413){if(_413){_413=_413.slice();for(var i=0,l=_413.length;i<l;i++){_413[i].call(self,name,_40f,_410);}}};_412(_40e["_"+name]);if(!_411){_412(_40e["*"]);}};}if(!_40d&&typeof name==="function"){_40d=name;name="*";}else{name="_"+name;}var _414=_40e[name];if(typeof _414!=="object"){_414=_40e[name]=[];}_414.push(_40d);var _415={};_415.unwatch=_415.remove=function(){var _416=_403.indexOf(_414,_40d);if(_416>-1){_414.splice(_416,1);}};return _415;}});});},"esri/symbols/PictureMarkerSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/sniff","dojox/gfx/_base","esri/kernel","esri/lang","esri/urlUtils","esri/symbols/MarkerSymbol"],function(_417,lang,has,_418,_419,_41a,_41b,_41c){var _41d={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};var PMS=_417(_41c,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(json,_41e,_41f){if(json){if(lang.isString(json)){this.url=json;if(_41e){this.width=_41e;}if(_41f){this.height=_41f;}}else{this.width=_418.pt2px(json.width);this.height=_418.pt2px(json.height);var _420=json.imageData;if((!(has("ie")<9))&&_420){var temp=this.url;this.url="data:"+(json.contentType||"image")+";base64,"+_420;this.imageData=temp;}}}else{lang.mixin(this,_41d);this.width=_418.pt2px(this.width);this.height=_418.pt2px(this.height);}},getStroke:function(){return null;},getFill:function(){return null;},setWidth:function(_421){this.width=_421;return this;},setHeight:function(_422){this.height=_422;return this;},setUrl:function(url){if(url!==this.url){delete this.imageData;delete this.contentType;}this.url=url;return this;},getShapeDescriptors:function(){var _423={type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""};return {defaultShape:_423,fill:null,stroke:null};},toJson:function(){var url=this.url,_424=this.imageData;if(url.indexOf("data:")===0){var temp=url;url=_424;var _425=temp.indexOf(";base64,")+8;_424=temp.substr(_425);}url=_41b.getAbsoluteUrl(url);var _426=_418.px2pt(this.width);_426=isNaN(_426)?undefined:_426;var _427=_418.px2pt(this.height);_427=isNaN(_427)?undefined:_427;var _428=_41a.fixJson(lang.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:url,imageData:_424,contentType:this.contentType,width:_426,height:_427}));delete _428.color;delete _428.size;if(!_428.imageData){delete _428.imageData;}return _428;}});PMS.defaultProps=_41d;if(has("extend-esri")){lang.setObject("symbol.PictureMarkerSymbol",PMS,_419);_419.symbol.defaultPictureMarkerSymbol=_41d;}return PMS;});},"esri/layers/InheritedDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/layers/Domain"],function(_429,lang,has,_42a,_42b){var _42c=_429([_42b],{declaredClass:"esri.layers.InheritedDomain"});if(has("extend-esri")){lang.setObject("layers.InheritedDomain",_42c,_42a);}return _42c;});},"esri/layers/LayerDataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/LayerSource","esri/layers/TableDataSource","esri/layers/QueryDataSource","esri/layers/JoinDataSource","esri/layers/RasterDataSource"],function(_42d,lang,has,_42e,_42f,_430,_431,_432,_433,_434){var _435=_42d(_430,{declaredClass:"esri.layers.LayerDataSource",type:"dataLayer",constructor:function(json){if(json&&json.dataSource){var _436;switch(json.dataSource.type){case "table":_436=new _431(json.dataSource);break;case "queryTable":_436=new _432(json.dataSource);break;case "joinTable":_436=new _433(json.dataSource);break;case "raster":_436=new _434(json.dataSource);break;default:_436=json.dataSource;}this.dataSource=_436;}},toJson:function(){var json={type:"dataLayer",dataSource:this.dataSource&&this.dataSource.toJson()};return _42f.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.LayerDataSource",_435,_42e);}return _435;});},"dojox/xml/parser":function(){define("dojox/xml/parser",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(dojo){dojo.getObject("xml.parser",true,dojox);dojox.xml.parser.parse=function(str,_437){var _438=dojo.doc;var doc;_437=_437||"text/xml";if(str&&dojo.trim(str)&&"DOMParser" in dojo.global){var _439=new DOMParser();doc=_439.parseFromString(str,_437);var de=doc.documentElement;var _43a="http://www.mozilla.org/newlayout/xml/parsererror.xml";if(de.nodeName=="parsererror"&&de.namespaceURI==_43a){var _43b=de.getElementsByTagNameNS(_43a,"sourcetext")[0];if(_43b){_43b=_43b.firstChild.data;}throw new Error("Error parsing text "+de.firstChild.data+" \n"+_43b);}return doc;}else{if("ActiveXObject" in dojo.global){var ms=function(n){return "MSXML"+n+".DOMDocument";};var dp=["Microsoft.XMLDOM",ms(6),ms(4),ms(3),ms(2)];dojo.some(dp,function(p){try{doc=new ActiveXObject(p);}catch(e){return false;}return true;});if(str&&doc){doc.async=false;doc.loadXML(str);var pe=doc.parseError;if(pe.errorCode!==0){throw new Error("Line: "+pe.line+"\n"+"Col: "+pe.linepos+"\n"+"Reason: "+pe.reason+"\n"+"Error Code: "+pe.errorCode+"\n"+"Source: "+pe.srcText);}}if(doc){return doc;}}else{if(_438.implementation&&_438.implementation.createDocument){if(str&&dojo.trim(str)&&_438.createElement){var tmp=_438.createElement("xml");tmp.innerHTML=str;var _43c=_438.implementation.createDocument("foo","",null);dojo.forEach(tmp.childNodes,function(_43d){_43c.importNode(_43d,true);});return _43c;}else{return _438.implementation.createDocument("","",null);}}}}return null;};dojox.xml.parser.textContent=function(node,text){if(arguments.length>1){var _43e=node.ownerDocument||dojo.doc;dojox.xml.parser.replaceChildren(node,_43e.createTextNode(text));return text;}else{if(node.textContent!==undefined){return node.textContent;}var _43f="";if(node){dojo.forEach(node.childNodes,function(_440){switch(_440.nodeType){case 1:case 5:_43f+=dojox.xml.parser.textContent(_440);break;case 3:case 2:case 4:_43f+=_440.nodeValue;}});}return _43f;}};dojox.xml.parser.replaceChildren=function(node,_441){var _442=[];if(dojo.isIE){dojo.forEach(node.childNodes,function(_443){_442.push(_443);});}dojox.xml.parser.removeChildren(node);dojo.forEach(_442,dojo.destroy);if(!dojo.isArray(_441)){node.appendChild(_441);}else{dojo.forEach(_441,function(_444){node.appendChild(_444);});}};dojox.xml.parser.removeChildren=function(node){var _445=node.childNodes.length;while(node.hasChildNodes()){node.removeChild(node.firstChild);}return _445;};dojox.xml.parser.innerXML=function(node){if(node.innerXML){return node.innerXML;}else{if(node.xml){return node.xml;}else{if(typeof XMLSerializer!="undefined"){return (new XMLSerializer()).serializeToString(node);}}}return null;};return dojox.xml.parser;});},"esri/layers/ImageParameters":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","esri/kernel","esri/lang","esri/layerUtils"],function(_446,_447,lang,_448,has,_449,_44a,_44b){var _44c=_447(null,{declaredClass:"esri.layers.ImageParameters",constructor:function(){this.layerDefinitions=[];},bbox:null,extent:null,width:null,height:null,dpi:null,format:null,imageSpatialReference:null,layerOption:null,layerIds:null,transparent:null,timeExtent:null,layerTimeOptions:null,toJson:function(_44d){if(this.bbox){_446.deprecated(this.declaredClass+" : Property 'bbox' deprecated. Use property 'extent'.");}var bb=this.bbox||this.extent;bb=bb&&_44d&&bb._normalize(true);var _44e=this.layerOption,wkid=bb?(bb.spatialReference.wkid||_448.toJson(bb.spatialReference.toJson())):null,_44f=this.imageSpatialReference,json={dpi:this.dpi,format:this.format,transparent:this.transparent,size:(this.width!==null&&this.height!==null?this.width+","+this.height:null),bbox:(bb?(bb.xmin+","+bb.ymin+","+bb.xmax+","+bb.ymax):null),bboxSR:wkid,layers:(_44e?_44e+":"+this.layerIds.join(","):null),imageSR:(_44f?(_44f.wkid||_448.toJson(_44f.toJson())):wkid)};json.layerDefs=_44b._serializeLayerDefinitions(this.layerDefinitions);var _450=this.timeExtent;json.time=_450?_450.toJson().join(","):null;json.layerTimeOptions=_44b._serializeTimeOptions(this.layerTimeOptions);return _44a.filter(json,function(_451){if(_451!==null){return true;}});}});lang.mixin(_44c,{LAYER_OPTION_SHOW:"show",LAYER_OPTION_HIDE:"hide",LAYER_OPTION_INCLUDE:"include",LAYER_OPTION_EXCLUDE:"exclude"});if(has("extend-esri")){lang.setObject("layers.ImageParameters",_44c,_449);}return _44c;});},"esri/symbols/Symbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","esri/kernel","esri/lang"],function(_452,lang,_453,has,_454,_455){function _456(clr){return clr&&new _453([clr[0],clr[1],clr[2],clr[3]/255]);};function _457(clr){return clr&&[clr.r,clr.g,clr.b,Math.round(clr.a*255)];};var _458=_452(null,{declaredClass:"esri.symbol.Symbol",color:new _453([0,0,0,1]),type:null,_stroke:null,_fill:null,constructor:function(json){if(json&&lang.isObject(json)){lang.mixin(this,json);if(this.color&&_455.isDefined(this.color[0])){this.color=_456(this.color);}var type=this.type;if(type&&type.indexOf("esri")===0){this.type={"esriSMS":"simplemarkersymbol","esriPMS":"picturemarkersymbol","esriSLS":"simplelinesymbol","esriCLS":"cartographiclinesymbol","esriSFS":"simplefillsymbol","esriPFS":"picturefillsymbol","esriTS":"textsymbol"}[type];}}},setColor:function(_459){this.color=_459;return this;},toJson:function(){return {color:_457(this.color)};}});_458.toDojoColor=_456;_458.toJsonColor=_457;if(has("extend-esri")){lang.setObject("symbol.Symbol",_458,_454);_454.symbol.toDojoColor=_456;_454.symbol.toJsonColor=_457;}return _458;});},"esri/lang":function(){define(["dojo/_base/array","dojo/_base/json","dojo/_base/kernel","dojo/_base/lang","dojo/date","dojo/has","dojo/number","dojo/date/locale","esri/kernel"],function(_45a,json,_45b,lang,_45c,has,_45d,_45e,_45f){function _460(arr,obj,cb){return [lang.isString(arr)?arr.split(""):arr,obj||_45b.global,lang.isString(cb)?new Function("item","index","array",cb):cb];};function _461(_462){return (_462!==undefined)&&(_462!==null);};var _463="${*}",_464=["NumberFormat","DateString","DateFormat"];function _465(_466){return _461(_466)?_466:"";};function exec(key,data,_467){var _468=_467.match(/([^\(]+)(\([^\)]+\))?/i),_469=lang.trim(_468[1]),_46a=data[key],_46b,args=json.fromJson((_468[2]?lang.trim(_468[2]):"()").replace(/^\(/,"({").replace(/\)$/,"})")),_46c=args.utcOffset;if(_45a.indexOf(_464,_469)===-1){var ref=lang.getObject(_469);if(lang.isFunction(ref)){_46a=ref(_46a,key,data);}}else{if(typeof _46a==="number"||(typeof _46a==="string"&&_46a&&!isNaN(Number(_46a)))){_46a=Number(_46a);switch(_469){case "NumberFormat":return _45d.format(_46a,args);break;case "DateString":_46b=new Date(_46a);if(args.local||args.systemLocale){if(args.systemLocale){return _46b.toLocaleDateString()+(args.hideTime?"":(" "+_46b.toLocaleTimeString()));}else{return _46b.toDateString()+(args.hideTime?"":(" "+_46b.toTimeString()));}}else{_46b=_46b.toUTCString();if(args.hideTime){_46b=_46b.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,"");}return _46b;}break;case "DateFormat":_46b=new Date(_46a);if(_461(_46c)){_46b=_45c.add(_46b,"minute",(_46b.getTimezoneOffset()-_46c));}return _45e.format(_46b,args);break;}}}return _465(_46a);};function _46d(obj,_46e){var prop;if(_46e){for(prop in obj){if(obj.hasOwnProperty(prop)){if(obj[prop]===undefined||obj[prop]===null){delete obj[prop];}else{if(obj[prop] instanceof Object){_46d(obj[prop],true);}}}}}else{for(prop in obj){if(obj.hasOwnProperty(prop)){if(obj[prop]===undefined){delete obj[prop];}}}}return obj;};var _46f={valueOf:function(_470,_471){var i;for(i in _470){if(_470[i]==_471){return i;}}return null;},substitute:function(data,_472,_473){var _474,_475,_476;if(_461(_473)){if(lang.isObject(_473)){_474=_473.first;_475=_473.dateFormat;_476=_473.numberFormat;}else{_474=_473;}}if(!_472||_472===_463){var s=[],val,i;for(i in data){val=data[i];if(_475&&_45a.indexOf(_475.properties||"",i)!==-1){val=exec(i,data,_475.formatter||"DateString");}else{if(_476&&_45a.indexOf(_476.properties||"",i)!==-1){val=exec(i,data,_476.formatter||"NumberFormat");}}s.push(i+" = "+_465(val)+"<br/>");if(_474){break;}}return s.join("");}else{return lang.replace(_472,lang.hitch({obj:data},function(_477,key){var _478=key.split(":");if(_478.length>1){key=_478[0];_478.shift();return exec(key,this.obj,_478.join(":"));}else{if(_475&&_45a.indexOf(_475.properties||"",key)!==-1){return exec(key,this.obj,_475.formatter||"DateString");}if(_476&&_45a.indexOf(_476.properties||"",key)!==-1){return exec(key,this.obj,_476.formatter||"NumberFormat");}}return _465(this.obj[key]);}),/\$\{([^\}]+)\}/g);}},filter:function(arr,_479,_47a){var _47b=_460(arr,_47a,_479),_47c={},i;arr=_47b[0];for(i in arr){if(_47b[2].call(_47b[i],arr[i],i,arr)){_47c[i]=arr[i];}}return _47c;},isDefined:_461,fixJson:_46d};if(has("extend-esri")){lang.mixin(_45f,_46f);_45f._isDefined=_461;_45f._getParts=_460;_45f._sanitize=_46d;}return _46f;});},"dojox/collections/ArrayList":function(){define("dojox/collections/ArrayList",["dojo/_base/kernel","dojo/_base/array","./_base"],function(dojo,_47d,dxc){dxc.ArrayList=function(arr){var _47e=[];if(arr){_47e=_47e.concat(arr);}this.count=_47e.length;this.add=function(obj){_47e.push(obj);this.count=_47e.length;};this.addRange=function(a){if(a.getIterator){var e=a.getIterator();while(!e.atEnd()){this.add(e.get());}this.count=_47e.length;}else{for(var i=0;i<a.length;i++){_47e.push(a[i]);}this.count=_47e.length;}};this.clear=function(){_47e.splice(0,_47e.length);this.count=0;};this.clone=function(){return new dxc.ArrayList(_47e);};this.contains=function(obj){for(var i=0;i<_47e.length;i++){if(_47e[i]==obj){return true;}}return false;};this.forEach=function(fn,_47f){dojo.forEach(_47e,fn,_47f);};this.getIterator=function(){return new dxc.Iterator(_47e);};this.indexOf=function(obj){for(var i=0;i<_47e.length;i++){if(_47e[i]==obj){return i;}}return -1;};this.insert=function(i,obj){_47e.splice(i,0,obj);this.count=_47e.length;};this.item=function(i){return _47e[i];};this.remove=function(obj){var i=this.indexOf(obj);if(i>=0){_47e.splice(i,1);}this.count=_47e.length;};this.removeAt=function(i){_47e.splice(i,1);this.count=_47e.length;};this.reverse=function(){_47e.reverse();};this.sort=function(fn){if(fn){_47e.sort(fn);}else{_47e.sort();}};this.setByIndex=function(i,obj){_47e[i]=obj;this.count=_47e.length;};this.toArray=function(){return [].concat(_47e);};this.toString=function(_480){return _47e.join((_480||","));};};return dxc.ArrayList;});},"dojox/collections/_base":function(){define("dojox/collections/_base",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(dojo,lang,arr){var _481=lang.getObject("dojox.collections",true);_481.DictionaryEntry=function(k,v){this.key=k;this.value=v;this.valueOf=function(){return this.value;};this.toString=function(){return String(this.value);};};_481.Iterator=function(a){var _482=0;this.element=a[_482]||null;this.atEnd=function(){return (_482>=a.length);};this.get=function(){if(this.atEnd()){return null;}this.element=a[_482++];return this.element;};this.map=function(fn,_483){return arr.map(a,fn,_483);};this.reset=function(){_482=0;this.element=a[_482];};};_481.DictionaryIterator=function(obj){var a=[];var _484={};for(var p in obj){if(!_484[p]){a.push(obj[p]);}}var _485=0;this.element=a[_485]||null;this.atEnd=function(){return (_485>=a.length);};this.get=function(){if(this.atEnd()){return null;}this.element=a[_485++];return this.element;};this.map=function(fn,_486){return arr.map(a,fn,_486);};this.reset=function(){_485=0;this.element=a[_485];};};return _481;});},"dojo/_base/url":function(){define(["./kernel"],function(dojo){var ore=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ire=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$"),_487=function(){var n=null,_488=arguments,uri=[_488[0]];for(var i=1;i<_488.length;i++){if(!_488[i]){continue;}var _489=new _487(_488[i]+""),_48a=new _487(uri[0]+"");if(_489.path==""&&!_489.scheme&&!_489.authority&&!_489.query){if(_489.fragment!=n){_48a.fragment=_489.fragment;}_489=_48a;}else{if(!_489.scheme){_489.scheme=_48a.scheme;if(!_489.authority){_489.authority=_48a.authority;if(_489.path.charAt(0)!="/"){var path=_48a.path.substring(0,_48a.path.lastIndexOf("/")+1)+_489.path;var segs=path.split("/");for(var j=0;j<segs.length;j++){if(segs[j]=="."){if(j==segs.length-1){segs[j]="";}else{segs.splice(j,1);j--;}}else{if(j>0&&!(j==1&&segs[0]=="")&&segs[j]==".."&&segs[j-1]!=".."){if(j==(segs.length-1)){segs.splice(j,1);segs[j-1]="";}else{segs.splice(j-1,2);j-=2;}}}}_489.path=segs.join("/");}}}}uri=[];if(_489.scheme){uri.push(_489.scheme,":");}if(_489.authority){uri.push("//",_489.authority);}uri.push(_489.path);if(_489.query){uri.push("?",_489.query);}if(_489.fragment){uri.push("#",_489.fragment);}}this.uri=uri.join("");var r=this.uri.match(ore);this.scheme=r[2]||(r[1]?"":n);this.authority=r[4]||(r[3]?"":n);this.path=r[5];this.query=r[7]||(r[6]?"":n);this.fragment=r[9]||(r[8]?"":n);if(this.authority!=n){r=this.authority.match(ire);this.user=r[3]||n;this.password=r[4]||n;this.host=r[6]||r[7];this.port=r[9]||n;}};_487.prototype.toString=function(){return this.uri;};return dojo._Url=_487;});},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(_48b,lang){var _48c={};lang.setObject("dojo.string",_48c);_48c.rep=function(str,num){if(num<=0||!str){return "";}var buf=[];for(;;){if(num&1){buf.push(str);}if(!(num>>=1)){break;}str+=str;}return buf.join("");};_48c.pad=function(text,size,ch,end){if(!ch){ch="0";}var out=String(text),pad=_48c.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};_48c.substitute=function(_48d,map,_48e,_48f){_48f=_48f||_48b.global;_48e=_48e?lang.hitch(_48f,_48e):function(v){return v;};return _48d.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_490,key,_491){var _492=lang.getObject(key,false,map);if(_491){_492=lang.getObject(_491,false,_48f).call(_48f,_492,key);}return _48e(_492,key).toString();});};_48c.trim=String.prototype.trim?lang.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};return _48c;});},"esri/layers/LayerSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_493,lang,has,_494){var _495=_493(null,{declaredClass:"esri.layers.LayerSource",type:null,constructor:function(json){if(json){lang.mixin(this,json);}},toJson:function(){}});if(has("extend-esri")){lang.setObject("layers.LayerSource",_495,_494);}return _495;});},"dijit/registry":function(){define("dijit/registry",["dojo/_base/array","dojo/sniff","dojo/_base/unload","dojo/_base/window","./main"],function(_496,has,_497,win,_498){var _499={},hash={};var _49a={length:0,add:function(_49b){if(hash[_49b.id]){throw new Error("Tried to register widget with id=="+_49b.id+" but that id is already registered");}hash[_49b.id]=_49b;this.length++;},remove:function(id){if(hash[id]){delete hash[id];this.length--;}},byId:function(id){return typeof id=="string"?hash[id]:id;},byNode:function(node){return hash[node.getAttribute("widgetId")];},toArray:function(){var ar=[];for(var id in hash){ar.push(hash[id]);}return ar;},getUniqueId:function(_49c){var id;do{id=_49c+"_"+(_49c in _499?++_499[_49c]:_499[_49c]=0);}while(hash[id]);return _498._scopeName=="dijit"?id:_498._scopeName+"_"+id;},findWidgets:function(root,_49d){var _49e=[];function _49f(root){for(var node=root.firstChild;node;node=node.nextSibling){if(node.nodeType==1){var _4a0=node.getAttribute("widgetId");if(_4a0){var _4a1=hash[_4a0];if(_4a1){_49e.push(_4a1);}}else{if(node!==_49d){_49f(node);}}}}};_49f(root);return _49e;},_destroyAll:function(){_498._curFocus=null;_498._prevFocus=null;_498._activeStack=[];_496.forEach(_49a.findWidgets(win.body()),function(_4a2){if(!_4a2._destroyed){if(_4a2.destroyRecursive){_4a2.destroyRecursive();}else{if(_4a2.destroy){_4a2.destroy();}}}});},getEnclosingWidget:function(node){while(node){var id=node.nodeType==1&&node.getAttribute("widgetId");if(id){return hash[id];}node=node.parentNode;}return null;},_hash:hash};_498.registry=_49a;return _49a;});},"dijit/_base/manager":function(){define("dijit/_base/manager",["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(_4a3,_4a4,lang,_4a5,_4a6){var _4a7={};_4a3.forEach(["byId","getUniqueId","findWidgets","_destroyAll","byNode","getEnclosingWidget"],function(name){_4a7[name]=_4a5[name];});lang.mixin(_4a7,{defaultDuration:_4a4["defaultDuration"]||200});lang.mixin(_4a6,_4a7);return _4a6;});},"esri/dijit/Popup":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/kernel","dojo/has","dojo/window","dojo/Stateful","dojo/query","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","esri/kernel","esri/lang","esri/sniff","esri/domUtils","esri/geometry/Polyline","esri/geometry/Polygon","esri/InfoWindowBase","esri/PopupBase","dojo/i18n!esri/nls/jsapi","dojo/NodeList-dom"],function(_4a8,lang,_4a9,_4aa,_4ab,has,win,_4ac,_4ad,dom,_4ae,_4af,_4b0,_4b1,_4b2,_4b3,_4b4,_4b5,_4b6,_4b7,_4b8,_4b9,_4ba,_4bb){var _4bc=_4a8([_4b9,_4ba,_4ac],{declaredClass:"esri.dijit.Popup",offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:true,pagingControls:true,pagingInfo:true,keepHighlightOnHide:false,popupWindow:true,constructor:function(_4bd,_4be){this.initialize();lang.mixin(this,_4bd);this.domNode=dom.byId(_4be);var nls=this._nls=lang.mixin({},_4bb.widgets.popup);var _4bf=this.domNode;_4af.add(_4bf,"esriPopup");this._isRTL=!_4b1.isBodyLtr();if(this._isRTL){_4b2.set(_4bf,"direction","rtl");}var _4c0="<div class='esriPopupWrapper' style='position: absolute;'>"+"<div class='sizer'>"+"<div class='titlePane'>"+"<div class='spinner hidden' title='"+nls.NLS_searching+"...'></div>"+"<div class='title'></div>"+"<div class='titleButton prev hidden' title='"+nls.NLS_prevFeature+"'></div>"+"<div class='titleButton next hidden' title='"+nls.NLS_nextFeature+"'></div>"+"<div class='titleButton maximize' title='"+nls.NLS_maximize+"'></div>"+"<div class='titleButton close' title='"+nls.NLS_close+"'></div>"+"</div>"+"</div>"+"<div class='sizer content'>"+"<div class='contentPane'>"+"</div>"+"</div>"+"<div class='sizer'>"+"<div class='actionsPane'>"+"<div class='actionList hidden'>"+"<a class='action zoomTo' href='javascript:void(0);'>"+nls.NLS_zoomTo+"</a>"+"</div>"+"</div>"+"</div>"+"<div class='pointer hidden'></div>"+"</div>"+"<div class='outerPointer hidden'></div>";_4ae.set(_4bf,"innerHTML",_4c0);this._sizers=_4ab.query(".sizer",_4bf);var _4c1=_4ab.query(".titlePane",_4bf)[0];dom.setSelectable(_4c1,false);this._title=_4ab.query(".title",_4c1)[0];this._prevFeatureButton=_4ab.query(".prev",_4c1)[0];this._nextFeatureButton=_4ab.query(".next",_4c1)[0];this._maxButton=_4ab.query(".maximize",_4c1)[0];this._spinner=_4ab.query(".spinner",_4c1)[0];this._contentPane=_4ab.query(".contentPane",_4bf)[0];this._positioner=_4ab.query(".esriPopupWrapper",_4bf)[0];this._pointer=_4ab.query(".pointer",_4bf)[0];this._outerPointer=_4ab.query(".outerPointer",_4bf)[0];this._actionList=_4ab.query(".actionsPane .actionList",_4bf)[0];this._eventConnections=[_4aa.connect(_4ab.query(".close",_4c1)[0],"onclick",this,this.hide),_4aa.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),_4aa.connect(this._nextFeatureButton,"onclick",this,this.selectNext),_4aa.connect(this._maxButton,"onclick",this,this._toggleSize),_4aa.connect(_4ab.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature),_4aa.connect(this,"onClearFeatures",this,this._featuresCleared),_4aa.connect(this,"onSelectionChange",this,this._featureSelected),_4aa.connect(this,"onDfdComplete",this,this._updateUI)];if(has("esri-touch")){var _4c2=_4b6.setScrollable(this._contentPane);this._eventConnections.push(_4c2[0],_4c2[1]);}this._toggleVisibility(false);},onMaximize:function(){},onRestore:function(){},setMap:function(map){this.inherited(arguments);_4b0.place(this.domNode,map.root);if(this.highlight){this.enableHighlight(map);}this._maxHeight=_4b2.get(this._contentPane,"maxHeight");},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments);},setTitle:function(_4c3){if(!this.popupWindow){return;}if(!_4b4.isDefined(_4c3)||_4c3===""){_4c3="&nbsp;";}this.destroyDijits(this._title);this.place(_4c3,this._title);if(this.isShowing){this.startupDijits(this._title);this.reposition();}},setContent:function(_4c4){if(!this.popupWindow){return;}if(!_4b4.isDefined(_4c4)||_4c4===""){_4c4="&nbsp;";}this.destroyDijits(this._contentPane);this.place(_4c4,this._contentPane);if(this.isShowing){this.startupDijits(this._contentPane);this.reposition();}},show:function(_4c5,_4c6){if(!this.popupWindow){return;}if(!_4c5){this._toggleVisibility(true);return;}var map=this.map,_4c7;if(_4c5.spatialReference){this._location=_4c5;_4c7=map.toScreen(_4c5);}else{this._location=map.toMap(_4c5);_4c7=_4c5;}var _4c8=map._getFrameWidth();if(_4c8!==-1){_4c7.x=_4c7.x%_4c8;if(_4c7.x<0){_4c7.x+=_4c8;}if(map.width>_4c8){var _4c9=(map.width-_4c8)/2;while(_4c7.x<_4c9){_4c7.x+=_4c8;}}}if(this._maximized){this.restore();}else{this._setPosition(_4c7);}if(_4c6&&_4c6.closestFirst){this.showClosestFirst(this._location);}if(!this.isShowing){this._toggleVisibility(true);this._followMap();this.startupDijits(this._title);this.startupDijits(this._contentPane);this.reposition();this.showHighlight();this.onShow();}},hide:function(){if(this.isShowing){this._toggleVisibility(false);this._unfollowMap();if(!this.keepHighlightOnHide){this.hideHighlight();}this.onHide();}},resize:function(_4ca,_4cb){if(!this.popupWindow){return;}this._sizers.style({width:_4ca+"px"});_4b2.set(this._contentPane,"maxHeight",_4cb+"px");this._maxHeight=_4cb;if(this.isShowing){this.reposition();}},reposition:function(){if(!this.popupWindow){return;}if(this.map&&this._location&&!this._maximized&&this.isShowing){this._setPosition(this.map.toScreen(this._location));}},maximize:function(){var map=this.map;if(!map||this._maximized||!this.popupWindow){return;}this._maximized=true;var max=this._maxButton;_4af.remove(max,"maximize");_4af.add(max,"restore");_4ae.set(max,"title",this._nls.NLS_restore);var _4cc=this.marginLeft,_4cd=this.marginTop,_4ce=map.width-(2*_4cc),_4cf=map.height-(2*_4cd),_4d0=this.domNode;_4b2.set(_4d0,{left:this._isRTL?null:(_4cc+"px"),right:this._isRTL?(_4cc+"px"):null,top:_4cd+"px",bottom:null});_4b2.set(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=_4b2.get(this._sizers[0],"width");this._savedHeight=_4b2.get(this._contentPane,"maxHeight");this._sizers.style({width:_4ce+"px"});_4b2.set(this._contentPane,{maxHeight:(_4cf-65)+"px",height:(_4cf-65)+"px"});this._showPointer("");this._unfollowMap();_4af.add(this.domNode,"esriPopupMaximized");this.onMaximize();},restore:function(){var map=this.map;if(!map||!this._maximized||!this.popupWindow){return;}this._maximized=false;var max=this._maxButton;_4af.remove(max,"restore");_4af.add(max,"maximize");_4ae.set(max,"title",this._nls.NLS_maximize);_4b2.set(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this._location);this._followMap();_4af.remove(this.domNode,"esriPopupMaximized");this.onRestore();},startup:function(){},destroy:function(){if(this.map){this.unsetMap();}this.cleanup();if(this.isShowing){this.hide();}this.destroyDijits(this._title);this.destroyDijits(this._content);_4a9.forEach(this._eventConnections,_4aa.disconnect);_4b0.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=this._pagerScope=this._targetLocation=this._nls=this._maxButton=null;},selectNext:function(){this.select(this.selectedIndex+1);},selectPrevious:function(){this.select(this.selectedIndex-1);},setFeatures:function(){this.inherited(arguments);this._updateUI();},postscript:null,_highlightSetter:function(_4d1){var _4d2=this.highlight,map=this.map;this.highlight=_4d1;if(map&&_4d1!==_4d2){if(_4d1){this.enableHighlight(map);var _4d3=this.features&&this.features[this.selectedIndex];if(_4d3){this.updateHighlight(map,_4d3);this.showHighlight();}}else{this.disableHighlight(map);}}},_pagingControlsSetter:function(_4d4){var _4d5=this.pagingControls,map=this.map;this.pagingControls=_4d4;if(map&&_4d4!==_4d5){this._updatePagingControls();}},_pagingInfoSetter:function(_4d6){var _4d7=this.pagingInfo,map=this.map;this.pagingInfo=_4d6;if(map&&_4d6!==_4d7&&this.features&&this.features.length){this._updatePagingInfo();}},_popupWindowSetter:function(_4d8){var _4d9=this.popupWindow,map=this.map;this.popupWindow=_4d8;if(map&&_4d8!==_4d9){if(_4d8){this._updateUI();this._updateWindow();}else{this.hide();this.showHighlight();}}},_featuresCleared:function(){this.setTitle("&nbsp;");this.setContent("&nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight();},_featureSelected:function(){this._updateUI();this._updateWindow();},_updateWindow:function(){var ptr=this.selectedIndex;if(ptr>=0){this.setContent(this.features[ptr].getContent());this.updateHighlight(this.map,this.features[ptr]);this.showHighlight();}},_toggleVisibility:function(_4da){this._setVisibility(_4da);this.isShowing=_4da;},_setVisibility:function(_4db){_4b2.set(this.domNode,"visibility",_4db?"visible":"hidden");},_followMap:function(){this._unfollowMap();var map=this.map;this._handles=[_4aa.connect(map,"onPanStart",this,this._onPanStart),_4aa.connect(map,"onPan",this,this._onPan),_4aa.connect(map,"onZoomStart",this,this._onZoomStart),_4aa.connect(map,"onExtentChange",this,this._onExtentChange)];},_unfollowMap:function(){var _4dc=this._handles;if(_4dc){_4a9.forEach(_4dc,_4aa.disconnect);this._handles=null;}},_onPanStart:function(){var _4dd=this.domNode.style;this._panOrigin={left:_4dd.left,top:_4dd.top,right:_4dd.right,bottom:_4dd.bottom};},_onPan:function(_4de,_4df){var _4e0=this._panOrigin,dx=_4df.x,dy=_4df.y,left=_4e0.left,top=_4e0.top,_4e1=_4e0.right,_4e2=_4e0.bottom;if(left){left=(parseFloat(left)+dx)+"px";}if(top){top=(parseFloat(top)+dy)+"px";}if(_4e1){_4e1=(parseFloat(_4e1)-dx)+"px";}if(_4e2){_4e2=(parseFloat(_4e2)-dy)+"px";}_4b2.set(this.domNode,{left:left,top:top,right:_4e1,bottom:_4e2});},_onZoomStart:function(){this._setVisibility(false);},_onExtentChange:function(_4e3,_4e4,_4e5){if(_4e5){this._setVisibility(true);this.show(this._targetLocation||this._location);}this._targetLocation=null;},_toggleSize:function(){if(this._maximized){this.restore();}else{this.maximize();}},_setPosition:function(_4e6){var posX=_4e6.x,posY=_4e6.y,offX=this.offsetX||0,offY=this.offsetY||0,_4e7=0,_4e8=0,_4e9=_4b1.position(this.map.container,true),_4ea=_4e9.w,_4eb=_4e9.h,_4ec="Left",_4ed="bottom",_4ee=_4b1.getContentBox(this._positioner),_4ef=_4ee.w/2,_4f0=_4ee.h/2,maxH=_4b2.get(this._sizers[0],"height")+this._maxHeight+_4b2.get(this._sizers[2],"height"),_4f1=maxH/2,xmin=0,ymin=0,xmax=_4ea,ymax=_4eb,_4f2=posX,_4f3=posY;var _4f4=win.getBox;if(_4f4){_4f4=_4f4();xmin=Math.max(_4f4.l,_4e9.x);xmax=Math.min(_4f4.l+_4f4.w,_4e9.x+_4e9.w);ymin=Math.max(_4f4.t,_4e9.y);ymax=Math.min(_4f4.t+_4f4.h,_4e9.y+_4e9.h);_4f2+=_4e9.x;_4f3+=_4e9.y;}var _4f5=((_4f3-ymin)>_4f1),_4f6=((ymax-_4f3)>=_4f1),_4f7=((xmax-_4f2)>=_4ef),_4f8=((_4f2-xmin)>_4ef),_4f9=((_4f3-ymin)>=maxH),_4fa=((ymax-_4f3)>=maxH),_4fb=((xmax-_4f2)>=_4ee.w),_4fc=((_4f2-xmin)>=_4ee.w);if(_4f5&&_4f6){if(_4fb){_4ed="";_4ec="Left";}else{if(_4fc){_4ed="";_4ec="Right";}}}if(_4ec&&_4ed){if(_4f8&&_4f7){if(_4f9){_4ec="";_4ed="bottom";}else{if(_4fa){_4ec="";_4ed="top";}}}}if(_4ec&&_4ed){if(_4fb&&_4f9){_4ec="Left";_4ed="bottom";}else{if(_4fb&&_4fa){_4ec="Left";_4ed="top";}else{if(_4fc&&_4fa){_4ec="Right";_4ed="top";}else{if(_4fc&&_4f9){_4ec="Right";_4ed="bottom";}}}}}var _4fd=_4ed+_4ec;switch(_4fd){case "top":case "bottom":_4e8=14;break;case "Left":case "Right":_4e7=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":_4e8=45;break;}_4b2.set(this.domNode,{left:posX+"px",top:posY+"px",right:null,bottom:null});var _4fe={left:null,right:null,top:null,bottom:null};if(_4ec){_4fe[_4ec.toLowerCase()]=(_4e7+offX)+"px";}else{_4fe.left=(-_4ef)+"px";}if(_4ed){_4fe[_4ed]=(_4e8+offY)+"px";}else{_4fe.top=(-_4f0)+"px";}_4b2.set(this._positioner,_4fe);this._showPointer(_4fd);},_showPointer:function(_4ff){_4af.remove(this._pointer,["top","bottom","right","left","topLeft","topRight","bottomRight","bottomLeft","hidden"]);_4af.remove(this._outerPointer,["right","left","hidden"]);if(_4ff==="Right"||_4ff==="Left"){_4ff=_4ff.toLowerCase();_4af.add(this._outerPointer,_4ff);}else{_4af.add(this._pointer,_4ff);}},_setPagerCallbacks:function(_500,_501,_502){if(!this.pagingControls){return;}if(_500===this&&(!this._pagerScope||this._pagerScope===this)){return;}if(_500===this._pagerScope){return;}this._pagerScope=_500;if(_500===this){_501=this.selectPrevious;_502=this.selectNext;}var _503=this._eventConnections;_4aa.disconnect(_503[1]);_4aa.disconnect(_503[2]);if(_501){_503[1]=_4aa.connect(this._prevFeatureButton,"onclick",_500,_501);}if(_502){_503[2]=_4aa.connect(this._nextFeatureButton,"onclick",_500,_502);}},_getLocation:function(_504){var map=this.map,_505,_506,_507=0,_508,_509=_504&&_504.geometry;if(_509){switch(_509.type){case "point":_505=_509;break;case "multipoint":_505=_509.getPoint(0);_506=_509.getExtent();break;case "polyline":_505=_509.getPoint(0,0);_506=_509.getExtent();if(map._getFrameWidth()!==-1){_4a9.forEach(_509.paths,function(path){var _50a={"paths":[path,map.spatialReference]},_50b=new _4b7(_50a),_50c=_50b.getExtent(),_50d=Math.abs(_50c.ymax-_50c.ymin),_50e=Math.abs(_50c.xmax-_50c.xmin),_50f=(_50e>_50d)?_50e:_50d;if(_50f>_507){_507=_50f;_508=_50c;}});_508.spatialReference=_506.spatialReference;_506=_508;}break;case "polygon":_505=_509.getPoint(0,0);_506=_509.getExtent();if(map._getFrameWidth()!==-1){_4a9.forEach(_509.rings,function(ring){var _510={"rings":[ring,map.spatialReference]},_511=new _4b8(_510),_512=_511.getExtent(),_513=Math.abs(_512.ymax-_512.ymin),_514=Math.abs(_512.xmax-_512.xmin),_515=(_514>_513)?_514:_513;if(_515>_507){_507=_515;_508=_512;}});_508.spatialReference=_506.spatialReference;_506=_508;}break;}}return [_505,_506];},_zoomToFeature:function(){var _516=this.features,ptr=this.selectedIndex,map=this.map;if(_516){var _517=this._getLocation(_516[ptr]),_518=_517[0],_519=_517[1];if(!_518){_518=this._location;}if(!_519||!_519.intersects(this._location)){this._location=_518;}if(_519){map.setExtent(_519,true);}else{var _51a=map.getNumLevels(),_51b=map.getLevel(),last=map.getMaxZoom(),_51c=this.zoomFactor||1;if(_51a>0){if(_51b===last){return;}var _51d=_51b+_51c;if(_51d>last){_51d=last;}map.navigationManager._wheelZoom({value:(_51d-_51b),mapPoint:_518},true);}else{map.navigationManager._wheelZoom({value:(1/Math.pow(2,_51c))*2,mapPoint:_518},true);}}}},_updatePagingControls:function(){var prev=this._prevFeatureButton,next=this._nextFeatureButton,ptr=this.selectedIndex,_51e=this.features?this.features.length:0;if(this.pagingControls&&_51e>1){if(ptr===0){_4af.add(prev,"hidden");}else{_4af.remove(prev,"hidden");}if(ptr===(_51e-1)){_4af.add(next,"hidden");}else{_4af.remove(next,"hidden");}}else{_4af.add(prev,"hidden");_4af.add(next,"hidden");}},_updatePagingInfo:function(){var _51f=this.features?this.features.length:0,nls=this._nls,_520="&nbsp;";if(this.pagingInfo&&_51f>1&&nls.NLS_pagingInfo){_520=_4b4.substitute({index:this.selectedIndex+1,total:_51f},nls.NLS_pagingInfo);}this.setTitle(_520);},_updateUI:function(){if(!this.popupWindow){return;}var _521="&nbsp;",ptr=this.selectedIndex,_522=this.features,_523=this.deferreds,_524=_522?_522.length:0,_525=this._spinner,_526=this._actionList,nls=this._nls;this._updatePagingControls();this._updatePagingInfo();if(_523&&_523.length){if(_522){_4af.remove(_525,"hidden");}else{this.setContent("<div style='text-align: center;'>"+nls.NLS_searching+"...</div>");}}else{_4af.add(_525,"hidden");if(!_524){this.setContent("<div style='text-align: center;'>"+nls.NLS_noInfo+".</div>");}}if(_524){_4af.remove(_526,"hidden");}else{_4af.add(_526,"hidden");}}});if(has("extend-esri")){lang.setObject("dijit.Popup",_4bc,_4b3);}return _4bc;});},"esri/symbols/Font":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/sniff","dojox/gfx/_base","esri/kernel","esri/lang"],function(_527,lang,has,_528,_529,_52a){var _52b={STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"};var Font=_527(null,{declaredClass:"esri.symbol.Font",constructor:function(json,_52c,_52d,_52e,_52f){if(json){if(lang.isObject(json)){lang.mixin(this,json);}else{this.size=json;if(_52c!==undefined){this.style=_52c;}if(_52d!==undefined){this.variant=_52d;}if(_52e!==undefined){this.weight=_52e;}if(_52f!==undefined){this.family=_52f;}}}else{lang.mixin(this,_528.defaultFont);}if(has("ie")<9&&this.size&&lang.isString(this.size)&&this.size.indexOf("em")>-1){this.size=_528.pt2px(parseFloat(this.size)*12)+"px";}},setSize:function(size){this.size=size;return this;},setStyle:function(_530){this.style=_530;return this;},setVariant:function(_531){this.variant=_531;return this;},setWeight:function(_532){this.weight=_532;return this;},setFamily:function(_533){this.family=_533;return this;},toJson:function(){return _52a.fixJson({size:this.size,style:this.style,variant:this.variant,decoration:this.decoration,weight:this.weight,family:this.family});}});lang.mixin(Font,_52b);if(has("extend-esri")){lang.setObject("symbol.Font",Font,_529);}return Font;});},"esri/PointerEvents":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/Evented","esri/geometry/Point","esri/geometry/ScreenPoint"],function(_534,lang,_535,has,_536,_537,_538,_539){var _53a=_534([_537],{declaredClass:"esri.PointerEvents",tapRadius:8,clickRadius:2,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:has("mac")!==-1?1:3,wheelDivisor:has("chrome")<2?360:120,preventPageScroll:true,constructor:function(node,_53b){this.registerConnectEvents({"basic-tap":["BasicTap"],"click":["Click"],"double-click":["DblClick"],"double-tap":["DoubleTap"],"mouse-down":["MouseDown"],"mouse-out":["MouseOut"],"mouse-over":["MouseOver"],"mouse-up":["MouseUp"],"mouse-wheel":["MouseWheel"],"pinch-end":["PinchEnd"],"pinch-move":["PinchMove"],"pinch-start":["PinchStart"],"processed-double-tap":["ProcessedDoubleTap"],"processed-tap":["ProcessedTap"],"swipe-end":["SwipeEnd"],"swipe-move":["SwipeMove"],"swipe-start":["SwipeStart"],"tap":["Tap"],"two-finger-tap":["TwoFingerTap"]},{normalized:true});this.node=node;lang.mixin(this,_53b);if(node.style.msTouchAction!==undefined){node.style.msTouchAction="none";}else{if(node.style.touchAction!==undefined){node.style.touchAction="none";}}var isMS=navigator.msPointerEnabled,_53c=function(e){e.preventDefault();};node.addEventListener("selectstart",_53c,false);node.addEventListener("dragstart",_53c,false);this._pointerDown=lang.hitch(this,this._pointerDown);this._pointerMove=lang.hitch(this,this._pointerMove);this._pointerUp=lang.hitch(this,this._pointerUp);this._pointerCancel=lang.hitch(this,this._pointerCancel);node.addEventListener(isMS?"MSPointerDown":"pointerdown",this._pointerDown,false);node.addEventListener(isMS?"MSPointerMove":"pointermove",this._pointerMove,false);node.addEventListener(isMS?"MSPointerUp":"pointerup",this._pointerUp,false);node.addEventListener(isMS?"MSPointerCancel":"pointercancel",this._pointerCancel,false);if(this.map){this._mouseOver=lang.hitch(this,this._mouseOver);this._mouseOut=lang.hitch(this,this._mouseOut);this._mouseDown=lang.hitch(this,this._mouseDown);this._mouseUp=lang.hitch(this,this._mouseUp);this._mouseClick=lang.hitch(this,this._mouseClick);this._mouseWheel=lang.hitch(this,this._mouseWheel);node.addEventListener("mouseover",this._mouseOver,false);node.addEventListener("mouseout",this._mouseOut,false);node.addEventListener("mousedown",this._mouseDown,false);node.addEventListener("mouseup",this._mouseUp,false);node.addEventListener("click",this._mouseClick,false);node.addEventListener("mousewheel",this._mouseWheel,false);}this._numTouches=0;this._touches={};this._touchIds=[];this._taps=[];this._immediate=false;},_pointerDown:function(_53d){var _53e=this._touches,node=this.node,_53f=_53d.target,pid=_53d.pointerId,ids=this._touchIds,info,_540,_541,ts=(new Date()).getTime();info=(_53e[pid]={});info.pointerId=pid;info.startX=info.pageX=_53d.pageX;info.startY=info.pageY=_53d.pageY;info.startTS=ts;ids.push(pid);this._numTouches++;if(_53f.setPointerCapture){_53f.setPointerCapture(pid);}else{if(_53f.msSetPointerCapture){_53f.msSetPointerCapture(pid);}}_540=_53e[ids[0]];_541=_53e[ids[1]];if(this._numTouches===1){}else{if(this._numTouches===2){if(this._swipeActive){if(_540){_540.startX=_540.pageX;_540.startY=_540.pageY;_540.moved=false;}this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(_53d,_540));}}else{if(this._swipeActive){this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(_53d,_540));}else{if(this._pinchActive){this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(_53d,[_540,_541]));}}}}},_pointerMove:function(_542){var _543=this._touches,ids=this._touchIds,info,dx,dy;info=_543[_542.pointerId];if(!info||(info.pageX===_542.pageX&&info.pageY===_542.pageY)){return;}info.pageX=_542.pageX;info.pageY=_542.pageY;dx=Math.abs(info.pageX-info.startX);dy=Math.abs(info.pageY-info.startY);if(!info.moved&&((dx>=this.tapRadius)||(dy>=this.tapRadius))){info.moved=info.absMoved=true;}if(this._numTouches===1){if(!this._swipeActive){if(info.moved){this._swipeActive=true;this._fire("onSwipeStart",this._processTouchEvent(_542,_542));}}else{this._fire("onSwipeMove",this._processTouchEvent(_542,_542));}}else{if(this._numTouches===2){var _544=_543[ids[0]],_545=_543[ids[1]];if(!this._pinchActive){if(_544.moved||_545.moved){var _546=Math.abs(_544.startX-_545.startX),_547=Math.abs(_544.startY-_545.startY),_548=Math.sqrt((_546*_546)+(_547*_547)),_549=Math.abs(_544.pageX-_545.pageX),_54a=Math.abs(_544.pageY-_545.pageY),_54b=Math.sqrt((_549*_549)+(_54a*_54a));if(Math.abs(_54b-_548)>=(2*this.tapRadius)){this._pinchActive=true;this._fire("onPinchStart",this._processTouchEvent(_542,[_544,_545]));}}}else{this._fire("onPinchMove",this._processTouchEvent(_542,[_544,_545]));}}}},_pointerUp:function(_54c){var _54d=this._touches,info,node=this.node,_54e=_54c.target,pid=_54c.pointerId,ids=this._touchIds,_54f=ids.slice(0),_550=_535.map(_54f,function(id){return _54d[id];}),ts=(new Date()).getTime();info=_54d[pid];if(!info){return;}info.pageX=_54c.pageX;info.pageY=_54c.pageY;info.endTS=ts;this._numTouches--;if(_54e.releasePointerCapture){_54e.releasePointerCapture(pid);}else{if(_54e.msReleasePointerCapture){_54e.msReleasePointerCapture(pid);}}if(this._numTouches===0){this._touches={};this._touchIds=[];if(this._swipeActive){this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(_54c,_54c));}else{if(this._pinchActive){this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(_54c,_54c));}else{if(!info.absMoved){var _551=Infinity,_552=-Infinity,_553=Infinity,_554=-Infinity,_555=this.tapStartTolerance,i;for(i=0;i<_54f.length;i++){info=_550[i];if(info.startTS<_551){_551=info.startTS;}if(info.startTS>_552){_552=info.startTS;}if(info.endTS<_553){_553=info.endTS;}if(info.endTS>_554){_554=info.endTS;}}if(Math.abs(_552-_551)<=_555&&Math.abs(_554-_553)<=_555){this._basicTap(_54c,_550);}}}}}else{if(this._numTouches===1){if(this._pinchActive){ids.splice(_535.indexOf(ids,_54c.pointerId),1);delete _54d[_54c.pointerId];var _556=_54d[ids[0]];_556.startX=_556.pageX;_556.startY=_556.pageY;_556.moved=false;if(document.msElementsFromPoint){var _557=document.msElementsFromPoint(_556.pageX,_556.pageY),_558=_535.some(_557,function(_559){return (_559===node);});if(!_558){this._touches={};this._touchIds=[];this._numTouches=0;}}this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(_54c,[_54c,_556]));}}}},_pointerCancel:function(_55a){if(this._numTouches){this._pointerUp(_55a);}},_basicTap:function(_55b,_55c){var ts=(new Date()).getTime(),self=this;_55b=this._processTouchEvent(_55b,_55c);this._taps.push({touchInfos:_55c,ts:ts,event:_55b});if(this._taps.length>2){this._taps.shift();}this._fire("onBasicTap",_55b);clearTimeout(this._tapTimer);if(this._immediate){this._analyzeTap(true);}else{var _55d=(this._taps.length===2)?(this.doubleTapDuration/2):this.doubleTapDuration;this._tapTimer=setTimeout(function(){var that=self;self=null;clearTimeout(that._tapTimer);that._analyzeTap();},_55d);}},_analyzeTap:function(_55e){var taps=this._taps,_55f=taps[0],_560=taps[1],_561=_55f.touchInfos,_562=_560&&_560.touchInfos;if(!taps.length){return;}if(!_55e){this._taps=[];}if(_55f&&_560){if(_561.length===_562.length){if((_560.ts-_55f.ts)<=this.doubleTapDuration){var _563,dx,dy;if(_561.length===1){dx=Math.abs(_561[0].startX-_562[0].startX);dy=Math.abs(_561[0].startY-_562[0].startY);_563=(dx<=this.doubleTapRadius)&&(dy<=this.doubleTapRadius);}else{_563=true;}if(_563){this._processedDoubleTap(taps);}else{this._processedTap(_560);}}else{this._processedTap(_560);}}else{this._processedTap(_560);}}else{this._processedTap(_55f||_560);}},_processedTap:function(tap){var _564=tap.event;this._fire("onProcessedTap",_564);if(tap.touchInfos.length===1){this._fire("onTap",this._fixEvent(_564));}else{if(tap.touchInfos.length===2){this._fire("onTwoFingerTap",_564);}}},_processedDoubleTap:function(taps){var _565=(taps[1].touchInfos.length===1),_566,evts;if(_565){_566=[this._fixEvent(taps[0].event),this._fixEvent(taps[1].event)];_566[1].relatedEvents=_566;}evts=[taps[0].event,taps[1].event];evts[1].relatedEvents=evts;this._fire("onProcessedDoubleTap",evts[1]);if(_565){this._fire("onDoubleTap",_566[1]);this._fire("onDblClick",_566[1]);}},_mouseOver:function(_567){this._fire("onMouseOver",this._processMouseEvent(_567));},_mouseOut:function(_568){this._fire("onMouseOut",this._processMouseEvent(_568));},_mouseDown:function(_569){this._downX=_569.pageX;this._downY=_569.pageY;this._fire("onMouseDown",this._processMouseEvent(_569));},_mouseUp:function(_56a){this._fire("onMouseUp",this._processMouseEvent(_56a));},_mouseClick:function(_56b){if((Math.abs(_56b.pageX-this._downX)<=this.clickRadius)&&(Math.abs(_56b.pageY-this._downY)<=this.clickRadius)){this._fire("onClick",this._processMouseEvent(_56b));}},_mouseWheel:function(_56c){var map=this.map,_56d=map?(map.isScrollWheelZoom||map.isScrollWheelPan):this.preventPageScroll;if(_56d){_56c.preventDefault();}var _56e=has("ie")||has("webkit")?_56c.wheelDelta/this.wheelDivisor:-_56c.detail/this.mozWheelDivisor,_56f=Math.abs(_56e);if(_56f<=this.minWheelValue){_56f=this.minWheelValue;}else{_56f=this.maxWheelValue;}_56c.value=_56e<0?-_56f:_56f;this._fire("onMouseWheel",this._processMouseEvent(_56c));},_fire:function(_570,evt){if(this[_570]){this[_570](evt);}if(this.map){if(this.map[_570]){this.map[_570](evt);}}},_fixEvent:function(_571){var _572={},i;for(i in _571){_572[i]=_571[i];}if(this.map){_572.screenPoint=_572.screenPoints[0];_572.mapPoint=_572.mapPoints[0];}return _572;},_processTouchEvent:function(evt,_573){var map=this.map,pos=map&&map.position,_574=0;if(pos&&_573){if(lang.isArray(_573)){var i,_575;evt.screenPoints=[];evt.mapPoints=[];for(i=0;i<_573.length;i++){if(_573[i]){_575=new _539(_573[i].pageX-pos.x,_573[i].pageY-pos.y);evt.screenPoints.push(_575);evt.mapPoints.push(map.extent?map.toMap(_575):new _538());}else{_574++;}}}else{evt.screenPoint=new _539(_573.pageX-pos.x,_573.pageY-pos.y);evt.mapPoint=map.extent?map.toMap(evt.screenPoint):new _538();}}evt.numPoints=_573?(lang.isArray(_573)?(_573.length-_574):1):0;return evt;},_processMouseEvent:function(evt){var map=this.map,pos=map&&map.position;if(pos){evt.screenPoint=new _539(evt.pageX-pos.x,evt.pageY-pos.y);evt.mapPoint=map.extent?map.toMap(evt.screenPoint):new _538();}return evt;},setImmediateTap:function(_576){this._immediate=_576;},destroy:function(){var node=this.node;node.removeEventListener("MSPointerDown",this._pointerDown,false);node.removeEventListener("MSPointerMove",this._pointerMove,false);node.removeEventListener("MSPointerUp",this._pointerUp,false);node.removeEventListener("MSPointerCancel",this._pointerCancel,false);if(this.map){node.removeEventListener("mouseover",this._mouseOver,false);node.removeEventListener("mouseout",this._mouseOut,false);node.removeEventListener("mousedown",this._mouseDown,false);node.removeEventListener("mouseup",this._mouseUp,false);node.removeEventListener("click",this._mouseClick,false);}clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._touches=this._touchIds=this._taps=null;}});if(has("extend-esri")){_536.PointerEvents=_53a;}return _53a;});},"esri/geometry":function(){define(["esri/units","esri/SpatialReference","esri/geometry/Geometry","esri/geometry/Point","esri/geometry/ScreenPoint","esri/geometry/Multipoint","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Extent","esri/geometry/Rect","esri/geometry/geodesicUtils","esri/geometry/jsonUtils","esri/geometry/mathUtils","esri/geometry/normalizeUtils","esri/geometry/scaleUtils","esri/geometry/screenUtils","esri/geometry/webMercatorUtils"],function(_577,_578,_579,_57a,_57b,_57c,_57d,_57e,_57f,Rect,_580,_581,_582,_583,_584,_585,_586){return {units:_577,SpatialReference:_578,Geometry:_579,Point:_57a,ScreenPoint:_57b,Multipoint:_57c,Polyline:_57d,Polygon:_57e,Extent:_57f,Rect:Rect,geodesicUtils:_580,jsonUtils:_581,mathUtils:_582,normalizeUtils:_583,scaleUtils:_584,screenUtils:_585,webMercatorUtils:_586};});},"esri/renderers/TimeRampAger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","esri/kernel","esri/symbols/jsonUtils","esri/renderers/SymbolAger"],function(_587,lang,_588,has,_589,_58a,_58b){var _58c=_587(_58b,{declaredClass:"esri.renderer.TimeRampAger",constructor:function(_58d,_58e,_58f){this.colorRange=_58d;this.sizeRange=_58e;this.alphaRange=_58f;},getAgedSymbol:function(_590,_591){var _592=_591.getLayer(),_593=_591.attributes;_590=_58a.fromJson(_590.toJson());var _594=_592._map.timeExtent;var _595=_594.startTime,_596=_594.endTime;if(!_595||!_596){return _590;}_595=_595.getTime();_596=_596.getTime();var _597=new Date(_593[_592._startTimeField]);_597=_597.getTime();if(_597<_595){_597=_595;}var _598=(_596===_595)?1:(_597-_595)/(_596-_595);var _599=this.sizeRange,_59a,_59b;if(_599){var from=_599[0],to=_599[1];_59b=Math.abs(to-from)*_598;this._setSymbolSize(_590,(from<to)?(from+_59b):(from-_59b));}_599=this.colorRange;if(_599){var _59c=_599[0],_59d=_599[1],_59e=Math.round;_59a=new _588();var _59f=_59c.r,toR=_59d.r;_59b=Math.abs(toR-_59f)*_598;_59a.r=_59e((_59f<toR)?(_59f+_59b):(_59f-_59b));var _5a0=_59c.g,toG=_59d.g;_59b=Math.abs(toG-_5a0)*_598;_59a.g=_59e((_5a0<toG)?(_5a0+_59b):(_5a0-_59b));var _5a1=_59c.b,toB=_59d.b;_59b=Math.abs(toB-_5a1)*_598;_59a.b=_59e((_5a1<toB)?(_5a1+_59b):(_5a1-_59b));var _5a2=_59c.a,toA=_59d.a;_59b=Math.abs(toA-_5a2)*_598;_59a.a=(_5a2<toA)?(_5a2+_59b):(_5a2-_59b);_590.setColor(_59a);}_59a=_590.color;_599=this.alphaRange;if(_599&&_59a){var _5a3=_599[0],_5a4=_599[1];_59b=Math.abs(_5a4-_5a3)*_598;_59a.a=(_5a3<_5a4)?(_5a3+_59b):(_5a3-_59b);}return _590;}});if(has("extend-esri")){lang.setObject("renderer.TimeRampAger",_58c,_589);}return _58c;});},"esri/layers/MapImage":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/domUtils","esri/geometry/Extent"],function(_5a5,lang,has,_5a6,_5a7,_5a8){var _5a9=_5a5(null,{declaredClass:"esri.layers.MapImage",constructor:function(json){lang.mixin(this,json);this.extent=new _5a8(this.extent);},visible:true,getLayer:function(){return this._layer;},getNode:function(){return this._node;},show:function(){if(!this.visible){this.visible=true;var node=this._node,_5aa=this._layer,div;if(node){div=_5aa&&_5aa._div;if(div){if(!_5aa.suspended){_5aa._setPos(node,div._left,div._top);}(_5aa._active||div).appendChild(node);}_5a7.show(node);}}},hide:function(){if(this.visible){this.visible=false;var node=this._node;if(node){_5a7.hide(node);if(node.parentNode){node.parentNode.removeChild(node);}}}}});if(has("extend-esri")){lang.setObject("layers.MapImage",_5a9,_5a6);}return _5a9;});},"esri/layers/OpenStreetMapLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/urlUtils","esri/SpatialReference","esri/geometry/Extent","esri/layers/TiledMapServiceLayer","esri/layers/TileInfo"],function(_5ab,lang,has,_5ac,_5ad,_5ae,_5af,_5b0,_5b1){var OSM=_5ab(_5b0,{declaredClass:"esri.layers.OpenStreetMapLayer",constructor:function(_5b2){this.spatialReference=new _5ae({wkid:102100});this.tileInfo=new _5b1({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-20037508.342787,y:20037508.342787},spatialReference:{wkid:102100},lods:[{level:0,scale:591657527.591555,resolution:156543.033928},{level:1,scale:295828763.795777,resolution:78271.5169639999},{level:2,scale:147914381.897889,resolution:39135.7584820001},{level:3,scale:73957190.948944,resolution:19567.8792409999},{level:4,scale:36978595.474472,resolution:9783.93962049996},{level:5,scale:18489297.737236,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:0.597164283559817}]});this.fullExtent=new _5af({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.initialExtent=new _5af({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.tileServers=(_5b2&&_5b2.tileServers)||["http://a.tile.openstreetmap.org","http://b.tile.openstreetmap.org","http://c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=_5b2?_5b2.displayLevels:null;this.copyright=(_5b2&&_5b2.copyright)||"Map data &copy; OpenStreetMap contributors, CC-BY-SA";this.loaded=true;this.onLoad(this);var _5b3=_5b2&&_5b2.loadCallback;if(_5b3){_5b3(this);}},getTileUrl:function(_5b4,row,col){return _5ad.addProxy(this.tileServers[row%this.serversLength]+"/"+_5b4+"/"+col+"/"+row+".png");}});if(has("extend-esri")){lang.setObject("layers.OpenStreetMapLayer",OSM,_5ac);}return OSM;});},"esri/renderers/SimpleRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/symbols/jsonUtils","esri/renderers/Renderer"],function(_5b5,lang,has,_5b6,_5b7,_5b8,_5b9){var _5ba=_5b5(_5b9,{declaredClass:"esri.renderer.SimpleRenderer",constructor:function(sym){if(sym&&!sym.declaredClass){var json=sym;sym=json.symbol;if(sym){this.symbol=_5b8.fromJson(sym);}this.label=json.label;this.description=json.description;}else{this.symbol=sym;}},getSymbol:function(_5bb){return this.symbol;},toJson:function(){return _5b7.fixJson({type:"simple",label:this.label,description:this.description,symbol:this.symbol&&this.symbol.toJson()});}});if(has("extend-esri")){lang.setObject("renderer.SimpleRenderer",_5ba,_5b6);}return _5ba;});},"esri/urlUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/url","dojo/io-query","esri/kernel","esri/config","esri/sniff"],function(lang,_5bc,Url,ioq,_5bd,_5be,has){var _5bf={},_5c0=_5be.defaults.io;_5bf.urlToObject=function(url){var iq=url.indexOf("?");if(iq===-1){return {path:url,query:null};}else{return {path:url.substring(0,iq),query:ioq.queryToObject(url.substring(iq+1))};}};_5bf.getProxyUrl=function(_5c1){var _5c2=lang.isString(_5c1)?(lang.trim(_5c1).toLowerCase().indexOf("https:")===0):_5c1,_5c3=_5c0.proxyUrl,_5c4,_5c5,_5c6,_5c7,_5c8="esri.config.defaults.io.proxyUrl is not set.";if(lang.isString(_5c1)){_5c7=_5bf.getProxyRule(_5c1);if(_5c7){_5c3=_5c7.proxyUrl;}}if(!_5c3){console.log(_5c8);throw new Error(_5c8);}if(_5c2&&window.location.href.toLowerCase().indexOf("https:")!==0){_5c5=_5c3;if(_5c5.toLowerCase().indexOf("http")!==0){_5c5=_5bf.getAbsoluteUrl(_5c5);}_5c5=_5c5.replace(/^http:/i,"https:");if(_5bf.canUseXhr(_5c5)){_5c3=_5c5;_5c6=1;}}_5c4=_5bf.urlToObject(_5c3);_5c4._xo=_5c6;return _5c4;};_5bf.addProxy=function(url){var _5c9=_5bf.getProxyRule(url),_5ca,_5cb,_5cc;if(_5c9){_5ca=_5bf.urlToObject(_5c9.proxyUrl);}else{if(_5c0.alwaysUseProxy){_5ca=_5bf.getProxyUrl();}}if(_5ca){_5cb=_5bf.urlToObject(url);url=_5ca.path+"?"+_5cb.path;_5cc=ioq.objectToQuery(lang.mixin(_5ca.query||{},_5cb.query));if(_5cc){url+=("?"+_5cc);}}return url;};_5bf.addProxyRule=function(rule){var _5cd=rule.urlPrefix=(_5bf.urlToObject(rule.urlPrefix).path).replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),_5ce=_5c0.proxyRules,i,len=_5ce.length,_5cf,_5d0=len;for(i=0;i<len;i++){_5cf=_5ce[i].urlPrefix;if(_5cd.indexOf(_5cf)===0){if(_5cd.length===_5cf){return -1;}else{_5d0=i;break;}}else{if(_5cf.indexOf(_5cd)===0){_5d0=i+1;}}}_5ce.splice(_5d0,0,rule);return _5d0;};_5bf.getProxyRule=function(url){var _5d1=_5c0.proxyRules,i,len=_5d1.length,path=(_5bf.urlToObject(url).path).replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),_5d2;for(i=0;i<len;i++){if(path.indexOf(_5d1[i].urlPrefix)===0){_5d2=_5d1[i];break;}}return _5d2;};_5bf.hasSameOrigin=function(url1,url2,_5d3){url1=url1.toLowerCase();url2=url2.toLowerCase();var _5d4=window.location.href.toLowerCase();url1=url1.indexOf("http")===0?new Url(url1):(_5d4=new Url(_5d4));url2=url2.indexOf("http")===0?new Url(url2):(lang.isString(_5d4)?new Url(_5d4):_5d4);return ((_5d3||(url1.scheme===url2.scheme))&&url1.host===url2.host&&url1.port===url2.port);};_5bf.canUseXhr=function(url,_5d5){var _5d6=false,_5d7=_5bf.hasSameOrigin,_5d8=_5c0.corsEnabledServers,_5d9,_5da=-1;if(has("esri-cors")&&_5d8&&_5d8.length){_5d6=_5bc.some(_5d8,function(_5db,idx){_5d9=(lang.trim(_5db).toLowerCase().indexOf("http")!==0);if(_5d7(url,_5d9?("http://"+_5db):_5db)||(_5d9&&_5d7(url,"https://"+_5db))){_5da=idx;return true;}return false;});}return _5d5?_5da:_5d6;};_5bf.getAbsoluteUrl=function(url){if(lang.isString(url)&&url.indexOf("http://")===-1&&url.indexOf("https://")===-1){if(url.indexOf("//")===0){return window.location.protocol+url;}else{if(url.indexOf("/")===0){return window.location.protocol+"//"+window.location.host+url;}else{return _5bd._appBaseUrl+url;}}}return url;};if(has("extend-esri")){lang.mixin(_5bd,_5bf);_5bd._getProxyUrl=_5bf.getProxyUrl;_5bd._getProxiedUrl=_5bf.addProxy;_5bd._hasSameOrigin=_5bf.hasSameOrigin;_5bd._canDoXOXHR=_5bf.canUseXhr;_5bd._getAbsoluteUrl=_5bf.getAbsoluteUrl;}return _5bf;});},"esri/geometry/Extent":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/SpatialReference","esri/geometry/Geometry","esri/geometry/Point","esri/geometry/webMercatorUtils","esri/geometry/mathUtils"],function(_5dc,_5dd,lang,has,_5de,_5df,_5e0,_5e1,_5e2,_5e3,_5e4){var _5e5={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0};var _5e6=_5dc(_5e1,{declaredClass:"esri.geometry.Extent",constructor:function(xmin,ymin,xmax,ymax,_5e7){lang.mixin(this,_5e5);if(lang.isObject(xmin)){lang.mixin(this,xmin);if(this.spatialReference){this.spatialReference=new _5e0(this.spatialReference);}}else{this.update(xmin,ymin,xmax,ymax,_5e7);}this.verifySR();},getWidth:function(){return Math.abs(this.xmax-this.xmin);},getHeight:function(){return Math.abs(this.ymax-this.ymin);},getCenter:function(){return new _5e2((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference);},centerAt:function(_5e8){var _5e9=this.getCenter(),dx=_5e8.x-_5e9.x,dy=_5e8.y-_5e9.y;return new _5e6(this.xmin+dx,this.ymin+dy,this.xmax+dx,this.ymax+dy,this.spatialReference);},update:function(xmin,ymin,xmax,ymax,_5ea){this.xmin=xmin;this.ymin=ymin;this.xmax=xmax;this.ymax=ymax;this.spatialReference=_5ea;return this;},offset:function(ox,oy){return new _5e6(this.xmin+ox,this.ymin+oy,this.xmax+ox,this.ymax+oy,this.spatialReference);},expand:function(_5eb){var _5ec=(1-_5eb)/2,_5ed=this.getWidth()*_5ec,_5ee=this.getHeight()*_5ec;return new _5e6(this.xmin+_5ed,this.ymin+_5ee,this.xmax-_5ed,this.ymax-_5ee,this.spatialReference);},intersects:function(_5ef){var type=_5ef.type,_5f0=this.spatialReference,_5f1=_5ef.spatialReference;if(_5f0&&_5f1&&!_5f0.equals(_5f1)&&_5f0._canProject(_5f1)){_5ef=_5f0.isWebMercator()?_5e3.geographicToWebMercator(_5ef):_5e3.webMercatorToGeographic(_5ef,true);}switch(type){case "point":return this.contains(_5ef);case "multipoint":return this._intersectsMultipoint(_5ef);case "extent":return this._intersectsExtent(_5ef);case "polygon":return this._intersectsPolygon(_5ef);case "polyline":return this._intersectsPolyline(_5ef);}},_intersectsMultipoint:function(_5f2){var len=_5f2.points.length,i;for(i=0;i<len;i++){if(this.contains(_5f2.getPoint(i))){return true;}}return false;},_intersectsExtent:function(_5f3){var xmin,ymin,_5f4,_5f5,_5f6=false;if(this.xmin<=_5f3.xmin){xmin=_5f3.xmin;if(this.xmax<xmin){_5f6=true;}else{_5f4=Math.min(this.xmax,_5f3.xmax)-xmin;}}else{xmin=this.xmin;if(_5f3.xmax<xmin){_5f6=true;}else{_5f4=Math.min(this.xmax,_5f3.xmax)-xmin;}}if(this.ymin<=_5f3.ymin){ymin=_5f3.ymin;if(this.ymax<ymin){_5f6=true;}else{_5f5=Math.min(this.ymax,_5f3.ymax)-ymin;}}else{ymin=this.ymin;if(_5f3.ymax<ymin){_5f6=true;}else{_5f5=Math.min(this.ymax,_5f3.ymax)-ymin;}}if(_5f6){return null;}return new _5e6(xmin,ymin,xmin+_5f4,ymin+_5f5,this.spatialReference);},_intersectsPolygon:function(_5f7){var _5f8=[this.xmin,this.ymax],_5f9=[this.xmax,this.ymax],_5fa=[this.xmin,this.ymin],_5fb=[this.xmax,this.ymin],_5fc=[_5f8,_5f9,_5fa,_5fb],_5fd=[[_5fa,_5f8],[_5f8,_5f9],[_5f9,_5fb],[_5fb,_5fa]],i,j,_5fe=_5f7.rings,_5ff=_5fe.length,ring,len,_600=new _5e2(0,0,this.spatialReference);len=_5fc.length;for(i=0;i<len;i++){_600.update(_5fc[i][0],_5fc[i][1]);if(_5f7.contains(_600)){return true;}}_600.setSpatialReference(_5f7.spatialReference);var pi,pj;for(i=0;i<_5ff;i++){ring=_5fe[i];len=ring.length;if(!len){continue;}pi=ring[0];_600.update(pi[0],pi[1]);if(this.contains(_600)){return true;}for(j=1;j<len;j++){pj=ring[j];_600.update(pj[0],pj[1]);if(this.contains(_600)||this._intersectsLine([pi,pj],_5fd)){return true;}pi=pj;}}return false;},_intersectsPolyline:function(_601){var _602=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]];var i,j,_603=_601.paths,_604=_603.length,path,len;var pi,pj,_605=new _5e2(0,0,_601.spatialReference);for(i=0;i<_604;i++){path=_603[i];len=path.length;if(!len){continue;}pi=path[0];_605.update(pi[0],pi[1]);if(this.contains(_605)){return true;}for(j=1;j<len;j++){pj=path[j];_605.update(pj[0],pj[1]);if(this.contains(_605)||this._intersectsLine([pi,pj],_602)){return true;}pi=pj;}}return false;},_intersectsLine:function(line,_606){var _607=_5e4._getLineIntersection2,i,len=_606.length;for(i=0;i<len;i++){if(_607(line,_606[i])){return true;}}return false;},contains:function(_608){if(!_608){return false;}var type=_608.type;if(type==="point"){var _609=this.spatialReference,_60a=_608.spatialReference,_60b,x=_608.x,y=_608.y;if(_609&&_60a&&!_609.equals(_60a)&&_609._canProject(_60a)){_60b=_609.isWebMercator()?_5e2.lngLatToXY(x,y):_5e2.xyToLngLat(x,y,true);x=_60b[0];y=_60b[1];}return (x>=this.xmin&&x<=this.xmax&&y>=this.ymin&&y<=this.ymax);}else{if(type==="extent"){return this._containsExtent(_608);}}return false;},_containsExtent:function(_60c){var xmin=_60c.xmin,ymin=_60c.ymin,xmax=_60c.xmax,ymax=_60c.ymax,sr=_60c.spatialReference,pt1=new _5e2(xmin,ymin,sr),pt2=new _5e2(xmin,ymax,sr),pt3=new _5e2(xmax,ymax,sr),pt4=new _5e2(xmax,ymin,sr);if(this.contains(pt1)&&this.contains(pt2)&&this.contains(pt3)&&this.contains(pt4)){return true;}return false;},union:function(_60d){return new _5e6(Math.min(this.xmin,_60d.xmin),Math.min(this.ymin,_60d.ymin),Math.max(this.xmax,_60d.xmax),Math.max(this.ymax,_60d.ymax),this.spatialReference);},getExtent:function(){var sr=this.spatialReference;return new _5e6(this.xmin,this.ymin,this.xmax,this.ymax,sr&&new _5e0(sr.toJson()));},_shiftCM:function(info){if(!this._shifted){var _60e=new _5e6(this.toJson()),sr=_60e.spatialReference;info=info||sr._getInfo();if(info){var _60f=this._getCM(info);if(_60f){var _610=sr._isWebMercator()?_5e3.webMercatorToGeographic(_60f):_60f;_60e.xmin-=_60f.x;_60e.xmax-=_60f.x;if(!sr._isWebMercator()){_610.x=this._normalizeX(_610.x,info).x;}_60e.spatialReference.wkt=_5df.substitute({Central_Meridian:_610.x},sr.wkid===4326?info.altTemplate:info.wkTemplate);_60e.spatialReference.wkid=null;}}this._shifted=_60e;}return this._shifted;},_getCM:function(info){var _611,_612=info.valid[0],_613=info.valid[1],xmin=this.xmin,xmax=this.xmax;var _614=(xmin>=_612&&xmin<=_613),_615=(xmax>=_612&&xmax<=_613);if(!(_614&&_615)){_611=this.getCenter();}return _611;},_normalize:function(_616,_617,info){var _618=new _5e6(this.toJson()),sr=_618.spatialReference;if(sr){info=info||sr._getInfo();if(info){var _619=_5dd.map(this._getParts(info),function(part){return part.extent;});if(_619.length>2){if(_616){return this._shiftCM(info);}else{return _618.update(info.valid[0],_618.ymin,info.valid[1],_618.ymax,sr);}}else{if(_619.length===2){if(_616){return this._shiftCM(info);}else{return _617?_619:{"rings":_5dd.map(_619,function(_61a){return [[_61a.xmin,_61a.ymin],[_61a.xmin,_61a.ymax],[_61a.xmax,_61a.ymax],[_61a.xmax,_61a.ymin],[_61a.xmin,_61a.ymin]];}),"spatialReference":sr};}}else{return _619[0]||_618;}}}}return _618;},_getParts:function(info){if(!this._parts){var xmin=this.xmin,xmax=this.xmax,ymin=this.ymin,ymax=this.ymax,sr=this.spatialReference,_61b=this.getWidth(),_61c=xmin,_61d=xmax,_61e=0,_61f=0,nrml,_620=[],_621,_622,_623;info=info||sr._getInfo();_621=info.valid[0];_622=info.valid[1];nrml=this._normalizeX(xmin,info);xmin=nrml.x;_61e=nrml.frameId;nrml=this._normalizeX(xmax,info);xmax=nrml.x;_61f=nrml.frameId;_623=(xmin===xmax&&_61b>0);if(_61b>(2*_622)){var E1=new _5e6(_61c<_61d?xmin:xmax,ymin,_622,ymax,sr),E2=new _5e6(_621,ymin,_61c<_61d?xmax:xmin,ymax,sr),E3=new _5e6(0,ymin,_622,ymax,sr),E4=new _5e6(_621,ymin,0,ymax,sr),k,_624=[],_625=[];if(E1.contains(E3)){_624.push(_61e);}if(E1.contains(E4)){_625.push(_61e);}if(E2.contains(E3)){_624.push(_61f);}if(E2.contains(E4)){_625.push(_61f);}for(k=_61e+1;k<_61f;k++){_624.push(k);_625.push(k);}_620.push({extent:E1,frameIds:[_61e]},{extent:E2,frameIds:[_61f]},{extent:E3,frameIds:_624},{extent:E4,frameIds:_625});}else{if((xmin>xmax)||_623){_620.push({extent:new _5e6(xmin,ymin,_622,ymax,sr),frameIds:[_61e]},{extent:new _5e6(_621,ymin,xmax,ymax,sr),frameIds:[_61f]});}else{_620.push({extent:new _5e6(xmin,ymin,xmax,ymax,sr),frameIds:[_61e]});}}this._parts=_620;}return this._parts;},_normalizeX:function(x,info){var _626=0,_627=info.valid[0],_628=info.valid[1],_629=2*_628,_62a;if(x>_628){_62a=Math.ceil(Math.abs(x-_628)/_629);x-=(_62a*_629);_626=_62a;}else{if(x<_627){_62a=Math.ceil(Math.abs(x-_627)/_629);x+=(_62a*_629);_626=-_62a;}}return {x:x,frameId:_626};},toJson:function(){var json={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});_5e6.defaultProps=_5e5;if(has("extend-esri")){lang.setObject("geometry.Extent",_5e6,_5de);_5de.geometry.defaultExtent=_5e5;}return _5e6;});},"esri/fx":function(){define(["dojo/_base/connect","dojo/_base/fx","dojo/_base/lang","dojo/dom","dojo/dom-geometry","dojo/dom-style","dojo/fx","dojo/has","esri/kernel"],function(_62b,_62c,lang,dom,_62d,_62e,_62f,has,_630){var fx={animateRange:function(args){var _631=args.range;return new _62c.Animation(lang.mixin({curve:new _62c._Line(_631.start,_631.end)},args));},resize:function(args){var node=(args.node=dom.byId(args.node)),_632=args.start,end=args.end;if(!_632){var mb=_62d.getMarginBox(node),pb=_62d.getPadBorderExtents(node);_632=(args.start={left:mb.l+pb.l,top:mb.t+pb.t,width:mb.w-pb.w,height:mb.h-pb.h});}if(!end){var _633=args.anchor?args.anchor:{x:_632.left,y:_632.top},size=args.size;end=args.end={left:(_632.left-((size.width-_632.width)*(_633.x-_632.left)/_632.width)),top:(_632.top-((size.height-_632.height)*(_633.y-_632.top)/_632.height)),width:size.width,height:size.height};}return _62c.animateProperty(lang.mixin({properties:{left:{start:_632.left,end:end.left},top:{start:_632.top,end:end.top},width:{start:_632.width,end:end.width},height:{start:_632.height,end:end.height}}},args));},slideTo:function(args){var node=(args.node=dom.byId(args.node)),_634=_62e.getComputedStyle,top=null,left=null,init=(function(){var _635=node;return function(){var pos=_635.style.position=="absolute"?"absolute":"relative";top=(pos=="absolute"?node.offsetTop:parseInt(_634(node).top)||0);left=(pos=="absolute"?node.offsetLeft:parseInt(_634(node).left)||0);if(pos!="absolute"&&pos!="relative"){var ret=_62d.position(_635,true);top=ret.y;left=ret.x;_635.style.position="absolute";_635.style.top=top+"px";_635.style.left=left+"px";}};}());init();var anim=_62c.animateProperty(lang.mixin({properties:{top:{start:top,end:args.top||0},left:{start:left,end:args.left||0}}},args));_62b.connect(anim,"beforeBegin",anim,init);return anim;},flash:function(args){args=lang.mixin({end:"#f00",duration:500,count:1},args);args.duration/=args.count*2;var node=dom.byId(args.node),_636=args.start;if(!_636){_636=_62e.getComputedStyle(node).backgroundColor;}var end=args.end,_637=args.duration,_638=[],i,il=args.count,base={node:node,duration:_637};for(i=0;i<il;i++){_638.push(_62c.animateProperty(lang.mixin({properties:{backgroundColor:{start:_636,end:end}}},base)));_638.push(_62c.animateProperty(lang.mixin({properties:{backgroundColor:{start:end,end:_636}}},base)));}return _62f.chain(_638);}};if(has("extend-esri")){lang.mixin(lang.getObject("fx",true,_630),fx);}return fx;});},"esri/layers/JoinDataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/DataSource"],function(_639,lang,has,_63a,_63b,_63c){var _63d=_639(_63c,{declaredClass:"esri.layers.JoinDataSource",toJson:function(){var json={type:"joinTable",leftTableSource:this.leftTableSource&&this.leftTableSource.toJson(),rightTableSource:this.rightTableSource&&this.rightTableSource.toJson(),leftTableKey:this.leftTableKey,rightTableKey:this.rightTableKey};var _63e;if(this.joinType.toLowerCase()==="left-outer-join"){_63e="esriLeftOuterJoin";}else{if(this.joinType.toLowerCase()==="left-inner-join"){_63e="esriLeftInnerJoin";}else{_63e=this.joinType;}}json.joinType=_63e;return _63b.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.JoinDataSource",_63d,_63a);}return _63d;});},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(_63f,lang,has,_640,_641){var _642=_63f(null,{declaredClass:"esri.layers.Domain",constructor:function(json){if(json&&lang.isObject(json)){this.name=json.name;this.type=json.type;}},toJson:function(){return _641.fixJson({name:this.name,type:this.type});}});if(has("extend-esri")){lang.setObject("layers.Domain",_642,_640);}return _642;});},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(_643,lang,has,_644,_645){var _646=_643(null,{declaredClass:"esri.InfoTemplate",constructor:function(_647,_648){if(_647&&lang.isObject(_647)&&!lang.isFunction(_647)){lang.mixin(this,_647);}else{this.title=_647||"${*}";this.content=_648||"${*}";}},setTitle:function(_649){this.title=_649;return this;},setContent:function(_64a){this.content=_64a;return this;},toJson:function(){return _645.fixJson({title:this.title,content:this.content});}});if(has("extend-esri")){_644.InfoTemplate=_646;}return _646;});},"esri/symbols/TextSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","dojox/gfx/_base","esri/kernel","esri/lang","esri/symbols/Symbol","esri/symbols/Font"],function(_64b,lang,_64c,has,_64d,_64e,_64f,_650,Font){var _651={ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"};var _652={color:[0,0,0,1],font:_64d.defaultFont,angle:0,xoffset:0,yoffset:0};lang.mixin(_652,_64d.defaultText,{type:"textsymbol",align:"middle"});var _653=_64b(_650,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(json,font,_654){lang.mixin(this,_652);this.font=new Font(this.font);this.color=new _64c(this.color);if(json){if(lang.isObject(json)){lang.mixin(this,json);if(this.color&&_64f.isDefined(this.color[0])){this.color=_650.toDojoColor(this.color);}this.type="textsymbol";this.font=new Font(this.font);this.xoffset=_64d.pt2px(this.xoffset);this.yoffset=_64d.pt2px(this.yoffset);}else{this.text=json;if(font){this.font=font;}if(_654){this.color=_654;}}}},setFont:function(font){this.font=font;return this;},setAngle:function(_655){this.angle=_655;return this;},setOffset:function(x,y){this.xoffset=x;this.yoffset=y;return this;},setAlign:function(_656){this.align=_656;return this;},setDecoration:function(_657){this.decoration=_657;return this;},setRotated:function(_658){this.rotated=_658;return this;},setKerning:function(_659){this.kerning=_659;return this;},setText:function(text){this.text=text;return this;},getStroke:function(){return null;},getFill:function(){return this.color;},toJson:function(){var xoff=_64d.px2pt(this.xoffset);xoff=isNaN(xoff)?undefined:xoff;var yoff=_64d.px2pt(this.yoffset);yoff=isNaN(yoff)?undefined:yoff;return _64f.fixJson(lang.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle,xoffset:xoff,yoffset:yoff,text:this.text,align:this.align,decoration:this.decoration,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}));}});lang.mixin(_653,_651);_653.defaultProps=_652;if(has("extend-esri")){lang.setObject("symbol.TextSymbol",_653,_64e);_64e.symbol.defaultTextSymbol=_652;}return _653;});},"esri/geometry/Rect":function(){define("esri/geometry/Rect",["dojo/_base/declare","dojo/_base/lang","dojo/has","dojox/gfx/_base","esri/kernel","esri/SpatialReference","esri/geometry/Geometry","esri/geometry/Point","esri/geometry/Extent"],function(_65a,lang,has,_65b,_65c,_65d,_65e,_65f,_660){function _661(rect){return new _660(parseFloat(rect.x),parseFloat(rect.y)-parseFloat(rect.height),parseFloat(rect.x)+parseFloat(rect.width),parseFloat(rect.y),rect.spatialReference);};var Rect=_65a(_65e,{declaredClass:"esri.geometry.Rect",constructor:function(json,y,_662,_663,_664){lang.mixin(this,_65b.defaultRect);if(lang.isObject(json)&&json.type==="extent"){y=json.ymax;_662=json.getWidth();_663=json.getHeight();_664=json.spatialReference;json=json.xmin;}if(lang.isObject(json)){lang.mixin(this,json);if(this.spatialReference){this.spatialReference=new _65d(this.spatialReference);}}else{this.x=json;this.y=y;this.width=_662;this.height=_663;this.spatialReference=_664;}this.verifySR();},getCenter:function(){return new _65f(this.x+this.width/2,this.y+this.height/2,this.spatialReference);},offset:function(ox,oy){return new Rect(this.x+ox,this.y+oy,this.width,this.height,this.spatialReference);},intersects:function(rect){if((rect.x+rect.width)<=this.x){return false;}if((rect.y+rect.height)<=this.y){return false;}if(rect.y>=(this.y+this.height)){return false;}if(rect.x>=(this.x+this.width)){return false;}return true;},getExtent:function(){return _661(this);},update:function(x,y,_665,_666,_667){this.x=x;this.y=y;this.width=_665;this.height=_666;this.spatialReference=_667;return this;}});if(has("extend-esri")){lang.setObject("geometry.Rect",Rect,_65c);_65c.geometry._rectToExtent=_661;_65c.geometry._extentToRect=function(_668){return new Rect(_668);};}return Rect;});},"esri/renderers/jsonUtils":function(){define(["dojo/_base/lang","dojo/has","esri/kernel","esri/renderers/SimpleRenderer","esri/renderers/UniqueValueRenderer","esri/renderers/ClassBreaksRenderer"],function(lang,has,_669,_66a,_66b,_66c){var _66d={fromJson:function(json){var type=json.type||"",_66e;switch(type){case "simple":_66e=new _66a(json);break;case "uniqueValue":_66e=new _66b(json);break;case "classBreaks":_66e=new _66c(json);break;}return _66e;}};if(has("extend-esri")){lang.mixin(lang.getObject("renderer",true,_669),_66d);}return _66d;});},"esri/layers/GraphicsLayer":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/dom-attr","dojo/dom-construct","dojo/dom-style","dojox/gfx","dojox/gfx/matrix","esri/kernel","esri/lang","esri/sniff","esri/domUtils","esri/layers/layer","esri/symbols/SimpleMarkerSymbol","esri/geometry/Point","esri/geometry/ScreenPoint","esri/geometry/Extent","esri/geometry/mathUtils","esri/geometry/screenUtils"],function(_66f,_670,lang,_671,_672,_673,_674,_675,_676,_677,_678,has,_679,_67a,SMS,_67b,_67c,_67d,_67e,_67f){var _680;var _681=_66f(null,{declaredClass:"esri.layers._GraphicsContainer",_setMap:function(map,_682){var es,_683=(this._connects=[]);this._map=map;if(_675.renderer.toLowerCase().indexOf("canvas")!==-1){es=_673.create("div",{style:"overflow: visible; position: absolute;"},_682);this._surface={getEventSource:function(){return es;}};_683.push(_670.connect(es,"onmousedown",this,this._canvasDownHandler));_683.push(_670.connect(es,"onmouseup",this,this._canvasUpHandler));_683.push(_670.connect(es,"onclick",this,this._canvasClickHandler));_680.prototype._canvas=true;}else{var _684=(this._surface=_675.createSurface(_682,map.width,map.height));es=_684.getEventSource();_674.set((es=(has("ie")<9)?es.parentNode:es),{overflow:"visible",position:"absolute"});}_683.push(_670.connect(map,"onResize",this,"_onResizeHandler"));return es;},_onResizeHandler:function(_685,_686,_687){var es=this._surface.getEventSource(),map=this._map,_688;if(has("ie")<9){_674.set((es=es.parentNode),{width:_686+"px",height:_687+"px",clip:"rect(0px "+_686+"px "+_687+"px 0px)"});}_672.set(es,"width",_686);_672.set(es,"height",_687);if(!this._surface.declaredClass){_671.forEach(es.childNodes,function(_689){_672.set(_689,"width",_686);_672.set(_689,"height",_687);});}if(map.loaded){if(!map.graphics.suspended){map.graphics._resized=true;}_671.forEach(map.graphicsLayerIds,function(_68a){_688=map.getLayer(_68a);if(!_688.suspended){_688._resized=true;}});}},_cleanUp:function(){_671.forEach(this._connects,_670.disconnect,_670);this._map=this._surface=null;},_processEvent:function(evt){var map=this._map;evt.screenPoint=new _67c(evt.pageX-map.position.x,evt.pageY-map.position.y);evt.mapPoint=map.toMap(evt.screenPoint);},_canvasDownHandler:function(evt){this._processEvent(evt);this._downPt=evt.screenPoint.x+","+evt.screenPoint.y;},_canvasUpHandler:function(evt){this._processEvent(evt);this._upPt=evt.screenPoint.x+","+evt.screenPoint.y;},_tolerance:15,_canvasClickHandler:function(evt){if(!this._downPt||!this._upPt||this._downPt!==this._upPt){return;}this._processEvent(evt);var map=this._map,_68b=_671.map(map.graphicsLayerIds,function(id){return map.getLayer(id);});_68b.push(map.graphics);_68b.reverse();_68b=_671.filter(_68b,function(_68c){return _68c.loaded&&_68c._mouseEvents&&!_68c.suspended&&(!_678.isDefined(_68c.opacity)||_68c.opacity>0);});var _68d=evt.screenPoint,_68e=this._tolerance,xmin=_68d.x-_68e,ymin=_68d.y+_68e,xmax=_68d.x+_68e,ymax=_68d.y-_68e,_68f=new _67d(xmin,ymax,xmax,ymin),_690=map.toMap(new _67c(xmin,ymin)),_691=map.toMap(new _67c(xmax,ymax)),_692=new _67d(_690.x,_690.y,_691.x,_691.y,_690.spatialReference),_693,_694=has("esri-touch");delete _68f.spatialReference;_671.some(_68b,function(_695){var _696=_671.filter(_695.graphics,function(_697){var _698=_697.getDojoShape();if(!_697.visible||!_698){return false;}var bbox=_698.getTransformedBoundingBox();if(bbox){var _699=new _67d(bbox[0].x,bbox[0].y,bbox[2].x,bbox[2].y);delete _699.spatialReference;return _694?_699.intersects(_68f):_699.contains(_68d);}else{return _671.some(_698.children||[],function(_69a){bbox=_69a.getTransformedBoundingBox();var _69b=new _67d(bbox[0].x,bbox[0].y,bbox[2].x,bbox[2].y);delete _69b.spatialReference;return _694?_69b.intersects(_68f):_69b.contains(_68d);});}});_696.reverse();if(_696.length>0){var _69c;_671.some(_696,function(_69d){if(_69d.geometry&&_692.intersects(_69d.geometry)){_69c=_69d;return true;}return false;});if(_69c){_693=_69c;return true;}}return false;});if(_693){var _69e=_693.getLayer();if(_69e){evt.graphic=_693;_69e.onClick(evt);}}}});_680=_66f(_67a,{declaredClass:"esri.layers._GraphicsLayer",managedSuspension:true,constructor:function(_69f){if(_69f&&(lang.isString(_69f)||(lang.isObject(_69f)&&_69f.layerDefinition))){_69f=arguments[1];}this._params=lang.mixin({displayOnPan:true,drawMode:true},_69f||{});this.infoTemplate=_69f&&_69f.infoTemplate;this.graphics=[];this._draw=lang.hitch(this,this._draw);this._refresh=lang.hitch(this,this._refresh);},setDrawMode:function(_6a0){this._params.drawMode=_6a0;},renderer:null,_setMap:function(map,_6a1){this.inherited(arguments);this._map=map;this._wrap=map.wrapAround180;this._srInfo=map.spatialReference._getInfo();if(!this._canvas){this._div=_6a1.createGroup();}else{_6a1=_675.createSurface(_6a1.getEventSource(),map.width,map.height);_674.set(_6a1.rawNode,"position","absolute");this._div=_6a1.createGroup();this._renderProto=this._div.constructor.prototype._render;this._div._render=lang.hitch(this,this._canvasRender);}this._div.getEventSource().id=this.id+"_layer";var op=this.opacity;if(_678.isDefined(op)&&op<1){this.setOpacity(op,true);}return this._div;},_unsetMap:function(map,_6a2){_671.forEach(this.graphics,function(g){g._shape=null;});if(!this._canvas){this._div.clear();_6a2.remove(this._div);_673.destroy(this._div.getEventSource());}else{_6a2=this._div.getParent();_6a2._parent={};_673.destroy(_6a2.rawNode);_6a2.destroy();}this._map=this._div=null;clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments);},_onZoomStartHandler:function(){_679.hide(this._div.getEventSource());},_onExtentChangeHandler:function(_6a3,_6a4,_6a5,lod){clearTimeout(this._wakeTimer);this._wakeTimer=null;if(_6a5){var _6a6=this._map.__visibleRect,_6a7=this._div;this._refresh(true);_6a7.setTransform(_676.translate({x:_6a6.x,y:_6a6.y}));if(this._renderProto&&_6a7.surface.pendingRender){this._dirty=true;}else{if(!this.suspended){_679.show(_6a7.getEventSource());}}}else{if(this._resized){this._refresh(false);this._resized=false;}}if(this.graphics.length>0){this.onUpdate();}},_canvasRender:function(){var _6a8=this._div;if(this._dirty){delete this._dirty;if(!this.suspended){_679.show(_6a8.getEventSource());}}return this._renderProto.apply(_6a8,arguments);},_refresh:function(_6a9){var gs=this.graphics,il=gs.length,i,_6aa=this._draw;for(i=0;i<il;i++){_6aa(gs[i],_6a9);}},refresh:function(){this._refresh(true);},redraw:function(){this._refresh(true);},_onPanHandler:function(_6ab,_6ac){this._panDx=_6ac.x;this._panDy=_6ac.y;var _6ad=this._map.__visibleRect;this._div.setTransform(_676.translate({x:_6ad.x+_6ac.x,y:_6ad.y+_6ac.y}));},_onPanEndUpdateHandler:function(_6ae,_6af){if(!this._params._child&&(_6af.x!==this._panDx||_6af.y!==this._panDy)){var _6b0=this._map.__visibleRect;this._div.setTransform(_676.translate({x:_6b0.x,y:_6b0.y}));}this._refresh(false);if(this.graphics.length){this.onUpdate();}},_onPanStartHandler:function(){_679.hide(this._div.getEventSource());},_onPanEndHandler:function(){var _6b1=this._map.__visibleRect,_6b2=this._div;_6b2.setTransform(_676.translate({x:_6b1.x,y:_6b1.y}));this._refresh(false);if(this._renderProto&&_6b2.surface.pendingRender){this._dirty=true;}else{_679.show(_6b2.getEventSource());}if(this.graphics.length){this.onUpdate();}},onSuspend:function(){this.inherited(arguments);_679.hide(this._div.getEventSource());clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();},onResume:function(evt){this.inherited(arguments);this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(lang.hitch(this,function(){if(!this.suspended){this._onExtentChangeHandler(null,null,true);}}),0);},_enableDrawConnectors:function(){var map=this._map,dc=_670.connect;this._disableDrawConnectors();if(this._params.displayOnPan){if(!this._params._child){this._onPanHandler_connect=dc(map,"onPan",this,"_onPanHandler");}this._onPanEndHandler_connect=dc(map,"onPanEnd",this,"_onPanEndUpdateHandler");}else{this._onPanStartHandler_connect=dc(map,"onPanStart",this,"_onPanStartHandler");this._onPanEndHandler_connect=dc(map,"onPanEnd",this,"_onPanEndHandler");}this._onZoomStartHandler_connect=dc(map,"onZoomStart",this,"_onZoomStartHandler");this._onExtentChangeHandler_connect=dc(map,"onExtentChange",this,"_onExtentChangeHandler");},_disableDrawConnectors:function(){var dd=_670.disconnect;dd(this._onExtentChangeHandler_connect);dd(this._onZoomStartHandler_connect);dd(this._onPanHandler_connect);dd(this._onPanStartHandler_connect);dd(this._onPanEndHandler_connect);this._onExtentChangeHandler_connect=this._onZoomStartHandler_connect=this._onPanHandler_connect=this._onPanStartHandler_connect=this._onPanEndHandler_connect=null;},_updateExtent:function(_6b3){var geom=_6b3.geometry;if(!geom){_6b3._extent=null;return;}var _6b4=(_6b3._extent=geom.getExtent());if(!_6b4){var x,y;if(geom.declaredClass==="esri.geometry.Point"){x=geom.x;y=geom.y;}else{if(geom.declaredClass==="esri.geometry.Multipoint"){x=geom.points[0][0];y=geom.points[0][1];}else{_6b3._extent=null;return;}}_6b3._extent=new _67d(x,y,x,y,geom.spatialReference);}},_intersects:function(map,_6b5,_6b6){var _6b7=map.spatialReference,_6b8=_6b5.spatialReference,_6b9=(_6b7&&_6b8&&!_6b7.equals(_6b8)&&_6b7._canProject(_6b8)&&_6b8.wkid===4326);if(this._wrap&&!_6b6){var _6ba=[],_6bb=map._getFrameWidth(),info=this._srInfo,_6bc,_6bd=map._clip?map._getAvailExtent():map.extent,_6be,g,m,f,gl,ml,fl,_6bf,_6c0,_6c1=[],_6c2=_6b5._partwise;if(_6b9){_6bd=map.geographicExtent;info=_6b8._getInfo();}_6be=_6bd._getParts(info);if(_6c2&&_6c2.length){_6bc=[];for(g=0,gl=_6c2.length;g<gl;g++){_6bc=_6bc.concat(_6c2[g]._getParts(info));}}else{_6bc=_6b5._getParts(info);}for(g=0,gl=_6bc.length;g<gl;g++){_6bf=_6bc[g];for(m=0,ml=_6be.length;m<ml;m++){_6c0=_6be[m];if(_6c0.extent.intersects(_6bf.extent)){for(f=0,fl=_6bf.frameIds.length;f<fl;f++){_6ba.push((_6c0.frameIds[0]-_6bf.frameIds[f])*_6bb);}}}}for(g=0,gl=_6ba.length;g<gl;g++){f=_6ba[g];if(_671.indexOf(_6ba,f)===g){_6c1.push(f);}}return (_6c1.length)?_6c1:null;}else{return (_6b9?map.geographicExtent:map.extent).intersects(_6b5)?[0]:null;}},_draw:function(_6c3,_6c4){if(!this._params.drawMode||!this._map||this.suspended){return;}try{var _6c5=_6c3._extent,_6c6,_6c7;if(_6c3.visible&&_6c5&&(_6c6=this._intersects(this._map,_6c5,_6c3.geometry._originOnly))&&(_6c7=this._getSymbol(_6c3))){if(!_6c3.getDojoShape()||_6c4||_6c6){var type=_6c3.geometry.type;if(type==="point"){this._drawMarker(_6c3,_6c7,_6c6);this._symbolizeMarker(_6c3,_6c7);}else{if(type==="multipoint"){this._drawMarkers(_6c3,_6c7,_6c6);this._symbolizeMarkers(_6c3,_6c7);}else{this._drawShape(_6c3,_6c6);this._symbolizeShape(_6c3,_6c7);}}}}else{if(_6c3.getDojoShape()){this._removeShape(_6c3);}}}catch(err){this._errorHandler(err,_6c3);}},_removeShape:function(_6c8){var _6c9=_6c8.getDojoShape();_6c9.removeShape();_6c8._shape=null;},_drawShape:function(_6ca,_6cb){var _6cc=_6ca.geometry,type=_6cc.type,map=this._map,me=map.extent,mw=map.width,mh=map.height,_6cd=map.__visibleRect,_6ce=[],i,il,rect,pt,xy,wh,_6cf=(type==="extent");if(type==="rect"||_6cf){pt={x:0,y:0,spatialReference:_6cc.spatialReference};pt.x=_6cf?_6cc.xmin:_6cc.x;pt.y=_6cf?_6cc.ymax:_6cc.y;xy=_67f.toScreenPoint(me,mw,mh,pt);pt.x=_6cf?_6cc.xmax:(_6cc.x+_6cc.width);pt.y=_6cf?_6cc.ymin:(_6cc.y+_6cc.height);wh=_67f.toScreenPoint(me,mw,mh,pt);rect={x:xy.x-_6cd.x+_6cb[0],y:xy.y-_6cd.y,width:Math.abs(wh.x-xy.x),height:Math.abs(wh.y-xy.y)};if(rect.width===0){rect.width=1;}if(rect.height===0){rect.height=1;}_6ca._shape=this._drawRect(this._div,_6ca.getDojoShape(),rect);}else{if(type==="polyline"||type==="polygon"){for(i=0,il=_6cb.length;i<il;i++){_6ce=_6ce.concat(_67f._toScreenPath(me,mw,mh,_6cc,-_6cd.x+_6cb[i],-_6cd.y));}_6ca._shape=this._drawPath(this._div,_6ca.getDojoShape(),_6ce);if(this._rendererLimits){if(type==="polyline"){this._clipPolyline(_6ca._shape,_6cc);}else{this._clipPolygon(_6ca._shape,_6cc);}}}}},_drawRect:function(_6d0,_6d1,rect){return _6d1?_6d1.setShape(rect):_6d0.createRect(rect);},_drawImage:function(_6d2,_6d3,_6d4){return _6d3?_6d3.setShape(_6d4):_6d2.createImage(_6d4);},_drawCircle:function(_6d5,_6d6,_6d7){return _6d6?_6d6.setShape(_6d7):_6d5.createCircle(_6d7);},_drawPath:(function(){if(has("ie")<9){return function(_6d8,_6d9,path,_6da){path=_6da?path:path.join(" ");if(_6d9){return _6d9.setShape(path);}else{var p=_6d8.createObject(_6da?_675.Path:_675.EsriPath,path);_6d8._overrideSize(p.getEventSource());return p;}};}else{return function(_6db,_6dc,path,_6dd){path=_6dd?path:path.join(" ");return _6dc?_6dc.setShape(path):_6db.createPath(path);};}}()),_drawText:function(_6de,_6df,text){return _6df?_6df.setShape(text):_6de.createText(text);},_getSymbol:function(_6e0){return _6e0.symbol||(this.renderer?this.renderer.getSymbol(_6e0):null)||null;},_symbolizeShape:function(_6e1,_6e2){var _6e3=_6e2._stroke,fill=_6e2._fill;if(_6e3===null||fill===null){_6e3=_6e2.getStroke();fill=_6e2.getFill();}_6e1.getDojoShape().setStroke(_6e3).setFill(fill);_6e2._stroke=_6e3;_6e2._fill=fill;},_smsToPath:(function(){if(has("ie")<9){return function(SMS,_6e4,x,y,xMh,xPh,yMh,yPh,_6e5){switch(_6e4){case SMS.STYLE_SQUARE:return ["M",xMh+","+yMh,"L",xPh+","+yMh,xPh+","+yPh,xMh+","+yPh,"X","E"];case SMS.STYLE_CROSS:return ["M",x+","+yMh,"L",x+","+yPh,"M",xMh+","+y,"L",xPh+","+y,"E"];case SMS.STYLE_X:return ["M",xMh+","+yMh,"L",xPh+","+yPh,"M",xMh+","+yPh,"L",xPh+","+yMh,"E"];case SMS.STYLE_DIAMOND:return ["M",x+","+yMh,"L",xPh+","+y,x+","+yPh,xMh+","+y,"X","E"];case SMS.STYLE_TARGET:return ["M",xMh+","+yMh,"L",xPh+","+yMh,xPh+","+yPh,xMh+","+yPh,xMh+","+yMh,"M",(xMh-_6e5)+","+y,"L",xMh+","+y,"M",x+","+(yMh-_6e5),"L",x+","+yMh,"M",(xPh+_6e5)+","+y,"L",xPh+","+y,"M",x+","+(yPh+_6e5),"L",x+","+yPh,"E"];}};}else{return function(SMS,_6e6,x,y,xMh,xPh,yMh,yPh,_6e7){switch(_6e6){case SMS.STYLE_SQUARE:return ["M",xMh+","+yMh,xPh+","+yMh,xPh+","+yPh,xMh+","+yPh,"Z"];case SMS.STYLE_CROSS:return ["M",x+","+yMh,x+","+yPh,"M",xMh+","+y,xPh+","+y];case SMS.STYLE_X:return ["M",xMh+","+yMh,xPh+","+yPh,"M",xMh+","+yPh,xPh+","+yMh];case SMS.STYLE_DIAMOND:return ["M",x+","+yMh,xPh+","+y,x+","+yPh,xMh+","+y,"Z"];case SMS.STYLE_TARGET:return ["M",xMh+","+yMh,xPh+","+yMh,xPh+","+yPh,xMh+","+yPh,xMh+","+yMh,"M",(xMh-_6e7)+","+y,xMh+","+y,"M",x+","+(yMh-_6e7),x+","+yMh,"M",(xPh+_6e7)+","+y,xPh+","+y,"M",x+","+(yPh+_6e7),x+","+yPh];}};}}()),_pathStyles:{"square":1,"cross":1,"x":1,"diamond":1,"target":1},_typeMaps:{"picturemarkersymbol":"image","textsymbol":"text"},_isInvalidShape:function(_6e8,_6e9){var _6ea=_6e9&&_6e9.shape&&_6e9.shape.type,_6eb=_6e8&&_6e8.type,_6ec=_6e8&&_6e8.style;if(!_6ec){if(_6eb){_6ec=this._typeMaps[_6eb];}}else{if(this._pathStyles[_6ec]){_6ec="path";}}if(_6ea&&_6ec&&(_6ea!==_6ec)){return true;}},_drawPoint:function(_6ed,_6ee,_6ef,_6f0,_6f1){var type=_6ef.type,map=this._map,_6f2=map.__visibleRect,_6f3=_67f.toScreenPoint(map.extent,map.width,map.height,_6ee).offset(-_6f2.x+_6f1[0],-_6f2.y),px=_6f3.x,py=_6f3.y,_6f4,bbox,_6f5=0,_6f6=0;if(this._isInvalidShape(_6ef,_6f0)){_6f0.removeShape();_6f0=null;}if(type==="simplemarkersymbol"){var _6f7=_6ef.style,half=_6ef.size/2,_6f8=Math.round;switch(_6f7){case SMS.STYLE_SQUARE:case SMS.STYLE_CROSS:case SMS.STYLE_X:case SMS.STYLE_DIAMOND:_6f4=this._drawPath(_6ed,_6f0,this._smsToPath(SMS,_6f7,px,py,_6f8(px-half),_6f8(px+half),_6f8(py-half),_6f8(py+half)));break;case SMS.STYLE_TARGET:var _6f9=_6ef._targetWidth/2,_6fa=_6ef._targetHeight/2;_6f4=this._drawPath(_6ed,_6f0,this._smsToPath(SMS,_6f7,px,py,_6f8(px-_6f9),_6f8(px+_6f9),_6f8(py-_6fa),_6f8(py+_6fa),_6ef._spikeSize));break;case SMS.STYLE_PATH:_6f4=this._drawPath(_6ed,_6f0,_6ef.path,true);bbox=_6f4.getBoundingBox();_6f5=-(bbox.x+(bbox.width/2))+px;_6f6=-(bbox.y+(bbox.height/2))+py;break;default:_6f4=this._drawCircle(_6ed,_6f0,{cx:px,cy:py,r:half});}}else{if(type==="picturemarkersymbol"){var w=_6ef.width,h=_6ef.height;_6f4=this._drawImage(_6ed,_6f0,{x:px-(w/2),y:py-(h/2),width:w,height:h,src:_6ef.url});}else{if(type==="textsymbol"){_6f4=this._drawText(_6ed,_6f0,{type:"text",text:_6ef.text,x:px,y:py,align:_6ef.align,decoration:_6ef.decoration,rotated:_6ef.rotated,kerning:_6ef.kerning});}}}_6f4.setTransform(_676.multiply(_676.translate(_6f5+_6ef.xoffset,_6f6-_6ef.yoffset),_676.rotategAt(_6ef.angle,_6f3)));_6f4._wrapOffsets=_6f1;return _6f4;},_symbolizePoint:function(_6fb,_6fc){var type=_6fc.type;if(type==="picturemarkersymbol"){return;}var _6fd=_6fc._stroke,fill=_6fc._fill;if(type==="textsymbol"){_6fb.setFont(_6fc.font).setFill(_6fc.getFill());}else{if(_6fd===null||fill===null){_6fd=_6fc.getStroke();fill=_6fc.getFill();}if(type==="simplemarkersymbol"){_6fb.setFill(fill).setStroke(_6fd);}_6fc._stroke=_6fd;_6fc._fill=fill;}},_drawMarker:function(_6fe,_6ff,_700){_6fe._shape=this._drawPoint(this._div,_6fe.geometry,_6ff,_6fe.getDojoShape(),_700);},_symbolizeMarker:function(_701,_702){this._symbolizePoint(_701.getDojoShape(),_702);},_drawMarkers:function(_703,_704,_705){var _706=_703.geometry,_707=_706.points,_708=_703.getDojoShape()||this._div.createGroup(),_709,i,il=_707.length,temp=[],idx=0,j,jl=_705?_705.length:0;if(_708.children[0]&&this._isInvalidShape(_704,_708.children[0])){_708.clear();}for(i=0;i<il;i++){_709=_707[i];for(j=0;j<jl;j++){temp[0]=_705[j];this._drawPoint(_708,{x:_709[0],y:_709[1],spatialReference:_706.spatialReference},_704,_708.children[idx++],temp);}}var _70a=_708.children.length;if(il*_705.length<_70a){for(i=_70a-1;i>=il*_705.length;i--){_708.children[i].removeShape();}}_703._shape=_708;},_symbolizeMarkers:function(_70b,_70c){var _70d=_70b.getDojoShape(),_70e=_70d.children,i,il=_70e.length;for(i=0;i<il;i++){this._symbolizePoint(_70e[i],_70c);}},_errorHandler:function(err,_70f){var msg="Unable to draw graphic ";if(_70f){err.message=msg+"(geometry:"+(_70f.geometry?_70f.geometry.declaredClass:null)+", symbol:"+(_70f.symbol?_70f.symbol.declaredClass:null)+"): "+err.message;}else{err.message=msg+"(null): "+err.message;}this.inherited(arguments);},_rendererLimits:(function(){var _710,_711,_712;if(has("ff")){_710=16125;_711=-32250;_712=32250;}else{if(has("ie")<9){_710=100000;_711=-100000;_712=100000;}else{if(has("chrome")&&has("chrome")<6){_710=8150;_711=-10000;_712=10000;}}}if(_710){var _713,_714;_713=[-_710,-_710,_710,_710];_714=[[[-_710,-_710],[_710,-_710]],[[_710,-_710],[_710,_710]],[[_710,_710],[-_710,_710]],[[-_710,_710],[-_710,-_710]]];return {clipLimit:_710,rangeMin:_711,rangeMax:_712,clipBBox:_713,clipSegments:_714};}}()),_clipPolyline:function(_715,_716){var _717=this._getCorners(_715,_716);var _718=_717.tl,_719=_717.br;var _71a=this._rendererLimits;var _71b=_71a.rangeMin,_71c=_71a.rangeMax,_71d=_71a.clipBBox,_71e=_71a.clipSegments;var _71f=this._isPointWithinRange,_720=this._isPointWithinBBox,_721=this._getClipperIntersection,_722=this._getPlaneIndex;if(!_71f(_718,_71b,_71c)||!_71f(_719,_71b,_71c)){if(has("ie")<9){this._createSegments(_715);}var _723=[];_671.forEach(_715.segments,function(_724){var _725=_724.args,len=_725.length,_726=[],i;for(i=0;i<len;i+=2){var pt1=[_725[i],_725[i+1]];var pt2=[_725[i+2],_725[i+3]];var _727=_720(pt1,_71d);var _728=_720(pt2,_71d);if(_727^_728){var _729=_721([pt1,pt2],_71e);if(_729){if(!_727){_726.push(_729[1],pt2);}else{if(i){_726.push(_729[1]);}else{_726.push(pt1,_729[1]);}_723.push(_726);_726=[];}}}else{if(_727){if(i){_726.push(pt2);}else{_726.push(pt1,pt2);}}else{var _72a=_722(pt1,_71d);var _72b=_722(pt2,_71d);if(_72a===-1||_72b===-1||_72a===_72b){continue;}var _72c=_721([pt1,pt2],_71e,true);if(_72c.length>0){if(!_72c[_72a]){_72a=_72c[_72a[0]]?_72a[0]:_72a[1];}if(!_72c[_72b]){_72b=_72c[_72b[0]]?_72b[0]:_72b[1];}var _72d=_72c[_72a],_72e=_72c[_72b];if(_72d){_726.push(_72d);}if(_72e){_726.push(_72e);_723.push(_726);_726=[];}}}}}_723.push(_726);});_715.setShape(this._getPathStringFromPaths(_723));}},_clipPolygon:function(_72f,_730){var _731=this._getCorners(_72f,_730);var _732=_731.tl,_733=_731.br;var _734=this._rendererLimits;var _735=_734.clipLimit,_736=_734.rangeMin,_737=_734.rangeMax,_738=_734.clipBBox,_739=_734.clipSegments;var _73a=this._isPointWithinRange,_73b=this._isPointWithinBBox,_73c=this._getClipperIntersection,_73d=this._getPlaneIndex,_73e=_67e._pointLineDistance;if(!_73a(_732,_736,_737)||!_73a(_733,_736,_737)){if(has("ie")<9){this._createSegments(_72f);}var _73f=_671.map(_72f.segments,function(_740){var _741=_740.args,len=_741.length,_742=[],_743=[],i;for(i=0;i<len;i+=2){var pt1=[_741[i],_741[i+1]];var pt2=[_741[i+2],_741[i+3]];if(i===(len-2)){_742.push(pt1);break;}var _744=_73b(pt1,_738);var _745=_73b(pt2,_738);_742.push(pt1);if(_744^_745){var _746=_73c([pt1,pt2],_739);if(_746){var _747=_746[1];_747[_744?"inOut":"outIn"]=true;_742.push(_747);_743.push([_744?"INOUT":"OUTIN",_742.length-1,_746[0]]);}}else{if(!_744){var _748=_73d(pt1,_738);var _749=_73d(pt2,_738);if(_748===-1||_749===-1||_748===_749){continue;}var _746=_73c([pt1,pt2],_739,true);if(_746.length>0){if(!_746[_748]){_748=_746[_748[0]]?_748[0]:_748[1];}if(!_746[_749]){_749=_746[_749[0]]?_749[0]:_749[1];}var _74a=_746[_748],_74b=_746[_749];if(_74a){_74a.outIn=true;_742.push(_74a);_743.push(["OUTIN",_742.length-1,_748]);}if(_74b){_74b.inOut=true;_742.push(_74b);_743.push(["INOUT",_742.length-1,_749]);}}else{if(lang.isArray(_748)&&lang.isArray(_749)){var _74c=_748.concat(_749);_74c.sort();if(_74c.join("")==="0123"){var _74d=[];if((_748[0]+_748[1])===3){_74d.push([_735,-_735],[-_735,_735]);}else{_74d.push([-_735,-_735],[_735,_735]);}var d1=_73e(_74d[0],[pt1,pt2]);var d2=_73e(_74d[1],[pt1,pt2]);_742.push((d1<d2)?_74d[0]:_74d[1]);}}}}}}var xmin=_738[0],ymin=_738[1],xmax=_738[2],ymax=_738[3];_671.forEach(_742,function(_74e){if(_74e[0]<xmin){if(_74e[1]>=ymin&&_74e[1]<=ymax){_74e[0]=xmin;}else{_74e[0]=xmin;_74e[1]=_74e[1]<ymin?ymin:ymax;}}});_671.forEach(_742,function(_74f){if(_74f[1]<ymin){if(_74f[0]>=xmin&&_74f[0]<=xmax){_74f[1]=ymin;}else{_74f[1]=ymin;_74f[0]=_74f[0]<xmin?xmin:xmax;}}});_671.forEach(_742,function(_750){if(_750[0]>xmax){if(_750[1]>=ymin&&_750[1]<=ymax){_750[0]=xmax;}else{_750[0]=xmax;_750[1]=_750[1]<ymin?ymin:ymax;}}});_671.forEach(_742,function(_751){if(_751[1]>ymax){if(_751[0]>=xmin&&_751[0]<=xmax){_751[1]=ymax;}else{_751[1]=ymax;_751[0]=_751[0]<xmin?xmin:xmax;}}});var k=0,len=_743.length;if(len>0){do{var curr=_743[k];var next=_743[(k+1)%len];if(curr[2]===next[2]&&curr[0]==="INOUT"&&next[0]==="OUTIN"){var _752=curr[1],end=next[1],u;if(_752<end){for(u=_752+1;u<end;u++){_742[u][2]=true;}}else{if(_752>end){for(u=_752+1;u<_742.length;u++){_742[u][2]=true;}for(u=0;u<end;u++){_742[u][2]=true;}}}}k=(k+1)%len;}while(k!==0);}var _753=_742[0],last=_742[_742.length-1];if(_753[2]){last[2]=true;_671.some(_743,function(data){if(data[1]===1){_742.splice(_742.length-1,0,lang.clone(_742[1]));return true;}return false;});}_742=_671.filter(_742,function(_754){return _754[2]?false:true;});for(k=0;k<_742.length-1;k++){var now=_742[k];var next=_742[k+1];if(!next||(now[0]!==next[0])||(now[1]!==next[1])){continue;}if(next.outIn){now.outIn=true;}else{if(next.inOut){now.inOut=true;}}_742.splice(k+1,1);}var abs=Math.abs,_755=[];for(k=0;k<_742.length-1;k++){var curr=_742[k],cx=curr[0],cy=curr[1];var x1=(abs(cx)===_735);var y1=(abs(cy)===_735);var next=_742[k+1],nx=next[0],ny=next[1];var x2=(abs(nx)===_735);var y2=(abs(ny)===_735);if(x1&&y2){_755.push([k+1,[cx,ny]]);}else{if(y1&&x2){_755.push([k+1,[nx,cy]]);}}}for(k=_755.length-1;k>=0;k--){var data=_755[k];var prev=_742[data[0]-1];var now=_742[data[0]];if(prev.outIn||prev.inOut||now.outIn||now.inOut){continue;}_742.splice(data[0],0,data[1]);}var _753=_742[0],last=_742[_742.length-1];if(_753[0]!==last[0]||_753[1]!==last[1]){_742.push(_753);}return _742;});_72f.setShape(this._getPathStringFromPaths(_73f));}},_getCorners:function(_756,_757){if(has("ie")<9){var map=this._map,_758=_757.getExtent(),_759=_758.spatialReference,_75a=map.toScreen(new _67b(_758.xmin,_758.ymax,_759)),_75b=map.toScreen(new _67b(_758.xmax,_758.ymin,_759));return {tl:_75a,br:_75b};}else{var _75c=_756.getTransformedBoundingBox();return {tl:_75c[0],br:_75c[2]};}},_createSegments:function(_75d){_75d.shape.path=_75d.vmlPath;_75d.segmented=false;_75d._confirmSegmented();var _75e=_75d.segments;if(_75e.length>1){_75d.segments=_671.filter(_75e,function(_75f,idx,arr){var next=arr[idx+1];if(_75f.action==="M"&&next&&next.action==="L"){_75f.args=_75f.args.concat(next.args);return true;}return false;});}},_getPathStringFromPaths:function(_760){if(has("ie")<9){_760=_671.map(_760,function(path){var _761=_671.map(path,function(_762,idx){return (idx===1?"l ":"")+_762.join(",");});return "m "+_761.join(" ");});_760.push("e");}else{_760=_671.map(_760,function(path){var _763=_671.map(path,function(_764){return _764.join(",");});return "M "+_763.join(" ");});}return _760.join(" ");},_isPointWithinBBox:function(_765,bbox){var left=bbox[0],top=bbox[1];var _766=bbox[2],_767=bbox[3];var x=_765[0],y=_765[1];if(x>left&&x<_766&&y>top&&y<_767){return true;}else{return false;}},_isPointWithinRange:function(_768,_769,_76a){var x=_768.x,y=_768.y;if(x<_769||y<_769||x>_76a||y>_76a){return false;}else{return true;}},_getClipperIntersection:function(line,_76b,_76c){var i,_76d=_67e._getLineIntersection2,_76e=Math.round,data={length:0};for(i=0;i<4;i++){var _76f=_76d(line,_76b[i]);if(_76f){_76f[0]=_76e(_76f[0]);_76f[1]=_76e(_76f[1]);if(!_76c){return [i,_76f];}else{data[i]=_76f;data.length++;}}}return _76c?data:null;},_getPlaneIndex:function(_770,_771){var px=_770[0],py=_770[1],xmin=_771[0],ymin=_771[1],xmax=_771[2],ymax=_771[3];if(px<=xmin){if((py>=ymin)&&(py<=ymax)){return 3;}else{return (py<ymin)?[0,3]:[2,3];}}if(py<=ymin){if((px>=xmin)&&(px<=xmax)){return 0;}else{return (px<xmin)?[3,0]:[1,0];}}if(px>=xmax){if((py>=ymin)&&(py<=ymax)){return 1;}else{return (py<ymin)?[0,1]:[2,1];}}if(py>=ymax){if((px>=xmin)&&(px<=xmax)){return 2;}else{return (px<xmin)?[3,2]:[1,2];}}return -1;},onGraphicAdd:function(){},onGraphicRemove:function(){},onGraphicsClear:function(){},onOpacityChange:function(){},setInfoTemplate:function(_772){this.infoTemplate=_772;},add:function(_773){var _774=arguments[1];if(_773._graphicsLayer===this){return _773;}if(!_774){this.graphics.push(_773);}_773._graphicsLayer=this;this._updateExtent(_773);this._draw(_773);if(!_774){this.onGraphicAdd(_773);}return _773;},remove:function(_775){if(!arguments[1]){var _776=this.graphics,i;if((i=_671.indexOf(_776,_775))===-1){return null;}_775=this.graphics.splice(i,1)[0];}if(_775.getDojoShape()){this._removeShape(_775);}_775._shape=_775._graphicsLayer=null;this.onGraphicRemove(_775);return _775;},clear:function(){var _777=arguments[1],g=this.graphics;while(g.length>0){this.remove(g[0]);}if(!_777){this.onGraphicsClear();}},setOpacity:function(op,_778){if(_778||this.opacity!=op){var div=this._div;if(div){if(has("ie")<9){_671.forEach(this.graphics,function(_779){var _77a=_779._shape;var node=_77a&&_77a.getNode();if(node){var _77b=_77a.strokeStyle,_77c=node.stroke;if(_77b&&_77c){_77c.opacity=_77b.color.a*op;}var _77d=_77a.fillStyle,fill=node.fill;if(_77d&&fill){if(fill.type==="tile"){_674.set(node,"opacity",op);}else{fill.opacity=_77d.a*op;}}}});div._esriIeOpacity=op;}else{if(this._canvas){_674.set(div.getEventSource(),"opacity",op);}else{div.getEventSource().setAttribute("opacity",op);}}}this.opacity=op;if(!_778){this.onOpacityChange(op);}}},setRenderer:function(ren){this.renderer=ren;}});var _77e=_66f(_680,{declaredClass:"esri.layers.GraphicsLayer",constructor:function(){this.enableMouseEvents=lang.hitch(this,this.enableMouseEvents);this.disableMouseEvents=lang.hitch(this,this.disableMouseEvents);this._processEvent=lang.hitch(this,this._processEvent);this._initLayer();},_initLayer:function(){this.loaded=true;this.onLoad(this);},_setMap:function(){var d=this.inherited("_setMap",arguments);this.enableMouseEvents();return d;},_unsetMap:function(){this.disableMouseEvents();this.inherited("_unsetMap",arguments);},_processEvent:function(evt){var _77f=this._map,g=this.graphics,gl=g.length;evt.screenPoint=new _67c(evt.pageX-_77f.position.x,evt.pageY-_77f.position.y);evt.mapPoint=_77f.toMap(evt.screenPoint);var i,es,gr,ds,_780=evt.target,_781=_780.parentNode;for(i=0;i<gl;i++){gr=g[i];ds=gr.getDojoShape();if(ds){es=ds.getEventSource();if(es===_780||es===_781){evt.graphic=gr;return evt;}}}},_onMouseOverHandler:function(evt){if(this._processEvent(evt)){this.onMouseOver(evt);}},_onMouseMoveHandler:function(evt){if(this._processEvent(evt)){this.onMouseMove(evt);}},_onMouseDragHandler:function(evt){if(this._processEvent(evt)){this.onMouseDrag(evt);}},_onMouseOutHandler:function(evt){if(this._processEvent(evt)){this.onMouseOut(evt);}},_onMouseDownHandler:function(evt){this._downGr=this._downPt=null;if(this._processEvent(evt)){_670.disconnect(this._onmousemove_connect);_670.disconnect(this._onmousedrag_connect);this._onmousedrag_connect=_670.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseDragHandler");this._downGr=evt.graphic;this._downPt=evt.screenPoint.x+","+evt.screenPoint.y;this.onMouseDown(evt);}},_onMouseUpHandler:function(evt){this._upGr=this._upPt=null;if(this._processEvent(evt)){_670.disconnect(this._onmousedrag_connect);_670.disconnect(this._onmousemove_connect);this._onmousemove_connect=_670.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseMoveHandler");this._upGr=evt.graphic;this._upPt=evt.screenPoint.x+","+evt.screenPoint.y;this.onMouseUp(evt);}},_onClickHandler:function(evt){if(this._processEvent(evt)){var _782=this._downGr,upGr=this._upGr;if(_782&&upGr&&_782===upGr&&this._downPt===this._upPt){if(has("ie")<9){_677._ieGraphic=evt.graphic;}this.onClick(evt);}}},_onDblClickHandler:function(evt){if(this._processEvent(evt)){this.onDblClick(evt);}},onMouseOver:function(){},onMouseMove:function(){},onMouseDrag:function(){},onMouseOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onClick:function(){},onDblClick:function(){},enableMouseEvents:function(){if(this._mouseEvents){return;}var dc=_670.connect,gc=this._div.getEventSource();if(_675.renderer.toLowerCase().indexOf("canvas")===-1){this._onmouseover_connect=dc(gc,"onmouseover",this,"_onMouseOverHandler");this._onmousemove_connect=dc(gc,"onmousemove",this,"_onMouseMoveHandler");this._onmouseout_connect=dc(gc,"onmouseout",this,"_onMouseOutHandler");this._onmousedown_connect=dc(gc,"onmousedown",this,"_onMouseDownHandler");this._onmouseup_connect=dc(gc,"onmouseup",this,"_onMouseUpHandler");this._onclick_connect=dc(gc,"onclick",this,"_onClickHandler");this._ondblclick_connect=dc(gc,"ondblclick",this,"_onDblClickHandler");}this._mouseEvents=true;},disableMouseEvents:function(){if(!this._mouseEvents){return;}var ddc=_670.disconnect;ddc(this._onmouseover_connect);ddc(this._onmousemove_connect);ddc(this._onmousedrag_connect);ddc(this._onmouseout_connect);ddc(this._onmousedown_connect);ddc(this._onmouseup_connect);ddc(this._onclick_connect);ddc(this._ondblclick_connect);this._mouseEvents=false;}});_77e._GraphicsContainer=_681;_77e._GraphicsLayer=_680;if(has("extend-esri")){lang.setObject("layers.GraphicsLayer",_77e,_677);lang.setObject("layers._GraphicsContainer",_681,_677);lang.setObject("layers._GraphicsLayer",_680,_677);}return _77e;});},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(dojo,lang){var _783={};lang.setObject("dojo.regexp",_783);_783.escapeString=function(str,_784){return str.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(_784&&_784.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};_783.buildGroupRE=function(arr,re,_785){if(!(arr instanceof Array)){return re(arr);}var b=[];for(var i=0;i<arr.length;i++){b.push(re(arr[i]));}return _783.group(b.join("|"),_785);};_783.group=function(_786,_787){return "("+(_787?"?:":"")+_786+")";};return _783;});},"esri/main":function(){define(["esri/kernel","dojo/i18n!esri/nls/jsapi","esri/config","esri/sniff"],function(esri,_788){esri.bundle=_788;return esri;});},"esri/layerUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel"],function(lang,_789,_78a,has,_78b){var _78c={_serializeLayerDefinitions:function(_78d){var defs=[],_78e=false,re=/[:;]/;if(_78d){_789.forEach(_78d,function(defn,i){if(defn){defs.push([i,defn]);if(!_78e&&re.test(defn)){_78e=true;}}});if(defs.length>0){var _78f;if(_78e){_78f={};_789.forEach(defs,function(defn){_78f[defn[0]]=defn[1];});_78f=_78a.toJson(_78f);}else{_78f=[];_789.forEach(defs,function(defn){_78f.push(defn[0]+":"+defn[1]);});_78f=_78f.join(";");}return _78f;}}return null;},_serializeTimeOptions:function(_790,ids){if(!_790){return;}var _791=[];_789.forEach(_790,function(_792,i){if(_792){var json=_792.toJson();if(ids&&_789.indexOf(ids,i)!==-1){json.useTime=false;}_791.push("\""+i+"\":"+_78a.toJson(json));}});if(_791.length){return "{"+_791.join(",")+"}";}},_getDefaultVisibleLayers:function(_793){var _794=[],i;if(!_793){return _794;}for(i=0;i<_793.length;i++){if(_793[i].parentLayerId>=0&&_789.indexOf(_794,_793[i].parentLayerId)===-1&&_789.some(_793,function(item){return item.id===_793[i].parentLayerId;})){continue;}if(_793[i].defaultVisibility){_794.push(_793[i].id);}}return _794;},_getLayersForScale:function(_795,_796){var _797=[];if(_795>0&&_796){var i;for(i=0;i<_796.length;i++){if(_796[i].parentLayerId>=0&&_789.indexOf(_797,_796[i].parentLayerId)===-1&&_789.some(_796,function(item){return item.id===_796[i].parentLayerId;})){continue;}if(_796[i].id>=0){var _798=true,_799=_796[i].maxScale,_79a=_796[i].minScale;if(_799>0||_79a>0){if(_799>0&&_79a>0){_798=_799<=_795&&_795<=_79a;}else{if(_799>0){_798=_799<=_795;}else{if(_79a>0){_798=_795<=_79a;}}}}if(_798){_797.push(_796[i].id);}}}}return _797;}};if(has("extend-esri")){lang.mixin(_78b,_78c);}return _78c;});},"dojo/date":function(){define(["./has","./_base/lang"],function(has,lang){var date={};date.getDaysInMonth=function(_79b){var _79c=_79b.getMonth();var days=[31,28,31,30,31,30,31,31,30,31,30,31];if(_79c==1&&date.isLeapYear(_79b)){return 29;}return days[_79c];};date.isLeapYear=function(_79d){var year=_79d.getFullYear();return !(year%400)||(!(year%4)&&!!(year%100));};date.getTimezoneName=function(_79e){var str=_79e.toString();var tz="";var _79f;var pos=str.indexOf("(");if(pos>-1){tz=str.substring(++pos,str.indexOf(")"));}else{var pat=/([A-Z\/]+) \d{4}$/;if((_79f=str.match(pat))){tz=_79f[1];}else{str=_79e.toLocaleString();pat=/ ([A-Z\/]+)$/;if((_79f=str.match(pat))){tz=_79f[1];}}}return (tz=="AM"||tz=="PM")?"":tz;};date.compare=function(_7a0,_7a1,_7a2){_7a0=new Date(+_7a0);_7a1=new Date(+(_7a1||new Date()));if(_7a2=="date"){_7a0.setHours(0,0,0,0);_7a1.setHours(0,0,0,0);}else{if(_7a2=="time"){_7a0.setFullYear(0,0,0);_7a1.setFullYear(0,0,0);}}if(_7a0>_7a1){return 1;}if(_7a0<_7a1){return -1;}return 0;};date.add=function(date,_7a3,_7a4){var sum=new Date(+date);var _7a5=false;var _7a6="Date";switch(_7a3){case "day":break;case "weekday":var days,_7a7;var mod=_7a4%5;if(!mod){days=(_7a4>0)?5:-5;_7a7=(_7a4>0)?((_7a4-5)/5):((_7a4+5)/5);}else{days=mod;_7a7=parseInt(_7a4/5);}var strt=date.getDay();var adj=0;if(strt==6&&_7a4>0){adj=1;}else{if(strt==0&&_7a4<0){adj=-1;}}var trgt=strt+days;if(trgt==0||trgt==6){adj=(_7a4>0)?2:-2;}_7a4=(7*_7a7)+days+adj;break;case "year":_7a6="FullYear";_7a5=true;break;case "week":_7a4*=7;break;case "quarter":_7a4*=3;case "month":_7a5=true;_7a6="Month";break;default:_7a6="UTC"+_7a3.charAt(0).toUpperCase()+_7a3.substring(1)+"s";}if(_7a6){sum["set"+_7a6](sum["get"+_7a6]()+_7a4);}if(_7a5&&(sum.getDate()<date.getDate())){sum.setDate(0);}return sum;};date.difference=function(_7a8,_7a9,_7aa){_7a9=_7a9||new Date();_7aa=_7aa||"day";var _7ab=_7a9.getFullYear()-_7a8.getFullYear();var _7ac=1;switch(_7aa){case "quarter":var m1=_7a8.getMonth();var m2=_7a9.getMonth();var q1=Math.floor(m1/3)+1;var q2=Math.floor(m2/3)+1;q2+=(_7ab*4);_7ac=q2-q1;break;case "weekday":var days=Math.round(date.difference(_7a8,_7a9,"day"));var _7ad=parseInt(date.difference(_7a8,_7a9,"week"));var mod=days%7;if(mod==0){days=_7ad*5;}else{var adj=0;var aDay=_7a8.getDay();var bDay=_7a9.getDay();_7ad=parseInt(days/7);mod=days%7;var _7ae=new Date(_7a8);_7ae.setDate(_7ae.getDate()+(_7ad*7));var _7af=_7ae.getDay();if(days>0){switch(true){case aDay==6:adj=-1;break;case aDay==0:adj=0;break;case bDay==6:adj=-1;break;case bDay==0:adj=-2;break;case (_7af+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==6:adj=0;break;case aDay==0:adj=1;break;case bDay==6:adj=2;break;case bDay==0:adj=1;break;case (_7af+mod)<0:adj=2;}}}days+=adj;days-=(_7ad*2);}_7ac=days;break;case "year":_7ac=_7ab;break;case "month":_7ac=(_7a9.getMonth()-_7a8.getMonth())+(_7ab*12);break;case "week":_7ac=parseInt(date.difference(_7a8,_7a9,"day")/7);break;case "day":_7ac/=24;case "hour":_7ac/=60;case "minute":_7ac/=60;case "second":_7ac/=1000;case "millisecond":_7ac*=_7a9.getTime()-_7a8.getTime();}return Math.round(_7ac);};1&&lang.mixin(lang.getObject("dojo.date",true),date);return date;});},"esri/renderer":function(){define(["esri/renderers/Renderer","esri/renderers/SimpleRenderer","esri/renderers/UniqueValueRenderer","esri/renderers/ClassBreaksRenderer","esri/renderers/TemporalRenderer","esri/renderers/SymbolAger","esri/renderers/TimeClassBreaksAger","esri/renderers/TimeRampAger","esri/renderers/jsonUtils"],function(_7b0,_7b1,_7b2,_7b3,_7b4,_7b5,_7b6,_7b7,_7b8){return {Renderer:_7b0,SimpleRenderer:_7b1,UniqueValueRenderer:_7b2,ClassBreaksRenderer:_7b3,TemporalRenderer:_7b4,SymbolAger:_7b5,TimeClassBreaksAger:_7b6,TimeRampAger:_7b7,jsonUtils:_7b8};});},"esri/layers/ArcGISMapServiceLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/lang","esri/request","esri/SpatialReference","esri/geometry/Extent","esri/layers/LayerInfo"],function(_7b9,lang,_7ba,has,_7bb,_7bc,_7bd,_7be,_7bf,_7c0){var _7c1=_7b9(null,{declaredClass:"esri.layers.ArcGISMapServiceLayer",constructor:function(url,_7c2){this.layerInfos=[];var _7c3=(this._params={}),_7c4=this._url.query?this._url.query.token:null;if(_7c4){_7c3.token=_7c4;}},_load:function(){_7bd({url:this._url.path,content:lang.mixin({f:"json"},this._params),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});},spatialReference:null,initialExtent:null,fullExtent:null,description:null,units:null,_initLayer:function(_7c5,io){try{this._findCredential();var ssl=(this.credential&&this.credential.ssl)||(_7c5&&_7c5._ssl);if(ssl){this._useSSL();}this.description=_7c5.description;this.copyright=_7c5.copyrightText;this.spatialReference=_7c5.spatialReference&&new _7be(_7c5.spatialReference);this.initialExtent=_7c5.initialExtent&&new _7bf(_7c5.initialExtent);this.fullExtent=_7c5.fullExtent&&new _7bf(_7c5.fullExtent);this.units=_7c5.units;this.maxRecordCount=_7c5.maxRecordCount;this.maxImageHeight=_7c5.maxImageHeight;this.maxImageWidth=_7c5.maxImageWidth;this.supportsDynamicLayers=_7c5.supportsDynamicLayers;var _7c6=(this.layerInfos=[]),lyrs=_7c5.layers,dvl=(this._defaultVisibleLayers=[]);_7ba.forEach(lyrs,function(lyr,i){_7c6[i]=new _7c0(lyr);if(lyr.defaultVisibility){dvl.push(lyr.id);}});if(!this.visibleLayers){this.visibleLayers=dvl;}this.version=_7c5.currentVersion;if(!this.version){var ver;if("capabilities" in _7c5||"tables" in _7c5){ver=10;}else{if("supportedImageFormatTypes" in _7c5){ver=9.31;}else{ver=9.3;}}this.version=ver;}this.capabilities=_7c5.capabilities;if(_7bc.isDefined(_7c5.minScale)&&!this._hasMin){this.setMinScale(_7c5.minScale);}if(_7bc.isDefined(_7c5.maxScale)&&!this._hasMax){this.setMaxScale(_7c5.maxScale);}}catch(e){this._errorHandler(e);}}});if(has("extend-esri")){lang.setObject("layers.ArcGISMapServiceLayer",_7c1,_7bb);}return _7c1;});},"esri/layers/ArcGISDynamicMapServiceLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/sniff","dojo/io-query","esri/kernel","esri/config","esri/request","esri/urlUtils","esri/layerUtils","esri/geometry/scaleUtils","esri/layers/DynamicMapServiceLayer","esri/layers/ArcGISMapServiceLayer","esri/layers/TimeInfo","esri/layers/LayerTimeOptions","esri/layers/ImageParameters","esri/layers/DynamicLayerInfo","esri/layers/LayerMapSource"],function(_7c7,lang,_7c8,_7c9,has,ioq,_7ca,_7cb,_7cc,_7cd,_7ce,_7cf,_7d0,_7d1,_7d2,_7d3,_7d4,_7d5,_7d6){var _7d7=_7c7([_7d0,_7d1],{declaredClass:"esri.layers.ArcGISDynamicMapServiceLayer",constructor:function(url,_7d8){var _7d9=_7d8&&_7d8.imageParameters,dh=lang.hitch;if(_7d9){var ldef=_7d9.layerDefinitions;if(ldef){this.setLayerDefinitions(ldef);}if(_7d9.layerOption===_7d4.LAYER_OPTION_SHOW){this.visibleLayers=[].concat(_7d9.layerIds);}}this._setIsPNG32=dh(this,this._setIsPNG32);this.dpi=(_7d9&&_7d9.dpi)||96;this.imageFormat=(_7d9&&_7d9.format)||"png8";this.imageTransparency=(_7d9&&_7d9.transparent===false)?false:true;this._setIsPNG32();this.gdbVersion=_7d8&&_7d8.gdbVersion;this._params.gdbVersion=this.gdbVersion;lang.mixin(this._params,this._url.query,{dpi:this.dpi,transparent:this.imageTransparency,format:this.imageFormat},_7d9?_7d9.toJson():{});this.getImageUrl=dh(this,this.getImageUrl);this._initLayer=dh(this,this._initLayer);this._load=dh(this,this._load);this.useMapImage=_7d8?_7d8.useMapImage:false;if(this.useMapImage){this._imageExportHandler=dh(this,this._imageExportHandler);}this._loadCallback=_7d8&&_7d8.loadCallback;var _7da=_7d8&&_7d8.resourceInfo;if(_7da){this._initLayer(_7da);}else{if(arguments[2]===undefined||arguments[2]===false){this._load();}}},disableClientCaching:false,layerDefinitions:null,_initLayer:function(_7db,io){this.inherited(arguments);if(_7db.timeInfo){this.timeInfo=new _7d2(_7db.timeInfo);}this.loaded=true;this.onLoad(this);var _7dc=this._loadCallback;if(_7dc){delete this._loadCallback;_7dc(this);}},getImageUrl:function(_7dd,_7de,_7df,_7e0){var path=this._url.path+"/export?",_7e1=this._params,sr=_7dd.spatialReference.wkid||_7c9.toJson(_7dd.spatialReference.toJson()),_7e2=this._errorHandler;delete _7e1._ts;lang.mixin(_7e1,{bbox:_7dd.xmin+","+_7dd.ymin+","+_7dd.xmax+","+_7dd.ymax,bboxSR:sr,imageSR:sr,size:_7de+","+_7df},this.disableClientCaching?{_ts:new Date().getTime()}:{});if(_7e1.layerDefs){var defs=_7e1.layerDefs;delete _7e1.layerDefs;lang.mixin(_7e1,{layerDefs:defs});}var _7e3=(_7e1.token=this._getToken()),_7e4=_7cd.addProxy(path+ioq.objectToQuery(lang.mixin({},_7e1,{f:"image"})));if((_7e4.length>_7cb.defaults.io.postLength)||this.useMapImage){this._jsonRequest=_7cc({url:path,content:lang.mixin(_7e1,{f:"json"}),callbackParamName:"callback",load:function(_7e5,io){var href=_7e5.href;if(_7e3){href+=(href.indexOf("?")===-1?("?token="+_7e3):("&token="+_7e3));}_7e0(_7cd.addProxy(href));},error:_7e2});}else{_7e0(_7e4);}},_setIsPNG32:function(){var _7e6=this.imageFormat.toLowerCase(),isIE=has("ie");this.isPNG32=isIE&&isIE===6&&(_7e6==="png32"||_7e6==="png24")&&this.imageTransparency;},_setTime:function(_7e7){var _7e8=this.timeInfo,time=(this._params.time=_7e7?_7e7.toJson().join(","):null);if(this.version<10.02&&_7e8){if(!time){var _7e9=this.layerInfos;if(_7e9){var _7ea=this.layerTimeOptions,_7eb=_7ea?_7ea.slice(0):[],ids=[];_7c8.forEach(_7e9,function(info){if(!info.subLayerIds){ids.push(info.id);}});if(ids.length){_7c8.forEach(ids,function(id){if(!_7eb[id]){var opt=new _7d3();opt.useTime=false;_7eb[id]=opt;}});this._params.layerTimeOptions=_7ce._serializeTimeOptions(_7eb,ids);}}}else{this._params.layerTimeOptions=_7ce._serializeTimeOptions(this.layerTimeOptions);}}if(this.version>=10.02&&_7e8){if(!time&&!_7e8.hasLiveData){this._params.time="null,null";}}},setDPI:function(dpi,_7ec){this.dpi=(this._params.dpi=dpi);if(!_7ec){this.refresh(true);}},setImageFormat:function(_7ed,_7ee){this.imageFormat=(this._params.format=_7ed);this._setIsPNG32();if(!_7ee){this.refresh(true);}},setImageTransparency:function(_7ef,_7f0){this.imageTransparency=(this._params.transparent=_7ef);this._setIsPNG32();if(!_7f0){this.refresh(true);}},setVisibleLayers:function(_7f1,_7f2){this.visibleLayers=_7f1;this._params.layers=_7d4.LAYER_OPTION_SHOW+":"+_7f1.join(",");this._updateDynamicLayers();if(!_7f2){this.refresh(true);}},setDefaultVisibleLayers:function(_7f3){this.visibleLayers=this._defaultVisibleLayers;this._params.layers=null;this._updateDynamicLayers();if(!_7f3){this.refresh(true);}},setLayerDefinitions:function(_7f4,_7f5){this.layerDefinitions=_7f4;this._params.layerDefs=_7ce._serializeLayerDefinitions(_7f4);this._updateDynamicLayers();if(!_7f5){this.refresh(true);}},setDefaultLayerDefinitions:function(_7f6){this.layerDefinitions=this._params.layerDefs=null;this._updateDynamicLayers();if(!_7f6){this.refresh(true);}},setDisableClientCaching:function(_7f7){this.disableClientCaching=_7f7;},setLayerTimeOptions:function(_7f8,_7f9){this.layerTimeOptions=_7f8;this._params.layerTimeOptions=_7ce._serializeTimeOptions(_7f8);this._updateDynamicLayers();if(!_7f9){this.refresh(true);}},refresh:function(_7fa){if(_7fa){this.inherited(arguments);}else{var dc=this.disableClientCaching;this.disableClientCaching=true;this.inherited(arguments);this.disableClientCaching=dc;}},setLayerDrawingOptions:function(_7fb,_7fc){this.layerDrawingOptions=_7fb;this._updateDynamicLayers();if(!_7fc){this.refresh(true);}},setDynamicLayerInfos:function(_7fd,_7fe){if(_7fd&&_7fd.length>0){this.dynamicLayerInfos=_7fd;this.visibleLayers=_7ce._getDefaultVisibleLayers(_7fd);}else{this.dynamicLayerInfos=this.layerDrawingOptions=null;}this._updateDynamicLayers();if(!_7fe){this.refresh(true);}},createDynamicLayerInfosFromLayerInfos:function(){var _7ff=[],_800;_7c8.forEach(this.layerInfos,function(_801,idx){_800=new _7d5(_801.toJson());_800.source=new _7d6({mapLayerId:_801.id});_7ff.push(_800);});return _7ff;},_onDynamicLayersChange:function(){},_updateDynamicLayers:function(){if((this.dynamicLayerInfos&&this.dynamicLayerInfos.length>0)||(this.layerDrawingOptions&&this.layerDrawingOptions.length>0)){if(!this.dynamicLayerInfos||this.dynamicLayerInfos.length===0){this.dynamicLayerInfos=this.createDynamicLayerInfosFromLayerInfos();}var _802,_803=this.dynamicLayerInfos,_804=[],_805=this._map&&_7cf.getScale(this._map),_806=this.visibleLayers,_807=_805?_7ce._getLayersForScale(_805,_803):_806;_7c8.forEach(_803,function(info){if(!info.subLayerIds){var _808,_809=info.id;if(_7c8.indexOf(_806,_809)!==-1&&_7c8.indexOf(_807,_809)!==-1){_808={id:_809};_808.source=info.source&&info.source.toJson();var _80a;if(this.layerDefinitions&&this.layerDefinitions[_809]){_80a=this.layerDefinitions[_809];}if(_80a){_808.definitionExpression=_80a;}var _80b;if(this.layerDrawingOptions&&this.layerDrawingOptions[_809]){_80b=this.layerDrawingOptions[_809];}if(_80b){_808.drawingInfo=_80b.toJson();}var _80c;if(this.layerTimeOptions&&this.layerTimeOptions[_809]){_80c=this.layerTimeOptions[_809];}if(_80c){_808.layerTimeOptions=_80c.toJson();}_808.minScale=info.minScale||0;_808.maxScale=info.maxScale||0;_804.push(_808);}}},this);_802=_7c9.toJson(_804);if(!this._params.dynamicLayers||(this._params.dynamicLayers.length!==_802.length||this._params.dynamicLayers!==_802)){this._params.dynamicLayers=_802;this._onDynamicLayersChange(this._params.dynamicLayers);}}else{if(this._params.dynamicLayers){this._params.dynamicLayers=null;this._onDynamicLayersChange(null);}else{this._params.dynamicLayers=null;}}},_onExtentChangeHandler:function(_80d,_80e,_80f){if(_80f){this._updateDynamicLayers();}this.inherited(arguments);},_setMap:function(map,_810,_811){this._map=map;this._updateDynamicLayers();return this.inherited(arguments);},onGDBVersionChange:function(){},setGDBVersion:function(_812,_813){this.gdbVersion=_812;this._params.gdbVersion=_812;this.onGDBVersionChange();if(!_813){this.refresh(true);}},exportMapImage:function(_814,_815){var m=_7cb.defaults.map,p=lang.mixin({size:m.width+","+m.height},this._params,_814?_814.toJson(this.normalization):{},{f:"json"});delete p._ts;if(p.layerDefs){var defs=p.layerDefs;delete p.layerDefs;lang.mixin(p,{layerDefs:defs});}this._exportMapImage(this._url.path+"/export",p,_815);}});if(has("extend-esri")){lang.setObject("layers.ArcGISDynamicMapServiceLayer",_7d7,_7ca);}return _7d7;});},"esri/SpatialReference":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(_816,_817,lang,has,_818,_819){var _81a="PROJCS[\"WGS_1984_Web_Mercator_Auxiliary_Sphere\",GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mercator_Auxiliary_Sphere\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],PARAMETER[\"Standard_Parallel_1\",0.0],PARAMETER[\"Auxiliary_Sphere_Type\",0.0],UNIT[\"Meter\",1.0]]",_81b=[-20037508.342788905,20037508.342788905],_81c=[-20037508.342787,20037508.342787];var _81d=_816(null,{declaredClass:"esri.SpatialReference",constructor:function(json){if(json){if(lang.isObject(json)){lang.mixin(this,json);}else{if(lang.isString(json)){this.wkt=json;}else{this.wkid=json;}}}},wkid:null,wkt:null,_info:{"102113":{wkTemplate:"PROJCS[\"WGS_1984_Web_Mercator\",GEOGCS[\"GCS_WGS_1984_Major_Auxiliary_Sphere\",DATUM[\"D_WGS_1984_Major_Auxiliary_Sphere\",SPHEROID[\"WGS_1984_Major_Auxiliary_Sphere\",6378137.0,0.0]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mercator\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],PARAMETER[\"Standard_Parallel_1\",0.0],UNIT[\"Meter\",1.0]]",valid:_81b,origin:_81c,dx:0.00001},"102100":{wkTemplate:_81a,valid:_81b,origin:_81c,dx:0.00001},"3785":{wkTemplate:"PROJCS[\"WGS_1984_Web_Mercator\",GEOGCS[\"GCS_WGS_1984_Major_Auxiliary_Sphere\",DATUM[\"D_WGS_1984_Major_Auxiliary_Sphere\",SPHEROID[\"WGS_1984_Major_Auxiliary_Sphere\",6378137.0,0.0]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mercator\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],PARAMETER[\"Standard_Parallel_1\",0.0],UNIT[\"Meter\",1.0]]",valid:_81b,origin:_81c,dx:0.00001},"3857":{wkTemplate:_81a,valid:_81b,origin:_81c,dx:0.00001},"4326":{wkTemplate:"GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",${Central_Meridian}],UNIT[\"Degree\",0.0174532925199433]]",altTemplate:"PROJCS[\"WGS_1984_Plate_Carree\",GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Plate_Carree\"],PARAMETER[\"False_Easting\",0.0],PARAMETER[\"False_Northing\",0.0],PARAMETER[\"Central_Meridian\",${Central_Meridian}],UNIT[\"Degrees\",111319.491]]",valid:[-180,180],origin:[-180,180],dx:0.00001}},_isWebMercator:function(){return _817.indexOf([102113,102100,3857,3785],this.wkid)!==-1;},_isWrappable:function(){return _817.indexOf([102113,102100,3857,3785,4326],this.wkid)!==-1;},_getInfo:function(){return this.wkid?this._info[this.wkid]:null;},_canProject:function(inSR){var _81e=false;if(inSR){_81e=((this.isWebMercator()&&inSR.wkid===4326)||(inSR.isWebMercator()&&this.wkid===4326));}return _81e;},isWebMercator:function(){return this._isWebMercator();},equals:function(inSR){var _81f=false;if(inSR){if(this===inSR){_81f=true;}if(this.wkid||inSR.wkid){_81f=(this.wkid===inSR.wkid)||(this.isWebMercator()&&inSR.isWebMercator())||(this.wkid===inSR.latestWkid)||(inSR.wkid===this.latestWkid);}else{if(this.wkt&&inSR.wkt){_81f=(this.wkt.toUpperCase()===inSR.wkt.toUpperCase());}}}return _81f;},toJson:function(){var _820=null,_821=_819.isDefined;if(_821(this.wkid)){_820={wkid:this.wkid};}else{if(_821(this.wkt)){_820={wkt:this.wkt};}}if(_820&&_821(this.latestWkid)){_820.latestWkid=this.latestWkid;}return _820;}});if(has("extend-esri")){_818.SpatialReference=_81d;}return _81d;});},"esri/layers/TimeReference":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_822,lang,has,_823){var _824=_822(null,{declaredClass:"esri.layers.TimeReference",constructor:function(json){if(json){lang.mixin(this,json);}}});if(has("extend-esri")){lang.setObject("layers.TimeReference",_824,_823);}return _824;});},"esri/symbols/SimpleFillSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/Color","dojo/has","dojox/gfx/_base","esri/kernel","esri/lang","esri/symbols/FillSymbol","esri/symbols/SimpleLineSymbol","require"],function(_825,lang,_826,has,_827,_828,_829,_82a,_82b,_82c){var _82d={STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"};var _82e={style:_82d.STYLE_SOLID,color:[0,0,0,0.25]};var SFS=_825(_82a,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(json,_82f,_830){if(json){if(lang.isString(json)){this.style=json;if(_82f!==undefined){this.outline=_82f;}if(_830!==undefined){this.color=_830;}}else{this.style=_829.valueOf(this._styles,json.style);}}else{lang.mixin(this,_82e);this.outline=new _82b(this.outline);this.color=new _826(this.color);}var _831=this.style;if(_831!=="solid"&&_831!=="none"){this._src=_82c.toUrl("esri")+"/images/symbol/sfs/"+_831+".png";}},setStyle:function(_832){this.style=_832;return this;},getStroke:function(){return this.outline&&this.outline.getStroke();},getFill:function(){var _833=this.style;if(_833===_82d.STYLE_NULL){return null;}else{if(_833===_82d.STYLE_SOLID){return this.color;}else{return lang.mixin(lang.mixin({},_827.defaultPattern),{src:this._src,width:10,height:10});}}},getShapeDescriptors:function(){return {defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"},fill:this.getFill(),stroke:this.getStroke()};},toJson:function(){return _829.fixJson(lang.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}));}});lang.mixin(SFS,_82d);SFS.defaultProps=_82e;if(has("extend-esri")){lang.setObject("symbol.SimpleFillSymbol",SFS,_828);_828.symbol.defaultSimpleFillSymbol=_82e;}return SFS;});},"esri/layers/ArcGISTiledMapServiceLayer":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","dojo/io-query","esri/kernel","esri/urlUtils","esri/SpatialReference","esri/layers/TiledMapServiceLayer","esri/layers/ArcGISMapServiceLayer","esri/layers/TileInfo","esri/layers/TimeInfo"],function(_834,_835,lang,_836,_837,has,ioq,_838,_839,_83a,_83b,_83c,_83d,_83e){var _83f=_835([_83b,_83c],{declaredClass:"esri.layers.ArcGISTiledMapServiceLayer",_agolAttrs:["World_Topo_Map","World_Street_Map","Ocean_Basemap"],constructor:function(url,_840){if(_840){if(_840.roundrobin){_834.deprecated(this.declaredClass+" : Constructor option 'roundrobin' deprecated. Use option 'tileServers'.");_840.tileServers=_840.roundrobin;}this._setTileServers(_840.tileServers);this._loadCallback=_840.loadCallback;}this._params=lang.mixin({},this._url.query);this._initLayer=lang.hitch(this,this._initLayer);var _841=_840&&_840.resourceInfo;if(_841){this._initLayer(_841);}else{this._load=lang.hitch(this,this._load);this._load();}},_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_setTileServers:function(list){if(list&&list.length>0){this.tileServers=list;var i,il=list.length;for(i=0;i<il;i++){list[i]=_839.urlToObject(list[i]).path;}}},_initLayer:function(_842,io){this.inherited(arguments);this.resourceInfo=_837.toJson(_842);this.tileInfo=new _83d(_842.tileInfo);if(!this.spatialReference&&this.tileInfo.spatialReference){this.spatialReference=new _83a(this.tileInfo.spatialReference.toJson());}this.isPNG32=this.tileInfo.format==="PNG24"||this.tileInfo.format==="PNG32";if(_842.timeInfo){this.timeInfo=new _83e(_842.timeInfo);}var path=this._url.path,_843=this._loadCallback,_844=(window.location.protocol==="file:")?"http:":window.location.protocol,_845=path.match(/^https?\:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+)\/mapserver/i),_846=_845&&_845[2];if(!this.tileServers){if(_842.tileServers){this._setTileServers(_842.tileServers);}else{var _847=(path.search(/^https?\:\/\/server\.arcgisonline\.com/i)!==-1),_848=(path.search(/^https?\:\/\/services\.arcgisonline\.com/i)!==-1);if(_847||_848){this._setTileServers([path,path.replace((_847?/server\.arcgisonline/i:/services\.arcgisonline/i),(_847?"services.arcgisonline":"server.arcgisonline"))]);}}}if(_846&&_836.indexOf(this._agolAttrs,_846)!==-1){this.hasAttributionData=true;this.attributionDataUrl=this.attributionDataUrl||(_844+"//static.arcgis.com/attribution/"+_846);}this.loaded=true;this.onLoad(this);if(_843){delete this._loadCallback;_843(this);}},getTileUrl:function(_849,row,col){var ts=this.tileServers,_84a=this._url.query,iurl=(ts?ts[row%ts.length]:this._url.path)+"/tile/"+_849+"/"+row+"/"+col;if(_84a){iurl+=("?"+ioq.objectToQuery(_84a));}var _84b=this._getToken();if(_84b&&(!_84a||!_84a.token)){iurl+=(iurl.indexOf("?")===-1?"?":"&")+"token="+_84b;}return _839.addProxy(iurl);}});if(has("extend-esri")){lang.setObject("layers.ArcGISTiledMapServiceLayer",_83f,_838);}return _83f;});},"esri/layers/TimeInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/TimeExtent","esri/layers/TimeReference","esri/layers/LayerTimeOptions"],function(_84c,lang,has,_84d,_84e,_84f,_850){var _851=_84c(null,{declaredClass:"esri.layers.TimeInfo",constructor:function(json){if(json!==null){lang.mixin(this,json);if(json.exportOptions){this.exportOptions=new _850(json.exportOptions);}this.timeExtent=new _84e(json.timeExtent);this.timeReference=new _84f(json.timeReference);}}});lang.mixin(_851,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",UNIT_YEARS:"esriTimeUnitsYears"});if(has("extend-esri")){lang.setObject("layers.TimeInfo",_851,_84d);}return _851;});},"esri/Evented":function(){define(["dojo/_base/declare","dojo/Evented","dojo/has","esri/kernel"],function(_852,_853,has,_854){var _855=_852([_853],{declaredClass:"esri.Evented",registerConnectEvents:function(_856,_857){if(!_856){return;}var _858,dict=this.constructor.connectEvents,_859=(_857&&_857.normalized);if(!dict){dict=(this.constructor.connectEvents={});}for(_858 in _856){if(_856.hasOwnProperty(_858)){dict[_858]=_856[_858];if(_859){dict[_858].normalized=true;}}}},on:function(type,_85a){var _85b=this.constructor.connectEvents,_85c=_85b&&_85b[type];if(_85c){var _85d=function(){var evt,i,_85e;if(_85c.normalized){evt=arguments[0];}else{_85e=_85c.length-1;evt={};for(i=1;i<=_85e;i++){evt[_85c[i]]=arguments[i-1];}}_85a.call(this,evt);};return _853.prototype.on.apply(this,[_85c[0],_85d]);}else{return this.inherited(arguments);}}});if(has("extend-esri")){_854.Evented=_855;}return _855;});},"dojox/gfx/_base":function(){define("dojox/gfx/_base",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/Color","dojo/_base/sniff","dojo/_base/window","dojo/_base/array","dojo/dom","dojo/dom-construct","dojo/dom-geometry"],function(_85f,lang,_860,has,win,arr,dom,_861,_862){var g=lang.getObject("dojox.gfx",true),b=g._base={};g._hasClass=function(node,_863){var cls=node.getAttribute("className");return cls&&(" "+cls+" ").indexOf(" "+_863+" ")>=0;};g._addClass=function(node,_864){var cls=node.getAttribute("className")||"";if(!cls||(" "+cls+" ").indexOf(" "+_864+" ")<0){node.setAttribute("className",cls+(cls?" ":"")+_864);}};g._removeClass=function(node,_865){var cls=node.getAttribute("className");if(cls){node.setAttribute("className",cls.replace(new RegExp("(^|\\s+)"+_865+"(\\s+|$)"),"$1$2"));}};b._getFontMeasurements=function(){var _866={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};var p;if(has("ie")){win.doc.documentElement.style.fontSize="100%";}var div=_861.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},win.body());for(p in _866){div.style.fontSize=p;_866[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}win.body().removeChild(div);return _866;};var _867=null;b._getCachedFontMeasurements=function(_868){if(_868||!_867){_867=b._getFontMeasurements();}return _867;};var _869=null,_86a={};b._getTextBox=function(text,_86b,_86c){var m,s,al=arguments.length;var i;if(!_869){_869=_861.create("div",{style:{position:"absolute",top:"-10000px",left:"0"}},win.body());}m=_869;m.className="";s=m.style;s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";if(al>1&&_86b){for(i in _86b){if(i in _86a){continue;}s[i]=_86b[i];}}if(al>2&&_86c){m.className=_86c;}m.innerHTML=text;if(m["getBoundingClientRect"]){var bcr=m.getBoundingClientRect();return {l:bcr.left,t:bcr.top,w:bcr.width||(bcr.right-bcr.left),h:bcr.height||(bcr.bottom-bcr.top)};}else{return _862.getMarginBox(m);}};var _86d=0;b._getUniqueId=function(){var id;do{id=_85f._scopeName+"xUnique"+(++_86d);}while(dom.byId(id));return id;};lang.mixin(g,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:(function(){var _86e={};return function(type){var t=_86e[type];if(t){return new t();}t=_86e[type]=new Function();t.prototype=g["default"+type];return new t();};})(),normalizeColor:function(_86f){return (_86f instanceof _860)?_86f:new _860(_86f);},normalizeParameters:function(_870,_871){var x;if(_871){var _872={};for(x in _870){if(x in _871&&!(x in _872)){_870[x]=_871[x];}}}return _870;},makeParameters:function(_873,_874){var i=null;if(!_874){return lang.delegate(_873);}var _875={};for(i in _873){if(!(i in _875)){_875[i]=lang.clone((i in _874)?_874[i]:_873[i]);}}return _875;},formatNumber:function(x,_876){var val=x.toString();if(val.indexOf("e")>=0){val=x.toFixed(4);}else{var _877=val.indexOf(".");if(_877>=0&&val.length-_877>5){val=x.toFixed(4);}}if(x<0){return val;}return _876?" "+val:val;},makeFontString:function(font){return font.style+" "+font.variant+" "+font.weight+" "+font.size+" "+font.family;},splitFontString:function(str){var font=g.getDefault("Font");var t=str.split(/\s+/);do{if(t.length<5){break;}font.style=t[0];font.variant=t[1];font.weight=t[2];var i=t[3].indexOf("/");font.size=i<0?t[3]:t[3].substring(0,i);var j=4;if(i<0){if(t[4]=="/"){j=6;}else{if(t[4].charAt(0)=="/"){j=5;}}}if(j<t.length){font.family=t.slice(j).join(" ");}}while(false);return font;},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return g._base._getCachedFontMeasurements()["12pt"]/12;},pt2px:function(len){return len*g.px_in_pt();},px2pt:function(len){return len/g.px_in_pt();},normalizedLength:function(len){if(len.length===0){return 0;}if(len.length>2){var _878=g.px_in_pt();var val=parseFloat(len);switch(len.slice(-2)){case "px":return val;case "pt":return val*_878;case "in":return val*72*_878;case "pc":return val*12*_878;case "mm":return val*g.mm_in_pt*_878;case "cm":return val*g.cm_in_pt*_878;}}return parseFloat(len);},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(a,b){return a&&b&&a===b;},switchTo:function(_879){var ns=typeof _879=="string"?g[_879]:_879;if(ns){arr.forEach(["Group","Rect","Ellipse","Circle","Line","Polyline","Image","Text","Path","TextPath","EsriPath","Surface","createSurface","fixTarget"],function(name){g[name]=ns[name];});}}});return g;});},"esri/layers/QueryDataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/DataSource"],function(_87a,lang,has,_87b,_87c,_87d){var _87e=_87a(_87d,{declaredClass:"esri.layers.QueryDataSource",toJson:function(){var json={type:"queryTable",workspaceId:this.workspaceId,query:this.query,oidFields:this.oidFields&&this.oidFields.join(),spatialReference:this.spatialReference&&this.spatialReference.toJson()};if(this.geometryType){var _87f;if(this.geometryType.toLowerCase()==="point"){_87f="esriGeometryPoint";}else{if(this.geometryType.toLowerCase()==="multipoint"){_87f="esriGeometryMultipoint";}else{if(this.geometryType.toLowerCase()==="polyline"){_87f="esriGeometryPolyline";}else{if(this.geometryType.toLowerCase()==="polygon"){_87f="esriGeometryPolygon";}else{_87f=this.geometryType;}}}}json.geometryType=_87f;}return _87c.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.QueryDataSource",_87e,_87b);}return _87e;});},"esri/geometry/Polygon":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/SpatialReference","esri/geometry/Geometry","esri/geometry/Point","esri/geometry/Extent","esri/geometry/mathUtils"],function(_880,_881,lang,has,_882,_883,_884,_885,_886,_887,_888){var _889={type:"polygon",rings:null};var _88a=_880(_885,{declaredClass:"esri.geometry.Polygon",constructor:function(obj){lang.mixin(this,_889);this.rings=[];this._ring=0;if(obj){if(obj.rings){lang.mixin(this,obj);}else{this.spatialReference=obj;}if(this.spatialReference){this.spatialReference=new _884(this.spatialReference);}}this.verifySR();},_extent:null,addRing:function(_88b){this._extent=null;this._ring=this.rings.length;this.rings[this._ring]=[];if(lang.isArray(_88b[0])){_881.forEach(_88b,this._addPointArr,this);}else{_881.forEach(_88b,this._addPoint,this);}return this;},_addPointArr:function(_88c){this.rings[this._ring].push(_88c);},_addPoint:function(_88d){this.rings[this._ring].push([_88d.x,_88d.y]);},_insertPoints:function(_88e,_88f){this._extent=null;this._ring=_88f;if(!this.rings[this._ring]){this.rings[this._ring]=[];}_881.forEach(_88e,this._addPoint,this);},_validateInputs:function(_890,_891){if((_890!==null&&_890!==undefined)&&(_890<0||_890>=this.rings.length)){return false;}if((_891!==null&&_890!==undefined)&&(_891<0||_891>=this.rings[_890].length)){return false;}return true;},getPoint:function(_892,_893){if(this._validateInputs(_892,_893)){return new _886(this.rings[_892][_893],this.spatialReference);}},setPoint:function(_894,_895,_896){if(this._validateInputs(_894,_895)){this._extent=null;this.rings[_894][_895]=[_896.x,_896.y];return this;}},insertPoint:function(_897,_898,_899){if(this._validateInputs(_897)&&_883.isDefined(_898)&&(_898>=0&&_898<=this.rings[_897].length)){this._extent=null;this.rings[_897].splice(_898,0,[_899.x,_899.y]);return this;}},removeRing:function(_89a){if(this._validateInputs(_89a,null)){this._extent=null;var arr=this.rings.splice(_89a,1)[0],i,il=arr.length,sr=this.spatialReference;for(i=0;i<il;i++){arr[i]=new _886(arr[i],sr);}return arr;}},removePoint:function(_89b,_89c){if(this._validateInputs(_89b,_89c)){this._extent=null;return new _886(this.rings[_89b].splice(_89c,1)[0],this.spatialReference);}},getExtent:function(){var _89d;if(this._extent){_89d=new _887(this._extent);_89d._partwise=this._partwise;return _89d;}var _89e=this.rings,pal=_89e.length;if(!pal||!_89e[0].length){return;}var ring,_89f,x,y,xmax,ymax,pa,pt,ptl,xmin=(xmax=_89e[0][0][0]),ymin=(ymax=_89e[0][0][1]),min=Math.min,max=Math.max,sr=this.spatialReference,_8a0=[],_8a1,_8a2,_8a3,_8a4;for(pa=0;pa<pal;pa++){ring=_89e[pa];_8a1=(_8a2=ring[0]&&ring[0][0]);_8a3=(_8a4=ring[0]&&ring[0][1]);ptl=ring.length;for(pt=0;pt<ptl;pt++){_89f=ring[pt];x=_89f[0];y=_89f[1];xmin=min(xmin,x);ymin=min(ymin,y);xmax=max(xmax,x);ymax=max(ymax,y);_8a1=min(_8a1,x);_8a3=min(_8a3,y);_8a2=max(_8a2,x);_8a4=max(_8a4,y);}_8a0.push(new _887({xmin:_8a1,ymin:_8a3,xmax:_8a2,ymax:_8a4,spatialReference:(sr?sr.toJson():null)}));}this._extent={xmin:xmin,ymin:ymin,xmax:xmax,ymax:ymax,spatialReference:(sr?sr.toJson():null)};this._partwise=_8a0.length>1?_8a0:null;_89d=new _887(this._extent);_89d._partwise=this._partwise;return _89d;},contains:function(_8a5){var _8a6=this.rings,ring,_8a7=false,pi,pj,_8a8,j,i,pa,pal=_8a6.length,_8a9=this.spatialReference,_8aa=_8a5.spatialReference,_8ab,x=_8a5.x,y=_8a5.y;if(_8a9&&_8aa&&!_8a9.equals(_8aa)&&_8a9._canProject(_8aa)){_8ab=_8a9.isWebMercator()?_886.lngLatToXY(x,y):_886.xyToLngLat(x,y,true);x=_8ab[0];y=_8ab[1];}for(pa=0;pa<pal;pa++){ring=_8a6[pa];_8a8=ring.length;j=0;for(i=0;i<_8a8;i++){j++;if(j===_8a8){j=0;}pi=ring[i];pj=ring[j];if((pi[1]<y&&pj[1]>=y||pj[1]<y&&pi[1]>=y)&&(pi[0]+(y-pi[1])/(pj[1]-pi[1])*(pj[0]-pi[0])<x)){_8a7=!_8a7;}}}return _8a7;},isClockwise:function(arr){var area=0,i,il=arr.length,func=lang.isArray(arr[0])?function(p1,p2){return p1[0]*p2[1]-p2[0]*p1[1];}:function(p1,p2){return p1.x*p2.y-p2.x*p1.y;};for(i=0;i<il;i++){area+=func(arr[i],arr[(i+1)%il]);}return (area/2)<=0;},isSelfIntersecting:function(_8ac){_8ac=_8ac||this;var i,j,k,m,_8ad,_8ae,_8af,_8b0=_8ac.rings.length;for(k=0;k<_8b0;k++){for(i=0;i<_8ac.rings[k].length-1;i++){_8ad=[[_8ac.rings[k][i][0],_8ac.rings[k][i][1]],[_8ac.rings[k][i+1][0],_8ac.rings[k][i+1][1]]];for(j=k+1;j<_8b0;j++){for(m=0;m<_8ac.rings[j].length-1;m++){_8ae=[[_8ac.rings[j][m][0],_8ac.rings[j][m][1]],[_8ac.rings[j][m+1][0],_8ac.rings[j][m+1][1]]];_8af=_888._getLineIntersection2(_8ad,_8ae);if(_8af){if(!((_8af[0]===_8ad[0][0]&&_8af[1]===_8ad[0][1])||(_8af[0]===_8ae[0][0]&&_8af[1]===_8ae[0][1])||(_8af[0]===_8ad[1][0]&&_8af[1]===_8ad[1][1])||(_8af[0]===_8ae[1][0]&&_8af[1]===_8ae[1][1]))){return true;}}}}}var _8b1=_8ac.rings[k].length;if(_8b1<=4){continue;}for(i=0;i<_8b1-3;i++){var _8b2=_8b1-1;if(i===0){_8b2=_8b1-2;}_8ad=[[_8ac.rings[k][i][0],_8ac.rings[k][i][1]],[_8ac.rings[k][i+1][0],_8ac.rings[k][i+1][1]]];for(j=i+2;j<_8b2;j++){_8ae=[[_8ac.rings[k][j][0],_8ac.rings[k][j][1]],[_8ac.rings[k][j+1][0],_8ac.rings[k][j+1][1]]];_8af=_888._getLineIntersection2(_8ad,_8ae);if(_8af){if(!((_8af[0]===_8ad[0][0]&&_8af[1]===_8ad[0][1])||(_8af[0]===_8ae[0][0]&&_8af[1]===_8ae[0][1])||(_8af[0]===_8ad[1][0]&&_8af[1]===_8ad[1][1])||(_8af[0]===_8ae[1][0]&&_8af[1]===_8ae[1][1]))){return true;}}}}}return false;},toJson:function(){var json={rings:lang.clone(this.rings)},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});_88a.defaultProps=_889;_88a.createEllipse=function(_8b3){var dx=_8b3.center.x,dy=_8b3.center.y,a=_8b3.longAxis,b=_8b3.shortAxis,_8b4=_8b3.numberOfPoints,map=_8b3.map,pt,i,_8b5,_8b6,_8b7,path=[],_8b8=(2*Math.PI)/_8b4;for(i=0;i<_8b4;i++){_8b5=Math.cos(i*_8b8);_8b6=Math.sin(i*_8b8);pt=map.toMap({x:a*_8b5+dx,y:b*_8b6+dy});path.push(pt);}path.push(path[0]);_8b7=new _88a(map.spatialReference);_8b7.addRing(path);return _8b7;};_88a.createCircle=function(_8b9){var _8ba={center:_8b9.center,longAxis:_8b9.r,shortAxis:_8b9.r,numberOfPoints:_8b9.numberOfPoints,map:_8b9.map};var _8bb=_88a.createEllipse(_8ba);return _8bb;};if(has("extend-esri")){lang.setObject("geometry.Polygon",_88a,_882);_882.geometry.defaultPolygon=_889;_882.geometry.createEllipse=_88a.createEllipse;_882.geometry.createCircle=_88a.createCircle;_882.geometry.isClockwise=_88a.prototype.isClockwise;_882.geometry.polygonSelfIntersecting=_88a.prototype.isSelfIntersecting;}return _88a;});},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","esri/kernel"],function(_8bc,_8bd,has,_8be){var _8bf={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:true,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,panDuration:350,panRate:25,logoLink:"http://www.esri.com",basemaps:{"streets":{title:"Streets",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]},"satellite":{title:"Satellite",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]},"hybrid":{title:"Imagery with Labels",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",isReference:true}]},"topo":{title:"Topographic",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}]},"gray":{title:"Light Gray Canvas",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",isReference:true}]},"oceans":{title:"Oceans",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Ocean_Basemap/MapServer"}]},"national-geographic":{title:"National Geographic",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"}]},"osm":{title:"OpenStreetMap",baseMapLayers:[{type:"OpenStreetMap"}]}}},io:{errorHandler:function(_8c0,io){_8bd.publish("esri.Error",[_8c0]);},proxyUrl:null,alwaysUseProxy:false,corsEnabledServers:["www.arcgis.com","tiles.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","static.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","qaext.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","tilesdevext.arcgis.com","servicesdev.arcgis.com","servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com"],corsDetection:true,_processedCorsServers:{},proxyRules:[],postLength:2000,timeout:60000}}};if(has("extend-esri")){_8be.config=_8bf;}if(!_8bc.noGlobals){window.esriConfig=_8bf;}return _8bf;});},"esri/MouseEvents":function(){define(["dojo/_base/declare","dojo/_base/html","dojo/_base/lang","dojo/_base/sniff","dojo/_base/connect","dojo/_base/event","esri/kernel","esri/Evented","esri/geometry/Point","esri/geometry/ScreenPoint"],function(_8c1,html,lang,has,_8c2,_8c3,_8c4,_8c5,_8c6,_8c7){var _8c8=_8c2.connect,_8c9=_8c2.disconnect;var _8ca=_8c1([_8c5],{declaredClass:"esri.MouseEvents",doubleClickDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:has("mac")!==-1?1:3,wheelDivisor:has("chrome")<2?360:120,preventPageScroll:true,map:null,constructor:function(node,_8cb){this.registerConnectEvents({"click":["Click"],"double-click":["DblClick"],"key-down":["KeyDown"],"key-up":["KeyUp"],"mouse-down":["MouseDown"],"mouse-drag":["MouseDrag"],"mouse-drag-end":["MouseDragEnd"],"mouse-drag-start":["MouseDragStart"],"mouse-move":["MouseMove"],"mouse-out":["MouseOut"],"mouse-over":["MouseOver"],"mouse-up":["MouseUp"],"mouse-wheel":["MouseWheel"]},{normalized:true});this.node=node;lang.mixin(this,_8cb);var _8cc=function(evt){_8c3.stop(evt);return false;};if(has("mozilla")){html.style(node,"MozUserSelect","none");}this._handles=[_8c8(node,"onselectstart",_8cc),_8c8(node,"ondragstart",_8cc),_8c8(node,"onmouseenter",this,this._onMouseEnterHandler),_8c8(node,"onmouseleave",this,this._onMouseLeaveHandler),_8c8(node,"onmousedown",this,this._onMouseDownHandler),_8c8(node,"onclick",this,this._onClickHandler),_8c8(node,"ondblclick",this,this._onDblClickHandler)];this._onMouseMoveHandler_connect=_8c8(node,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=_8c8(node,"onmouseup",this,this._onMouseUpHandler);this._fireClickEvent=lang.hitch(this,this._fireClickEvent);this._initialDuration=this.doubleClickDuration;var map=this.map;this.preventPageScroll=map?(map.isScrollWheelZoom||map.isScrollWheelPan):this.preventPageScroll;this.enableMouseWheel(false);},_fire:function(_8cd,evt){if(this[_8cd]){this[_8cd](evt);}if(this.map){if(this.map[_8cd]){this.map[_8cd](evt);}}},_processEvent:function(evt){evt=_8c3.fix(evt,evt.target);var map=this.map,pos=map&&map.position;if(pos){if(evt.type==="DOMMouseScroll"&&has("ff")<3){evt.screenPoint=new _8c7(window.scrollX+evt.screenX-pos.x,window.scrollY+evt.screenY-pos.y);}else{evt.screenPoint=new _8c7(evt.pageX-pos.x,evt.pageY-pos.y);}evt.mapPoint=map.extent?map.toMap(evt.screenPoint):new _8c6();}evt.numPoints=0;return evt;},_onMouseEnterHandler:function(evt){_8c9(this._onKeyDown_connect);_8c9(this._onKeyUp_connect);this._onKeyDown_connect=_8c8(document,"onkeydown",this,this._onKeyDownHandler);this._onKeyUp_connect=_8c8(document,"onkeyup",this,this._onKeyUpHandler);this._fire("onMouseOver",this._processEvent(evt));},_onMouseLeaveHandler:function(evt){_8c9(this._onKeyDown_connect);_8c9(this._onKeyUp_connect);this._onKeyDown_connect=this._onKeyUp_connect=null;this._fire("onMouseOut",this._processEvent(evt));},_onMouseMoveHandler:function(evt){if(this._dragEnd){this._dragEnd=false;return;}this._fire("onMouseMove",this._processEvent(evt));},_onMouseDownHandler:function(evt){_8c9(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=null;if(this.node.setCapture){this.node.setCapture(false);}this._onMouseDragHandler_connect=_8c8(document,"onmousemove",this,this._onMouseDragHandler);this._startX=evt.pageX;this._startY=evt.pageY;this._fire("onMouseDown",this._processEvent(evt));},_onMouseUpHandler:function(evt){var node=this.node;if(node.releaseCapture){node.releaseCapture();}_8c9(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=null;_8c9(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=_8c8(node,"onmousemove",this,this._onMouseMoveHandler);this._fire("onMouseUp",this._processEvent(evt));},_onMouseDragHandler:function(evt){_8c9(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=_8c8(document,"onmousemove",this,this._onMouseDraggingHandler);_8c9(this._onMouseUpHandler_connect);this._onMouseUpHandler_connect=_8c8(document,"onmouseup",this,this._onDragMouseUpHandler);this._docLeaveConnect=_8c8(document,"onmouseout",this,this._onDocMouseOut);this._fire("onMouseDragStart",this._processEvent(evt));},_onMouseDraggingHandler:function(evt){_8c3.stop(evt);this._fire("onMouseDrag",this._processEvent(evt));},_onDragMouseUpHandler:function(evt){var node=this.node;if(node.releaseCapture){node.releaseCapture();}this._dragEnd=true;_8c9(this._docLeaveConnect);_8c9(this._onMouseDragHandler_connect);_8c9(this._onMouseUpHandler_connect);this._docLeaveConnect=this._onMouseDragHandler_connect=null;this._onMouseMoveHandler_connect=_8c8(node,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=_8c8(node,"onmouseup",this,this._onMouseUpHandler);evt=this._processEvent(evt);this._fire("onMouseDragEnd",evt);this._fire("onMouseUp",evt);},_onDocMouseOut:function(evt){var _8ce=evt.relatedTarget,_8cf=evt.relatedTarget&&evt.relatedTarget.nodeName.toLowerCase();if(!_8ce||(has("chrome")&&_8cf==="html")){this._onDragMouseUpHandler(evt);}},_onClickHandler:function(evt){evt=this._processEvent(evt);if(evt.pageX!==this._startX||evt.pageY!==this._startY){return;}clearTimeout(this._clickTimer);this._clickEvent=lang.mixin({},evt);this._clickTimer=setTimeout(this._fireClickEvent,this.doubleClickDuration);},_fireClickEvent:function(){clearTimeout(this._clickTimer);if(has("ie")<9){this._clickEvent.graphic=_8c4._ieGraphic;delete _8c4._ieGraphic;}this._fire("onClick",this._clickEvent);},_onDblClickHandler:function(evt){clearTimeout(this._clickTimer);this._fire("onDblClick",this._processEvent(evt));},_onMouseWheelHandler:function(evt){var map=this.map,_8d0=map?(map.isScrollWheelZoom||map.isScrollWheelPan):this.preventPageScroll;if(_8d0){_8c3.stop(evt);}var _8d1=has("ie")||has("webkit")?evt.wheelDelta/this.wheelDivisor:-evt.detail/this.mozWheelDivisor,_8d2=Math.abs(_8d1);if(_8d2<=this.minWheelValue){_8d2=this.minWheelValue;}else{_8d2=this.maxWheelValue;}evt.value=_8d1<0?-_8d2:_8d2;this._fire("onMouseWheel",this._processEvent(evt));},_onKeyDownHandler:function(evt){this._fire("onKeyDown",evt);},_onKeyUpHandler:function(evt){this._fire("onKeyUp",evt);},enableMouseWheel:function(_8d3){_8c9(this._scrollHandle);this._scrollHandle=_8c8(this.node,(has("ff")||has("mozilla"))?(_8d3?"MozMousePixelScroll":"DOMMouseScroll"):"onmousewheel",this,this._onMouseWheelHandler);},setImmediateClick:function(_8d4){this.doubleClickDuration=_8d4?0:this._initialDuration;},destroy:function(){var _8d5=this._handles.concat([this._onMouseMoveHandler_connect,this._onMouseUpHandler_connect,this._onMouseDragHandler_connect,this._scrollHandle,this._onKeyDown_connect,this._onKeyUp_connect,this._docLeaveConnect]),i;for(i=0;i<_8d5.length;i++){_8c9(_8d5[i]);}clearTimeout(this._clickTimer);this.node=this.map=this._handles=this._clickEvent=this._onMouseMoveHandler_connect=this._onMouseUpHandler_connect=this._onMouseDragHandler_connect=this._scrollHandle=this._onKeyDown_connect=this._onKeyUp_connect=this._docLeaveConnect=null;}});if(has("extend-esri")){_8c4.MouseEvents=_8ca;}return _8ca;});},"esri/geometry/Geometry":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/SpatialReference"],function(_8d6,lang,has,_8d7,_8d8){var _8d9=_8d6(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,setSpatialReference:function(sr){this.spatialReference=sr;return this;},verifySR:function(){if(!this.spatialReference){this.setSpatialReference(new _8d8(4326));}},getExtent:function(){return null;}});if(has("extend-esri")){lang.setObject("geometry.Geometry",_8d9,_8d7);}return _8d9;});},"esri/layers/agscommon":function(){define(["esri/layers/ArcGISMapServiceLayer","esri/layers/LayerInfo","esri/layers/TimeInfo","esri/layers/LayerTimeOptions","esri/layers/TimeReference","esri/layers/Field","esri/layers/Domain","esri/layers/RangeDomain","esri/layers/CodedValueDomain","esri/layers/InheritedDomain","esri/layers/LayerSource","esri/layers/LayerMapSource","esri/layers/LayerDataSource","esri/layers/DataSource","esri/layers/TableDataSource","esri/layers/QueryDataSource","esri/layers/JoinDataSource","esri/layers/RasterDataSource","esri/layers/DynamicLayerInfo","esri/layers/LayerDrawingOptions","esri/geometry","esri/utils"],function(){return {};});},"esri/layers/RasterDataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/DataSource"],function(_8da,lang,has,_8db,_8dc,_8dd){var _8de=_8da(_8dd,{declaredClass:"esri.layers.RasterDataSource",toJson:function(){var json={type:"raster",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName};return _8dc.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.RasterDataSource",_8de,_8db);}return _8de;});},"esri/layers/DynamicLayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/LayerInfo","esri/layers/LayerMapSource","esri/layers/LayerDataSource"],function(_8df,lang,has,_8e0,_8e1,_8e2,_8e3,_8e4){var _8e5=_8df(_8e2,{declaredClass:"esri.layers.DynamicLayerInfo",defaultVisibility:true,parentLayerId:-1,maxScale:0,minScale:0,constructor:function(json){if(json){var _8e6;if(!json.source){_8e6=new _8e3();_8e6.mapLayerId=this.id;}else{if(json.source.type==="mapLayer"){_8e6=new _8e3(json.source);}else{_8e6=new _8e4(json.source);}}this.source=_8e6;}},toJson:function(){var json=this.inherited(arguments);json.source=this.source&&this.source.toJson();return _8e1.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.DynamicLayerInfo",_8e5,_8e0);}return _8e5;});},"esri/layers/CodedValueDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/Domain"],function(_8e7,lang,has,_8e8,_8e9,_8ea){var _8eb=_8e7([_8ea],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(json){if(json&&lang.isObject(json)){this.codedValues=json.codedValues;}},toJson:function(){var json=this.inherited(arguments);json.codedValues=lang.clone(this.codedValues);return _8e9.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.CodedValueDomain",_8eb,_8e8);}return _8eb;});},"dijit/main":function(){define("dijit/main",["dojo/_base/kernel"],function(dojo){return dojo.dijit;});},"esri/domUtils":function(){define(["dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has","esri/kernel"],function(_8ec,lang,_8ed,has,_8ee){var _8ef={show:function(node){if(node){node.style.display="block";}},hide:function(node){if(node){node.style.display="none";}},toggle:function(node){node.style.display=node.style.display==="none"?"block":"none";},documentBox:has("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(node){var _8f0=0,_8f1=0,_8f2=0,_8f3=0,_8f4=0,_8f5=0;return [_8ec.connect(node,"ontouchstart",function(evt){_8f0=evt.touches[0].screenX;_8f1=evt.touches[0].screenY;_8f2=node.scrollWidth;_8f3=node.scrollHeight;_8f4=node.clientWidth;_8f5=node.clientHeight;}),_8ec.connect(node,"ontouchmove",function(evt){evt.preventDefault();var _8f6=node.firstChild;if(_8f6 instanceof Text){_8f6=node.childNodes[1];}var _8f7=_8f6._currentX||0,_8f8=_8f6._currentY||0;_8f7+=(evt.touches[0].screenX-_8f0);if(_8f7>0){_8f7=0;}else{if(_8f7<0&&(Math.abs(_8f7)+_8f4)>_8f2){_8f7=-1*(_8f2-_8f4);}}_8f6._currentX=_8f7;_8f8+=(evt.touches[0].screenY-_8f1);if(_8f8>0){_8f8=0;}else{if(_8f8<0&&(Math.abs(_8f8)+_8f5)>_8f3){_8f8=-1*(_8f3-_8f5);}}_8f6._currentY=_8f8;_8ed.set(_8f6,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+_8f7+"px, "+_8f8+"px)"});_8f0=evt.touches[0].screenX;_8f1=evt.touches[0].screenY;})];}};if(has("extend-esri")){lang.mixin(_8ee,_8ef);}return _8ef;});},"esri/units":function(){define(["dojo/has","esri/kernel"],function(has,_8f9){var _8fa={CENTIMETERS:"esriCentimeters",DECIMAL_DEGREES:"esriDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds",DECIMETERS:"esriDecimeters",FEET:"esriFeet",INCHES:"esriInches",KILOMETERS:"esriKilometers",METERS:"esriMeters",MILES:"esriMiles",MILLIMETERS:"esriMillimeters",NAUTICAL_MILES:"esriNauticalMiles",POINTS:"esriPoints",UNKNOWN:"esriUnknownUnits",YARDS:"esriYards",ACRES:"esriAcres",ARES:"esriAres",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_FEET:"esriSquareFeet",SQUARE_METERS:"esriSquareMeters",HECTARES:"esriHectares",SQUARE_YARDS:"esriSquareYards",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters"};if(has("extend-esri")){_8f9.Units=_8fa;}return _8fa;});},"dojox/gfx":function(){define("dojox/gfx",["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(lang,_8fb,_8fc){_8fb.switchTo(_8fc);return _8fb;});},"esri/PopupBase":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dojo/_base/Deferred","dojo/has","esri/kernel","esri/graphic","esri/geometry/Point","esri/geometry/jsonUtils","esri/geometry/mathUtils","esri/geometry/webMercatorUtils","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/CartographicLineSymbol","esri/symbols/SimpleFillSymbol"],function(_8fd,lang,_8fe,_8ff,_900,has,_901,_902,_903,_904,_905,_906,_907,_908,_909,_90a){var _90b=_8fd(null,{declaredClass:"esri.PopupBase",onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){},initialize:function(){this.count=0;this.selectedIndex=-1;},cleanup:function(){this.features=this.deferreds=null;},setFeatures:function(arg){if(!arg||!arg.length){return;}this.clearFeatures();var _90c,_90d;if(arg[0] instanceof _900){_90d=arg;}else{_90c=arg;}if(_90c){this._updateFeatures(null,_90c);}else{this.deferreds=_90d;_90d=_90d.slice(0);_8fe.forEach(_90d,function(dfd){dfd.addBoth(lang.hitch(this,this._updateFeatures,dfd));},this);}},clearFeatures:function(){this.features=this.deferreds=this._marked=null;this.count=0;var _90e=this.selectedIndex;this.selectedIndex=-1;if(_90e>-1){this.onSelectionChange();}this.onClearFeatures();},getSelectedFeature:function(){var _90f=this.features;if(_90f){return _90f[this.selectedIndex];}},select:function(_910){if(_910<0||_910>=this.count){return;}this.selectedIndex=_910;this.onSelectionChange();},enableHighlight:function(map){this._highlighted=map.graphics.add(new _902(new _903(0,0,map.spatialReference)));this._highlighted.hide();if(!this.markerSymbol){var _911=(this.markerSymbol=new _907());_911.setStyle(_907.STYLE_TARGET);_911._setDim(16,16,7);_911.setOutline(new _909(_908.STYLE_SOLID,new _8ff([0,255,255]),2,_909.CAP_ROUND,_909.JOIN_ROUND));_911.setColor(new _8ff([0,0,0,0]));}if(!this.lineSymbol){this.lineSymbol=new _908(_908.STYLE_SOLID,new _8ff([0,255,255]),2);}if(!this.fillSymbol){this.fillSymbol=new _90a(_90a.STYLE_NULL,new _908(_908.STYLE_SOLID,new _8ff([0,255,255]),2),new _8ff([0,0,0,0]));}},disableHighlight:function(map){var _912=this._highlighted;if(_912){_912.hide();map.graphics.remove(_912);delete this._highlighted;}this.markerSymbol=this.lineSymbol=this.fillSymbol=null;},showHighlight:function(){var _913=this.features&&this.features[this.selectedIndex];if(this._highlighted&&_913&&_913.geometry){this._highlighted.show();}},hideHighlight:function(){if(this._highlighted){this._highlighted.hide();}},updateHighlight:function(map,_914){var _915=_914.geometry,_916=this._highlighted;if(!_915||!_916){if(_916){_916.hide();}return;}_916.hide();if(!_916.getLayer()&&map){map.graphics.add(_916);}_916.setGeometry(_904.fromJson(_915.toJson()));var _917;switch(_915.type){case "point":case "multipoint":_917=this.markerSymbol;_917.setOffset(0,0);_917.setAngle(0);var lyr=_914.getLayer();if(lyr){var _918=lyr._getSymbol(_914),_919,_91a,xoff=0,yoff=0,_91b=0;if(_918){switch(_918.type){case "simplemarkersymbol":_919=_91a=(_918.size||0);break;case "picturemarkersymbol":_919=(_918.width||0);_91a=(_918.height||0);break;}xoff=_918.xoffset||0;yoff=_918.yoffset||0;_91b=_918.angle||0;}if(_919&&_91a){_917._setDim(_919+1,_91a+1,7);}_917.setOffset(xoff,yoff);_917.setAngle(_91b);}break;case "polyline":_917=this.lineSymbol;break;case "polygon":_917=this.fillSymbol;break;}_916.setSymbol(_917);},showClosestFirst:function(_91c){var _91d=this.features;if(_91d&&_91d.length){if(_91d.length>1){var i,_91e=Infinity,_91f=-1,geom,_920=_905.getLength,_921,_922=_91c.spatialReference,_923,_924;_91c=_91c.normalize();for(i=_91d.length-1;i>=0;i--){geom=_91d[i].geometry;if(!geom){continue;}_923=geom.spatialReference;_921=0;try{_924=(geom.type==="point")?geom:geom.getExtent().getCenter();_924=_924.normalize();if(_922&&_923&&!_922.equals(_923)&&_922._canProject(_923)){_924=_922.isWebMercator()?_906.geographicToWebMercator(_924):_906.webMercatorToGeographic(_924);}_921=_920(_91c,_924);}catch(e){}if(_921>0&&_921<_91e){_91e=_921;_91f=i;}}if(_91f>0){_91d.splice(0,0,_91d.splice(_91f,1)[0]);this.select(0);}}}else{if(this.deferreds){this._marked=_91c;}}},_unbind:function(dfd){var _925=_8fe.indexOf(this.deferreds,dfd);if(_925===-1){return;}this.deferreds.splice(_925,1);if(!this.deferreds.length){this.deferreds=null;return 2;}return 1;},_fireComplete:function(_926){var _927=this._marked;if(_927){this._marked=null;this.showClosestFirst(_927);}this.onDfdComplete(_926);},_updateFeatures:function(dfd,_928){if(dfd){if(this.deferreds){var res=this._unbind(dfd);if(!res){return;}if(_928&&_928 instanceof Error){this._fireComplete(_928);if(res===2){this.onSetFeatures();}return;}if(_928&&_928.length){if(!this.features){this.features=_928;this.count=_928.length;this.selectedIndex=0;this._fireComplete();if(res===2){this.onSetFeatures();}this.select(0);}else{var _929=_8fe.filter(_928,function(_92a){return _8fe.indexOf(this.features,_92a)===-1;},this);this.features=this.features.concat(_929);this.count=this.features.length;this._fireComplete();if(res===2){this.onSetFeatures();}}}else{this._fireComplete();if(res===2){this.onSetFeatures();}}}}else{this.features=_928;this.count=_928.length;this.selectedIndex=0;this.onSetFeatures();this.select(0);}}});if(has("extend-esri")){_901.PopupBase=_90b;}return _90b;});},"esri/renderers/UniqueValueRenderer":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/symbols/jsonUtils","esri/renderers/Renderer"],function(_92b,_92c,lang,has,_92d,_92e,_92f,_930){var _931=_92b(_930,{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(sym,attr,_932,_933,_934){this.values=[];this._symbols={};this.infos=[];if(sym&&!sym.declaredClass){var json=sym;sym=json.defaultSymbol;if(sym){this.defaultSymbol=_92f.fromJson(sym);}this.attributeField=json.field1;this.attributeField2=json.field2;this.attributeField3=json.field3;this.fieldDelimiter=json.fieldDelimiter;this.defaultLabel=json.defaultLabel;_92c.forEach(json.uniqueValueInfos,this._addValueInfo,this);}else{this.defaultSymbol=sym;this.attributeField=attr;this.attributeField2=_932;this.attributeField3=_933;this.fieldDelimiter=_934;}this._multiple=!!this.attributeField2;},addValue:function(_935,_936){var info=lang.isObject(_935)?_935:{value:_935,symbol:_936};this._addValueInfo(info);},removeValue:function(_937){var i=_92c.indexOf(this.values,_937);if(i===-1){return;}this.values.splice(i,1);delete this._symbols[_937];this.infos.splice(i,1);},getSymbol:function(_938){var _939=this.attributeField,_93a=_938.attributes,_93b,_93c,_93d;if(this._multiple){_93b=this.attributeField2;_93c=this.attributeField3;_93d=[];if(_939){_93d.push(_93a[_939]);}if(_93b){_93d.push(_93a[_93b]);}if(_93c){_93d.push(_93a[_93c]);}return this._symbols[_93d.join(this.fieldDelimiter||"")]||this.defaultSymbol;}else{_939=lang.isFunction(_939)?_939(_938):_93a[_939];return this._symbols[_939]||this.defaultSymbol;}},_addValueInfo:function(info){var _93e=info.value;this.values.push(_93e);this.infos.push(info);var _93f=info.symbol;if(_93f){if(!_93f.declaredClass){info.symbol=_92f.fromJson(_93f);}}this._symbols[_93e]=info.symbol;},toJson:function(){var _940=_92e.fixJson;return _940({type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:_92c.map(this.infos||[],function(info){info=lang.mixin({},info);info.symbol=info.symbol&&info.symbol.toJson();info.value=info.value+"";return _940(info);})});}});if(has("extend-esri")){lang.setObject("renderer.UniqueValueRenderer",_931,_92d);}return _931;});},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(lang,i18n,_941,_942,_943){var _944={};lang.setObject("dojo.number",_944);_944.format=function(_945,_946){_946=lang.mixin({},_946||{});var _947=i18n.normalizeLocale(_946.locale),_948=i18n.getLocalization("dojo.cldr","number",_947);_946.customs=_948;var _949=_946.pattern||_948[(_946.type||"decimal")+"Format"];if(isNaN(_945)||Math.abs(_945)==Infinity){return null;}return _944._applyPattern(_945,_949,_946);};_944._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;_944._applyPattern=function(_94a,_94b,_94c){_94c=_94c||{};var _94d=_94c.customs.group,_94e=_94c.customs.decimal,_94f=_94b.split(";"),_950=_94f[0];_94b=_94f[(_94a<0)?1:0]||("-"+_950);if(_94b.indexOf("%")!=-1){_94a*=100;}else{if(_94b.indexOf("‰")!=-1){_94a*=1000;}else{if(_94b.indexOf("¤")!=-1){_94d=_94c.customs.currencyGroup||_94d;_94e=_94c.customs.currencyDecimal||_94e;_94b=_94b.replace(/\u00a4{1,3}/,function(_951){var prop=["symbol","currency","displayName"][_951.length-1];return _94c[prop]||_94c.currency||"";});}else{if(_94b.indexOf("E")!=-1){throw new Error("exponential notation not supported");}}}}var _952=_944._numberPatternRE;var _953=_950.match(_952);if(!_953){throw new Error("unable to find a number expression in pattern: "+_94b);}if(_94c.fractional===false){_94c.places=0;}return _94b.replace(_952,_944._formatAbsolute(_94a,_953[0],{decimal:_94e,group:_94d,places:_94c.places,round:_94c.round}));};_944.round=function(_954,_955,_956){var _957=10/(_956||10);return (_957*+_954).toFixed(_955)/_957;};if((0.9).toFixed()==0){var _958=_944.round;_944.round=function(v,p,m){var d=Math.pow(10,-p||0),a=Math.abs(v);if(!v||a>=d){d=0;}else{a/=d;if(a<0.5||a>=0.95){d=0;}}return _958(v,p,m)+(v>0?d:-d);};}_944._formatAbsolute=function(_959,_95a,_95b){_95b=_95b||{};if(_95b.places===true){_95b.places=0;}if(_95b.places===Infinity){_95b.places=6;}var _95c=_95a.split("."),_95d=typeof _95b.places=="string"&&_95b.places.indexOf(","),_95e=_95b.places;if(_95d){_95e=_95b.places.substring(_95d+1);}else{if(!(_95e>=0)){_95e=(_95c[1]||[]).length;}}if(!(_95b.round<0)){_959=_944.round(_959,_95e,_95b.round);}var _95f=String(Math.abs(_959)).split("."),_960=_95f[1]||"";if(_95c[1]||_95b.places){if(_95d){_95b.places=_95b.places.substring(0,_95d);}var pad=_95b.places!==undefined?_95b.places:(_95c[1]&&_95c[1].lastIndexOf("0")+1);if(pad>_960.length){_95f[1]=_942.pad(_960,pad,"0",true);}if(_95e<_960.length){_95f[1]=_960.substr(0,_95e);}}else{if(_95f[1]){_95f.pop();}}var _961=_95c[0].replace(",","");pad=_961.indexOf("0");if(pad!=-1){pad=_961.length-pad;if(pad>_95f[0].length){_95f[0]=_942.pad(_95f[0],pad);}if(_961.indexOf("#")==-1){_95f[0]=_95f[0].substr(_95f[0].length-pad);}}var _962=_95c[0].lastIndexOf(","),_963,_964;if(_962!=-1){_963=_95c[0].length-_962-1;var _965=_95c[0].substr(0,_962);_962=_965.lastIndexOf(",");if(_962!=-1){_964=_965.length-_962-1;}}var _966=[];for(var _967=_95f[0];_967;){var off=_967.length-_963;_966.push((off>0)?_967.substr(off):_967);_967=(off>0)?_967.slice(0,off):"";if(_964){_963=_964;delete _964;}}_95f[0]=_966.reverse().join(_95b.group||",");return _95f.join(_95b.decimal||".");};_944.regexp=function(_968){return _944._parseInfo(_968).regexp;};_944._parseInfo=function(_969){_969=_969||{};var _96a=i18n.normalizeLocale(_969.locale),_96b=i18n.getLocalization("dojo.cldr","number",_96a),_96c=_969.pattern||_96b[(_969.type||"decimal")+"Format"],_96d=_96b.group,_96e=_96b.decimal,_96f=1;if(_96c.indexOf("%")!=-1){_96f/=100;}else{if(_96c.indexOf("‰")!=-1){_96f/=1000;}else{var _970=_96c.indexOf("¤")!=-1;if(_970){_96d=_96b.currencyGroup||_96d;_96e=_96b.currencyDecimal||_96e;}}}var _971=_96c.split(";");if(_971.length==1){_971.push("-"+_971[0]);}var re=_943.buildGroupRE(_971,function(_972){_972="(?:"+_943.escapeString(_972,".")+")";return _972.replace(_944._numberPatternRE,function(_973){var _974={signed:false,separator:_969.strict?_96d:[_96d,""],fractional:_969.fractional,decimal:_96e,exponent:false},_975=_973.split("."),_976=_969.places;if(_975.length==1&&_96f!=1){_975[1]="###";}if(_975.length==1||_976===0){_974.fractional=false;}else{if(_976===undefined){_976=_969.pattern?_975[1].lastIndexOf("0")+1:Infinity;}if(_976&&_969.fractional==undefined){_974.fractional=true;}if(!_969.places&&(_976<_975[1].length)){_976+=","+_975[1].length;}_974.places=_976;}var _977=_975[0].split(",");if(_977.length>1){_974.groupSize=_977.pop().length;if(_977.length>1){_974.groupSize2=_977.pop().length;}}return "("+_944._realNumberRegexp(_974)+")";});},true);if(_970){re=re.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(_978,_979,_97a,_97b){var prop=["symbol","currency","displayName"][_97a.length-1],_97c=_943.escapeString(_969[prop]||_969.currency||"");_979=_979?"[\\s\\xa0]":"";_97b=_97b?"[\\s\\xa0]":"";if(!_969.strict){if(_979){_979+="*";}if(_97b){_97b+="*";}return "(?:"+_979+_97c+_97b+")?";}return _979+_97c+_97b;});}return {regexp:re.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:_96d,decimal:_96e,factor:_96f};};_944.parse=function(_97d,_97e){var info=_944._parseInfo(_97e),_97f=(new RegExp("^"+info.regexp+"$")).exec(_97d);if(!_97f){return NaN;}var _980=_97f[1];if(!_97f[1]){if(!_97f[2]){return NaN;}_980=_97f[2];info.factor*=-1;}_980=_980.replace(new RegExp("["+info.group+"\\s\\xa0"+"]","g"),"").replace(info.decimal,".");return _980*info.factor;};_944._realNumberRegexp=function(_981){_981=_981||{};if(!("places" in _981)){_981.places=Infinity;}if(typeof _981.decimal!="string"){_981.decimal=".";}if(!("fractional" in _981)||/^0/.test(_981.places)){_981.fractional=[true,false];}if(!("exponent" in _981)){_981.exponent=[true,false];}if(!("eSigned" in _981)){_981.eSigned=[true,false];}var _982=_944._integerRegexp(_981),_983=_943.buildGroupRE(_981.fractional,function(q){var re="";if(q&&(_981.places!==0)){re="\\"+_981.decimal;if(_981.places==Infinity){re="(?:"+re+"\\d+)?";}else{re+="\\d{"+_981.places+"}";}}return re;},true);var _984=_943.buildGroupRE(_981.exponent,function(q){if(q){return "([eE]"+_944._integerRegexp({signed:_981.eSigned})+")";}return "";});var _985=_982+_983;if(_983){_985="(?:(?:"+_985+")|(?:"+_983+"))";}return _985+_984;};_944._integerRegexp=function(_986){_986=_986||{};if(!("signed" in _986)){_986.signed=[true,false];}if(!("separator" in _986)){_986.separator="";}else{if(!("groupSize" in _986)){_986.groupSize=3;}}var _987=_943.buildGroupRE(_986.signed,function(q){return q?"[-+]":"";},true);var _988=_943.buildGroupRE(_986.separator,function(sep){if(!sep){return "(?:\\d+)";}sep=_943.escapeString(sep);if(sep==" "){sep="\\s";}else{if(sep==" "){sep="\\s\\xa0";}}var grp=_986.groupSize,grp2=_986.groupSize2;if(grp2){var _989="(?:0|[1-9]\\d{0,"+(grp2-1)+"}(?:["+sep+"]\\d{"+grp2+"})*["+sep+"]\\d{"+grp+"})";return ((grp-grp2)>0)?"(?:"+_989+"|(?:0|[1-9]\\d{0,"+(grp-1)+"}))":_989;}return "(?:0|[1-9]\\d{0,"+(grp-1)+"}(?:["+sep+"]\\d{"+grp+"})*)";},true);return _987+_988;};return _944;});},"dojo/request/script":function(){define(["module","./watch","./util","../_base/array","../_base/lang","../on","../dom","../dom-construct","../has","../_base/window"],function(_98a,_98b,util,_98c,lang,on,dom,_98d,has,win){has.add("script-readystatechange",function(_98e,_98f){var _990=_98f.createElement("script");return typeof _990["onreadystatechange"]!=="undefined"&&(typeof _98e["opera"]==="undefined"||_98e["opera"].toString()!=="[object Opera]");});var mid=_98a.id.replace(/[\/\.\-]/g,"_"),_991=0,_992=has("script-readystatechange")?"readystatechange":"load",_993=/complete|loaded/,_994=this[mid+"_callbacks"]={},_995=[];function _996(id,url,_997){var doc=(_997||win.doc),_998=doc.createElement("script");_998.type="text/javascript";_998.src=url;_998.id=id;_998.async=true;_998.charset="utf-8";return doc.getElementsByTagName("head")[0].appendChild(_998);};function _999(id,_99a,_99b){_98d.destroy(dom.byId(id,_99a));if(_994[id]){if(_99b){_994[id]=function(){delete _994[id];};}else{delete _994[id];}}};function _99c(dfd){var _99d=dfd.response.options,_99e=_99d.ioArgs?_99d.ioArgs.frameDoc:_99d.frameDoc;_995.push({id:dfd.id,frameDoc:_99e});if(_99d.ioArgs){_99d.ioArgs.frameDoc=null;}_99d.frameDoc=null;};function _99f(dfd,_9a0){if(dfd.canDelete){_9a1._remove(dfd.id,_9a0.options.frameDoc,true);}};function _9a2(_9a3){if(_995&&_995.length){_98c.forEach(_995,function(_9a4){_9a1._remove(_9a4.id,_9a4.frameDoc);_9a4.frameDoc=null;});_995=[];}return _9a3.options.jsonp?!_9a3.data:true;};function _9a5(_9a6){return !!this.scriptLoaded;};function _9a7(_9a8){var _9a9=_9a8.options.checkString;return _9a9&&eval("typeof("+_9a9+") !== \"undefined\"");};function _9aa(_9ab,_9ac){if(this.canDelete){_99c(this);}if(_9ac){this.reject(_9ac);}else{this.resolve(_9ab);}};function _9a1(url,_9ad,_9ae){var _9af=util.parseArgs(url,util.deepCopy({},_9ad));url=_9af.url;_9ad=_9af.options;var dfd=util.deferred(_9af,_99f,_9a2,_9ad.jsonp?null:(_9ad.checkString?_9a7:_9a5),_9aa);lang.mixin(dfd,{id:mid+(_991++),canDelete:false});if(_9ad.jsonp){var _9b0=new RegExp("[?&]"+_9ad.jsonp+"=");if(!_9b0.test(url)){url+=_9b0+(_9ad.frameDoc?"parent.":"")+mid+"_callbacks."+dfd.id;}dfd.canDelete=true;_994[dfd.id]=function(json){_9af.data=json;dfd.handleResponse(_9af);};}if(util.notify){util.notify.emit("send",_9af,dfd.promise.cancel);}if(!_9ad.canAttach||_9ad.canAttach(dfd)){var node=_9a1._attach(dfd.id,url,_9ad.frameDoc);if(!_9ad.jsonp&&!_9ad.checkString){var _9b1=on(node,_992,function(evt){if(evt.type==="load"||_993.test(node.readyState)){_9b1.remove();dfd.scriptLoaded=evt;}});}}_98b(dfd);return _9ae?dfd:dfd.promise;};_9a1.get=_9a1;_9a1._attach=_996;_9a1._remove=_999;_9a1._callbacksProperty=mid+"_callbacks";return _9a1;});},"esri/layers/TileInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/lang","esri/SpatialReference","esri/geometry/Point","esri/layers/LOD"],function(_9b2,lang,_9b3,has,_9b4,_9b5,_9b6,_9b7,LOD){var _9b8=_9b2(null,{declaredClass:"esri.layers.TileInfo",constructor:function(json){lang.mixin(this,json);this.width=this.cols;this.height=this.rows;var sr=this.spatialReference,ori=this.origin;if(sr){sr=(this.spatialReference=new _9b6(sr.toJson?sr.toJson():sr));}if(ori){this.origin=new _9b7(ori.toJson?ori.toJson():ori);if(!ori.spatialReference&&sr){this.origin.setSpatialReference(new _9b6(sr.toJson()));}}this.lods=_9b3.map(this.lods,function(lod){return new LOD(lod);});},toJson:function(){return _9b5.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&_9b3.map(this.lods,function(lod){return lod.toJson();})});}});if(has("extend-esri")){lang.setObject("layers.TileInfo",_9b8,_9b4);}return _9b8;});},"esri/graphic":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/domUtils","esri/lang","esri/InfoTemplate","esri/geometry/jsonUtils","esri/symbols/jsonUtils"],function(_9b9,lang,has,_9ba,_9bb,_9bc,_9bd,_9be,_9bf){var _9c0=_9b9(null,{declaredClass:"esri.Graphic",constructor:function(json,_9c1,_9c2,_9c3){if(json&&!json.declaredClass){this.geometry=json.geometry?_9be.fromJson(json.geometry):null;this.symbol=json.symbol?_9bf.fromJson(json.symbol):null;this.attributes=json.attributes||null;this.infoTemplate=json.infoTemplate?new _9bd(json.infoTemplate):null;}else{this.geometry=json;this.symbol=_9c1;this.attributes=_9c2;this.infoTemplate=_9c3;}},_shape:null,_graphicsLayer:null,_visible:true,visible:true,getDojoShape:function(){return this._shape;},getLayer:function(){return this._graphicsLayer;},setGeometry:function(_9c4){this.geometry=_9c4;var gl=this._graphicsLayer;if(gl){gl._updateExtent(this);gl._draw(this,true);}return this;},setSymbol:function(_9c5,_9c6){var gl=this._graphicsLayer,_9c7=this._shape;this.symbol=_9c5;if(_9c5){this.symbol._stroke=this.symbol._fill=null;}if(gl){if(_9c6){if(_9c7){gl._removeShape(this);}}gl._draw(this,true);}return this;},setAttributes:function(_9c8){this.attributes=_9c8;return this;},setInfoTemplate:function(_9c9){this.infoTemplate=_9c9;return this;},_getEffInfoTemplate:function(){var _9ca=this.getLayer();return this.infoTemplate||(_9ca&&_9ca.infoTemplate);},getTitle:function(){var _9cb=this._getEffInfoTemplate();var _9cc=_9cb&&_9cb.title;if(lang.isFunction(_9cc)){_9cc=_9cc.call(_9cb,this);}else{if(lang.isString(_9cc)){var _9cd=this._graphicsLayer;var func=_9cd&&_9cd._getDateOpts;_9cc=_9bc.substitute(this.attributes,_9cc,{first:true,dateFormat:func&&func.call(_9cd)});}}return _9cc;},getContent:function(){var _9ce=this._getEffInfoTemplate();var _9cf=_9ce&&_9ce.content;if(lang.isFunction(_9cf)){_9cf=_9cf.call(_9ce,this);}else{if(lang.isString(_9cf)){var _9d0=this._graphicsLayer;var func=_9d0&&_9d0._getDateOpts;_9cf=_9bc.substitute(this.attributes,_9cf,{dateFormat:func&&func.call(_9d0)});}}return _9cf;},show:function(){this.visible=this._visible=true;var _9d1=this._shape,_9d2;if(_9d1){_9d2=_9d1.declaredClass.toLowerCase().indexOf("canvas")===-1?_9d1.getEventSource():null;if(_9d2){_9bb.show(_9d2);}}else{if(this._graphicsLayer){this._graphicsLayer._draw(this,true);}}return this;},hide:function(){this.visible=this._visible=false;var _9d3=this._shape,_9d4,_9d5;if(_9d3){_9d4=_9d3.declaredClass.toLowerCase().indexOf("canvas")===-1?_9d3.getEventSource():null;if(_9d4){_9bb.hide(_9d4);}else{_9d5=this._graphicsLayer;if(_9d5){_9d5._removeShape(this);}}}return this;},toJson:function(){var json={};if(this.geometry){json.geometry=this.geometry.toJson();}if(this.attributes){json.attributes=lang.mixin({},this.attributes);}if(this.symbol){json.symbol=this.symbol.toJson();}if(this.infoTemplate){json.infoTemplate=this.infoTemplate.toJson();}return json;}});if(has("extend-esri")){_9ba.Graphic=_9c0;}return _9c0;});},"esri/_coremap":function(){define(["require","dojo/_base/kernel","dojo/_base/declare","dojo/_base/connect","dojo/_base/Deferred","dojo/_base/lang","dojo/_base/array","dojo/_base/event","dojo/_base/unload","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/sniff","dijit/registry","dojox/gfx/matrix","esri/kernel","esri/config","esri/lang","esri/Evented","esri/fx","esri/deferredUtils","esri/tileUtils","esri/geometry/Point","esri/geometry/ScreenPoint","esri/geometry/Extent","esri/geometry/Rect","esri/geometry/mathUtils","esri/geometry/scaleUtils","esri/geometry/screenUtils","esri/geometry/webMercatorUtils","esri/layers/GraphicsLayer","esri/layers/TileInfo","esri/layers/LOD","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/OpenStreetMapLayer","esri/dijit/Popup","dojo/uacss"],function(_9d6,_9d7,_9d8,_9d9,_9da,lang,_9db,_9dc,_9dd,dom,_9de,_9df,_9e0,_9e1,_9e2,has,_9e3,_9e4,_9e5,_9e6,_9e7,_9e8,_9e9,_9ea,_9eb,_9ec,_9ed,_9ee,Rect,_9ef,_9f0,_9f1,_9f2,_9f3,_9f4,LOD,_9f5,_9f6,_9f7){var _9f8=_9f1.toMapPoint,_9f9=_9f1.toScreenPoint,dc=_9d9.connect,ddc=_9d9.disconnect,dh=lang.hitch,ds=_9e2.set,iOf=_9db.indexOf,_9fa=lang.mixin,uid=0,_9fb=_9e6.defaults.map,_9fc=1000000,_9fd=0.75,_9fe=0.25,_9ff=3,_a00=20,_a01=40;function _a02(_a03,_a04){var lods=_a03.lods;lods.sort(function(l1,l2){if(l1.scale>l2.scale){return -1;}else{if(l1.scale<l2.scale){return 1;}}return 0;});var _a05=[];lods=_9db.filter(lods,function(l){if(iOf(_a05,l.scale)===-1){_a05.push(l.scale);return true;}});var pl=(_a04.lods=[]),l;_9db.forEach(lods,function(lod,_a06){l=(pl[_a06]=new LOD(lod));l.level=_a06;});_a04.tileInfo=new _9f4(_9fa(_a03,{lods:pl}));};var _a07=_9d8([_9e8],{declaredClass:"esri._CoreMap",resizeDelay:300,invalidExtent:"Map does not have a valid extent.",invalidGeometry:"Geometry (wkid: ${geometry}) cannot be converted to spatial reference of the map (wkid: ${map})",unknownBasemap:"Unable to find basemap definition for: \"${basemapName}\". Try one of these: ${list}",invalidBasemap:"Unable to add basemap: \"${basemapName}\".",unknownLayerType:"Unknown basemap layer type: \"${type}\" found in basemap definition for: \"${basemapName}\".",constructor:function(_a08,_a09){this.registerConnectEvents({"basemap-change":["BasemapChange"],"extent-change":["ExtentChange","extent","delta","levelChange","lod"],"layer-add":["LayerAdd","layer"],"layer-add-result":["LayerAddResult","layer","error"],"layer-remove":["LayerRemove","layer"],"layer-reorder":["LayerReorder","layer","index"],"layer-resume":["LayerResume","layer"],"layer-suspend":["LayerSuspend","layer"],"layers-add-result":["LayersAddResult","layers"],"layers-removed":["LayersRemoved"],"layers-reordered":["LayersReordered","layerIds"],"load":["Load","map"],"pan":["Pan","extent","delta"],"pan-end":["PanEnd","extent","delta"],"pan-start":["PanStart","extent","screenPoint"],"reposition":["Reposition","x","y"],"resize":["Resize","extent","width","height"],"scale":["Scale","matrix","immediate"],"time-extent-change":["TimeExtentChange","timeExtent"],"unload":["Unload","map"],"update-end":["UpdateEnd","error"],"update-start":["UpdateStart"],"zoom":["Zoom","extent","zoomFactor","anchor"],"zoom-end":["ZoomEnd","extent","zoomFactor","anchor","level"],"zoom-start":["ZoomStart","extent","zoomFactor","anchor","level"]});_9fa(this,{_internalLayerIds:[],_layers:[],_layerDivs:[],_layerSize:0,_clickHandles:[],_connects:[]});_9fa(this,{_zoomAnimDiv:null,_zoomAnim:null,_layersDiv:null,_firstLayerId:null,_delta:null,_cursor:null,_ratioW:1,_ratioH:1,_params:null});_9fa(this,{cursor:null,layerIds:[],graphicsLayerIds:[],graphics:null,loaded:false});_9fa(this,{__panning:false,__zooming:false,__container:null,root:null,__LOD:null,__tileInfo:null,__visibleRect:null,__visibleDelta:null});this._rids=[];var cont=(this.container=dom.byId(_a08));var id=(this.id=_9de.get(cont,"id")||_9e3.getUniqueId(this.declaredClass));_9df.add(cont,"map");var box=_9e1.getContentBox(cont),dac=_9df.add,dcr=_9e0.create;this.position=new _9ed(0,0);this._reposition();var _a0a=(this.width=(box.w||_9fb.width));var _a0b=(this.height=box.h||_9fb.height);if(box.w===0){ds(cont,"width",_a0a+"px");}if(box.h===0){ds(cont,"height",_a0b+"px");}var _a0c=(this.root=dcr("div",{id:id+"_root",style:{width:_a0a+"px",height:_a0b+"px",direction:"ltr"}}));dac(_a0c,"container");var _a0d=(this.__container=dcr("div",{id:id+"_container"},_a0c));ds(_a0d,"position","absolute");dac(_a0d,"container");cont.appendChild(_a0c);var _a0e=(this._params=_9fa({slider:true,nav:false,zoom:-1,minZoom:-1,maxZoom:-1,scale:-1,minScale:0,maxScale:0,showInfoWindowOnClick:true,displayGraphicsOnPan:true,wrapAround180:true,fitExtent:false},_a09||{}));this.wrapAround180=_a0e.wrapAround180;if(_9e7.isDefined(_a0e.resizeDelay)){this.resizeDelay=_a0e.resizeDelay;}if(_a0e.lods){_a02({rows:512,cols:512,dpi:96,format:"JPEG",compressionQuality:75,origin:{x:-180,y:90},spatialReference:{wkid:4326},lods:_a0e.lods},_a0e);this.__tileInfo=_a0e.tileInfo;}var ext=(this.extent=_a0e.extent);this._extentUtil({mapCenter:_a0e.center,targetLevel:_a0e.zoom,targetScale:_a0e.scale});this.__visibleRect=new Rect(0,0,_a0a,_a0b);this.__visibleDelta=new Rect(0,0,_a0a,_a0b);var _a0f=(this._layersDiv=dcr("div",{id:id+"_layers"}));dac(_a0f,"layersDiv");_a0d.appendChild(_a0f);this._zoomAnimDiv=dcr("div",{style:{position:"absolute"}});if(_a0e.infoWindow){this.infoWindow=_a0e.infoWindow;}else{var iw=(this.infoWindow=new _9f7(_a0e.popupOptions,dcr("div")));iw.startup();iw._ootb=true;ds(iw.domNode,"zIndex",_a01);}this._zoomStartHandler=dh(this,this._zoomStartHandler);this._zoomingHandler=dh(this,this._zoomingHandler);this._zoomEndHandler=dh(this,this._zoomEndHandler);this._panningHandler=dh(this,this._panningHandler);this._panEndHandler=dh(this,this._panEndHandler);this._endTranslate=dh(this,this._endTranslate);_9dd.addOnWindowUnload(this,this.destroy);},_cleanUp:function(){var iw=this.infoWindow;if(iw){if(iw._ootb&&iw.destroy){iw.destroy();}else{iw.unsetMap(this);}delete this.infoWindow;}var cons=this._connects,i;for(i=cons.length-1;i>=0;i--){ddc(cons[i]);delete cons[i];}ddc(this._tsTimeExtentChange_connect);this.setInfoWindowOnClick(false);_9e0.destroy(this.root);this.root=null;},_addLayer:function(_a10,_a11,_a12){var id=(_a10.id=_a10.id||(_a10 instanceof _9f3?_9fb.graphicsLayerNamePrefix:_9fb.layerNamePrefix)+(uid++));this._layers[id]=_a10;var i,lyr;if(_a11===this.layerIds||_a11===this.graphicsLayerIds){i=this._layerSize;this._layerSize++;}_a10._isRefLayer=(_a12==="top");_a12=(!_9e7.isDefined(_a12)||_a12<0||_a12>_a11.length||_a12==="top")?_a11.length:_a12;if(i===0){this._firstLayerId=id;}if(!_a10._isRefLayer){while((lyr=this.getLayer(_a11[_a12-1]))&&lyr._isRefLayer){_a12--;}}_a11.splice(_a12,0,id);var _a13=dh(this,this._addLayerHandler),self=this,_a14=this._connects,_a15=function(){if(_a10.loaded){if(self._onLoadFix){self._onLoadFix=false;setTimeout(function(){_a13(_a10);},0);}else{_a13(_a10);}}else{self[id+"_addtoken_load"]=dc(_a10,"onLoad",self,"_addLayerHandler");self[id+"_addtoken_err"]=dc(_a10,"onError",self,function(_a16){_a13(_a10,_a16,_a11);});}};if(this.loaded||i===0||(_a10.loaded&&iOf(this.graphicsLayerIds,id)===-1)){_a15();}else{_a14.push(dc(this,"onLoad",_a15));}return _a10;},_addLayerHandler:function(_a17,_a18,_a19){var id=this.id,_a1a=_a17.id,_a1b=iOf(_a17 instanceof _9f3?this.graphicsLayerIds:this.layerIds,_a1a),_a1c=_a1b,_a1d=false,_a1e=this._params,_a1f,_a20,_a21,lods;ddc(this[_a1a+"_addtoken_load"]);ddc(this[_a1a+"_addtoken_err"]);if(_a18){delete this._layers[_a1a];if(_a1b!==-1){_a19.splice(_a1b,1);this.onLayerAddResult(_a17,_a18);}return;}if(_a1b===-1){_a1b=iOf(this._internalLayerIds,_a1a);_a1c=_a00+_a1b;_a1d=true;}if(_a1a===this._firstLayerId){_a20=_a17.spatialReference;_a21=(this.extent&&this.extent.spatialReference);if(_a21&&!_a21.equals(_a20)&&(_a17.tileInfo||!_a17.url)){_a21=null;}_a1f=(this.spatialReference=(_a21||_a20));this.wrapAround180=(this.wrapAround180&&_a1f&&_a1f._isWrappable())?true:false;if(_a17.tileInfo){if(!this.__tileInfo){_a02(_9fa({},_a17.tileInfo),_a1e);this.__tileInfo=_a1e.tileInfo;}else{lods=this.__tileInfo.lods;this.__tileInfo=_9fa({},_a17.tileInfo);this.__tileInfo.lods=lods;}}if(this.wrapAround180){var _a22=this.__tileInfo,info=_a1f._getInfo();if(!_a22||Math.abs(info.origin[0]-_a22.origin.x)>info.dx){this.wrapAround180=false;}if(this.wrapAround180&&_a22){_9eb._addFrameInfo(_a22,info);}}_a1e.units=_a17.units;lods=this.__tileInfo&&this.__tileInfo.lods;if(lods&&lods.length){var _a23=_a1e.minScale,_a24=_a1e.maxScale,_a25=-1,_a26=-1,_a27=false,_a28=false,i;for(i=0;i<lods.length;i++){if(_a23>0&&!_a27&&_a23>=lods[i].scale){_a25=lods[i].level;_a27=true;}if(_a24>0&&!_a28&&_a24>=lods[i].scale){_a26=(i>0)?lods[i-1].level:-1;_a28=true;}}if(_a1e.minZoom===-1){_a1e.minZoom=(_a23===0)?lods[0].level:_a25;}if(_a1e.maxZoom===-1){_a1e.maxZoom=(_a24===0)?lods[lods.length-1].level:_a26;}for(i=0;i<lods.length;i++){if(_a1e.minZoom===lods[i].level){_a1e.minScale=lods[i].scale;}if(_a1e.maxZoom===lods[i].level){_a1e.maxScale=lods[i].scale;}}}else{_a1e.minZoom=_a1e.maxZoom=_a1e.zoom=-1;}}if(_a17 instanceof _9f3){if(!this._gc){this._gc=new _9f3._GraphicsContainer();var gc=this._gc._setMap(this,this._layersDiv);gc.id=id+"_gc";}var _a29=_a17._setMap(this,this._gc._surface);_a29.id=id+"_"+_a1a;this._layerDivs[_a1a]=_a29;this._reorderLayers(this.graphicsLayerIds);if(_a1e.showInfoWindowOnClick){this._clickHandles.push(dc(_a17,"onClick",this,"_gClickHandler"));}}else{var _a2a=_a17._setMap(this,this._layersDiv,_a1c,this.__LOD);_a2a.id=id+"_"+_a1a;this._layerDivs[_a1a]=_a2a;this._reorderLayers(this.layerIds);if(!_a1d&&_a17.declaredClass.indexOf("VETiledLayer")!==-1){this._onBingLayerAdd(_a17);}}if(_a1a===this._firstLayerId){this.graphics=new _9f3({id:id+"_graphics",displayOnPan:_a1e.displayGraphicsOnPan});this._addLayer(this.graphics,this._internalLayerIds,_a00);}if(_a17===this.graphics){var _a2b,_a2c=this._layers[this._firstLayerId],_a2d,zoom=_a1e.zoom,_a2e=_a1e.scale,_a2f=_a1e.center,_a30=_a2c.initialExtent||_a2c.fullExtent;this._firstLayerId=null;if(this.extent){this.extent=this._convertGeometry(this,this.extent);}if(!this.extent&&_a30){if(_a2f){_a2f=this._convertGeometry(_a30,_a2f);}if(_a2f){_a30=_a30.centerAt(_a2f);_a2f=null;}}_a2d=this.extent||_a30;if(_a2d){if(zoom>-1){_a2d=this.__getExtentForLevel(zoom,null,_a2d).extent;}else{if(_a2e>0){_a2d=_9f0.getExtentForScale(this,_a2e,_a2d);}}}if(!_a2d){console.log("Map: "+this.invalidExtent);return;}_a2b=this._fixExtent(_a2d,_a1e.fitExtent);this.extent=_a2b.extent;this.__LOD=_a2b.lod;this.__setExtent(this.extent,null,null,_a1e.fitExtent);this.loaded=true;this.infoWindow.setMap(this);this.onLoad(this);}if(!_a1d){this.onLayerAdd(_a17);this.onLayerAddResult(_a17);}ddc(this[_a1a+"_addLayerHandler_connect"]);},_convertGeometry:function(host,_a31){var _a32=host&&host.spatialReference,inSR=_a31&&_a31.spatialReference;if(_a32&&inSR&&!_a32.equals(inSR)){if(_a32._canProject(inSR)){if(_a32.isWebMercator()){_a31=_9f2.geographicToWebMercator(_a31);}else{if(_a32.wkid===4326){_a31=_9f2.webMercatorToGeographic(_a31,true);}}}else{console.log("Map: "+_9e7.substitute({geometry:inSR.wkid||inSR.wkt,map:_a32.wkid||_a32.wkt},this.invalidGeometry));_a31=null;}}return _a31;},_reorderLayers:function(_a33){var _a34=this.onLayerReorder,djp=_9e0.place,_a35=this._layerDivs,_a36=this._layers,gcES=this._gc?this._gc._surface.getEventSource():null;if(_a33===this.graphicsLayerIds){_9db.forEach(_a33,function(id,i){var _a37=_a35[id];if(_a37){djp(_a37.getEventSource(),gcES,i);_a34(_a36[id],i);}});}else{var g=this.graphics,gId=g?g.id:null,_a38=this._layersDiv,_a39;_9db.forEach(_a33,function(id,i){_a39=_a35[id];if(id!==gId&&_a39){djp(_a39,_a38,i);_a34(_a36[id],i);}});if(gcES){gcES=(has("ie")<9)?gcES.parentNode:gcES;djp(gcES,gcES.parentNode,_a33.length);}}this.onLayersReordered([].concat(_a33));},_zoomStartHandler:function(){this.__zoomStart(this._zoomAnimDiv.startingExtent,this._zoomAnimDiv.anchor);},_zoomingHandler:function(rect){var rl=parseFloat(rect.left),rt=parseFloat(rect.top),_a3a=new _9ee(rl,rt-parseFloat(rect.height),rl+parseFloat(rect.width),rt,this.spatialReference),_a3b=this.extent.getWidth()/_a3a.getWidth();this.__zoom(_a3a,_a3b,this._zoomAnimDiv.anchor);},_zoomEndHandler:function(){var _a3c=this._zoomAnimDiv,_a3d=_a3c.extent,_a3e=this.extent.getWidth()/_a3d.getWidth();var _a3f=_a3c.anchor,_a40=_a3c.newLod,_a41=_a3c.levelChange;_a3c.extent=_a3c.anchor=_a3c.levelChange=_a3c.startingExtent=_a3c.newLod=this._delta=this._zoomAnim=null;this.__zoomEnd(_a3d,_a3e,_a3f,_a40,_a41);},_panningHandler:function(_a42){if(isNaN(parseFloat(_a42.left))||isNaN(parseFloat(_a42.top))){var _a43=Math.round,node=this._panAnim.node;_a42.left=(-1*(this._delta.x-_a43(this.width/2)))+"px";_a42.top=(-1*(this._delta.y-_a43(this.height/2)))+"px";_9e2.set(node,"left",_a42.left);_9e2.set(node,"top",_a42.top);}var d=new _9ed(parseFloat(_a42.left),parseFloat(_a42.top)),dm=this.toMap(d);this.onPan(this.extent.offset(dm.x,dm.y),d);},_panEndHandler:function(node){this.__panning=false;var _a44=Math.round,_a45=new _9ed(-_a44(parseFloat(node.style.left)),-_a44(parseFloat(node.style.top))),dx=_a45.x,dy=_a45.y,_a46=this.__visibleRect,_a47=this.__visibleDelta;_a46.x+=-dx;_a46.y+=-dy;_a47.x+=-dx;_a47.y+=-dy;ds(this._zoomAnimDiv,{left:"0px",top:"0px"});var _a48=this.extent,rw=this._ratioW,rh=this._ratioH;_a48=new _9ee(_a48.xmin+(dx/rw),_a48.ymin-(dy/rh),_a48.xmax+(dx/rw),_a48.ymax-(dy/rh),this.spatialReference);_a45.setX(-_a45.x);_a45.setY(-_a45.y);this._delta=this._panAnim=null;this._updateExtent(_a48);this.onPanEnd(_a48,_a45);this._fireExtChg([_a48,_a45,false,this.__LOD]);},_fixExtent:function(_a49,fit){var _a4a=this._reshapeExtent(_a49),_a4b=1+_9fe;while(fit===true&&(_a4a.extent.getWidth()<_a49.getWidth()||_a4a.extent.getHeight()<_a49.getHeight())&&_a4a.lod.level>0&&_a4b<=_9ff){_a4a=this._reshapeExtent(_a49.expand(_a4b));_a4b+=_9fe;}return _a4a;},_getFrameWidth:function(){var _a4c=-1,info=this.spatialReference._getInfo();if(this.__LOD){var _a4d=this.__LOD._frameInfo;if(_a4d){_a4c=_a4d[3];}}else{if(info){_a4c=Math.round((2*info.valid[1])/(this.extent.getWidth()/this.width));}}return _a4c;},_reshapeExtent:function(_a4e){var w=_a4e.getWidth(),h=_a4e.getHeight(),r=w/h,_a4f=this.width/this.height,dw=0,dh=0;if(this.width>this.height){if(w>h){if(_a4f>r){dw=(h*_a4f)-w;}else{dh=(w/_a4f)-h;}}else{if(w<h){dw=(h*_a4f)-w;}else{dw=(h*_a4f)-w;}}}else{if(this.width<this.height){if(w>h){dh=(w/_a4f)-h;}else{if(w<h){if(_a4f>r){dw=(h*_a4f)-w;}else{dh=(w/_a4f)-h;}}else{dh=(w/_a4f)-h;}}}else{if(w<h){dw=h-w;}else{if(w>h){dh=(w/_a4f)-h;}}}}if(dw){_a4e.xmin-=dw/2;_a4e.xmax+=dw/2;}if(dh){_a4e.ymin-=dh/2;_a4e.ymax+=dh/2;}return this._getAdjustedExtent(_a4e);},_getAdjustedExtent:function(_a50){if(this.__tileInfo){return _9eb.getCandidateTileInfo(this,this.__tileInfo,_a50);}else{var _a51=_9f0.getScale(this,_a50),_a52=this.getMinScale(),_a53=this.getMaxScale(),_a54=!_a52||(_a51<=_a52),_a55=!_a53||(_a51>=_a53);if(!_a54){_a50=_9f0.getExtentForScale(this,_a52,_a50);}else{if(!_a55){_a50=_9f0.getExtentForScale(this,_a53,_a50);}}return {extent:_a50};}},_gClickHandler:function(evt){var _a56=evt.graphic,iw=this.infoWindow;if(_a56._getEffInfoTemplate()&&iw){_9dc.stop(evt);var _a57=_a56.geometry,_a58=(_a57&&_a57.type==="point")?_a57:evt.mapPoint;iw.setTitle(_a56.getTitle());iw.setContent(_a56.getContent());iw.show(_a58);}},_onBingLayerAdd:function(_a59){this["__"+_a59.id+"_vis_connect"]=_9d9.connect(_a59,"onVisibilityChange",this,"_toggleBingLogo");this._toggleBingLogo(_a59.visible);},_onBingLayerRemove:function(_a5a){_9d9.disconnect(this["__"+_a5a.id+"_vis_connect"]);delete this["__"+_a5a.id+"_vis_connect"];var _a5b=this.layerIds;var _a5c=_9db.some(_a5b,function(_a5d){var _a5e=this._layers[_a5d];return _a5e&&_a5e.visible&&_a5e.declaredClass.indexOf("VETiledLayer")!==-1;},this);this._toggleBingLogo(_a5c);},_toggleBingLogo:function(_a5f){if(_a5f&&!this._bingLogo){var _a60={left:(this._mapParams&&this._mapParams.nav?"25px":"")};if(has("ie")===6){_a60.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true', sizingMethod='crop', src='"+_9d6.toUrl("esri")+"/images/map/bing-logo-lg.png"+"')";}var _a61=this._bingLogo=_9e0.create("div",{style:_a60},this.root);_9df.add(_a61,"bingLogo-lg");}else{if(!_a5f&&this._bingLogo){_9e0.destroy(this._bingLogo);delete this._bingLogo;}}},__panStart:function(x,y){var _a62=this._zoomAnim,_a63=this._panAnim;if(_a62&&_a62._active){_a62.stop();_a62._fire("onEnd",[_a62.node]);}else{if(_a63&&_a63._active){_a63.stop();this._panAnim=null;var rect=_a63.curve.getValue(_a63._getStep()),rl=Math.round(parseFloat(rect.left)),rt=Math.round(parseFloat(rect.top)),drag=this.navigationManager._dragOrigin;this.__pan(rl,rt);if(drag){drag.x-=rl;drag.y-=rt;}return;}}this.__panning=true;this.onPanStart(this.extent,new _9ed(x,y));},__pan:function(dx,dy){var _a64=this.extent,rw=this._ratioW,rh=this._ratioH;this.onPan(new _9ee(_a64.xmin-(dx/rw),_a64.ymin+(dy/rh),_a64.xmax-(dx/rw),_a64.ymax+(dy/rh),this.spatialReference),new _9ed(dx,dy));},__panEnd:function(dx,dy){var _a65=this.__visibleRect,_a66=this.__visibleDelta;_a65.x+=dx;_a65.y+=dy;_a66.x+=dx;_a66.y+=dy;var d=new _9ed(dx,dy),_a67=this.extent,rw=this._ratioW,rh=this._ratioH;_a67=new _9ee(_a67.xmin-(dx/rw),_a67.ymin+(dy/rh),_a67.xmax-(dx/rw),_a67.ymax+(dy/rh),this.spatialReference);this.__panning=false;this._updateExtent(_a67);this.onPanEnd(_a67,d);this._fireExtChg([_a67,d,false,this.__LOD]);},__zoomStart:function(_a68,_a69){this.__zooming=true;this.onZoomStart(_a68,1,_a69,this.__LOD?this.__LOD.level:null);},__zoom:function(_a6a,_a6b,_a6c){this.onZoom(_a6a,_a6b,_a6c);},__zoomEnd:function(_a6d,_a6e,_a6f,lod,_a70){ds(this._layersDiv,{left:"0px",top:"0px"});this._delta=new _9ed(0,0);this.__visibleRect.x=(this.__visibleRect.y=0);_a6d=new _9ee(_a6d);this.__LOD=lod;this._ratioW=this.width/_a6d.getWidth();this._ratioH=this.height/_a6d.getHeight();var _a71=this._delta;this._delta=null;this.__zooming=false;this._updateExtent(_a6d,_a70);this.onZoomEnd(_a6d,_a6e,_a6f,lod?lod.level:null);this._fireExtChg([_a6d,_a71,_a70,lod]);},_extentUtil:function(zoom,pan,_a72,fit,_a73){var dfd=new _9da(),_a74,_a75,_a76,_a77,_a78,_a79,_a7a,_a7b,dx,dy,_a7c=this.width,_a7d=this.height,_a7e,_a7f,_a80;if(zoom){_a74=zoom.numLevels;_a75=zoom.targetLevel;_a7e=_9e7.isDefined(_a75);_a76=zoom.factor;_a77=zoom.mapAnchor;_a78=zoom.screenAnchor;_a79=zoom.mapCenter;_a7f=zoom.levelOrFactor;_a7a=zoom.targetScale;_a7b=_9e7.isDefined(_a7a)&&_a7a>0;}if(pan){dx=pan.dx;dy=pan.dy;_a79=pan.mapCenter;}if(lang.isArray(_a79)){_a79=new _9ec(_a79);}var _a81=this._panAnim,_a82=this._stopAnim(),_a83=_a82?_a82.divExtent:this.extent,_a84=this.__tileInfo,xmin,ymin,ewd,eht,_a85=this._params;if(!this.loaded){if(_a72){if(_a83){_a72=this._convertGeometry(_a83,_a72);}if(_a72){this.extent=_a72;_a85.zoom=_a85.scale=-1;_a85.center=null;}}else{if(_a79||_a7e||_a7b){if(_a79){if(_a83){_a79=this._convertGeometry(_a83,_a79);if(_a79){this.extent=_a83.centerAt(_a79);_a85.center=null;}}else{_a85.center=_a79;}}if(_a7e&&_a75>-1){_a85.zoom=_a75;_a85.scale=-1;}else{if(_a7b){_a85.scale=_a7a;_a85.zoom=-1;}}}}dfd.resolve();return dfd;}if(_a79){_a79=this._convertGeometry(this,_a79);if(!_a79){dfd.reject();return dfd;}}if(_a77){_a77=this._convertGeometry(this,_a77);if(!_a77){dfd.reject();return dfd;}}if(_a72){_a72=this._convertGeometry(this,_a72);if(!_a72){dfd.reject();return dfd;}}if(_a81&&_a77&&_a78){_a77=_9f8(this.extent,_a7c,_a7d,_a78);}if(_a82&&_a77&&_a78){_a77=_9f8(_a82.divExtent,_a7c,_a7d,_a78);}if(_a7e){if(_a84){var _a86=this.getMinZoom(),_a87=this.getMaxZoom();if(_a75<_a86){_a75=_a86;}else{if(_a75>_a87){_a75=_a87;}}_a74=_a75-(_a82?_a82.level:this.getLevel());}else{_a74=_a75>0?-1:1;_a80=_a7f?_a75:null;}}if(_a72){}else{if(_9e7.isDefined(_a74)){var size;if(_a84){var _a88=_a82?_a82.level:this.getLevel();size=this.__getExtentForLevel(_a88+_a74,_a79,_a83).extent;}else{var temp=_a82?_a82.end:this.extent;size=temp.expand(_a80||(_a74>0?0.5*_a74:2*-_a74));if(_a80&&_a79){size=size.centerAt(_a79);}}if(size){if(_a79){_a72=size;}else{var _a89=_a77||_a83.getCenter(),ymax=_a83.ymax-((size.getHeight()-_a83.getHeight())*(_a89.y-_a83.ymax)/_a83.getHeight());xmin=_a83.xmin-((size.getWidth()-_a83.getWidth())*(_a89.x-_a83.xmin)/_a83.getWidth());_a72=new _9ee(xmin,ymax-size.getHeight(),xmin+size.getWidth(),ymax,this.spatialReference);}}}else{if(_a7b){_a72=_9f0.getExtentForScale(this,_a7a,_a83);}else{if(_9e7.isDefined(_a76)){_a72=_a83.expand(_a76);}else{if(dx||dy){if(_a82){var end=_a82.end,c1=end.getCenter(),c2=_9f9(end,_a7c,_a7d,c1);c2.x+=dx;c2.y+=dy;c2=_9f8(end,_a7c,_a7d,c2);_a72=end.offset(c2.x-c1.x,c2.y-c1.y);}else{var _a8a=new _9ed((_a7c/2)+dx,(_a7d/2)+dy),_a8b=_9f8(_a83,_a7c,_a7d,_a8a);ewd=_a83.getWidth();eht=_a83.getHeight();xmin=_a8b.x-(ewd/2);ymin=_a8b.y-(eht/2);_a72=new _9ee(xmin,ymin,xmin+ewd,ymin+eht,this.spatialReference);}}}}}}if(!_a72){if(_a79){var ext=_a82?_a82.end:_a83;ewd=ext.getWidth();eht=ext.getHeight();xmin=_a79.x-(ewd/2);ymin=_a79.y-(eht/2);_a72=new _9ee(xmin,ymin,xmin+ewd,ymin+eht,this.spatialReference);}else{if(_a82){_a72=_a82.end;}}}if(_a72){if(this._extentDfd&&this._extentDfd.fired===-1){this._extentDfd.reject();}this._extentDfd=dfd;this.__setExtent(_a72,null,_a78,fit,_a82,_a73);}else{dfd.reject();}return dfd;},__setExtent:function(_a8c,_a8d,_a8e,fit,_a8f,_a90){try{if(this._firstLayerId){this.extent=_a8c;return;}var _a91=true,sr=this.spatialReference,ext=_a8f?_a8f.divExtent:this.extent,_a92=this._fixExtent(_a8c,fit||false);_a8c=_a92.extent;var _a93=_a8c.getWidth(),_a94=_a8c.getHeight(),_a95=Math.round;if(ext){var tw=_a95(ext.getWidth()*_9fc),w=_a95(_a93*_9fc),th=_a95(ext.getHeight()*_9fc),h=_a95(_a94*_9fc);_a91=(tw!==w)||(th!==h);}var _a96,end,_a97,_a98,_a99=_a8f&&_a8f.rect,_a9a=_a8f&&_a8f.divExtent;if(_9fb.zoomDuration&&_a91&&ext){_a9a=_a9a||new _9ee(ext);_a99=_a99||{left:ext.xmin,top:ext.ymax,width:ext.getWidth(),height:ext.getHeight()};end={left:_a8c.xmin,top:_a8c.ymax,width:_a93,height:_a94};_a97=_a99.width/end.width;_a98=_a99.height/end.height;var mtl=new _9ec(_a8c.xmin,_a8c.ymax,sr),mbl=new _9ec(_a8c.xmin,_a8c.ymin,sr),etl=new _9ec(this.extent.xmin,this.extent.ymax,sr),ebl=new _9ec(this.extent.xmin,this.extent.ymin,sr);_a96=_9ef.getLineIntersection(etl,mtl,ebl,mbl,sr);if(!_a96&&!_a8f){_a91=false;}}this._ratioW=this.width/_a93;this._ratioH=this.height/_a94;var _a9b=this._zoomAnimDiv;if(_a91){ds(this._layersDiv,{left:"0px",top:"0px"});_a8d=new _9ed(0,0);this.__visibleRect.x=(this.__visibleRect.y=0);if(_a99&&end){this._delta=_a8d;_a9b.id="_zAD";_a9b.startingExtent=_a9a;_a9b.extent=_a8c;_a9b.levelChange=_a91;_a9b.newLod=_a92.lod;if(_a8e){_a9b.anchor=_a8e;}else{if(!_a96&&_a8f){_a9b.anchor=_a8f.anchor;}else{_a9b.anchor=_9f9(this.extent,this.width,this.height,_a96);}}this._zoomAnim=_9e9.resize({node:_a9b,start:_a99,end:end,duration:_9fb.zoomDuration,rate:_9fb.zoomRate,beforeBegin:!_a8f?this._zoomStartHandler:null,onAnimate:this._zoomingHandler,onEnd:this._zoomEndHandler}).play();this._fireOnScale(this.extent.getWidth()/_a8c.getWidth(),_a9b.anchor);}else{this._updateExtent(_a8c,_a91);this._fireExtChg([this.extent,_a8d,_a91,(this.__LOD=_a92.lod)]);}}else{if(!this.__panning){if(this.loaded===false||_a90){this._updateExtent(_a8c,_a91);this._fireExtChg([this.extent,_a8d,_a91,(this.__LOD=_a92.lod)]);}else{this.__panning=true;_a99=new Rect(0,0,this.width,this.height,this.spatialReference).getCenter();_a99.x=_a95(_a99.x);_a99.y=_a95(_a99.y);this.onPanStart(this.extent,new _9ed(0,0));var _a9c=(this._delta=this.toScreen(_a8c.getCenter()));this._panAnim=_9e9.slideTo({node:_a9b,left:_a99.x-_a9c.x,top:_a99.y-_a9c.y,duration:_9fb.panDuration,rate:_9fb.panRate,onAnimate:this._panningHandler,onEnd:this._panEndHandler});this._panAnim.play();}}}}catch(e){console.log(e.stack);console.error(e);}},_fireOnScale:function(_a9d,_a9e,_a9f){if(this.navigationMode==="css-transforms"){var vd=this.__visibleDelta;this.onScale(_9e4.scaleAt(_a9d,{x:-1*((this.width/2)-(_a9e.x-vd.x)),y:-1*((this.height/2)-(_a9e.y-vd.y))}),_a9f);}},_stopAnim:function(){var _aa0=this._zoomAnim,_aa1=this._panAnim;if(_aa0&&_aa0._active){_aa0.stop();var rect=_aa0.curve.getValue(_aa0._getStep()),rl=parseFloat(rect.left),rt=parseFloat(rect.top),node=_aa0.node;return {anchor:node.anchor,start:node.startingExtent,end:node.extent,level:node.newLod&&node.newLod.level,rect:rect,divExtent:new _9ee(rl,rt-parseFloat(rect.height),rl+parseFloat(rect.width),rt,this.spatialReference)};}else{if(_aa1&&_aa1._active){_aa1.stop();_aa1._fire("onEnd",[_aa1.node]);}}},__getExtentForLevel:function(_aa2,_aa3,_aa4){var ti=this.__tileInfo,lods=ti&&ti.lods;_aa2=_9e7.isDefined(_aa2)?_aa2:0;_aa4=_aa4||this.extent;_aa3=_aa3||(_aa4&&_aa4.getCenter());if(lods){if(!_aa3){console.log("Map: "+this.invalidExtent);return;}var _aa5=this.getMinZoom(),_aa6=this.getMaxZoom();if(_aa2>_aa6){_aa2=_aa6;}if(_aa2<_aa5){_aa2=_aa5;}var lod=lods[_aa2],_aa7=this.width*lod.resolution/2,_aa8=this.height*lod.resolution/2;return {extent:new _9ee(_aa3.x-_aa7,_aa3.y-_aa8,_aa3.x+_aa7,_aa3.y+_aa8,_aa3.spatialReference),lod:lod};}else{if(!_aa4){console.log("Map: "+this.invalidExtent);return;}_aa2=(!_aa2||_aa2<1)?1:_aa2;return {extent:_aa4.expand(_aa2).centerAt(_aa3)};}},_jobs:0,_incr:function(){if((++this._jobs)===1){this.updating=true;this.onUpdateStart();}},_decr:function(){var _aa9=--this._jobs;if(!_aa9){this.updating=false;this.onUpdateEnd();}else{if(_aa9<0){this._jobs=0;}}},_fireEvent:function(_aaa,args){if(this[_aaa]){this[_aaa].apply(this,args);}},_updateExtent:function(_aab,_aac){this.extent=_aab;if(_aac){this._setClipRect();}var _aad=this.spatialReference;if(_aad){if(_aad.isWebMercator()){this.geographicExtent=_9f2.webMercatorToGeographic(this._getAvailExtent(),true);}else{if(_aad.wkid===4326){this.geographicExtent=new _9ee(this._getAvailExtent().toJson());}}}},_fireExtChg:function(args){this._fireEvent("onExtentChange",args);var dfd=this._extentDfd;if(dfd){delete this._extentDfd;dfd.resolve();}},onUpdateStart:function(){},onUpdateEnd:function(){},onLoad:function(){this._setClipRect();},onUnload:function(){},onExtentChange:function(a,b,_aae){},onTimeExtentChange:function(){},onLayerAdd:function(){},onLayerAddResult:function(){},onLayersAddResult:function(){},onLayerRemove:function(){},onLayersRemoved:function(){},onLayerReorder:function(){},onLayersReordered:function(){},onLayerSuspend:function(){},onLayerResume:function(){},onPanStart:function(){},onPan:function(){},onPanEnd:function(){},onScale:function(){},onZoomStart:function(){},onZoom:function(){},onZoomEnd:function(){},onResize:function(){this._setClipRect();},onReposition:function(){},destroy:function(){if(!this._destroyed){this.removeAllLayers();this._cleanUp();if(this._gc){this._gc._cleanUp();}this._destroyed=true;this.onUnload(this);}},setCursor:function(_aaf){ds(this.__container,"cursor",(this.cursor=_aaf));},setMapCursor:function(c){this.setCursor((this._cursor=c));},resetMapCursor:function(){this.setCursor(this._cursor);},setInfoWindow:function(_ab0){var iw=this.infoWindow;if(iw){iw.unsetMap(this);}this.infoWindow=_ab0;if(this.loaded&&_ab0){_ab0.setMap(this);}},setInfoWindowOnClick:function(_ab1){var _ab2=this._params;if(_ab1){if(!_ab2.showInfoWindowOnClick){var _ab3=[this.graphics].concat(_9db.map(this.graphicsLayerIds,this.getLayer,this));_9db.map(_ab3,function(_ab4){if(_ab4&&_ab4.loaded){this._clickHandles.push(dc(_ab4,"onClick",this,"_gClickHandler"));}},this);}}else{_9db.forEach(this._clickHandles,ddc);this._clickHandles=[];}_ab2.showInfoWindowOnClick=_ab1;},getInfoWindowAnchor:function(pt){return (this.infoWindow&&this.infoWindow._getAnchor&&this.infoWindow._getAnchor(pt))||"upperright";},toScreen:function(pt,_ab5){return _9f9(this.extent,this.width,this.height,pt,_ab5);},toMap:function(pt){return _9f8(this.extent,this.width,this.height,pt);},addLayer:function(_ab6,_ab7){if(_ab6&&!this.getLayer(_ab6.id)){this._addLayer(_ab6,_ab6 instanceof _9f3?this.graphicsLayerIds:this.layerIds,_ab7);}return _ab6;},addLayers:function(_ab8){var _ab9=[],_aba=_ab8.length,_abb,i,len=_ab8.length;var _abc=function(_abd,_abe){if(_9db.indexOf(_ab8,_abd)!==-1){_aba--;_ab9.push({"layer":_abd,"success":!_abe,"error":_abe});if(!_aba){_9d9.disconnect(_abb);this.onLayersAddResult(_ab9);}}};_abb=_9d9.connect(this,"onLayerAddResult",_abc);for(i=0;i<len;i++){this.addLayer(_ab8[i]);}return this;},removeLayer:function(_abf,_ac0){var id=_abf.id,ids=_abf instanceof _9f3?this.graphicsLayerIds:this.layerIds,i=iOf(ids,id);if(i>=0){ids.splice(i,1);if(_abf instanceof _9f3){ddc(this["_gl_"+_abf.id+"_click_connect"]);if(_abf.loaded){_abf._unsetMap(this,this._gc._surface);}}else{if(_abf.loaded){_abf._unsetMap(this,this._layersDiv);if(_abf.declaredClass.indexOf("VETiledLayer")!==-1){this._onBingLayerRemove(_abf);}}}delete this._layers[id];delete this._layerDivs[id];if(!_ac0){this._reorderLayers(ids);}this.onLayerRemove(_abf);}},removeAllLayers:function(){var ids=this.layerIds,i;for(i=ids.length-1;i>=0;i--){this.removeLayer(this._layers[ids[i]],1);}ids=this.graphicsLayerIds;for(i=ids.length-1;i>=0;i--){this.removeLayer(this._layers[ids[i]],1);}this.onLayersRemoved();},reorderLayer:function(_ac1,_ac2){if(lang.isString(_ac1)){_9d7.deprecated(this.declaredClass+": "+"Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).",null,"v2.0");_ac1=this.getLayer(_ac1);}var id=_ac1.id,i,ids=_ac1 instanceof _9f3?this.graphicsLayerIds:this.layerIds;if(_ac2<0){_ac2=0;}else{if(_ac2>=ids.length){_ac2=ids.length-1;}}i=iOf(ids,id);if(i===-1||i===_ac2){return;}ids.splice(i,1);ids.splice(_ac2,0,id);this._reorderLayers(ids);},getLayer:function(id){return this._layers[id];},setExtent:function(_ac3,fit){_ac3=new _9ee(_ac3.toJson());var _ac4=_ac3.getWidth(),_ac5=_ac3.getHeight(),dfd;if(_ac4===0&&_ac5===0){dfd=this.centerAt(new _9ec({x:_ac3.xmin,y:_ac3.ymin,spatialReference:_ac3.spatialReference&&_ac3.spatialReference.toJson()}));}else{dfd=this._extentUtil(null,null,_ac3,fit);}return dfd;},centerAt:function(_ac6){return this._extentUtil(null,{mapCenter:_ac6});},centerAndZoom:function(_ac7,_ac8){return this._extentUtil({targetLevel:_ac8,mapCenter:_ac7,levelOrFactor:true});},getScale:function(){return this.__LOD?this.__LOD.scale:_9f0.getScale(this);},getMinScale:function(){return this._params.minScale;},getMaxScale:function(){return this._params.maxScale;},setScale:function(_ac9){return this._extentUtil({targetScale:_ac9});},getLayersVisibleAtScale:function(_aca){var _acb=[];_aca=_aca||this.getScale();if(_aca){_9db.forEach(this.layerIds.concat(this.graphicsLayerIds),function(_acc){_acc=this.getLayer(_acc);if(_acc.isVisibleAtScale(_aca)){_acb.push(_acc);}},this);}return _acb;},getNumLevels:function(){var _acd=this.getMinZoom(),_ace=this.getMaxZoom();return ((_acd===_ace)&&_acd<0)?0:(_ace-_acd+1);},getLevel:function(){return this.__LOD?this.__LOD.level:-1;},setLevel:function(_acf){if(_acf>-1){return this._extentUtil({targetLevel:_acf});}},getZoom:function(){return this.getLevel();},setZoom:function(zoom){return this.setLevel(zoom);},getMinZoom:function(){return this._params.minZoom;},getMaxZoom:function(){return this._params.maxZoom;},setBasemap:function(_ad0){var _ad1,_ad2="Map.setBasemap: ";if(lang.isObject(_ad0)){_ad1=_ad0;_ad0=_ad1.title;}else{_ad1=_9fb.basemaps&&_9fb.basemaps[_ad0];}if(_ad1){if(this._basemapDfd&&this._basemapDfd.fired===-1){this._basemapDfd.cancel();}var _ad3=[],_ad4=[],_ad5=0;_9db.forEach(_ad1.baseMapLayers||_ad1.layers,function(_ad6){var _ad7,_ad8={id:_ad6.id,displayLevels:_ad6.displayLevels,opacity:_9e7.isDefined(_ad6.opacity)?_ad6.opacity:null,visible:_9e7.isDefined(_ad6.visibility)?_ad6.visibility:null};if(_ad6.type){switch(_ad6.type){case "OpenStreetMap":_ad7=new _9f6(_ad8);break;default:console.log(_ad2+_9e7.substitute({basemapName:_ad0,type:_ad6.type},this.unknownLayerType));break;}}else{var url=_ad6.url;if(window.location.protocol==="https:"&&((url.search(/^http\:\/\/server\.arcgisonline\.com/i)!==-1)||(url.search(/^http\:\/\/services\.arcgisonline\.com/i)!==-1)||(url.search(/^http\:\/\/.+\.arcgis\.com/i)!==-1))){url=url.replace(/http:/i,"https:");}_ad7=new _9f5(url,_ad8);}if(_ad7){_ad3.push(_ad7);_ad4.push(_ad6);if(!_ad6.isReference){_ad5++;}}},this);if(!_ad3.length||!_ad5){console.log(_ad2+_9e7.substitute({basemapName:_ad0},this.invalidBasemap));return;}var _ad9={basemapName:_ad0,infos:_ad4,layers:_ad3};if(!this.loaded){this._basemapLoaded(_ad9);return;}var self=this,dfd=new _9da(_9ea._dfdCanceller),_ada=function(_adb){dfd._pendingLayers--;var idx=_9db.indexOf(_ad9.layers,this);if(idx>-1){var _adc=dfd._layerEvents[idx];if(_adc){_9d9.disconnect(_adc[0]);_9d9.disconnect(_adc[1]);}}if(dfd._pendingLayers<=0){delete dfd._layerEvents;delete self._basemapDfd;dfd.callback(_ad9);}};this._basemapDfd=dfd;dfd._pendingLayers=0;dfd._layerEvents={};_9db.forEach(_ad3,function(_add,i){if(_add){dfd._pendingLayers++;if(_add.loaded){_ada(_add);}else{dfd._layerEvents[i]=[_9d9.connect(_add,"onLoad",_add,_ada),_9d9.connect(_add,"onError",_add,_ada)];}}});dfd.addCallback(lang.hitch(this,this._basemapLoaded));}else{var _ade=[],_adf;for(_adf in _9fb.basemaps){_ade.push(_adf);}console.log(_ad2+_9e7.substitute({basemapName:_ad0,list:_ade.join(",")},this.unknownBasemap));}},_basemapLoaded:function(_ae0){var _ae1=_ae0.layers,_ae2=_ae0.infos,_ae3=0,_ae4=true;if(this.loaded){_9db.forEach(_ae1,function(_ae5,i){if(_ae5.loaded){if(!_ae2[i].isReference){_ae3++;}}});_ae4=_ae3;}if(_ae4){this._removeBasemap();this._basemap=_ae0.basemapName;this.basemapLayerIds=this._addBasemap(_ae1,_ae2);this._fireEvent("onBasemapChange");}},_addBasemap:function(_ae6,_ae7){var _ae8=[],ids=[],_ae9=0;_9db.forEach(_ae6,function(_aea,i){if(_ae7[i].isReference){_ae8.push(_aea);}else{this.addLayer(_aea,_ae9++);ids.push(_aea.id);}},this);if(_ae8.length){_9db.forEach(_ae8,function(_aeb){this.addLayer(_aeb,"top");ids.push(_aeb.id);},this);}return ids;},_removeBasemap:function(){var ids=this.basemapLayerIds,_aec;if(ids&&ids.length){_9db.forEach(ids,function(id){_aec=this.getLayer(id);if(_aec){this.removeLayer(_aec);}},this);}},getBasemap:function(){return this._basemap||"";},translate:function(dx,dy){dx=dx||0;dy=dy||0;if(!this._txTimer){this._tx=this._ty=0;var _aed=this.toScreen(this.extent.getCenter());this.__panStart(_aed.x,_aed.y);}this._tx+=dx;this._ty+=dy;this.__pan(this._tx,this._ty);clearTimeout(this._txTimer);this._txTimer=setTimeout(this._endTranslate,150);},_endTranslate:function(){clearTimeout(this._txTimer);this._txTimer=null;var dx=this._tx,dy=this._ty;this._tx=this._ty=0;this.__panEnd(dx,dy);},setTimeExtent:function(_aee){this.timeExtent=_aee;var arg=_aee?new _aee.constructor(_aee.toJson()):null;this.onTimeExtentChange(arg);},setTimeSlider:function(_aef){if(this.timeSlider){ddc(this._tsTimeExtentChange_connect);this._tsTimeExtentChange_connect=null;this.timeSlider=null;}if(_aef){this.timeSlider=_aef;this.setTimeExtent(_aef.getCurrentTimeExtent());this._tsTimeExtentChange_connect=dc(_aef,"onTimeExtentChange",this,"setTimeExtent");}},resize:function(_af0){var self=this,_af1=function(){clearTimeout(self._resizeT);self.reposition();self._resize();};clearTimeout(self._resizeT);if(_af0===true){_af1();}else{self._resizeT=setTimeout(_af1,self.resizeDelay);}},_resize:function(){var w=this.width,h=this.height,box=_9e1.getContentBox(this.container);if(w===box.w&&h===box.h){return;}var _af2=this._zoomAnim||this._panAnim;if(_af2){_af2.stop();_af2._fire("onEnd",[_af2.node]);}ds(this.root,{width:(this.width=box.w)+"px",height:(this.height=box.h)+"px"});var wd=this.width,ht=this.height;if(this.attribution&&this.attribution.domNode){_9e2.set(this.attribution.domNode,"width",Math.floor(wd*this._mapParams.attributionWidth)+"px");}this.__visibleRect.update(this.__visibleRect.x,this.__visibleRect.y,wd,ht);this.__visibleDelta.update(this.__visibleDelta.x,this.__visibleDelta.y,wd,ht);var r=new Rect(this.extent),ne=(new Rect(r.x,r.y,r.width*(wd/w),r.height*(ht/h),this.spatialReference)).getExtent();this.onResize(ne,wd,ht);this._extentUtil(null,null,ne,null,true);},reposition:function(){this._reposition();this.onReposition(this.position.x,this.position.y);},_reposition:function(){var pos=_9e1.position(this.container,true),brdr=_9e1.getPadBorderExtents(this.container);this.position.update(pos.x+brdr.l,pos.y+brdr.t);},_setClipRect:function(){delete this._clip;var _af3=has("ie")?"rect(auto,auto,auto,auto)":null;if(this.wrapAround180){var _af4=this.width,_af5=this.height,_af6=this._getFrameWidth(),diff=_af4-_af6;if(diff>0){var left=diff/2;_af3="rect(0px,"+(left+_af6)+"px,"+_af5+"px,"+left+"px)";var _af7=this.extent.getWidth(),_af8=_af7*(_af6/_af4);this._clip=[(_af7-_af8)/2,_af8];}}ds(this.__container,"clip",_af3);},_getAvailExtent:function(){var _af9=this.extent,clip=this._clip;if(clip){if(!_af9._clip){var rect=new Rect(_af9);rect.width=clip[1];rect.x=rect.x+clip[0];_af9._clip=rect.getExtent();}return _af9._clip;}return _af9;},_fixedPan:function(dx,dy){return this._extentUtil(null,{dx:dx,dy:dy});},panUp:function(){return this._fixedPan(0,this.height*-_9fd);},panUpperRight:function(){return this._fixedPan(this.width*_9fd,this.height*-_9fd);},panRight:function(){return this._fixedPan(this.width*_9fd,0);},panLowerRight:function(){return this._fixedPan(this.width*_9fd,this.height*_9fd);},panDown:function(){return this._fixedPan(0,this.height*_9fd);},panLowerLeft:function(){return this._fixedPan(this.width*-_9fd,this.height*_9fd);},panLeft:function(){return this._fixedPan(this.width*-_9fd,0);},panUpperLeft:function(){return this._fixedPan(this.width*-_9fd,this.height*-_9fd);},enableSnapping:function(_afa){_afa=_afa||{};if(_afa.declaredClass==="esri.SnappingManager"){this.snappingManager=_afa;}else{var _afb=["esri/SnappingManager"],rid=uid++,self=this;this._rids&&this._rids.push(rid);_9d6(_afb,function(_afc){var idx=self._rids?_9db.indexOf(self._rids,rid):-1;if(idx!==-1){self._rids.splice(idx,1);self.snappingManager=new _afc(lang.mixin({map:self},_afa));}});}return this.snappingManager;},disableSnapping:function(){if(this.snappingManager){this.snappingManager.destroy();}this.snappingManager=null;}});if(has("extend-esri")){_9e5._CoreMap=_a07;}return _a07;});},"esri/geometry/Polyline":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/SpatialReference","esri/geometry/Geometry","esri/geometry/Point","esri/geometry/Extent"],function(_afd,_afe,lang,has,_aff,_b00,_b01,_b02,_b03,_b04){var _b05={type:"polyline",paths:null};var _b06=_afd(_b02,{declaredClass:"esri.geometry.Polyline",constructor:function(obj){lang.mixin(this,_b05);this.paths=[];this._path=0;if(obj){if(obj.paths){lang.mixin(this,obj);}else{this.spatialReference=obj;}if(this.spatialReference){this.spatialReference=new _b01(this.spatialReference);}}this.verifySR();},_extent:null,addPath:function(_b07){this._extent=null;this._path=this.paths.length;this.paths[this._path]=[];if(lang.isArray(_b07[0])){_afe.forEach(_b07,this._addPointArr,this);}else{_afe.forEach(_b07,this._addPoint,this);}return this;},_addPointArr:function(_b08){this.paths[this._path].push(_b08);},_addPoint:function(_b09){this.paths[this._path].push([_b09.x,_b09.y]);},_insertPoints:function(_b0a,_b0b){this._extent=null;this._path=_b0b;if(!this.paths[this._path]){this.paths[this._path]=[];}_afe.forEach(_b0a,this._addPoint,this);},_validateInputs:function(_b0c,_b0d){if((_b0c!==null&&_b0c!==undefined)&&(_b0c<0||_b0c>=this.paths.length)){return false;}if((_b0d!==null&&_b0c!==undefined)&&(_b0d<0||_b0d>=this.paths[_b0c].length)){return false;}return true;},getPoint:function(_b0e,_b0f){if(this._validateInputs(_b0e,_b0f)){return new _b03(this.paths[_b0e][_b0f],this.spatialReference);}},setPoint:function(_b10,_b11,_b12){if(this._validateInputs(_b10,_b11)){this._extent=null;this.paths[_b10][_b11]=[_b12.x,_b12.y];return this;}},insertPoint:function(_b13,_b14,_b15){if(this._validateInputs(_b13)&&_b00.isDefined(_b14)&&(_b14>=0&&_b14<=this.paths[_b13].length)){this._extent=null;this.paths[_b13].splice(_b14,0,[_b15.x,_b15.y]);return this;}},removePath:function(_b16){if(this._validateInputs(_b16,null)){this._extent=null;var arr=this.paths.splice(_b16,1)[0],i,il=arr.length,sr=this.spatialReference;for(i=0;i<il;i++){arr[i]=new _b03(arr[i],sr);}return arr;}},removePoint:function(_b17,_b18){if(this._validateInputs(_b17,_b18)){this._extent=null;return new _b03(this.paths[_b17].splice(_b18,1)[0],this.spatialReference);}},getExtent:function(){var _b19;if(this._extent){_b19=new _b04(this._extent);_b19._partwise=this._partwise;return _b19;}var _b1a=this.paths,pal=_b1a.length;if(!pal||!_b1a[0].length){return;}var path,_b1b,x,y,xmax,ymax,pa,pt,ptl,xmin=(xmax=_b1a[0][0][0]),ymin=(ymax=_b1a[0][0][1]),min=Math.min,max=Math.max,sr=this.spatialReference,_b1c=[],_b1d,_b1e,_b1f,_b20;for(pa=0;pa<pal;pa++){path=_b1a[pa];_b1d=(_b1e=path[0]&&path[0][0]);_b1f=(_b20=path[0]&&path[0][1]);ptl=path.length;for(pt=0;pt<ptl;pt++){_b1b=path[pt];x=_b1b[0];y=_b1b[1];xmin=min(xmin,x);ymin=min(ymin,y);xmax=max(xmax,x);ymax=max(ymax,y);_b1d=min(_b1d,x);_b1f=min(_b1f,y);_b1e=max(_b1e,x);_b20=max(_b20,y);}_b1c.push(new _b04({xmin:_b1d,ymin:_b1f,xmax:_b1e,ymax:_b20,spatialReference:(sr?sr.toJson():null)}));}this._extent={xmin:xmin,ymin:ymin,xmax:xmax,ymax:ymax,spatialReference:sr?sr.toJson():null};this._partwise=_b1c.length>1?_b1c:null;_b19=new _b04(this._extent);_b19._partwise=this._partwise;return _b19;},toJson:function(){var json={paths:lang.clone(this.paths)},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});_b06.defaultProps=_b05;if(has("extend-esri")){lang.setObject("geometry.Polyline",_b06,_aff);_aff.geometry.defaultPolyline=_b05;}return _b06;});},"esri/layers/LayerTimeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(_b21,lang,has,_b22,_b23){var _b24=_b21(null,{declaredClass:"esri.layers.LayerTimeOptions",constructor:function(json){if(json){lang.mixin(this,json);}},toJson:function(){var json={timeDataCumulative:this.timeDataCumulative,timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,useTime:this.useTime};return _b23.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.LayerTimeOptions",_b24,_b22);}return _b24;});},"dojox/gfx/renderer":function(){define("dojox/gfx/renderer",["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(g,lang,has,win,_b25){var _b26=null;return {load:function(id,_b27,load){if(_b26&&id!="force"){load(_b26);return;}var _b28=_b25.forceGfxRenderer,_b29=!_b28&&(lang.isString(_b25.gfxRenderer)?_b25.gfxRenderer:"svg,vml,canvas,silverlight").split(","),_b2a,_b2b;while(!_b28&&_b29.length){switch(_b29.shift()){case "svg":if("SVGAngle" in win.global){_b28="svg";}break;case "vml":if(has("ie")){_b28="vml";}break;case "silverlight":try{if(has("ie")){_b2a=new ActiveXObject("AgControl.AgControl");if(_b2a&&_b2a.IsVersionSupported("1.0")){_b2b=true;}}else{if(navigator.plugins["Silverlight Plug-In"]){_b2b=true;}}}catch(e){_b2b=false;}finally{_b2a=null;}if(_b2b){_b28="silverlight";}break;case "canvas":if(win.global.CanvasRenderingContext2D){_b28="canvas";}break;}}if(_b28==="canvas"&&_b25.canvasEvents!==false){_b28="canvasWithEvents";}if(_b25.isDebug){console.log("gfx renderer = "+_b28);}function _b2c(){_b27(["dojox/gfx/"+_b28],function(_b2d){g.renderer=_b28;_b26=_b2d;load(_b2d);});};if(_b28=="svg"&&typeof window.svgweb!="undefined"){window.svgweb.addOnLoad(_b2c);}else{_b2c();}}};});},"esri/geometry/screenUtils":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/sniff","esri/kernel","esri/geometry/Point","esri/geometry/ScreenPoint","esri/geometry/Polyline","esri/geometry/Polygon","esri/geometry/Multipoint","esri/geometry/Extent"],function(_b2e,lang,has,_b2f,_b30,_b31,_b32,_b33,_b34,_b35){function _b36(ext,wd,ht,pt,_b37){var _b38=ext.spatialReference,ptSR=pt.spatialReference,x=pt.x,y=pt.y,_b39;if(_b38&&ptSR&&!_b38.equals(ptSR)&&_b38._canProject(ptSR)){_b39=_b38.isWebMercator()?_b30.lngLatToXY(x,y):_b30.xyToLngLat(x,y,true);x=_b39[0];y=_b39[1];}x=(x-ext.xmin)*(wd/ext.getWidth());y=(ext.ymax-y)*(ht/ext.getHeight());if(!_b37){x=Math.round(x);y=Math.round(y);}return new _b31(x,y);};function _b3a(ext,wd,ht,g){var x=ext.xmin,y=ext.ymax,rwd=wd/ext.getWidth(),rht=ht/ext.getHeight(),_b3b=_b2e.forEach,_b3c=Math.round;if(g instanceof _b30){return new _b30(_b3c((g.x-x)*rwd),_b3c((y-g.y)*rht));}else{if(g instanceof _b34){var mp=new _b34(),mpp=mp.points;_b3b(g.points,function(pt,i){mpp[i]=[_b3c((pt[0]-x)*rwd),_b3c((y-pt[1])*rht)];});return mp;}else{if(g instanceof _b35){return new _b35(_b3c((g.xmin-x)*rwd),_b3c((y-g.ymin)*rht),_b3c((g.xmax-x)*rwd),_b3c((y-g.ymax)*rwd));}else{if(g instanceof _b32){var _b3d=new _b32(),_b3e=_b3d.paths,_b3f;_b3b(g.paths,function(path,i){_b3f=(_b3e[i]=[]);_b3b(path,function(pt,j){_b3f[j]=[_b3c((pt[0]-x)*rwd),_b3c((y-pt[1])*rht)];});});return _b3d;}else{if(g instanceof _b33){var pgon=new _b33(),_b40=pgon.rings,_b41;_b3b(g.rings,function(ring,i){_b41=(_b40[i]=[]);_b3b(ring,function(pt,j){_b41[j]=[_b3c((pt[0]-x)*rwd),_b3c((y-pt[1])*rht)];});});return pgon;}}}}}};var _b42=(function(){if(has("ie")<9){return function(x,y,rwd,rht,dx,dy,_b43,_b44,_b45){var _b46=[],_b47=Math.round,p,pl=_b43.length,path,_b48,_b49,pt,x1,y1,x2,y2;for(p=0;p<pl;p++){path=_b43[p];pt=_b44?_b44(path[0][0],path[0][1],_b45):path[0];if((_b49=path.length)>1){x1=_b47(((pt[0]-x)*rwd)+dx);y1=_b47(((y-pt[1])*rht)+dy);pt=_b44?_b44(path[1][0],path[1][1],_b45):path[1];x2=_b47(((pt[0]-x)*rwd)+dx);y2=_b47(((y-pt[1])*rht)+dy);_b46.push("M",x1+","+y1,"L",x2+","+y2);for(_b48=2;_b48<_b49;_b48++){pt=_b44?_b44(path[_b48][0],path[_b48][1],_b45):path[_b48];x1=_b47(((pt[0]-x)*rwd)+dx);y1=_b47(((y-pt[1])*rht)+dy);_b46.push(x1+","+y1);}}else{x1=_b47(((pt[0]-x)*rwd)+dx);y1=_b47(((y-pt[1])*rht)+dy);_b46.push("M",x1+","+y1);}}return _b46;};}else{return function(x,y,rwd,rht,dx,dy,_b4a,_b4b,_b4c){var _b4d=[],i,j,il,jl,path,pt,_b4e=Math.round;for(i=0,il=_b4a?_b4a.length:0;i<il;i++){path=_b4a[i];_b4d.push("M");for(j=0,jl=path?path.length:0;j<jl;j++){pt=_b4b?_b4b(path[j][0],path[j][1],_b4c):path[j];_b4d.push(_b4e(((pt[0]-x)*rwd)+dx)+","+_b4e(((y-pt[1])*rht)+dy));}}return _b4d;};}}());function _b4f(ext,wd,ht,g,dx,dy){var _b50=g instanceof _b32,_b51=ext.spatialReference,_b52=g.spatialReference,_b53,_b54;if(_b51&&_b52&&!_b51.equals(_b52)&&_b51._canProject(_b52)){if(_b51.isWebMercator()){_b53=_b30.lngLatToXY;}else{_b53=_b30.xyToLngLat;_b54=true;}}return _b42(ext.xmin,ext.ymax,wd/ext.getWidth(),ht/ext.getHeight(),dx,dy,_b50?g.paths:g.rings,_b53,_b54);};function _b55(ext,wd,ht,pt){return new _b30(ext.xmin+(pt.x/(wd/ext.getWidth())),ext.ymax-(pt.y/(ht/ext.getHeight())),ext.spatialReference);};function _b56(ext,wd,ht,g){var x=ext.xmin,y=ext.ymax,sr=ext.spatialReference,rwd=wd/ext.getWidth(),rht=ht/ext.getHeight(),_b57=_b2e.forEach;if(g instanceof _b30){return new _b30(x+(g.x/rwd),y-(g.y/rht),sr);}else{if(g instanceof _b34){var mp=new _b34(sr),mpp=mp.points;_b57(g.points,function(pt,i){mpp[i]=[x+(pt[0]/rwd),y-(pt[1]/rht)];});return mp;}else{if(g instanceof _b35){return new _b35(x+(g.xmin/rwd),y-(g.ymin/rht),x+(g.xmax/rwd),y-(g.ymax/rht),sr);}else{if(g instanceof _b32){var _b58=new _b32(sr),_b59=_b58.paths,_b5a;_b57(g.paths,function(path,i){_b5a=(_b59[i]=[]);_b57(path,function(pt,j){_b5a[j]=[x+(pt[0]/rwd),y-(pt[1]/rht)];});});return _b58;}else{if(g instanceof _b33){var pgon=new _b33(sr),_b5b=pgon.rings,_b5c;_b57(g.rings,function(ring,i){_b5c=(_b5b[i]=[]);_b57(ring,function(pt,j){_b5c[j]=[x+(pt[0]/rwd),y-(pt[1]/rht)];});});return pgon;}}}}}};var _b5d={toScreenPoint:_b36,toScreenGeometry:_b3a,_toScreenPath:_b4f,toMapPoint:_b55,toMapGeometry:_b56};if(has("extend-esri")){lang.mixin(lang.getObject("geometry",true,_b2f),_b5d);}return _b5d;});},"esri/geometry/Point":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/SpatialReference","esri/geometry/Geometry"],function(_b5e,lang,has,_b5f,_b60,_b61,_b62){var _b63=6378137,PI=3.141592653589793,_b64=57.29577951308232,_b65=0.017453292519943;function _b66(rad){return rad*_b64;};function _b67(deg){return deg*_b65;};function _b68(lng,lat){if(lat>89.99999){lat=89.99999;}else{if(lat<-89.99999){lat=-89.99999;}}var _b69=_b67(lat);return [_b67(lng)*_b63,_b63/2*Math.log((1+Math.sin(_b69))/(1-Math.sin(_b69)))];};function _b6a(x,y,_b6b){var _b6c=_b66(x/_b63);if(_b6b){return [_b6c,_b66((PI/2)-(2*Math.atan(Math.exp(-1*y/_b63))))];}return [_b6c-(Math.floor((_b6c+180)/360)*360),_b66((PI/2)-(2*Math.atan(Math.exp(-1*y/_b63))))];};var _b6d={type:"point",x:0,y:0};var _b6e=_b5e(_b62,{declaredClass:"esri.geometry.Point",constructor:function(x,y,_b6f){lang.mixin(this,_b6d);if(lang.isArray(x)){this.x=x[0];this.y=x[1];this.spatialReference=y;}else{if(lang.isObject(x)){lang.mixin(this,x);if(_b60.isDefined(this.latitude)){this.y=this.latitude;}if(_b60.isDefined(this.longitude)){this.x=this.longitude;}if(this.spatialReference){this.spatialReference=new _b61(this.spatialReference);}}else{this.x=x;this.y=y;this.spatialReference=_b6f;}}this.verifySR();},offset:function(x,y){return new this.constructor(this.x+x,this.y+y,this.spatialReference);},setX:function(x){this.x=x;return this;},setY:function(y){this.y=y;return this;},setLongitude:function(_b70){var sr=this.spatialReference;if(sr){if(sr._isWebMercator()){this.x=_b68(_b70,this.y)[0];}else{if(sr.wkid===4326){this.x=_b70;}}}return this;},setLatitude:function(_b71){var sr=this.spatialReference;if(sr){if(sr._isWebMercator()){this.y=_b68(this.x,_b71)[1];}else{if(sr.wkid===4326){this.y=_b71;}}}return this;},getLongitude:function(){var sr=this.spatialReference,_b72;if(sr){if(sr._isWebMercator()){_b72=_b6a(this.x,this.y)[0];}else{if(sr.wkid===4326){_b72=this.x;}}}return _b72;},getLatitude:function(){var sr=this.spatialReference,_b73;if(sr){if(sr._isWebMercator()){_b73=_b6a(this.x,this.y)[1];}else{if(sr.wkid===4326){_b73=this.y;}}}return _b73;},update:function(x,y){this.x=x;this.y=y;return this;},normalize:function(){var x=this.x,sr=this.spatialReference;if(sr){var info=sr._getInfo();if(info){var _b74=info.valid[0],_b75=info.valid[1],_b76=2*_b75,_b77;if(x>_b75){_b77=Math.ceil(Math.abs(x-_b75)/_b76);x-=(_b77*_b76);}else{if(x<_b74){_b77=Math.ceil(Math.abs(x-_b74)/_b76);x+=(_b77*_b76);}}}}return new this.constructor(x,this.y,sr);},toJson:function(){var json={x:this.x,y:this.y},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});_b6e.lngLatToXY=_b68;_b6e.xyToLngLat=_b6a;_b6e.defaultProps=_b6d;if(has("extend-esri")){lang.setObject("geometry.Point",_b6e,_b5f);_b5f.geometry.defaultPoint=_b6d;}return _b6e;});},"esri/symbols/LineSymbol":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","dojox/gfx/_base","esri/kernel","esri/symbols/Symbol"],function(_b78,lang,has,_b79,_b7a,_b7b){var _b7c=_b78(_b7b,{declaredClass:"esri.symbol.LineSymbol",constructor:function(json){if(lang.isObject(json)){this.width=_b79.pt2px(this.width);}else{this.width=12;}},setWidth:function(_b7d){this.width=_b7d;return this;},toJson:function(){var _b7e=_b79.px2pt(this.width);_b7e=isNaN(_b7e)?undefined:_b7e;return lang.mixin(this.inherited("toJson",arguments),{width:_b7e});}});if(has("extend-esri")){lang.setObject("symbol.LineSymbol",_b7c,_b7a);}return _b7c;});},"esri/layers/graphics":function(){define(["esri/layers/GraphicsLayer","esri/graphic","esri/renderer"],function(){return {};});},"dojo/window":function(){define(["./_base/lang","./sniff","./_base/window","./dom","./dom-geometry","./dom-style"],function(lang,has,_b7f,dom,geom,_b80){var _b81={getBox:function(doc){doc=doc||_b7f.doc;var _b82=(doc.compatMode=="BackCompat")?_b7f.body(doc):doc.documentElement,_b83=geom.docScroll(doc),w,h;if(has("touch")){var _b84=_b81.get(doc);w=_b84.innerWidth||_b82.clientWidth;h=_b84.innerHeight||_b82.clientHeight;}else{w=_b82.clientWidth;h=_b82.clientHeight;}return {l:_b83.x,t:_b83.y,w:w,h:h};},get:function(doc){if(has("ie")&&_b81!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;},scrollIntoView:function(node,pos){try{node=dom.byId(node);var doc=node.ownerDocument||_b7f.doc,body=_b7f.body(doc),html=doc.documentElement||body.parentNode,isIE=has("ie"),isWK=has("webkit");if((!(has("mozilla")||isIE||isWK||has("opera"))||node==body||node==html)&&(typeof node.scrollIntoView!="undefined")){node.scrollIntoView(false);return;}var _b85=doc.compatMode=="BackCompat",_b86=(isIE>=9&&"frameElement" in node.ownerDocument.parentWindow)?((html.clientHeight>0&&html.clientWidth>0&&(body.clientHeight==0||body.clientWidth==0||body.clientHeight>html.clientHeight||body.clientWidth>html.clientWidth))?html:body):(_b85?body:html),_b87=isWK?body:_b86,_b88=_b86.clientWidth,_b89=_b86.clientHeight,rtl=!geom.isBodyLtr(doc),_b8a=pos||geom.position(node),el=node.parentNode,_b8b=function(el){return ((isIE<=6||(isIE&&_b85))?false:(_b80.get(el,"position").toLowerCase()=="fixed"));};if(_b8b(node)){return;}while(el){if(el==body){el=_b87;}var _b8c=geom.position(el),_b8d=_b8b(el);if(el==_b87){_b8c.w=_b88;_b8c.h=_b89;if(_b87==html&&isIE&&rtl){_b8c.x+=_b87.offsetWidth-_b8c.w;}if(_b8c.x<0||!isIE){_b8c.x=0;}if(_b8c.y<0||!isIE){_b8c.y=0;}}else{var pb=geom.getPadBorderExtents(el);_b8c.w-=pb.w;_b8c.h-=pb.h;_b8c.x+=pb.l;_b8c.y+=pb.t;var _b8e=el.clientWidth,_b8f=_b8c.w-_b8e;if(_b8e>0&&_b8f>0){_b8c.w=_b8e;_b8c.x+=(rtl&&(isIE||el.clientLeft>pb.l))?_b8f:0;}_b8e=el.clientHeight;_b8f=_b8c.h-_b8e;if(_b8e>0&&_b8f>0){_b8c.h=_b8e;}}if(_b8d){if(_b8c.y<0){_b8c.h+=_b8c.y;_b8c.y=0;}if(_b8c.x<0){_b8c.w+=_b8c.x;_b8c.x=0;}if(_b8c.y+_b8c.h>_b89){_b8c.h=_b89-_b8c.y;}if(_b8c.x+_b8c.w>_b88){_b8c.w=_b88-_b8c.x;}}var l=_b8a.x-_b8c.x,t=_b8a.y-Math.max(_b8c.y,0),r=l+_b8a.w-_b8c.w,bot=t+_b8a.h-_b8c.h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);if(rtl&&((isIE==8&&!_b85)||isIE>=9)){s=-s;}_b8a.x+=el.scrollLeft;el.scrollLeft+=s;_b8a.x-=el.scrollLeft;}if(bot*t>0){_b8a.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);_b8a.y-=el.scrollTop;}el=(el!=_b87)&&!_b8d&&el.parentNode;}}catch(error){console.error("scrollIntoView: "+error);node.scrollIntoView(false);}}};1&&lang.setObject("dojo.window",_b81);return _b81;});},"esri/TouchEvents":function(){define(["dojo/_base/declare","dojo/_base/html","dojo/_base/lang","dojo/_base/sniff","dojo/dom","esri/kernel","esri/Evented","esri/geometry/Point","esri/geometry/ScreenPoint"],function(_b90,html,lang,has,dom,_b91,_b92,_b93,_b94){var _b95=_b90([_b92],{declaredClass:"esri.TouchEvents",tapRadius:8,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,map:null,constructor:function(node,_b96){this.registerConnectEvents({"basic-tap":["BasicTap"],"click":["Click"],"double-click":["DblClick"],"double-tap":["DoubleTap"],"mouse-down":["MouseDown"],"mouse-out":["MouseOut"],"mouse-over":["MouseOver"],"mouse-up":["MouseUp"],"pinch-end":["PinchEnd"],"pinch-move":["PinchMove"],"pinch-start":["PinchStart"],"processed-double-tap":["ProcessedDoubleTap"],"processed-tap":["ProcessedTap"],"swipe-end":["SwipeEnd"],"swipe-move":["SwipeMove"],"swipe-start":["SwipeStart"],"tap":["Tap"],"two-finger-tap":["TwoFingerTap"]},{normalized:true});this.node=node;lang.mixin(this,_b96);html.setSelectable(node,false);this._touchStart=lang.hitch(this,this._touchStart);this._touchMove=lang.hitch(this,this._touchMove);this._touchEnd=lang.hitch(this,this._touchEnd);this._touchCancel=lang.hitch(this,this._touchCancel);node.addEventListener("touchstart",this._touchStart,false);node.addEventListener("touchmove",this._touchMove,false);node.addEventListener("touchend",this._touchEnd,false);node.addEventListener("touchcancel",this._touchCancel,false);if(this.map){this._mouseOver=lang.hitch(this,this._mouseOver);this._mouseOut=lang.hitch(this,this._mouseOut);this._mouseDown=lang.hitch(this,this._mouseDown);this._mouseUp=lang.hitch(this,this._mouseUp);this._mouseClick=lang.hitch(this,this._mouseClick);node.addEventListener("mouseover",this._mouseOver,false);node.addEventListener("mouseout",this._mouseOut,false);node.addEventListener("mousedown",this._mouseDown,false);node.addEventListener("mouseup",this._mouseUp,false);node.addEventListener("click",this._mouseClick,false);}this._numTouches=0;this._nodeTouches=[];this._touches={};this._touchIds=[];this._taps=[];this._immediate=false;},_touchStart:function(_b97){var _b98=this._touches,i,len=_b97.changedTouches.length,_b99,info,_b9a,_b9b,ts=(new Date()).getTime();if(has("android")&&has("safari")&&_b97.targetTouches.length===1&&_b97.touches.length===_b97.targetTouches.length&&_b97.targetTouches.length===_b97.changedTouches.length&&_b97.changedTouches[0].identifier===0&&_b98[_b97.changedTouches[0].identifier]){return;}this._addTouch(_b97);for(i=0;i<len;i++){_b99=_b97.changedTouches[i];info=(_b98[_b99.identifier]={});info.startX=_b99.pageX;info.startY=_b99.pageY;info.startTS=ts;if(this._touchIds.indexOf(_b99.identifier)===-1){this._touchIds.push(_b99.identifier);}}if(this._swipeActive){_b9a=this._nodeTouches[0];}if(this._pinchActive){_b9b=this._nodeTouches[1];}if(this._numTouches===1){if(this._swipeActive){this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(_b97,_b9a));}else{if(this._pinchActive){this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(_b97,[_b9a,_b9b]));}}}else{if(this._numTouches===2){if(this._swipeActive){if(_b9a){info=_b98[this._touchIds[0]];info.startX=_b9a.pageX;info.startY=_b9a.pageY;info.moved=false;}this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(_b97,_b9a));}}else{if(this._swipeActive){this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(_b97,_b9a));}else{if(this._pinchActive){this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(_b97,[_b9a,_b9b]));}}}}},_touchMove:function(_b9c){_b9c.preventDefault();this._updateTouch(_b9c);var _b9d=this._touches,i,len=_b9c.changedTouches.length,_b9e,info,dx,dy,_b9f;if(has("android")&&has("safari")&&_b9c.targetTouches.length===1&&_b9c.touches.length===_b9c.targetTouches.length&&_b9c.targetTouches.length===_b9c.changedTouches.length&&_b9c.changedTouches[0].identifier===0&&_b9d[_b9c.changedTouches[0].identifier]&&this._touchIds.length>1){return;}for(i=0;i<len;i++){_b9e=_b9c.changedTouches[i];info=_b9d[_b9e.identifier];if(!info){continue;}dx=Math.abs(_b9e.pageX-info.startX);dy=Math.abs(_b9e.pageY-info.startY);if(!info.moved&&((dx>=this.tapRadius)||(dy>=this.tapRadius))){info.moved=info.absMoved=true;}_b9f=_b9f?_b9f:info.moved;}if(this._numTouches===1){var _ba0=_b9c.changedTouches[0];if(!this._swipeActive){if(_b9f){this._swipeActive=true;this._fire("onSwipeStart",this._processTouchEvent(_b9c,_ba0));}}else{this._fire("onSwipeMove",this._processTouchEvent(_b9c,_ba0));}}else{if(this._numTouches===2){var _ba1=this._nodeTouches[0],_ba2=this._nodeTouches[1];if(!this._pinchActive){if(_b9f){var _ba3=_b9d[_ba1.identifier],_ba4=_b9d[_ba2.identifier],_ba5=Math.abs(_ba3.startX-_ba4.startX),_ba6=Math.abs(_ba3.startY-_ba4.startY),_ba7=Math.sqrt((_ba5*_ba5)+(_ba6*_ba6)),_ba8=Math.abs(_ba1.pageX-_ba2.pageX),_ba9=Math.abs(_ba1.pageY-_ba2.pageY),_baa=Math.sqrt((_ba8*_ba8)+(_ba9*_ba9));if(Math.abs(_baa-_ba7)>=(2*this.tapRadius)){this._pinchActive=true;this._fire("onPinchStart",this._processTouchEvent(_b9c,[_ba1,_ba2]));}}}else{this._fire("onPinchMove",this._processTouchEvent(_b9c,[_ba1,_ba2]));}}}},_touchEnd:function(_bab){this._removeTouch(_bab);var _bac=this._touches,_bad=_bab.changedTouches,i,len=_bad.length,_bae,info,ts=(new Date()).getTime(),ids=this._touchIds;for(i=0;i<len;i++){info=_bac[_bad[i].identifier];if(!info){continue;}if(info.absMoved){_bae=true;}info.pageX=_bad[i].pageX;info.pageY=_bad[i].pageY;info.endTS=ts;}if(this._numTouches===0){this._touches={};this._touchIds=[];if(this._swipeActive){this._swipeActive=false;this._fire("onSwipeEnd",this._processTouchEvent(_bab,_bad[0]));}else{if(this._pinchActive){this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(_bab,_bad));}else{if(!_bae){var _baf=Infinity,_bb0=-Infinity,_bb1=Infinity,_bb2=-Infinity,_bb3=this.tapStartTolerance,_bb4=[],_bb5=true;for(i=0;i<ids.length;i++){info=_bac[ids[i]];_bb4.push(info);if(info.startTS<_baf){_baf=info.startTS;}if(info.startTS>_bb0){_bb0=info.startTS;}if(info.endTS<_bb1){_bb1=info.endTS;}if(info.endTS>_bb2){_bb2=info.endTS;}delete _bac[ids[i]];}if(_bb4.length===1&&_bad[0]){var dx=Math.abs(_bad[0].pageX-_bb4[0].startX),dy=Math.abs(_bad[0].pageY-_bb4[0].startY);if((dx>=this.tapRadius)||(dy>=this.tapRadius)){_bb5=false;}}if(_bb5&&Math.abs(_bb0-_baf)<=_bb3&&Math.abs(_bb2-_bb1)<=_bb3){this._basicTap(_bab,_bb4);}}}}}else{if(this._numTouches===1){if(this._pinchActive){var _bb6=this._nodeTouches[0];info=_bac[_bb6.identifier];info.startX=_bb6.pageX;info.startY=_bb6.pageY;info.moved=false;this._pinchActive=false;this._fire("onPinchEnd",this._processTouchEvent(_bab,[_bad[0],_bb6]));}}}},_touchCancel:function(_bb7){if(this._numTouches){this._touchEnd(_bb7);}},_basicTap:function(_bb8,_bb9){var ts=(new Date()).getTime(),self=this;_bb8=this._processTouchEvent(_bb8,_bb9);this._taps.push({touchInfos:_bb9,ts:ts,event:_bb8});if(this._taps.length>2){this._taps.shift();}this._fire("onBasicTap",_bb8);clearTimeout(this._tapTimer);if(this._immediate){this._analyzeTap(true);}else{var _bba=(this._taps.length===2)?(this.doubleTapDuration/2):this.doubleTapDuration;this._tapTimer=setTimeout(function(){var that=self;self=null;clearTimeout(that._tapTimer);that._analyzeTap();},_bba);}},_analyzeTap:function(_bbb){var taps=this._taps,_bbc=taps[0],_bbd=taps[1],_bbe=_bbc.touchInfos,_bbf=_bbd&&_bbd.touchInfos;if(!taps.length){return;}if(!_bbb){this._taps=[];}if(_bbc&&_bbd){if(_bbe.length===_bbf.length){if((_bbd.ts-_bbc.ts)<=this.doubleTapDuration){var _bc0,dx,dy;if(_bbe.length===1){dx=Math.abs(_bbe[0].startX-_bbf[0].startX);dy=Math.abs(_bbe[0].startY-_bbf[0].startY);_bc0=(dx<=this.doubleTapRadius)&&(dy<=this.doubleTapRadius);}else{_bc0=true;}if(_bc0){this._processedDoubleTap(taps);}else{this._processedTap(_bbd);}}else{this._processedTap(_bbd);}}else{this._processedTap(_bbd);}}else{this._processedTap(_bbc||_bbd);}},_processedTap:function(tap){var _bc1=tap.event;this._fire("onProcessedTap",_bc1);if(tap.touchInfos.length===1){this._fire("onTap",this._fixEvent(_bc1));}else{if(tap.touchInfos.length===2){this._fire("onTwoFingerTap",_bc1);}}},_processedDoubleTap:function(taps){var _bc2=(taps[1].touchInfos.length===1),_bc3,evts;if(_bc2){_bc3=[this._fixEvent(taps[0].event),this._fixEvent(taps[1].event)];_bc3[1].relatedEvents=_bc3;}evts=[taps[0].event,taps[1].event];evts[1].relatedEvents=evts;this._fire("onProcessedDoubleTap",evts[1]);if(_bc2){this._fire("onDoubleTap",_bc3[1]);this._fire("onDblClick",_bc3[1]);}},_addTouch:function(_bc4){var i,_bc5=_bc4.changedTouches,_bc6=this._nodeTouches;this._numTouches+=_bc5.length;for(i=0;i<_bc5.length;i++){_bc6.push(_bc5[i]);}for(i=_bc6.length-1;i>=0;i--){if(!dom.isDescendant(_bc6[i].target,document.body)){_bc6.splice(i,1);this._numTouches--;}}if(this._numTouches<0){this._numTouches=0;}},_removeTouch:function(_bc7){var i,_bc8=[],_bc9=[],_bca=_bc7.changedTouches,_bcb=this._nodeTouches;this._numTouches-=_bca.length;if(this._numTouches<0){this._numTouches=0;}for(i=0;i<_bca.length;i++){_bc8.push(_bca[i].identifier);}for(i=_bcb.length-1;i>=0;i--){if(_bc8.indexOf(_bcb[i].identifier)!==-1){_bc9.push(_bcb.splice(i,1)[0]);}}return _bc9;},_updateTouch:function(_bcc){var i,ids=[],idx,_bcd=_bcc.changedTouches,_bce=this._nodeTouches;for(i=0;i<_bcd.length;i++){ids.push(_bcd[i].identifier);}for(i=0;i<_bce.length;i++){idx=ids.indexOf(_bce[i].identifier);if(idx!==-1){_bce.splice(i,1,_bcd[idx]);}}},_mouseOver:function(_bcf){this._fire("onMouseOver",this._processMouseEvent(_bcf));},_mouseOut:function(_bd0){this._fire("onMouseOut",this._processMouseEvent(_bd0));},_mouseDown:function(_bd1){this._fire("onMouseDown",this._processMouseEvent(_bd1));},_mouseUp:function(_bd2){this._fire("onMouseUp",this._processMouseEvent(_bd2));},_mouseClick:function(_bd3){this._fire("onClick",this._processMouseEvent(_bd3));},_fire:function(_bd4,evt){if(this[_bd4]){this[_bd4](evt);}if(this.map){if(this.map[_bd4]){this.map[_bd4](evt);}}},_fixEvent:function(_bd5){var _bd6={},i;for(i in _bd5){_bd6[i]=_bd5[i];}if(this.map){_bd6.screenPoint=_bd6.screenPoints[0];_bd6.mapPoint=_bd6.mapPoints[0];}return _bd6;},_processTouchEvent:function(evt,_bd7){var map=this.map,pos=map&&map.position,_bd8=0;if(pos&&_bd7){if(lang.isArray(_bd7)){var i,_bd9;evt.screenPoints=[];evt.mapPoints=[];for(i=0;i<_bd7.length;i++){if(_bd7[i]){_bd9=new _b94(_bd7[i].pageX-pos.x,_bd7[i].pageY-pos.y);evt.screenPoints.push(_bd9);evt.mapPoints.push(map.extent?map.toMap(_bd9):new _b93());}else{_bd8++;}}}else{evt.screenPoint=new _b94(_bd7.pageX-pos.x,_bd7.pageY-pos.y);evt.mapPoint=map.extent?map.toMap(evt.screenPoint):new _b93();}}evt.numPoints=_bd7?(lang.isArray(_bd7)?(_bd7.length-_bd8):1):0;return evt;},_processMouseEvent:function(evt){var map=this.map,pos=map&&map.position;if(pos){evt.screenPoint=new _b94(evt.pageX-pos.x,evt.pageY-pos.y);evt.mapPoint=map.extent?map.toMap(evt.screenPoint):new _b93();}return evt;},setImmediateTap:function(_bda){this._immediate=_bda;},destroy:function(){var node=this.node;node.removeEventListener("touchstart",this._touchStart,false);node.removeEventListener("touchmove",this._touchMove,false);node.removeEventListener("touchend",this._touchEnd,false);node.removeEventListener("touchcancel",this._touchCancel,false);if(this.map){node.removeEventListener("mouseover",this._mouseOver,false);node.removeEventListener("mouseout",this._mouseOut,false);node.removeEventListener("mousedown",this._mouseDown,false);node.removeEventListener("mouseup",this._mouseUp,false);node.removeEventListener("click",this._mouseClick,false);}html.setSelectable(node,true);clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._nodeTouches=this._touches=this._touchIds=this._taps=null;}});if(has("extend-esri")){_b91.TouchEvents=_b95;}return _b95;});},"esri/InfoWindowBase":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/Deferred","dojo/dom-construct","dojo/has","dijit/registry","esri/kernel","esri/lang","esri/geometry/ScreenPoint"],function(_bdb,lang,_bdc,_bdd,_bde,_bdf,has,_be0,_be1,_be2,_be3){var _be4=_bdb(null,{declaredClass:"esri.InfoWindowBase",constructor:function(){var _be5=lang.hitch;this.__set_title=_be5(this,this.__set_title);this.__err_title=_be5(this,this.__err_title);this.__set_content=_be5(this,this.__set_content);this.__err_content=_be5(this,this.__err_content);},setMap:function(map){this.map=map;},unsetMap:function(map){delete this.map;},setTitle:function(){},setContent:function(){},show:function(){},hide:function(){},resize:function(){},onShow:function(){},onHide:function(){},place:function(_be6,_be7){if(_be2.isDefined(_be6)){if(lang.isObject(_be6)){_bdf.place(_be6,_be7,"only");}else{_be7.innerHTML=_be6;}}else{_be7.innerHTML="";}},startupDijits:function(node){this._processDijits(node);},destroyDijits:function(node){this._processDijits(node,true);},_processDijits:function(node,_be8){if(node&&node.children.length===1){var _be9=node.children[0];if(_be9){var _bea=_be0.byNode(_be9);var _beb=_bea?[_bea]:_be0.findWidgets(_be9);_bdc.forEach(_beb,function(_bec){if(_be8){if(_bec._started&&!_bec._destroyed){try{if(_bec.destroyRecursive){_bec.destroyRecursive();}else{if(_bec.destroy){_bec.destroy();}}}catch(ex){console.debug("An error occurred when destroying a widget embedded within InfoWindow: "+ex.message);}}}else{if(!_bec._started){try{_bec.startup();}catch(ex2){console.debug("An error occurred when starting a widget embedded within InfoWindow: "+ex2.message);}}}});}}},__registerMapListeners:function(){this.__unregisterMapListeners();var map=this.map;this.__handles=[_bdd.connect(map,"onPan",this,this.__onMapPan),_bdd.connect(map,"onZoomStart",this,this.__onMapZmStart),_bdd.connect(map,"onExtentChange",this,this.__onMapExtChg)];},__unregisterMapListeners:function(){var _bed=this.__handles;if(_bed){_bdc.forEach(_bed,_bdd.disconnect,_bdd);this.__handles=null;}},__onMapPan:function(_bee,_bef){this.move(_bef,true);},__onMapZmStart:function(){this.__mcoords=this.mapCoords||this.map.toMap(new _be3(this.coords));this.hide(null,true);},__onMapExtChg:function(_bf0,_bf1,_bf2){var map=this.map,_bf3=this.mapCoords;if(_bf3){this.show(_bf3,null,true);}else{var _bf4;if(_bf2){_bf4=map.toScreen(this.__mcoords);}else{_bf4=this.coords.offset((_bf1&&_bf1.x)||0,(_bf1&&_bf1.y)||0);}this.show(_bf4,null,true);}},__setValue:function(_bf5,_bf6){this[_bf5].innerHTML="";var dfd="_dfd"+_bf5,_bf7=this[dfd];if(_bf7&&_bf7.fired===-1){_bf7.cancel();this[dfd]=null;}if(_be2.isDefined(_bf6)){if(_bf6 instanceof _bde){this[dfd]=_bf6;_bf6.addCallbacks(this["__set"+_bf5],this["__err"+_bf5]);}else{this.__render(_bf5,_bf6);}}},__set_title:function(_bf8){this._dfd_title=null;this.__render("_title",_bf8);},__err_title:function(_bf9){this._dfd_title=null;},__set_content:function(_bfa){this._dfd_content=null;this.__render("_content",_bfa);},__err_content:function(_bfb){this._dfd_content=null;},__render:function(_bfc,_bfd){var node=this[_bfc];this.place(_bfd,node);if(this.isShowing){this.startupDijits(node);if(_bfc==="_title"&&this._adjustContentArea){this._adjustContentArea();}}}});if(has("extend-esri")){_be1.InfoWindowBase=_be4;}return _be4;});},"esri/TimeExtent":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_bfe,lang,has,_bff){var _c00=_bfe(null,{declaredClass:"esri.TimeExtent",constructor:function(json){if(arguments.length>1){this._create(arguments[0],arguments[1]);}else{if(json){if(lang.isArray(json)){var _c01=json[0],end=json[1];this.startTime=(_c01===null||_c01==="null")?null:new Date(_c01);this.endTime=(end===null||end==="null")?null:new Date(end);}else{if(json instanceof Date){this._create(json,null);}}}}},offset:function(_c02,_c03){var _c04=new _c00();var _c05=this.startTime,end=this.endTime;if(_c05){_c04.startTime=this._getOffsettedDate(_c05,_c02,_c03);}if(end){_c04.endTime=this._getOffsettedDate(end,_c02,_c03);}return _c04;},intersection:function(_c06){return this._intersection(this,_c06);},toJson:function(){var _c07=[];var _c08=this.startTime;_c07.push(_c08?_c08.getTime():"null");var end=this.endTime;_c07.push(end?end.getTime():"null");return _c07;},_create:function(_c09,end){this.startTime=_c09?new Date(_c09.getTime()):null;this.endTime=end?new Date(end.getTime()):null;},_refData:{"esriTimeUnitsMilliseconds":{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},"esriTimeUnitsSeconds":{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},"esriTimeUnitsMinutes":{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},"esriTimeUnitsHours":{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},"esriTimeUnitsDays":{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},"esriTimeUnitsWeeks":{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},"esriTimeUnitsMonths":{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},"esriTimeUnitsYears":{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},"esriTimeUnitsDecades":{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},"esriTimeUnitsCenturies":{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(_c0a,_c0b){if(_c0a&&_c0b){var _c0c=_c0a.startTime,end1=_c0a.endTime;var _c0d=_c0b.startTime,end2=_c0b.endTime;_c0c=_c0c?_c0c.getTime():-Infinity;_c0d=_c0d?_c0d.getTime():-Infinity;end1=end1?end1.getTime():Infinity;end2=end2?end2.getTime():Infinity;var _c0e,end;if(_c0d>=_c0c&&_c0d<=end1){_c0e=_c0d;}else{if(_c0c>=_c0d&&_c0c<=end2){_c0e=_c0c;}}if(end1>=_c0d&&end1<=end2){end=end1;}else{if(end2>=_c0c&&end2<=end1){end=end2;}}if(!isNaN(_c0e)&&!isNaN(end)){var _c0f=new _c00();_c0f.startTime=(_c0e===-Infinity)?null:new Date(_c0e);_c0f.endTime=(end===Infinity)?null:new Date(end);return _c0f;}else{return null;}}else{return null;}},_getOffsettedDate:function(_c10,_c11,_c12){var data=this._refData;var _c13=new Date(_c10.getTime());if(_c11&&_c12){data=data[_c12];_c13[data.setter](_c13[data.getter]()+(_c11*data.multiplier));}return _c13;}});if(has("extend-esri")){_bff.TimeExtent=_c00;}return _c00;});},"esri/layers/LayerMapSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/LayerSource"],function(_c14,lang,has,_c15,_c16,_c17){var _c18=_c14(_c17,{declaredClass:"esri.layers.LayerMapSource",type:"mapLayer",toJson:function(){var json={type:"mapLayer",mapLayerId:this.mapLayerId,gdbVersion:this.gdbVersion};return _c16.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.LayerMapSource",_c18,_c15);}return _c18;});},"esri/geometry/geodesicUtils":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/SpatialReference","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon"],function(_c19,lang,has,_c1a,_c1b,_c1c,_c1d,_c1e){var _c1f={"esriMiles":1,"esriKilometers":1.609344,"esriFeet":5280,"esriMeters":1609.34,"esriYards":1760,"esriNauticalMiles":0.869,"esriCentimeters":160934,"esriDecimeters":16093.4,"esriInches":63360,"esriMillimeters":1609340,"esriAcres":1,"esriAres":40.4685642,"esriSquareKilometers":0.00404685642,"esriSquareMiles":0.0015625,"esriSquareFeet":43560,"esriSquareMeters":4046.85642,"esriHectares":0.404685642,"esriSquareYards":4840,"esriSquareInches":6272640,"esriSquareMillimeters":4046856420,"esriSquareCentimeters":40468564.2,"esriSquareDecimeters":404685.642};function _c20(pt){var _c21=Math.PI/180;var a=6378137;var eSq=0.006694379990197414,e=0.0818191908429643;var sinY=Math.sin(pt.y*_c21);var q=(1-eSq)*((sinY/(1-eSq*(sinY*sinY))-(1/(2*e))*Math.log((1-e*sinY)/(1+e*sinY))));var x=a*pt.x*_c21;var y=a*q*0.5;var _c22=new _c1c(x,y);return _c22;};function _c23(lat1,lon1,_c24,s){var a=6378137,b=6356752.31424518,f=1/298.257223563;var _c25=Math.sin(_c24);var _c26=Math.cos(_c24);var _c27=(1-f)*Math.tan(lat1);var _c28=1/Math.sqrt((1+_c27*_c27)),_c29=_c27*_c28;var _c2a=Math.atan2(_c27,_c26);var _c2b=_c28*_c25;var _c2c=1-_c2b*_c2b;var uSq=_c2c*(a*a-b*b)/(b*b);var A=1+uSq/16384*(4096+uSq*(-768+uSq*(320-175*uSq)));var B=uSq/1024*(256+uSq*(-128+uSq*(74-47*uSq)));var _c2d=s/(b*A),_c2e=2*Math.PI;var _c2f,_c30,_c31;while(Math.abs(_c2d-_c2e)>1e-12){_c31=Math.cos(2*_c2a+_c2d);_c2f=Math.sin(_c2d);_c30=Math.cos(_c2d);var _c32=B*_c2f*(_c31+B/4*(_c30*(-1+2*_c31*_c31)-B/6*_c31*(-3+4*_c2f*_c2f)*(-3+4*_c31*_c31)));_c2e=_c2d;_c2d=s/(b*A)+_c32;}var tmp=_c29*_c2f-_c28*_c30*_c26;var lat2=Math.atan2(_c29*_c30+_c28*_c2f*_c26,(1-f)*Math.sqrt(_c2b*_c2b+tmp*tmp));var _c33=Math.atan2(_c2f*_c25,_c28*_c30-_c29*_c2f*_c26);var C=f/16*_c2c*(4+f*(4-3*_c2c));var L=_c33-(1-C)*f*_c2b*(_c2d+C*_c2f*(_c31+C*_c30*(-1+2*_c31*_c31)));var _c34=lat2/(Math.PI/180);var _c35=(lon1+L)/(Math.PI/180);var pt=new _c1c(_c35,_c34,new _c1b({wkid:4326}));return pt;};function _c36(lat1,lon1,lat2,lon2){var a=6378137,b=6356752.31424518,f=1/298.257223563;var L=(lon2-lon1);var U1=Math.atan((1-f)*Math.tan(lat1));var U2=Math.atan((1-f)*Math.tan(lat2));var _c37=Math.sin(U1),_c38=Math.cos(U1);var _c39=Math.sin(U2),_c3a=Math.cos(U2);var _c3b=L,_c3c,_c3d=1000;var _c3e,_c3f,_c40,_c41,_c42;do{var _c43=Math.sin(_c3b),_c44=Math.cos(_c3b);_c3f=Math.sqrt((_c3a*_c43)*(_c3a*_c43)+(_c38*_c39-_c37*_c3a*_c44)*(_c38*_c39-_c37*_c3a*_c44));if(_c3f===0){return 0;}_c41=_c37*_c39+_c38*_c3a*_c44;_c42=Math.atan2(_c3f,_c41);var _c45=_c38*_c3a*_c43/_c3f;_c3e=1-_c45*_c45;_c40=_c41-2*_c37*_c39/_c3e;if(isNaN(_c40)){_c40=0;}var C=f/16*_c3e*(4+f*(4-3*_c3e));_c3c=_c3b;_c3b=L+(1-C)*f*_c45*(_c42+C*_c3f*(_c40+C*_c41*(-1+2*_c40*_c40)));}while(Math.abs(_c3b-_c3c)>1e-12&&--_c3d>0);if(_c3d===0){var _c46=6371009;var _c47=Math.acos(Math.sin(lat1)*Math.sin(lat2)+Math.cos(lat1)*Math.cos(lat2)*Math.cos(lon2-lon1))*_c46;var dLon=lon2-lon1;var y=Math.sin(dLon)*Math.cos(lat2);var x=Math.cos(lat1)*Math.sin(lat2)-Math.sin(lat1)*Math.cos(lat2)*Math.cos(dLon);var brng=Math.atan2(y,x);return {"azimuth":brng,"geodesicDistance":_c47};}var uSq=_c3e*(a*a-b*b)/(b*b);var A=1+uSq/16384*(4096+uSq*(-768+uSq*(320-175*uSq)));var B=uSq/1024*(256+uSq*(-128+uSq*(74-47*uSq)));var _c48=B*_c3f*(_c40+B/4*(_c41*(-1+2*_c40*_c40)-B/6*_c40*(-3+4*_c3f*_c3f)*(-3+4*_c40*_c40)));var s=b*A*(_c42-_c48);var _c49=Math.atan2(_c3a*Math.sin(_c3b),_c38*_c39-_c37*_c3a*Math.cos(_c3b));var _c4a=Math.atan2(_c38*Math.sin(_c3b),_c38*_c39*Math.cos(_c3b)-_c37*_c3a);var _c4b={azimuth:_c49,geodesicDistance:s,reverseAzimuth:_c4a};return _c4b;};function _c4c(geom,_c4d){var _c4e=Math.PI/180;var _c4f=6371008.771515059;if(_c4d<_c4f/10000){_c4d=_c4f/10000;}if(!(geom instanceof _c1d||geom instanceof _c1e)){var msg="_geodesicDensify: the input geometry is neither polyline nor polygon";console.error(msg);throw new Error(msg);}var _c50=geom instanceof _c1d,_c51=_c50?geom.paths:geom.rings,_c52=[],_c53;_c19.forEach(_c51,function(ring){_c52.push(_c53=[]);_c53.push([ring[0][0],ring[0][1]]);var lon1,lat1,lon2,lat2,i,j;lon1=ring[0][0]*_c4e;lat1=ring[0][1]*_c4e;for(i=0;i<ring.length-1;i++){lon2=ring[i+1][0]*_c4e;lat2=ring[i+1][1]*_c4e;var _c54=_c36(lat1,lon1,lat2,lon2);var _c55=_c54.azimuth;var _c56=_c54.geodesicDistance;var _c57=_c56/_c4d;if(_c57>1){for(j=1;j<=_c57-1;j++){var _c58=j*_c4d;var pt=_c23(lat1,lon1,_c55,_c58);_c53.push([pt.x,pt.y]);}var _c59=(_c56+Math.floor(_c57-1)*_c4d)/2;var _c5a=_c23(lat1,lon1,_c55,_c59);_c53.push([_c5a.x,_c5a.y]);}var _c5b=_c23(lat1,lon1,_c55,_c56);_c53.push([_c5b.x,_c5b.y]);lon1=_c5b.x*_c4e;lat1=_c5b.y*_c4e;}});if(_c50){return new _c1d({paths:_c52,spatialReference:geom.spatialReference});}else{return new _c1e({rings:_c52,spatialReference:geom.spatialReference});}};function _c5c(_c5d,_c5e){var _c5f=Math.PI/180;var _c60=[];_c19.forEach(_c5d,function(_c61,idx){var _c62=0;_c19.forEach(_c61.paths,function(path,idx){var _c63=0;var i,lon1,lon2,lat1,lat2,_c64;for(i=1;i<path.length;i++){lon1=path[i-1][0]*_c5f;lon2=path[i][0]*_c5f;lat1=path[i-1][1]*_c5f;lat2=path[i][1]*_c5f;_c64=_c36(lat1,lon1,lat2,lon2);_c63+=_c64.geodesicDistance/1609.344;}_c62+=_c63;});_c62*=_c1f[_c5e];_c60.push(_c62);});return _c60;};function _c65(_c66,_c67){var _c68=[];_c19.forEach(_c66,function(_c69,idx){var _c6a=_c4c(_c69,10000);_c68.push(_c6a);});var _c6b=[];var _c6c,_c6d;_c19.forEach(_c68,function(_c6e,idx){var area=0;_c19.forEach(_c6e.rings,function(ring,idx){_c6c=_c20(new _c1c(ring[0][0],ring[0][1]));_c6d=_c20(new _c1c(ring[ring.length-1][0],ring[ring.length-1][1]));var _c6f=_c6d.x*_c6c.y-_c6c.x*_c6d.y;var i;for(i=0;i<ring.length-1;i++){_c6c=_c20(new _c1c(ring[i+1][0],ring[i+1][1]));_c6d=_c20(new _c1c(ring[i][0],ring[i][1]));_c6f+=_c6d.x*_c6c.y-_c6c.x*_c6d.y;}_c6f/=4046.87;area+=_c6f;});area*=_c1f[_c67];_c6b.push(area/(-2));});return _c6b;};var _c70={geodesicDensify:_c4c,geodesicLengths:_c5c,geodesicAreas:_c65,_unitsDictionary:_c1f,_toEqualAreaPoint:_c20,_directGeodeticSolver:_c23,_inverseGeodeticSolver:_c36};if(has("extend-esri")){lang.mixin(lang.getObject("geometry",true,_c1a),_c70);}return _c70;});},"esri/WKIDUnitConversion":function(){define(["dojo/has","esri/kernel"],function(has,_c71){var obj={values:[1,0.2011661949,0.3047997101815088,0.3048006096012192,0.3048,0.304797265,0.9143985307444408,20.11678249437587,0.9143984146160287,20.11676512155263,0.3047994715386762,0.91439523,50000,150000],2000:0,2001:0,2002:0,2003:0,2004:0,2005:0,2006:0,2007:0,2008:0,2009:0,2010:0,2011:0,2012:0,2013:0,2014:0,2015:0,2016:0,2017:0,2018:0,2019:0,2020:0,2021:0,2022:0,2023:0,2024:0,2025:0,2026:0,2027:0,2028:0,2029:0,2030:0,2031:0,2032:0,2033:0,2034:0,2035:0,2036:0,2037:0,2038:0,2039:0,2040:0,2041:0,2042:0,2043:0,2044:0,2045:0,2056:0,2057:0,2058:0,2059:0,2060:0,2061:0,2062:0,2063:0,2064:0,2065:0,2066:1,2067:0,2068:0,2069:0,2070:0,2071:0,2072:0,2073:0,2074:0,2075:0,2076:0,2077:0,2078:0,2079:0,2080:0,2081:0,2082:0,2083:0,2084:0,2085:0,2086:0,2087:0,2088:0,2089:0,2090:0,2091:0,2092:0,2093:0,2094:0,2095:0,2096:0,2097:0,2098:0,2099:0,2100:0,2101:0,2102:0,2103:0,2104:0,2105:0,2106:0,2107:0,2108:0,2109:0,2110:0,2111:0,2112:0,2113:0,2114:0,2115:0,2116:0,2117:0,2118:0,2119:0,2120:0,2121:0,2122:0,2123:0,2124:0,2125:0,2126:0,2127:0,2128:0,2129:0,2130:0,2131:0,2132:0,2133:0,2134:0,2135:0,2136:2,2137:0,2138:0,2139:0,2140:0,2141:0,2142:0,2143:0,2144:0,2145:0,2146:0,2147:0,2148:0,2149:0,2150:0,2151:0,2152:0,2153:0,2154:0,2155:3,2157:0,2158:0,2159:2,2160:2,2161:0,2162:0,2163:0,2164:0,2165:0,2166:0,2167:0,2168:0,2169:0,2170:0,2172:0,2173:0,2174:0,2175:0,2176:0,2177:0,2178:0,2179:0,2180:0,2181:0,2182:0,2183:0,2184:0,2185:0,2186:0,2187:0,2188:0,2189:0,2190:0,2192:0,2193:0,2195:0,2196:0,2197:0,2198:0,2200:0,2201:0,2202:0,2203:0,2204:3,2205:0,2206:0,2207:0,2208:0,2209:0,2210:0,2211:0,2212:0,2213:0,2214:0,2215:0,2216:0,2217:0,2219:0,2220:0,2222:4,2223:4,2224:4,2225:3,2226:3,2227:3,2228:3,2229:3,2230:3,2231:3,2232:3,2233:3,2234:3,2235:3,2236:3,2237:3,2238:3,2239:3,2240:3,2241:3,2242:3,2243:3,2244:3,2245:3,2246:3,2247:3,2248:3,2249:3,2250:3,2251:4,2252:4,2253:4,2254:3,2255:3,2256:4,2257:3,2258:3,2259:3,2260:3,2261:3,2262:3,2263:3,2264:3,2265:4,2266:4,2267:3,2268:3,2269:4,2270:4,2271:3,2272:3,2273:4,2274:3,2275:3,2276:3,2277:3,2278:3,2279:3,2280:4,2281:4,2282:4,2283:3,2284:3,2285:3,2286:3,2287:3,2288:3,2289:3,2290:0,2291:0,2292:0,2294:0,2295:0,2308:0,2309:0,2310:0,2311:0,2312:0,2313:0,2314:5,2315:0,2316:0,2317:0,2318:0,2319:0,2320:0,2321:0,2322:0,2323:0,2324:0,2325:0,2326:0,2327:0,2328:0,2329:0,2330:0,2331:0,2332:0,2333:0,2334:0,2335:0,2336:0,2337:0,2338:0,2339:0,2340:0,2341:0,2342:0,2343:0,2344:0,2345:0,2346:0,2347:0,2348:0,2349:0,2350:0,2351:0,2352:0,2353:0,2354:0,2355:0,2356:0,2357:0,2358:0,2359:0,2360:0,2361:0,2362:0,2363:0,2364:0,2365:0,2366:0,2367:0,2368:0,2369:0,2370:0,2371:0,2372:0,2373:0,2374:0,2375:0,2376:0,2377:0,2378:0,2379:0,2380:0,2381:0,2382:0,2383:0,2384:0,2385:0,2386:0,2387:0,2388:0,2389:0,2390:0,2391:0,2392:0,2393:0,2394:0,2395:0,2396:0,2397:0,2398:0,2399:0,2400:0,2401:0,2402:0,2403:0,2404:0,2405:0,2406:0,2407:0,2408:0,2409:0,2410:0,2411:0,2412:0,2413:0,2414:0,2415:0,2416:0,2417:0,2418:0,2419:0,2420:0,2421:0,2422:0,2423:0,2424:0,2425:0,2426:0,2427:0,2428:0,2429:0,2430:0,2431:0,2432:0,2433:0,2434:0,2435:0,2436:0,2437:0,2438:0,2439:0,2440:0,2441:0,2442:0,2443:0,2444:0,2445:0,2446:0,2447:0,2448:0,2449:0,2450:0,2451:0,2452:0,2453:0,2454:0,2455:0,2456:0,2457:0,2458:0,2459:0,2460:0,2461:0,2462:0,2523:0,2524:0,2525:0,2526:0,2527:0,2528:0,2529:0,2530:0,2531:0,2532:0,2533:0,2534:0,2535:0,2536:0,2537:0,2538:0,2539:0,2540:0,2541:0,2542:0,2543:0,2544:0,2545:0,2546:0,2547:0,2548:0,2549:0,2550:0,2551:0,2552:0,2553:0,2554:0,2555:0,2556:0,2557:0,2558:0,2559:0,2560:0,2561:0,2562:0,2563:0,2564:0,2565:0,2566:0,2567:0,2568:0,2569:0,2570:0,2571:0,2572:0,2573:0,2574:0,2575:0,2576:0,2577:0,2578:0,2579:0,2580:0,2581:0,2582:0,2583:0,2584:0,2585:0,2586:0,2587:0,2588:0,2589:0,2590:0,2591:0,2592:0,2593:0,2594:0,2595:0,2596:0,2597:0,2598:0,2599:0,2600:0,2601:0,2602:0,2603:0,2604:0,2605:0,2606:0,2607:0,2608:0,2609:0,2610:0,2611:0,2612:0,2613:0,2614:0,2615:0,2616:0,2617:0,2618:0,2619:0,2620:0,2621:0,2622:0,2623:0,2624:0,2625:0,2626:0,2627:0,2628:0,2629:0,2630:0,2631:0,2632:0,2633:0,2634:0,2635:0,2636:0,2637:0,2638:0,2639:0,2640:0,2641:0,2642:0,2643:0,2644:0,2645:0,2646:0,2647:0,2648:0,2649:0,2650:0,2651:0,2652:0,2653:0,2654:0,2655:0,2656:0,2657:0,2658:0,2659:0,2660:0,2661:0,2662:0,2663:0,2664:0,2665:0,2666:0,2667:0,2668:0,2669:0,2670:0,2671:0,2672:0,2673:0,2674:0,2675:0,2676:0,2677:0,2678:0,2679:0,2680:0,2681:0,2682:0,2683:0,2684:0,2685:0,2686:0,2687:0,2688:0,2689:0,2690:0,2691:0,2692:0,2693:0,2694:0,2695:0,2696:0,2697:0,2698:0,2699:0,2700:0,2701:0,2702:0,2703:0,2704:0,2705:0,2706:0,2707:0,2708:0,2709:0,2710:0,2711:0,2712:0,2713:0,2714:0,2715:0,2716:0,2717:0,2718:0,2719:0,2720:0,2721:0,2722:0,2723:0,2724:0,2725:0,2726:0,2727:0,2728:0,2729:0,2730:0,2731:0,2732:0,2733:0,2734:0,2735:0,2736:0,2737:0,2738:0,2739:0,2740:0,2741:0,2742:0,2743:0,2744:0,2745:0,2746:0,2747:0,2748:0,2749:0,2750:0,2751:0,2752:0,2753:0,2754:0,2755:0,2756:0,2757:0,2758:0,2759:0,2760:0,2761:0,2762:0,2763:0,2764:0,2765:0,2766:0,2767:0,2768:0,2769:0,2770:0,2771:0,2772:0,2773:0,2774:0,2775:0,2776:0,2777:0,2778:0,2779:0,2780:0,2781:0,2782:0,2783:0,2784:0,2785:0,2786:0,2787:0,2788:0,2789:0,2790:0,2791:0,2792:0,2793:0,2794:0,2795:0,2796:0,2797:0,2798:0,2799:0,2800:0,2801:0,2802:0,2803:0,2804:0,2805:0,2806:0,2807:0,2808:0,2809:0,2810:0,2811:0,2812:0,2813:0,2814:0,2815:0,2816:0,2817:0,2818:0,2819:0,2820:0,2821:0,2822:0,2823:0,2824:0,2825:0,2826:0,2827:0,2828:0,2829:0,2830:0,2831:0,2832:0,2833:0,2834:0,2835:0,2836:0,2837:0,2838:0,2839:0,2840:0,2841:0,2842:0,2843:0,2844:0,2845:0,2846:0,2847:0,2848:0,2849:0,2850:0,2851:0,2852:0,2853:0,2854:0,2855:0,2856:0,2857:0,2858:0,2859:0,2860:0,2861:0,2862:0,2863:0,2864:0,2865:0,2866:0,2867:4,2868:4,2869:4,2870:3,2871:3,2872:3,2873:3,2874:3,2875:3,2876:3,2877:3,2878:3,2879:3,2880:3,2881:3,2882:3,2883:3,2884:3,2885:3,2886:3,2887:3,2888:3,2891:3,2892:3,2893:3,2894:3,2895:3,2896:4,2897:4,2898:4,2899:3,2900:3,2901:4,2902:3,2903:3,2904:3,2905:3,2906:3,2907:3,2908:3,2909:4,2910:4,2911:3,2912:3,2913:4,2914:4,2915:3,2916:3,2917:3,2918:3,2919:3,2920:3,2921:4,2922:4,2923:4,2924:3,2925:3,2926:3,2927:3,2928:3,2929:3,2930:3,2931:0,2932:0,2933:0,2935:0,2936:0,2937:0,2938:0,2939:0,2940:0,2941:0,2942:0,2943:0,2944:0,2945:0,2946:0,2947:0,2948:0,2949:0,2950:0,2951:0,2952:0,2953:0,2954:0,2955:0,2956:0,2957:0,2958:0,2959:0,2960:0,2961:0,2962:0,2964:3,2965:3,2966:3,2967:3,2968:3,2969:0,2970:0,2971:0,2972:0,2973:0,2975:0,2976:0,2977:0,2978:0,2979:0,2980:0,2981:0,2982:0,2984:0,2985:0,2986:0,2987:0,2988:0,2989:0,2991:0,2992:4,2993:0,2994:4,2995:0,2996:0,2997:0,2998:0,2999:0,3000:0,3001:0,3002:0,3003:0,3004:0,3005:0,3006:0,3007:0,3008:0,3009:0,3010:0,3011:0,3012:0,3013:0,3014:0,3015:0,3016:0,3017:0,3018:0,3019:0,3020:0,3021:0,3022:0,3023:0,3024:0,3025:0,3026:0,3027:0,3028:0,3029:0,3030:0,3031:0,3032:0,3033:0,3034:0,3035:0,3036:0,3037:0,3054:0,3055:0,3056:0,3057:0,3058:0,3059:0,3060:0,3061:0,3062:0,3063:0,3064:0,3065:0,3066:0,3067:0,3068:0,3069:0,3070:0,3071:0,3072:0,3073:0,3074:0,3075:0,3076:0,3077:0,3078:0,3079:0,3080:4,3081:0,3082:0,3083:0,3084:0,3085:0,3086:0,3087:0,3088:0,3089:3,3090:0,3091:3,3092:0,3093:0,3094:0,3095:0,3096:0,3097:0,3098:0,3099:0,3100:0,3101:0,3102:3,3106:0,3107:0,3108:0,3109:0,3110:0,3111:0,3112:0,3113:0,3114:0,3115:0,3116:0,3117:0,3118:0,3119:0,3120:0,3121:0,3122:0,3123:0,3124:0,3125:0,3126:0,3127:0,3128:0,3129:0,3130:0,3131:0,3132:0,3133:0,3134:0,3135:0,3136:0,3137:0,3138:0,3141:0,3142:0,3148:0,3149:0,3153:0,3154:0,3155:0,3156:0,3157:0,3158:0,3159:0,3160:0,3161:0,3162:0,3163:0,3164:0,3165:0,3166:0,3169:0,3170:0,3171:0,3172:0,3174:0,3175:0,3176:0,3177:0,3178:0,3179:0,3180:0,3181:0,3182:0,3183:0,3184:0,3185:0,3186:0,3187:0,3188:0,3189:0,3190:0,3191:0,3192:0,3193:0,3194:0,3195:0,3196:0,3197:0,3198:0,3199:0,3200:0,3201:0,3202:0,3203:0,3294:0,3296:0,3297:0,3298:0,3299:0,3300:0,3301:0,3302:0,3303:0,3304:0,3305:0,3306:0,3307:0,3308:0,3309:0,3310:0,3311:0,3312:0,3313:0,3314:0,3315:0,3316:0,3317:0,3318:0,3319:0,3320:0,3321:0,3322:0,3323:0,3324:0,3325:0,3326:0,3327:0,3328:0,3329:0,3330:0,3331:0,3332:0,3333:0,3334:0,3335:0,3336:0,3337:0,3338:0,3339:0,3340:0,3341:0,3342:0,3343:0,3344:0,3345:0,3346:0,3347:0,3348:0,3349:0,3350:0,3351:0,3352:0,3353:0,3354:0,3355:0,3356:0,3357:0,3358:0,3359:3,3360:0,3361:4,3362:0,3363:3,3364:0,3365:3,3366:5,3367:0,3368:0,3369:0,3370:0,3371:0,3372:0,3373:0,3374:0,3375:0,3376:0,3377:0,3378:0,3379:0,3380:0,3381:0,3382:0,3383:0,3384:0,3385:0,3386:0,3387:0,3388:0,3391:0,3392:0,3393:0,3394:0,3395:0,3396:0,3397:0,3398:0,3399:0,3400:0,3401:0,3402:0,3403:0,3404:3,3405:0,3406:0,3407:5,3408:0,3409:0,3410:0,3411:0,3412:0,3413:0,3414:0,3415:0,3416:0,3417:3,3418:3,3419:3,3420:3,3421:3,3422:3,3423:3,3424:3,3425:3,3426:3,3427:3,3428:3,3429:3,3430:3,3431:3,3432:3,3433:3,3434:3,3435:3,3436:3,3437:3,3438:3,3439:0,3440:0,3441:3,3442:3,3443:3,3444:3,3445:3,3446:3,3447:0,3448:0,3449:0,3450:0,3453:3,3456:3,3457:3,3458:3,3459:3,3460:0,3461:0,3462:0,3463:0,3464:0,3560:3,3561:3,3562:3,3563:3,3564:3,3565:3,3566:3,3567:3,3568:3,3569:3,3570:3,3571:0,3572:0,3573:0,3574:0,3575:0,3576:0,3577:0,3578:0,3579:0,3580:0,3581:0,3582:3,3583:0,3584:3,3585:0,3586:3,3587:0,3588:4,3589:0,3590:4,3591:0,3592:0,3593:4,3594:0,3595:0,3596:0,3597:0,3598:3,3599:0,3600:3,3601:0,3602:0,3603:0,3604:0,3605:4,3606:0,3607:0,3608:3,3609:0,3610:3,3611:0,3612:3,3613:0,3614:3,3615:0,3616:3,3617:0,3618:3,3619:0,3620:3,3621:0,3622:3,3623:0,3624:3,3625:0,3626:3,3627:0,3628:3,3629:0,3630:3,3631:0,3632:3,3633:0,3634:4,3635:0,3636:4,3637:0,3638:0,3639:0,3640:3,3641:0,3642:3,3643:0,3644:4,3645:0,3646:4,3647:0,3648:4,3649:0,3650:3,3651:0,3652:3,3653:0,3654:3,3655:0,3656:4,3657:0,3658:3,3659:0,3660:3,3661:0,3662:3,3663:0,3664:3,3665:0,3666:0,3667:0,3668:3,3669:0,3670:3,3671:0,3672:3,3673:0,3674:3,3675:0,3676:4,3677:3,3678:0,3679:4,3680:3,3681:0,3682:4,3683:3,3684:0,3685:0,3686:3,3687:0,3688:3,3689:0,3690:3,3691:0,3692:3,3693:0,3694:0,3695:0,3696:3,3697:0,3698:3,3699:0,3700:3,3701:0,3702:0,3703:0,3704:0,3705:0,3706:0,3707:0,3708:0,3709:0,3710:0,3711:0,3712:0,3713:0,3714:0,3715:0,3716:0,3717:0,3718:0,3719:0,3720:0,3721:0,3722:0,3723:0,3724:0,3725:0,3726:0,3727:0,3728:3,3729:3,3730:3,3731:3,3732:3,3733:3,3734:3,3735:3,3736:3,3737:3,3738:3,3739:3,3753:3,3754:3,3755:3,3756:3,3757:3,3758:3,3759:3,3760:3,3761:0,3762:0,3763:0,3764:0,3765:0,3766:0,3767:0,3768:0,3769:0,3770:0,3771:0,3772:0,3773:0,3775:0,3776:0,3777:0,3779:0,3780:0,3781:0,3783:0,3784:0,3788:0,3789:0,3790:0,3791:0,3793:0,3794:0,3797:0,3798:0,3799:0,3800:0,3801:0,3802:0,3812:0,3814:0,3815:0,3816:0,3832:0,3833:0,3834:0,3835:0,3836:0,3837:0,3838:0,3839:0,3840:0,3841:0,3851:0,3852:0,3857:0,3890:0,3891:0,3892:0,3893:0,3912:0,3920:0,3942:0,3943:0,3944:0,3945:0,3946:0,3947:0,3948:0,3949:0,3950:0,3968:0,3969:0,3970:0,3973:0,3974:0,3975:0,3976:0,3978:0,3979:0,3986:0,3987:0,3988:0,3989:0,3991:3,3992:3,3994:0,3995:0,3996:0,3997:0,20002:0,20003:0,20004:0,20005:0,20006:0,20007:0,20008:0,20009:0,20010:0,20011:0,20012:0,20013:0,20014:0,20015:0,20016:0,20017:0,20018:0,20019:0,20020:0,20021:0,20022:0,20023:0,20024:0,20025:0,20026:0,20027:0,20028:0,20029:0,20030:0,20031:0,20032:0,20062:0,20063:0,20064:0,20065:0,20066:0,20067:0,20068:0,20069:0,20070:0,20071:0,20072:0,20073:0,20074:0,20075:0,20076:0,20077:0,20078:0,20079:0,20080:0,20081:0,20082:0,20083:0,20084:0,20085:0,20086:0,20087:0,20088:0,20089:0,20090:0,20091:0,20092:0,20135:0,20136:0,20137:0,20138:0,20248:0,20249:0,20250:0,20251:0,20252:0,20253:0,20254:0,20255:0,20256:0,20257:0,20258:0,20348:0,20349:0,20350:0,20351:0,20352:0,20353:0,20354:0,20355:0,20356:0,20357:0,20358:0,20436:0,20437:0,20438:0,20439:0,20440:0,20499:0,20538:0,20539:0,20790:0,20822:0,20823:0,20824:0,20934:0,20935:0,20936:0,21035:0,21036:0,21037:0,21095:0,21096:0,21097:0,21148:0,21149:0,21150:0,21291:0,21292:0,21413:0,21414:0,21415:0,21416:0,21417:0,21418:0,21419:0,21420:0,21421:0,21422:0,21423:0,21473:0,21474:0,21475:0,21476:0,21477:0,21478:0,21479:0,21480:0,21481:0,21482:0,21483:0,21500:0,21780:0,21781:0,21817:0,21818:0,21891:0,21892:0,21893:0,21894:0,21896:0,21897:0,21898:0,21899:0,22032:0,22033:0,22091:0,22092:0,22171:0,22172:0,22173:0,22174:0,22175:0,22176:0,22177:0,22181:0,22182:0,22183:0,22184:0,22185:0,22186:0,22187:0,22191:0,22192:0,22193:0,22194:0,22195:0,22196:0,22197:0,22234:0,22235:0,22236:0,22332:0,22391:0,22392:0,22521:0,22522:0,22523:0,22524:0,22525:0,22700:0,22770:0,22780:0,22832:0,22991:0,22992:0,22993:0,22994:0,23028:0,23029:0,23030:0,23031:0,23032:0,23033:0,23034:0,23035:0,23036:0,23037:0,23038:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,23830:0,23831:0,23832:0,23833:0,23834:0,23835:0,23836:0,23837:0,23838:0,23839:0,23840:0,23841:0,23842:0,23843:0,23844:0,23845:0,23846:0,23847:0,23848:0,23849:0,23850:0,23851:0,23852:0,23853:0,23866:0,23867:0,23868:0,23869:0,23870:0,23871:0,23872:0,23877:0,23878:0,23879:0,23880:0,23881:0,23882:0,23883:0,23884:0,23886:0,23887:0,23888:0,23889:0,23890:0,23891:0,23892:0,23893:0,23894:0,23946:0,23947:0,23948:0,24047:0,24048:0,24100:0,24200:0,24305:0,24306:0,24311:0,24312:0,24313:0,24342:0,24343:0,24344:0,24345:0,24346:0,24347:0,24370:6,24371:6,24372:6,24373:6,24374:6,24375:0,24376:0,24377:0,24378:0,24379:0,24380:0,24381:0,24382:6,24383:0,24500:0,24547:0,24548:0,24571:7,24600:0,24718:0,24719:0,24720:0,24721:0,24817:0,24818:0,24819:0,24820:0,24821:0,24877:0,24878:0,24879:0,24880:0,24881:0,24882:0,24891:0,24892:0,24893:0,25000:0,25231:0,25391:0,25392:0,25393:0,25394:0,25395:0,25828:0,25829:0,25830:0,25831:0,25832:0,25833:0,25834:0,25835:0,25836:0,25837:0,25838:0,25884:0,25932:0,26191:0,26192:0,26193:0,26194:0,26195:0,26237:0,26331:0,26332:0,26391:0,26392:0,26393:0,26432:0,26591:0,26592:0,26632:0,26692:0,26701:0,26702:0,26703:0,26704:0,26705:0,26706:0,26707:0,26708:0,26709:0,26710:0,26711:0,26712:0,26713:0,26714:0,26715:0,26716:0,26717:0,26718:0,26719:0,26720:0,26721:0,26722:0,26729:3,26730:3,26731:3,26732:3,26733:3,26734:3,26735:3,26736:3,26737:3,26738:3,26739:3,26740:3,26741:3,26742:3,26743:3,26744:3,26745:3,26746:3,26747:3,26748:3,26749:3,26750:3,26751:3,26752:3,26753:3,26754:3,26755:3,26756:3,26757:3,26758:3,26759:3,26760:3,26761:3,26762:3,26763:3,26764:3,26765:3,26766:3,26767:3,26768:3,26769:3,26770:3,26771:3,26772:3,26773:3,26774:3,26775:3,26776:3,26777:3,26778:3,26779:3,26780:3,26781:3,26782:3,26783:3,26784:3,26785:3,26786:3,26787:3,26788:3,26789:3,26790:3,26791:3,26792:3,26793:3,26794:3,26795:3,26796:3,26797:3,26798:3,26799:3,26801:3,26802:3,26803:3,26811:3,26812:3,26813:3,26901:0,26902:0,26903:0,26904:0,26905:0,26906:0,26907:0,26908:0,26909:0,26910:0,26911:0,26912:0,26913:0,26914:0,26915:0,26916:0,26917:0,26918:0,26919:0,26920:0,26921:0,26922:0,26923:0,26929:0,26930:0,26931:0,26932:0,26933:0,26934:0,26935:0,26936:0,26937:0,26938:0,26939:0,26940:0,26941:0,26942:0,26943:0,26944:0,26945:0,26946:0,26948:0,26949:0,26950:0,26951:0,26952:0,26953:0,26954:0,26955:0,26956:0,26957:0,26958:0,26959:0,26960:0,26961:0,26962:0,26963:0,26964:0,26965:0,26966:0,26967:0,26968:0,26969:0,26970:0,26971:0,26972:0,26973:0,26974:0,26975:0,26976:0,26977:0,26978:0,26979:0,26980:0,26981:0,26982:0,26983:0,26984:0,26985:0,26986:0,26987:0,26988:0,26989:0,26990:0,26991:0,26992:0,26993:0,26994:0,26995:0,26996:0,26997:0,26998:0,27037:0,27038:0,27039:0,27040:0,27120:0,27200:0,27205:0,27206:0,27207:0,27208:0,27209:0,27210:0,27211:0,27212:0,27213:0,27214:0,27215:0,27216:0,27217:0,27218:0,27219:0,27220:0,27221:0,27222:0,27223:0,27224:0,27225:0,27226:0,27227:0,27228:0,27229:0,27230:0,27231:0,27232:0,27258:0,27259:0,27260:0,27291:8,27292:8,27391:0,27392:0,27393:0,27394:0,27395:0,27396:0,27397:0,27398:0,27429:0,27492:0,27500:0,27561:0,27562:0,27563:0,27564:0,27571:0,27572:0,27573:0,27574:0,27581:0,27582:0,27583:0,27584:0,27591:0,27592:0,27593:0,27594:0,27700:0,28191:0,28192:0,28193:0,28232:0,28348:0,28349:0,28350:0,28351:0,28352:0,28353:0,28354:0,28355:0,28356:0,28357:0,28358:0,28402:0,28403:0,28404:0,28405:0,28406:0,28407:0,28408:0,28409:0,28410:0,28411:0,28412:0,28413:0,28414:0,28415:0,28416:0,28417:0,28418:0,28419:0,28420:0,28421:0,28422:0,28423:0,28424:0,28425:0,28426:0,28427:0,28428:0,28429:0,28430:0,28431:0,28432:0,28462:0,28463:0,28464:0,28465:0,28466:0,28467:0,28468:0,28469:0,28470:0,28471:0,28472:0,28473:0,28474:0,28475:0,28476:0,28477:0,28478:0,28479:0,28480:0,28481:0,28482:0,28483:0,28484:0,28485:0,28486:0,28487:0,28488:0,28489:0,28490:0,28491:0,28492:0,28600:0,28991:0,28992:0,29100:0,29101:0,29118:0,29119:0,29120:0,29121:0,29122:0,29168:0,29169:0,29170:0,29171:0,29172:0,29177:0,29178:0,29179:0,29180:0,29181:0,29182:0,29183:0,29184:0,29185:0,29187:0,29188:0,29189:0,29190:0,29191:0,29192:0,29193:0,29194:0,29195:0,29220:0,29221:0,29333:0,29635:0,29636:0,29738:0,29739:0,29849:0,29850:0,29871:9,29872:10,29873:0,29900:0,29901:0,29902:0,29903:0,30161:0,30162:0,30163:0,30164:0,30165:0,30166:0,30167:0,30168:0,30169:0,30170:0,30171:0,30172:0,30173:0,30174:0,30175:0,30176:0,30177:0,30178:0,30179:0,30200:1,30339:0,30340:0,30491:0,30492:0,30493:0,30494:0,30591:0,30592:0,30729:0,30730:0,30731:0,30732:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31251:0,31252:0,31253:0,31254:0,31255:0,31256:0,31257:0,31258:0,31259:0,31265:0,31266:0,31267:0,31268:0,31275:0,31276:0,31277:0,31278:0,31279:0,31281:0,31282:0,31283:0,31284:0,31285:0,31286:0,31287:0,31288:0,31289:0,31290:0,31291:0,31292:0,31293:0,31294:0,31295:0,31296:0,31297:0,31370:0,31461:0,31462:0,31463:0,31464:0,31465:0,31466:0,31467:0,31468:0,31469:0,31491:0,31492:0,31493:0,31494:0,31495:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31901:0,31917:0,31918:0,31919:0,31920:0,31921:0,31922:0,31971:0,31972:0,31973:0,31974:0,31975:0,31976:0,31977:0,31978:0,31979:0,31980:0,31981:0,31982:0,31983:0,31984:0,31985:0,31986:0,31987:0,31988:0,31989:0,31990:0,31991:0,31992:0,31993:0,31994:0,31995:0,31996:0,31997:0,31998:0,31999:0,32000:0,32001:3,32002:3,32003:3,32005:3,32006:3,32007:3,32008:3,32009:3,32010:3,32011:3,32012:3,32013:3,32014:3,32015:3,32016:3,32017:3,32018:3,32019:3,32020:3,32021:3,32022:3,32023:3,32024:3,32025:3,32026:3,32027:3,32028:3,32029:3,32030:3,32031:3,32033:3,32034:3,32035:3,32036:3,32037:3,32038:3,32039:3,32040:3,32041:3,32042:3,32043:3,32044:3,32045:3,32046:3,32047:3,32048:3,32049:3,32050:3,32051:3,32052:3,32053:3,32054:3,32055:3,32056:3,32057:3,32058:3,32059:3,32060:3,32061:0,32062:0,32064:3,32065:3,32066:3,32067:3,32074:3,32075:3,32076:3,32077:3,32081:0,32082:0,32083:0,32084:0,32085:0,32086:0,32098:0,32099:3,32100:0,32104:0,32107:0,32108:0,32109:0,32110:0,32111:0,32112:0,32113:0,32114:0,32115:0,32116:0,32117:0,32118:0,32119:0,32120:0,32121:0,32122:0,32123:0,32124:0,32125:0,32126:0,32127:0,32128:0,32129:0,32130:0,32133:0,32134:0,32135:0,32136:0,32137:0,32138:0,32139:0,32140:0,32141:0,32142:0,32143:0,32144:0,32145:0,32146:0,32147:0,32148:0,32149:0,32150:0,32151:0,32152:0,32153:0,32154:0,32155:0,32156:0,32157:0,32158:0,32161:0,32164:3,32165:3,32166:3,32167:3,32180:0,32181:0,32182:0,32183:0,32184:0,32185:0,32186:0,32187:0,32188:0,32189:0,32190:0,32191:0,32192:0,32193:0,32194:0,32195:0,32196:0,32197:0,32198:0,32199:0,32201:0,32202:0,32203:0,32204:0,32205:0,32206:0,32207:0,32208:0,32209:0,32210:0,32211:0,32212:0,32213:0,32214:0,32215:0,32216:0,32217:0,32218:0,32219:0,32220:0,32221:0,32222:0,32223:0,32224:0,32225:0,32226:0,32227:0,32228:0,32229:0,32230:0,32231:0,32232:0,32233:0,32234:0,32235:0,32236:0,32237:0,32238:0,32239:0,32240:0,32241:0,32242:0,32243:0,32244:0,32245:0,32246:0,32247:0,32248:0,32249:0,32250:0,32251:0,32252:0,32253:0,32254:0,32255:0,32256:0,32257:0,32258:0,32259:0,32260:0,32301:0,32302:0,32303:0,32304:0,32305:0,32306:0,32307:0,32308:0,32309:0,32310:0,32311:0,32312:0,32313:0,32314:0,32315:0,32316:0,32317:0,32318:0,32319:0,32320:0,32321:0,32322:0,32323:0,32324:0,32325:0,32326:0,32327:0,32328:0,32329:0,32330:0,32331:0,32332:0,32333:0,32334:0,32335:0,32336:0,32337:0,32338:0,32339:0,32340:0,32341:0,32342:0,32343:0,32344:0,32345:0,32346:0,32347:0,32348:0,32349:0,32350:0,32351:0,32352:0,32353:0,32354:0,32355:0,32356:0,32357:0,32358:0,32359:0,32360:0,32601:0,32602:0,32603:0,32604:0,32605:0,32606:0,32607:0,32608:0,32609:0,32610:0,32611:0,32612:0,32613:0,32614:0,32615:0,32616:0,32617:0,32618:0,32619:0,32620:0,32621:0,32622:0,32623:0,32624:0,32625:0,32626:0,32627:0,32628:0,32629:0,32630:0,32631:0,32632:0,32633:0,32634:0,32635:0,32636:0,32637:0,32638:0,32639:0,32640:0,32641:0,32642:0,32643:0,32644:0,32645:0,32646:0,32647:0,32648:0,32649:0,32650:0,32651:0,32652:0,32653:0,32654:0,32655:0,32656:0,32657:0,32658:0,32659:0,32660:0,32661:0,32662:0,32664:3,32665:3,32666:3,32667:3,32701:0,32702:0,32703:0,32704:0,32705:0,32706:0,32707:0,32708:0,32709:0,32710:0,32711:0,32712:0,32713:0,32714:0,32715:0,32716:0,32717:0,32718:0,32719:0,32720:0,32721:0,32722:0,32723:0,32724:0,32725:0,32726:0,32727:0,32728:0,32729:0,32730:0,32731:0,32732:0,32733:0,32734:0,32735:0,32736:0,32737:0,32738:0,32739:0,32740:0,32741:0,32742:0,32743:0,32744:0,32745:0,32746:0,32747:0,32748:0,32749:0,32750:0,32751:0,32752:0,32753:0,32754:0,32755:0,32756:0,32757:0,32758:0,32759:0,32760:0,32761:0,32766:0,53001:0,53002:0,53003:0,53004:0,53008:0,53009:0,53010:0,53011:0,53012:0,53013:0,53014:0,53015:0,53016:0,53017:0,53018:0,53019:0,53021:0,53022:0,53023:0,53024:0,53025:0,53026:0,53027:0,53028:0,53029:0,53030:0,53031:0,53032:0,53034:0,53042:0,53043:0,53044:0,53045:0,53046:0,53048:0,53049:0,54001:0,54002:0,54003:0,54004:0,54008:0,54009:0,54010:0,54011:0,54012:0,54013:0,54014:0,54015:0,54016:0,54017:0,54018:0,54019:0,54021:0,54022:0,54023:0,54024:0,54025:0,54026:0,54027:0,54028:0,54029:0,54030:0,54031:0,54032:0,54034:0,54042:0,54043:0,54044:0,54045:0,54046:0,54048:0,54049:0,54050:0,54051:0,54052:0,54053:0,65061:3,65062:3,65161:0,65163:0,102001:0,102002:0,102003:0,102004:0,102005:0,102006:0,102007:0,102008:0,102009:0,102010:0,102011:0,102012:0,102013:0,102014:0,102015:0,102016:0,102017:0,102018:0,102019:0,102020:0,102021:0,102022:0,102023:0,102024:0,102025:0,102026:0,102027:0,102028:0,102029:0,102030:0,102031:0,102032:0,102033:0,102034:0,102035:0,102036:0,102037:0,102038:0,102039:0,102060:0,102061:0,102062:0,102063:0,102064:11,102065:0,102066:0,102067:0,102068:12,102069:13,102070:0,102071:0,102072:0,102073:0,102074:0,102075:0,102076:0,102077:0,102078:0,102079:0,102090:0,102091:0,102092:0,102093:0,102094:0,102095:0,102096:0,102097:0,102098:0,102099:0,102100:0,102101:0,102102:0,102103:0,102104:0,102105:0,102106:0,102107:0,102108:0,102109:0,102110:0,102111:0,102112:0,102113:0,102114:0,102115:0,102116:0,102117:0,102118:3,102119:4,102120:3,102121:3,102122:0,102123:0,102124:0,102125:0,102126:0,102127:0,102128:0,102129:0,102130:0,102131:0,102132:0,102133:0,102134:0,102135:0,102136:0,102137:0,102138:0,102139:0,102140:0,102141:0,102142:0,102143:0,102144:0,102145:0,102146:0,102147:0,102148:0,102149:0,102150:0,102151:0,102152:0,102153:0,102154:0,102155:0,102156:0,102157:0,102158:0,102159:0,102160:0,102161:0,102162:0,102163:0,102164:0,102165:0,102166:0,102167:0,102168:0,102169:0,102170:0,102171:0,102172:0,102173:0,102174:0,102175:0,102176:0,102177:0,102178:0,102179:0,102180:0,102181:0,102182:0,102183:0,102184:0,102185:0,102186:0,102187:0,102188:0,102189:0,102190:0,102191:0,102192:0,102193:0,102194:0,102195:0,102196:0,102197:0,102198:0,102199:0,102200:0,102201:0,102202:0,102203:0,102205:0,102206:0,102207:0,102208:0,102209:0,102210:0,102211:0,102218:0,102219:3,102220:3,102221:0,102222:0,102223:0,102224:0,102225:0,102226:0,102227:0,102228:0,102229:0,102230:0,102231:0,102232:0,102233:0,102234:0,102235:0,102236:0,102237:0,102238:0,102239:0,102240:0,102241:0,102242:0,102243:0,102244:0,102245:0,102246:0,102248:0,102249:0,102250:0,102251:0,102252:0,102253:0,102254:0,102255:0,102256:0,102257:0,102258:0,102259:0,102260:0,102261:0,102262:0,102263:0,102264:0,102265:0,102266:0,102267:0,102268:0,102269:0,102270:0,102271:0,102272:0,102273:0,102274:0,102275:0,102276:0,102277:0,102278:0,102279:0,102280:0,102281:0,102282:0,102283:0,102284:0,102285:0,102286:0,102287:0,102288:0,102289:0,102290:0,102291:0,102292:0,102293:0,102294:0,102295:0,102296:0,102297:0,102298:0,102300:0,102304:0,102307:0,102308:0,102309:0,102310:0,102311:0,102312:0,102313:0,102314:0,102315:0,102316:0,102317:0,102318:0,102320:0,102321:0,102322:0,102323:0,102324:0,102325:0,102326:0,102327:0,102330:0,102334:0,102335:0,102336:0,102337:0,102338:0,102339:0,102340:0,102341:0,102342:0,102343:0,102344:0,102345:0,102346:0,102347:0,102348:0,102349:0,102350:0,102351:0,102352:0,102353:0,102354:0,102355:0,102356:0,102357:0,102358:0,102361:0,102363:0,102421:0,102422:0,102423:0,102424:0,102425:0,102426:0,102427:0,102428:0,102429:0,102430:0,102431:0,102432:0,102433:0,102434:0,102435:0,102436:0,102437:0,102438:0,102440:0,102441:0,102442:0,102443:0,102444:0,102461:3,102462:3,102463:3,102464:3,102465:3,102466:3,102467:3,102468:3,102469:0,102491:0,102492:0,102570:0,102571:0,102572:0,102573:0,102574:0,102575:0,102576:0,102577:0,102578:0,102579:0,102580:0,102581:0,102582:0,102583:0,102584:0,102591:0,102592:0,102601:0,102602:0,102603:0,102604:3,102605:0,102606:0,102607:0,102608:0,102609:0,102629:3,102630:3,102631:3,102632:3,102633:3,102634:3,102635:3,102636:3,102637:3,102638:3,102639:3,102640:3,102641:3,102642:3,102643:3,102644:3,102645:3,102646:3,102648:3,102649:3,102650:3,102651:3,102652:3,102653:3,102654:3,102655:3,102656:3,102657:3,102658:3,102659:3,102660:3,102661:3,102662:3,102663:3,102664:3,102665:3,102666:3,102667:3,102668:3,102669:3,102670:3,102671:3,102672:3,102673:3,102674:3,102675:3,102676:3,102677:3,102678:3,102679:3,102680:3,102681:3,102682:3,102683:3,102684:3,102685:3,102686:3,102687:3,102688:3,102689:3,102690:3,102691:3,102692:3,102693:3,102694:3,102695:3,102696:3,102697:3,102698:3,102700:3,102704:3,102707:3,102708:3,102709:3,102710:3,102711:3,102712:3,102713:3,102714:3,102715:3,102716:3,102717:3,102718:3,102719:3,102720:3,102721:3,102722:3,102723:3,102724:3,102725:3,102726:3,102727:3,102728:3,102729:3,102730:3,102733:3,102734:3,102735:3,102736:3,102737:3,102738:3,102739:3,102740:3,102741:3,102742:3,102743:3,102744:3,102745:3,102746:3,102747:3,102748:3,102749:3,102750:3,102751:3,102752:3,102753:3,102754:3,102755:3,102756:3,102757:3,102758:3,102761:3,102763:3,102766:3,103300:0,103301:0,103302:0,103303:0,103304:0,103305:0,103306:0,103307:0,103308:0,103309:0,103310:0,103311:0,103312:0,103313:0,103314:0,103315:0,103316:0,103317:0,103318:0,103319:0,103320:0,103321:0,103322:0,103323:0,103324:0,103325:0,103326:0,103327:0,103328:0,103329:0,103330:0,103331:0,103332:0,103333:0,103334:0,103335:0,103336:0,103337:0,103338:0,103339:0,103340:0,103341:0,103342:0,103343:0,103344:0,103345:0,103346:0,103347:0,103348:0,103349:0,103350:0,103351:0,103352:0,103353:0,103354:0,103355:0,103356:0,103357:0,103358:0,103359:0,103360:0,103361:0,103362:0,103363:0,103364:0,103365:0,103366:0,103367:0,103368:0,103369:0,103370:0,103371:0,103400:3,103401:3,103402:3,103403:3,103404:3,103405:3,103406:3,103407:3,103408:3,103409:3,103410:3,103411:3,103412:3,103413:3,103414:3,103415:3,103416:3,103417:3,103418:3,103419:3,103420:3,103421:3,103422:3,103423:3,103424:3,103425:3,103426:3,103427:3,103428:3,103429:3,103430:3,103431:3,103432:3,103433:3,103434:3,103435:3,103436:3,103437:3,103438:3,103439:3,103440:3,103441:3,103442:3,103443:3,103444:3,103445:3,103446:3,103447:3,103448:3,103449:3,103450:3,103451:3,103452:3,103453:3,103454:3,103455:3,103456:3,103457:3,103458:3,103459:3,103460:3,103461:3,103462:3,103463:3,103464:3,103465:3,103466:3,103467:3,103468:3,103469:3,103470:3,103471:3,103528:0,103529:0,103530:0,103531:0,103532:0,103533:0,103534:0,103535:0,103536:0,103537:0,103538:0,103584:0,103600:0,103601:0,103602:0,103603:0,103604:0,103605:0,103606:0,103607:0,103608:0,103609:0,103610:0,103611:0,103612:0,103613:0,103614:0,103615:0,103616:0,103617:0,103618:0,103619:0,103620:0,103621:0,103622:0,103623:0,103624:0,103625:0,103626:0,103627:0,103628:0,103629:0,103630:0,103631:0,103632:0,103633:0,103634:0,103635:0,103636:0,103637:0,103638:0,103639:0,103640:0,103641:0,103642:0,103643:0,103644:0,103645:0,103646:0,103647:0,103648:0,103649:0,103650:0,103651:0,103652:0,103653:0,103654:0,103655:0,103656:0,103657:0,103658:0,103659:0,103660:0,103661:0,103662:0,103663:0,103664:0,103665:0,103666:0,103667:0,103668:0,103669:0,103670:0,103671:0,103672:0,103673:0,103674:0,103675:0,103676:0,103677:0,103678:0,103679:0,103680:0,103681:0,103682:0,103683:0,103684:0,103685:0,103686:0,103687:0,103688:0,103689:0,103690:0,103691:0,103692:0,103693:0,103700:3,103701:3,103702:3,103703:3,103704:3,103705:3,103706:3,103707:3,103708:3,103709:3,103710:3,103711:3,103712:3,103713:3,103714:3,103715:3,103716:3,103717:3,103718:3,103719:3,103720:3,103721:3,103722:3,103723:3,103724:3,103725:3,103726:3,103727:3,103728:3,103729:3,103730:3,103731:3,103732:3,103733:3,103734:3,103735:3,103736:3,103737:3,103738:3,103739:3,103740:3,103741:3,103742:3,103743:3,103744:3,103745:3,103746:3,103747:3,103748:3,103749:3,103750:3,103751:3,103752:3,103753:3,103754:3,103755:3,103756:3,103757:3,103758:3,103759:3,103760:3,103761:3,103762:3,103763:3,103764:3,103765:3,103766:3,103767:3,103768:3,103769:3,103770:3,103771:3,103772:3,103773:3,103774:3,103775:3,103776:3,103777:3,103778:3,103779:3,103780:3,103781:3,103782:3,103783:3,103784:3,103785:3,103786:3,103787:3,103788:3,103789:3,103790:3,103791:3,103792:3,103793:3,103800:0,103801:0,103802:0,103803:0,103804:0,103805:0,103806:0,103807:0,103808:0,103809:0,103810:0,103811:0,103812:0,103813:0,103814:0,103815:0,103816:0,103817:0,103818:0,103819:0,103820:0,103821:0,103822:0,103823:0,103824:0,103825:0,103826:0,103827:0,103828:0,103829:0,103830:0,103831:0,103832:0,103833:0,103834:0,103835:0,103836:0,103837:0,103838:0,103839:0,103840:0,103841:0,103842:0,103843:0,103844:0,103845:0,103846:0,103847:0,103848:0,103849:0,103850:0,103851:0,103852:0,103853:0,103854:0,103855:0,103856:0,103857:0,103858:0,103859:0,103860:0,103861:0,103862:0,103863:0,103864:0,103865:0,103866:0,103867:0,103868:0,103869:0,103870:0,103871:0,103900:3,103901:3,103902:3,103903:3,103904:3,103905:3,103906:3,103907:3,103908:3,103909:3,103910:3,103911:3,103912:3,103913:3,103914:3,103915:3,103916:3,103917:3,103918:3,103919:3,103920:3,103921:3,103922:3,103923:3,103924:3,103925:3,103926:3,103927:3,103928:3,103929:3,103930:3,103931:3,103932:3,103933:3,103934:3,103935:3,103936:3,103937:3,103938:3,103939:3,103940:3,103941:3,103942:3,103943:3,103944:3,103945:3,103946:3,103947:3,103948:3,103949:3,103950:3,103951:3,103952:3,103953:3,103954:3,103955:3,103956:3,103957:3,103958:3,103959:3,103960:3,103961:3,103962:3,103963:3,103964:3,103965:3,103966:3,103967:3,103968:3,103969:3,103970:3,103971:3};if(has("extend-esri")){_c71.WKIDUnitConversion=obj;}return obj;});},"esri/geometry/Multipoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/SpatialReference","esri/geometry/Geometry","esri/geometry/Point","esri/geometry/Extent"],function(_c72,lang,has,_c73,_c74,_c75,_c76,_c77){var _c78={type:"multipoint",points:null};var _c79=_c72(_c75,{declaredClass:"esri.geometry.Multipoint",constructor:function(obj){lang.mixin(this,_c78);this.points=[];if(obj){if(obj.points){lang.mixin(this,obj);}else{this.spatialReference=obj;}if(this.spatialReference){this.spatialReference=new _c74(this.spatialReference);}}this.verifySR();},_extent:null,addPoint:function(_c7a){this._extent=null;if(lang.isArray(_c7a)){this.points.push(_c7a);}else{this.points.push([_c7a.x,_c7a.y]);}return this;},removePoint:function(_c7b){if(this._validateInputs(_c7b)){this._extent=null;return new _c76(this.points.splice(_c7b,1)[0],this.spatialReference);}},getExtent:function(){if(this._extent){return new _c77(this._extent);}var _c7c=this.points,il=_c7c.length;if(!il){return;}var _c7d=_c7c[0],xmax,ymax,xmin=(xmax=_c7d[0]),ymin=(ymax=_c7d[1]),min=Math.min,max=Math.max,sr=this.spatialReference,x,y,i;for(i=0;i<il;i++){_c7d=_c7c[i];x=_c7d[0];y=_c7d[1];xmin=min(xmin,x);ymin=min(ymin,y);xmax=max(xmax,x);ymax=max(ymax,y);}this._extent={xmin:xmin,ymin:ymin,xmax:xmax,ymax:ymax,spatialReference:sr?sr.toJson():null};return new _c77(this._extent);},_validateInputs:function(_c7e){if(_c7e===null||_c7e<0||_c7e>=this.points.length){return false;}return true;},getPoint:function(_c7f){if(this._validateInputs(_c7f)){var _c80=this.points[_c7f];return new _c76(_c80[0],_c80[1],this.spatialReference);}},setPoint:function(_c81,_c82){if(this._validateInputs(_c81)){this._extent=null;this.points[_c81]=[_c82.x,_c82.y];return this;}},toJson:function(){var json={points:lang.clone(this.points)},sr=this.spatialReference;if(sr){json.spatialReference=sr.toJson();}return json;}});_c79.defaultProps=_c78;if(has("extend-esri")){lang.setObject("geometry.Multipoint",_c79,_c73);_c73.geometry.defaultMultipoint=_c78;}return _c79;});},"esri/symbol":function(){define(["esri/symbols/Symbol","esri/symbols/MarkerSymbol","esri/symbols/SimpleMarkerSymbol","esri/symbols/PictureMarkerSymbol","esri/symbols/LineSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/CartographicLineSymbol","esri/symbols/FillSymbol","esri/symbols/SimpleFillSymbol","esri/symbols/PictureFillSymbol","esri/symbols/Font","esri/symbols/TextSymbol","esri/symbols/jsonUtils"],function(_c83,_c84,_c85,_c86,_c87,_c88,_c89,_c8a,_c8b,_c8c,Font,_c8d,_c8e){return {Symbol:_c83,MarkerSymbol:_c84,SimpleMarkerSymbol:_c85,PictureMarkerSymbol:_c86,LineSymbol:_c87,SimpleLineSymbol:_c88,CartographicLineSymbol:_c89,FillSymbol:_c8a,SimpleFillSymbol:_c8b,PictureFillSymbol:_c8c,Font:Font,TextSymbol:_c8d,jsonUtils:_c8e};});},"esri/renderers/ClassBreaksRenderer":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/symbols/jsonUtils","esri/renderers/Renderer"],function(_c8f,_c90,lang,has,_c91,_c92,_c93,_c94){var _c95=_c8f(_c94,{declaredClass:"esri.renderer.ClassBreaksRenderer",constructor:function(sym,attr){this.breaks=[];this._symbols={};this.infos=[];if(sym&&!sym.declaredClass){var json=sym;this.attributeField=json.field;sym=json.defaultSymbol;if(sym){this.defaultSymbol=_c93.fromJson(sym);}this.defaultLabel=json.defaultLabel;var min=json.minValue,_c96=json.classBreakInfos;if(_c96&&_c96[0]&&_c92.isDefined(_c96[0].classMaxValue)){_c90.forEach(_c96,function(info){var _c97=info.classMaxValue;info.minValue=min;info.maxValue=_c97;min=_c97;},this);}_c90.forEach(_c96,this._addBreakInfo,this);}else{this.defaultSymbol=sym;this.attributeField=attr;}},addBreak:function(min,max,_c98){var info=lang.isObject(min)?min:{minValue:min,maxValue:max,symbol:_c98};this._addBreakInfo(info);},removeBreak:function(min,max){var _c99,_c9a=this.breaks,i,il=_c9a.length,_c9b=this._symbols;for(i=0;i<il;i++){_c99=_c9a[i];if(_c99[0]==min&&_c99[1]==max){_c9a.splice(i,1);delete _c9b[min+"-"+max];this.infos.splice(i,1);break;}}},clearBreaks:function(){this.breaks=[];this._symbols={};this.infos=[];},getSymbol:function(_c9c){var attr=this.attributeField,val=lang.isFunction(attr)?attr(_c9c):parseFloat(_c9c.attributes[attr]),rs=this.breaks,i,il=rs.length,_c9d=this._symbols,_c9e,incl=this.isMaxInclusive;for(i=0;i<il;i++){_c9e=rs[i];if(_c9e[0]<=val&&(incl?(val<=_c9e[1]):(val<_c9e[1]))){return _c9d[_c9e[0]+"-"+_c9e[1]];}}return this.defaultSymbol;},setMaxInclusive:function(_c9f){this.isMaxInclusive=_c9f;},_addBreakInfo:function(info){var min=info.minValue,max=info.maxValue;this.breaks.push([min,max]);this.infos.push(info);var _ca0=info.symbol;if(_ca0){if(!_ca0.declaredClass){info.symbol=_c93.fromJson(_ca0);}}this._symbols[min+"-"+max]=info.symbol;},toJson:function(){var _ca1=this.infos||[],_ca2=_c92.fixJson;var _ca3=_ca1[0]&&_ca1[0].minValue;return _ca2({type:"classBreaks",field:this.attributeField,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,minValue:(_ca3===-Infinity)?-Number.MAX_VALUE:_ca3,classBreakInfos:_c90.map(_ca1,function(info){info=lang.mixin({},info);info.symbol=info.symbol&&info.symbol.toJson();info.classMaxValue=(info.maxValue===Infinity)?Number.MAX_VALUE:info.maxValue;delete info.minValue;delete info.maxValue;return _ca2(info);})});}});if(has("extend-esri")){lang.setObject("renderer.ClassBreaksRenderer",_c95,_c91);}return _c95;});},"esri/layers/RangeDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/layers/Domain"],function(_ca4,lang,has,_ca5,_ca6,_ca7){var _ca8=_ca4([_ca7],{declaredClass:"esri.layers.RangeDomain",constructor:function(json){if(json&&lang.isObject(json)){this.minValue=json.range[0];this.maxValue=json.range[1];}},toJson:function(){var json=this.inherited(arguments);json.range=[this.minValue,this.maxValue];return _ca6.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.RangeDomain",_ca8,_ca5);}return _ca8;});},"esri/map":function(){define(["require","dojo/_base/kernel","dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/_base/event","dojo/dom","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dijit/registry","esri/kernel","esri/config","esri/sniff","esri/lang","esri/_coremap","esri/MapNavigationManager"],function(_ca9,_caa,_cab,_cac,lang,_cad,_cae,dom,_caf,_cb0,_cb1,_cb2,_cb3,_cb4,_cb5,has,_cb6,_cb7,_cb8){var _cb9=30,_cba=30,_cbb={up:"panUp",right:"panRight",down:"panDown",left:"panLeft"},_cbc={upperRight:"panUpperRight",lowerRight:"panLowerRight",lowerLeft:"panLowerLeft",upperLeft:"panUpperLeft"},dc=_cac.connect,ddc=_cac.disconnect,dcr=_cb0.create,ds=_cb2.set,dh=lang.hitch,_cbd=_cb1.getMarginBox,_cbe=_caa.deprecated,_cbf=lang.mixin,_cc0="Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",_cc1=0;var Map=_cab(_cb7,{declaredClass:"esri.Map",constructor:function(_cc2,_cc3){_cbf(this,{_slider:null,_navDiv:null,_mapParams:_cbf({attributionWidth:0.45,slider:true,nav:false,logo:true,sliderStyle:"small",sliderPosition:"top-left",sliderOrientation:"vertical",autoResize:true},_cc3||{})});_cbf(this,{isDoubleClickZoom:false,isShiftDoubleClickZoom:false,isClickRecenter:false,isScrollWheelZoom:false,isPan:false,isRubberBandZoom:false,isKeyboardNavigation:false,isPanArrows:false,isZoomSlider:false});if(lang.isFunction(_cb4._css)){_cb4._css=_cb4._css(this._mapParams.force3DTransforms);this.force3DTransforms=this._mapParams.force3DTransforms;}var _cc4=(has("esri-transforms")&&has("esri-transitions"));this.navigationMode=this._mapParams.navigationMode||(_cc4&&"css-transforms")||"classic";if(this.navigationMode==="css-transforms"&&!_cc4){this.navigationMode="classic";}this.fadeOnZoom=_cb6.isDefined(this._mapParams.fadeOnZoom)?this._mapParams.fadeOnZoom:(this.navigationMode==="css-transforms");if(this.navigationMode!=="css-transforms"){this.fadeOnZoom=false;}this.setMapCursor("default");this.smartNavigation=_cc3&&_cc3.smartNavigation;if(!_cb6.isDefined(this.smartNavigation)&&has("mac")&&!has("esri-touch")&&!has("esri-pointer")&&!(has("ff")<=3.5)){var _cc5=navigator.userAgent.match(/Mac\s+OS\s+X\s+([\d]+)(\.|\_)([\d]+)\D/i);if(_cc5&&_cb6.isDefined(_cc5[1])&&_cb6.isDefined(_cc5[3])){var _cc6=parseInt(_cc5[1],10),_cc7=parseInt(_cc5[3],10);this.smartNavigation=((_cc6>10)||(_cc6===10&&_cc7>=6));}}var _cc8=true;_cc8=false;this.showAttribution=_cb6.isDefined(this._mapParams.showAttribution)?this._mapParams.showAttribution:_cc8;this._onLoadHandler_connect=dc(this,"onLoad",this,"_onLoadInitNavsHandler");var _cc9=dcr("div",{"class":"esriControlsBR"+(this._mapParams.nav?" withPanArrows":"")},this.root);if(this.showAttribution){var _cca=lang.getObject("esri.dijit.Attribution",false);if(_cca){this._initAttribution(_cca,_cc9);}else{var _ccb=["esri/dijit/Attribution"],rid=_cc1++,self=this;this._rids&&this._rids.push(rid);_ca9(_ccb,function(_ccc){var idx=self._rids?_cad.indexOf(self._rids,rid):-1;if(idx!==-1){self._rids.splice(idx,1);self._initAttribution(_ccc,_cc9);}});}}if(this._mapParams.logo){var _ccd={};if(has("ie")===6){_ccd.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true', sizingMethod='crop', src='"+_ca9.toUrl("esri")+"/images/map/logo-med.png"+"')";}var logo=this._ogol=dcr("div",{style:_ccd},_cc9);if((this.root.clientWidth*this.root.clientHeight)<250000){_caf.add(logo,"logo-sm");}else{_caf.add(logo,"logo-med");}if(!has("esri-touch")&&!has("esri-pointer")){this._ogol_connect=dc(logo,"onclick",this,"_openLogoLink");}}var _cce=(this.navigationManager=new _cb8(this)),_ccf=_cce.mouseEvents||_cce.touchEvents||_cce.pointerEvents;this.registerConnectEvents(_ccf.constructor.connectEvents);if(_cc3&&_cc3.basemap){this._onLoadFix=true;this.setBasemap(_cc3.basemap);this._onLoadFix=false;}this.autoResize=this._mapParams.autoResize;if(this.autoResize){var _cd0=_cb3.getEnclosingWidget(this.container);this._connects.push(dc((_cd0&&_cd0.resize)?_cd0:window,"resize",this,this.resize));this._connects.push(dc(window,"orientationchange",this,this.resize));}},_initAttribution:function(_cd1,_cd2){var _cd3=dcr("span",{"class":"esriAttribution"},_cd2,"first");ds(_cd3,"width",Math.floor(this.width*this._mapParams.attributionWidth)+"px");this._connects.push(dc(_cd3,"onclick",function(){var _cd4="esriAttributionOpen";if(_caf.contains(this,_cd4)){_caf.remove(this,_cd4);}else{if(this.scrollWidth>this.clientWidth){_caf.add(this,_cd4);}}}));this.attribution=new _cd1({map:this},_cd3);},_cleanUp:function(){this.disableMapNavigation();this.navigationManager.destroy();var i;for(i=this._connects.length;i>=0;i--){ddc(this._connects[i]);delete this._connects[i];}ddc(this._slider_connect);ddc(this._ogol_connect);var _cd5=this._slider;if(_cd5&&_cd5.destroy&&!_cd5._destroyed){_cd5.destroy();}var _cd6=this._navDiv,_cd7=this.attribution;if(_cd6){_cb0.destroy(_cd6);}if(_cd7){_cd7.destroy();}this.attribution=this.navigationManager=this._rids=null;this.inherited("_cleanUp",arguments);},_isPanningOrZooming:function(){return this.__panning||this.__zooming;},_canZoom:function(_cd8){var _cd9=this.getLevel();return !this.__tileInfo||!((_cd9===this.getMinZoom()&&_cd8<0)||(_cd9===this.getMaxZoom()&&_cd8>0));},_onLoadInitNavsHandler:function(){this.enableMapNavigation();this._createNav();if(this._mapParams.sliderStyle==="small"||!this._createSlider){this._createSimpleSlider();}else{if(this._mapParams.slider){var _cda=this._getSliderClass(true),_cdb=(_cda.indexOf("Horizontal")!==-1),_cdc=_cdb?"dijit.form.HorizontalSlider":"dijit.form.VerticalSlider",_cdd=_cdb?"dijit.form.HorizontalRule":"dijit.form.VerticalRule",_cde=_cdb?"dijit.form.HorizontalRuleLabels":"dijit.form.VerticalRuleLabels",_cdf=[_cdc,_cdd,_cde],_ce0=_cad.some(_cdf,function(_ce1){return !lang.getObject(_ce1,false);});if(_ce0){_cdf=_cad.map(_cdf,function(_ce2){return _ce2.replace(/\./g,"/");});var rid=_cc1++,self=this;this._rids&&this._rids.push(rid);_ca9(_cdf,function(){var idx=self._rids?_cad.indexOf(self._rids,rid):-1;if(idx!==-1){self._rids.splice(idx,1);self._createSlider.apply(self,arguments);}});}else{_cdf=_cad.map(_cdf,function(_ce3){return lang.getObject(_ce3,false);});this._createSlider.apply(this,_cdf);}}}ddc(this._onLoadHandler_connect);},_createNav:function(){if(this._mapParams.nav){var div,v,i,_ce4=_caf.add,id=this.id;this._navDiv=dcr("div",{id:id+"_navdiv"},this.root);_ce4(this._navDiv,"navDiv");var w2=this.width/2,h2=this.height/2,wh;for(i in _cbb){v=_cbb[i];div=dcr("div",{id:id+"_pan_"+i},this._navDiv);_ce4(div,"fixedPan "+v);if(i==="up"||i==="down"){wh=parseInt(_cbd(div).w,10)/2;ds(div,{left:(w2-wh)+"px",zIndex:_cb9});}else{wh=parseInt(_cbd(div).h,10)/2;ds(div,{top:(h2-wh)+"px",zIndex:_cb9});}this._connects.push(dc(div,"onclick",dh(this,this[v])));}this._onMapResizeNavHandler_connect=dc(this,"onResize",this,"_onMapResizeNavHandler");for(i in _cbc){v=_cbc[i];div=dcr("div",{id:id+"_pan_"+i,style:{zIndex:_cb9}},this._navDiv);_ce4(div,"fixedPan "+v);this._connects.push(dc(div,"onclick",dh(this,this[v])));}this.isPanArrows=true;}},_onMapResizeNavHandler:function(_ce5,wd,ht){var id=this.id,w2=wd/2,h2=ht/2,byId=dom.byId,i,div,wh;for(i in _cbb){div=byId(id+"_pan_"+i);if(i==="up"||i==="down"){wh=parseInt(_cbd(div).w,10)/2;ds(div,"left",(w2-wh)+"px");}else{wh=parseInt(_cbd(div).h,10)/2;ds(div,"top",(h2-wh)+"px");}}},_createSimpleSlider:function(){if(this._mapParams.slider){var _ce6=(this._slider=dcr("div",{id:this.id+"_zoom_slider","class":this._getSliderClass(),style:{zIndex:_cba}})),_ce7=(has("esri-touch")&&!has("ff"))?"touchstart":(has("esri-pointer")?(navigator.msPointerEnabled?"MSPointerDown":"pointerdown"):"onclick"),_ce8=dcr("div",{"class":"esriSimpleSliderIncrementButton"},_ce6),_ce9=dcr("div",{"class":"esriSimpleSliderDecrementButton"},_ce6);_ce8.innerHTML="+";_ce9.innerHTML="&ndash;";if(has("ie")<8){_caf.add(_ce9,"dj_ie67Fix");}this._connects.push(dc(_ce8,_ce7,this,this._simpleSliderChangeHandler));this._connects.push(dc(_ce9,_ce7,this,this._simpleSliderChangeHandler));if(has("ie")<10){dom.setSelectable(_ce6,false);}this.root.appendChild(_ce6);this.isZoomSlider=true;}},_simpleSliderChangeHandler:function(evt){var _cea=(evt.currentTarget.className.indexOf("IncrementButton")!==-1)?true:false;this._extentUtil({numLevels:_cea?1:-1});},_getSliderClass:function(_ceb){var _cec="",type=(_ceb?"Large":"Simple"),_ced=this._mapParams.sliderOrientation,_cee=this._mapParams.sliderPosition||"";_ced=(_ced&&_ced.toLowerCase()==="horizontal")?"esri"+type+"SliderHorizontal":"esri"+type+"SliderVertical";if(_cee){switch(_cee.toLowerCase()){case "top-left":_cee="esri"+type+"SliderTL";break;case "top-right":_cee="esri"+type+"SliderTR";break;case "bottom-left":_cee="esri"+type+"SliderBL";break;case "bottom-right":_cee="esri"+type+"SliderBR";break;default:break;}}return "esri"+type+"Slider"+" "+_ced+" "+_cee;},_openLogoLink:function(evt){window.open(_cb5.defaults.map.logoLink,"_blank");_cae.stop(evt);},enableMapNavigation:function(){this.navigationManager.enableNavigation();},disableMapNavigation:function(){this.navigationManager.disableNavigation();},enableDoubleClickZoom:function(){if(!this.isDoubleClickZoom){this.navigationManager.enableDoubleClickZoom();this.isDoubleClickZoom=true;}},disableDoubleClickZoom:function(){if(this.isDoubleClickZoom){this.navigationManager.disableDoubleClickZoom();this.isDoubleClickZoom=false;}},enableShiftDoubleClickZoom:function(){if(!this.isShiftDoubleClickZoom){_cbe(this.declaredClass+": "+_cc0,null,"v2.0");this.navigationManager.enableShiftDoubleClickZoom();this.isShiftDoubleClickZoom=true;}},disableShiftDoubleClickZoom:function(){if(this.isShiftDoubleClickZoom){_cbe(this.declaredClass+": "+_cc0,null,"v2.0");this.navigationManager.disableShiftDoubleClickZoom();this.isShiftDoubleClickZoom=false;}},enableClickRecenter:function(){if(!this.isClickRecenter){this.navigationManager.enableClickRecenter();this.isClickRecenter=true;}},disableClickRecenter:function(){if(this.isClickRecenter){this.navigationManager.disableClickRecenter();this.isClickRecenter=false;}},enablePan:function(){if(!this.isPan){this.navigationManager.enablePan();this.isPan=true;}},disablePan:function(){if(this.isPan){this.navigationManager.disablePan();this.isPan=false;}},enableRubberBandZoom:function(){if(!this.isRubberBandZoom){this.navigationManager.enableRubberBandZoom();this.isRubberBandZoom=true;}},disableRubberBandZoom:function(){if(this.isRubberBandZoom){this.navigationManager.disableRubberBandZoom();this.isRubberBandZoom=false;}},enableKeyboardNavigation:function(){if(!this.isKeyboardNavigation){this.navigationManager.enableKeyboardNavigation();this.isKeyboardNavigation=true;}},disableKeyboardNavigation:function(){if(this.isKeyboardNavigation){this.navigationManager.disableKeyboardNavigation();this.isKeyboardNavigation=false;}},enableScrollWheelZoom:function(){if(!this.isScrollWheelZoom){this.navigationManager.enableScrollWheelZoom();this.isScrollWheelZoom=true;}},disableScrollWheelZoom:function(){if(this.isScrollWheelZoom){this.navigationManager.disableScrollWheelZoom();this.isScrollWheelZoom=false;}},showPanArrows:function(){if(this._navDiv){this._navDiv.style.display="block";this.isPanArrows=true;}},hidePanArrows:function(){if(this._navDiv){this._navDiv.style.display="none";this.isPanArrows=false;}},showZoomSlider:function(){if(this._slider){ds(this._slider.domNode||this._slider,"visibility","visible");this.isZoomSlider=true;}},hideZoomSlider:function(){if(this._slider){ds(this._slider.domNode||this._slider,"visibility","hidden");this.isZoomSlider=false;}}});if(has("extend-esri")){_cb4.Map=Map;}return Map;});},"dojo/io/script":function(){define(["../_base/connect","../_base/kernel","../_base/lang","../sniff","../_base/window","../_base/xhr","../dom","../dom-construct","../request/script"],function(_cef,_cf0,lang,has,win,xhr,dom,_cf1,_cf2){function _cf3(_cf4,id){var dfd=_cf4["jsonp_"+id];if(dfd){delete _cf4["jsonp_"+id];if(dfd.canceled){_cf0.global[_cf2._callbacksProperty][dfd.ioArgs.requestId]();}}};_cf0.deprecated("dojo/io/script","Use dojo/request/script.","2.0");var _cf5={get:function(args){var rDfd,self=this;var dfd=this._makeScriptDeferred(args,function(dfd){rDfd&&rDfd.cancel();});var _cf6=dfd.ioArgs;xhr._ioAddQueryToUrl(_cf6);xhr._ioNotifyStart(dfd);rDfd=_cf2.get(_cf6.url,{timeout:args.timeout,jsonp:_cf6.jsonp,checkString:args.checkString,ioArgs:_cf6,frameDoc:args.frameDoc,canAttach:function(rDfd){_cf6.requestId=rDfd.id;_cf6.scriptId=rDfd.scriptId;_cf6.canDelete=rDfd.canDelete;return _cf5._canAttach(_cf6);}},true);rDfd.then(function(){_cf3(self,_cf6.id);dfd.resolve(dfd);}).otherwise(function(_cf7){_cf3(self,_cf6.id);dfd.ioArgs.error=_cf7;dfd.reject(_cf7);});return dfd;},attach:_cf2._attach,remove:_cf2._remove,_makeScriptDeferred:function(args,_cf8){var dfd=xhr._ioSetArgs(args,_cf8||this._deferredCancel,this._deferredOk,this._deferredError);var _cf9=dfd.ioArgs;_cf9.id=_cf0._scopeName+"IoScript"+(args.callbackSuffix||(this._counter++));_cf9.canDelete=false;_cf9.jsonp=args.callbackParamName||args.jsonp;if(_cf9.jsonp){_cf9.query=_cf9.query||"";if(_cf9.query.length>0){_cf9.query+="&";}_cf9.query+=_cf9.jsonp+"="+(args.frameDoc?"parent.":"")+_cf0._scopeName+".io.script.jsonp_"+_cf9.id+"._jsonpCallback";_cf9.frameDoc=args.frameDoc;_cf9.canDelete=true;dfd._jsonpCallback=this._jsonpCallback;this["jsonp_"+_cf9.id]=dfd;}return dfd;},_deferredCancel:function(dfd){dfd.canceled=true;},_deferredOk:function(dfd){var _cfa=dfd.ioArgs;return _cfa.json||_cfa.scriptLoaded||_cfa;},_deferredError:function(_cfb,dfd){console.log("dojo.io.script error",_cfb);return _cfb;},_deadScripts:[],_counter:1,_addDeadScript:function(_cfc){_cf5._deadScripts.push({id:_cfc.id,frameDoc:_cfc.frameDoc});_cfc.frameDoc=null;},_validCheck:function(dfd){var _cfd=_cf5._deadScripts;if(_cfd&&_cfd.length>0){for(var i=0;i<_cfd.length;i++){_cf5.remove(_cfd[i].id,_cfd[i].frameDoc);_cfd[i].frameDoc=null;}_cf5._deadScripts=[];}return true;},_ioCheck:function(dfd){var _cfe=dfd.ioArgs;if(_cfe.json||(_cfe.scriptLoaded&&!_cfe.args.checkString)){return true;}var _cff=_cfe.args.checkString;return _cff&&eval("typeof("+_cff+") != 'undefined'");},_resHandle:function(dfd){if(_cf5._ioCheck(dfd)){dfd.callback(dfd);}else{dfd.errback(new Error("inconceivable dojo.io.script._resHandle error"));}},_canAttach:function(){return true;},_jsonpCallback:function(json){this.ioArgs.json=json;_cf0.global[_cf2._callbacksProperty][this.ioArgs.requestId](json);}};lang.setObject("dojo.io.script",_cf5);return _cf5;});},"esri/layers/LayerDrawingOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/renderers/jsonUtils"],function(_d00,lang,has,_d01,_d02,_d03){var _d04=_d00(null,{declaredClass:"esri.layers.LayerDrawingOptions",constructor:function(json){if(json){lang.mixin(this,json);if(json.renderer){this.renderer=_d03.fromJson(json.renderer);}}},toJson:function(){var json={renderer:this.renderer&&this.renderer.toJson(),transparency:this.transparency,scaleSymbols:this.scaleSymbols,showLabels:this.showLabels};return _d02.fixJson(json);}});if(has("extend-esri")){lang.setObject("layers.LayerDrawingOptions",_d04,_d01);}return _d04;});},"esri/layers/layer":function(){define(["dojo/_base/declare","dojo/_base/config","dojo/_base/connect","dojo/_base/lang","dojo/_base/Deferred","dojo/_base/json","dojo/has","esri/kernel","esri/lang","esri/request","esri/deferredUtils","esri/urlUtils","esri/SpatialReference","esri/geometry/Extent"],function(_d05,_d06,_d07,lang,_d08,_d09,has,_d0a,_d0b,_d0c,_d0d,_d0e,_d0f,_d10){var _d11=_d05(null,{declaredClass:"esri.layers.Layer",constructor:function(url,_d12){if(url&&lang.isString(url)){this._url=_d0e.urlToObject(this.url=url);}else{this.url=(this._url=null);_d12=_d12||url;if(_d12&&_d12.layerDefinition){_d12=null;}}this.spatialReference=new _d0f(4326);this.initialExtent=new _d10(-180,-90,180,90,new _d0f(4326));this._map=this._div=null;this.normalization=true;if(_d12){if(_d12.id){this.id=_d12.id;}if(_d12.visible===false){this.visible=false;}if(_d0b.isDefined(_d12.opacity)){this.opacity=_d12.opacity;}if(_d0b.isDefined(_d12.minScale)){this.setMinScale(_d12.minScale);}if(_d0b.isDefined(_d12.maxScale)){this.setMaxScale(_d12.maxScale);}this.attributionDataUrl=_d12.attributionDataUrl||"";this.hasAttributionData=!!this.attributionDataUrl;if(_d0b.isDefined(_d12.showAttribution)){this.showAttribution=_d12.showAttribution;}}this._errorHandler=lang.hitch(this,this._errorHandler);if(this.managedSuspension){var _d13=this._setMap;this._setMap=function(map){var _d14=_d13.apply(this,arguments);this.evaluateSuspension();if(this.suspended&&!map.loaded){var _d15=_d07.connect(map,"onLoad",this,function(){_d07.disconnect(_d15);_d15=null;this.evaluateSuspension();});}return _d14;};}},id:null,visible:true,loaded:false,minScale:0,maxScale:0,visibleAtMapScale:false,suspended:true,attributionDataUrl:"",hasAttributionData:false,showAttribution:true,_errorHandler:function(err){this.onError(err);},_setMap:function(map,_d16,_d17,lod){this._map=map;this._lyrZEHandle=_d07.connect(map,"onZoomEnd",this,this._processMapScale);if(map.loaded){this.visibleAtMapScale=this._isMapAtVisibleScale();}else{var _d18=_d07.connect(map,"onLoad",this,function(){_d07.disconnect(_d18);_d18=null;this._processMapScale();});}},_unsetMap:function(map,_d19){_d07.disconnect(this._lyrZEHandle);this._lyrZEHandle=null;this._map=null;this.suspended=true;},_cleanUp:function(){this._map=this._div=null;},_fireUpdateStart:function(){if(this.updating){return;}this.updating=true;this.onUpdateStart();if(this._map){this._map._incr();}},_fireUpdateEnd:function(_d1a,info){this.updating=false;this.onUpdateEnd(_d1a,info);if(this._map){this._map._decr();}},_getToken:function(){var url=this._url,crd=this.credential;return (url&&url.query&&url.query.token)||(crd&&crd.token)||undefined;},_findCredential:function(){this.credential=_d0a.id&&this._url&&_d0a.id.findCredential(this._url.path);},_useSSL:function(){var _d1b=this._url,re=/^http:/i,rep="https:";if(this.url){this.url=this.url.replace(re,rep);}if(_d1b&&_d1b.path){_d1b.path=_d1b.path.replace(re,rep);}},refresh:function(){},show:function(){this.setVisibility(true);},hide:function(){this.setVisibility(false);},setMinScale:function(_d1c){this.setScaleRange(_d1c);},setMaxScale:function(_d1d){this.setScaleRange(null,_d1d);},setScaleRange:function(_d1e,_d1f){var _d20=_d0b.isDefined(_d1e),_d21=_d0b.isDefined(_d1f);if(!this.loaded){this._hasMin=this._hasMin||_d20;this._hasMax=this._hasMax||_d21;}var _d22=this.minScale,_d23=this.maxScale;this.minScale=(_d20?_d1e:this.minScale)||0;this.maxScale=(_d21?_d1f:this.maxScale)||0;if((_d22!==this.minScale)||(_d23!==this.maxScale)){this.onScaleRangeChange();this._processMapScale();}},suspend:function(){this._suspended=true;this.evaluateSuspension();},resume:function(){this._suspended=false;this.evaluateSuspension();},canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended;},evaluateSuspension:function(){if(this.canResume()){if(this.suspended){this._resume();}}else{if(!this.suspended){this._suspend();}}},_suspend:function(){this.suspended=true;this.onSuspend();if(this._map){this._map.onLayerSuspend(this);}},_resume:function(){this.suspended=false;var _d24=(this._resumedOnce===undefined);if(_d24){this._resumedOnce=true;}this.onResume({firstOccurrence:_d24});if(this._map){this._map.onLayerResume(this);}},_processMapScale:function(){var _d25=this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();if(_d25!==this.visibleAtMapScale){this.onScaleVisibilityChange();this.evaluateSuspension();}},isVisibleAtScale:function(_d26){return (_d26?_d11.prototype._isMapAtVisibleScale.apply(this,arguments):false);},_isMapAtVisibleScale:function(_d27){if(!_d27&&(!this._map||!this._map.loaded)){return false;}_d27=_d27||this._map.getScale();var _d28=this.minScale,_d29=this.maxScale,_d2a=!_d28,_d2b=!_d29;if(!_d2a&&_d27<=_d28){_d2a=true;}if(!_d2b&&_d27>=_d29){_d2b=true;}return (_d2a&&_d2b)?true:false;},getAttributionData:function(){var url=this.attributionDataUrl,dfd=new _d08(_d0d._dfdCanceller);if(this.hasAttributionData&&url){dfd._pendingDfd=_d0c({url:url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});dfd._pendingDfd.then(function(_d2c){dfd.callback(_d2c);},function(_d2d){dfd.errback(_d2d);});}else{var err=new Error("Layer does not have attribution data");err.log=_d06.isDebug;dfd.errback(err);}return dfd;},getResourceInfo:function(){var info=this.resourceInfo;return lang.isString(info)?_d09.fromJson(info):lang.clone(info);},setNormalization:function(_d2e){this.normalization=_d2e;},setVisibility:function(v){if(this.visible!==v){this.visible=v;this.onVisibilityChange(this.visible);this.evaluateSuspension();}},onLoad:function(){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onError:function(){}});if(has("extend-esri")){lang.setObject("layers.Layer",_d11,_d0a);}return _d11;});},"*now":function(r){r(["dojo/i18n!*preload*esri/nls/jsapi*[\"ar\",\"az\",\"ca\",\"cs\",\"da\",\"de-de\",\"el\",\"en-gb\",\"en-us\",\"es-es\",\"fi-fi\",\"fr-fr\",\"he-il\",\"hu\",\"it-it\",\"ja-jp\",\"ko-kr\",\"nl-nl\",\"nb\",\"pl\",\"pt-br\",\"pt-pt\",\"ro\",\"ru\",\"sk\",\"sl\",\"sv\",\"th\",\"tr\",\"zh-tw\",\"zh-cn\",\"ROOT\"]"]);},"*noref":1}});define("esri/jsapi",["dojo/fx/Toggler","dojo/_base/html","dijit/_base/manager","esri/main","esri/map","esri/geometry","esri/symbol","esri/renderer","esri/utils","esri/layers/graphics","esri/layers/agstiled","esri/layers/agsdynamic"],function(){return {};});