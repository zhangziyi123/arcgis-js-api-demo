/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
require({cache:{"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(_1,_2,_3){var _4=null;return _1("dojo.store.Memory",_4,{constructor:function(_5){for(var i in _5){this[i]=_5[i];}this.setData(this.data||[]);},data:null,idProperty:"id",index:null,queryEngine:_3,get:function(id){return this.data[this.index[id]];},getIdentity:function(_6){return _6[this.idProperty];},put:function(_7,_8){var _9=this.data,_a=this.index,_b=this.idProperty;var id=_7[_b]=(_8&&"id" in _8)?_8.id:_b in _7?_7[_b]:Math.random();if(id in _a){if(_8&&_8.overwrite===false){throw new Error("Object already exists");}_9[_a[id]]=_7;}else{_a[id]=_9.push(_7)-1;}return id;},add:function(_c,_d){(_d=_d||{}).overwrite=false;return this.put(_c,_d);},remove:function(id){var _e=this.index;var _f=this.data;if(id in _e){_f.splice(_e[id],1);this.setData(_f);return true;}},query:function(_10,_11){return _2(this.queryEngine(_10,_11)(this.data));},setData:function(_12){if(_12.items){this.idProperty=_12.identifier;_12=this.data=_12.items;}else{this.data=_12;}this.index={};for(var i=0,l=_12.length;i<l;i++){this.index[_12[i][this.idProperty]]=i;}}});});},"esri/layers/OnDemandMode":function(){define("esri/layers/OnDemandMode",["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/geometry/Point","esri/tasks/query","esri/layers/RenderMode","esri/layers/GridLayout"],function(_13,_14,_15,_16,has,_17,_18,_19,_1a,_1b){var _1c=_13([_1a],{declaredClass:"esri.layers._OnDemandMode",constructor:function(_1d){this.featureLayer=_1d;this._featureMap={};this._queryErrorHandler=_15.hitch(this,this._queryErrorHandler);},initialize:function(map){this.inherited(arguments);var _1e=this.featureLayer,_1f=_1e._srInfo;this._gridLayer=new _1b(new _18(_1f?_1f.valid[0]:map.extent.xmin,map.extent.ymax,map.spatialReference),{width:_1e._tileWidth,height:_1e._tileHeight},{width:map.width,height:map.height},_1f);this._cellMap={};this._gridLayer.setResolution(map.extent);},startup:function(){this._ioQueue=[];if(!this.featureLayer.suspended){this._zoomHandler();this._enableConnectors();}},propertyChangeHandler:function(_20){if(this._init){if(_20<2){this._zoomHandler();}else{console.log("FeatureLayer: layer in on-demand mode does not support time definitions. Layer id = "+this.featureLayer.id+", Layer URL = "+this.featureLayer.url);}}},destroy:function(){this._disableConnectors();this.inherited(arguments);},drawFeature:function(_21){var _22=this._gridLayer,_23=_21.geometry,_24=[];if(!_23){return;}_24=_22.getCellsInExtent((_23.type==="point")?{xmin:_23.x,ymin:_23.y,xmax:_23.x,ymax:_23.y}:_23.getExtent(),false).cells;var _25=this._cellMap,i,_26,oid=_21.attributes[this.featureLayer.objectIdField],_27,row,col;for(i=0;i<_24.length;i++){_26=_24[i];_27=_26.latticeID;row=_26.row;col=_26.col;if(_27){_26=(_25[_27]=(_25[_27]||_26));}else{_25[row]=_25[row]||{};_26=(_25[row][col]=(_25[row][col]||_26));}_26.features=_26.features||[];_26.features.push(_21);this._addFeatureIIf(oid,_21);this._incRefCount(oid);}},suspend:function(){if(!this._init){return;}this._disableConnectors();},resume:function(){if(!this._init){return;}this._enableConnectors();this._zoomHandler();},refresh:function(){this._zoomHandler();},_enableConnectors:function(){var map=this.map;this._zoomConnect=_14.connect(map,"onZoomEnd",this,this._zoomHandler);this._panConnect=_14.connect(map,"onPanEnd",this,this._panHandler);this._resizeConnect=_14.connect(map,"onResize",this,this._panHandler);},_disableConnectors:function(){_14.disconnect(this._zoomConnect);_14.disconnect(this._panConnect);_14.disconnect(this._resizeConnect);},_zoomHandler:function(){this._processIOQueue(true);var _28=this.featureLayer,map=this.map;if(_28.suspended){return;}_28._fireUpdateStart();this._clearIIf();var _29=_28._trackManager;if(_29){_29.clearTracks();}this._cellMap={};this._gridLayer.setResolution(map.extent);this._sendRequest();},_panHandler:function(){this.featureLayer._fireUpdateStart();this._sendRequest(this.featureLayer._resized&&arguments[0]);},_getRequestId:function(_2a,_2b){var id="_"+_2a.name+_2a.layerId+_2a._ulid+"_"+_2b.resolution+"_"+(_2b.latticeID||(_2b.row+"_"+_2b.col));return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_sendRequest:function(_2c){this._exceeds=false;var _2d=this.featureLayer,map=this.map,_2e=_2c||map.extent,_2f=this._gridLayer.getCellsInExtent(_2e,_2d.latticeTiling),_30=_2f.cells;if(!_2d.isEditable()){var _31=this._cellMap;_30=_16.filter(_30,function(_32){if(_32.lattice){if(_31[_32.latticeID]){return false;}}else{if(_31[_32.row]&&_31[_32.row][_32.col]){return false;}}return true;});}var _33=_2d._getOutFields(),_34=_2d.getDefinitionExpression(),_35=_2d._getOffsettedTE(_2d._mapTimeExtent),_36=_2d._usePatch,_37=this._ioQueue,i,_38=this,_39=this._drawFeatures,_3a,_3b,_3c;this._pending=this._pending||0;for(i=0;i<_30.length;i++){_3a=_30[i];_3b=new _19();_3b.geometry=_3a.extent||_3a.lattice;_3b.outFields=_33;_3b.where=_34;if(_2d.latticeTiling&&_3a.extent){_3b.spatialRelationship=_19.SPATIAL_REL_CONTAINS;}_3b.returnGeometry=true;_3b.timeExtent=_35;_3b.maxAllowableOffset=_2d._maxOffset;if(_2d._ts){_3b._ts=(new Date()).getTime();}_3c=null;if(_36){_3c=this._getRequestId(_2d,_3a);if(this._isPending(_3c)){continue;}}this._pending++;_37.push(_2d._task.execute(_3b,function(){var _3d=_3a;return function(_3e){_39.apply(_38,[_3e,_3d]);};}.call(this),this._queryErrorHandler,_3c));}this._removeOldCells(_2e);this._endCheck();},_drawFeatures:function(_3f,_40){this._exceeds=this._exceeds||_3f.exceededTransferLimit;this._finalizeIO();var _41=this.featureLayer,map=this.map,_42=map.extent,_43=_40.extent,row=_40.row,col=_40.col,_44=_41.objectIdField,_45=_3f.features,_46=this._gridLayer,_47=this._cellMap,i,len,_48=_40.latticeID,_49=_48?_47[_48]:(_47[row]&&_47[row][col]);if((_40.resolution!=_46._resolution)||(_48?(_48!==_46.getLatticeID(_42)):(!_46.intersects(_43,_42)))){if(_49){this._removeCell(row,col,_48);}}else{if(_49){this._updateCell(_49,_45);}else{_40.features=_45;if(_48){_47[_48]=_40;}else{_47[row]=_47[row]||{};_47[row][col]=_40;}len=_45.length;for(i=0;i<len;i++){var _4a=_45[i];var oid=_4a.attributes[_44];this._addFeatureIIf(oid,_4a);this._incRefCount(oid);}}}this._endCheck();},_queryErrorHandler:function(err){this._finalizeIO();this.featureLayer._errorHandler(err);this._endCheck(true);},_finalizeIO:function(){this._purgeRequests();this._pending--;},_endCheck:function(_4b){if(this._pending===0){this._processIOQueue();var _4c=this.featureLayer,_4d=_4c._trackManager;if(_4d){_4d.clearTracks();_4d.addFeatures(_4c.graphics);if(_4c._ager){_16.forEach(_4c.graphics,function(_4e){if(_4e._shape){_4c._repaint(_4e);}});}_4d.moveLatestToFront();_4d.drawTracks();}this.featureLayer._fireUpdateEnd(_4b&&new Error("FeatureLayer: an error occurred while updating the layer"),this._exceeds?{queryLimitExceeded:true}:null);if(this._exceeds){_4c.onQueryLimitExceeded();}}},_processIOQueue:function(_4f){this._ioQueue=_16.filter(this._ioQueue,function(dfd){var _50=dfd.fired>-1?false:true;return _50;});if(_4f){_16.forEach(this._ioQueue,this._cancelPendingRequest);}},_removeOldCells:function(_51){var _52=this._cellMap,_53=this._gridLayer,_54,_55;for(_54 in _52){if(_52[_54]){var row=_52[_54],_56=row.latticeID,_57=0,_58=0;if(_56){_57++;if(_56!==_53.getLatticeID(_51)){this._removeCell(null,null,_56);_58++;}}else{for(_55 in row){if(row[_55]){_57++;var _59=row[_55].extent;if(!_53.intersects(_59,_51)){this._removeCell(_54,_55);_58++;}}}}if(_58===_57){delete _52[_54];}}}},_updateCell:function(_5a,_5b){var _5c=this.featureLayer,_5d=_5c.objectIdField,_5e=_5c._selectedFeatures,i,len=_5b.length;_5a.features=_5a.features||[];for(i=0;i<len;i++){var _5f=_5b[i];var oid=_5f.attributes[_5d];var _60=this._addFeatureIIf(oid,_5f);if(_60===_5f){this._incRefCount(oid);_5a.features.push(_60);}else{if(!(oid in _5e)){_60.setGeometry(_5f.geometry);_60.setAttributes(_5f.attributes);}}}},_removeCell:function(row,col,_61){var _62=this._cellMap,_63=this.featureLayer,_64=_63.objectIdField;var _65=_61?_62[_61]:(_62[row]&&_62[row][col]);if(_65){if(_61){delete _62[_61];}else{delete _62[row][col];}var _66=_65.features,i;for(i=0;i<_66.length;i++){var _67=_66[i];var oid=_67.attributes[_64];this._decRefCount(oid);if(oid in _63._selectedFeatures){continue;}this._removeFeatureIIf(oid);}}}});if(has("extend-esri")){_15.setObject("layers._OnDemandMode",_1c,_17);}return _1c;});},"dijit/CalendarLite":function(){require({cache:{"url:dijit/templates/Calendar.html":"<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" aria-labelledby=\"${id}_mddb ${id}_year\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' colspan=\"5\">\n\t\t\t\t<div data-dojo-attach-point=\"monthNode\">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role=\"row\">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point=\"dateRowsNode\" data-dojo-attach-event=\"onclick: _onDayClick\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\" role=\"presentation\">\n\t\t\t\t<div class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span data-dojo-attach-point=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\" role=\"button\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" role=\"button\" id=\"${id}_year\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\" role=\"button\"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n"}});define("dijit/CalendarLite",["dojo/_base/array","dojo/_base/declare","dojo/cldr/supplemental","dojo/date","dojo/date/locale","dojo/date/stamp","dojo/dom","dojo/dom-class","dojo/_base/event","dojo/_base/lang","dojo/sniff","dojo/string","./_WidgetBase","./_TemplatedMixin","dojo/text!./templates/Calendar.html","./hccss"],function(_68,_69,_6a,_6b,_6c,_6d,dom,_6e,_6f,_70,has,_71,_72,_73,_74){var _75=_69("dijit.CalendarLite",[_72,_73],{templateString:_74,dowTemplateString:"<th class=\"dijitReset dijitCalendarDayLabelTemplate\" role=\"columnheader\"><span class=\"dijitCalendarDayLabel\">${d}</span></th>",dateTemplateString:"<td class=\"dijitReset\" role=\"gridcell\" data-dojo-attach-point=\"dateCells\"><span class=\"dijitCalendarDateLabel\" data-dojo-attach-point=\"dateLabels\"></span></td>",weekTemplateString:"<tr class=\"dijitReset dijitCalendarWeekTemplate\" role=\"row\">${d}${d}${d}${d}${d}${d}${d}</tr>",value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date(),baseClass:"dijitCalendar",_isValidDate:function(_76){return _76&&!isNaN(_76)&&typeof _76=="object"&&_76.toString()!=this.constructor.prototype.value.toString();},_getValueAttr:function(){if(this.value&&!isNaN(this.value)){var _77=new this.dateClassObj(this.value);_77.setHours(0,0,0,0);if(_77.getDate()<this.value.getDate()){_77=this.dateModule.add(_77,"hour",1);}return _77;}else{return null;}},_setValueAttr:function(_78,_79){if(typeof _78=="string"){_78=_6d.fromISOString(_78);}_78=this._patchDate(_78);if(this._isValidDate(_78)&&!this.isDisabledDate(_78,this.lang)){this._set("value",_78);this.set("currentFocus",_78);this._markSelectedDates([_78]);if(this._created&&(_79||typeof _79=="undefined")){this.onChange(this.get("value"));}}else{this._set("value",null);this._markSelectedDates([]);}},_patchDate:function(_7a){if(_7a){_7a=new this.dateClassObj(_7a);_7a.setHours(1,0,0,0);}return _7a;},_setText:function(_7b,_7c){while(_7b.firstChild){_7b.removeChild(_7b.firstChild);}_7b.appendChild(_7b.ownerDocument.createTextNode(_7c));},_populateGrid:function(){var _7d=new this.dateClassObj(this.currentFocus);_7d.setDate(1);var _7e=_7d.getDay(),_7f=this.dateModule.getDaysInMonth(_7d),_80=this.dateModule.getDaysInMonth(this.dateModule.add(_7d,"month",-1)),_81=new this.dateClassObj(),_82=_6a.getFirstDayOfWeek(this.lang);if(_82>_7e){_82-=7;}this._date2cell={};_68.forEach(this.dateCells,function(_83,idx){var i=idx+_82;var _84=new this.dateClassObj(_7d),_85,_86="dijitCalendar",adj=0;if(i<_7e){_85=_80-_7e+i+1;adj=-1;_86+="Previous";}else{if(i>=(_7e+_7f)){_85=i-_7e-_7f+1;adj=1;_86+="Next";}else{_85=i-_7e+1;_86+="Current";}}if(adj){_84=this.dateModule.add(_84,"month",adj);}_84.setDate(_85);if(!this.dateModule.compare(_84,_81,"date")){_86="dijitCalendarCurrentDate "+_86;}if(this.isDisabledDate(_84,this.lang)){_86="dijitCalendarDisabledDate "+_86;_83.setAttribute("aria-disabled","true");}else{_86="dijitCalendarEnabledDate "+_86;_83.removeAttribute("aria-disabled");_83.setAttribute("aria-selected","false");}var _87=this.getClassForDate(_84,this.lang);if(_87){_86=_87+" "+_86;}_83.className=_86+"Month dijitCalendarDateTemplate";var _88=_84.valueOf();this._date2cell[_88]=_83;_83.dijitDateValue=_88;this._setText(this.dateLabels[idx],_84.getDateLocalized?_84.getDateLocalized(this.lang):_84.getDate());},this);},_populateControls:function(){var _89=new this.dateClassObj(this.currentFocus);_89.setDate(1);this.monthWidget.set("month",_89);var y=_89.getFullYear()-1;var d=new this.dateClassObj();_68.forEach(["previous","current","next"],function(_8a){d.setFullYear(y++);this._setText(this[_8a+"YearLabelNode"],this.dateLocaleModule.format(d,{selector:"year",locale:this.lang}));},this);},goToToday:function(){this.set("value",new this.dateClassObj());},constructor:function(_8b){this.dateModule=_8b.datePackage?_70.getObject(_8b.datePackage,false):_6b;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=_8b.datePackage?_70.getObject(_8b.datePackage+".locale",false):_6c;},_createMonthWidget:function(){return _75._MonthWidget({id:this.id+"_mw",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode);},buildRendering:function(){var d=this.dowTemplateString,_8c=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),_8d=_6a.getFirstDayOfWeek(this.lang);this.dayCellsHtml=_71.substitute([d,d,d,d,d,d,d].join(""),{d:""},function(){return _8c[_8d++%7];});var r=_71.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[r,r,r,r,r,r].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);dom.setSelectable(this.domNode,false);var _8e=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",_8e,false);},postCreate:function(){this.inherited(arguments);this._connectControls();},_connectControls:function(){var _8f=_70.hitch(this,function(_90,_91,_92){this.connect(this[_90],"onclick",function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,_91,_92));});});_8f("incrementMonth","month",1);_8f("decrementMonth","month",-1);_8f("nextYearLabelNode","year",1);_8f("previousYearLabelNode","year",-1);},_setCurrentFocusAttr:function(_93,_94){var _95=this.currentFocus,_96=this._getNodeByDate(_95);_93=this._patchDate(_93);this._set("currentFocus",_93);if(!this._date2cell||this.dateModule.difference(_95,_93,"month")!=0){this._populateGrid();this._populateControls();this._markSelectedDates([this.value]);}var _97=this._getNodeByDate(_93);_97.setAttribute("tabIndex",this.tabIndex);if(this.focused||_94){_97.focus();}if(_96&&_96!=_97){if(has("webkit")){_96.setAttribute("tabIndex","-1");}else{_96.removeAttribute("tabIndex");}}},focus:function(){this._setCurrentFocusAttr(this.currentFocus,true);},_onDayClick:function(evt){_6f.stop(evt);for(var _98=evt.target;_98&&!_98.dijitDateValue;_98=_98.parentNode){}if(_98&&!_6e.contains(_98,"dijitCalendarDisabledDate")){this.set("value",_98.dijitDateValue);}},_getNodeByDate:function(_99){_99=this._patchDate(_99);return _99&&this._date2cell?this._date2cell[_99.valueOf()]:null;},_markSelectedDates:function(_9a){function _9b(_9c,_9d){_6e.toggle(_9d,"dijitCalendarSelectedDate",_9c);_9d.setAttribute("aria-selected",_9c?"true":"false");};_68.forEach(this._selectedCells||[],_70.partial(_9b,false));this._selectedCells=_68.filter(_68.map(_9a,this._getNodeByDate,this),function(n){return n;});_68.forEach(this._selectedCells,_70.partial(_9b,true));},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});_75._MonthWidget=_69("dijit.CalendarLite._MonthWidget",_72,{_setMonthAttr:function(_9e){var _9f=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,_9e),_a0=(has("ie")==6?"":"<div class='dijitSpacer'>"+_68.map(_9f,function(s){return "<div>"+s+"</div>";}).join("")+"</div>");this.domNode.innerHTML=_a0+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+_9f[_9e.getMonth()]+"</div>";}});return _75;});},"dojox/date/islamic/locale":function(){define("dojox/date/islamic/locale",["../..","dojo/_base/lang","dojo/_base/array","dojo/date","dojo/i18n","dojo/regexp","dojo/string","./Date","dojo/i18n!dojo/cldr/nls/islamic"],function(_a1,_a2,arr,dd,_a3,_a4,_a5,_a6,_a7){var _a8=_a2.getObject("date.islamic.locale",true,_a1);function _a9(_aa,_ab,_ac,_ad,_ae){return _ae.replace(/([a-z])\1*/ig,function(_af){var s,pad;var c=_af.charAt(0);var l=_af.length;var _b0=["abbr","wide","narrow"];switch(c){case "G":s=_ab["eraAbbr"][0];break;case "y":s=String(_aa.getFullYear());break;case "M":var m=_aa.getMonth();if(l<3){s=m+1;pad=true;}else{var _b1=["months","format",_b0[l-3]].join("-");s=_ab[_b1][m];}break;case "d":s=_aa.getDate(true);pad=true;break;case "E":var d=_aa.getDay();if(l<3){s=d+1;pad=true;}else{var _b2=["days","format",_b0[l-3]].join("-");s=_ab[_b2][d];}break;case "a":var _b3=(_aa.getHours()<12)?"am":"pm";s=_ab["dayPeriods-format-wide-"+_b3];break;case "h":case "H":case "K":case "k":var h=_aa.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_aa.getMinutes();pad=true;break;case "s":s=_aa.getSeconds();pad=true;break;case "S":s=Math.round(_aa.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "z":s=dd.getTimezoneName(_aa.toGregorian());if(s){break;}l=4;case "Z":var _b4=_aa.toGregorian().getTimezoneOffset();var tz=[(_b4<=0?"+":"-"),_a5.pad(Math.floor(Math.abs(_b4)/60),2),_a5.pad(Math.abs(_b4)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojox.date.islamic.locale.formatPattern: invalid pattern char: "+_ae);}if(pad){s=_a5.pad(s,l);}return s;});};_a8.format=function(_b5,_b6){_b6=_b6||{};var _b7=_a3.normalizeLocale(_b6.locale);var _b8=_b6.formatLength||"short";var _b9=_a8._getIslamicBundle(_b7);var str=[];var _ba=_a2.hitch(this,_a9,_b5,_b9,_b7,_b6.fullYear);if(_b6.selector=="year"){var _bb=_b5.getFullYear();return _bb;}if(_b6.selector!="time"){var _bc=_b6.datePattern||_b9["dateFormat-"+_b8];if(_bc){str.push(_bd(_bc,_ba));}}if(_b6.selector!="date"){var _be=_b6.timePattern||_b9["timeFormat-"+_b8];if(_be){str.push(_bd(_be,_ba));}}var _bf=str.join(" ");return _bf;};_a8.regexp=function(_c0){return _a8._parseInfo(_c0).regexp;};_a8._parseInfo=function(_c1){_c1=_c1||{};var _c2=_a3.normalizeLocale(_c1.locale);var _c3=_a8._getIslamicBundle(_c2);var _c4=_c1.formatLength||"short";var _c5=_c1.datePattern||_c3["dateFormat-"+_c4];var _c6=_c1.timePattern||_c3["timeFormat-"+_c4];var _c7;if(_c1.selector=="date"){_c7=_c5;}else{if(_c1.selector=="time"){_c7=_c6;}else{_c7=(typeof (_c6)=="undefined")?_c5:_c5+" "+_c6;}}var _c8=[];var re=_bd(_c7,_a2.hitch(this,_c9,_c8,_c3,_c1));return {regexp:re,tokens:_c8,bundle:_c3};};_a8.parse=function(_ca,_cb){_ca=_ca.replace(/[\u200E\u200F\u202A\u202E]/g,"");if(!_cb){_cb={};}var _cc=_a8._parseInfo(_cb);var _cd=_cc.tokens,_a7=_cc.bundle;var _ce=_cc.regexp.replace(/[\u200E\u200F\u202A\u202E]/g,"");var re=new RegExp("^"+_ce+"$");var _cf=re.exec(_ca);var _d0=_a3.normalizeLocale(_cb.locale);if(!_cf){return null;}var _d1,_d2;var _d3=[1389,0,1,0,0,0,0];var _d4="";var _d5=0;var _d6=["abbr","wide","narrow"];var _d7=arr.every(_cf,function(v,i){if(!i){return true;}var _d8=_cd[i-1];var l=_d8.length;switch(_d8.charAt(0)){case "y":_d3[0]=Number(v);break;case "M":if(l>2){var _d9=_a7["months-format-"+_d6[l-3]].concat();if(!_cb.strict){v=v.replace(".","").toLowerCase();_d9=arr.map(_d9,function(s){return s?s.replace(".","").toLowerCase():s;});}v=arr.indexOf(_d9,v);if(v==-1){return false;}_d5=l;}else{v--;}_d3[1]=Number(v);break;case "D":_d3[1]=0;case "d":_d3[2]=Number(v);break;case "a":var am=_cb.am||_a7["dayPeriods-format-wide-am"],pm=_cb.pm||_a7["dayPeriods-format-wide-pm"];if(!_cb.strict){var _da=/\./g;v=v.replace(_da,"").toLowerCase();am=am.replace(_da,"").toLowerCase();pm=pm.replace(_da,"").toLowerCase();}if(_cb.strict&&v!=am&&v!=pm){return false;}_d4=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":_d3[3]=Number(v);break;case "m":_d3[4]=Number(v);break;case "s":_d3[5]=Number(v);break;case "S":_d3[6]=Number(v);}return true;});var _db=+_d3[3];if(_d4==="p"&&_db<12){_d3[3]=_db+12;}else{if(_d4==="a"&&_db==12){_d3[3]=0;}}var _dc=new _a6(_d3[0],_d3[1],_d3[2],_d3[3],_d3[4],_d3[5],_d3[6]);return _dc;};function _bd(_dd,_de,_df,_e0){var _e1=function(x){return x;};_de=_de||_e1;_df=_df||_e1;_e0=_e0||_e1;var _e2=_dd.match(/(''|[^'])+/g);var _e3=_dd.charAt(0)=="'";arr.forEach(_e2,function(_e4,i){if(!_e4){_e2[i]="";}else{_e2[i]=(_e3?_df:_de)(_e4);_e3=!_e3;}});return _e0(_e2.join(""));};function _c9(_e5,_e6,_e7,_e8){_e8=_a4.escapeString(_e8);var _e9=_a3.normalizeLocale(_e7.locale);return _e8.replace(/([a-z])\1*/ig,function(_ea){var s;var c=_ea.charAt(0);var l=_ea.length;var p2="",p3="";if(_e7.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d+";break;case "M":s=(l>2)?"\\S+ ?\\S+":p2+"[1-9]|1[0-2]";break;case "d":s="[12]\\d|"+p2+"[1-9]|3[01]";break;case "E":s="\\S+";break;case "h":s=p2+"[1-9]|1[0-2]";break;case "k":s=p2+"\\d|1[01]";break;case "H":s=p2+"\\d|1\\d|2[0-3]";break;case "K":s=p2+"[1-9]|1\\d|2[0-4]";break;case "m":case "s":s=p2+"\\d|[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_e7.am||_e6["dayPeriods-format-wide-am"],pm=_e7.pm||_e6["dayPeriods-format-wide-pm"];if(_e7.strict){s=am+"|"+pm;}else{s=am+"|"+pm;if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}}break;default:s=".*";}if(_e5){_e5.push(_ea);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};var _eb=[];_a8.addCustomFormats=function(_ec,_ed){_eb.push({pkg:_ec,name:_ed});};_a8._getIslamicBundle=function(_ee){var _ef={};arr.forEach(_eb,function(_f0){var _f1=_a3.getLocalization(_f0.pkg,_f0.name,_ee);_ef=_a2.mixin(_ef,_f1);},this);return _ef;};_a8.addCustomFormats("dojo.cldr","islamic");_a8.getNames=function(_f2,_f3,_f4,_f5,_f6){var _f7;var _f8=_a8._getIslamicBundle(_f5);var _f9=[_f2,_f4,_f3];if(_f4=="standAlone"){var key=_f9.join("-");_f7=_f8[key];if(_f7[0]==1){_f7=undefined;}}_f9[1]="format";return (_f7||_f8[_f9.join("-")]).concat();};_a8.weekDays=_a8.getNames("days","wide","format");_a8.months=_a8.getNames("months","wide","format");return _a8;});},"dijit/Calendar":function(){define("dijit/Calendar",["dojo/_base/array","dojo/date","dojo/date/locale","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/_base/event","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/sniff","./CalendarLite","./_Widget","./_CssStateMixin","./_TemplatedMixin","./form/DropDownButton"],function(_fa,_fb,_fc,_fd,_fe,_ff,_100,_101,keys,lang,has,_102,_103,_104,_105,_106){var _107=_fd("dijit.Calendar",[_102,_103,_104],{cssStateNodes:{"decrementMonth":"dijitCalendarArrow","incrementMonth":"dijitCalendarArrow","previousYearLabelNode":"dijitCalendarPreviousYear","nextYearLabelNode":"dijitCalendarNextYear"},setValue:function(_108){_101.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",_108);},_createMonthWidget:function(){return new _107._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:lang.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode);},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onkeydown","_onKeyDown");this.connect(this.dateRowsNode,"onmouseover","_onDayMouseOver");this.connect(this.dateRowsNode,"onmouseout","_onDayMouseOut");this.connect(this.dateRowsNode,"onmousedown","_onDayMouseDown");this.connect(this.dateRowsNode,"onmouseup","_onDayMouseUp");},_onMonthSelect:function(_109){var date=new this.dateClassObj(this.currentFocus);date.setDate(1);date.setMonth(_109);var _10a=this.dateModule.getDaysInMonth(date);var _10b=this.currentFocus.getDate();date.setDate(Math.min(_10b,_10a));this._setCurrentFocusAttr(date);},_onDayMouseOver:function(evt){var node=_ff.contains(evt.target,"dijitCalendarDateLabel")?evt.target.parentNode:evt.target;if(node&&((node.dijitDateValue&&!_ff.contains(node,"dijitCalendarDisabledDate"))||node==this.previousYearLabelNode||node==this.nextYearLabelNode)){_ff.add(node,"dijitCalendarHoveredDate");this._currentNode=node;}},_onDayMouseOut:function(evt){if(!this._currentNode){return;}if(evt.relatedTarget&&evt.relatedTarget.parentNode==this._currentNode){return;}var cls="dijitCalendarHoveredDate";if(_ff.contains(this._currentNode,"dijitCalendarActiveDate")){cls+=" dijitCalendarActiveDate";}_ff.remove(this._currentNode,cls);this._currentNode=null;},_onDayMouseDown:function(evt){var node=evt.target.parentNode;if(node&&node.dijitDateValue&&!_ff.contains(node,"dijitCalendarDisabledDate")){_ff.add(node,"dijitCalendarActiveDate");this._currentNode=node;}},_onDayMouseUp:function(evt){var node=evt.target.parentNode;if(node&&node.dijitDateValue){_ff.remove(node,"dijitCalendarActiveDate");}},handleKey:function(evt){var _10c=-1,_10d,_10e=this.currentFocus;switch(evt.keyCode){case keys.RIGHT_ARROW:_10c=1;case keys.LEFT_ARROW:_10d="day";if(!this.isLeftToRight()){_10c*=-1;}break;case keys.DOWN_ARROW:_10c=1;case keys.UP_ARROW:_10d="week";break;case keys.PAGE_DOWN:_10c=1;case keys.PAGE_UP:_10d=evt.ctrlKey||evt.altKey?"year":"month";break;case keys.END:_10e=this.dateModule.add(_10e,"month",1);_10d="day";case keys.HOME:_10e=new this.dateClassObj(_10e);_10e.setDate(1);break;case keys.ENTER:case keys.SPACE:this.set("value",this.currentFocus);break;default:return true;}if(_10d){_10e=this.dateModule.add(_10e,_10d,_10c);}this._setCurrentFocusAttr(_10e);return false;},_onKeyDown:function(evt){if(!this.handleKey(evt)){_100.stop(evt);}},onValueSelected:function(){},onChange:function(_10f){this.onValueSelected(_10f);},getClassForDate:function(){}});_107._MonthDropDownButton=_fd("dijit.Calendar._MonthDropDownButton",_106,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new _107._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect});},_setMonthAttr:function(_110){var _111=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,_110);this.dropDown.set("months",_111);this.containerNode.innerHTML=(has("ie")==6?"":"<div class='dijitSpacer'>"+this.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+_111[_110.getMonth()]+"</div>";}});_107._MonthDropDown=_fd("dijit.Calendar._MonthDropDown",[_103,_105],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' "+"data-dojo-attach-event='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(_112){this.domNode.innerHTML=_fa.map(_112,function(_113,idx){return _113?"<div class='dijitCalendarMonthLabel' month='"+idx+"'>"+_113+"</div>":"";}).join("");},_onClick:function(evt){this.onChange(_fe.get(evt.target,"month"));},onChange:function(){},_onMenuHover:function(evt){_ff.toggle(evt.target,"dijitCalendarMonthLabelHover",evt.type=="mouseover");}});return _107;});},"dijit/_editor/RichText":function(){define("dijit/_editor/RichText",["dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/query","dojo/ready","dojo/sniff","dojo/topic","dojo/_base/unload","dojo/_base/url","dojo/_base/window","../_Widget","../_CssStateMixin","./selection","./range","./html","../focus","../main"],function(_114,_115,_116,_117,dom,_118,_119,_11a,_11b,_11c,_11d,_11e,keys,lang,on,_11f,_120,has,_121,_122,_123,win,_124,_125,_126,_127,_128,_129,_12a){var _12b=_116("dijit._editor.RichText",[_124,_125],{constructor:function(_12c){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};if(_12c&&lang.isString(_12c.value)){this.value=_12c.value;}this.onLoadDeferred=new _117();},baseClass:"dijitEditor",inheritWidth:false,focusOnLoad:false,name:"",styleSheets:"",height:"300px",minHeight:"1em",isClosed:true,isLoaded:false,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:false,disableSpellCheck:false,postCreate:function(){if("textarea"===this.domNode.tagName.toLowerCase()){console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");}this.contentPreFilters=[lang.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);if(has("mozilla")){this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters);this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters);}if(has("webkit")){this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters);this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters);}if(has("ie")){this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters);this.contentDomPostFilters=[lang.hitch(this,this._stripBreakerNodes)].concat(this.contentDomPostFilters);}this.inherited(arguments);_121.publish(_12a._scopeName+"._editor.RichText::init",this);this.open();this.setupDefaultShortcuts();},setupDefaultShortcuts:function(){var exec=lang.hitch(this,function(cmd,arg){return function(){return !this.execCommand(cmd,arg);};});var _12d={b:exec("bold"),i:exec("italic"),u:exec("underline"),a:exec("selectall"),s:function(){this.save(true);},m:function(){this.isTabIndent=!this.isTabIndent;},"1":exec("formatblock","h1"),"2":exec("formatblock","h2"),"3":exec("formatblock","h3"),"4":exec("formatblock","h4"),"\\":exec("insertunorderedlist")};if(!has("ie")){_12d.Z=exec("redo");}var key;for(key in _12d){this.addKeyHandler(key,true,false,_12d[key]);}},events:["onKeyPress","onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:false,_localizeEditorCommands:function(){if(_12b._editorCommandsLocalized){this._local2NativeFormatNames=_12b._local2NativeFormatNames;this._native2LocalFormatNames=_12b._native2LocalFormatNames;return;}_12b._editorCommandsLocalized=true;_12b._local2NativeFormatNames={};_12b._native2LocalFormatNames={};this._local2NativeFormatNames=_12b._local2NativeFormatNames;this._native2LocalFormatNames=_12b._native2LocalFormatNames;var _12e=["div","p","pre","h1","h2","h3","h4","h5","h6","ol","ul","address"];var _12f="",_130,i=0;while((_130=_12e[i++])){if(_130.charAt(1)!=="l"){_12f+="<"+_130+"><span>content</span></"+_130+"><br/>";}else{_12f+="<"+_130+"><li>content</li></"+_130+"><br/>";}}var _131={position:"absolute",top:"0px",zIndex:10,opacity:0.01};var div=_11a.create("div",{style:_131,innerHTML:_12f});this.ownerDocumentBody.appendChild(div);var _132=lang.hitch(this,function(){var node=div.firstChild;while(node){try{this._sCall("selectElement",[node.firstChild]);var _133=node.tagName.toLowerCase();this._local2NativeFormatNames[_133]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[_133]]=_133;node=node.nextSibling.nextSibling;}catch(e){}}_11a.destroy(div);});this.defer(_132);},open:function(_134){if(!this.onLoadDeferred||this.onLoadDeferred.fired>=0){this.onLoadDeferred=new _117();}if(!this.isClosed){this.close();}_121.publish(_12a._scopeName+"._editor.RichText::open",this);if(arguments.length===1&&_134.nodeName){this.domNode=_134;}var dn=this.domNode;var html;if(lang.isString(this.value)){html=this.value;delete this.value;dn.innerHTML="";}else{if(dn.nodeName&&dn.nodeName.toLowerCase()=="textarea"){var ta=(this.textarea=dn);this.name=ta.name;html=ta.value;dn=this.domNode=this.ownerDocument.createElement("div");dn.setAttribute("widgetId",this.id);ta.removeAttribute("widgetId");dn.cssText=ta.cssText;dn.className+=" "+ta.className;_11a.place(dn,ta,"before");var _135=lang.hitch(this,function(){_11c.set(ta,{display:"block",position:"absolute",top:"-1000px"});if(has("ie")){var s=ta.style;this.__overflow=s.overflow;s.overflow="hidden";}});if(has("ie")){this.defer(_135,10);}else{_135();}if(ta.form){var _136=ta.value;this.reset=function(){var _137=this.getValue();if(_137!==_136){this.replaceValue(_136);}};on(ta.form,"submit",lang.hitch(this,function(){_118.set(ta,"disabled",this.disabled);ta.value=this.getValue();}));}}else{html=_128.getChildrenHtml(dn);dn.innerHTML="";}}this.value=html;if(dn.nodeName&&dn.nodeName==="LI"){dn.innerHTML=" <br>";}this.header=dn.ownerDocument.createElement("div");dn.appendChild(this.header);this.editingArea=dn.ownerDocument.createElement("div");dn.appendChild(this.editingArea);this.footer=dn.ownerDocument.createElement("div");dn.appendChild(this.footer);if(!this.name){this.name=this.id+"_AUTOGEN";}if(this.name!==""&&(!_115["useXDomain"]||_115["allowXdRichTextSave"])){var _138=dom.byId(_12a._scopeName+"._editor.RichText.value");if(_138&&_138.value!==""){var _139=_138.value.split(this._SEPARATOR),i=0,dat;while((dat=_139[i++])){var data=dat.split(this._NAME_CONTENT_SEP);if(data[0]===this.name){html=data[1];_139=_139.splice(i,1);_138.value=_139.join(this._SEPARATOR);break;}}}if(!_12b._globalSaveHandler){_12b._globalSaveHandler={};_122.addOnUnload(function(){var id;for(id in _12b._globalSaveHandler){var f=_12b._globalSaveHandler[id];if(lang.isFunction(f)){f();}}});}_12b._globalSaveHandler[this.id]=lang.hitch(this,"_saveContent");}this.isClosed=false;var ifr=(this.editorObject=this.iframe=this.ownerDocument.createElement("iframe"));ifr.id=this.id+"_iframe";ifr.style.border="none";ifr.style.width="100%";if(this._layoutMode){ifr.style.height="100%";}else{if(has("ie")>=7){if(this.height){ifr.style.height=this.height;}if(this.minHeight){ifr.style.minHeight=this.minHeight;}}else{ifr.style.height=this.height?this.height:this.minHeight;}}ifr.frameBorder=0;ifr._loadFunc=lang.hitch(this,function(w){this.window=w;this.document=this.window.document;if(has("ie")){this._localizeEditorCommands();}this.onLoad(html);});var src=this._getIframeDocTxt(),s="javascript: '"+src.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'";ifr.setAttribute("src",s);this.editingArea.appendChild(ifr);if(has("safari")<=4){src=ifr.getAttribute("src");if(!src||src.indexOf("javascript")===-1){this.defer(function(){ifr.setAttribute("src",s);});}}if(dn.nodeName==="LI"){dn.lastChild.style.marginTop="-1.2em";}_119.add(this.domNode,this.baseClass);},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var _13a=_11c.getComputedStyle(this.domNode);var html="";var _13b=true;if(has("ie")||has("webkit")||(!this.height&&!has("mozilla"))){html="<div id='dijitEditorBody'></div>";_13b=false;}else{if(has("mozilla")){this._cursorToStart=true;html="&#160;";}}var font=[_13a.fontWeight,_13a.fontSize,_13a.fontFamily].join(" ");var _13c=_13a.lineHeight;if(_13c.indexOf("px")>=0){_13c=parseFloat(_13c)/parseFloat(_13a.fontSize);}else{if(_13c.indexOf("em")>=0){_13c=parseFloat(_13c);}else{_13c="normal";}}var _13d="";var self=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(_13e){_13e=_13e.replace(/^;/ig,"")+";";var s=_13e.split(":")[0];if(s){s=lang.trim(s);s=s.toLowerCase();var i;var sC="";for(i=0;i<s.length;i++){var c=s.charAt(i);switch(c){case "-":i++;c=s.charAt(i).toUpperCase();default:sC+=c;}}_11c.set(self.domNode,sC,"");}_13d+=_13e+";";});var _13f=_11f("label[for=\""+this.id+"\"]");return [this.isLeftToRight()?"<html>\n<head>\n":"<html dir='rtl'>\n<head>\n",(has("mozilla")&&_13f.length?"<title>"+_13f[0].innerHTML+"</title>\n":""),"<meta http-equiv='Content-Type' content='text/html'>\n","<style>\n","\tbody,html {\n","\t\tbackground:transparent;\n","\t\tpadding: 1px 0 0 0;\n","\t\tmargin: -1px 0 0 0;\n",((has("webkit"))?"\t\twidth: 100%;\n":""),((has("webkit"))?"\t\theight: 100%;\n":""),"\t}\n","\tbody{\n","\t\ttop:0px;\n","\t\tleft:0px;\n","\t\tright:0px;\n","\t\tfont:",font,";\n",((this.height||has("opera"))?"":"\t\tposition: fixed;\n"),"\t\tmin-height:",this.minHeight,";\n","\t\tline-height:",_13c,";\n","\t}\n","\tp{ margin: 1em 0; }\n",(!_13b&&!this.height?"\tbody,html {overflow-y: hidden;}\n":""),"\t#dijitEditorBody{overflow-x: auto; overflow-y:"+(this.height?"auto;":"hidden;")+" outline: 0px;}\n","\tli > ul:-moz-first-node, li > ol:-moz-first-node{ padding-top: 1.2em; }\n",(!has("ie")?"\tli{ min-height:1.2em; }\n":""),"</style>\n",this._applyEditingAreaStyleSheets(),"\n","</head>\n<body ",(_13b?"id='dijitEditorBody' ":""),"onload='frameElement && frameElement._loadFunc(window,document)' ","style='"+_13d+"'>",html,"</body>\n</html>"].join("");},_applyEditingAreaStyleSheets:function(){var _140=[];if(this.styleSheets){_140=this.styleSheets.split(";");this.styleSheets="";}_140=_140.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];var text="",i=0,url;while((url=_140[i++])){var _141=(new _123(win.global.location,url)).toString();this.editingAreaStyleSheets.push(_141);text+="<link rel=\"stylesheet\" type=\"text/css\" href=\""+_141+"\"/>";}return text;},addStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)==="."||(url.charAt(0)!=="/"&&!uri.host)){url=(new _123(win.global.location,url)).toString();}if(_114.indexOf(this.editingAreaStyleSheets,url)>-1){return;}this.editingAreaStyleSheets.push(url);this.onLoadDeferred.then(lang.hitch(this,function(){if(this.document.createStyleSheet){this.document.createStyleSheet(url);}else{var head=this.document.getElementsByTagName("head")[0];var _142=this.document.createElement("link");_142.rel="stylesheet";_142.type="text/css";_142.href=url;head.appendChild(_142);}}));},removeStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)==="."||(url.charAt(0)!=="/"&&!uri.host)){url=(new _123(win.global.location,url)).toString();}var _143=_114.indexOf(this.editingAreaStyleSheets,url);if(_143===-1){return;}delete this.editingAreaStyleSheets[_143];_11f("link:[href=\""+url+"\"]",this.window.document).orphan();},disabled:false,_mozSettingProps:{"styleWithCSS":false},_setDisabledAttr:function(_144){_144=!!_144;this._set("disabled",_144);if(!this.isLoaded){return;}if(has("ie")||has("webkit")||has("opera")){var _145=has("ie")&&(this.isLoaded||!this.focusOnLoad);if(_145){this.editNode.unselectable="on";}this.editNode.contentEditable=!_144;if(_145){this.defer(function(){if(this.editNode){this.editNode.unselectable="off";}});}}else{try{this.document.designMode=(_144?"off":"on");}catch(e){return;}if(!_144&&this._mozSettingProps){var ps=this._mozSettingProps;var n;for(n in ps){if(ps.hasOwnProperty(n)){try{this.document.execCommand(n,false,ps[n]);}catch(e2){}}}}}this._disabledOK=true;},onLoad:function(html){if(!this.window.__registeredWindow){this.window.__registeredWindow=true;this._iframeRegHandle=_129.registerIframe(this.iframe);}if(!has("ie")&&!has("webkit")&&(this.height||has("mozilla"))){this.editNode=this.document.body;}else{this.editNode=this.document.body.firstChild;var _146=this;if(has("ie")){this.tabStop=_11a.create("div",{tabIndex:-1},this.editingArea);this.iframe.onfocus=function(){_146.editNode.setActive();};}}this.focusNode=this.editNode;var _147=this.events.concat(this.captureEvents);var ap=this.iframe?this.document:this.editNode;_114.forEach(_147,function(item){this.connect(ap,item.toLowerCase(),item);},this);this.connect(ap,"onmouseup","onClick");if(has("ie")){this.connect(this.document,"onmousedown","_onIEMouseDown");this.editNode.style.zoom=1;}else{this.connect(this.document,"onmousedown",function(){delete this._cursorToStart;});}if(has("webkit")){this._webkitListener=this.connect(this.document,"onmouseup","onDisplayChanged");this.connect(this.document,"onmousedown",function(e){var t=e.target;if(t&&(t===this.document.body||t===this.document)){this.defer("placeCursorAtEnd");}});}if(has("ie")){try{this.document.execCommand("RespectVisibilityInDesign",true,null);}catch(e){}}this.isLoaded=true;this.set("disabled",this.disabled);var _148=lang.hitch(this,function(){this.setValue(html);if(this.onLoadDeferred){this.onLoadDeferred.resolve(true);}this.onDisplayChanged();if(this.focusOnLoad){_120(lang.hitch(this,"defer","focus",this.updateInterval));}this.value=this.getValue(true);});if(this.setValueDeferred){this.setValueDeferred.then(_148);}else{_148();}},onKeyDown:function(e){if(e.keyCode===keys.TAB&&this.isTabIndent){_11d.stop(e);if(this.queryCommandEnabled((e.shiftKey?"outdent":"indent"))){this.execCommand((e.shiftKey?"outdent":"indent"));}}if(has("ie")){if(e.keyCode==keys.TAB&&!this.isTabIndent){if(e.shiftKey&&!e.ctrlKey&&!e.altKey){this.iframe.focus();}else{if(!e.shiftKey&&!e.ctrlKey&&!e.altKey){this.tabStop.focus();}}}else{if(e.keyCode===keys.BACKSPACE&&this.document.selection.type==="Control"){_11d.stop(e);this.execCommand("delete");}else{if((65<=e.keyCode&&e.keyCode<=90)||(e.keyCode>=37&&e.keyCode<=40)){e.charCode=e.keyCode;this.onKeyPress(e);}}}}if(has("ff")){if(e.keyCode===keys.PAGE_UP||e.keyCode===keys.PAGE_DOWN){if(this.editNode.clientHeight>=this.editNode.scrollHeight){e.preventDefault();}}}return true;},onKeyUp:function(){},setDisabled:function(_149){_11e.deprecated("dijit.Editor::setDisabled is deprecated","use dijit.Editor::attr(\"disabled\",boolean) instead",2);this.set("disabled",_149);},_setValueAttr:function(_14a){this.setValue(_14a);},_setDisableSpellCheckAttr:function(_14b){if(this.document){_118.set(this.document.body,"spellcheck",!_14b);}else{this.onLoadDeferred.then(lang.hitch(this,function(){_118.set(this.document.body,"spellcheck",!_14b);}));}this._set("disableSpellCheck",_14b);},onKeyPress:function(e){var c=(e.keyChar&&e.keyChar.toLowerCase())||e.keyCode,_14c=this._keyHandlers[c],args=arguments;if(_14c&&!e.altKey){_114.some(_14c,function(h){if(!(h.shift^e.shiftKey)&&!(h.ctrl^(e.ctrlKey||e.metaKey))){if(!h.handler.apply(this,args)){e.preventDefault();}return true;}},this);}if(!this._onKeyHitch){this._onKeyHitch=lang.hitch(this,"onKeyPressed");}this.defer("_onKeyHitch",1);return true;},addKeyHandler:function(key,ctrl,_14d,_14e){if(!lang.isArray(this._keyHandlers[key])){this._keyHandlers[key]=[];}this._keyHandlers[key].push({shift:_14d||false,ctrl:ctrl||false,handler:_14e});},onKeyPressed:function(){this.onDisplayChanged();},onClick:function(e){this.onDisplayChanged(e);},_onIEMouseDown:function(){if(!this.focused&&!this.disabled){this.focus();}},_onBlur:function(e){this.inherited(arguments);var _14f=this.getValue(true);if(_14f!==this.value){this.onChange(_14f);}this._set("value",_14f);},_onFocus:function(e){if(!this.disabled){if(!this._disabledOK){this.set("disabled",false);}this.inherited(arguments);}},blur:function(){if(!has("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus){this.window.document.documentElement.focus();}else{if(this.ownerDocumentBody.focus){this.ownerDocumentBody.focus();}}},focus:function(){if(!this.isLoaded){this.focusOnLoad=true;return;}if(this._cursorToStart){delete this._cursorToStart;if(this.editNode.childNodes){this.placeCursorAtStart();return;}}if(!has("ie")){_129.focus(this.iframe);}else{if(this.editNode&&this.editNode.focus){this.iframe.fireEvent("onfocus",document.createEventObject());}}},updateInterval:200,_updateTimer:null,onDisplayChanged:function(){if(this._updateTimer){this._updateTimer.remove();}this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval);},onNormalizedDisplayChanged:function(){delete this._updateTimer;},onChange:function(){},_normalizeCommand:function(cmd,_150){var _151=cmd.toLowerCase();if(_151==="formatblock"){if(has("safari")&&_150===undefined){_151="heading";}}else{if(_151==="hilitecolor"&&!has("mozilla")){_151="backcolor";}}return _151;},_qcaCache:{},queryCommandAvailable:function(_152){var ca=this._qcaCache[_152];if(ca!==undefined){return ca;}return (this._qcaCache[_152]=this._queryCommandAvailable(_152));},_queryCommandAvailable:function(_153){var ie=1;var _154=1<<1;var _155=1<<2;var _156=1<<3;function _157(_158){return {ie:Boolean(_158&ie),mozilla:Boolean(_158&_154),webkit:Boolean(_158&_155),opera:Boolean(_158&_156)};};var _159=null;switch(_153.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":_159=_157(_154|ie|_155|_156);break;case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":_159=_157(_154|ie|_156|_155);break;case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":_159=_157(ie);break;case "cut":case "copy":case "paste":_159=_157(ie|_154|_155|_156);break;case "inserttable":_159=_157(_154|ie);break;case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":_159=_157(ie|_154);break;default:return false;}return (has("ie")&&_159.ie)||(has("mozilla")&&_159.mozilla)||(has("webkit")&&_159.webkit)||(has("opera")&&_159.opera);},execCommand:function(_15a,_15b){var _15c;this.focus();_15a=this._normalizeCommand(_15a,_15b);if(_15b!==undefined){if(_15a==="heading"){throw new Error("unimplemented");}else{if((_15a==="formatblock")&&has("ie")){_15b="<"+_15b+">";}}}var _15d="_"+_15a+"Impl";if(this[_15d]){_15c=this[_15d](_15b);}else{_15b=arguments.length>1?_15b:null;if(_15b||_15a!=="createlink"){_15c=this.document.execCommand(_15a,false,_15b);}}this.onDisplayChanged();return _15c;},queryCommandEnabled:function(_15e){if(this.disabled||!this._disabledOK){return false;}_15e=this._normalizeCommand(_15e);var _15f="_"+_15e+"EnabledImpl";if(this[_15f]){return this[_15f](_15e);}else{return this._browserQueryCommandEnabled(_15e);}},queryCommandState:function(_160){if(this.disabled||!this._disabledOK){return false;}_160=this._normalizeCommand(_160);try{return this.document.queryCommandState(_160);}catch(e){return false;}},queryCommandValue:function(_161){if(this.disabled||!this._disabledOK){return false;}var r;_161=this._normalizeCommand(_161);if(has("ie")&&_161==="formatblock"){r=this._native2LocalFormatNames[this.document.queryCommandValue(_161)];}else{if(has("mozilla")&&_161==="hilitecolor"){var _162;try{_162=this.document.queryCommandValue("styleWithCSS");}catch(e){_162=false;}this.document.execCommand("styleWithCSS",false,true);r=this.document.queryCommandValue(_161);this.document.execCommand("styleWithCSS",false,_162);}else{r=this.document.queryCommandValue(_161);}}return r;},_sCall:function(name,args){return win.withGlobal(this.window,name,_126,args);},placeCursorAtStart:function(){this.focus();var _163=false;if(has("mozilla")){var _164=this.editNode.firstChild;while(_164){if(_164.nodeType===3){if(_164.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_163=true;this._sCall("selectElement",[_164]);break;}}else{if(_164.nodeType===1){_163=true;var tg=_164.tagName?_164.tagName.toLowerCase():"";if(/br|input|img|base|meta|area|basefont|hr|link/.test(tg)){this._sCall("selectElement",[_164]);}else{this._sCall("selectElementChildren",[_164]);}break;}}_164=_164.nextSibling;}}else{_163=true;this._sCall("selectElementChildren",[this.editNode]);}if(_163){this._sCall("collapse",[true]);}},placeCursorAtEnd:function(){this.focus();var _165=false;if(has("mozilla")){var last=this.editNode.lastChild;while(last){if(last.nodeType===3){if(last.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_165=true;this._sCall("selectElement",[last]);break;}}else{if(last.nodeType===1){_165=true;this._sCall("selectElement",[last.lastChild||last]);break;}}last=last.previousSibling;}}else{_165=true;this._sCall("selectElementChildren",[this.editNode]);}if(_165){this._sCall("collapse",[false]);}},getValue:function(_166){if(this.textarea){if(this.isClosed||!this.isLoaded){return this.textarea.value;}}return this._postFilterContent(null,_166);},_getValueAttr:function(){return this.getValue(true);},setValue:function(html){if(!this.isLoaded){this.onLoadDeferred.then(lang.hitch(this,function(){this.setValue(html);}));return;}this._cursorToStart=true;if(this.textarea&&(this.isClosed||!this.isLoaded)){this.textarea.value=html;}else{html=this._preFilterContent(html);var node=this.isClosed?this.domNode:this.editNode;if(html&&has("mozilla")&&html.toLowerCase()==="<p></p>"){html="<p>&#160;</p>";}if(!html&&has("webkit")){html="&#160;";}node.innerHTML=html;this._preDomFilterContent(node);}this.onDisplayChanged();this._set("value",this.getValue(true));},replaceValue:function(html){if(this.isClosed){this.setValue(html);}else{if(this.window&&this.window.getSelection&&!has("mozilla")){this.setValue(html);}else{if(this.window&&this.window.getSelection){html=this._preFilterContent(html);this.execCommand("selectall");if(!html){this._cursorToStart=true;html="&#160;";}this.execCommand("inserthtml",html);this._preDomFilterContent(this.editNode);}else{if(this.document&&this.document.selection){this.setValue(html);}}}}this._set("value",this.getValue(true));},_preFilterContent:function(html){var ec=html;_114.forEach(this.contentPreFilters,function(ef){if(ef){ec=ef(ec);}});return ec;},_preDomFilterContent:function(dom){dom=dom||this.editNode;_114.forEach(this.contentDomPreFilters,function(ef){if(ef&&lang.isFunction(ef)){ef(dom);}},this);},_postFilterContent:function(dom,_167){var ec;if(!lang.isString(dom)){dom=dom||this.editNode;if(this.contentDomPostFilters.length){if(_167){dom=lang.clone(dom);}_114.forEach(this.contentDomPostFilters,function(ef){dom=ef(dom);});}ec=_128.getChildrenHtml(dom);}else{ec=dom;}if(!lang.trim(ec.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length){ec="";}_114.forEach(this.contentPostFilters,function(ef){ec=ef(ec);});return ec;},_saveContent:function(){var _168=dom.byId(_12a._scopeName+"._editor.RichText.value");if(_168){if(_168.value){_168.value+=this._SEPARATOR;}_168.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(true);}},escapeXml:function(str,_169){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_169){str=str.replace(/'/gm,"&#39;");}return str;},getNodeHtml:function(node){_11e.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit/_editor/html::getNodeHtml instead",2);return _128.getNodeHtml(node);},getNodeChildrenHtml:function(dom){_11e.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2);return _128.getChildrenHtml(dom);},close:function(save){if(this.isClosed){return;}if(!arguments.length){save=true;}if(save){this._set("value",this.getValue(true));}if(this.interval){clearInterval(this.interval);}if(this._webkitListener){this.disconnect(this._webkitListener);delete this._webkitListener;}if(has("ie")){this.iframe.onfocus=null;}this.iframe._loadFunc=null;if(this._iframeRegHandle){this._iframeRegHandle.remove();delete this._iframeRegHandle;}if(this.textarea){var s=this.textarea.style;s.position="";s.left=s.top="";if(has("ie")){s.overflow=this.__overflow;this.__overflow=null;}this.textarea.value=this.value;_11a.destroy(this.domNode);this.domNode=this.textarea;}else{this.domNode.innerHTML=this.value;}delete this.iframe;_119.remove(this.domNode,this.baseClass);this.isClosed=true;this.isLoaded=false;delete this.editNode;delete this.focusNode;if(this.window&&this.window._frameElement){this.window._frameElement=null;}this.window=null;this.document=null;this.editingArea=null;this.editorObject=null;},destroy:function(){if(!this.isClosed){this.close(false);}if(this._updateTimer){this._updateTimer.remove();}this.inherited(arguments);if(_12b._globalSaveHandler){delete _12b._globalSaveHandler[this.id];}},_removeMozBogus:function(html){return html.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"");},_removeWebkitBogus:function(html){html=html.replace(/\sclass="webkit-block-placeholder"/gi,"");html=html.replace(/\sclass="apple-style-span"/gi,"");html=html.replace(/<meta charset=\"utf-8\" \/>/gi,"");return html;},_normalizeFontStyle:function(html){return html.replace(/<(\/)?strong([ \>])/gi,"<$1b$2").replace(/<(\/)?em([ \>])/gi,"<$1i$2");},_preFixUrlAttributes:function(html){return html.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2");},_browserQueryCommandEnabled:function(_16a){if(!_16a){return false;}var elem=has("ie")?this.document.selection.createRange():this.document;try{return elem.queryCommandEnabled(_16a);}catch(e){return false;}},_createlinkEnabledImpl:function(){var _16b=true;if(has("opera")){var sel=this.window.getSelection();if(sel.isCollapsed){_16b=true;}else{_16b=this.document.queryCommandEnabled("createlink");}}else{_16b=this._browserQueryCommandEnabled("createlink");}return _16b;},_unlinkEnabledImpl:function(){var _16c=true;if(has("mozilla")||has("webkit")){_16c=this._sCall("hasAncestorElement",["a"]);}else{_16c=this._browserQueryCommandEnabled("unlink");}return _16c;},_inserttableEnabledImpl:function(){var _16d=true;if(has("mozilla")||has("webkit")){_16d=true;}else{_16d=this._browserQueryCommandEnabled("inserttable");}return _16d;},_cutEnabledImpl:function(){var _16e=true;if(has("webkit")){var sel=this.window.getSelection();if(sel){sel=sel.toString();}_16e=!!sel;}else{_16e=this._browserQueryCommandEnabled("cut");}return _16e;},_copyEnabledImpl:function(){var _16f=true;if(has("webkit")){var sel=this.window.getSelection();if(sel){sel=sel.toString();}_16f=!!sel;}else{_16f=this._browserQueryCommandEnabled("copy");}return _16f;},_pasteEnabledImpl:function(){var _170=true;if(has("webkit")){return true;}else{_170=this._browserQueryCommandEnabled("paste");}return _170;},_inserthorizontalruleImpl:function(_171){if(has("ie")){return this._inserthtmlImpl("<hr>");}return this.document.execCommand("inserthorizontalrule",false,_171);},_unlinkImpl:function(_172){if((this.queryCommandEnabled("unlink"))&&(has("mozilla")||has("webkit"))){var a=this._sCall("getAncestorElement",["a"]);this._sCall("selectElement",[a]);return this.document.execCommand("unlink",false,null);}return this.document.execCommand("unlink",false,_172);},_hilitecolorImpl:function(_173){var _174;var _175=this._handleTextColorOrProperties("hilitecolor",_173);if(!_175){if(has("mozilla")){this.document.execCommand("styleWithCSS",false,true);console.log("Executing color command.");_174=this.document.execCommand("hilitecolor",false,_173);this.document.execCommand("styleWithCSS",false,false);}else{_174=this.document.execCommand("hilitecolor",false,_173);}}return _174;},_backcolorImpl:function(_176){if(has("ie")){_176=_176?_176:null;}var _177=this._handleTextColorOrProperties("backcolor",_176);if(!_177){_177=this.document.execCommand("backcolor",false,_176);}return _177;},_forecolorImpl:function(_178){if(has("ie")){_178=_178?_178:null;}var _179=false;_179=this._handleTextColorOrProperties("forecolor",_178);if(!_179){_179=this.document.execCommand("forecolor",false,_178);}return _179;},_inserthtmlImpl:function(_17a){_17a=this._preFilterContent(_17a);var rv=true;if(has("ie")){var _17b=this.document.selection.createRange();if(this.document.selection.type.toUpperCase()==="CONTROL"){var n=_17b.item(0);while(_17b.length){_17b.remove(_17b.item(0));}n.outerHTML=_17a;}else{_17b.pasteHTML(_17a);}_17b.select();}else{if(has("mozilla")&&!_17a.length){this._sCall("remove");}else{rv=this.document.execCommand("inserthtml",false,_17a);}}return rv;},_boldImpl:function(_17c){var _17d=false;if(has("ie")){this._adaptIESelection();_17d=this._adaptIEFormatAreaAndExec("bold");}if(!_17d){_17d=this.document.execCommand("bold",false,_17c);}return _17d;},_italicImpl:function(_17e){var _17f=false;if(has("ie")){this._adaptIESelection();_17f=this._adaptIEFormatAreaAndExec("italic");}if(!_17f){_17f=this.document.execCommand("italic",false,_17e);}return _17f;},_underlineImpl:function(_180){var _181=false;if(has("ie")){this._adaptIESelection();_181=this._adaptIEFormatAreaAndExec("underline");}if(!_181){_181=this.document.execCommand("underline",false,_180);}return _181;},_strikethroughImpl:function(_182){var _183=false;if(has("ie")){this._adaptIESelection();_183=this._adaptIEFormatAreaAndExec("strikethrough");}if(!_183){_183=this.document.execCommand("strikethrough",false,_182);}return _183;},_superscriptImpl:function(_184){var _185=false;if(has("ie")){this._adaptIESelection();_185=this._adaptIEFormatAreaAndExec("superscript");}if(!_185){_185=this.document.execCommand("superscript",false,_184);}return _185;},_subscriptImpl:function(_186){var _187=false;if(has("ie")){this._adaptIESelection();_187=this._adaptIEFormatAreaAndExec("subscript");}if(!_187){_187=this.document.execCommand("subscript",false,_186);}return _187;},_fontnameImpl:function(_188){var _189;if(has("ie")){_189=this._handleTextColorOrProperties("fontname",_188);}if(!_189){_189=this.document.execCommand("fontname",false,_188);}return _189;},_fontsizeImpl:function(_18a){var _18b;if(has("ie")){_18b=this._handleTextColorOrProperties("fontsize",_18a);}if(!_18b){_18b=this.document.execCommand("fontsize",false,_18a);}return _18b;},_insertorderedlistImpl:function(_18c){var _18d=false;if(has("ie")){_18d=this._adaptIEList("insertorderedlist",_18c);}if(!_18d){_18d=this.document.execCommand("insertorderedlist",false,_18c);}return _18d;},_insertunorderedlistImpl:function(_18e){var _18f=false;if(has("ie")){_18f=this._adaptIEList("insertunorderedlist",_18e);}if(!_18f){_18f=this.document.execCommand("insertunorderedlist",false,_18e);}return _18f;},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header);},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer);},_getNodeChildrenHeight:function(node){var h=0;if(node&&node.childNodes){var i;for(i=0;i<node.childNodes.length;i++){var size=_11b.position(node.childNodes[i]);h+=size.h;}}return h;},_isNodeEmpty:function(node,_190){if(node.nodeType===1){if(node.childNodes.length>0){return this._isNodeEmpty(node.childNodes[0],_190);}return true;}else{if(node.nodeType===3){return (node.nodeValue.substring(_190)==="");}}return false;},_removeStartingRangeFromRange:function(node,_191){if(node.nextSibling){_191.setStart(node.nextSibling,0);}else{var _192=node.parentNode;while(_192&&_192.nextSibling==null){_192=_192.parentNode;}if(_192){_191.setStart(_192.nextSibling,0);}}return _191;},_adaptIESelection:function(){var _193=_127.getSelection(this.window);if(_193&&_193.rangeCount&&!_193.isCollapsed){var _194=_193.getRangeAt(0);var _195=_194.startContainer;var _196=_194.startOffset;while(_195.nodeType===3&&_196>=_195.length&&_195.nextSibling){_196=_196-_195.length;_195=_195.nextSibling;}var _197=null;while(this._isNodeEmpty(_195,_196)&&_195!==_197){_197=_195;_194=this._removeStartingRangeFromRange(_195,_194);_195=_194.startContainer;_196=0;}_193.removeAllRanges();_193.addRange(_194);}},_adaptIEFormatAreaAndExec:function(_198){var _199=_127.getSelection(this.window);var doc=this.document;var rs,ret,_19a,txt,_19b,_19c,_19d,_19e;if(_198&&_199&&_199.isCollapsed){var _19f=this.queryCommandValue(_198);if(_19f){var _1a0=this._tagNamesForCommand(_198);_19a=_199.getRangeAt(0);var fs=_19a.startContainer;if(fs.nodeType===3){var _1a1=_19a.endOffset;if(fs.length<_1a1){ret=this._adjustNodeAndOffset(rs,_1a1);fs=ret.node;_1a1=ret.offset;}}var _1a2;while(fs&&fs!==this.editNode){var _1a3=fs.tagName?fs.tagName.toLowerCase():"";if(_114.indexOf(_1a0,_1a3)>-1){_1a2=fs;break;}fs=fs.parentNode;}if(_1a2){rs=_19a.startContainer;var _1a4=doc.createElement(_1a2.tagName);_11a.place(_1a4,_1a2,"after");if(rs&&rs.nodeType===3){var _1a5,_1a6;var _1a7=_19a.endOffset;if(rs.length<_1a7){ret=this._adjustNodeAndOffset(rs,_1a7);rs=ret.node;_1a7=ret.offset;}txt=rs.nodeValue;_19b=doc.createTextNode(txt.substring(0,_1a7));var _1a8=txt.substring(_1a7,txt.length);if(_1a8){_19c=doc.createTextNode(_1a8);}_11a.place(_19b,rs,"before");if(_19c){_19d=doc.createElement("span");_19d.className="ieFormatBreakerSpan";_11a.place(_19d,rs,"after");_11a.place(_19c,_19d,"after");_19c=_19d;}_11a.destroy(rs);var _1a9=_19b.parentNode;var _1aa=[];var _1ab;while(_1a9!==_1a2){var tg=_1a9.tagName;_1ab={tagName:tg};_1aa.push(_1ab);var _1ac=doc.createElement(tg);if(_1a9.style){if(_1ac.style){if(_1a9.style.cssText){_1ac.style.cssText=_1a9.style.cssText;_1ab.cssText=_1a9.style.cssText;}}}if(_1a9.tagName==="FONT"){if(_1a9.color){_1ac.color=_1a9.color;_1ab.color=_1a9.color;}if(_1a9.face){_1ac.face=_1a9.face;_1ab.face=_1a9.face;}if(_1a9.size){_1ac.size=_1a9.size;_1ab.size=_1a9.size;}}if(_1a9.className){_1ac.className=_1a9.className;_1ab.className=_1a9.className;}if(_19c){_1a5=_19c;while(_1a5){_1a6=_1a5.nextSibling;_1ac.appendChild(_1a5);_1a5=_1a6;}}if(_1ac.tagName==_1a9.tagName){_19d=doc.createElement("span");_19d.className="ieFormatBreakerSpan";_11a.place(_19d,_1a9,"after");_11a.place(_1ac,_19d,"after");}else{_11a.place(_1ac,_1a9,"after");}_19b=_1a9;_19c=_1ac;_1a9=_1a9.parentNode;}if(_19c){_1a5=_19c;if(_1a5.nodeType===1||(_1a5.nodeType===3&&_1a5.nodeValue)){_1a4.innerHTML="";}while(_1a5){_1a6=_1a5.nextSibling;_1a4.appendChild(_1a5);_1a5=_1a6;}}var _1ad;if(_1aa.length){_1ab=_1aa.pop();var _1ae=doc.createElement(_1ab.tagName);if(_1ab.cssText&&_1ae.style){_1ae.style.cssText=_1ab.cssText;}if(_1ab.className){_1ae.className=_1ab.className;}if(_1ab.tagName==="FONT"){if(_1ab.color){_1ae.color=_1ab.color;}if(_1ab.face){_1ae.face=_1ab.face;}if(_1ab.size){_1ae.size=_1ab.size;}}_11a.place(_1ae,_1a4,"before");while(_1aa.length){_1ab=_1aa.pop();var _1af=doc.createElement(_1ab.tagName);if(_1ab.cssText&&_1af.style){_1af.style.cssText=_1ab.cssText;}if(_1ab.className){_1af.className=_1ab.className;}if(_1ab.tagName==="FONT"){if(_1ab.color){_1af.color=_1ab.color;}if(_1ab.face){_1af.face=_1ab.face;}if(_1ab.size){_1af.size=_1ab.size;}}_1ae.appendChild(_1af);_1ae=_1af;}_19e=doc.createTextNode(".");_19d.appendChild(_19e);_1ae.appendChild(_19e);_1ad=_127.create(this.window);_1ad.setStart(_19e,0);_1ad.setEnd(_19e,_19e.length);_199.removeAllRanges();_199.addRange(_1ad);this._sCall("collapse",[false]);_19e.parentNode.innerHTML="";}else{_19d=doc.createElement("span");_19d.className="ieFormatBreakerSpan";_19e=doc.createTextNode(".");_19d.appendChild(_19e);_11a.place(_19d,_1a4,"before");_1ad=_127.create(this.window);_1ad.setStart(_19e,0);_1ad.setEnd(_19e,_19e.length);_199.removeAllRanges();_199.addRange(_1ad);this._sCall("collapse",[false]);_19e.parentNode.innerHTML="";}if(!_1a4.firstChild){_11a.destroy(_1a4);}return true;}}return false;}else{_19a=_199.getRangeAt(0);rs=_19a.startContainer;if(rs&&rs.nodeType===3){var _1a1=_19a.startOffset;if(rs.length<_1a1){ret=this._adjustNodeAndOffset(rs,_1a1);rs=ret.node;_1a1=ret.offset;}txt=rs.nodeValue;_19b=doc.createTextNode(txt.substring(0,_1a1));var _1a8=txt.substring(_1a1);if(_1a8!==""){_19c=doc.createTextNode(txt.substring(_1a1));}_19d=doc.createElement("span");_19e=doc.createTextNode(".");_19d.appendChild(_19e);if(_19b.length){_11a.place(_19b,rs,"after");}else{_19b=rs;}_11a.place(_19d,_19b,"after");if(_19c){_11a.place(_19c,_19d,"after");}_11a.destroy(rs);var _1ad=_127.create(this.window);_1ad.setStart(_19e,0);_1ad.setEnd(_19e,_19e.length);_199.removeAllRanges();_199.addRange(_1ad);doc.execCommand(_198);_11a.place(_19d.firstChild,_19d,"before");_11a.destroy(_19d);_1ad.setStart(_19e,0);_1ad.setEnd(_19e,_19e.length);_199.removeAllRanges();_199.addRange(_1ad);this._sCall("collapse",[false]);_19e.parentNode.innerHTML="";return true;}}}else{return false;}},_adaptIEList:function(_1b0){var _1b1=_127.getSelection(this.window);if(_1b1.isCollapsed){if(_1b1.rangeCount&&!this.queryCommandValue(_1b0)){var _1b2=_1b1.getRangeAt(0);var sc=_1b2.startContainer;if(sc&&sc.nodeType==3){if(!_1b2.startOffset){var _1b3="ul";if(_1b0==="insertorderedlist"){_1b3="ol";}var list=this.document.createElement(_1b3);var li=_11a.create("li",null,list);_11a.place(list,sc,"before");li.appendChild(sc);_11a.create("br",null,list,"after");var _1b4=_127.create(this.window);_1b4.setStart(sc,0);_1b4.setEnd(sc,sc.length);_1b1.removeAllRanges();_1b1.addRange(_1b4);this._sCall("collapse",[true]);return true;}}}}return false;},_handleTextColorOrProperties:function(_1b5,_1b6){var _1b7=_127.getSelection(this.window);var doc=this.document;var rs,ret,_1b8,txt,_1b9,_1ba,_1bb,_1bc;_1b6=_1b6||null;if(_1b5&&_1b7&&_1b7.isCollapsed){if(_1b7.rangeCount){_1b8=_1b7.getRangeAt(0);rs=_1b8.startContainer;if(rs&&rs.nodeType===3){var _1bd=_1b8.startOffset;if(rs.length<_1bd){ret=this._adjustNodeAndOffset(rs,_1bd);rs=ret.node;_1bd=ret.offset;}txt=rs.nodeValue;_1b9=doc.createTextNode(txt.substring(0,_1bd));var _1be=txt.substring(_1bd);if(_1be!==""){_1ba=doc.createTextNode(txt.substring(_1bd));}_1bb=doc.createElement("span");_1bc=doc.createTextNode(".");_1bb.appendChild(_1bc);var _1bf=doc.createElement("span");_1bb.appendChild(_1bf);if(_1b9.length){_11a.place(_1b9,rs,"after");}else{_1b9=rs;}_11a.place(_1bb,_1b9,"after");if(_1ba){_11a.place(_1ba,_1bb,"after");}_11a.destroy(rs);var _1c0=_127.create(this.window);_1c0.setStart(_1bc,0);_1c0.setEnd(_1bc,_1bc.length);_1b7.removeAllRanges();_1b7.addRange(_1c0);if(has("webkit")){var _1c1="color";if(_1b5==="hilitecolor"||_1b5==="backcolor"){_1c1="backgroundColor";}_11c.set(_1bb,_1c1,_1b6);this._sCall("remove",[]);_11a.destroy(_1bf);_1bb.innerHTML="&#160;";this._sCall("selectElement",[_1bb]);this.focus();}else{this.execCommand(_1b5,_1b6);_11a.place(_1bb.firstChild,_1bb,"before");_11a.destroy(_1bb);_1c0.setStart(_1bc,0);_1c0.setEnd(_1bc,_1bc.length);_1b7.removeAllRanges();_1b7.addRange(_1c0);this._sCall("collapse",[false]);_1bc.parentNode.removeChild(_1bc);}return true;}}}return false;},_adjustNodeAndOffset:function(node,_1c2){while(node.length<_1c2&&node.nextSibling&&node.nextSibling.nodeType===3){_1c2=_1c2-node.length;node=node.nextSibling;}return {"node":node,"offset":_1c2};},_tagNamesForCommand:function(_1c3){if(_1c3==="bold"){return ["b","strong"];}else{if(_1c3==="italic"){return ["i","em"];}else{if(_1c3==="strikethrough"){return ["s","strike"];}else{if(_1c3==="superscript"){return ["sup"];}else{if(_1c3==="subscript"){return ["sub"];}else{if(_1c3==="underline"){return ["u"];}}}}}}return [];},_stripBreakerNodes:function(node){if(!this.isLoaded){return;}_11f(".ieFormatBreakerSpan",node).forEach(function(b){while(b.firstChild){_11a.place(b.firstChild,b,"before");}_11a.destroy(b);});return node;}});return _12b;});},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(_1c4){return function(_1c5,_1c6){switch(typeof _1c5){default:throw new Error("Can not query with a "+typeof _1c5);case "object":case "undefined":var _1c7=_1c5;_1c5=function(_1c8){for(var key in _1c7){var _1c9=_1c7[key];if(_1c9&&_1c9.test){if(!_1c9.test(_1c8[key],_1c8)){return false;}}else{if(_1c9!=_1c8[key]){return false;}}}return true;};break;case "string":if(!this[_1c5]){throw new Error("No filter function "+_1c5+" was found in store");}_1c5=this[_1c5];case "function":}function _1ca(_1cb){var _1cc=_1c4.filter(_1cb,_1c5);var _1cd=_1c6&&_1c6.sort;if(_1cd){_1cc.sort(typeof _1cd=="function"?_1cd:function(a,b){for(var sort,i=0;sort=_1cd[i];i++){var _1ce=a[sort.attribute];var _1cf=b[sort.attribute];if(_1ce!=_1cf){return !!sort.descending==(_1ce==null||_1ce>_1cf)?-1:1;}}return 0;});}if(_1c6&&(_1c6.start||_1c6.count)){var _1d0=_1cc.length;_1cc=_1cc.slice(_1c6.start||0,(_1c6.start||0)+(_1c6.count||Infinity));_1cc.total=_1d0;}return _1cc;};_1ca.matches=_1c5;return _1ca;};});},"dijit/_editor/html":function(){define("dijit/_editor/html",["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(_1d1,lang,has){var _1d2={};lang.setObject("dijit._editor.html",_1d2);var _1d3=_1d2.escapeXml=function(str,_1d4){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_1d4){str=str.replace(/'/gm,"&#39;");}return str;};_1d2.getNodeHtml=function(node){var _1d5=[];_1d2.getNodeHtmlHelper(node,_1d5);return _1d5.join("");};_1d2.getNodeHtmlHelper=function(node,_1d6){switch(node.nodeType){case 1:var _1d7=node.nodeName.toLowerCase();if(!_1d7||_1d7.charAt(0)=="/"){return "";}_1d6.push("<",_1d7);var _1d8=[],_1d9={};var attr;if(has("dom-attributes-explicit")||has("dom-attributes-specified-flag")){var i=0;while((attr=node.attributes[i++])){var n=attr.name;if(n.substr(0,3)!=="_dj"&&(!has("dom-attributes-specified-flag")||attr.specified)&&!(n in _1d9)){var v=attr.value;if(n=="src"||n=="href"){if(node.getAttribute("_djrealurl")){v=node.getAttribute("_djrealurl");}}if(has("ie")===8&&n==="style"){v=v.replace("HEIGHT:","height:").replace("WIDTH:","width:");}_1d8.push([n,v]);_1d9[n]=v;}}}else{var _1da=/^input$|^img$/i.test(node.nodeName)?node:node.cloneNode(false);var s=_1da.outerHTML;var _1db=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;var _1dc=s.match(_1db);s=s.substr(0,s.indexOf(">"));_1d1.forEach(_1dc,function(attr){if(attr){var idx=attr.indexOf("=");if(idx>0){var key=attr.substring(0,idx);if(key.substr(0,3)!="_dj"){if(key=="src"||key=="href"){if(node.getAttribute("_djrealurl")){_1d8.push([key,node.getAttribute("_djrealurl")]);return;}}var val,_1dd;switch(key){case "style":val=node.style.cssText.toLowerCase();break;case "class":val=node.className;break;case "width":if(_1d7==="img"){_1dd=/width=(\S+)/i.exec(s);if(_1dd){val=_1dd[1];}break;}case "height":if(_1d7==="img"){_1dd=/height=(\S+)/i.exec(s);if(_1dd){val=_1dd[1];}break;}default:val=node.getAttribute(key);}if(val!=null){_1d8.push([key,val.toString()]);}}}}},this);}_1d8.sort(function(a,b){return a[0]<b[0]?-1:(a[0]==b[0]?0:1);});var j=0;while((attr=_1d8[j++])){_1d6.push(" ",attr[0],"=\"",(typeof attr[1]==="string"?_1d3(attr[1],true):attr[1]),"\"");}switch(_1d7){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":_1d6.push(" />");break;case "script":_1d6.push(">",node.innerHTML,"</",_1d7,">");break;default:_1d6.push(">");if(node.hasChildNodes()){_1d2.getChildrenHtmlHelper(node,_1d6);}_1d6.push("</",_1d7,">");}break;case 4:case 3:_1d6.push(_1d3(node.nodeValue,true));break;case 8:_1d6.push("<!--",_1d3(node.nodeValue,true),"-->");break;default:_1d6.push("<!-- Element not recognized - Type: ",node.nodeType," Name: ",node.nodeName,"-->");}};_1d2.getChildrenHtml=function(node){var _1de=[];_1d2.getChildrenHtmlHelper(node,_1de);return _1de.join("");};_1d2.getChildrenHtmlHelper=function(dom,_1df){if(!dom){return;}var _1e0=dom["childNodes"]||dom;var _1e1=!has("ie")||_1e0!==dom;var node,i=0;while((node=_1e0[i++])){if(!_1e1||node.parentNode==dom){_1d2.getNodeHtmlHelper(node,_1df);}}};return _1d2;});},"dijit/form/DateTextBox":function(){define("dijit/form/DateTextBox",["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(_1e2,_1e3,_1e4){return _1e2("dijit.form.DateTextBox",_1e4,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:_1e3,_selector:"date",value:new Date("")});});},"dijit/_editor/plugins/TextColor":function(){define("dijit/_editor/plugins/TextColor",["require","dojo/colors","dojo/_base/declare","dojo/_base/lang","../_Plugin","../../form/DropDownButton"],function(_1e5,_1e6,_1e7,lang,_1e8,_1e9){var _1ea=_1e7("dijit._editor.plugins.TextColor",_1e8,{buttonClass:_1e9,useDefaultCommand:false,_initButton:function(){this.inherited(arguments);var self=this;this.button.loadDropDown=function(_1eb){_1e5(["../../ColorPalette"],lang.hitch(this,function(_1ec){this.dropDown=new _1ec({dir:self.editor.dir,ownerDocument:self.editor.ownerDocument,value:self.value,onChange:function(_1ed){self.editor.execCommand(self.command,_1ed);}});_1eb();}));};},updateState:function(){var _1ee=this.editor;var _1ef=this.command;if(!_1ee||!_1ee.isLoaded||!_1ef.length){return;}if(this.button){var _1f0=this.get("disabled");this.button.set("disabled",_1f0);if(_1f0){return;}var _1f1;try{_1f1=_1ee.queryCommandValue(_1ef)||"";}catch(e){_1f1="";}}if(_1f1==""){_1f1="#000000";}if(_1f1=="transparent"){_1f1="#ffffff";}if(typeof _1f1=="string"){if(_1f1.indexOf("rgb")>-1){_1f1=_1e6.fromRgb(_1f1).toHex();}}else{_1f1=((_1f1&255)<<16)|(_1f1&65280)|((_1f1&16711680)>>>16);_1f1=_1f1.toString(16);_1f1="#000000".slice(0,7-_1f1.length)+_1f1;}this.value=_1f1;var _1f2=this.button.dropDown;if(_1f2&&_1f1!==_1f2.get("value")){_1f2.set("value",_1f1,false);}}});_1e8.registry["foreColor"]=function(){return new _1ea({command:"foreColor"});};_1e8.registry["hiliteColor"]=function(){return new _1ea({command:"hiliteColor"});};return _1ea;});},"esri/layers/FeatureLayer":function(){define("esri/layers/FeatureLayer",["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/_base/Deferred","dojo/date/locale","dojo/sniff","dojo/io-query","dojo/dom-construct","dojo/i18n","esri/kernel","esri/lang","esri/request","esri/deferredUtils","esri/SpatialReference","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/symbols/jsonUtils","esri/renderers/SimpleRenderer","esri/renderers/UniqueValueRenderer","esri/renderers/jsonUtils","esri/tasks/QueryTask","esri/tasks/query","esri/tasks/FeatureSet","esri/geometry/Extent","esri/geometry/jsonUtils","esri/geometry/normalizeUtils","esri/layers/GraphicsLayer","esri/layers/Field","esri/layers/TimeInfo","esri/layers/FeatureType","esri/layers/FeatureTemplate","esri/layers/FeatureEditResult","esri/layers/SnapshotMode","esri/layers/OnDemandMode","esri/layers/SelectionMode","esri/layers/TrackManager","dojo/i18n!esri/nls/jsapi","dojo/has!extend-esri?esri/layers/agscommon"],function(_1f3,_1f4,lang,_1f5,_1f6,_1f7,_1f8,has,ioq,_1f9,i18n,_1fa,_1fb,_1fc,_1fd,_1fe,_1ff,_200,_201,_202,_203,_204,_205,_206,_207,_208,_209,_20a,_20b,_20c,_20d,_20e,_20f,_210,_211,_212,_213,_214,_215){var _216=_1f3(_20c,{declaredClass:"esri.layers.FeatureLayer",invalidParams:"query contains one or more unsupported parameters",constructor:function(url,_217){this.i18n=i18n.getLocalization("esri","jsapi");this._outFields=_217&&_217.outFields;this._loadCallback=_217&&_217.loadCallback;var _218=_217&&_217._usePatch;this._usePatch=(_218===null||_218===undefined)?true:_218;this._trackIdField=_217&&_217.trackIdField;this.objectIdField=_217&&_217.objectIdField;this._maxOffset=_217&&_217.maxAllowableOffset;this._optEditable=_217&&_217.editable;this._optAutoGen=_217&&_217.autoGeneralize;this.editSummaryCallback=_217&&_217.editSummaryCallback;this.userId=_217&&_217.userId;this.userIsAdmin=_217&&_217.userIsAdmin;this.useMapTime=(_217&&_217.hasOwnProperty("useMapTime"))?(!!_217.useMapTime):true;this.source=_217&&_217.source;this.gdbVersion=_217&&_217.gdbVersion;this._selectedFeatures={};this._selectedFeaturesArr=[];this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();var ctor=this.constructor,mode=this.mode=(_1fb.isDefined(_217&&_217.mode)?_217.mode:ctor.MODE_ONDEMAND);switch(mode){case ctor.MODE_SNAPSHOT:this._mode=new _212(this);this._isSnapshot=true;break;case ctor.MODE_ONDEMAND:this._tileWidth=(_217&&_217.tileWidth)||512;this._tileHeight=(_217&&_217.tileHeight)||512;this._mode=new _213(this);var _219=_217&&_217.latticeTiling;this.latticeTiling=_219;break;case ctor.MODE_SELECTION:this._mode=new _214(this);this._isSelOnly=true;break;}this._initLayer=lang.hitch(this,this._initLayer);this._selectHandler=lang.hitch(this,this._selectHandler);this._editable=false;if(lang.isObject(url)&&url.layerDefinition){var json=url;this._collection=true;this.mode=ctor.MODE_SNAPSHOT;this._initLayer(json);return this;}this._task=new _206(this.url,{source:this.source,gdbVersion:this.gdbVersion});var _21a=this._url.path;this._fserver=false;if(_21a.search(/\/FeatureServer\//i)!==-1){this._fserver=true;}var _21b=_217&&_217.resourceInfo;if(_21b){this._initLayer(_21b);}else{if(this.source){var _21c={source:this.source.toJson()};this._url.query=lang.mixin(this._url.query,{layer:_1f6.toJson(_21c)});}if(this.gdbVersion){this._url.query=lang.mixin(this._url.query,{gdbVersion:this.gdbVersion});}_1fc({url:_21a,content:lang.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});}},_initLayer:function(_21d,io){if(_21d||io){this._json=_21d;this._findCredential();var ssl=(this.credential&&this.credential.ssl)||(_21d&&_21d._ssl);if(ssl){this._useSSL();this._task._useSSL();}if(this._collection){this._mode=new _212(this);this._isSnapshot=true;this._featureSet=_21d.featureSet;this._nextId=_21d.nextObjectId;_21d=_21d.layerDefinition;}if(_21d.hasOwnProperty("capabilities")){var _21e=(this.capabilities=_21d.capabilities);if(_21e&&_21e.toLowerCase().indexOf("editing")!==-1){this._editable=true;}else{this._editable=false;}}else{if(!this._collection){this._editable=this._fserver;}}if(_1fb.isDefined(this._optEditable)){this._editable=this._optEditable;delete this._optEditable;}this._json=_1f6.toJson(this._json);if(this.isEditable()){delete this._maxOffset;}else{if(this.mode!==this.constructor.MODE_SNAPSHOT&&((_21d.geometryType==="esriGeometryPolyline")||(_21d.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=_1fb.isDefined(this._optAutoGen)?this._optAutoGen:(this.mode===this.constructor.MODE_ONDEMAND);delete this._optAutoGen;}}var _21f=_21d.effectiveMinScale||_21d.minScale,_220=_21d.effectiveMaxScale||_21d.maxScale;if(!this._hasMin&&_21f){this.setMinScale(_21f);}if(!this._hasMax&&_220){this.setMaxScale(_220);}this.layerId=_21d.id;this.name=_21d.name;this.description=_21d.description;this.copyright=_21d.copyrightText;this.type=_21d.type;this.geometryType=_21d.geometryType;this.displayField=_21d.displayField;this.defaultDefinitionExpression=_21d.definitionExpression;this.fullExtent=new _209(_21d.extent);this.initialExtent=new _209(this.fullExtent.toJson());if(this.fullExtent.spatialReference){this.spatialReference=new _1fe(this.fullExtent.spatialReference.toJson());}this.defaultVisibility=_21d.defaultVisibility;if((this.geometryType==="esriGeometryPoint")||(this.geometryType==="esriGeometryMultipoint")){this.latticeTiling=false;}this.indexedFields=_21d.indexedFields;this.maxRecordCount=_21d.maxRecordCount;this.canModifyLayer=_21d.canModifyLayer;this.supportsStatistics=_21d.supportsStatistics;this.supportsAdvancedQueries=_21d.supportsAdvancedQueries;this.hasLabels=_21d.hasLabels;this.canScaleSymbols=_21d.canScaleSymbols;this.supportsRollbackOnFailure=_21d.supportsRollbackOnFailure;this.syncCanReturnChanges=_21d.syncCanReturnChanges;this.isDataVersioned=_21d.isDataVersioned;this.editFieldsInfo=_21d.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=_21d.ownershipBasedAccessControlForFeatures;if(this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures){this.creatorField=this.editFieldsInfo.creatorField;}this.relationships=_21d.relationships;this.allowGeometryUpdates=_1fb.isDefined(_21d.allowGeometryUpdates)?_21d.allowGeometryUpdates:true;this._isTable=(this.type==="Table");var _221=(this.fields=[]),_222=_21d.fields,i;for(i=0;i<_222.length;i++){_221.push(new _20d(_222[i]));}if(!this.objectIdField){this.objectIdField=_21d.objectIdField;if(!this.objectIdField){_222=_21d.fields;for(i=0;i<_222.length;i++){var _223=_222[i];if(_223.type==="esriFieldTypeOID"){this.objectIdField=_223.name;break;}}}if(!this.objectIdField){console.debug("esri.layers.FeatureLayer: "+_1fb.substitute({url:this.url},"objectIdField is not set [url: ${url}]"));}}if(!_1fb.isDefined(this._nextId)){var _224=this.objectIdField,_225=-1;if(this._collection&&_224){var fset=this._featureSet,_226=fset&&fset.features,il=_226?_226.length:0,oid,attr;for(i=0;i<il;i++){attr=_226[i].attributes;oid=attr&&attr[_224];if(oid>_225){_225=oid;}}}this._nextId=(_225+1);}this.globalIdField=_21d.globalIdField;var _227=(this.typeIdField=_21d.typeIdField),_228;if(_227){_228=!this._getField(_227)&&this._getField(_227,true);if(_228){this.typeIdField=_228.name;}}this.visibilityField=_21d.visibilityField;var _229=_21d.defaultSymbol;if(_229){this.defaultSymbol=_202.fromJson(_229);}var _22a=this.types=[],_22b=_21d.types,_22c,_22d,_22e,_22f=this.editFieldsInfo,_230=_22f&&_22f.creatorField,_231=_22f&&_22f.editorField,fix=(_230||_231),_232=[];if(_22b){for(i=0;i<_22b.length;i++){_22c=new _20f(_22b[i]);_22d=_22c.templates;if(fix&&_22d&&_22d.length){_232=_232.concat(_22d);}_22a.push(_22c);}}var _233=_21d.templates,_234,_235=this.templates=[];if(_233){for(i=0;i<_233.length;i++){_234=new _210(_233[i]);if(fix){_232.push(_234);}_235.push(_234);}}for(i=0;i<_232.length;i++){_22e=lang.getObject("prototype.attributes",false,_232[i]);if(_22e){if(_230){delete _22e[_230];}if(_231){delete _22e[_231];}}}var _236=_21d.timeInfo;if(_236){this.timeInfo=new _20e(_236);this._startTimeField=_236.startTimeField;this._endTimeField=_236.endTimeField;if(this._startTimeField&&this._endTimeField){this._twoTimeFields=true;}if(this._trackIdField){_236.trackIdField=this._trackIdField;}else{this._trackIdField=_236.trackIdField;}}this.hasAttachments=(!this._collection&&_21d.hasAttachments)?true:false;this.htmlPopupType=_21d.htmlPopupType;var _237=_21d.drawingInfo,_238;if(!this.renderer){if(_237&&_237.renderer){_238=_237.renderer;this.setRenderer(_205.fromJson(_238));if(_238.type==="classBreaks"){this.renderer.setMaxInclusive(true);}if(!this._collection){var _239=_238.type,_23a=[];_238=this.renderer;switch(_239){case "simple":_23a.push(_238.symbol);break;case "uniqueValue":case "classBreaks":_23a.push(_238.defaultSymbol);_23a=_23a.concat(_1f5.map(_238.infos,function(info){return info.symbol;}));break;}_23a=_1f5.filter(_23a,_1fb.isDefined);var _23b=this._url.path+"/images/",_23c=this._getToken();_1f5.forEach(_23a,function(sym){var url=sym.url;if(url){if((url.search(/https?\:/)===-1)&&(url.indexOf("data:")===-1)){sym.url=_23b+url;}if(_23c&&sym.url.search(/https?\:/)!==-1){sym.url+=("?token="+_23c);}}});}}else{if(_229){_22b=this.types;if(_22b.length>0){_238=new _204(this.defaultSymbol,this.typeIdField);_1f5.forEach(_22b,function(type){_238.addValue(type.id,type.symbol);});}else{_238=new _203(this.defaultSymbol);}this.setRenderer(_238);}else{if(!this._isTable){var _23d;switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":_23d=new _1ff();break;case "esriGeometryPolyline":_23d=new _200();break;case "esriGeometryPolygon":_23d=new _201();break;}this.setRenderer(_23d?new _203(_23d):null);}}}}var _23e=(_237&&_237.transparency)||0;if(!_1fb.isDefined(this.opacity)&&_23e>0){this.opacity=1-(_23e/100);}this.version=_21d.currentVersion;if(!this.version){var ver;if("capabilities" in _21d||"drawingInfo" in _21d||"hasAttachments" in _21d||"htmlPopupType" in _21d||"relationships" in _21d||"timeInfo" in _21d||"typeIdField" in _21d||"types" in _21d){ver=10;}else{ver=9.3;}this.version=ver;}if((has("ie")||has("safari"))&&this.isEditable()&&this.version<10.02){this._ts=true;}this.loaded=true;this._fixRendererFields();this._checkFields();this._updateCaps();var _23f=function(){this.onLoad(this);var _240=this._loadCallback;if(_240){delete this._loadCallback;_240(this);}};if(this._collection){this._fireUpdateStart();var _241=this._featureSet;delete this._featureSet;this._mode._drawFeatures(new _208(_241));this._fcAdded=true;_23f.call(this);}else{this._forceIdentity(_23f);}}},setRenderer:function(ren){this.inherited("setRenderer",arguments);var _242=this.renderer;if(_242){this._ager=(_242.declaredClass.indexOf("TemporalRenderer")!==-1&&_242.observationAger&&_242.observationRenderer);var _243=_1f5.filter([_242,_242.observationRenderer,_242.latestObservationRenderer,_242.trackRenderer],_1fb.isDefined);var _244=[];_1f5.forEach(_243,function(rnd){if(!lang.isFunction(rnd.attributeField)){_244.push(rnd.attributeField);}_244.push(rnd.attributeField2);_244.push(rnd.attributeField3);},this);this._rendererFields=_1f5.filter(_244,_1fb.isDefined);}else{this._ager=false;this._rendererFields=[];}if(this.loaded&&this._rendererFields.length>0){this._fixRendererFields();this._checkFields(this._rendererFields);}if(this.loaded&&this._collection){this._typesDirty=true;}},_setMap:function(map){var div=this.inherited(arguments),mode=this._mode;if(mode){mode.initialize(map);}return div;},_unsetMap:function(map){var mode=this._mode;if(mode){mode.suspend();}if(this._trackManager){this._trackManager.destroy();this._trackManager=null;}_1f4.disconnect(this._zoomConnect);this._zoomConnect=null;this._toggleTime(false);this.inherited("_unsetMap",arguments);},refresh:function(){var mode=this._mode;if(mode){mode.refresh();}},setEditable:function(_245){if(!this._collection){console.log("FeatureLayer:setEditable - this functionality is not yet supported for layer in a feature service");return this;}if(!this.loaded){this._optEditable=_245;return this;}var _246=this._editable;this._editable=_245;this._updateCaps();if(_246!==_245){this.onCapabilitiesChange();}return this;},getEditCapabilities:function(_247){var _248={"canCreate":false,"canUpdate":false,"canDelete":false};if(!this.loaded||!this.isEditable()){return _248;}var _249=_247&&_247.feature,_24a=_247&&_247.userId,caps=_1f5.map((this.capabilities?this.capabilities.toLowerCase().split(","):[]),lang.trim),_24b=_1f5.indexOf(caps,"editing")>-1,_24c=_24b&&(_1f5.indexOf(caps,"create")>-1),_24d=_24b&&(_1f5.indexOf(caps,"update")>-1),_24e=_24b&&(_1f5.indexOf(caps,"delete")>-1),_24f=this.ownershipBasedAccessControlForFeatures,_250=this.editFieldsInfo,_251=_250&&_250.creatorField,_252=_250&&_250.realm,_253=_249&&_249.attributes,_254=(_253&&_251)?_253[_251]:undefined,_255,_256=!!this.userIsAdmin,_257=!_24f||_256||!!(_24f.allowOthersToUpdate||_24f.allowUpdateToOthers),_258=!_24f||_256||!!(_24f.allowOthersToDelete||_24f.allowDeleteToOthers);if(_256||(_24b&&!(_24c||_24d||_24e))){_24c=_24d=_24e=true;}_255={"canCreate":_24c,"canUpdate":_24d,"canDelete":_24e};if(_254===null){_255.canUpdate=_24d&&_257;_255.canDelete=_24e&&_258;}else{if(_254===""){return _255;}else{if(_254){_24a=_24a||this.getUserId();if(_24a&&_252){_24a=_24a+"@"+_252;}if(_24a.toLowerCase()===_254.toLowerCase()){return _255;}else{_255.canUpdate=_24d&&_257;_255.canDelete=_24e&&_258;}}}}return _255;},getUserId:function(){var _259;if(this.loaded){_259=(this.credential&&this.credential.userId)||this.userId||"";}return _259;},setUserIsAdmin:function(_25a){this.userIsAdmin=_25a;},setEditSummaryCallback:function(_25b){this.editSummaryCallback=_25b;},getEditSummary:function(_25c,_25d,_25e){_25e=_1fb.isDefined(_25e)?_25e:(new Date()).getTime();var _25f="",info=this.getEditInfo(_25c,_25d,_25e),_260=(_25d&&_25d.callback)||this.editSummaryCallback;if(_260){info=_260(_25c,info)||"";}if(lang.isString(info)){_25f=info;}else{if(info){var _261=info.action,_262=info.userId,_263=info.timeValue,_264=0;if(_261){_264++;}if(_262){_264++;}if(_1fb.isDefined(_263)){_264++;}if(_264>1){_25f=(_261==="edit"?"edit":"create")+(_262?"User":"")+(_1fb.isDefined(_263)?info.displayPattern:"");}}_25f=_25f&&_1fb.substitute(info,this.i18n.layers.FeatureLayer[_25f]);}return _25f;},getEditInfo:function(_265,_266,_267){if(!this.loaded){return;}_267=_1fb.isDefined(_267)?_267:(new Date()).getTime();var _268=(_266&&_266.action)||"last",_269=this.editFieldsInfo,_26a=_269&&_269.creatorField,_26b=_269&&_269.creationDateField,_26c=_269&&_269.editorField,_26d=_269&&_269.editDateField,_26e=_269&&_269.realm,_26f=_265&&_265.attributes,_270=(_26f&&_26a)?_26f[_26a]:undefined,_271=(_26f&&_26b)?_26f[_26b]:null,_272=(_26f&&_26c)?_26f[_26c]:undefined,_273=(_26f&&_26d)?_26f[_26d]:null,_274=this._getEditData(_270,_271,_267),_275=this._getEditData(_272,_273,_267),_276;switch(_268){case "creation":_276=_274;break;case "edit":_276=_275;break;case "last":_276=_275||_274;break;}if(_276){_276.action=(_276===_275)?"edit":"creation";}return _276;},_getEditData:function(_277,_278,_279){var data,_27a,_27b,_27c=60000,_27d=3600000,_27e=2*_27d,_27f=24*_27d,_280=7*_27f;if(_1fb.isDefined(_278)){_27a=_279-_278;if(_27a<0){_27b="Full";}else{if(_27a<_27c){_27b="Seconds";}else{if(_27a<(2*_27c)){_27b="Minute";}else{if(_27a<_27d){_27b="Minutes";}else{if(_27a<_27e){_27b="Hour";}else{if(_27a<_27f){_27b="Hours";}else{if(_27a<_280){_27b="WeekDay";}else{_27b="Full";}}}}}}}}if((_277!==undefined)||_27b){data=data||{};data.userId=_277;if(_27b){var _281=_1f8.format,_282=new Date(_278);data.minutes=Math.floor(_27a/_27c);data.hours=Math.floor(_27a/_27d);data.weekDay=_281(_282,{datePattern:"EEEE",selector:"date"});data.formattedDate=_281(_282,{selector:"date"});data.formattedTime=_281(_282,{selector:"time"});data.displayPattern=_27b;data.timeValue=_278;}}return data;},isEditable:function(){return !!(this._editable||this.userIsAdmin);},setMaxAllowableOffset:function(_283){if(!this.isEditable()){this._maxOffset=_283;}return this;},getMaxAllowableOffset:function(){return this._maxOffset;},setAutoGeneralize:function(_284){if(!this.loaded){this._optAutoGen=_284;}else{if(!this.isEditable()&&(this.mode!==this.constructor.MODE_SNAPSHOT)&&((this.geometryType==="esriGeometryPolyline")||(this.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=_284;if(_284){var map=this._map;if(map&&map.loaded){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}}else{delete this._maxOffset;}}}return this;},setGDBVersion:function(_285){if(!this._collection&&(_285!==this.gdbVersion)&&(_285||this.gdbVersion)){this.gdbVersion=_285;this._task.gdbVersion=_285;this._url.query=lang.mixin(this._url.query,{gdbVersion:_285});if(this.loaded){this.clearSelection();if(this._map){this.refresh();}}this.onGDBVersionChange();}return this;},setDefinitionExpression:function(expr){this._defnExpr=expr;var mode=this._mode;if(mode){mode.propertyChangeHandler(1);}return this;},getDefinitionExpression:function(){return this._defnExpr;},setTimeDefinition:function(_286){if(this._isSnapshot){this._timeDefn=_286;var mode=this._mode;if(mode){mode.propertyChangeHandler(2);}}else{console.log("FeatureLayer.setTimeDefinition: layer in on-demand or selection mode does not support time definitions. Layer id = "+this.id+", Layer URL = "+this.url);}return this;},getTimeDefinition:function(){return this._timeDefn;},setTimeOffset:function(_287,_288){this._timeOffset=_287;this._timeOffsetUnits=_288;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}return this;},setUseMapTime:function(use){this.useMapTime=use;this._toggleTime(!this.suspended);var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},selectFeatures:function(_289,_28a,_28b,_28c){_28a=_28a||this.constructor.SELECTION_NEW;var _28d=this._getShallowClone(_289),map=this._map,_28e,dfd=_1fd._fixDfd(new _1f7(_1fd._dfdCanceller));_28d.outFields=this._getOutFields();_28d.returnGeometry=true;if(map){_28d.outSpatialReference=new _1fe(map.spatialReference.toJson());}if(!this._applyQueryFilters(_28d)){_28e={features:[]};this._selectHandler(_28e,_28a,_28b,_28c,dfd);return dfd;}var _28f=this._canDoClientSideQuery(_28d);if(_28f){_28e={features:this._doQuery(_28d,_28f)};this._selectHandler(_28e,_28a,_28b,_28c,dfd);return dfd;}else{if(this._collection){var err=new Error("FeatureLayer::selectFeatures - "+this.invalidParams);this._resolve([err],null,_28c,dfd,true);return dfd;}var self=this;if(this._ts){_28d._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task.execute(_28d);temp.addCallbacks(function(_290){self._selectHandler(_290,_28a,_28b,_28c,dfd);},function(err){self._resolve([err],null,_28c,dfd,true);});return dfd;}},getSelectedFeatures:function(){var _291=this._selectedFeatures,_292=[],item;for(item in _291){if(_291.hasOwnProperty(item)){_292.push(_291[item]);}}return _292;},clearSelection:function(_293){var _294=this._selectedFeatures,mode=this._mode,item;for(item in _294){if(_294.hasOwnProperty(item)){this._unSelectFeatureIIf(item,mode);mode._removeFeatureIIf(item);}}this._selectedFeatures={};if(this._isSelOnly){mode._applyTimeFilter(true);}if(!_293){this.onSelectionClear();}return this;},setSelectionSymbol:function(_295){this._selectionSymbol=_295;if(_295){var _296=this._selectedFeatures,item;for(item in _296){if(_296.hasOwnProperty(item)){_296[item].setSymbol(_295);}}}return this;},getSelectionSymbol:function(){return this._selectionSymbol;},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(adds,_297,_298,_299,_29a,_29b){var _29c=_29b.assembly,dfd=_29b.dfd;this._applyNormalized(adds,_29c&&_29c[0]);this._applyNormalized(_297,_29c&&_29c[1]);this.onBeforeApplyEdits(adds,_297,_298);var i,_29d={},_29e=this.objectIdField,_29f={f:"json"},_2a0=false;if(this._collection){var _2a1={};_2a1.addResults=adds?_1f5.map(adds,function(){_2a0=true;return {objectId:this._nextId++,success:true};},this):null;_2a1.updateResults=_297?_1f5.map(_297,function(_2a2){_2a0=true;var oid=_2a2.attributes[_29e];_29d[oid]=_2a2;return {objectId:oid,success:true};},this):null;_2a1.deleteResults=_298?_1f5.map(_298,function(_2a3){_2a0=true;return {objectId:_2a3.attributes[_29e],success:true};},this):null;if(_2a0){this._editHandler(_2a1,adds,_29d,_299,_29a,dfd);}return;}if(adds&&adds.length>0){_29f.adds=this._convertFeaturesToJson(adds,0,1);_2a0=true;}if(_297&&_297.length>0){for(i=0;i<_297.length;i++){var _2a4=_297[i];_29d[_2a4.attributes[_29e]]=_2a4;}_29f.updates=this._convertFeaturesToJson(_297,0,0,1);_2a0=true;}if(_298&&_298.length>0){var ids=[];for(i=0;i<_298.length;i++){ids.push(_298[i].attributes[_29e]);}_29f.deletes=ids.join(",");_2a0=true;}if(_2a0){var self=this;return _1fc({url:this._url.path+"/applyEdits",content:lang.mixin(_29f,this._url.query),callbackParamName:"callback",load:function(_2a5){self._editHandler(_2a5,adds,_29d,_299,_29a,dfd);},error:function(err){self._resolve([err],null,_29a,dfd,true);}},{usePost:true});}},queryFeatures:function(_2a6,_2a7,_2a8){return this._query("execute","onQueryFeaturesComplete",_2a6,_2a7,_2a8);},queryRelatedFeatures:function(_2a9,_2aa,_2ab){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",_2a9,_2aa,_2ab);},queryIds:function(_2ac,_2ad,_2ae){return this._query("executeForIds","onQueryIdsComplete",_2ac,_2ad,_2ae);},queryCount:function(_2af,_2b0,_2b1){return this._query("executeForCount","onQueryCountComplete",_2af,_2b0,_2b1);},queryAttachmentInfos:function(_2b2,_2b3,_2b4){var url=this._url.path+"/"+_2b2+"/attachments",dfd=new _1f7(_1fd._dfdCanceller),self=this;dfd._pendingDfd=_1fc({url:url,content:lang.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(_2b5){var _2b6=_2b5.attachmentInfos,_2b7;_1f5.forEach(_2b6,function(info){_2b7=ioq.objectToQuery({gdbVersion:self._url.query&&self._url.query.gdbVersion,layer:self._url.query&&self._url.query.layer,token:self._getToken()});info.url=url+"/"+info.id+(_2b7?("?"+_2b7):"");info.objectId=_2b2;});self._resolve([_2b6],"onQueryAttachmentInfosComplete",_2b3,dfd);},error:function(err){self._resolve([err],null,_2b4,dfd,true);}});return dfd;},addAttachment:function(_2b8,_2b9,_2ba,_2bb){return this._sendAttachment("add",_2b8,_2b9,_2ba,_2bb);},updateAttachment:function(_2bc,_2bd,_2be,_2bf,_2c0){_2be.appendChild(_1f9.create("input",{type:"hidden",name:"attachmentId",value:_2bd}));return this._sendAttachment("update",_2bc,_2be,_2bf,_2c0);},deleteAttachments:function(_2c1,_2c2,_2c3,_2c4){var url=this._url.path+"/"+_2c1+"/deleteAttachments",dfd=new _1f7(_1fd._dfdCanceller),self=this,_2c5={f:"json",attachmentIds:_2c2.join(",")};dfd._pendingDfd=_1fc({url:url,content:lang.mixin(_2c5,this._url.query),callbackParamName:"callback",load:lang.hitch(this,function(_2c6){var _2c7=_2c6.deleteAttachmentResults;_2c7=_1f5.map(_2c7,function(_2c8){var res=new _211(_2c8);res.attachmentId=res.objectId;res.objectId=_2c1;return res;});self._resolve([_2c7],"onDeleteAttachmentsComplete",_2c3,dfd);}),error:function(err){self._resolve([err],null,_2c4,dfd,true);}},{usePost:true});return dfd;},addType:function(_2c9){var _2ca=this.types;if(_2ca){var _2cb=_1f5.some(_2ca,function(type){if(type.id==_2c9.id){return true;}return false;});if(_2cb){return false;}else{_2ca.push(_2c9);}}else{this.types=[_2c9];}this._typesDirty=true;return true;},deleteType:function(_2cc){if(!this._collection){return;}var _2cd=this.types;if(_2cd){var _2ce=-1;_1f5.some(_2cd,function(type,_2cf){if(type.id==_2cc){_2ce=_2cf;return true;}return false;});if(_2ce>-1){this._typesDirty=true;return _2cd.splice(_2ce,1)[0];}}},toJson:function(){var _2d0=this._json,json=lang.isString(_2d0)?_1f6.fromJson(_2d0):lang.clone(_2d0);if(!json){return;}json=json.layerDefinition?json:{layerDefinition:json};var _2d1=json.layerDefinition,_2d2=this._collection;if(_2d2&&this._typesDirty){_2d1.types=_1f5.map(this.types||[],function(type){return type.toJson();});var _2d3=this.renderer,_2d4=_2d1.drawingInfo;if(_2d4&&_2d3&&_2d3.declaredClass.indexOf("TemporalRenderer")===-1){_2d4.renderer=_2d3.toJson();}}var _2d5=null;if(!(_2d2&&!this._fcAdded)){_2d5={geometryType:_2d1.geometryType,features:this._convertFeaturesToJson(this.graphics,true)};}json.featureSet=lang.mixin({},json.featureSet||{},_2d5);if(_2d2){json.nextObjectId=this._nextId;_2d1.capabilities=this.capabilities;}return json;},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},_forceIdentity:function(_2d6){var self=this,path=this._url&&this._url.path;if((this.ownershipBasedAccessControlForFeatures||this.userIsAdmin)&&!this._getToken()&&path&&_1fa.id&&_1fa.id._hasPortalSession()&&_1fa.id._doPortalSignIn(path)){_1fa.id.getCredential(path).then(function(){self._findCredential();_2d6.call(self);},function(){_2d6.call(self);});}else{_2d6.call(this);}},_updateCaps:function(){var _2d7=this._editable,_2d8=lang.trim(this.capabilities||""),_2d9=_1f5.map((_2d8?_2d8.split(","):[]),lang.trim),caps=_1f5.map((_2d8?_2d8.toLowerCase().split(","):[]),lang.trim),_2da=_1f5.indexOf(caps,"editing"),cap,i,_2db,_2dc={"Create":_1f5.indexOf(caps,"create"),"Update":_1f5.indexOf(caps,"update"),"Delete":_1f5.indexOf(caps,"delete")};if(_2d7&&_2da===-1){_2d9.push("Editing");}else{if(!_2d7&&_2da>-1){_2db=[_2da];for(cap in _2dc){if(_2dc[cap]>-1){_2db.push(_2dc[cap]);}}_2db.sort();for(i=_2db.length-1;i>=0;i--){_2d9.splice(_2db[i],1);}}}this.capabilities=_2d9.join(",");},_counter:{value:0},_getUniqueId:function(){return this._counter.value++;},onSuspend:function(){this.inherited(arguments);this._toggleTime(false);var mode=this._mode;if(mode){mode.suspend();}},onResume:function(evt){this.inherited(arguments);this._toggleTime(true);this._updateMaxOffset();var mode=this._mode,map=this._map,_2dd=this.renderer;if(evt.firstOccurrence){this.clearSelection();if(this.timeInfo){if(this._trackIdField||(_2dd&&(_2dd.latestObservationRenderer||_2dd.trackRenderer))){this._trackManager=new _215(this);this._trackManager.initialize(map);}}this._zoomConnect=_1f4.connect(map,"onZoomEnd",this,this._updateMaxOffset);}if(mode){evt.firstOccurrence?mode.startup():mode.resume();}},_updateMaxOffset:function(){var map=this._map;if(map&&map.loaded){if(this._autoGeneralize){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}}},_toggleTime:function(_2de){var map=this._map;if(_2de&&this.timeInfo&&this.useMapTime&&map){this._mapTimeExtent=map.timeExtent;if(!this._timeConnect){this._timeConnect=_1f4.connect(map,"onTimeExtentChange",this,this._timeChangeHandler);}}else{this._mapTimeExtent=null;_1f4.disconnect(this._timeConnect);this._timeConnect=null;}},_timeChangeHandler:function(_2df){this._mapTimeExtent=_2df;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},_getOffsettedTE:function(_2e0){var _2e1=this._timeOffset,_2e2=this._timeOffsetUnits;return (_2e0&&_2e1&&_2e2)?_2e0.offset(-1*_2e1,_2e2):_2e0;},_getTimeOverlap:function(_2e3,_2e4){if(_2e3&&_2e4){return _2e3.intersection(_2e4);}else{return _2e3||_2e4;}},_getTimeFilter:function(_2e5){var _2e6=this.getTimeDefinition(),_2e7=null,_2e8;if(_2e6||_2e7){_2e8=this._getTimeOverlap(_2e6,_2e7);if(!_2e8){return [false];}}if(_2e5){_2e5=_2e8?this._getTimeOverlap(_2e5,_2e8):_2e5;if(!_2e5){return [false];}}else{_2e5=_2e8;}return [true,_2e5];},_getAttributeFilter:function(_2e9){var _2ea=this.getDefinitionExpression();if(_2e9){_2e9=_2ea?"("+_2ea+") AND ("+_2e9+")":_2e9;}else{_2e9=_2ea;}return _2e9;},_applyQueryFilters:function(_2eb){_2eb.where=this._getAttributeFilter(_2eb.where);_2eb.maxAllowableOffset=this._maxOffset;if(this.timeInfo){var _2ec=this._getTimeFilter(_2eb.timeExtent);if(!_2ec[0]){return false;}else{_2eb.timeExtent=_2ec[1];}}return true;},_add:function(_2ed){var _2ee=this._selectionSymbol,attr=_2ed.attributes,_2ef=this.visibilityField;if(_2ee&&this._isSelOnly){_2ed.setSymbol(_2ee);}if(_2ef&&attr&&attr.hasOwnProperty(_2ef)){_2ed[attr[_2ef]?"show":"hide"]();}return this.add.apply(this,arguments);},_remove:function(){return this.remove.apply(this,arguments);},_canDoClientSideQuery:function(_2f0){var _2f1=[],map=this._map;if(this._isTable||!map){return;}if(_2f0.text||(_2f0.where&&_2f0.where!==this.getDefinitionExpression())){return;}var _2f2=this._isSnapshot,_2f3=this._isSelOnly;var _2f4=_2f0.geometry;if(_2f4){if(!_2f3&&_2f0.spatialRelationship===_207.SPATIAL_REL_INTERSECTS&&(_2f4.type==="extent"&&(_2f2||map.extent.contains(_2f4)))){_2f1.push(1);}else{return;}}var ids=_2f0.objectIds;if(ids){if(_2f2){_2f1.push(2);}else{var len=ids.length,mode=this._mode,_2f5=0,i;for(i=0;i<len;i++){if(mode._getFeature(ids[i])){_2f5++;}}if(_2f5===len){_2f1.push(2);}else{return;}}}if(this.timeInfo){var _2f6=_2f0.timeExtent,_2f7=this._mapTimeExtent;if(_2f2){if(_2f6){_2f1.push(3);}}else{if(_2f3){if(_2f6){return;}}else{if(_2f7){if(_1f5.indexOf(_2f1,2)!==-1){if(_2f6){_2f1.push(3);}}else{return;}}else{if(_2f1.length>0){if(_2f6){_2f1.push(3);}}else{if(_2f6){return;}}}}}}return _2f1.length>0?_2f1:null;},_doQuery:function(_2f8,_2f9,_2fa){var _2fb=[],mode=this._mode,_2fc=this.objectIdField,i,len,_2fd;if(_1f5.indexOf(_2f9,2)!==-1){_2fb=[];var ids=_2f8.objectIds;len=ids.length;for(i=0;i<len;i++){var obj=mode._getFeature(ids[i]);if(obj){_2fb.push(obj);}}if(_2fb.length===0){return [];}}if(_1f5.indexOf(_2f9,1)!==-1){_2fd=_2fb.length>0?_2fb:this.graphics;len=_2fd.length;var _2fe=_2f8.geometry._normalize(null,true);_2fb=[];for(i=0;i<len;i++){var _2ff=_2fd[i],_300=_2ff.geometry;if(_300){if(this.normalization&&_2fe.length){if(_2fe[0].intersects(_300)||_2fe[1].intersects(_300)){_2fb.push(_2ff);}}else{if(_2fe.intersects(_300)){_2fb.push(_2ff);}}}}if(_2fb.length===0){return [];}}if(_1f5.indexOf(_2f9,3)!==-1){if(this.timeInfo){_2fd=_2fb.length>0?_2fb:this.graphics;var time=_2f8.timeExtent,_301=this._filterByTime(_2fd,time.startTime,time.endTime);_2fb=_301.match;}}if(_2fa){return _1f5.map(_2fb,function(obj){return obj.attributes[_2fc];},this);}else{return _2fb;}},_filterByTime:function(_302,_303,_304){var _305=this._startTimeField,_306=this._endTimeField,_307;if(!this._twoTimeFields){_307=_305||_306;}var _308=_1fb.isDefined,yea=[],nay=[],i,len=_302.length,_309,_30a;_303=_303?_303.getTime():-Infinity;_304=_304?_304.getTime():Infinity;if(_307){for(i=0;i<len;i++){_309=_302[i];_30a=_309.attributes;var time=_30a[_307];if(time>=_303&&time<=_304){yea.push(_309);}else{nay.push(_309);}}}else{for(i=0;i<len;i++){_309=_302[i];_30a=_309.attributes;var _30b=_30a[_305],end=_30a[_306];_30b=_308(_30b)?_30b:-Infinity;end=_308(end)?end:Infinity;if((_30b>=_303&&_30b<=_304)||(end>=_303&&end<=_304)||(_303>=_30b&&_304<=end)){yea.push(_309);}else{nay.push(_309);}}}return {match:yea,noMatch:nay};},_resolve:function(args,_30c,_30d,dfd,_30e){if(_30c){this[_30c].apply(this,args);}if(_30d){_30d.apply(null,args);}if(dfd){_1fd._resDfd(dfd,args,_30e);}},_getShallowClone:function(_30f){var _310=new _207(),prop;for(prop in _30f){if(_30f.hasOwnProperty(prop)){_310[prop]=_30f[prop];}}return _310;},_query:function(type,_311,_312,_313,_314){var that=this,map=this._map,dfd=new _1f7(_1fd._dfdCanceller),_315=_312;var _316=function(_317,_318){if(!_318&&type==="execute"&&!that._isTable){var _319=_317.features,mode=that._mode,_31a=that.objectIdField,il=_319.length,i;for(i=il-1;i>=0;i--){var oid=_319[i].attributes[_31a];var _31b=mode._getFeature(oid);if(_31b){_319.splice(i,1,_31b);}}}that._resolve([_317],_311,_313,dfd);};if(type!=="executeRelationshipQuery"){_315=this._getShallowClone(_312);_315.outFields=this._getOutFields();_315.returnGeometry=(!map&&_312.hasOwnProperty("returnGeometry"))?_312.returnGeometry:true;var _31c;if(map){_315.outSpatialReference=new _1fe(map.spatialReference.toJson());}if(!this._applyQueryFilters(_315)){switch(type){case "execute":_31c=new _208({features:[]});break;case "executeForIds":_31c=[];break;case "executeForCount":_31c=0;break;}_316(_31c,true);return dfd;}var _31d=this._canDoClientSideQuery(_315);if(_31d){var _31e=this._doQuery(_315,_31d,(type==="executeForIds"||type==="executeForCount"));switch(type){case "execute":_31c=new _208();_31c.features=_31e;break;case "executeForIds":_31c=_31e;break;case "executeForCount":_31c=_31e.length;break;}_316(_31c,true);return dfd;}}if(this._collection){var err=new Error("FeatureLayer::_query - "+this.invalidParams);this._resolve([err],null,_314,dfd,true);return dfd;}if(this._ts){_315._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task[type](_315);temp.addCallbacks(_316,function(err){that._resolve([err],null,_314,dfd,true);});return dfd;},_convertFeaturesToJson:function(_31f,_320,_321,_322){var json=[],_323=this._selectionSymbol,_324=this.visibilityField,i,_325,_326=this.objectIdField;if(this.loaded&&(_321||_322)){_325=_1f5.filter(this.fields,function(_327){return (_327.editable===false)&&(!_322||(_327.name!==_326));});}for(i=0;i<_31f.length;i++){var _328=_31f[i],_329={},_32a=_328.geometry,attr=_328.attributes,_32b=_328.symbol;if(_32a&&(!_322||!this.loaded||this.allowGeometryUpdates)){_329.geometry=_32a.toJson();}if(_324){_329.attributes=attr=lang.mixin({},attr);attr[_324]=_328.visible?1:0;}else{if(attr){_329.attributes=lang.mixin({},attr);}}if(_329.attributes&&_325&&_325.length){_1f5.forEach(_325,function(_32c){delete _329.attributes[_32c.name];});}if(_32b&&(_32b!==_323)){_329.symbol=_32b.toJson();}json.push(_329);}return _320?json:_1f6.toJson(json);},_selectHandler:function(_32d,_32e,_32f,_330,dfd){var _331,ctor=this.constructor;switch(_32e){case ctor.SELECTION_NEW:this.clearSelection(true);_331=true;break;case ctor.SELECTION_ADD:_331=true;break;case ctor.SELECTION_SUBTRACT:_331=false;break;}var i,_332=_32d.features,mode=this._mode,_333=[],_334=this.objectIdField,_335,oid;if(_331){for(i=0;i<_332.length;i++){_335=_332[i];oid=_335.attributes[_334];var _336=mode._addFeatureIIf(oid,_335);_333.push(_336);this._selectFeatureIIf(oid,_336,mode);}}else{for(i=0;i<_332.length;i++){_335=_332[i];oid=_335.attributes[_334];this._unSelectFeatureIIf(oid,mode);var _337=mode._removeFeatureIIf(oid);_333.push(_337||_335);}}if(this._isSelOnly){mode._applyTimeFilter(true);}this._resolve([_333,_32e,_32d.exceededTransferLimit?{queryLimitExceeded:true}:null],"onSelectionComplete",_32f,dfd);if(_32d.exceededTransferLimit){this.onQueryLimitExceeded();}},_selectFeatureIIf:function(oid,_338,mode){var _339=this._selectedFeatures,_33a=_339[oid];if(!_33a){mode._incRefCount(oid);_339[oid]=_338;if(!this._isTable){this._setSelectSymbol(_338);}}return _33a||_338;},_unSelectFeatureIIf:function(oid,mode){var _33b=this._selectedFeatures[oid];if(_33b){mode._decRefCount(oid);delete this._selectedFeatures[oid];if(!this._isTable){this._setUnSelectSymbol(_33b);}}return _33b;},_isSelected:function(_33c){},_setSelectSymbol:function(_33d){var _33e=this._selectionSymbol;if(_33e&&!this._isSelOnly){_33d.setSymbol(_33e);}},_setUnSelectSymbol:function(_33f){var _340=this._selectionSymbol;if(_340&&!this._isSelOnly){if(_340===_33f.symbol){_33f.setSymbol(null,true);}}},_getOutFields:function(){var _341=_1f5.filter([this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._rendererFields),function(_342,_343,arr){return !!_342&&(_1f5.indexOf(arr,_342)===_343);});var _344=lang.clone(this._outFields);if(_344){if(_1f5.indexOf(_344,"*")!==-1){return _344;}_1f5.forEach(_341,function(_345){if(_1f5.indexOf(_344,_345)===-1){_344.push(_345);}});return _344;}else{return _341;}},_checkFields:function(_346){var _347=_346||this._getOutFields();_1f5.forEach(_347,function(_348){if(_348==="*"){return;}if(!this._getField(_348)){console.debug("esri.layers.FeatureLayer: "+_1fb.substitute({url:this.url,field:_348},"unable to find '${field}' field in the layer 'fields' information [url: ${url}]"));}},this);if(!_346&&!this._isTable&&!this._fserver&&!this._collection){var _349=_1f5.some(this.fields,function(_34a){return (_34a&&_34a.type==="esriFieldTypeGeometry")?true:false;});if(!_349){console.debug("esri.layers.FeatureLayer: "+_1fb.substitute({url:this.url},"unable to find a field of type 'esriFieldTypeGeometry' in the layer 'fields' information. If you are using a map service layer, features will not have geometry [url: ${url}]"));}}},_fixRendererFields:function(){var _34b=this.renderer;if(_34b&&this.fields.length>0){var _34c=_1f5.filter([_34b,_34b.observationRenderer,_34b.latestObservationRenderer,_34b.trackRenderer],_1fb.isDefined);var _34d=[];_1f5.forEach(_34c,function(rnd){var _34e,_34f;_34f=rnd.attributeField;if(_34f&&!lang.isFunction(_34f)){_34e=!this._getField(_34f)&&this._getField(_34f,true);if(_34e){rnd.attributeField=_34e.name;}}_34f=rnd.attributeField2;if(_34f){_34e=!this._getField(_34f)&&this._getField(_34f,true);if(_34e){rnd.attributeField2=_34e.name;}}_34f=rnd.attributeField3;if(_34f){_34e=!this._getField(_34f)&&this._getField(_34f,true);if(_34e){rnd.attributeField3=_34e.name;}}if(!lang.isFunction(rnd.attributeField)){_34d.push(rnd.attributeField);}_34d.push(rnd.attributeField2);_34d.push(rnd.attributeField3);},this);this._rendererFields=_1f5.filter(_34d,_1fb.isDefined);}},_getField:function(_350,_351){var _352=this.fields;if(_352.length===0){return null;}var _353;if(_351){_350=_350.toLowerCase();}_1f5.some(_352,function(_354){var _355=false;if(_351){_355=(_354&&_354.name.toLowerCase()===_350)?true:false;}else{_355=(_354&&_354.name===_350)?true:false;}if(_355){_353=_354;}return _355;});return _353;},_getDateOpts:function(){if(!this._dtOpts){var _356=_1f5.map(_1f5.filter(this.fields,function(_357){return !!(_357&&_357.type==="esriFieldTypeDate");}),function(_358){return _358.name;});this._dtOpts={properties:_356};}return this._dtOpts;},_applyNormalized:function(_359,_35a){if(_359&&_35a){_1f5.forEach(_359,function(_35b,_35c){if(_35b&&_35a[_35c]){_35b.setGeometry(_35a[_35c]);}});}},_editHandler:function(_35d,adds,_35e,_35f,_360,dfd){var _361=_35d.addResults,_362=_35d.updateResults,_363=_35d.deleteResults,i,_364,oid,_365,attr,_366=this.objectIdField,mode=this._mode,_367=this._isTable;var _368=this.editFieldsInfo,_369=this._getOutFields()||[],_36a=_368&&_368.creatorField,_36b=_368&&_368.creationDateField,_36c=_368&&_368.editorField,_36d=_368&&_368.editDateField,_36e=_368&&_368.realm;if(_1f5.indexOf(_369,"*")===-1){if(_36a&&_1f5.indexOf(_369,_36a)===-1){_36a=null;}if(_36b&&_1f5.indexOf(_369,_36b)===-1){_36b=null;}if(_36c&&_1f5.indexOf(_369,_36c)===-1){_36c=null;}if(_36d&&_1f5.indexOf(_369,_36d)===-1){_36d=null;}}var _36f=(_36b||_36d)?(new Date()).getTime():null,_370=(_36a||_36c)?this.getUserId():undefined;if(_370&&_36e){_370=_370+"@"+_36e;}if(_361){for(i=0;i<_361.length;i++){_361[i]=new _211(_361[i]);if(_367){continue;}_364=_361[i];if(_364.success){oid=_364.objectId;_365=adds[i];var gl=_365._graphicsLayer;if(gl&&gl!==this){gl.remove(_365);}attr=_365.attributes||{};attr[_366]=oid;if(_36a){attr[_36a]=_370;}if(_36c){attr[_36c]=_370;}if(_36b){attr[_36b]=_36f;}if(_36d){attr[_36d]=_36f;}_365.setAttributes(attr);if(mode._init){mode.drawFeature(_365);}}}}if(_362){for(i=0;i<_362.length;i++){_362[i]=new _211(_362[i]);if(_367){continue;}_364=_362[i];if(_364.success){oid=_364.objectId;_365=_35e[oid];var _371=mode._getFeature(oid);if(_371){if(_371.geometry!==_365.geometry){_371.setGeometry(_20a.fromJson(_365.geometry.toJson()));}this._repaint(_371,oid);}_365=_371||_365;attr=_365.attributes||{};if(_36c){attr[_36c]=_370;}if(_36d){attr[_36d]=_36f;}_365.setAttributes(attr);}}}if(_363){var _372=[];for(i=0;i<_363.length;i++){_363[i]=new _211(_363[i]);if(_367){continue;}_364=_363[i];if(_364.success){oid=_364.objectId;_365=mode._getFeature(oid);if(_365){if(this._unSelectFeatureIIf(oid,mode)){_372.push(_365);}_365._count=0;mode._removeFeatureIIf(oid);}}}if(_372.length>0){this.onSelectionComplete(_372,this.constructor.SELECTION_SUBTRACT);}}this._resolve([_361,_362,_363],"onEditsComplete",_35f,dfd);},_sendAttachment:function(type,_373,_374,_375,_376){var _377=(type==="add")?"addAttachment":"updateAttachment",url=this._url.path+"/"+_373+"/"+_377,self=this;var dfd=_1fc({url:url,form:_374,content:lang.mixin(this._url.query,{f:"json",token:this._getToken()||undefined}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(_378){var _379=(type==="add")?"addAttachmentResult":"updateAttachmentResult",_37a=(type==="add")?"onAddAttachmentComplete":"onUpdateAttachmentComplete",_37b=new _211(_378[_379]);_37b.attachmentId=_37b.objectId;_37b.objectId=_373;self._resolve([_37b],_37a,_375);return _37b;}).addErrback(function(_37c){self._resolve([_37c],null,_376,null,true);});return dfd;},_repaint:function(_37d,oid,_37e){oid=_1fb.isDefined(oid)?oid:_37d.attributes[this.objectIdField];if(!(oid in this._selectedFeatures)||!this._selectionSymbol){_37d.setSymbol(_37d.symbol,_37e);}},_getKind:function(_37f){var _380=this._trackManager;if(_380){return _380.isLatestObservation(_37f)?1:0;}return 0;}});lang.mixin(_216,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});_20b._createWrappers(_216);if(has("extend-esri")){lang.setObject("layers.FeatureLayer",_216,_1fa);}return _216;});},"dojox/main":function(){define("dojox/main",["dojo/_base/kernel"],function(dojo){return dojo.dojox;});},"esri/dijit/editing/Util":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel"],function(lang,_381,has,_382){var util={};util={findFeatures:function(ids,_383,_384){var _385=_383.objectIdField;var _386=_383.graphics;var _387=_381.filter(_386,function(_388){return _381.some(ids,function(id){return _388.attributes[_385]===id.objectId;});});if(_384){_384(_387);}else{return _387;}},getSelection:function(_389){var _38a=[];_381.forEach(_389,function(_38b){var _38c=_38b.getSelectedFeatures();_381.forEach(_38c,function(_38d){_38a.push(_38d);});});return _38a;}};if(has("extend-esri")){lang.setObject("dijit.editing.Util.LayerHelper",util,_382);}return util;});},"dijit/form/SimpleTextarea":function(){define("dijit/form/SimpleTextarea",["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(_38e,_38f,has,_390){return _38e("dijit.form.SimpleTextarea",_390,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} data-dojo-attach-point='focusNode,containerNode,textbox' autocomplete='off'></textarea>",postMixInProperties:function(){if(!this.value&&this.srcNodeRef){this.value=this.srcNodeRef.value;}this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);if(has("ie")&&this.cols){_38f.add(this.textbox,"dijitTextAreaCols");}},filter:function(_391){if(_391){_391=_391.replace(/\r/g,"");}return this.inherited(arguments);},_onInput:function(e){if(this.maxLength){var _392=parseInt(this.maxLength);var _393=this.textbox.value.replace(/\r/g,"");var _394=_393.length-_392;if(_394>0){var _395=this.textbox;if(_395.selectionStart){var pos=_395.selectionStart;var cr=0;if(has("opera")){cr=(this.textbox.value.substring(0,pos).match(/\r/g)||[]).length;}this.textbox.value=_393.substring(0,pos-_394-cr)+_393.substring(pos-cr);_395.setSelectionRange(pos-_394,pos-_394);}else{if(this.ownerDocument.selection){_395.focus();var _396=this.ownerDocument.selection.createRange();_396.moveStart("character",-_394);_396.text="";_396.select();}}}}this.inherited(arguments);}});});},"dijit/form/MappedTextBox":function(){define("dijit/form/MappedTextBox",["dojo/_base/declare","dojo/dom-construct","./ValidationTextBox"],function(_397,_398,_399){return _397("dijit.form.MappedTextBox",_399,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting="";},_setNameAttr:null,serialize:function(val){return val.toString?val.toString():"";},toString:function(){var val=this.filter(this.get("value"));return val!=null?(typeof val=="string"?val:this.serialize(val,this.constraints)):"";},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);this.valueNode=_398.place("<input type='hidden'"+(this.name?" name=\""+this.name.replace(/"/g,"&quot;")+"\"":"")+"/>",this.textbox,"after");},reset:function(){this.valueNode.value="";this.inherited(arguments);}});});},"url:dijit/form/templates/Spinner.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitButtonNode dijitSpinnerButtonContainer\"\n\t\t><input class=\"dijitReset dijitInputField dijitSpinnerButtonInner\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t/><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton\"\n\t\t\tdata-dojo-attach-point=\"upArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9650; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\tdata-dojo-attach-point=\"downArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' data-dojo-attach-point=\"textbox,focusNode\" type=\"${type}\" data-dojo-attach-event=\"onkeypress:_onKeyPress\"\n\t\t\trole=\"spinbutton\" autocomplete=\"off\" ${!nameAttrSetting}\n\t/></div\n></div>\n","dojox/date/islamic/Date":function(){define("dojox/date/islamic/Date",["dojo/_base/lang","dojo/_base/declare","dojo/date"],function(lang,_39a,dd){var _39b=_39a("dojox.date.islamic.Date",null,{_date:0,_month:0,_year:0,_hours:0,_minutes:0,_seconds:0,_milliseconds:0,_day:0,_GREGORIAN_EPOCH:1721425.5,_ISLAMIC_EPOCH:1948439.5,constructor:function(){var len=arguments.length;if(!len){this.fromGregorian(new Date());}else{if(len==1){var arg0=arguments[0];if(typeof arg0=="number"){arg0=new Date(arg0);}if(arg0 instanceof Date){this.fromGregorian(arg0);}else{if(arg0==""){this._date=new Date("");}else{this._year=arg0._year;this._month=arg0._month;this._date=arg0._date;this._hours=arg0._hours;this._minutes=arg0._minutes;this._seconds=arg0._seconds;this._milliseconds=arg0._milliseconds;}}}else{if(len>=3){this._year+=arguments[0];this._month+=arguments[1];this._date+=arguments[2];this._hours+=arguments[3]||0;this._minutes+=arguments[4]||0;this._seconds+=arguments[5]||0;this._milliseconds+=arguments[6]||0;}}}},getDate:function(){return this._date;},getMonth:function(){return this._month;},getFullYear:function(){return this._year;},getDay:function(){return this.toGregorian().getDay();},getHours:function(){return this._hours;},getMinutes:function(){return this._minutes;},getSeconds:function(){return this._seconds;},getMilliseconds:function(){return this._milliseconds;},setDate:function(date){date=parseInt(date);if(date>0&&date<=this.getDaysInIslamicMonth(this._month,this._year)){this._date=date;}else{var _39c;if(date>0){for(_39c=this.getDaysInIslamicMonth(this._month,this._year);date>_39c;date-=_39c,_39c=this.getDaysInIslamicMonth(this._month,this._year)){this._month++;if(this._month>=12){this._year++;this._month-=12;}}this._date=date;}else{for(_39c=this.getDaysInIslamicMonth((this._month-1)>=0?(this._month-1):11,((this._month-1)>=0)?this._year:this._year-1);date<=0;_39c=this.getDaysInIslamicMonth((this._month-1)>=0?(this._month-1):11,((this._month-1)>=0)?this._year:this._year-1)){this._month--;if(this._month<0){this._year--;this._month+=12;}date+=_39c;}this._date=date;}}return this;},setFullYear:function(year){this._year=+year;},setMonth:function(_39d){this._year+=Math.floor(_39d/12);if(_39d>0){this._month=Math.floor(_39d%12);}else{this._month=Math.floor(((_39d%12)+12)%12);}},setHours:function(){var _39e=arguments.length;var _39f=0;if(_39e>=1){_39f=parseInt(arguments[0]);}if(_39e>=2){this._minutes=parseInt(arguments[1]);}if(_39e>=3){this._seconds=parseInt(arguments[2]);}if(_39e==4){this._milliseconds=parseInt(arguments[3]);}while(_39f>=24){this._date++;var _3a0=this.getDaysInIslamicMonth(this._month,this._year);if(this._date>_3a0){this._month++;if(this._month>=12){this._year++;this._month-=12;}this._date-=_3a0;}_39f-=24;}this._hours=_39f;},_addMinutes:function(_3a1){_3a1+=this._minutes;this.setMinutes(_3a1);this.setHours(this._hours+parseInt(_3a1/60));return this;},_addSeconds:function(_3a2){_3a2+=this._seconds;this.setSeconds(_3a2);this._addMinutes(parseInt(_3a2/60));return this;},_addMilliseconds:function(_3a3){_3a3+=this._milliseconds;this.setMilliseconds(_3a3);this._addSeconds(parseInt(_3a3/1000));return this;},setMinutes:function(_3a4){this._minutes=_3a4%60;return this;},setSeconds:function(_3a5){this._seconds=_3a5%60;return this;},setMilliseconds:function(_3a6){this._milliseconds=_3a6%1000;return this;},toString:function(){if(isNaN(this._date)){return "Invalidate Date";}else{var x=new Date();x.setHours(this._hours);x.setMinutes(this._minutes);x.setSeconds(this._seconds);x.setMilliseconds(this._milliseconds);return this._month+" "+this._date+" "+this._year+" "+x.toTimeString();}},toGregorian:function(){var _3a7=this._year;var _3a8=this._month;var _3a9=this._date;var _3aa=_3a9+Math.ceil(29.5*_3a8)+(_3a7-1)*354+Math.floor((3+(11*_3a7))/30)+this._ISLAMIC_EPOCH-1;var wjd=Math.floor(_3aa-0.5)+0.5,_3ab=wjd-this._GREGORIAN_EPOCH,_3ac=Math.floor(_3ab/146097),dqc=this._mod(_3ab,146097),cent=Math.floor(dqc/36524),_3ad=this._mod(dqc,36524),quad=Math.floor(_3ad/1461),_3ae=this._mod(_3ad,1461),_3af=Math.floor(_3ae/365),year=(_3ac*400)+(cent*100)+(quad*4)+_3af;if(!(cent==4||_3af==4)){year++;}var _3b0=this._GREGORIAN_EPOCH+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400);var _3b1=wjd-_3b0;var tjd=(this._GREGORIAN_EPOCH-1)+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400)+Math.floor((739/12)+((dd.isLeapYear(new Date(year,3,1))?-1:-2))+1);var _3b2=((wjd<tjd)?0:(dd.isLeapYear(new Date(year,3,1))?1:2));var _3b3=Math.floor((((_3b1+_3b2)*12)+373)/367);var tjd2=(this._GREGORIAN_EPOCH-1)+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400)+Math.floor((((367*_3b3)-362)/12)+((_3b3<=2)?0:(dd.isLeapYear(new Date(year,_3b3,1))?-1:-2))+1);var day=(wjd-tjd2)+1;var _3b4=new Date(year,(_3b3-1),day,this._hours,this._minutes,this._seconds,this._milliseconds);return _3b4;},fromGregorian:function(_3b5){var date=new Date(_3b5);var _3b6=date.getFullYear(),_3b7=date.getMonth(),gDay=date.getDate();var _3b8=(this._GREGORIAN_EPOCH-1)+(365*(_3b6-1))+Math.floor((_3b6-1)/4)+(-Math.floor((_3b6-1)/100))+Math.floor((_3b6-1)/400)+Math.floor((((367*(_3b7+1))-362)/12)+(((_3b7+1)<=2)?0:(dd.isLeapYear(date)?-1:-2))+gDay);_3b8=Math.floor(_3b8)+0.5;var days=_3b8-this._ISLAMIC_EPOCH;var _3b9=Math.floor((30*days+10646)/10631);var _3ba=Math.ceil((days-29-this._yearStart(_3b9))/29.5);_3ba=Math.min(_3ba,11);var hDay=Math.ceil(days-this._monthStart(_3b9,_3ba))+1;this._date=hDay;this._month=_3ba;this._year=_3b9;this._hours=date.getHours();this._minutes=date.getMinutes();this._seconds=date.getSeconds();this._milliseconds=date.getMilliseconds();this._day=date.getDay();return this;},valueOf:function(){return this.toGregorian().valueOf();},_yearStart:function(year){return (year-1)*354+Math.floor((3+11*year)/30);},_monthStart:function(year,_3bb){return Math.ceil(29.5*_3bb)+(year-1)*354+Math.floor((3+11*year)/30);},_civilLeapYear:function(year){return (14+11*year)%30<11;},getDaysInIslamicMonth:function(_3bc,year){var _3bd=0;_3bd=29+((_3bc+1)%2);if(_3bc==11&&this._civilLeapYear(year)){_3bd++;}return _3bd;},_mod:function(a,b){return a-(b*Math.floor(a/b));}});_39b.getDaysInIslamicMonth=function(_3be){return new _39b().getDaysInIslamicMonth(_3be.getMonth(),_3be.getFullYear());};return _39b;});},"dijit/_editor/range":function(){define("dijit/_editor/range",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/window","../main"],function(_3bf,_3c0,lang,win,_3c1){_3c1.range={};_3c1.range.getIndex=function(node,_3c2){var ret=[],retR=[];var _3c3=node;var _3c4,n;while(node!=_3c2){var i=0;_3c4=node.parentNode;while((n=_3c4.childNodes[i++])){if(n===node){--i;break;}}ret.unshift(i);retR.unshift(i-_3c4.childNodes.length);node=_3c4;}if(ret.length>0&&_3c3.nodeType==3){n=_3c3.previousSibling;while(n&&n.nodeType==3){ret[ret.length-1]--;n=n.previousSibling;}n=_3c3.nextSibling;while(n&&n.nodeType==3){retR[retR.length-1]++;n=n.nextSibling;}}return {o:ret,r:retR};};_3c1.range.getNode=function(_3c5,_3c6){if(!lang.isArray(_3c5)||_3c5.length==0){return _3c6;}var node=_3c6;_3bf.every(_3c5,function(i){if(i>=0&&i<node.childNodes.length){node=node.childNodes[i];}else{node=null;return false;}return true;});return node;};_3c1.range.getCommonAncestor=function(n1,n2,root){root=root||n1.ownerDocument.body;var _3c7=function(n){var as=[];while(n){as.unshift(n);if(n!==root){n=n.parentNode;}else{break;}}return as;};var n1as=_3c7(n1);var n2as=_3c7(n2);var m=Math.min(n1as.length,n2as.length);var com=n1as[0];for(var i=1;i<m;i++){if(n1as[i]===n2as[i]){com=n1as[i];}else{break;}}return com;};_3c1.range.getAncestor=function(node,_3c8,root){root=root||node.ownerDocument.body;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(_3c8.test(name)){return node;}node=node.parentNode;}return null;};_3c1.range.BlockTagNames=/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/;_3c1.range.getBlockAncestor=function(node,_3c9,root){root=root||node.ownerDocument.body;_3c9=_3c9||_3c1.range.BlockTagNames;var _3ca=null,_3cb;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(!_3ca&&_3c9.test(name)){_3ca=node;}if(!_3cb&&(/^(?:BODY|TD|TH|CAPTION)$/).test(name)){_3cb=node;}node=node.parentNode;}return {blockNode:_3ca,blockContainer:_3cb||node.ownerDocument.body};};_3c1.range.atBeginningOfContainer=function(_3cc,node,_3cd){var _3ce=false;var _3cf=(_3cd==0);if(!_3cf&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(0,_3cd))){_3cf=true;}}if(_3cf){var _3d0=node;_3ce=true;while(_3d0&&_3d0!==_3cc){if(_3d0.previousSibling){_3ce=false;break;}_3d0=_3d0.parentNode;}}return _3ce;};_3c1.range.atEndOfContainer=function(_3d1,node,_3d2){var _3d3=false;var _3d4=(_3d2==(node.length||node.childNodes.length));if(!_3d4&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(_3d2))){_3d4=true;}}if(_3d4){var _3d5=node;_3d3=true;while(_3d5&&_3d5!==_3d1){if(_3d5.nextSibling){_3d3=false;break;}_3d5=_3d5.parentNode;}}return _3d3;};_3c1.range.adjacentNoneTextNode=function(_3d6,next){var node=_3d6;var len=(0-_3d6.length)||0;var prop=next?"nextSibling":"previousSibling";while(node){if(node.nodeType!=3){break;}len+=node.length;node=node[prop];}return [node,len];};_3c1.range.create=function(win){win=win||window;if(win.getSelection){return win.document.createRange();}else{return new _3c1.range.W3CRange();}};_3c1.range.getSelection=function(_3d7,_3d8){if(_3d7.getSelection){return _3d7.getSelection();}else{var s=new _3c1.range.ie.selection(_3d7);if(!_3d8){s._getCurrentSelection();}return s;}};if(!window.getSelection){_3c1.range.ie={cachedSelection:{},selection:function(_3d9){this._ranges=[];this.addRange=function(r,_3da){this._ranges.push(r);if(!_3da){r._select();}this.rangeCount=this._ranges.length;};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0;};var _3db=function(){var r=_3d9.document.selection.createRange();var type=_3d9.document.selection.type.toUpperCase();if(type=="CONTROL"){return new _3c1.range.W3CRange(_3c1.range.ie.decomposeControlRange(r));}else{return new _3c1.range.W3CRange(_3c1.range.ie.decomposeTextRange(r));}};this.getRangeAt=function(i){return this._ranges[i];};this._getCurrentSelection=function(){this.removeAllRanges();var r=_3db();if(r){this.addRange(r,true);this.isCollapsed=r.collapsed;}else{this.isCollapsed=true;}};},decomposeControlRange:function(_3dc){var _3dd=_3dc.item(0),_3de=_3dc.item(_3dc.length-1);var _3df=_3dd.parentNode,_3e0=_3de.parentNode;var _3e1=_3c1.range.getIndex(_3dd,_3df).o[0];var _3e2=_3c1.range.getIndex(_3de,_3e0).o[0]+1;return [_3df,_3e1,_3e0,_3e2];},getEndPoint:function(_3e3,end){var _3e4=_3e3.duplicate();_3e4.collapse(!end);var _3e5="EndTo"+(end?"End":"Start");var _3e6=_3e4.parentElement();var _3e7,_3e8,_3e9;if(_3e6.childNodes.length>0){_3bf.every(_3e6.childNodes,function(node,i){var _3ea;if(node.nodeType!=3){_3e4.moveToElementText(node);if(_3e4.compareEndPoints(_3e5,_3e3)>0){if(_3e9&&_3e9.nodeType==3){_3e7=_3e9;_3ea=true;}else{_3e7=_3e6;_3e8=i;return false;}}else{if(i==_3e6.childNodes.length-1){_3e7=_3e6;_3e8=_3e6.childNodes.length;return false;}}}else{if(i==_3e6.childNodes.length-1){_3e7=node;_3ea=true;}}if(_3ea&&_3e7){var _3eb=_3c1.range.adjacentNoneTextNode(_3e7)[0];if(_3eb){_3e7=_3eb.nextSibling;}else{_3e7=_3e6.firstChild;}var _3ec=_3c1.range.adjacentNoneTextNode(_3e7);_3eb=_3ec[0];var _3ed=_3ec[1];if(_3eb){_3e4.moveToElementText(_3eb);_3e4.collapse(false);}else{_3e4.moveToElementText(_3e6);}_3e4.setEndPoint(_3e5,_3e3);_3e8=_3e4.text.length-_3ed;return false;}_3e9=node;return true;});}else{_3e7=_3e6;_3e8=0;}if(!end&&_3e7.nodeType==1&&_3e8==_3e7.childNodes.length){var _3ee=_3e7.nextSibling;if(_3ee&&_3ee.nodeType==3){_3e7=_3ee;_3e8=0;}}return [_3e7,_3e8];},setEndPoint:function(_3ef,_3f0,_3f1){var _3f2=_3ef.duplicate(),node,len;if(_3f0.nodeType!=3){if(_3f1>0){node=_3f0.childNodes[_3f1-1];if(node){if(node.nodeType==3){_3f0=node;_3f1=node.length;}else{if(node.nextSibling&&node.nextSibling.nodeType==3){_3f0=node.nextSibling;_3f1=0;}else{_3f2.moveToElementText(node.nextSibling?node:_3f0);var _3f3=node.parentNode;var _3f4=_3f3.insertBefore(node.ownerDocument.createTextNode(" "),node.nextSibling);_3f2.collapse(false);_3f3.removeChild(_3f4);}}}}else{_3f2.moveToElementText(_3f0);_3f2.collapse(true);}}if(_3f0.nodeType==3){var _3f5=_3c1.range.adjacentNoneTextNode(_3f0);var _3f6=_3f5[0];len=_3f5[1];if(_3f6){_3f2.moveToElementText(_3f6);_3f2.collapse(false);if(_3f6.contentEditable!="inherit"){len++;}}else{_3f2.moveToElementText(_3f0.parentNode);_3f2.collapse(true);_3f2.move("character",1);_3f2.move("character",-1);}_3f1+=len;if(_3f1>0){if(_3f2.move("character",_3f1)!=_3f1){console.error("Error when moving!");}}}return _3f2;},decomposeTextRange:function(_3f7){var _3f8=_3c1.range.ie.getEndPoint(_3f7);var _3f9=_3f8[0],_3fa=_3f8[1];var _3fb=_3f8[0],_3fc=_3f8[1];if(_3f7.htmlText.length){if(_3f7.htmlText==_3f7.text){_3fc=_3fa+_3f7.text.length;}else{_3f8=_3c1.range.ie.getEndPoint(_3f7,true);_3fb=_3f8[0],_3fc=_3f8[1];}}return [_3f9,_3fa,_3fb,_3fc];},setRange:function(_3fd,_3fe,_3ff,_400,_401,_402){var _403=_3c1.range.ie.setEndPoint(_3fd,_3fe,_3ff);_3fd.setEndPoint("StartToStart",_403);if(!_402){var end=_3c1.range.ie.setEndPoint(_3fd,_400,_401);}_3fd.setEndPoint("EndToEnd",end||_403);return _3fd;}};_3c0("dijit.range.W3CRange",null,{constructor:function(){if(arguments.length>0){this.setStart(arguments[0][0],arguments[0][1]);this.setEnd(arguments[0][2],arguments[0][3]);}else{this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}},_updateInternal:function(){if(this.startContainer!==this.endContainer){this.commonAncestorContainer=_3c1.range.getCommonAncestor(this.startContainer,this.endContainer);}else{this.commonAncestorContainer=this.startContainer;}this.collapsed=(this.startContainer===this.endContainer)&&(this.startOffset==this.endOffset);},setStart:function(node,_404){_404=parseInt(_404);if(this.startContainer===node&&this.startOffset==_404){return;}delete this._cachedBookmark;this.startContainer=node;this.startOffset=_404;if(!this.endContainer){this.setEnd(node,_404);}else{this._updateInternal();}},setEnd:function(node,_405){_405=parseInt(_405);if(this.endContainer===node&&this.endOffset==_405){return;}delete this._cachedBookmark;this.endContainer=node;this.endOffset=_405;if(!this.startContainer){this.setStart(node,_405);}else{this._updateInternal();}},setStartAfter:function(node,_406){this._setPoint("setStart",node,_406,1);},setStartBefore:function(node,_407){this._setPoint("setStart",node,_407,0);},setEndAfter:function(node,_408){this._setPoint("setEnd",node,_408,1);},setEndBefore:function(node,_409){this._setPoint("setEnd",node,_409,0);},_setPoint:function(what,node,_40a,ext){var _40b=_3c1.range.getIndex(node,node.parentNode).o;this[what](node.parentNode,_40b.pop()+ext);},_getIERange:function(){var r=(this._body||this.endContainer.ownerDocument.body).createTextRange();_3c1.range.ie.setRange(r,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return r;},getBookmark:function(){this._getIERange();return this._cachedBookmark;},_select:function(){var r=this._getIERange();r.select();},deleteContents:function(){var s=this.startContainer,r=this._getIERange();if(s.nodeType===3&&!this.startOffset){this.setStartBefore(s);}r.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=true;},cloneRange:function(){var r=new _3c1.range.W3CRange([this.startContainer,this.startOffset,this.endContainer,this.endOffset]);r._body=this._body;return r;},detach:function(){this._body=null;this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}});}return _3c1.range;});},"dijit/form/_DateTimeTextBox":function(){require({cache:{"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"button presentation\" aria-hidden=\"true\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"}});define("dijit/form/_DateTimeTextBox",["dojo/date","dojo/date/locale","dojo/date/stamp","dojo/_base/declare","dojo/_base/lang","./RangeBoundTextBox","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(date,_40c,_40d,_40e,lang,_40f,_410,_411){new Date("X");var _412=_40e("dijit.form._DateTimeTextBox",[_40f,_410],{templateString:_411,hasDownArrow:true,cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},pattern:_40c.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text");},compare:function(val1,val2){var _413=this._isInvalidDate(val1);var _414=this._isInvalidDate(val2);return _413?(_414?0:-1):(_414?1:date.compare(val1,val2,this._selector));},forceWidth:true,format:function(_415,_416){if(!_415){return "";}return this.dateLocaleModule.format(_415,_416);},"parse":function(_417,_418){return this.dateLocaleModule.parse(_417,_418)||(this._isEmpty(_417)?null:undefined);},serialize:function(val,_419){if(val.toGregorian){val=val.toGregorian();}return _40d.toISOString(val,_419);},dropDownDefaultValue:new Date(),value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(_41a){this.dateModule=_41a.datePackage?lang.getObject(_41a.datePackage,false):date;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=_41a.datePackage?lang.getObject(_41a.datePackage+".locale",false):_40c;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString();},buildRendering:function(){this.inherited(arguments);if(!this.hasDownArrow){this._buttonNode.style.display="none";}if(!this.hasDownArrow){this._buttonNode=this.domNode;this.baseClass+=" dijitComboBoxOpenOnClick";}},_setConstraintsAttr:function(_41b){_41b.selector=this._selector;_41b.fullYear=true;var _41c=_40d.fromISOString;if(typeof _41b.min=="string"){_41b.min=_41c(_41b.min);}if(typeof _41b.max=="string"){_41b.max=_41c(_41b.max);}this.inherited(arguments);},_isInvalidDate:function(_41d){return !_41d||isNaN(_41d)||typeof _41d!="object"||_41d.toString()==this._invalidDate;},_setValueAttr:function(_41e,_41f,_420){if(_41e!==undefined){if(typeof _41e=="string"){_41e=_40d.fromISOString(_41e);}if(this._isInvalidDate(_41e)){_41e=null;}if(_41e instanceof Date&&!(this.dateClassObj instanceof Date)){_41e=new this.dateClassObj(_41e);}}this.inherited(arguments);if(this.value instanceof Date){this.filterString="";}if(this.dropDown){this.dropDown.set("value",_41e,false);}},_set:function(attr,_421){if(attr=="value"&&this.value instanceof Date&&this.compare(_421,this.value)==0){return;}this.inherited(arguments);},_setDropDownDefaultValueAttr:function(val){if(this._isInvalidDate(val)){val=new this.dateClassObj();}this.dropDownDefaultValue=val;},openDropDown:function(_422){if(this.dropDown){this.dropDown.destroy();}var _423=lang.isString(this.popupClass)?lang.getObject(this.popupClass,false):this.popupClass,_424=this,_425=this.get("value");this.dropDown=new _423({onChange:function(_426){_424.set("value",_426,true);},id:this.id+"_popup",dir:_424.dir,lang:_424.lang,value:_425,currentFocus:!this._isInvalidDate(_425)?_425:this.dropDownDefaultValue,constraints:_424.constraints,filterString:_424.filterString,datePackage:_424.params.datePackage,isDisabledDate:function(date){return !_424.rangeCheck(date,_424.constraints);}});this.inherited(arguments);},_getDisplayedValueAttr:function(){return this.textbox.value;},_setDisplayedValueAttr:function(_427,_428){this._setValueAttr(this.parse(_427,this.constraints),_428,_427);}});return _412;});},"esri/layers/RenderMode":function(){define("esri/layers/RenderMode",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","dojo/io/script","esri/kernel"],function(_429,_42a,lang,_42b,has,_42c,_42d){var _42e=_42a(null,{declaredClass:"esri.layers._RenderMode",constructor:function(){this._prefix="jsonp_"+(_429._scopeName||"dojo")+"IoScript";},initialize:function(map){this.map=map;this._init=true;},startup:function(){},propertyChangeHandler:function(type){},destroy:function(){this._init=false;},drawFeature:function(_42f){},suspend:function(){},resume:function(){},refresh:function(){},_incRefCount:function(oid){var _430=this._featureMap[oid];if(_430){_430._count++;}},_decRefCount:function(oid){var _431=this._featureMap[oid];if(_431){_431._count--;}},_getFeature:function(oid){return this._featureMap[oid];},_addFeatureIIf:function(oid,_432){var fmap=this._featureMap,_433=fmap[oid],_434=this.featureLayer;if(!_433){fmap[oid]=_432;_434._add(_432);_432._count=0;}return _433||_432;},_removeFeatureIIf:function(oid){var _435=this._featureMap[oid],_436=this.featureLayer;if(_435){if(_435._count){return;}delete this._featureMap[oid];_436._remove(_435);}return _435;},_clearIIf:function(){var i,_437=this.featureLayer,_438=_437.graphics,_439=_437._selectedFeatures,_43a=_437.objectIdField;for(i=_438.length-1;i>=0;i--){var _43b=_438[i];var oid=_43b.attributes[_43a];if(oid in _439){_43b._count=1;continue;}_43b._count=0;this._removeFeatureIIf(oid);}},_isPending:function(id){var dfd=_42c[this._prefix+id];return dfd?true:false;},_cancelPendingRequest:function(dfd,id){dfd=dfd||_42c[this._prefix+id];if(dfd){try{dfd.cancel();_42c._validCheck(dfd);}catch(e){}}},_purgeRequests:function(){_42c._validCheck(null);},_toggleVisibility:function(show){var _43c=this.featureLayer,_43d=_43c.graphics,_43e=show?"show":"hide",i,len=_43d.length;show=show&&_43c._ager;for(i=0;i<len;i++){var _43f=_43d[i];_43f[_43e]();if(show){_43c._repaint(_43f);}}},_applyTimeFilter:function(_440){var _441=this.featureLayer;if(!_441.timeInfo||_441.suspended){return;}if(!_440){_441._fireUpdateStart();}var _442=_441._trackManager;if(_442){_442.clearTracks();}var defn=_441.getTimeDefinition(),_443=_441._getOffsettedTE(_441._mapTimeExtent);if(_443){_443=_441._getTimeOverlap(defn,_443);if(_443){var _444=_441._filterByTime(_441.graphics,_443.startTime,_443.endTime);if(_442){_442.addFeatures(_444.match);}_42b.forEach(_444.match,function(_445){var _446=_445._shape;if(!_445.visible){_445.show();_446=_445._shape;_446&&_446._moveToFront();}if(_441._ager&&_446){_441._repaint(_445);}});_42b.forEach(_444.noMatch,function(_447){if(_447.visible){_447.hide();}});}else{this._toggleVisibility(false);}}else{if(_442){_442.addFeatures(_441.graphics);}this._toggleVisibility(true);}if(_442){_442.moveLatestToFront();_442.drawTracks();}if(!_440){_441._fireUpdateEnd();}}});if(has("extend-esri")){lang.setObject("layers._RenderMode",_42e,_42d);}return _42e;});},"url:esri/dijit/templates/AttributeInspector.html":"<div class=\"esriAttributeInspector\">\r\n    <div class=\"atiLayerName\" dojoAttachPoint=\"layerName\"></div>\r\n    <div class=\"atiAttributes\" dojoAttachPoint=\"attributeTable\"></div>\r\n    <div dojoAttachPoint=\"attachmentEditor\"></div>\r\n    <div class=\"atiEditorTrackingInfo\" dojoAttachPoint=\"editorTrackingInfoDiv\"></div>\r\n    <div class=\"atiButtons\" dojoAttachPoint=\"editButtons\">\r\n        <button  dojoType=\"dijit.form.Button\" class=\"atiButton atiDeleteButton\"  dojoAttachPoint=\"deleteBtn\" dojoAttachEvent=\"onClick: onDeleteBtn\" showLabel=\"true\" type=\"button\">${NLS_deleteFeature}</button>\r\n        <div class=\"atiNavButtons\" dojoAttachPoint=\"navButtons\">\r\n            <div class=\"atiNavMessage\" dojoAttachPoint=\"navMessage\"></div>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiFirstIcon\" dojoAttachPoint=\"firstFeatureButton\" dojoAttachEvent=\"onClick: onFirstFeature\" showLabel=\"false\" type=\"button\">${NLS_first}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiPrevIcon\" dojoAttachPoint=\"prevFeatureButton\" dojoAttachEvent=\"onClick: onPreviousFeature\" showLabel=\"false\" type=\"button\">${NLS_previous}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiNextIcon\" dojoAttachPoint=\"nextFeatureButton\" dojoAttachEvent=\"onClick: onNextFeature\" showLabel=\"false\" type=\"button\">${NLS_next}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiLastIcon\" dojoAttachPoint=\"lastFeatureButton\" dojoAttachEvent=\"onClick: onLastFeature\" showLabel=\"false\" type=\"button\">${NLS_last}</button>\r\n        </div>\r\n    </div>\r\n</div>\r\n","dijit/form/NumberSpinner":function(){define("dijit/form/NumberSpinner",["dojo/_base/declare","dojo/_base/event","dojo/keys","./_Spinner","./NumberTextBox"],function(_448,_449,keys,_44a,_44b){return _448("dijit.form.NumberSpinner",[_44a,_44b.Mixin],{baseClass:"dijitTextBox dijitSpinner dijitNumberTextBox",adjust:function(val,_44c){var tc=this.constraints,v=isNaN(val),_44d=!isNaN(tc.max),_44e=!isNaN(tc.min);if(v&&_44c!=0){val=(_44c>0)?_44e?tc.min:_44d?tc.max:0:_44d?this.constraints.max:_44e?tc.min:0;}var _44f=val+_44c;if(v||isNaN(_44f)){return val;}if(_44d&&(_44f>tc.max)){_44f=tc.max;}if(_44e&&(_44f<tc.min)){_44f=tc.min;}return _44f;},_onKeyPress:function(e){if((e.charOrCode==keys.HOME||e.charOrCode==keys.END)&&!(e.ctrlKey||e.altKey||e.metaKey)&&typeof this.get("value")!="undefined"){var _450=this.constraints[(e.charOrCode==keys.HOME?"min":"max")];if(typeof _450=="number"){this._setValueAttr(_450,false);}_449.stop(e);}}});});},"esri/layers/FeatureType":function(){define("esri/layers/FeatureType",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/lang","esri/symbols/jsonUtils","esri/layers/RangeDomain","esri/layers/CodedValueDomain","esri/layers/InheritedDomain","esri/layers/FeatureTemplate"],function(_451,lang,_452,has,_453,_454,_455,_456,_457,_458,_459){var _45a=_451(null,{declaredClass:"esri.layers.FeatureType",constructor:function(json){if(json&&lang.isObject(json)){this.id=json.id;this.name=json.name;var _45b=json.symbol;if(_45b){this.symbol=_455.fromJson(_45b);}var _45c=json.domains,_45d,i;var _45e=this.domains={};for(_45d in _45c){if(_45c.hasOwnProperty(_45d)){var _45f=_45c[_45d];switch(_45f.type){case "range":_45e[_45d]=new _456(_45f);break;case "codedValue":_45e[_45d]=new _457(_45f);break;case "inherited":_45e[_45d]=new _458(_45f);break;}}}var _460=json.templates;if(_460){var _461=this.templates=[];for(i=0;i<_460.length;i++){_461.push(new _459(_460[i]));}}}},toJson:function(){var json={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()};var _462,_463=this.domains,_464=this.templates,_465=_454.fixJson;if(_463){var _466=json.domains={};for(_462 in _463){if(_463.hasOwnProperty(_462)){_466[_462]=_463[_462]&&_463[_462].toJson();}}_465(_466);}if(_464){json.templates=_452.map(_464,function(_467){return _467.toJson();});}return _465(json);}});if(has("extend-esri")){lang.setObject("layers.FeatureType",_45a,_453);}return _45a;});},"esri/layers/TrackManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/graphic","esri/geometry/Polyline","esri/layers/GraphicsLayer"],function(_468,lang,_469,has,_46a,_46b,_46c,_46d){var _46e=_468(null,{declaredClass:"esri.layers._TrackManager",constructor:function(_46f){this.layer=_46f;this.trackMap={};},initialize:function(map){this.map=map;var _470=this.layer,_471=_470.renderer.trackRenderer;if(_471&&(_470.geometryType==="esriGeometryPoint")){var _472=(this.container=new _46d._GraphicsLayer({id:_470.id+"_tracks",_child:true}));_472.loaded=true;_472.onLoad(_472);_472._setMap(map,_470._div);_472.setRenderer(_471);}},addFeatures:function(_473){var tkid,_474=this.trackMap,_475=this.layer,_476=_475._trackIdField;_469.forEach(_473,function(_477){var _478=_477.attributes;tkid=_478[_476];var ary=(_474[tkid]=(_474[tkid]||[]));ary.push(_477);});var _479=_475._startTimeField,_47a=_475.objectIdField;var _47b=function(a,b){var _47c=a.attributes[_479],_47d=b.attributes[_479];if(_47c===_47d){return (a.attributes[_47a]<b.attributes[_47a])?-1:1;}else{return (_47c<_47d)?-1:1;}};for(tkid in _474){_474[tkid].sort(_47b);}},drawTracks:function(){var _47e=this.container;if(!_47e){return;}var _47f=this.trackMap,sr=this.map.spatialReference,tkid,ary,path,i,_480,_481=this.layer._trackIdField,_482;for(tkid in _47f){ary=_47f[tkid];path=[];for(i=ary.length-1;i>=0;i--){_480=ary[i].geometry;if(_480){path.push([_480.x,_480.y]);}}_482={};_482[_481]=tkid;if(path.length>0){_47e.add(new _46b(new _46c({paths:[path],spatialReference:sr}),null,_482));}}},moveLatestToFront:function(){_469.forEach(this.getLatestObservations(),function(_483){var _484=_483._shape;_484&&_484._moveToFront();this._repaint(_483,null,true);},this.layer);},getLatestObservations:function(){var _485=[];if(!this.layer.renderer.latestObservationRenderer){return _485;}var _486=this.trackMap,tkid;for(tkid in _486){var ary=_486[tkid];_485.push(ary[ary.length-1]);}return _485;},clearTracks:function(){var _487=this.getLatestObservations();this.trackMap={};var _488=this.container;if(_488){_488.clear();}_469.forEach(_487,function(_489){this._repaint(_489,null,true);},this.layer);},isLatestObservation:function(_48a){var _48b=this.layer._trackIdField;var _48c=this.trackMap[_48a.attributes[_48b]];if(_48c){return (_48c[_48c.length-1]===_48a);}return false;},destroy:function(){var _48d=this.container;if(_48d){_48d.clear();_48d._unsetMap(this.map,this.layer._div);this.container=null;}this.map=null;this.layer=null;this.trackMap=null;}});if(has("extend-esri")){lang.setObject("layers._TrackManager",_46e,_46a);}return _46e;});},"esri/layers/GridLayout":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/SpatialReference","esri/geometry/Extent","esri/geometry/Polyline"],function(_48e,lang,_48f,has,_490,_491,_492,_493){var _494=_48e(null,{declaredClass:"esri.layers._GridLayout",constructor:function(_495,_496,_497,_498){this.origin=_495;this.cellWidth=_496.width;this.cellHeight=_496.height;this.mapWidth=_497.width;this.mapHeight=_497.height;this.srInfo=_498;},setResolution:function(_499){this._resolution=(_499.xmax-_499.xmin)/this.mapWidth;if(this.srInfo){var _49a=Math.round((2*this.srInfo.valid[1])/this._resolution),_49b=Math.round(_49a/this.cellWidth);this._frameStats=[_49b,0,_49b-1];}},getCellCoordinates:function(_49c){var res=this._resolution,_49d=this.origin;return {row:Math.floor((_49d.y-_49c.y)/(this.cellHeight*res)),col:Math.floor((_49c.x-_49d.x)/(this.cellWidth*res))};},normalize:function(col){var _49e=this._frameStats;if(_49e){var _49f=_49e[0],m180=_49e[1],p180=_49e[2];if(col<m180){col=col%_49f;col=col<m180?col+_49f:col;}else{if(col>p180){col=col%_49f;}}}return col;},intersects:function(_4a0,_4a1){var _4a2=this.srInfo;if(_4a2){return _48f.some(_4a1._getParts(_4a2),function(_4a3){return _4a0.intersects(_4a3.extent);});}else{return _4a0.intersects(_4a1);}},getCellExtent:function(row,col){var res=this._resolution,_4a4=this.origin,_4a5=this.cellWidth,_4a6=this.cellHeight;return new _492((col*_4a5*res)+_4a4.x,_4a4.y-((row+1)*_4a6*res),((col+1)*_4a5*res)+_4a4.x,_4a4.y-(row*_4a6*res),new _491(_4a4.spatialReference.toJson()));},getLatticeID:function(_4a7){var _4a8=this.getCellCoordinates({x:_4a7.xmin,y:_4a7.ymax}),_4a9=this.getCellCoordinates({x:_4a7.xmax,y:_4a7.ymin}),_4aa=_4a8.row,_4ab=_4a9.row,_4ac=this.normalize(_4a8.col),_4ad=this.normalize(_4a9.col);return _4aa+"_"+_4ab+"_"+_4ac+"_"+_4ad;},sorter:function(a,b){return (a<b)?-1:1;},getCellsInExtent:function(_4ae,_4af){var _4b0=this.getCellCoordinates({x:_4ae.xmin,y:_4ae.ymax}),_4b1=this.getCellCoordinates({x:_4ae.xmax,y:_4ae.ymin}),_4b2=_4b0.row,_4b3=_4b1.row,_4b4=_4b0.col,_4b5=_4b1.col,_4b6=[],i,j,nj,_4b7=[],_4b8=[],len,xmin,xmax,ymin,ymax,_4b9=[],_4ba,_4bb;for(i=_4b2;i<=_4b3;i++){for(j=_4b4;j<=_4b5;j++){nj=this.normalize(j);_4ae=this.getCellExtent(i,nj);_4b6.push({row:i,col:nj,extent:_4ae,resolution:this._resolution});if(_4af){_4b7.push(_4ae.xmin,_4ae.xmax);_4b8.push(_4ae.ymin,_4ae.ymax);}}}_4b4=this.normalize(_4b4);_4b5=this.normalize(_4b5);_4b7.sort(this.sorter);_4b8.sort(this.sorter);len=_4b7.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_4b7[i]===_4b7[i+1]){_4b7.splice(i,1);}}}len=_4b8.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_4b8[i]===_4b8[i+1]){_4b8.splice(i,1);}}}if(_4b7.length&&_4b8.length){xmin=_4b7[0];xmax=_4b7[_4b7.length-1];ymin=_4b8[0];ymax=_4b8[_4b8.length-1];len=_4b7.length;for(i=0;i<len;i++){_4b9.push([[_4b7[i],ymax],[_4b7[i],ymin]]);}len=_4b8.length;for(i=0;i<len;i++){_4b9.push([[xmin,_4b8[i]],[xmax,_4b8[i]]]);}_4ba=new _493({paths:_4b9,spatialReference:this.origin.spatialReference.toJson()});_4bb=_4b2+"_"+_4b3+"_"+_4b4+"_"+_4b5;_4b6.push({latticeID:_4bb,lattice:_4ba,resolution:this._resolution});}return {minRow:_4b2,maxRow:_4b3,minCol:_4b4,maxCol:_4b5,cells:_4b6};}});if(has("extend-esri")){lang.setObject("layers._GridLayout",_494,_490);}return _494;});},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(lang,_4bc,_4bd){var _4be={};lang.setObject("dojo.data.util.simpleFetch",_4be);_4be.errorHandler=function(_4bf,_4c0){if(_4c0.onError){var _4c1=_4c0.scope||_4bc.global;_4c0.onError.call(_4c1,_4bf,_4c0);}};_4be.fetchHandler=function(_4c2,_4c3){var _4c4=_4c3.abort||null,_4c5=false,_4c6=_4c3.start?_4c3.start:0,_4c7=(_4c3.count&&(_4c3.count!==Infinity))?(_4c6+_4c3.count):_4c2.length;_4c3.abort=function(){_4c5=true;if(_4c4){_4c4.call(_4c3);}};var _4c8=_4c3.scope||_4bc.global;if(!_4c3.store){_4c3.store=this;}if(_4c3.onBegin){_4c3.onBegin.call(_4c8,_4c2.length,_4c3);}if(_4c3.sort){_4c2.sort(_4bd.createSortFunction(_4c3.sort,this));}if(_4c3.onItem){for(var i=_4c6;(i<_4c2.length)&&(i<_4c7);++i){var item=_4c2[i];if(!_4c5){_4c3.onItem.call(_4c8,item,_4c3);}}}if(_4c3.onComplete&&!_4c5){var _4c9=null;if(!_4c3.onItem){_4c9=_4c2.slice(_4c6,_4c7);}_4c3.onComplete.call(_4c8,_4c9,_4c3);}};_4be.fetch=function(_4ca){_4ca=_4ca||{};if(!_4ca.store){_4ca.store=this;}this._fetchItems(_4ca,lang.hitch(this,"fetchHandler"),lang.hitch(this,"errorHandler"));return _4ca;};return _4be;});},"dijit/form/ComboBoxMixin":function(){require({cache:{"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"button presentation\" aria-hidden=\"true\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"}});define("dijit/form/ComboBoxMixin",["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/kernel","dojo/_base/lang","dojo/store/util/QueryResults","./_AutoCompleterMixin","./_ComboBoxMenu","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(_4cb,_4cc,_4cd,lang,_4ce,_4cf,_4d0,_4d1,_4d2){return _4cb("dijit.form.ComboBoxMixin",[_4d1,_4cf],{dropDownClass:_4d0,hasDownArrow:true,templateString:_4d2,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},_setHasDownArrowAttr:function(val){this._set("hasDownArrow",val);this._buttonNode.style.display=val?"":"none";},_showResultList:function(){this.displayMessage("");this.inherited(arguments);},_setStoreAttr:function(_4d3){if(!_4d3.get){lang.mixin(_4d3,{_oldAPI:true,get:function(id){var _4d4=new _4cc();this.fetchItemByIdentity({identity:id,onItem:function(_4d5){_4d4.resolve(_4d5);},onError:function(_4d6){_4d4.reject(_4d6);}});return _4d4.promise;},query:function(_4d7,_4d8){var _4d9=new _4cc(function(){_4da.abort&&_4da.abort();});_4d9.total=new _4cc();var _4da=this.fetch(lang.mixin({query:_4d7,onBegin:function(_4db){_4d9.total.resolve(_4db);},onComplete:function(_4dc){_4d9.resolve(_4dc);},onError:function(_4dd){_4d9.reject(_4dd);}},_4d8));return _4ce(_4d9);}});}this._set("store",_4d3);},postMixInProperties:function(){var _4de=this.params.store||this.store;if(_4de){this._setStoreAttr(_4de);}this.inherited(arguments);if(!this.params.store&&!this.store._oldAPI){var _4df=this.declaredClass;lang.mixin(this.store,{getValue:function(item,attr){_4cd.deprecated(_4df+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return item[attr];},getLabel:function(item){_4cd.deprecated(_4df+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return item.name;},fetch:function(args){_4cd.deprecated(_4df+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");var shim=["dojo/data/ObjectStore"];require(shim,lang.hitch(this,function(_4e0){new _4e0({objectStore:this}).fetch(args);}));}});}}});});},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(lang){var _4e1={};lang.setObject("dojo.data.util.sorter",_4e1);_4e1.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};_4e1.createSortFunction=function(_4e2,_4e3){var _4e4=[];function _4e5(attr,dir,comp,s){return function(_4e6,_4e7){var a=s.getValue(_4e6,attr);var b=s.getValue(_4e7,attr);return dir*comp(a,b);};};var _4e8;var map=_4e3.comparatorMap;var bc=_4e1.basicComparator;for(var i=0;i<_4e2.length;i++){_4e8=_4e2[i];var attr=_4e8.attribute;if(attr){var dir=(_4e8.descending)?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&("toString" in attr)){attr=attr.toString();}comp=map[attr]||bc;}_4e4.push(_4e5(attr,dir,comp,_4e3));}}return function(rowA,rowB){var i=0;while(i<_4e4.length){var ret=_4e4[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};return _4e1;});},"dojox/date/islamic":function(){define("dojox/date/islamic",["..","dojo/_base/lang","dojo/date","./islamic/Date"],function(_4e9,lang,dd,_4ea){var _4eb=lang.getObject("date.islamic",true,_4e9);_4eb.getDaysInMonth=function(_4ec){return _4ec.getDaysInIslamicMonth(_4ec.getMonth(),_4ec.getFullYear());};_4eb.compare=function(_4ed,_4ee,_4ef){if(_4ed instanceof _4ea){_4ed=_4ed.toGregorian();}if(_4ee instanceof _4ea){_4ee=_4ee.toGregorian();}return dd.compare.apply(null,arguments);};_4eb.add=function(date,_4f0,_4f1){var _4f2=new _4ea(date);switch(_4f0){case "day":_4f2.setDate(date.getDate()+_4f1);break;case "weekday":var day=date.getDay();if(((day+_4f1)<5)&&((day+_4f1)>0)){_4f2.setDate(date.getDate()+_4f1);}else{var _4f3=0,_4f4=0;if(day==5){day=4;_4f4=(_4f1>0)?-1:1;}else{if(day==6){day=4;_4f4=(_4f1>0)?-2:2;}}var add=(_4f1>0)?(5-day-1):-day;var _4f5=_4f1-add;var div=parseInt(_4f5/5);if(_4f5%5!=0){_4f3=(_4f1>0)?2:-2;}_4f3=_4f3+div*7+_4f5%5+add;_4f2.setDate(date.getDate()+_4f3+_4f4);}break;case "year":_4f2.setFullYear(date.getFullYear()+_4f1);break;case "week":_4f1*=7;_4f2.setDate(date.getDate()+_4f1);break;case "month":var _4f6=date.getMonth();_4f2.setMonth(_4f6+_4f1);break;case "hour":_4f2.setHours(date.getHours()+_4f1);break;case "minute":_4f2._addMinutes(_4f1);break;case "second":_4f2._addSeconds(_4f1);break;case "millisecond":_4f2._addMilliseconds(_4f1);break;}return _4f2;};_4eb.difference=function(_4f7,_4f8,_4f9){_4f8=_4f8||new _4ea();_4f9=_4f9||"day";var _4fa=_4f8.getFullYear()-_4f7.getFullYear();var _4fb=1;switch(_4f9){case "weekday":var days=Math.round(_4eb.difference(_4f7,_4f8,"day"));var _4fc=parseInt(_4eb.difference(_4f7,_4f8,"week"));var mod=days%7;if(mod==0){days=_4fc*5;}else{var adj=0;var aDay=_4f7.getDay();var bDay=_4f8.getDay();_4fc=parseInt(days/7);mod=days%7;var _4fd=new _4ea(_4f7);_4fd.setDate(_4fd.getDate()+(_4fc*7));var _4fe=_4fd.getDay();if(days>0){switch(true){case aDay==5:adj=-1;break;case aDay==6:adj=0;break;case bDay==5:adj=-1;break;case bDay==6:adj=-2;break;case (_4fe+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==5:adj=0;break;case aDay==6:adj=1;break;case bDay==5:adj=2;break;case bDay==6:adj=1;break;case (_4fe+mod)<0:adj=2;}}}days+=adj;days-=(_4fc*2);}_4fb=days;break;case "year":_4fb=_4fa;break;case "month":var _4ff=(_4f8.toGregorian()>_4f7.toGregorian())?_4f8:_4f7;var _500=(_4f8.toGregorian()>_4f7.toGregorian())?_4f7:_4f8;var _501=_4ff.getMonth();var _502=_500.getMonth();if(_4fa==0){_4fb=_4ff.getMonth()-_500.getMonth();}else{_4fb=12-_502;_4fb+=_501;var i=_500.getFullYear()+1;var e=_4ff.getFullYear();for(i;i<e;i++){_4fb+=12;}}if(_4f8.toGregorian()<_4f7.toGregorian()){_4fb=-_4fb;}break;case "week":_4fb=parseInt(_4eb.difference(_4f7,_4f8,"day")/7);break;case "day":_4fb/=24;case "hour":_4fb/=60;case "minute":_4fb/=60;case "second":_4fb/=1000;case "millisecond":_4fb*=_4f8.toGregorian().getTime()-_4f7.toGregorian().getTime();}return Math.round(_4fb);};return _4eb;});},"dijit/_KeyNavContainer":function(){define("dijit/_KeyNavContainer",["dojo/_base/kernel","./_Container","./_FocusMixin","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/_base/event","dojo/dom-attr","dojo/_base/lang"],function(_503,_504,_505,_506,keys,_507,_508,_509,lang){return _507("dijit._KeyNavContainer",[_505,_504],{tabIndex:"0",connectKeyNavHandlers:function(_50a,_50b){var _50c=(this._keyNavCodes={});var prev=lang.hitch(this,"focusPrev");var next=lang.hitch(this,"focusNext");_506.forEach(_50a,function(code){_50c[code]=prev;});_506.forEach(_50b,function(code){_50c[code]=next;});_50c[keys.HOME]=lang.hitch(this,"focusFirstChild");_50c[keys.END]=lang.hitch(this,"focusLastChild");this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus");},startupKeyNavChildren:function(){_503.deprecated("startupKeyNavChildren() call no longer needed","","2.0");},startup:function(){this.inherited(arguments);_506.forEach(this.getChildren(),lang.hitch(this,"_startupChild"));},addChild:function(_50d,_50e){this.inherited(arguments);this._startupChild(_50d);},focus:function(){this.focusFirstChild();},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild());},focusLastChild:function(){this.focusChild(this._getLastFocusableChild());},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1));},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),true);},focusChild:function(_50f,last){if(!_50f){return;}if(this.focusedChild&&_50f!==this.focusedChild){this._onChildBlur(this.focusedChild);}_50f.set("tabIndex",this.tabIndex);_50f.focus(last?"end":"start");this._set("focusedChild",_50f);},_startupChild:function(_510){_510.set("tabIndex","-1");this.connect(_510,"_onFocus",function(){_510.set("tabIndex",this.tabIndex);});this.connect(_510,"_onBlur",function(){_510.set("tabIndex","-1");});},_onContainerFocus:function(evt){if(evt.target!==this.domNode||this.focusedChild){return;}this.focusFirstChild();_509.set(this.domNode,"tabIndex","-1");},_onBlur:function(evt){if(this.tabIndex){_509.set(this.domNode,"tabIndex",this.tabIndex);}this.focusedChild=null;this.inherited(arguments);},_onContainerKeypress:function(evt){if(evt.ctrlKey||evt.altKey){return;}var func=this._keyNavCodes[evt.charOrCode];if(func){func();_508.stop(evt);}},_onChildBlur:function(){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1);},_getNextFocusableChild:function(_511,dir){if(_511){_511=this._getSiblingOfChild(_511,dir);}var _512=this.getChildren();for(var i=0;i<_512.length;i++){if(!_511){_511=_512[(dir>0)?0:(_512.length-1)];}if(_511.isFocusable()){return _511;}_511=this._getSiblingOfChild(_511,dir);}return null;}});});},"esri/layers/SnapshotMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/SpatialReference","esri/tasks/query","esri/layers/RenderMode"],function(_513,lang,has,_514,_515,_516,_517){var _518=_513([_517],{declaredClass:"esri.layers._SnapshotMode",constructor:function(_519){this.featureLayer=_519;this._featureMap={};this._drawFeatures=lang.hitch(this,this._drawFeatures);this._queryErrorHandler=lang.hitch(this,this._queryErrorHandler);},startup:function(){if(this.featureLayer._collection){this._applyTimeFilter();}else{this._fetchAll();}},propertyChangeHandler:function(type){if(this._init){if(type){if(this.featureLayer._collection){console.log("FeatureLayer: layer created by value (from a feature collection) does not support definition expressions and time definitions. Layer id = "+this.featureLayer.id);}else{this._fetchAll();}}else{this._applyTimeFilter();}}},drawFeature:function(_51a){var _51b=this.featureLayer,_51c=_51b.objectIdField,oid=_51a.attributes[_51c];this._addFeatureIIf(oid,_51a);this._incRefCount(oid);},resume:function(){this.propertyChangeHandler(0);},refresh:function(){var _51d=this.featureLayer;if(_51d._collection){_51d._fireUpdateStart();_51d._refresh(true);_51d._fireUpdateEnd();}else{this._fetchAll();}},_getRequestId:function(_51e){var id="_"+_51e.name+_51e.layerId+_51e._ulid;return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_fetchAll:function(){var _51f=this.featureLayer;if(_51f._collection){return;}_51f._fireUpdateStart();this._clearIIf();this._sendRequest();},_sendRequest:function(){var map=this.map,_520=this.featureLayer,_521=_520.getDefinitionExpression();var _522=new _516();_522.outFields=_520._getOutFields();_522.where=_521||"1=1";_522.returnGeometry=true;_522.outSpatialReference=new _515(map.spatialReference.toJson());_522.timeExtent=_520.getTimeDefinition();_522.maxAllowableOffset=_520._maxOffset;if(_520._ts){_522._ts=(new Date()).getTime();}var _523;if(_520._usePatch){_523=this._getRequestId(_520);this._cancelPendingRequest(null,_523);}_520._task.execute(_522,this._drawFeatures,this._queryErrorHandler,_523);},_drawFeatures:function(_524){this._purgeRequests();var _525=_524.features,_526=this.featureLayer,_527=_526.objectIdField,i,len=_525.length,_528,oid;for(i=0;i<len;i++){_528=_525[i];oid=_528.attributes[_527];this._addFeatureIIf(oid,_528);this._incRefCount(oid);}this._applyTimeFilter(true);_526._fireUpdateEnd(null,_524.exceededTransferLimit?{queryLimitExceeded:true}:null);if(_524.exceededTransferLimit){_526.onQueryLimitExceeded();}},_queryErrorHandler:function(err){this._purgeRequests();var _529=this.featureLayer;_529._errorHandler(err);_529._fireUpdateEnd(err);}});if(has("extend-esri")){lang.setObject("layers._SnapshotMode",_518,_514);}return _518;});},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(dojo,lang,_52a,_52b){var _52c={};lang.setObject("dojo.colors",_52c);var _52d=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};dojo.colorFromRgb=_52a.fromRgb=function(_52e,obj){var m=_52e.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=_52b.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return _52a.fromArray(a,obj);}return _52a.fromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_52d(m1,m2,H+1/3)*256,_52d(m1,m2,H)*256,_52d(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return _52a.fromArray(a,obj);}}return null;};var _52f=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};_52a.prototype.sanitize=function(){var t=this;t.r=Math.round(_52f(t.r,0,255));t.g=Math.round(_52f(t.g,0,255));t.b=Math.round(_52f(t.b,0,255));t.a=_52f(t.a,0,1);return this;};_52c.makeGrey=_52a.makeGrey=function(g,a){return _52a.fromArray([g,g,g,a]);};lang.mixin(_52a.named,{"aliceblue":[240,248,255],"antiquewhite":[250,235,215],"aquamarine":[127,255,212],"azure":[240,255,255],"beige":[245,245,220],"bisque":[255,228,196],"blanchedalmond":[255,235,205],"blueviolet":[138,43,226],"brown":[165,42,42],"burlywood":[222,184,135],"cadetblue":[95,158,160],"chartreuse":[127,255,0],"chocolate":[210,105,30],"coral":[255,127,80],"cornflowerblue":[100,149,237],"cornsilk":[255,248,220],"crimson":[220,20,60],"cyan":[0,255,255],"darkblue":[0,0,139],"darkcyan":[0,139,139],"darkgoldenrod":[184,134,11],"darkgray":[169,169,169],"darkgreen":[0,100,0],"darkgrey":[169,169,169],"darkkhaki":[189,183,107],"darkmagenta":[139,0,139],"darkolivegreen":[85,107,47],"darkorange":[255,140,0],"darkorchid":[153,50,204],"darkred":[139,0,0],"darksalmon":[233,150,122],"darkseagreen":[143,188,143],"darkslateblue":[72,61,139],"darkslategray":[47,79,79],"darkslategrey":[47,79,79],"darkturquoise":[0,206,209],"darkviolet":[148,0,211],"deeppink":[255,20,147],"deepskyblue":[0,191,255],"dimgray":[105,105,105],"dimgrey":[105,105,105],"dodgerblue":[30,144,255],"firebrick":[178,34,34],"floralwhite":[255,250,240],"forestgreen":[34,139,34],"gainsboro":[220,220,220],"ghostwhite":[248,248,255],"gold":[255,215,0],"goldenrod":[218,165,32],"greenyellow":[173,255,47],"grey":[128,128,128],"honeydew":[240,255,240],"hotpink":[255,105,180],"indianred":[205,92,92],"indigo":[75,0,130],"ivory":[255,255,240],"khaki":[240,230,140],"lavender":[230,230,250],"lavenderblush":[255,240,245],"lawngreen":[124,252,0],"lemonchiffon":[255,250,205],"lightblue":[173,216,230],"lightcoral":[240,128,128],"lightcyan":[224,255,255],"lightgoldenrodyellow":[250,250,210],"lightgray":[211,211,211],"lightgreen":[144,238,144],"lightgrey":[211,211,211],"lightpink":[255,182,193],"lightsalmon":[255,160,122],"lightseagreen":[32,178,170],"lightskyblue":[135,206,250],"lightslategray":[119,136,153],"lightslategrey":[119,136,153],"lightsteelblue":[176,196,222],"lightyellow":[255,255,224],"limegreen":[50,205,50],"linen":[250,240,230],"magenta":[255,0,255],"mediumaquamarine":[102,205,170],"mediumblue":[0,0,205],"mediumorchid":[186,85,211],"mediumpurple":[147,112,219],"mediumseagreen":[60,179,113],"mediumslateblue":[123,104,238],"mediumspringgreen":[0,250,154],"mediumturquoise":[72,209,204],"mediumvioletred":[199,21,133],"midnightblue":[25,25,112],"mintcream":[245,255,250],"mistyrose":[255,228,225],"moccasin":[255,228,181],"navajowhite":[255,222,173],"oldlace":[253,245,230],"olivedrab":[107,142,35],"orange":[255,165,0],"orangered":[255,69,0],"orchid":[218,112,214],"palegoldenrod":[238,232,170],"palegreen":[152,251,152],"paleturquoise":[175,238,238],"palevioletred":[219,112,147],"papayawhip":[255,239,213],"peachpuff":[255,218,185],"peru":[205,133,63],"pink":[255,192,203],"plum":[221,160,221],"powderblue":[176,224,230],"rosybrown":[188,143,143],"royalblue":[65,105,225],"saddlebrown":[139,69,19],"salmon":[250,128,114],"sandybrown":[244,164,96],"seagreen":[46,139,87],"seashell":[255,245,238],"sienna":[160,82,45],"skyblue":[135,206,235],"slateblue":[106,90,205],"slategray":[112,128,144],"slategrey":[112,128,144],"snow":[255,250,250],"springgreen":[0,255,127],"steelblue":[70,130,180],"tan":[210,180,140],"thistle":[216,191,216],"tomato":[255,99,71],"turquoise":[64,224,208],"violet":[238,130,238],"wheat":[245,222,179],"whitesmoke":[245,245,245],"yellowgreen":[154,205,50]});return _52a;});},"url:esri/dijit/editing/templates/AttachmentEditor.html":"<div class=\"attachmentEditor\">\r\n    <br />\r\n    <div>\r\n        <b>${NLS_attachments}</b>\r\n        <hr />\r\n        <div dojoAttachPoint=\"_attachmentError\" style='color:red;display:none'></div>\r\n        <br />\r\n        <span dojoAttachPoint='_attachmentList' style='word-wrap: break-word;'></span>\r\n        <br><br>\r\n        <form dojoAttachPoint='_uploadForm'> ${NLS_add}:&nbsp;&nbsp;<input type='file' name='attachment' dojoAttachPoint='_uploadField' /> </form>\r\n    </div>\r\n</div>","esri/layers/SelectionMode":function(){define("esri/layers/SelectionMode",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/layers/RenderMode"],function(_530,lang,has,_531,_532){var _533=_530([_532],{declaredClass:"esri.layers._SelectionMode",constructor:function(_534){this.featureLayer=_534;this._featureMap={};},propertyChangeHandler:function(type){if(this._init&&type===0){this._applyTimeFilter();}},resume:function(){this.propertyChangeHandler(0);}});if(has("extend-esri")){lang.setObject("layers._SelectionMode",_533,_531);}return _533;});},"esri/dijit/AttributeInspector":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/sniff","dojo/_base/kernel","dojo/has","dojo/dom-style","dojo/dom-construct","esri/kernel","esri/lang","esri/domUtils","esri/layers/InheritedDomain","esri/layers/FeatureLayer","dojo/i18n!esri/nls/jsapi","dojo/fx","dojox/gfx","dijit/_Widget","dijit/_Templated","dijit/Editor","dijit/_editor/plugins/LinkDialog","dijit/_editor/plugins/TextColor","esri/dijit/editing/AttachmentEditor","esri/dijit/editing/Util","esri/tasks/query","dijit/form/DateTextBox","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/FilteringSelect","dijit/form/NumberSpinner","dijit/form/Button","dijit/form/SimpleTextarea","dijit/Tooltip","dojo/data/ItemFileReadStore","dojox/date/islamic","dojox/date/islamic/Date","dojox/date/islamic/locale","dojo/text!esri/dijit/templates/AttributeInspector.html"],function(_535,lang,_536,_537,_538,_539,has,_53a,_53b,_53c,_53d,_53e,_53f,_540,_541,fx,gfx,_542,_543,_544,_545,_546,_547,Util,_548,_549,_54a,_54b,_54c,_54d,_54e,_54f,_550,_551,_552,_553,_554,_555){var ATI=_535([_542,_543],{declaredClass:"esri.dijit.AttributeInspector",widgetsInTemplate:true,templateString:_555,_navMessage:"( ${idx} ${of} ${numFeatures} )",onUpdate:function(){},onDelete:function(){},onAttributeChange:function(){},onNext:function(){},onReset:function(){},onCancel:function(){},constructor:function(_556,_557){lang.mixin(this,_541.widgets.attributeInspector);_556=_556||{};if(!_556.featureLayer&&!_556.layerInfos){console.error("esri.AttributeInspector: please provide correct parameter in the constructor");}this._userIds={};if(_556.featureLayer&&_556.featureLayer.credential){var _558=_556.featureLayer.id;this._userIds[_558]=_556.featureLayer.credential.userId;}else{if(_556.layerInfos){var _559=_556.layerInfos;_536.forEach(_559,function(_55a){if(_55a.featureLayer){var _55b=_55a.featureLayer.id;if(_55a.featureLayer.credential){this._userIds[_55b]=_55a.featureLayer.credential.userId;}if(_55a.userId){this._userIds[_55b]=_55a.userId;}}},this);}}this._datePackage=this._getDatePackage(_556);this._layerInfos=_556.layerInfos||[{featureLayer:_556.featureLayer,options:_556.options||[]}];this._aiConnects=[];this._selection=[];this._toolTips=[];this._numFeatures=0;this._featureIdx=0;this._currentLInfo=null;this._currentFeature=null;this._hideNavButtons=_556.hideNavButtons||false;},postCreate:function(){this._initLayerInfos();this._createAttachmentEditor();this.onFirstFeature();},destroy:function(){this._destroyAttributeTable();_536.forEach(this._aiConnects,_537.disconnect);delete this._aiConnects;if(this._attachmentEditor){this._attachmentEditor.destroy();delete this._attachmentEditor;}delete this._layerInfos;this._selection=this._currentFeature=this._currentLInfo=this._attributes=this._layerInfos=null;this.inherited(arguments);},refresh:function(){this._updateSelection();},first:function(){this.onFirstFeature();},last:function(){this.onLastFeature();},next:function(){this.onNextFeature();},previous:function(){this.onPreviousFeature();},showFeature:function(_55c,_55d){if(_55d){this._createOnlyFirstTime=true;}this._updateSelection([_55c],_55d);this._updateUI();},onLayerSelectionChange:function(_55e,_55f,_560){this._createOnlyFirstTime=false;this._featureIdx=(_560===_540.SELECTION_NEW)?0:this._featureIdx;this._updateSelection();this._updateUI();},onLayerSelectionClear:function(){if(!this._selection||this._selection.length<=0){return;}this._numFeatures=0;this._featureIdx=0;this._selection=[];this._currentFeature=null;this._currentLInfo=null;this._updateUI();},onLayerEditsComplete:function(_561,adds,_562,_563){_563=_563||[];if(_563.length){var _564=this._selection;var _565=_561.featureLayer.objectIdField;_536.forEach(_563,lang.hitch(this,function(del){_536.some(_564,lang.hitch(this,function(item,idx){if(item.attributes[_565]!==del.objectId){return false;}this._selection.splice(idx,1);return true;}));}));}adds=adds||[];if(adds.length){this._selection=Util.findFeatures(adds,_561.featureLayer);this._featureIdx=0;}var _566=this._numFeatures=this._selection?this._selection.length:0;if(adds.length){var _567=_566?this._selection[this._featureIdx]:null;if(_567){var _568=_567.getLayer();var _569=_568.getEditCapabilities();if(!(_569.canCreate&&!_569.canUpdate)){this._showFeature(_567);}}}this._updateUI();},onFieldValueChange:function(_56a,_56b){_56b=(typeof _56b==="undefined")?null:_56b;var _56c=_56a.field;if(_56c.type==="esriFieldTypeDate"){_56b=(_56b&&_56b.getTime)?_56b.getTime():(_56b&&_56b.toGregorian?_56b.toGregorian().getTime():_56b);}if(this._currentFeature.attributes[_56c.name]===_56b){return;}var _56d=this._currentLInfo;var _56e=this._currentFeature;var _56f=_56c.name;if(_56f===_56d.typeIdField){var type=this._findFirst(_56d.types,"id",_56b);var _570=_56d.fieldInfos;_536.forEach(_570,function(_571){_56c=_571.field;if(!_56c||_56c.name===_56d.typeIdField){return;}var node=_571.dijit;var _572=this._setFieldDomain(node,type,_56c);if(_572&&node){this._setValue(node,_56e.attributes[_56c.name]+"");if(node.isValid()===false){this._setValue(node,null);}}},this);}this.onAttributeChange(_56e,_56f,_56b);},onDeleteBtn:function(evt){this._deleteFeature();},onNextFeature:function(evt){this._onNextFeature(1);},onPreviousFeature:function(evt){this._onNextFeature(-1);},onFirstFeature:function(evt){this._onNextFeature(this._featureIdx*-1);},onLastFeature:function(evt){this._onNextFeature((this._numFeatures-1)-this._featureIdx);},_initLayerInfos:function(){var _573=this._layerInfos;this._editorTrackingInfos={};_536.forEach(_573,this._initLayerInfo,this);},_initLayerInfo:function(_574){var _575=_574.featureLayer;this._connect(_575,"onSelectionComplete",lang.hitch(this,"onLayerSelectionChange",_574));this._connect(_575,"onSelectionClear",lang.hitch(this,"onLayerSelectionClear",_574));this._connect(_575,"onEditsComplete",lang.hitch(this,"onLayerEditsComplete",_574));_574.showAttachments=_575.hasAttachments?(_53d.isDefined(_574.showAttachments)?_574.showAttachments:true):false;_574.hideFields=_574.hideFields||[];_574.htmlFields=_574.htmlFields||[];_574.isEditable=_575.isEditable()?(_53d.isDefined(_574.isEditable)?_574.isEditable:true):false;_574.typeIdField=_575.typeIdField;_574.layerId=_575.id;_574.types=_575.types;if(!_574.showGlobalID&&_575.globalIdField){_574.hideFields.push(_575.globalIdField);}if(!_574.showObjectID){_574.hideFields.push(_575.objectIdField);}var _576=this._getFields(_574.featureLayer);if(!_576){return;}var _577=_574.fieldInfos||[];_577=_536.map(_577,function(_578){return lang.mixin({},_578);});if(!_577.length){_576=_536.filter(_576,lang.hitch(this,function(_579){return !this._isInFields(_579.name,_574.hideFields);}));_574.fieldInfos=_536.map(_576,lang.hitch(this,function(_57a){var _57b=(this._isInFields(_57a.name,_574.htmlFields)?ATI.STRING_FIELD_OPTION_RICHTEXT:ATI.STRING_FIELD_OPTION_TEXTBOX);return {"fieldName":_57a.name,"field":_57a,"stringFieldOption":_57b};}));}else{_574.fieldInfos=_536.filter(_536.map(_577,lang.hitch(this,function(_57c){var _57d=_57c.stringFieldOption||(this._isInFields(_57c.fieldName,_574.htmlFields)?ATI.STRING_FIELD_OPTION_RICHTEXT:ATI.STRING_FIELD_OPTION_TEXTBOX);return lang.mixin(_57c,{"field":this._findFirst(_576,"name",_57c.fieldName),"stringFieldOption":_57d});})),"return item.field;");}var _57e=[];if(_575.editFieldsInfo){if(_575.editFieldsInfo.creatorField){_57e.push(_575.editFieldsInfo.creatorField);}if(_575.editFieldsInfo.creationDateField){_57e.push(_575.editFieldsInfo.creationDateField);}if(_575.editFieldsInfo.editorField){_57e.push(_575.editFieldsInfo.editorField);}if(_575.editFieldsInfo.editDateField){_57e.push(_575.editFieldsInfo.editDateField);}}this._editorTrackingInfos[_575.id]=_57e;},_createAttachmentEditor:function(){this._attachmentEditor=null;var _57f=this._layerInfos;var _580=_536.filter(_57f,function(item){return item.showAttachments;});if(!_580||!_580.length){return;}this._attachmentEditor=new _547({"class":"atiAttachmentEditor"},this.attachmentEditor);this._attachmentEditor.startup();},_setCurrentLInfo:function(_581){var _582=this._currentLInfo?this._currentLInfo.featureLayer:null;var _583=_581.featureLayer;if(_582&&_582.id===_583.id&&!_582.ownershipBasedAccessControlForFeatures){var _584=_583.getEditCapabilities();if(!(_584.canCreate&&!_584.canUpdate)){return;}}this._currentLInfo=_581;this._createTable();},_updateSelection:function(_585,_586){this._selection=_585||[];var _587=this._layerInfos;_536.forEach(_587,this._getSelection,this);var _588=this._numFeatures=this._selection.length;var _589=_588?this._selection[this._featureIdx]:null;this._showFeature(_589,_586);},_getSelection:function(_58a){var _58b=_58a.featureLayer.getSelectedFeatures();this._selection=this._selection.concat(_58b);},_updateUI:function(){var _58c=this._numFeatures;var _58d=this._currentLInfo;this.layerName.innerHTML=(!_58d||_58c===0)?this.NLS_noFeaturesSelected:(_58d.featureLayer?_58d.featureLayer.name:"");_53a.set(this.attributeTable,"display",_58c?"":"none");_53a.set(this.editButtons,"display",_58c?"":"none");_53a.set(this.navButtons,"display",(!this._hideNavButtons&&(_58c>1)?"":"none"));this.navMessage.innerHTML=_53d.substitute({idx:this._featureIdx+1,of:this.NLS_of,numFeatures:this._numFeatures},this._navMessage);if(this._attachmentEditor){_53a.set(this._attachmentEditor.domNode,"display",((_58d&&_58d.showAttachments)&&_58c)?"":"none");}var _58e=((_58d&&_58d.showDeleteButton===false)||!this._canDelete)?false:true;_53a.set(this.deleteBtn.domNode,"display",_58e?"":"none");if(this.domNode.parentNode&&this.domNode.parentNode.scrollTop>0){this.domNode.parentNode.scrollTop=0;}},_onNextFeature:function(_58f){this._featureIdx+=_58f;if(this._featureIdx<0){this._featureIdx=this._numFeatures-1;}else{if(this._featureIdx>=this._numFeatures){this._featureIdx=0;}}var _590=this._selection.length?this._selection[this._featureIdx]:null;this._showFeature(_590);this._updateUI();this.onNext(_590);},_deleteFeature:function(){this.onDelete(this._currentFeature);},_showFeature:function(_591,_592){if(!_591){return;}this._currentFeature=_591;var _593=_592?_592:_591.getLayer();var _594=_593.getEditCapabilities({feature:_591,userId:this._userIds[_593.id]});this._canUpdate=_594.canUpdate;this._canDelete=_594.canDelete;var _595=this._getLInfoFromFeatureLayer(_593);if(!_595){return;}this._setCurrentLInfo(_595);var _596=_591.attributes;var type=this._findFirst(_595.types,"id",_596[_595.typeIdField]);var node,_597=null;var _598=_595.fieldInfos;_536.forEach(_598,function(_599){_597=_599.field;node=_599.dijit||null;if(!node){return;}var _59a=this._setFieldDomain(node,type,_597);var _59b=_596[_597.name];_59b=(_59b&&_59a&&_59a.codedValues&&_59a.codedValues.length)?(_59a.codedValues[_59b]?_59a.codedValues[_59b].name:_59b):_59b;if(!_53d.isDefined(_59b)){_59b="";}if(node.declaredClass==="dijit.form.DateTextBox"){_59b=(_59b==="")?null:new Date(_59b);}else{if(node.declaredClass==="dijit.form.FilteringSelect"){node._lastValueReported=null;_59b=_596[_597.name]+"";}}try{this._setValue(node,_59b);if(node.declaredClass==="dijit.form.FilteringSelect"&&node.isValid()===false){this._setValue(node,null);}}catch(error){node.set("displayedValue",this.NLS_errorInvalid,false);}},this);if(this._attachmentEditor&&_595.showAttachments){this._attachmentEditor.showAttachments(this._currentFeature);}var _59c=_593.getEditSummary(_591);if(_59c){this.editorTrackingInfoDiv.innerHTML=_59c;_53e.show(this.editorTrackingInfoDiv);}else{_53e.hide(this.editorTrackingInfoDiv);}},_setFieldDomain:function(node,type,_59d){if(!node){return null;}var _59e=_59d.domain;if(type&&type.domains){if(type.domains[_59d.name]&&type.domains[_59d.name] instanceof _53f===false){_59e=type.domains[_59d.name];}}if(!_59e){return null;}if(_59e.codedValues&&_59e.codedValues.length>0){node.set("store",this._toStore(_536.map(_59e.codedValues,function(item){return {id:item.code+="",name:item.name};})));this._setValue(node,_59e.codedValues[0].code);}else{node.constraints={min:_53d.isDefined(_59e.minValue)?_59e.minValue:Number.MIN_VALUE,max:_53d.isDefined(_59e.maxValue)?_59e.maxValue:Number.MAX_VALUE};this._setValue(node,node.constraints.min);}return _59e;},_setValue:function(node,_59f){if(!node.set){return;}node._onChangeActive=false;node.set("value",_59f,true);node._onChangeActive=true;},_getFields:function(_5a0){var _5a1=_5a0._getOutFields();if(!_5a1){return null;}var _5a2=_5a0.fields;return (_5a1=="*")?_5a2:_536.filter(_536.map(_5a1,lang.hitch(this,"_findFirst",_5a2,"name")),_53d.isDefined);},_isInFields:function(_5a3,_5a4){if(!_5a3||!_5a4&&!_5a4.length){return false;}return _536.some(_5a4,function(name){return name.toLowerCase()===_5a3.toLowerCase();});},_findFirst:function(_5a5,_5a6,_5a7){var _5a8=_536.filter(_5a5,function(item){return item.hasOwnProperty(_5a6)&&item[_5a6]===_5a7;});return (_5a8&&_5a8.length)?_5a8[0]:null;},_getLInfoFromFeatureLayer:function(_5a9){var _5aa=_5a9?_5a9.id:null;return this._findFirst(this._layerInfos,"layerId",_5aa);},_createTable:function(){this._destroyAttributeTable();this.attributeTable.innerHTML="";this._attributes=_53b.create("table",{cellspacing:"0",cellpadding:"0"},this.attributeTable);var _5ab=_53b.create("tbody",null,this._attributes);var _5ac=this._currentFeature;var _5ad=this._currentLInfo;var type=this._findFirst(_5ad.types,"id",_5ac.attributes[_5ad.typeIdField]);var _5ae=_5ad.fieldInfos;_536.forEach(_5ae,lang.hitch(this,"_createField",type,_5ab),this);this._createOnlyFirstTime=false;},_createField:function(type,_5af,_5b0){var _5b1=this._currentLInfo;var _5b2=_5b0.field;if(this._isInFields(_5b2.name,_5b1.hideFields)){return;}if(this._isInFields(_5b2.name,this._editorTrackingInfos[_5b1.featureLayer.id])){return;}var node=_53b.create("tr",null,_5af);var td=_53b.create("td",{innerHTML:_5b0.label||_5b2.alias||_5b2.name,"class":"atiLabel"},node);td=_53b.create("td",null,node);var _5b3=null;var _5b4=false;if(_5b0.customField){_53b.place(_5b0.customField.domNode||_5b0.customField,_53b.create("div",null,td),"first");_5b3=_5b0.customField;}else{if(_5b1.isEditable===false||_5b2.editable===false||_5b0.isEditable===false||_5b2.type==="esriFieldTypeOID"||_5b2.type==="esriFieldTypeGlobalID"||(!this._canUpdate&&!this._createOnlyFirstTime)){_5b4=true;}}if(!_5b3&&(_5b1.typeIdField&&_5b2.name.toLowerCase()==_5b1.typeIdField.toLowerCase())){_5b3=this._createTypeField(_5b2,_5b0,td);}else{if(!_5b3){_5b3=this._createDomainField(_5b2,_5b0,type,td);}}if(!_5b3){switch(_5b2.type){case "esriFieldTypeString":_5b3=this._createStringField(_5b2,_5b0,td);break;case "esriFieldTypeDate":_5b3=this._createDateField(_5b2,_5b0,td);break;case "esriFieldTypeInteger":case "esriFieldTypeSmallInteger":_5b3=this._createIntField(_5b2,_5b0,td);break;case "esriFieldTypeSingle":case "esriFieldTypeDouble":_5b3=this._createFltField(_5b2,_5b0,td);break;default:_5b3=this._createStringField(_5b2,_5b0,td);break;}}if(_5b0.tooltip&&_5b0.tooltip.length){this._toolTips.push(new _550({connectId:[_5b3.id],label:_5b0.tooltip}));}_5b3.onChange=lang.hitch(this,"onFieldValueChange",_5b0);_5b3.set("disabled",_5b4);_5b0.dijit=_5b3;},_createTypeField:function(_5b5,_5b6,node){return new _54c({"class":"atiField",name:_5b5.alias||_5b5.name,store:this._toStore(_536.map(this._currentLInfo.types,function(item){return {id:item.id,name:item.name};})),searchAttr:"name"},_53b.create("div",null,node));},_createDomainField:function(_5b7,_5b8,type,node){var _5b9=_5b7.domain;if(type&&type.domains){if(type.domains[_5b7.name]&&type.domains[_5b7.name] instanceof _53f===false){_5b9=type.domains[_5b7.name];}}if(!_5b9){return null;}if(_5b9.codedValues){return new _54c({"class":"atiField",name:_5b7.alias||_5b7.name,searchAttr:"name",required:_5b7.nullable||false},_53b.create("div",null,node));}else{return new _54d({"class":"atiField"},_53b.create("div",null,node));}},_createStringField:function(_5ba,_5bb,node){var _5bc={"class":"atiField",trim:true,maxLength:_5ba.length};if(_5bb.stringFieldOption===ATI.STRING_FIELD_OPTION_TEXTAREA){_5bc["class"]+=" atiTextAreaField";return new _54f(_5bc,_53b.create("div",null,node));}else{if(_5bb.stringFieldOption===ATI.STRING_FIELD_OPTION_RICHTEXT){_5bc["class"]+=" atiRichTextField";_5bc.height="100%";_5bc.width="100%";_5bc.plugins=_5bb.richTextPlugins||["bold","italic","underline","foreColor","hiliteColor","|","justifyLeft","justifyCenter","justifyRight","justifyFull","|","insertOrderedList","insertUnorderedList","indent","outdent","|","createLink"];return new _544(_5bc,_53b.create("div",null,node));}else{return new _54a(_5bc,_53b.create("div",null,node));}}},_createDateField:function(_5bd,_5be,node){var _5bf={"class":"atiField","trim":true};if(this._datePackage){_5bf.datePackage=this._datePackage;}return new _549(_5bf,_53b.create("div",null,node));},_createIntField:function(_5c0,_5c1,node){return new _54b({"class":"atiField",constraints:{places:0},invalidMessage:this.NLS_validationInt,trim:true},_53b.create("div",null,node));},_createFltField:function(_5c2,_5c3,node){return new _54b({"class":"atiField",trim:true,invalidMessage:this.NLS_validationFlt},_53b.create("div",null,node));},_toStore:function(_5c4){return new _551({data:{identifier:"id",label:"name",items:_5c4}});},_connect:function(node,evt,func){this._aiConnects.push(_537.connect(node,evt,func));},_getDatePackage:function(_5c5){if(_5c5.datePackage===null){return null;}else{if(_5c5.datePackage){return _5c5.datePackage;}else{if(_539.locale==="ar"){return "dojox.date.islamic";}}}return null;},_destroyAttributeTable:function(){var _5c6=this._layerInfos;_536.forEach(_5c6,function(_5c7){var _5c8=_5c7.fieldInfos;_536.forEach(_5c8,function(_5c9){var _5ca=_5c9.dijit;if(_5ca){_5ca._onChangeHandle=null;if(_5c9.customField){return;}if(_5ca.destroyRecursive){_5ca.destroyRecursive();}else{if(_5ca.destroy){_5ca.destroy();}}}_5c9.dijit=null;},this);},this);var _5cb=this._toolTips;_536.forEach(_5cb,function(item){item.destroy();delete item;});this._toolTips=[];if(this._attributes){_53b.destroy(this._attributes);}}});lang.mixin(ATI,{STRING_FIELD_OPTION_RICHTEXT:"richtext",STRING_FIELD_OPTION_TEXTAREA:"textarea",STRING_FIELD_OPTION_TEXTBOX:"textbox"});if(has("extend-esri")){lang.setObject("dijit.AttributeInspector",ATI,_53c);}return ATI;});},"dijit/form/_ListBase":function(){define("dijit/form/_ListBase",["dojo/_base/declare","dojo/on","dojo/window"],function(_5cc,on,_5cd){return _5cc("dijit.form._ListBase",null,{selected:null,_listConnect:function(_5ce,_5cf){var self=this;return self.own(on(self.containerNode,on.selector(function(_5d0,_5d1,_5d2){return _5d0.parentNode==_5d2;},_5ce),function(evt){evt.preventDefault();self[_5cf](evt,this);}));},selectFirstNode:function(){var _5d3=this.containerNode.firstChild;while(_5d3&&_5d3.style.display=="none"){_5d3=_5d3.nextSibling;}this._setSelectedAttr(_5d3);},selectLastNode:function(){var last=this.containerNode.lastChild;while(last&&last.style.display=="none"){last=last.previousSibling;}this._setSelectedAttr(last);},selectNextNode:function(){var _5d4=this.selected;if(!_5d4){this.selectFirstNode();}else{var next=_5d4.nextSibling;while(next&&next.style.display=="none"){next=next.nextSibling;}if(!next){this.selectFirstNode();}else{this._setSelectedAttr(next);}}},selectPreviousNode:function(){var _5d5=this.selected;if(!_5d5){this.selectLastNode();}else{var prev=_5d5.previousSibling;while(prev&&prev.style.display=="none"){prev=prev.previousSibling;}if(!prev){this.selectLastNode();}else{this._setSelectedAttr(prev);}}},_setSelectedAttr:function(node){if(this.selected!=node){var _5d6=this.selected;if(_5d6){this.onDeselect(_5d6);this.selected=null;}if(node){this.selected=node;_5cd.scrollIntoView(node);this.onSelect(node);}}else{if(node){this.onSelect(node);}}}});});},"dijit/ToolbarSeparator":function(){define("dijit/ToolbarSeparator",["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],function(_5d7,dom,_5d8,_5d9){return _5d7("dijit.ToolbarSeparator",[_5d8,_5d9],{templateString:"<div class=\"dijitToolbarSeparator dijitInline\" role=\"presentation\"></div>",buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});});},"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"button presentation\" aria-hidden=\"true\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n","dojo/data/ItemFileReadStore":function(){define(["../_base/kernel","../_base/lang","../_base/declare","../_base/array","../_base/xhr","../Evented","./util/filter","./util/simpleFetch","../date/stamp"],function(_5da,lang,_5db,_5dc,xhr,_5dd,_5de,_5df,_5e0){var _5e1=_5db("dojo.data.ItemFileReadStore",[_5dd],{constructor:function(_5e2){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=_5e2.url;this._ccUrl=_5e2.url;this.url=_5e2.url;this._jsonData=_5e2.data;this.data=null;this._datatypeMap=_5e2.typeMap||{};if(!this._datatypeMap["Date"]){this._datatypeMap["Date"]={type:Date,deserialize:function(_5e3){return _5e0.fromISOString(_5e3);}};}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(_5e2.urlPreventCache!==undefined){this.urlPreventCache=_5e2.urlPreventCache?true:false;}if(_5e2.hierarchical!==undefined){this.hierarchical=_5e2.hierarchical?true:false;}if(_5e2.clearOnClose){this.clearOnClose=true;}if("failOk" in _5e2){this.failOk=_5e2.failOk?true:false;}},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error(this.declaredClass+": Invalid item argument.");}},_assertIsAttribute:function(_5e4){if(typeof _5e4!=="string"){throw new Error(this.declaredClass+": Invalid attribute argument.");}},getValue:function(item,_5e5,_5e6){var _5e7=this.getValues(item,_5e5);return (_5e7.length>0)?_5e7[0]:_5e6;},getValues:function(item,_5e8){this._assertIsItem(item);this._assertIsAttribute(_5e8);return (item[_5e8]||[]).slice(0);},getAttributes:function(item){this._assertIsItem(item);var _5e9=[];for(var key in item){if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){_5e9.push(key);}}return _5e9;},hasAttribute:function(item,_5ea){this._assertIsItem(item);this._assertIsAttribute(_5ea);return (_5ea in item);},containsValue:function(item,_5eb,_5ec){var _5ed=undefined;if(typeof _5ec==="string"){_5ed=_5de.patternToRegExp(_5ec,false);}return this._containsValue(item,_5eb,_5ec,_5ed);},_containsValue:function(item,_5ee,_5ef,_5f0){return _5dc.some(this.getValues(item,_5ee),function(_5f1){if(_5f1!==null&&!lang.isObject(_5f1)&&_5f0){if(_5f1.toString().match(_5f0)){return true;}}else{if(_5ef===_5f1){return true;}}});},isItem:function(_5f2){if(_5f2&&_5f2[this._storeRefPropName]===this){if(this._arrayOfAllItems[_5f2[this._itemNumPropName]]===_5f2){return true;}}return false;},isItemLoaded:function(_5f3){return this.isItem(_5f3);},loadItem:function(_5f4){this._assertIsItem(_5f4.item);},getFeatures:function(){return this._features;},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},filter:function(_5f5,_5f6,_5f7){var _5f8=[],i,key;if(_5f5.query){var _5f9,_5fa=_5f5.queryOptions?_5f5.queryOptions.ignoreCase:false;var _5fb={};for(key in _5f5.query){_5f9=_5f5.query[key];if(typeof _5f9==="string"){_5fb[key]=_5de.patternToRegExp(_5f9,_5fa);}else{if(_5f9 instanceof RegExp){_5fb[key]=_5f9;}}}for(i=0;i<_5f6.length;++i){var _5fc=true;var _5fd=_5f6[i];if(_5fd===null){_5fc=false;}else{for(key in _5f5.query){_5f9=_5f5.query[key];if(!this._containsValue(_5fd,key,_5f9,_5fb[key])){_5fc=false;}}}if(_5fc){_5f8.push(_5fd);}}_5f7(_5f8,_5f5);}else{for(i=0;i<_5f6.length;++i){var item=_5f6[i];if(item!==null){_5f8.push(item);}}_5f7(_5f8,_5f5);}},_fetchItems:function(_5fe,_5ff,_600){var self=this;if(this._loadFinished){this.filter(_5fe,this._getItemsArray(_5fe.queryOptions),_5ff);}else{if(this._jsonFileUrl!==this._ccUrl){_5da.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_5fe,filter:lang.hitch(self,"filter"),findCallback:lang.hitch(self,_5ff)});}else{this._loadInProgress=true;var _601={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _602=xhr.get(_601);_602.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;self.filter(_5fe,self._getItemsArray(_5fe.queryOptions),_5ff);self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_600(e,_5fe);}});_602.addErrback(function(_603){self._loadInProgress=false;_600(_603,_5fe);});var _604=null;if(_5fe.abort){_604=_5fe.abort;}_5fe.abort=function(){var df=_602;if(df&&df.fired===-1){df.cancel();df=null;}if(_604){_604.call(_5fe);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;self.filter(_5fe,this._getItemsArray(_5fe.queryOptions),_5ff);}catch(e){_600(e,_5fe);}}else{_600(new Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),_5fe);}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _605=this._queuedFetches[i],_606=_605.args,_607=_605.filter,_608=_605.findCallback;if(_607){_607(_606,this._getItemsArray(_606.queryOptions),_608);}else{this.fetchItemByIdentity(_606);}}this._queuedFetches=[];}},_getItemsArray:function(_609){if(_609&&_609.deep){return this._arrayOfAllItems;}return this._arrayOfTopLevelItems;},close:function(_60a){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if(((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null))&&this.data==null){console.debug(this.declaredClass+": WARNING!  Data reload "+" information has not been provided."+"  Please set 'url' or 'data' to the appropriate value before"+" the next fetch");}this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[];}},_getItemsFromLoadedData:function(_60b){var _60c=false,self=this;function _60d(_60e){return (_60e!==null)&&(typeof _60e==="object")&&(!lang.isArray(_60e)||_60c)&&(!lang.isFunction(_60e))&&(_60e.constructor==Object||lang.isArray(_60e))&&(typeof _60e._reference==="undefined")&&(typeof _60e._type==="undefined")&&(typeof _60e._value==="undefined")&&self.hierarchical;};function _60f(_610){self._arrayOfAllItems.push(_610);for(var _611 in _610){var _612=_610[_611];if(_612){if(lang.isArray(_612)){var _613=_612;for(var k=0;k<_613.length;++k){var _614=_613[k];if(_60d(_614)){_60f(_614);}}}else{if(_60d(_612)){_60f(_612);}}}}};this._labelAttr=_60b.label;var i,item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=_60b.items;for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(lang.isArray(item)){_60c=true;}_60f(item);item[this._rootItemPropName]=true;}var _615={},key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var _616=item[key];if(_616!==null){if(!lang.isArray(_616)){item[key]=[_616];}}else{item[key]=[null];}}_615[key]=key;}}while(_615[this._storeRefPropName]){this._storeRefPropName+="_";}while(_615[this._itemNumPropName]){this._itemNumPropName+="_";}while(_615[this._reverseRefMap]){this._reverseRefMap+="_";}var _617;var _618=_60b.identifier;if(_618){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=_618;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];_617=item[_618];var _619=_617[0];if(!Object.hasOwnProperty.call(this._itemsByIdentity,_619)){this._itemsByIdentity[_619]=item;}else{if(this._jsonFileUrl){throw new Error(this.declaredClass+":  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_618+"].  Value collided: ["+_619+"]");}else{if(this._jsonData){throw new Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_618+"].  Value collided: ["+_619+"]");}}}}}else{this._features["dojo.data.api.Identity"]=Number;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){_617=item[key];for(var j=0;j<_617.length;++j){_616=_617[j];if(_616!==null&&typeof _616=="object"){if(("_type" in _616)&&("_value" in _616)){var type=_616._type;var _61a=this._datatypeMap[type];if(!_61a){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");}else{if(lang.isFunction(_61a)){_617[j]=new _61a(_616._value);}else{if(lang.isFunction(_61a.deserialize)){_617[j]=_61a.deserialize(_616._value);}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}}}}if(_616._reference){var _61b=_616._reference;if(!lang.isObject(_61b)){_617[j]=this._getItemByIdentity(_61b);}else{for(var k=0;k<this._arrayOfAllItems.length;++k){var _61c=this._arrayOfAllItems[k],_61d=true;for(var _61e in _61b){if(_61c[_61e]!=_61b[_61e]){_61d=false;}}if(_61d){_617[j]=_61c;}}}if(this.referenceIntegrity){var _61f=_617[j];if(this.isItem(_61f)){this._addReferenceToMap(_61f,item,key);}}}else{if(this.isItem(_616)){if(this.referenceIntegrity){this._addReferenceToMap(_616,item,key);}}}}}}}},_addReferenceToMap:function(_620,_621,_622){},getIdentity:function(item){var _623=this._features["dojo.data.api.Identity"];if(_623===Number){return item[this._itemNumPropName];}else{var _624=item[_623];if(_624){return _624[0];}}return null;},fetchItemByIdentity:function(_625){var item,_626;if(!this._loadFinished){var self=this;if(this._jsonFileUrl!==this._ccUrl){_5da.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_625});}else{this._loadInProgress=true;var _627={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _628=xhr.get(_627);_628.addCallback(function(data){var _629=_625.scope?_625.scope:_5da.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(_625.identity);if(_625.onItem){_625.onItem.call(_629,item);}self._handleQueuedFetches();}catch(error){self._loadInProgress=false;if(_625.onError){_625.onError.call(_629,error);}}});_628.addErrback(function(_62a){self._loadInProgress=false;if(_625.onError){var _62b=_625.scope?_625.scope:_5da.global;_625.onError.call(_62b,_62a);}});}}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(_625.identity);if(_625.onItem){_626=_625.scope?_625.scope:_5da.global;_625.onItem.call(_626,item);}}}}else{item=this._getItemByIdentity(_625.identity);if(_625.onItem){_626=_625.scope?_625.scope:_5da.global;_625.onItem.call(_626,item);}}},_getItemByIdentity:function(_62c){var item=null;if(this._itemsByIdentity){if(Object.hasOwnProperty.call(this._itemsByIdentity,_62c)){item=this._itemsByIdentity[_62c];}}else{if(Object.hasOwnProperty.call(this._arrayOfAllItems,_62c)){item=this._arrayOfAllItems[_62c];}}if(item===undefined){item=null;}return item;},getIdentityAttributes:function(item){var _62d=this._features["dojo.data.api.Identity"];if(_62d===Number){return null;}else{return [_62d];}},_forceLoad:function(){var self=this;if(this._jsonFileUrl!==this._ccUrl){_5da.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){var _62e={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};var _62f=xhr.get(_62e);_62f.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true;}else{if(self._loadInProgress){throw new Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}}}catch(e){console.log(e);throw e;}});_62f.addErrback(function(_630){throw _630;});}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;}}}});lang.extend(_5e1,_5df);return _5e1;});},"dijit/_editor/selection":function(){define("dijit/_editor/selection",["dojo/dom","dojo/_base/lang","dojo/sniff","dojo/_base/window","../main"],function(dom,lang,has,win,_631){var _632={getType:function(){if(win.doc.getSelection){var _633="text";var oSel;try{oSel=win.global.getSelection();}catch(e){}if(oSel&&oSel.rangeCount==1){var _634=oSel.getRangeAt(0);if((_634.startContainer==_634.endContainer)&&((_634.endOffset-_634.startOffset)==1)&&(_634.startContainer.nodeType!=3)){_633="control";}}return _633;}else{return win.doc.selection.type.toLowerCase();}},getSelectedText:function(){if(win.doc.getSelection){var _635=win.global.getSelection();return _635?_635.toString():"";}else{if(_631._editor.selection.getType()=="control"){return null;}return win.doc.selection.createRange().text;}},getSelectedHtml:function(){if(win.doc.getSelection){var _636=win.global.getSelection();if(_636&&_636.rangeCount){var i;var html="";for(i=0;i<_636.rangeCount;i++){var frag=_636.getRangeAt(i).cloneContents();var div=win.doc.createElement("div");div.appendChild(frag);html+=div.innerHTML;}return html;}return null;}else{if(_631._editor.selection.getType()=="control"){return null;}return win.doc.selection.createRange().htmlText;}},getSelectedElement:function(){if(_631._editor.selection.getType()=="control"){if(win.doc.getSelection){var _637=win.global.getSelection();return _637.anchorNode.childNodes[_637.anchorOffset];}else{var _638=win.doc.selection.createRange();if(_638&&_638.item){return win.doc.selection.createRange().item(0);}}}return null;},getParentElement:function(){if(_631._editor.selection.getType()=="control"){var p=this.getSelectedElement();if(p){return p.parentNode;}}else{if(win.doc.getSelection){var _639=win.global.getSelection();if(_639){var node=_639.anchorNode;while(node&&(node.nodeType!=1)){node=node.parentNode;}return node;}}else{var r=win.doc.selection.createRange();r.collapse(true);return r.parentElement();}}return null;},hasAncestorElement:function(_63a){return this.getAncestorElement.apply(this,arguments)!=null;},getAncestorElement:function(_63b){var node=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(node,arguments);},isTag:function(node,tags){if(node&&node.tagName){var _63c=node.tagName.toLowerCase();for(var i=0;i<tags.length;i++){var _63d=String(tags[i]).toLowerCase();if(_63c==_63d){return _63d;}}}return "";},getParentOfType:function(node,tags){while(node){if(this.isTag(node,tags).length){return node;}node=node.parentNode;}return null;},collapse:function(_63e){if(win.doc.getSelection){var _63f=win.global.getSelection();if(_63f.removeAllRanges){if(_63e){_63f.collapseToStart();}else{_63f.collapseToEnd();}}else{_63f.collapse(_63e);}}else{var _640=win.doc.selection.createRange();_640.collapse(_63e);_640.select();}},remove:function(){var sel=win.doc.selection;if(win.doc.getSelection){sel=win.global.getSelection();sel.deleteFromDocument();return sel;}else{if(sel.type.toLowerCase()!="none"){sel.clear();}return sel;}},selectElementChildren:function(_641,_642){var doc=win.doc;var _643;_641=dom.byId(_641);if(win.doc.getSelection){var _644=win.global.getSelection();if(has("opera")){if(_644.rangeCount){_643=_644.getRangeAt(0);}else{_643=doc.createRange();}_643.setStart(_641,0);_643.setEnd(_641,(_641.nodeType==3)?_641.length:_641.childNodes.length);_644.addRange(_643);}else{_644.selectAllChildren(_641);}}else{_643=_641.ownerDocument.body.createTextRange();_643.moveToElementText(_641);if(!_642){try{_643.select();}catch(e){}}}},selectElement:function(_645,_646){var _647;_645=dom.byId(_645);var doc=_645.ownerDocument;var _648=win.global;if(doc.getSelection){var _649=_648.getSelection();_647=doc.createRange();if(_649.removeAllRanges){if(has("opera")){if(_649.getRangeAt(0)){_647=_649.getRangeAt(0);}}_647.selectNode(_645);_649.removeAllRanges();_649.addRange(_647);}}else{try{var tg=_645.tagName?_645.tagName.toLowerCase():"";if(tg==="img"||tg==="table"){_647=win.body(doc).createControlRange();}else{_647=win.body(doc).createRange();}_647.addElement(_645);if(!_646){_647.select();}}catch(e){this.selectElementChildren(_645,_646);}}},inSelection:function(node){if(node){var _64a;var doc=win.doc;var _64b;if(win.doc.getSelection){var sel=win.global.getSelection();if(sel&&sel.rangeCount>0){_64b=sel.getRangeAt(0);}if(_64b&&_64b.compareBoundaryPoints&&doc.createRange){try{_64a=doc.createRange();_64a.setStart(node,0);if(_64b.compareBoundaryPoints(_64b.START_TO_END,_64a)===1){return true;}}catch(e){}}}else{_64b=doc.selection.createRange();try{_64a=node.ownerDocument.body.createControlRange();if(_64a){_64a.addElement(node);}}catch(e1){try{_64a=node.ownerDocument.body.createTextRange();_64a.moveToElementText(node);}catch(e2){}}if(_64b&&_64a){if(_64b.compareEndPoints("EndToStart",_64a)===1){return true;}}}}return false;}};lang.setObject("dijit._editor.selection",_632);return _632;});},"esri/dijit/editing/AttachmentEditor":function(){define(["require","dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/_base/kernel","dojo/has","dojo/query","dojo/io-query","dojo/dom-attr","dijit/_Widget","dijit/_Templated","esri/kernel","esri/lang","esri/domUtils","dojo/text!esri/dijit/editing/templates/AttachmentEditor.html","dojo/i18n!esri/nls/jsapi","dojo/NodeList-dom"],function(_64c,_64d,lang,_64e,_64f,_650,has,_651,_652,_653,_654,_655,_656,_657,_658,_659,_65a){var AE=_64d([_654,_655],{declaredClass:"esri.dijit.editing.AttachmentEditor",widgetsInTemplate:true,templateString:_659,basePath:_64c.toUrl("esri/dijit/editing")+"/",_listHtml:"<span id='node_${oid}_${attid}'><a href='${href}' target='_blank'>${name}</a>",_deleteBtnHtml:"(<span style='cursor:pointer;color:red;font-weight:bold;' class='deleteAttachment' id='${attid}');'>X</span>)",_endHtml:"<br/></span>",_aeConnects:[],_layerEditingCapChecked:{},_layerEditingCap:{},constructor:function(_65b,_65c){lang.mixin(this,_65a.widgets.attachmentEditor);},startup:function(){this.inherited(arguments);this._uploadField_connect=_64e.connect(this._uploadField,"onchange",this,"_addAttachment");this._uploadFieldFocus_connect=_64e.connect(this._uploadField,"onfocus",lang.hitch(this,function(e){_658.hide(this._attachmentError);}));},destroy:function(){_64f.forEach(this._aeConnects,_64e.disconnect);_64e.disconnect(this._uploadField_connect);_64e.disconnect(this._uploadFieldFocus_connect);this.inherited(arguments);},showAttachments:function(_65d,_65e){var list=this._attachmentList;list.innerHTML=this.NLS_none;this._uploadField.value="";_64f.forEach(this.domNode.children,function(_65f,idx){_658.show(_65f);});_658.hide(this._attachmentError);if(!_65d){return;}this._featureLayer=_65d.getLayer()||_65e;if(!this._featureLayer){return;}if(this._featureLayer.declaredClass!=="esri.layers.FeatureLayer"||!this._featureLayer.getEditCapabilities){_658.hide(this._uploadForm);_64f.forEach(this.domNode.children,function(_660,idx){_658.hide(_660);});return;}this._currentLayerId=this._featureLayer.id;if(!this._layerEditingCapChecked[this._currentLayerId]){this._layerEditingCap[this._currentLayerId]=this._featureLayer.getEditCapabilities();this._layerEditingCapChecked[this._currentLayerId]=true;}this._featureCanUpdate=this._featureLayer.getEditCapabilities({feature:_65d}).canUpdate;this._oid=_65d.attributes[this._featureLayer.objectIdField];this._getAttachments(_65d);},_getAttachments:function(_661){if(!this._featureLayer||!this._featureLayer.queryAttachmentInfos){return;}this._featureLayer.queryAttachmentInfos(this._oid,lang.hitch(this,"_onQueryAttachmentInfosComplete"));},_addAttachment:function(){_658.hide(this._attachmentError);if(!this._featureLayer||!this._featureLayer.addAttachment){return;}this._featureLayer.addAttachment(this._oid,this._uploadForm,lang.hitch(this,"_onAddAttachmentComplete"),lang.hitch(this,"_onAddAttachmentError"));},_deleteAttachment:function(oid,_662){this._featureLayer.deleteAttachments(oid,[_662],lang.hitch(this,"_onDeleteAttachmentComplete"));},_onQueryAttachmentInfosComplete:function(_663){var _664=this._listHtml+this._deleteBtnHtml+this._endHtml;this._uploadForm.style.display="block";if((!this._featureCanUpdate&&this._layerEditingCap[this._currentLayerId].canUpdate)||(!this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate)){_664=this._listHtml+this._endHtml;this._uploadForm.style.display="none";}else{if(this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate){_664=this._listHtml+this._endHtml;}}var list=this._attachmentList,_665=_64f.map(_663,lang.hitch(this,function(info){return _657.substitute({href:info.url,name:info.name,oid:info.objectId,attid:info.id},_664);}));list.innerHTML=_665.join("")||this.NLS_none;this._updateConnects();},_onAddAttachmentComplete:function(_666){var _667=this._uploadField;var _668=_667.value;var pos=_668.lastIndexOf("\\");if(pos>-1){_668=_668.substring(pos+1,_668.length);}_668=_668.replace(/\ /g,"_");var list=this._attachmentList,_669=_652.objectToQuery({gdbVersion:this._featureLayer.gdbVersion,token:this._featureLayer._getToken()});var _66a=this._listHtml+this._deleteBtnHtml+this._endHtml;if(this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate){_66a=this._listHtml+this._endHtml;}var link=_657.substitute({href:this._featureLayer._url.path+"/"+_666.objectId+"/attachments/"+_666.attachmentId+(_669?("?"+_669):""),name:_668,oid:_666.objectId,attid:_666.attachmentId},_66a);list.innerHTML=list.innerHTML==this.NLS_none?link:(list.innerHTML+link);this._updateConnects();_667.value="";},_onAddAttachmentError:function(_66b){if(_66b&&_657.isDefined(_66b.code)){var _66c,_66d=this._attachmentError;if(_66b.code===400){_66c=this.NLS_fileNotSupported;}else{_66c=_66b.message||(_66b.details&&_66b.details.length&&_66b.details[0]);}_653.set(_66d,"innerHTML",(_66c||this.NLS_error));_658.show(_66d);}},_onDeleteAttachmentComplete:function(_66e){var _66f=_64f.every(_66e,function(_670){return _670.success;}),list=this._attachmentList;if(_66f){_650.query("#node_"+_66e[0].objectId+"_"+_66e[0].attachmentId).orphan();if(!list.children||!list.children.length){list.innerHTML=this.NLS_none;}}},_updateConnects:function(){_64f.forEach(this._aeConnects,_64e.disconnect);_650.query(".deleteAttachment").forEach(function(item){this._aeConnects.push(_64e.connect(item,"onclick",lang.hitch(this,"_deleteAttachment",this._oid,item.id)));},this);}});if(has("extend-esri")){lang.setObject("dijit.editing.AttachmentEditor",AE,_656);}return AE;});},"dijit/_editor/plugins/EnterKeyHandling":function(){define("dijit/_editor/plugins/EnterKeyHandling",["dojo/_base/declare","dojo/dom-construct","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/_base/window","dojo/window","../_Plugin","../RichText","../range","../../_base/focus"],function(_671,_672,_673,keys,lang,has,win,_674,_675,_676,_677,_678){return _671("dijit._editor.plugins.EnterKeyHandling",_675,{blockNodeForEnter:"BR",constructor:function(args){if(args){if("blockNodeForEnter" in args){args.blockNodeForEnter=args.blockNodeForEnter.toUpperCase();}lang.mixin(this,args);}},setEditor:function(_679){if(this.editor===_679){return;}this.editor=_679;if(this.blockNodeForEnter=="BR"){this.editor.customUndo=true;_679.onLoadDeferred.then(lang.hitch(this,function(d){this.connect(_679.document,"onkeypress",function(e){if(e.charOrCode==keys.ENTER){var ne=lang.mixin({},e);ne.shiftKey=true;if(!this.handleEnterKey(ne)){_673.stop(e);}}});if(has("ie")>=9){this.connect(_679.document,"onpaste",function(e){setTimeout(dojo.hitch(this,function(){var r=this.editor.document.selection.createRange();r.move("character",-1);r.select();r.move("character",1);r.select();}),0);});}return d;}));}else{if(this.blockNodeForEnter){var h=lang.hitch(this,this.handleEnterKey);_679.addKeyHandler(13,0,0,h);_679.addKeyHandler(13,0,1,h);this.connect(this.editor,"onKeyPressed","onKeyPressed");}}},onKeyPressed:function(){if(this._checkListLater){if(win.withGlobal(this.editor.window,"isCollapsed",_678)){var _67a=this.editor._sCall("getAncestorElement",["LI"]);if(!_67a){_676.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);var _67b=this.editor._sCall("getAncestorElement",[this.blockNodeForEnter]);if(_67b){_67b.innerHTML=this.bogusHtmlContent;if(has("ie")<=9){var r=this.editor.document.selection.createRange();r.move("character",-1);r.select();}}else{console.error("onKeyPressed: Cannot find the new block node");}}else{if(has("mozilla")){if(_67a.parentNode.parentNode.nodeName=="LI"){_67a=_67a.parentNode.parentNode;}}var fc=_67a.firstChild;if(fc&&fc.nodeType==1&&(fc.nodeName=="UL"||fc.nodeName=="OL")){_67a.insertBefore(fc.ownerDocument.createTextNode(""),fc);var _67c=_677.create(this.editor.window);_67c.setStart(_67a.firstChild,0);var _67d=_677.getSelection(this.editor.window,true);_67d.removeAllRanges();_67d.addRange(_67c);}}}this._checkListLater=false;}if(this._pressedEnterInBlock){if(this._pressedEnterInBlock.previousSibling){this.removeTrailingBr(this._pressedEnterInBlock.previousSibling);}delete this._pressedEnterInBlock;}},bogusHtmlContent:"&#160;",blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(e){var _67e,_67f,_680,_681,_682,_683,doc=this.editor.document,br,rs,txt;if(e.shiftKey){var _684=this.editor._sCall("getParentElement",[]);var _685=_677.getAncestor(_684,this.blockNodes);if(_685){if(_685.tagName=="LI"){return true;}_67e=_677.getSelection(this.editor.window);_67f=_67e.getRangeAt(0);if(!_67f.collapsed){_67f.deleteContents();_67e=_677.getSelection(this.editor.window);_67f=_67e.getRangeAt(0);}if(_677.atBeginningOfContainer(_685,_67f.startContainer,_67f.startOffset)){br=doc.createElement("br");_680=_677.create(this.editor.window);_685.insertBefore(br,_685.firstChild);_680.setStartAfter(br);_67e.removeAllRanges();_67e.addRange(_680);}else{if(_677.atEndOfContainer(_685,_67f.startContainer,_67f.startOffset)){_680=_677.create(this.editor.window);br=doc.createElement("br");_685.appendChild(br);_685.appendChild(doc.createTextNode(""));_680.setStart(_685.lastChild,0);_67e.removeAllRanges();_67e.addRange(_680);}else{rs=_67f.startContainer;if(rs&&rs.nodeType==3){txt=rs.nodeValue;_681=doc.createTextNode(txt.substring(0,_67f.startOffset));_682=doc.createTextNode(txt.substring(_67f.startOffset));_683=doc.createElement("br");if(_682.nodeValue==""&&has("webkit")){_682=doc.createTextNode("");}_672.place(_681,rs,"after");_672.place(_683,_681,"after");_672.place(_682,_683,"after");_672.destroy(rs);_680=_677.create(this.editor.window);_680.setStart(_682,0);_67e.removeAllRanges();_67e.addRange(_680);return false;}return true;}}}else{_67e=_677.getSelection(this.editor.window);if(_67e.rangeCount){_67f=_67e.getRangeAt(0);if(_67f&&_67f.startContainer){if(!_67f.collapsed){_67f.deleteContents();_67e=_677.getSelection(this.editor.window);_67f=_67e.getRangeAt(0);}rs=_67f.startContainer;if(rs&&rs.nodeType==3){var _686=false;var _687=_67f.startOffset;if(rs.length<_687){ret=this._adjustNodeAndOffset(rs,_687);rs=ret.node;_687=ret.offset;}txt=rs.nodeValue;_681=doc.createTextNode(txt.substring(0,_687));_682=doc.createTextNode(txt.substring(_687));_683=doc.createElement("br");if(!_682.length){_682=doc.createTextNode("");_686=true;}if(_681.length){_672.place(_681,rs,"after");}else{_681=rs;}_672.place(_683,_681,"after");_672.place(_682,_683,"after");_672.destroy(rs);_680=_677.create(this.editor.window);_680.setStart(_682,0);_680.setEnd(_682,_682.length);_67e.removeAllRanges();_67e.addRange(_680);if(_686&&!has("webkit")){this.editor._sCall("remove",[]);}else{this.editor._sCall("collapse",[true]);}}else{var _688;if(_67f.startOffset>=0){_688=rs.childNodes[_67f.startOffset];}var _683=doc.createElement("br");var _682=doc.createTextNode("");if(!_688){rs.appendChild(_683);rs.appendChild(_682);}else{_672.place(_683,_688,"before");_672.place(_682,_683,"after");}_680=_677.create(this.editor.window);_680.setStart(_682,0);_680.setEnd(_682,_682.length);_67e.removeAllRanges();_67e.addRange(_680);this.editor._sCall("collapse",[true]);}}}else{_676.prototype.execCommand.call(this.editor,"inserthtml","<br>");}}return false;}var _689=true;_67e=_677.getSelection(this.editor.window);_67f=_67e.getRangeAt(0);if(!_67f.collapsed){_67f.deleteContents();_67e=_677.getSelection(this.editor.window);_67f=_67e.getRangeAt(0);}var _68a=_677.getBlockAncestor(_67f.endContainer,null,this.editor.editNode);var _68b=_68a.blockNode;if((this._checkListLater=(_68b&&(_68b.nodeName=="LI"||_68b.parentNode.nodeName=="LI")))){if(has("mozilla")){this._pressedEnterInBlock=_68b;}if(/^(\s|&nbsp;|&#160;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|&#160;|\xA0)<\/span>)?(<br>)?$/.test(_68b.innerHTML)){_68b.innerHTML="";if(has("webkit")){_680=_677.create(this.editor.window);_680.setStart(_68b,0);_67e.removeAllRanges();_67e.addRange(_680);}this._checkListLater=false;}return true;}if(!_68a.blockNode||_68a.blockNode===this.editor.editNode){try{_676.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);}catch(e2){}_68a={blockNode:this.editor._sCall("getAncestorElement",[this.blockNodeForEnter]),blockContainer:this.editor.editNode};if(_68a.blockNode){if(_68a.blockNode!=this.editor.editNode&&(!(_68a.blockNode.textContent||_68a.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)){this.removeTrailingBr(_68a.blockNode);return false;}}else{_68a.blockNode=this.editor.editNode;}_67e=_677.getSelection(this.editor.window);_67f=_67e.getRangeAt(0);}var _68c=doc.createElement(this.blockNodeForEnter);_68c.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(_68a.blockNode);var _68d=_67f.endOffset;var node=_67f.endContainer;if(node.length<_68d){var ret=this._adjustNodeAndOffset(node,_68d);node=ret.node;_68d=ret.offset;}if(_677.atEndOfContainer(_68a.blockNode,node,_68d)){if(_68a.blockNode===_68a.blockContainer){_68a.blockNode.appendChild(_68c);}else{_672.place(_68c,_68a.blockNode,"after");}_689=false;_680=_677.create(this.editor.window);_680.setStart(_68c,0);_67e.removeAllRanges();_67e.addRange(_680);if(this.editor.height){_674.scrollIntoView(_68c);}}else{if(_677.atBeginningOfContainer(_68a.blockNode,_67f.startContainer,_67f.startOffset)){_672.place(_68c,_68a.blockNode,_68a.blockNode===_68a.blockContainer?"first":"before");if(_68c.nextSibling&&this.editor.height){_680=_677.create(this.editor.window);_680.setStart(_68c.nextSibling,0);_67e.removeAllRanges();_67e.addRange(_680);_674.scrollIntoView(_68c.nextSibling);}_689=false;}else{if(_68a.blockNode===_68a.blockContainer){_68a.blockNode.appendChild(_68c);}else{_672.place(_68c,_68a.blockNode,"after");}_689=false;if(_68a.blockNode.style){if(_68c.style){if(_68a.blockNode.style.cssText){_68c.style.cssText=_68a.blockNode.style.cssText;}}}rs=_67f.startContainer;var _68e;if(rs&&rs.nodeType==3){var _68f,_690;_68d=_67f.endOffset;if(rs.length<_68d){ret=this._adjustNodeAndOffset(rs,_68d);rs=ret.node;_68d=ret.offset;}txt=rs.nodeValue;_681=doc.createTextNode(txt.substring(0,_68d));_682=doc.createTextNode(txt.substring(_68d,txt.length));_672.place(_681,rs,"before");_672.place(_682,rs,"after");_672.destroy(rs);var _691=_681.parentNode;while(_691!==_68a.blockNode){var tg=_691.tagName;var _692=doc.createElement(tg);if(_691.style){if(_692.style){if(_691.style.cssText){_692.style.cssText=_691.style.cssText;}}}if(_691.tagName==="FONT"){if(_691.color){_692.color=_691.color;}if(_691.face){_692.face=_691.face;}if(_691.size){_692.size=_691.size;}}_68f=_682;while(_68f){_690=_68f.nextSibling;_692.appendChild(_68f);_68f=_690;}_672.place(_692,_691,"after");_681=_691;_682=_692;_691=_691.parentNode;}_68f=_682;if(_68f.nodeType==1||(_68f.nodeType==3&&_68f.nodeValue)){_68c.innerHTML="";}_68e=_68f;while(_68f){_690=_68f.nextSibling;_68c.appendChild(_68f);_68f=_690;}}_680=_677.create(this.editor.window);var _693;var _694=_68e;if(this.blockNodeForEnter!=="BR"){while(_694){_693=_694;_690=_694.firstChild;_694=_690;}if(_693&&_693.parentNode){_68c=_693.parentNode;_680.setStart(_68c,0);_67e.removeAllRanges();_67e.addRange(_680);if(this.editor.height){_674.scrollIntoView(_68c);}if(has("mozilla")){this._pressedEnterInBlock=_68a.blockNode;}}else{_689=true;}}else{_680.setStart(_68c,0);_67e.removeAllRanges();_67e.addRange(_680);if(this.editor.height){_674.scrollIntoView(_68c);}if(has("mozilla")){this._pressedEnterInBlock=_68a.blockNode;}}}}return _689;},_adjustNodeAndOffset:function(node,_695){while(node.length<_695&&node.nextSibling&&node.nextSibling.nodeType==3){_695=_695-node.length;node=node.nextSibling;}return {"node":node,"offset":_695};},removeTrailingBr:function(_696){var para=/P|DIV|LI/i.test(_696.tagName)?_696:this.editor._sCall("getParentOfType",[_696,["P","DIV","LI"]]);if(!para){return;}if(para.lastChild){if((para.childNodes.length>1&&para.lastChild.nodeType==3&&/^[\s\xAD]*$/.test(para.lastChild.nodeValue))||para.lastChild.tagName=="BR"){_672.destroy(para.lastChild);}}if(!para.childNodes.length){para.innerHTML=this.bogusHtmlContent;}}});});},"dijit/form/_SearchMixin":function(){define("dijit/form/_SearchMixin",["dojo/data/util/filter","dojo/_base/declare","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/query","dojo/sniff","dojo/string","dojo/when","../registry"],function(_697,_698,_699,keys,lang,_69a,has,_69b,when,_69c){return _698("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:true,_abortQuery:function(){if(this.searchTimer){this.searchTimer=this.searchTimer.remove();}if(this._queryDeferHandle){this._queryDeferHandle=this._queryDeferHandle.remove();}if(this._fetchHandle){if(this._fetchHandle.abort){this._cancelingQuery=true;this._fetchHandle.abort();this._cancelingQuery=false;}if(this._fetchHandle.cancel){this._cancelingQuery=true;this._fetchHandle.cancel();this._cancelingQuery=false;}this._fetchHandle=null;}},_processInput:function(evt){if(this.disabled||this.readOnly){return;}var key=evt.charOrCode;if(evt.altKey||((evt.ctrlKey||evt.metaKey)&&(key!="x"&&key!="v"))||key==keys.SHIFT){return;}var _69d=false;this._prev_key_backspace=false;switch(key){case keys.DELETE:case keys.BACKSPACE:this._prev_key_backspace=true;this._maskValidSubsetError=true;_69d=true;break;default:_69d=typeof key=="string"||key==229;}if(_69d){if(!this.store){this.onSearch();}else{this.searchTimer=this.defer("_startSearchFromInput",1);}}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"));},_startSearch:function(text){this._abortQuery();var _69e=this,_69a=lang.clone(this.query),_69f={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:true}},qs=_69b.substitute(this.queryExpr,[text]),q,_6a0=function(){var _6a1=_69e._fetchHandle=_69e.store.query(_69a,_69f);if(_69e.disabled||_69e.readOnly||(q!==_69e._lastQuery)){return;}when(_6a1,function(res){_69e._fetchHandle=null;if(!_69e.disabled&&!_69e.readOnly&&(q===_69e._lastQuery)){when(_6a1.total,function(_6a2){res.total=_6a2;var _6a3=_69e.pageSize;if(isNaN(_6a3)||_6a3>res.total){_6a3=res.total;}res.nextPage=function(_6a4){_69f.direction=_6a4=_6a4!==false;_69f.count=_6a3;if(_6a4){_69f.start+=res.length;if(_69f.start>=res.total){_69f.count=0;}}else{_69f.start-=_6a3;if(_69f.start<0){_69f.count=Math.max(_6a3+_69f.start,0);_69f.start=0;}}if(_69f.count<=0){res.length=0;_69e.onSearch(res,_69a,_69f);}else{_6a0();}};_69e.onSearch(res,_69a,_69f);});}},function(err){_69e._fetchHandle=null;if(!_69e._cancelingQuery){console.error(_69e.declaredClass+" "+err.toString());}});};lang.mixin(_69f,this.fetchProperties);if(this.store._oldAPI){q=qs;}else{q=_697.patternToRegExp(qs,this.ignoreCase);q.toString=function(){return qs;};}this._lastQuery=_69a[this.searchAttr]=q;this._queryDeferHandle=this.defer(_6a0,this.searchDelay);},constructor:function(){this.query={};this.fetchProperties={};},postMixInProperties:function(){if(!this.store){var list=this.list;if(list){this.store=_69c.byId(list);}}this.inherited(arguments);}});});},"url:dijit/templates/Calendar.html":"<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" aria-labelledby=\"${id}_mddb ${id}_year\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' colspan=\"5\">\n\t\t\t\t<div data-dojo-attach-point=\"monthNode\">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role=\"row\">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point=\"dateRowsNode\" data-dojo-attach-event=\"onclick: _onDayClick\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\" role=\"presentation\">\n\t\t\t\t<div class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span data-dojo-attach-point=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\" role=\"button\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" role=\"button\" id=\"${id}_year\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\" role=\"button\"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n","dijit/form/DataList":function(){define("dijit/form/DataList",["dojo/_base/declare","dojo/dom","dojo/_base/lang","dojo/query","dojo/store/Memory","../registry"],function(_6a5,dom,lang,_6a6,_6a7,_6a8){function _6a9(_6aa){return {id:_6aa.value,value:_6aa.value,name:lang.trim(_6aa.innerText||_6aa.textContent||"")};};return _6a5("dijit.form.DataList",_6a7,{constructor:function(_6ab,_6ac){this.domNode=dom.byId(_6ac);lang.mixin(this,_6ab);if(this.id){_6a8.add(this);}this.domNode.style.display="none";this.inherited(arguments,[{data:_6a6("option",this.domNode).map(_6a9)}]);},destroy:function(){_6a8.remove(this.id);},fetchSelectedItem:function(){var _6ad=_6a6("> option[selected]",this.domNode)[0]||_6a6("> option",this.domNode)[0];return _6ad&&_6a9(_6ad);}});});},"dijit/form/_ListMouseMixin":function(){define("dijit/form/_ListMouseMixin",["dojo/_base/declare","dojo/mouse","dojo/on","dojo/touch","./_ListBase"],function(_6ae,_6af,on,_6b0,_6b1){return _6ae("dijit.form._ListMouseMixin",_6b1,{postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,_6b0.press,function(evt){evt.preventDefault();}));this._listConnect(_6b0.press,"_onMouseDown");this._listConnect(_6b0.release,"_onMouseUp");this._listConnect(_6af.enter,"_onMouseOver");this._listConnect(_6af.leave,"_onMouseOut");},_onMouseDown:function(evt,_6b2){if(this._hoveredNode){this.onUnhover(this._hoveredNode);this._hoveredNode=null;}this._isDragging=true;this._setSelectedAttr(_6b2);},_onMouseUp:function(evt,_6b3){this._isDragging=false;var _6b4=this.selected;var _6b5=this._hoveredNode;if(_6b4&&_6b3==_6b4){this.onClick(_6b4);}else{if(_6b5&&_6b3==_6b5){this._setSelectedAttr(_6b5);this.onClick(_6b5);}}},_onMouseOut:function(evt,_6b6){if(this._hoveredNode){this.onUnhover(this._hoveredNode);this._hoveredNode=null;}if(this._isDragging){this._cancelDrag=(new Date()).getTime()+1000;}},_onMouseOver:function(evt,_6b7){if(this._cancelDrag){var time=(new Date()).getTime();if(time>this._cancelDrag){this._isDragging=false;}this._cancelDrag=null;}this._hoveredNode=_6b7;this.onHover(_6b7);if(this._isDragging){this._setSelectedAttr(_6b7);}}});});},"dijit/form/RangeBoundTextBox":function(){define("dijit/form/RangeBoundTextBox",["dojo/_base/declare","dojo/i18n","./MappedTextBox"],function(_6b8,i18n,_6b9){var _6ba=_6b8("dijit.form.RangeBoundTextBox",_6b9,{rangeMessage:"",rangeCheck:function(_6bb,_6bc){return ("min" in _6bc?(this.compare(_6bb,_6bc.min)>=0):true)&&("max" in _6bc?(this.compare(_6bb,_6bc.max)<=0):true);},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints);},_isDefinitelyOutOfRange:function(){var val=this.get("value");if(val==null){return false;}var _6bd=false;if("min" in this.constraints){var min=this.constraints.min;_6bd=this.compare(val,((typeof min=="number")&&min>=0&&val!=0)?0:min)<0;}if(!_6bd&&("max" in this.constraints)){var max=this.constraints.max;_6bd=this.compare(val,((typeof max!="number")||max>0)?max:0)>0;}return _6bd;},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange();},isValid:function(_6be){return this.inherited(arguments)&&((this._isEmpty(this.textbox.value)&&!this.required)||this.isInRange(_6be));},getErrorMessage:function(_6bf){var v=this.get("value");if(v!=null&&v!==""&&(typeof v!="number"||!isNaN(v))&&!this.isInRange(_6bf)){return this.rangeMessage;}return this.inherited(arguments);},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage){this.messages=i18n.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage;}},applyTextDir:function(){}});return _6ba;});},"dijit/form/FilteringSelect":function(){define("dijit/form/FilteringSelect",["dojo/data/util/filter","dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(_6c0,_6c1,lang,when,_6c2,_6c3){return _6c1("dijit.form.FilteringSelect",[_6c2,_6c3],{required:true,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened;},isValid:function(){return !!this.item||(!this.required&&this.get("displayedValue")=="");},_refreshState:function(){if(!this.searchTimer){this.inherited(arguments);}},_callbackSetLabel:function(_6c4,_6c5,_6c6,_6c7){if((_6c5&&_6c5[this.searchAttr]!==this._lastQuery)||(!_6c5&&_6c4.length&&this.store.getIdentity(_6c4[0])!=this._lastQuery)){return;}if(!_6c4.length){this.set("value","",_6c7||(_6c7===undefined&&!this.focused),this.textbox.value,null);}else{this.set("item",_6c4[0],_6c7);}},_openResultList:function(_6c8,_6c9,_6ca){if(_6c9[this.searchAttr]!==this._lastQuery){return;}this.inherited(arguments);if(this.item===undefined){this.validate(true);}},_getValueAttr:function(){return this.valueNode.value;},_getValueField:function(){return "value";},_setValueAttr:function(_6cb,_6cc,_6cd,item){if(!this._onChangeActive){_6cc=null;}if(item===undefined){if(_6cb===null||_6cb===""){_6cb="";if(!lang.isString(_6cd)){this._setDisplayedValueAttr(_6cd||"",_6cc);return;}}var self=this;this._lastQuery=_6cb;when(this.store.get(_6cb),function(item){self._callbackSetLabel(item?[item]:[],undefined,undefined,_6cc);});}else{this.valueNode.value=_6cb;this.inherited(arguments);}},_setItemAttr:function(item,_6ce,_6cf){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value;},_getDisplayQueryString:function(text){return text.replace(/([\\\*\?])/g,"\\$1");},_setDisplayedValueAttr:function(_6d0,_6d1){if(_6d0==null){_6d0="";}if(!this._created){if(!("displayedValue" in this.params)){return;}_6d1=false;}if(this.store){this.closeDropDown();var _6d2=lang.clone(this.query);var qs=this._getDisplayQueryString(_6d0),q;if(this.store._oldAPI){q=qs;}else{q=_6c0.patternToRegExp(qs,this.ignoreCase);q.toString=function(){return qs;};}this._lastQuery=_6d2[this.searchAttr]=q;this.textbox.value=_6d0;this._lastDisplayedValue=_6d0;this._set("displayedValue",_6d0);var _6d3=this;var _6d4={ignoreCase:this.ignoreCase,deep:true};lang.mixin(_6d4,this.fetchProperties);this._fetchHandle=this.store.query(_6d2,_6d4);when(this._fetchHandle,function(_6d5){_6d3._fetchHandle=null;_6d3._callbackSetLabel(_6d5||[],_6d2,_6d4,_6d1);},function(err){_6d3._fetchHandle=null;if(!_6d3._cancelingQuery){console.error("dijit.form.FilteringSelect: "+err.toString());}});}},undo:function(){this.set("displayedValue",this._lastDisplayedValue);}});});},"dijit/layout/_LayoutWidget":function(){define("dijit/layout/_LayoutWidget",["dojo/_base/lang","../_Widget","../_Container","../_Contained","../Viewport","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style"],function(lang,_6d6,_6d7,_6d8,_6d9,_6da,_6db,_6dc,_6dd){return _6da("dijit.layout._LayoutWidget",[_6d6,_6d7,_6d8],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,buildRendering:function(){this.inherited(arguments);_6db.add(this.domNode,"dijitContainer");},startup:function(){if(this._started){return;}this.inherited(arguments);var _6de=this.getParent&&this.getParent();if(!(_6de&&_6de.isLayoutContainer)){this.resize();this.own(_6d9.on("resize",lang.hitch(this,"resize")));}},resize:function(_6df,_6e0){var node=this.domNode;if(_6df){_6dc.setMarginBox(node,_6df);}var mb=_6e0||{};lang.mixin(mb,_6df||{});if(!("h" in mb)||!("w" in mb)){mb=lang.mixin(_6dc.getMarginBox(node),mb);}var cs=_6dd.getComputedStyle(node);var me=_6dc.getMarginExtents(node,cs);var be=_6dc.getBorderExtents(node,cs);var bb=(this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)});var pe=_6dc.getPadExtents(node,cs);this._contentBox={l:_6dd.toPixelValue(node,cs.paddingLeft),t:_6dd.toPixelValue(node,cs.paddingTop),w:bb.w-pe.w,h:bb.h-pe.h};this.layout();},layout:function(){},_setupChild:function(_6e1){var cls=this.baseClass+"-child "+(_6e1.baseClass?this.baseClass+"-"+_6e1.baseClass:"");_6db.add(_6e1.domNode,cls);},addChild:function(_6e2,_6e3){this.inherited(arguments);if(this._started){this._setupChild(_6e2);}},removeChild:function(_6e4){var cls=this.baseClass+"-child"+(_6e4.baseClass?" "+this.baseClass+"-"+_6e4.baseClass:"");_6db.remove(_6e4.domNode,cls);this.inherited(arguments);}});});},"dijit/_editor/_Plugin":function(){define("dijit/_editor/_Plugin",["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../form/Button"],function(_6e5,_6e6,lang,_6e7){var _6e8=_6e6("dijit._editor._Plugin",null,{constructor:function(args){this.params=args||{};lang.mixin(this,this.params);this._connects=[];this._attrPairNames={};},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:true,buttonClass:_6e7,disabled:false,getLabel:function(key){return this.editor.commands[key];},_initButton:function(){if(this.command.length){var _6e9=this.getLabel(this.command),_6ea=this.editor,_6eb=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button){var _6ec=lang.mixin({label:_6e9,ownerDocument:_6ea.ownerDocument,dir:_6ea.dir,lang:_6ea.lang,showLabel:false,iconClass:_6eb,dropDown:this.dropDown,tabIndex:"-1"},this.params||{});this.button=new this.buttonClass(_6ec);}}if(this.get("disabled")&&this.button){this.button.set("disabled",this.get("disabled"));}},destroy:function(){var h;while(h=this._connects.pop()){h.remove();}if(this.dropDown){this.dropDown.destroyRecursive();}},connect:function(o,f,tf){this._connects.push(_6e5.connect(o,f,this,tf));},updateState:function(){var e=this.editor,c=this.command,_6ed,_6ee;if(!e||!e.isLoaded||!c.length){return;}var _6ef=this.get("disabled");if(this.button){try{_6ee=!_6ef&&e.queryCommandEnabled(c);if(this.enabled!==_6ee){this.enabled=_6ee;this.button.set("disabled",!_6ee);}if(_6ee){if(typeof this.button.checked=="boolean"){_6ed=e.queryCommandState(c);if(this.checked!==_6ed){this.checked=_6ed;this.button.set("checked",e.queryCommandState(c));}}}}catch(e){console.log(e);}}},setEditor:function(_6f0){this.editor=_6f0;this._initButton();if(this.button&&this.useDefaultCommand){if(this.editor.queryCommandAvailable(this.command)){this.connect(this.button,"onClick",lang.hitch(this.editor,"execCommand",this.command,this.commandArg));}else{this.button.domNode.style.display="none";}}this.connect(this.editor,"onNormalizedDisplayChanged","updateState");},setToolbar:function(_6f1){if(this.button){_6f1.addChild(this.button);}},set:function(name,_6f2){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _6f3=this._getAttrNames(name);if(this[_6f3.s]){var _6f4=this[_6f3.s].apply(this,Array.prototype.slice.call(arguments,1));}else{this._set(name,_6f2);}return _6f4||this;},get:function(name){var _6f5=this._getAttrNames(name);return this[_6f5.g]?this[_6f5.g]():this[name];},_setDisabledAttr:function(_6f6){this.disabled=_6f6;this.updateState();},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return (apn[name]={s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"});},_set:function(name,_6f7){this[name]=_6f7;}});_6e8.registry={};return _6e8;});},"dijit/_Contained":function(){define("dijit/_Contained",["dojo/_base/declare","./registry"],function(_6f8,_6f9){return _6f8("dijit._Contained",null,{_getSibling:function(_6fa){var node=this.domNode;do{node=node[_6fa+"Sibling"];}while(node&&node.nodeType!=1);return node&&_6f9.byNode(node);},getPreviousSibling:function(){return this._getSibling("previous");},getNextSibling:function(){return this._getSibling("next");},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild){return -1;}return p.getIndexOfChild(this);}});});},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../_base/Deferred"],function(_6fb,lang,_6fc){var _6fd=function(_6fe){if(!_6fe){return _6fe;}if(_6fe.then){_6fe=lang.delegate(_6fe);}function _6ff(_700){if(!_6fe[_700]){_6fe[_700]=function(){var args=arguments;return _6fc.when(_6fe,function(_701){Array.prototype.unshift.call(args,_701);return _6fd(_6fb[_700].apply(_6fb,args));});};}};_6ff("forEach");_6ff("filter");_6ff("map");if(!_6fe.total){_6fe.total=_6fc.when(_6fe,function(_702){return _702.length;});}return _6fe;};lang.setObject("dojo.store.util.QueryResults",_6fd);return _6fd;});},"dijit/Editor":function(){define("dijit/Editor",["require","dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/i18n","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/string","dojo/topic","dojo/_base/window","./_base/focus","./_Container","./Toolbar","./ToolbarSeparator","./layout/_LayoutWidget","./form/ToggleButton","./_editor/_Plugin","./_editor/plugins/EnterKeyHandling","./_editor/html","./_editor/range","./_editor/RichText","./main","dojo/i18n!./_editor/nls/commands"],function(_703,_704,_705,_706,i18n,_707,_708,_709,_70a,_70b,keys,lang,has,_70c,_70d,win,_70e,_70f,_710,_711,_712,_713,_714,_715,html,_716,_717,_718){var _719=_705("dijit.Editor",_717,{plugins:null,extraPlugins:null,constructor:function(){if(!lang.isArray(this.plugins)){this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull",_715];}this._plugins=[];this._editInterval=this.editActionInterval*1000;if(has("ie")){this.events.push("onBeforeDeactivate");this.events.push("onBeforeActivate");}},postMixInProperties:function(){this.setValueDeferred=new _706();this.inherited(arguments);},postCreate:function(){this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);if(lang.isArray(this.extraPlugins)){this.plugins=this.plugins.concat(this.extraPlugins);}this.inherited(arguments);this.commands=i18n.getLocalization("dijit._editor","commands",this.lang);if(!this.toolbar){this.toolbar=new _710({ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang});this.header.appendChild(this.toolbar.domNode);}_704.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.resolve(true);_708.add(this.iframe.parentNode,"dijitEditorIFrameContainer");_708.add(this.iframe,"dijitEditorIFrame");_707.set(this.iframe,"allowTransparency",true);if(has("webkit")){_70a.set(this.domNode,"KhtmlUserSelect","none");}this.toolbar.startup();this.onNormalizedDisplayChanged();},destroy:function(){_704.forEach(this._plugins,function(p){if(p&&p.destroy){p.destroy();}});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments);},addPlugin:function(_71a,_71b){var args=lang.isString(_71a)?{name:_71a}:lang.isFunction(_71a)?{ctor:_71a}:_71a;if(!args.setEditor){var o={"args":args,"plugin":null,"editor":this};if(args.name){if(_714.registry[args.name]){o.plugin=_714.registry[args.name](args);}else{_70d.publish(_718._scopeName+".Editor.getPlugin",o);}}if(!o.plugin){try{var pc=args.ctor||lang.getObject(args.name)||_703(args.name);if(pc){o.plugin=new pc(args);}}catch(e){throw new Error(this.id+": cannot find plugin ["+args.name+"]");}}if(!o.plugin){throw new Error(this.id+": cannot find plugin ["+args.name+"]");}_71a=o.plugin;}if(arguments.length>1){this._plugins[_71b]=_71a;}else{this._plugins.push(_71a);}_71a.setEditor(this);if(lang.isFunction(_71a.setToolbar)){_71a.setToolbar(this.toolbar);}},resize:function(size){if(size){_712.prototype.resize.apply(this,arguments);}},layout:function(){var _71c=(this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+_709.getPadBorderExtents(this.iframe.parentNode).h+_709.getMarginExtents(this.iframe.parentNode).h));this.editingArea.style.height=_71c+"px";if(this.iframe){this.iframe.style.height="100%";}this._layoutMode=true;},_onIEMouseDown:function(e){var _71d;var b=this.document.body;var _71e=b.clientWidth;var _71f=b.clientHeight;var _720=b.clientLeft;var _721=b.offsetWidth;var _722=b.offsetHeight;var _723=b.offsetLeft;if(/^rtl$/i.test(b.dir||"")){if(_71e<_721&&e.x>_71e&&e.x<_721){_71d=true;}}else{if(e.x<_720&&e.x>_723){_71d=true;}}if(!_71d){if(_71f<_722&&e.y>_71f&&e.y<_722){_71d=true;}}if(!_71d){delete this._cursorToStart;delete this._savedSelection;if(e.target.tagName=="BODY"){this.defer("placeCursorAtEnd");}this.inherited(arguments);}},onBeforeActivate:function(){this._restoreSelection();},onBeforeDeactivate:function(e){if(this.customUndo){this.endEditing(true);}if(e.target.tagName!="BODY"){this._saveSelection();}},customUndo:true,editActionInterval:3,beginEditing:function(cmd){if(!this._inEditing){this._inEditing=true;this._beginEditing(cmd);}if(this.editActionInterval>0){if(this._editTimer){this._editTimer.remove();}this._editTimer=this.defer("endEditing",this._editInterval);}},_steps:[],_undoedSteps:[],execCommand:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return this[cmd]();}else{if(this.customUndo){this.endEditing();this._beginEditing();}var r=this.inherited(arguments);if(this.customUndo){this._endEditing();}return r;}},_pasteImpl:function(){return this._clipboardCommand("paste");},_cutImpl:function(){return this._clipboardCommand("cut");},_copyImpl:function(){return this._clipboardCommand("copy");},_clipboardCommand:function(cmd){var r;try{r=this.document.execCommand(cmd,false,null);if(has("webkit")&&!r){throw {code:1011};}}catch(e){if(e.code==1011||(e.code==9&&has("opera"))){var sub=_70c.substitute,_724={cut:"X",copy:"C",paste:"V"};alert(sub(this.commands.systemShortcut,[this.commands[cmd],sub(this.commands[has("mac")?"appleKey":"ctrlKey"],[_724[cmd]])]));}r=false;}return r;},queryCommandEnabled:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return cmd=="undo"?(this._steps.length>1):(this._undoedSteps.length>0);}else{return this.inherited(arguments);}},_moveToBookmark:function(b){var _725=b.mark;var mark=b.mark;var col=b.isCollapsed;var r,_726,_727,sel;if(mark){if(has("ie")<9){if(lang.isArray(mark)){_725=[];_704.forEach(mark,function(n){_725.push(_716.getNode(n,this.editNode));},this);win.withGlobal(this.window,"moveToBookmark",_70e,[{mark:_725,isCollapsed:col}]);}else{if(mark.startContainer&&mark.endContainer){sel=_716.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=_716.create(this.window);_726=_716.getNode(mark.startContainer,this.editNode);_727=_716.getNode(mark.endContainer,this.editNode);if(_726&&_727){r.setStart(_726,mark.startOffset);r.setEnd(_727,mark.endOffset);sel.addRange(r);}}}}}else{sel=_716.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=_716.create(this.window);_726=_716.getNode(mark.startContainer,this.editNode);_727=_716.getNode(mark.endContainer,this.editNode);if(_726&&_727){r.setStart(_726,mark.startOffset);r.setEnd(_727,mark.endOffset);sel.addRange(r);}}}}},_changeToStep:function(from,to){this.setValue(to.text);var b=to.bookmark;if(!b){return;}this._moveToBookmark(b);},undo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._steps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(s,this._steps[this._steps.length-1]);this._undoedSteps.push(s);this.onDisplayChanged();delete this._undoRedoActive;ret=true;}delete this._undoRedoActive;}return ret;},redo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._undoedSteps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(this._steps[this._steps.length-1],s);this._steps.push(s);this.onDisplayChanged();ret=true;}delete this._undoRedoActive;}return ret;},endEditing:function(_728){if(this._editTimer){this._editTimer=this._editTimer.remove();}if(this._inEditing){this._endEditing(_728);this._inEditing=false;}},_getBookmark:function(){var b=win.withGlobal(this.window,_70e.getBookmark);var tmp=[];if(b&&b.mark){var mark=b.mark;if(has("ie")<9){var sel=_716.getSelection(this.window);if(!lang.isArray(mark)){if(sel){var _729;if(sel.rangeCount){_729=sel.getRangeAt(0);}if(_729){b.mark=_729.cloneRange();}else{b.mark=win.withGlobal(this.window,_70e.getBookmark);}}}else{_704.forEach(b.mark,function(n){tmp.push(_716.getIndex(n,this.editNode).o);},this);b.mark=tmp;}}try{if(b.mark&&b.mark.startContainer){tmp=_716.getIndex(b.mark.startContainer,this.editNode).o;b.mark={startContainer:tmp,startOffset:b.mark.startOffset,endContainer:b.mark.endContainer===b.mark.startContainer?tmp:_716.getIndex(b.mark.endContainer,this.editNode).o,endOffset:b.mark.endOffset};}}catch(e){b.mark=null;}}return b;},_beginEditing:function(){if(this._steps.length===0){this._steps.push({"text":html.getChildrenHtml(this.editNode),"bookmark":this._getBookmark()});}},_endEditing:function(){var v=html.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:v,bookmark:this._getBookmark()});},onKeyDown:function(e){if(!has("ie")&&!this.iframe&&e.keyCode==keys.TAB&&!this.tabIndent){this._saveSelection();}if(!this.customUndo){this.inherited(arguments);return;}var k=e.keyCode;if(e.ctrlKey&&!e.altKey){if(k==90||k==122){_70b.stop(e);this.undo();return;}else{if(k==89||k==121){_70b.stop(e);this.redo();return;}}}this.inherited(arguments);switch(k){case keys.ENTER:case keys.BACKSPACE:case keys.DELETE:this.beginEditing();break;case 88:case 86:if(e.ctrlKey&&!e.altKey&&!e.metaKey){this.endEditing();if(e.keyCode==88){this.beginEditing("cut");}else{this.beginEditing("paste");}this.defer("endEditing",1);break;}default:if(!e.ctrlKey&&!e.altKey&&!e.metaKey&&(e.keyCode<keys.F1||e.keyCode>keys.F15)){this.beginEditing();break;}case keys.ALT:this.endEditing();break;case keys.UP_ARROW:case keys.DOWN_ARROW:case keys.LEFT_ARROW:case keys.RIGHT_ARROW:case keys.HOME:case keys.END:case keys.PAGE_UP:case keys.PAGE_DOWN:this.endEditing(true);break;case keys.CTRL:case keys.SHIFT:case keys.TAB:break;}},_onBlur:function(){this.inherited(arguments);this.endEditing(true);},_saveSelection:function(){try{this._savedSelection=this._getBookmark();}catch(e){}},_restoreSelection:function(){if(this._savedSelection){delete this._cursorToStart;if(win.withGlobal(this.window,"isCollapsed",_70e)){this._moveToBookmark(this._savedSelection);}delete this._savedSelection;}},onClick:function(){this.endEditing(true);this.inherited(arguments);},replaceValue:function(html){if(!this.customUndo){this.inherited(arguments);}else{if(this.isClosed){this.setValue(html);}else{this.beginEditing();if(!html){html="&#160;";}this.setValue(html);this.endEditing();}}},_setDisabledAttr:function(_72a){this.setValueDeferred.then(lang.hitch(this,function(){if((!this.disabled&&_72a)||(!this._buttonEnabledPlugins&&_72a)){_704.forEach(this._plugins,function(p){p.set("disabled",true);});}else{if(this.disabled&&!_72a){_704.forEach(this._plugins,function(p){p.set("disabled",false);});}}}));this.inherited(arguments);},_setStateClass:function(){try{this.inherited(arguments);if(this.document&&this.document.body){_70a.set(this.document.body,"color",_70a.get(this.iframe,"color"));}}catch(e){}}});function _72b(args){return new _714({command:args.name});};function _72c(args){return new _714({buttonClass:_713,command:args.name});};lang.mixin(_714.registry,{"undo":_72b,"redo":_72b,"cut":_72b,"copy":_72b,"paste":_72b,"insertOrderedList":_72b,"insertUnorderedList":_72b,"indent":_72b,"outdent":_72b,"justifyCenter":_72b,"justifyFull":_72b,"justifyLeft":_72b,"justifyRight":_72b,"delete":_72b,"selectAll":_72b,"removeFormat":_72b,"unlink":_72b,"insertHorizontalRule":_72b,"bold":_72c,"italic":_72c,"underline":_72c,"strikethrough":_72c,"subscript":_72c,"superscript":_72c,"|":function(){return new _714({setEditor:function(_72d){this.editor=_72d;this.button=new _711({ownerDocument:_72d.ownerDocument});}});}});return _719;});},"esri/layers/FeatureEditResult":function(){define("esri/layers/FeatureEditResult",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_72e,lang,has,_72f){var _730=_72e(null,{declaredClass:"esri.layers.FeatureEditResult",constructor:function(json){if(json&&lang.isObject(json)){this.objectId=json.objectId;this.success=json.success;if(!json.success){var err=json.error;this.error=new Error();this.error.code=err.code;this.error.message=err.description;}}}});if(has("extend-esri")){lang.setObject("layers.FeatureEditResult",_730,_72f);}return _730;});},"dijit/Toolbar":function(){define("dijit/Toolbar",["require","dojo/_base/declare","dojo/has","dojo/keys","dojo/ready","./_Widget","./_KeyNavContainer","./_TemplatedMixin"],function(_731,_732,has,keys,_733,_734,_735,_736){if(has("dijit-legacy-requires")){_733(0,function(){var _737=["dijit/ToolbarSeparator"];_731(_737);});}return _732("dijit.Toolbar",[_734,_736,_735],{templateString:"<div class=\"dijit\" role=\"toolbar\" tabIndex=\"${tabIndex}\" data-dojo-attach-point=\"containerNode\">"+"</div>",baseClass:"dijitToolbar",postCreate:function(){this.inherited(arguments);this.connectKeyNavHandlers(this.isLeftToRight()?[keys.LEFT_ARROW]:[keys.RIGHT_ARROW],this.isLeftToRight()?[keys.RIGHT_ARROW]:[keys.LEFT_ARROW]);}});});},"dijit/form/_ComboBoxMenu":function(){define("dijit/form/_ComboBoxMenu",["dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/keys","../_WidgetBase","../_TemplatedMixin","./_ComboBoxMenuMixin","./_ListMouseMixin"],function(_738,_739,_73a,keys,_73b,_73c,_73d,_73e){return _738("dijit.form._ComboBoxMenu",[_73b,_73c,_73e,_73d],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;' role='listbox'>"+"<div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div>"+"<div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div>"+"</div>",baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);if(!this.isLeftToRight()){_739.add(this.previousButton,"dijitMenuItemRtl");_739.add(this.nextButton,"dijitMenuItemRtl");}},_createMenuItem:function(){var item=this.ownerDocument.createElement("div");item.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");item.setAttribute("role","option");return item;},onHover:function(node){_739.add(node,"dijitMenuItemHover");},onUnhover:function(node){_739.remove(node,"dijitMenuItemHover");},onSelect:function(node){_739.add(node,"dijitMenuItemSelected");},onDeselect:function(node){_739.remove(node,"dijitMenuItemSelected");},_page:function(up){var _73f=0;var _740=this.domNode.scrollTop;var _741=_73a.get(this.domNode,"height");if(!this.getHighlightedOption()){this.selectNextNode();}while(_73f<_741){var _742=this.getHighlightedOption();if(up){if(!_742.previousSibling||_742.previousSibling.style.display=="none"){break;}this.selectPreviousNode();}else{if(!_742.nextSibling||_742.nextSibling.style.display=="none"){break;}this.selectNextNode();}var _743=this.domNode.scrollTop;_73f+=(_743-_740)*(up?-1:1);_740=_743;}},handleKey:function(evt){switch(evt.keyCode){case keys.DOWN_ARROW:this.selectNextNode();return false;case keys.PAGE_DOWN:this._page(false);return false;case keys.UP_ARROW:this.selectPreviousNode();return false;case keys.PAGE_UP:this._page(true);return false;default:return true;}}});});},"dijit/form/_ComboBoxMenuMixin":function(){define("dijit/form/_ComboBoxMenuMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/i18n","dojo/i18n!./nls/ComboBox"],function(_744,_745,_746,i18n){return _745("dijit.form._ComboBoxMenuMixin",null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=i18n.getLocalization("dijit.form","ComboBox",this.lang);},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages["previousMessage"];this.nextButton.innerHTML=this._messages["nextMessage"];},_setValueAttr:function(_747){this.value=_747;this.onChange(_747);},onClick:function(node){if(node==this.previousButton){this._setSelectedAttr(null);this.onPage(-1);}else{if(node==this.nextButton){this._setSelectedAttr(null);this.onPage(1);}else{this.onChange(node);}}},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null);},_createOption:function(item,_748){var _749=this._createMenuItem();var _74a=_748(item);if(_74a.html){_749.innerHTML=_74a.label;}else{_749.appendChild(_749.ownerDocument.createTextNode(_74a.label));}if(_749.innerHTML==""){_749.innerHTML="&#160;";}this.applyTextDir(_749,(_749.innerText||_749.textContent||""));return _749;},createOptions:function(_74b,_74c,_74d){this.items=_74b;this.previousButton.style.display=(_74c.start==0)?"none":"";_746.set(this.previousButton,"id",this.id+"_prev");_744.forEach(_74b,function(item,i){var _74e=this._createOption(item,_74d);_74e.setAttribute("item",i);_746.set(_74e,"id",this.id+i);this.nextButton.parentNode.insertBefore(_74e,this.nextButton);},this);var _74f=false;if(_74b.total&&!_74b.total.then&&_74b.total!=-1){if((_74c.start+_74c.count)<_74b.total){_74f=true;}else{if((_74c.start+_74c.count)>_74b.total&&_74c.count==_74b.length){_74f=true;}}}else{if(_74c.count==_74b.length){_74f=true;}}this.nextButton.style.display=_74f?"":"none";_746.set(this.nextButton,"id",this.id+"_next");},clearResultList:function(){var _750=this.containerNode;while(_750.childNodes.length>2){_750.removeChild(_750.childNodes[_750.childNodes.length-2]);}this._setSelectedAttr(null);},highlightFirstOption:function(){this.selectFirstNode();},highlightLastOption:function(){this.selectLastNode();},selectFirstNode:function(){this.inherited(arguments);if(this.getHighlightedOption()==this.previousButton){this.selectNextNode();}},selectLastNode:function(){this.inherited(arguments);if(this.getHighlightedOption()==this.nextButton){this.selectPreviousNode();}},getHighlightedOption:function(){return this.selected;}});});},"esri/layers/FeatureTemplate":function(){define("esri/layers/FeatureTemplate",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/graphic"],function(_751,lang,has,_752,_753,_754){var _755=_751(null,{declaredClass:"esri.layers.FeatureTemplate",constructor:function(json){if(json&&lang.isObject(json)){this.name=json.name;this.description=json.description;this.drawingTool=json.drawingTool;var _756=json.prototype;this.prototype=new _754(_756.geometry,null,_756.attributes);}},toJson:function(){return _753.fixJson({name:this.name,description:this.description,drawingTool:this.drawingTool,prototype:this.prototype&&this.prototype.toJson()});}});lang.mixin(_755,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});if(has("extend-esri")){lang.setObject("layers.FeatureTemplate",_755,_752);}return _755;});},"dijit/form/_Spinner":function(){require({cache:{"url:dijit/form/templates/Spinner.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitButtonNode dijitSpinnerButtonContainer\"\n\t\t><input class=\"dijitReset dijitInputField dijitSpinnerButtonInner\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t/><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton\"\n\t\t\tdata-dojo-attach-point=\"upArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9650; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\tdata-dojo-attach-point=\"downArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' data-dojo-attach-point=\"textbox,focusNode\" type=\"${type}\" data-dojo-attach-event=\"onkeypress:_onKeyPress\"\n\t\t\trole=\"spinbutton\" autocomplete=\"off\" ${!nameAttrSetting}\n\t/></div\n></div>\n"}});define("dijit/form/_Spinner",["dojo/_base/declare","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/mouse","../typematic","./RangeBoundTextBox","dojo/text!./templates/Spinner.html","./_TextBoxMixin"],function(_757,_758,keys,lang,has,_759,_75a,_75b,_75c,_75d){return _757("dijit.form._Spinner",_75b,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:_75c,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{"upArrowNode":"dijitUpArrowButton","downArrowNode":"dijitDownArrowButton"},adjust:function(val){return val;},_arrowPressed:function(_75e,_75f,_760){if(this.disabled||this.readOnly){return;}this._setValueAttr(this.adjust(this.get("value"),_75f*_760),false);_75d.selectInputText(this.textbox,this.textbox.value.length);},_arrowReleased:function(){this._wheelTimer=null;},_typematicCallback:function(_761,node,evt){var inc=this.smallDelta;if(node==this.textbox){var key=evt.charOrCode;inc=(key==keys.PAGE_UP||key==keys.PAGE_DOWN)?this.largeDelta:this.smallDelta;node=(key==keys.UP_ARROW||key==keys.PAGE_UP)?this.upArrowNode:this.downArrowNode;}if(_761==-1){this._arrowReleased(node);}else{this._arrowPressed(node,(node==this.upArrowNode)?1:-1,inc);}},_wheelTimer:null,_mouseWheeled:function(evt){_758.stop(evt);var _762=evt.wheelDelta/120;if(Math.floor(_762)!=_762){_762=evt.wheelDelta>0?1:-1;}var _763=evt.detail?(evt.detail*-1):_762;if(_763!==0){var node=this[(_763>0?"upArrowNode":"downArrowNode")];this._arrowPressed(node,_763,this.smallDelta);if(this._wheelTimer){this._wheelTimer.remove();}this._wheelTimer=this.defer(function(){this._arrowReleased(node);},50);}},_setConstraintsAttr:function(_764){this.inherited(arguments);if(this.focusNode){if(this.constraints.min!==undefined){this.focusNode.setAttribute("aria-valuemin",this.constraints.min);}else{this.focusNode.removeAttribute("aria-valuemin");}if(this.constraints.max!==undefined){this.focusNode.setAttribute("aria-valuemax",this.constraints.max);}else{this.focusNode.removeAttribute("aria-valuemax");}}},_setValueAttr:function(_765,_766){this.focusNode.setAttribute("aria-valuenow",_765);this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,_759.wheel,"_mouseWheeled");this.own(_75a.addListener(this.upArrowNode,this.textbox,{charOrCode:keys.UP_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_75a.addListener(this.downArrowNode,this.textbox,{charOrCode:keys.DOWN_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_75a.addListener(this.upArrowNode,this.textbox,{charOrCode:keys.PAGE_UP,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_75a.addListener(this.downArrowNode,this.textbox,{charOrCode:keys.PAGE_DOWN,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));}});});},"dijit/form/_AutoCompleterMixin":function(){define("dijit/form/_AutoCompleterMixin",["dojo/data/util/filter","dojo/_base/declare","dojo/dom-attr","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/query","dojo/regexp","dojo/sniff","dojo/string","./DataList","../registry","./_TextBoxMixin","./_SearchMixin"],function(_767,_768,_769,_76a,keys,lang,_76b,_76c,has,_76d,_76e,_76f,_770,_771){return _768("dijit.form._AutoCompleterMixin",_771,{item:null,autoComplete:true,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:false,_getCaretPos:function(_772){var pos=0;if(typeof (_772.selectionStart)=="number"){pos=_772.selectionStart;}else{if(has("ie")){var tr=_772.ownerDocument.selection.createRange().duplicate();var ntr=_772.createTextRange();tr.move("character",0);ntr.move("character",0);try{ntr.setEndPoint("EndToEnd",tr);pos=String(ntr.text).replace(/\r/g,"").length;}catch(e){}}}return pos;},_setCaretPos:function(_773,_774){_774=parseInt(_774);_770.selectInputText(_773,_774,_774);},_setDisabledAttr:function(_775){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",_775?"true":"false");},_onKey:function(evt){if(evt.charCode>=32){return;}var key=evt.charCode||evt.keyCode;if(key==keys.ALT||key==keys.CTRL||key==keys.META||key==keys.SHIFT){return;}var pw=this.dropDown;var _776=null;this._abortQuery();this.inherited(arguments);if(evt.altKey||evt.ctrlKey||evt.metaKey){return;}if(this._opened){_776=pw.getHighlightedOption();}switch(key){case keys.PAGE_DOWN:case keys.DOWN_ARROW:case keys.PAGE_UP:case keys.UP_ARROW:if(this._opened){this._announceOption(_776);}_76a.stop(evt);break;case keys.ENTER:if(_776){if(_776==pw.nextButton){this._nextSearch(1);_76a.stop(evt);break;}else{if(_776==pw.previousButton){this._nextSearch(-1);_76a.stop(evt);break;}}_76a.stop(evt);}else{this._setBlurValue();this._setCaretPos(this.focusNode,this.focusNode.value.length);}case keys.TAB:var _777=this.get("displayedValue");if(pw&&(_777==pw._messages["previousMessage"]||_777==pw._messages["nextMessage"])){break;}if(_776){this._selectOption(_776);}case keys.ESCAPE:if(this._opened){this._lastQuery=null;this.closeDropDown();}break;}},_autoCompleteText:function(text){var fn=this.focusNode;_770.selectInputText(fn,fn.value.length);var _778=this.ignoreCase?"toLowerCase":"substr";if(text[_778](0).indexOf(this.focusNode.value[_778](0))==0){var cpos=this.autoComplete?this._getCaretPos(fn):fn.value.length;if((cpos+1)>fn.value.length){fn.value=text;_770.selectInputText(fn,cpos);}}else{fn.value=text;_770.selectInputText(fn);}},_openResultList:function(_779,_77a,_77b){var _77c=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();if(!_779.length&&_77b.start==0){this.closeDropDown();return;}this._nextSearch=this.dropDown.onPage=lang.hitch(this,function(_77d){_779.nextPage(_77d!==-1);this.focus();});this.dropDown.createOptions(_779,_77b,lang.hitch(this,"_getMenuLabelFromItem"));this._showResultList();if("direction" in _77b){if(_77b.direction){this.dropDown.highlightFirstOption();}else{if(!_77b.direction){this.dropDown.highlightLastOption();}}if(_77c){this._announceOption(this.dropDown.getHighlightedOption());}}else{if(this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(_77a[this.searchAttr].toString())){this._announceOption(this.dropDown.containerNode.firstChild.nextSibling);}}},_showResultList:function(){this.closeDropDown(true);this.openDropDown();this.domNode.setAttribute("aria-expanded","true");},loadDropDown:function(){this._startSearchAll();},isLoaded:function(){return false;},closeDropDown:function(){this._abortQuery();if(this._opened){this.inherited(arguments);this.domNode.setAttribute("aria-expanded","false");this.focusNode.removeAttribute("aria-activedescendant");}},_setBlurValue:function(){var _77e=this.get("displayedValue");var pw=this.dropDown;if(pw&&(_77e==pw._messages["previousMessage"]||_77e==pw._messages["nextMessage"])){this._setValueAttr(this._lastValueReported,true);}else{if(typeof this.item=="undefined"){this.item=null;this.set("displayedValue",_77e);}else{if(this.value!=this._lastValueReported){this._handleOnChange(this.value,true);}this._refreshState();}}},_setItemAttr:function(item,_77f,_780){var _781="";if(item){if(!_780){_780=this.store._oldAPI?this.store.getValue(item,this.searchAttr):item[this.searchAttr];}_781=this._getValueField()!=this.searchAttr?this.store.getIdentity(item):_780;}this.set("value",_781,_77f,_780,item);},_announceOption:function(node){if(!node){return;}var _782;if(node==this.dropDown.nextButton||node==this.dropDown.previousButton){_782=node.innerHTML;this.item=undefined;this.value="";}else{var item=this.dropDown.items[node.getAttribute("item")];_782=(this.store._oldAPI?this.store.getValue(item,this.searchAttr):item[this.searchAttr]).toString();this.set("item",item,false,_782);}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",_769.get(node,"id"));this._autoCompleteText(_782);},_selectOption:function(_783){this.closeDropDown();if(_783){this._announceOption(_783);}this._setCaretPos(this.focusNode,this.focusNode.value.length);this._handleOnChange(this.value,true);},_startSearchAll:function(){this._startSearch("");},_startSearchFromInput:function(){this.item=undefined;this.inherited(arguments);},_startSearch:function(key){if(!this.dropDown){var _784=this.id+"_popup",_785=lang.isString(this.dropDownClass)?lang.getObject(this.dropDownClass,false):this.dropDownClass;this.dropDown=new _785({onChange:lang.hitch(this,this._selectOption),id:_784,dir:this.dir,textDir:this.textDir});this.focusNode.removeAttribute("aria-activedescendant");this.textbox.setAttribute("aria-owns",_784);}this._lastInput=key;this.inherited(arguments);},_getValueField:function(){return this.searchAttr;},postMixInProperties:function(){this.inherited(arguments);if(!this.store){var _786=this.srcNodeRef;this.store=new _76e({},_786);if(!("value" in this.params)){var item=(this.item=this.store.fetchSelectedItem());if(item){var _787=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(item,_787):item[_787];}}}},postCreate:function(){var _788=_76b("label[for=\""+this.id+"\"]");if(_788.length){if(!_788[0].id){_788[0].id=this.id+"_label";}this.domNode.setAttribute("aria-labelledby",_788[0].id);}this.inherited(arguments);this.connect(this,"onSearch","_openResultList");},_getMenuLabelFromItem:function(item){var _789=this.labelFunc(item,this.store),_78a=this.labelType;if(this.highlightMatch!="none"&&this.labelType=="text"&&this._lastInput){_789=this.doHighlight(_789,this._lastInput);_78a="html";}return {html:_78a=="html",label:_789};},doHighlight:function(_78b,find){var _78c=(this.ignoreCase?"i":"")+(this.highlightMatch=="all"?"g":""),i=this.queryExpr.indexOf("${0}");find=_76c.escapeString(find);return this._escapeHtml(_78b.replace(new RegExp((i==0?"^":"")+"("+find+")"+(i==(this.queryExpr.length-4)?"$":""),_78c),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,"<span class=\"dijitComboBoxHighlightMatch\">$1</span>");},_escapeHtml:function(str){str=String(str).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");return str;},reset:function(){this.item=null;this.inherited(arguments);},labelFunc:function(item,_78d){return (_78d._oldAPI?_78d.getValue(item,this.labelAttr||this.searchAttr):item[this.labelAttr||this.searchAttr]).toString();},_setValueAttr:function(_78e,_78f,_790,item){this._set("item",item||null);if(_78e==null){_78e="";}this.inherited(arguments);},_setTextDirAttr:function(_791){this.inherited(arguments);if(this.dropDown){this.dropDown._set("textDir",_791);}}});});},"dijit/form/NumberTextBox":function(){define("dijit/form/NumberTextBox",["dojo/_base/declare","dojo/_base/lang","dojo/number","./RangeBoundTextBox"],function(_792,lang,_793,_794){var _795=_792("dijit.form.NumberTextBoxMixin",null,{pattern:_793.regexp,value:NaN,editOptions:{pattern:"#.######"},_formatter:_793.format,postMixInProperties:function(){this.inherited(arguments);this._set("type","text");},_setConstraintsAttr:function(_796){var _797=typeof _796.places=="number"?_796.places:0;if(_797){_797++;}if(typeof _796.max!="number"){_796.max=9*Math.pow(10,15-_797);}if(typeof _796.min!="number"){_796.min=-9*Math.pow(10,15-_797);}this.inherited(arguments,[_796]);if(this.focusNode&&this.focusNode.value&&!isNaN(this.value)){this.set("value",this.value);}},_onFocus:function(){if(this.disabled){return;}var val=this.get("value");if(typeof val=="number"&&!isNaN(val)){var _798=this.format(val,this.constraints);if(_798!==undefined){this.textbox.value=_798;}}this.inherited(arguments);},format:function(_799,_79a){var _79b=String(_799);if(typeof _799!="number"){return _79b;}if(isNaN(_799)){return "";}if(!("rangeCheck" in this&&this.rangeCheck(_799,_79a))&&_79a.exponent!==false&&/\de[-+]?\d/i.test(_79b)){return _79b;}if(this.editOptions&&this.focused){_79a=lang.mixin({},_79a,this.editOptions);}return this._formatter(_799,_79a);},_parser:_793.parse,parse:function(_79c,_79d){var v=this._parser(_79c,lang.mixin({},_79d,(this.editOptions&&this.focused)?this.editOptions:{}));if(this.editOptions&&this.focused&&isNaN(v)){v=this._parser(_79c,_79d);}return v;},_getDisplayedValueAttr:function(){var v=this.inherited(arguments);return isNaN(v)?this.textbox.value:v;},filter:function(_79e){return (_79e==null||_79e==="")?NaN:this.inherited(arguments);},serialize:function(_79f,_7a0){return (typeof _79f!="number"||isNaN(_79f))?"":this.inherited(arguments);},_setBlurValue:function(){var val=lang.hitch(lang.mixin({},this,{focused:true}),"get")("value");this._setValueAttr(val,true);},_setValueAttr:function(_7a1,_7a2,_7a3){if(_7a1!==undefined&&_7a3===undefined){_7a3=String(_7a1);if(typeof _7a1=="number"){if(isNaN(_7a1)){_7a3="";}else{if(("rangeCheck" in this&&this.rangeCheck(_7a1,this.constraints))||this.constraints.exponent===false||!/\de[-+]?\d/i.test(_7a3)){_7a3=undefined;}}}else{if(!_7a1){_7a3="";_7a1=NaN;}else{_7a1=undefined;}}}this.inherited(arguments,[_7a1,_7a2,_7a3]);},_getValueAttr:function(){var v=this.inherited(arguments);if(isNaN(v)&&this.textbox.value!==""){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)&&(new RegExp("^"+_793._realNumberRegexp(lang.mixin({},this.constraints))+"$").test(this.textbox.value))){var n=Number(this.textbox.value);return isNaN(n)?undefined:n;}else{return undefined;}}else{return v;}},isValid:function(_7a4){if(!this.focused||this._isEmpty(this.textbox.value)){return this.inherited(arguments);}else{var v=this.get("value");if(!isNaN(v)&&this.rangeCheck(v,this.constraints)){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)){return true;}else{return this.inherited(arguments);}}else{return false;}}}});var _7a5=_792("dijit.form.NumberTextBox",[_794,_795],{baseClass:"dijitTextBox dijitNumberTextBox"});_7a5.Mixin=_795;return _7a5;});},"dojo/_base/query":function(){define(["../query","./NodeList"],function(_7a6){return _7a6;});},"dijit/_editor/plugins/LinkDialog":function(){define("dijit/_editor/plugins/LinkDialog",["require","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/_base/query","dojo/string","../../_Widget","../_Plugin","../../form/DropDownButton","../range"],function(_7a7,_7a8,_7a9,keys,lang,has,_7aa,_7ab,_7ac,_7ad,_7ae,_7af){var _7b0=_7a8("dijit._editor.plugins.LinkDialog",_7ad,{buttonClass:_7ae,useDefaultCommand:false,urlRegExp:"((https?|ftps?|file)\\://|./|../|/|)(/[a-zA-Z]{1,1}:/|)(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)*(?:[a-zA-Z](?:[-\\da-zA-Z]{0,80}[\\da-zA-Z])?)\\.?)|(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])|(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]|(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]|(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])|0[xX]0*[\\da-fA-F]{1,8}|([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}|([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])))(\\:\\d+)?(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]{0,}(?:\\?[^?#\\s/]*)?(?:#.*)?)?)?",emailRegExp:"<?(mailto\\:)([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+"+"@"+"((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)|localhost|^[^-][a-zA-Z0-9_-]*>?",htmlTemplate:"<a href=\"${urlInput}\" _djrealurl=\"${urlInput}\""+" target=\"${targetSelect}\""+">${textInput}</a>",tag:"a",_hostRxp:/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,_userAtRxp:/^([!#-'*+\-\/-9=?A-Z^-~]+[.])*[!#-'*+\-\/-9=?A-Z^-~]+@/i,linkDialogTemplate:["<table role='presentation'><tr><td>","<label for='${id}_urlInput'>${url}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='true' "+"id='${id}_urlInput' name='urlInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_textInput'>${text}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='true' id='${id}_textInput' "+"name='textInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_targetSelect'>${target}</label>","</td><td>","<select id='${id}_targetSelect' name='targetSelect' data-dojo-type='dijit.form.Select'>","<option selected='selected' value='_self'>${currentWindow}</option>","<option value='_blank'>${newWindow}</option>","<option value='_top'>${topWindow}</option>","<option value='_parent'>${parentWindow}</option>","</select>","</td></tr><tr><td colspan='2'>","<button data-dojo-type='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button>","<button data-dojo-type='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button>","</td></tr></table>"].join(""),_initButton:function(){this.inherited(arguments);this.button.loadDropDown=lang.hitch(this,"_loadDropDown");this._connectTagEvents();},_loadDropDown:function(_7b1){_7a7(["dojo/i18n","../../TooltipDialog","../../registry","../../form/Button","../../form/Select","../../form/ValidationTextBox","dojo/i18n!../../nls/common","dojo/i18n!../nls/LinkDialog"],lang.hitch(this,function(i18n,_7b2,_7b3){var _7b4=this;this.tag=this.command=="insertImage"?"img":"a";var _7b5=lang.delegate(i18n.getLocalization("dijit","common",this.lang),i18n.getLocalization("dijit._editor","LinkDialog",this.lang));var _7b6=(this.dropDown=this.button.dropDown=new _7b2({title:_7b5[this.command+"Title"],ownerDocument:this.editor.ownerDocument,dir:this.editor.dir,execute:lang.hitch(this,"setValue"),onOpen:function(){_7b4._onOpenDialog();_7b2.prototype.onOpen.apply(this,arguments);},onCancel:function(){setTimeout(lang.hitch(_7b4,"_onCloseDialog"),0);}}));_7b5.urlRegExp=this.urlRegExp;_7b5.id=_7b3.getUniqueId(this.editor.id);this._uniqueId=_7b5.id;this._setContent(_7b6.title+"<div style='border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'></div>"+_7ab.substitute(this.linkDialogTemplate,_7b5));_7b6.startup();this._urlInput=_7b3.byId(this._uniqueId+"_urlInput");this._textInput=_7b3.byId(this._uniqueId+"_textInput");this._setButton=_7b3.byId(this._uniqueId+"_setButton");this.connect(_7b3.byId(this._uniqueId+"_cancelButton"),"onClick",function(){this.dropDown.onCancel();});if(this._urlInput){this.connect(this._urlInput,"onChange","_checkAndFixInput");}if(this._textInput){this.connect(this._textInput,"onChange","_checkAndFixInput");}this._urlRegExp=new RegExp("^"+this.urlRegExp+"$","i");this._emailRegExp=new RegExp("^"+this.emailRegExp+"$","i");this._urlInput.isValid=lang.hitch(this,function(){var _7b7=this._urlInput.get("value");return this._urlRegExp.test(_7b7)||this._emailRegExp.test(_7b7);});this.connect(_7b6.domNode,"onkeypress",function(e){if(e&&e.charOrCode==keys.ENTER&&!e.shiftKey&&!e.metaKey&&!e.ctrlKey&&!e.altKey){if(!this._setButton.get("disabled")){_7b6.onExecute();_7b6.execute(_7b6.get("value"));}}});_7b1();}));},_checkAndFixInput:function(){var self=this;var url=this._urlInput.get("value");var _7b8=function(url){var _7b9=false;var _7ba=false;if(url&&url.length>1){url=lang.trim(url);if(url.indexOf("mailto:")!==0){if(url.indexOf("/")>0){if(url.indexOf("://")===-1){if(url.charAt(0)!=="/"&&url.indexOf("./")&&url.indexOf("../")!==0){if(self._hostRxp.test(url)){_7b9=true;}}}}else{if(self._userAtRxp.test(url)){_7ba=true;}}}}if(_7b9){self._urlInput.set("value","http://"+url);}if(_7ba){self._urlInput.set("value","mailto:"+url);}self._setButton.set("disabled",!self._isValid());};if(this._delayedCheck){clearTimeout(this._delayedCheck);this._delayedCheck=null;}this._delayedCheck=setTimeout(function(){_7b8(url);},250);},_connectTagEvents:function(){this.editor.onLoadDeferred.then(lang.hitch(this,function(){this.connect(this.editor.editNode,"ondblclick",this._onDblClick);}));},_isValid:function(){return this._urlInput.isValid()&&this._textInput.isValid();},_setContent:function(_7bb){this.dropDown.set({parserScope:"dojo",content:_7bb});},_checkValues:function(args){if(args&&args.urlInput){args.urlInput=args.urlInput.replace(/"/g,"&quot;");}return args;},setValue:function(args){this._onCloseDialog();if(has("ie")<9){var sel=_7af.getSelection(this.editor.window);var _7bc=sel.getRangeAt(0);var a=_7bc.endContainer;if(a.nodeType===3){a=a.parentNode;}if(a&&(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){a=this.editor._sCall("getSelectedElement",[this.tag]);}if(a&&(a.nodeName&&a.nodeName.toLowerCase()===this.tag)){if(this.editor.queryCommandEnabled("unlink")){this.editor._sCall("selectElementChildren",[a]);this.editor.execCommand("unlink");}}}args=this._checkValues(args);this.editor.execCommand("inserthtml",_7ab.substitute(this.htmlTemplate,args));_7aa("a",this.editor.document).forEach(function(a){if(!a.innerHTML&&!_7a9.has(a,"name")){a.parentNode.removeChild(a);}},this);},_onCloseDialog:function(){this.editor.focus();},_getCurrentValues:function(a){var url,text,_7bd;if(a&&a.tagName.toLowerCase()===this.tag){url=a.getAttribute("_djrealurl")||a.getAttribute("href");_7bd=a.getAttribute("target")||"_self";text=a.textContent||a.innerText;this.editor._sCall("selectElement",[a,true]);}else{text=this.editor._sCall("getSelectedText");}return {urlInput:url||"",textInput:text||"",targetSelect:_7bd||""};},_onOpenDialog:function(){var a,b,fc;if(has("ie")){var sel=_7af.getSelection(this.editor.window);if(sel.rangeCount){var _7be=sel.getRangeAt(0);a=_7be.endContainer;if(a.nodeType===3){a=a.parentNode;}if(a&&(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){a=this.editor._sCall("getSelectedElement",[this.tag]);}if(!a||(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){b=this.editor._sCall("getAncestorElement",[this.tag]);if(b&&(b.nodeName&&b.nodeName.toLowerCase()==this.tag)){a=b;this.editor._sCall("selectElement",[a]);}else{if(_7be.startContainer===_7be.endContainer){fc=_7be.startContainer.firstChild;if(fc&&(fc.nodeName&&fc.nodeName.toLowerCase()==this.tag)){a=fc;this.editor._sCall("selectElement",[a]);}}}}}}else{a=this.editor._sCall("getAncestorElement",[this.tag]);}this.dropDown.reset();this._setButton.set("disabled",true);this.dropDown.set("value",this._getCurrentValues(a));},_onDblClick:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag&&_7a9.get(t,"href")){var _7bf=this.editor;this.editor._sCall("selectElement",[t]);_7bf.onDisplayChanged();if(_7bf._updateTimer){_7bf._updateTimer.remove();delete _7bf._updateTimer;}_7bf.onNormalizedDisplayChanged();var _7c0=this.button;setTimeout(function(){_7c0.set("disabled",false);_7c0.loadAndOpenDropDown().then(function(){if(_7c0.dropDown.focus){_7c0.dropDown.focus();}});},10);}}}});var _7c1=_7a8("dijit._editor.plugins.ImgLinkDialog",[_7b0],{linkDialogTemplate:["<table role='presentation'><tr><td>","<label for='${id}_urlInput'>${url}</label>","</td><td>","<input dojoType='dijit.form.ValidationTextBox' regExp='${urlRegExp}' "+"required='true' id='${id}_urlInput' name='urlInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_textInput'>${text}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='false' id='${id}_textInput' "+"name='textInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","</td><td>","</td></tr><tr><td colspan='2'>","<button data-dojo-type='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button>","<button data-dojo-type='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button>","</td></tr></table>"].join(""),htmlTemplate:"<img src=\"${urlInput}\" _djrealurl=\"${urlInput}\" alt=\"${textInput}\" />",tag:"img",_getCurrentValues:function(img){var url,text;if(img&&img.tagName.toLowerCase()===this.tag){url=img.getAttribute("_djrealurl")||img.getAttribute("src");text=img.getAttribute("alt");this.editor._sCall("selectElement",[img,true]);}else{text=this.editor._sCall("getSelectedText",[]);}return {urlInput:url||"",textInput:text||""};},_isValid:function(){return this._urlInput.isValid();},_connectTagEvents:function(){this.inherited(arguments);this.editor.onLoadDeferred.then(lang.hitch(this,function(){this.connect(this.editor.editNode,"onmousedown",this._selectTag);}));},_selectTag:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag){this.editor._sCall("selectElement",[t]);}}},_checkValues:function(args){if(args&&args.urlInput){args.urlInput=args.urlInput.replace(/"/g,"&quot;");}if(args&&args.textInput){args.textInput=args.textInput.replace(/"/g,"&quot;");}return args;},_onDblClick:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag&&_7a9.get(t,"src")){var _7c2=this.editor;this.editor._sCall("selectElement",[t]);_7c2.onDisplayChanged();if(_7c2._updateTimer){_7c2._updateTimer.remove();delete _7c2._updateTimer;}_7c2.onNormalizedDisplayChanged();var _7c3=this.button;setTimeout(function(){_7c3.set("disabled",false);_7c3.loadAndOpenDropDown().then(function(){if(_7c3.dropDown.focus){_7c3.dropDown.focus();}});},10);}}}});_7ad.registry["createLink"]=function(){return new _7b0({command:"createLink"});};_7ad.registry["insertImage"]=function(){return new _7c1({command:"insertImage"});};_7b0.ImgLinkDialog=_7c1;return _7b0;});},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(lang){var _7c4={};lang.setObject("dojo.data.util.filter",_7c4);_7c4.patternToRegExp=function(_7c5,_7c6){var rxp="^";var c=null;for(var i=0;i<_7c5.length;i++){c=_7c5.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_7c5.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_7c6){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};return _7c4;});},"*now":function(r){r(["dojo/i18n!*preload*esri/dijit/nls/AttributeInspector-all*[\"ar\",\"az\",\"ca\",\"cs\",\"da\",\"de-de\",\"el\",\"en-gb\",\"en-us\",\"es-es\",\"fi-fi\",\"fr-fr\",\"he-il\",\"hu\",\"it-it\",\"ja-jp\",\"ko-kr\",\"nl-nl\",\"nb\",\"pl\",\"pt-br\",\"pt-pt\",\"ro\",\"ru\",\"sk\",\"sl\",\"sv\",\"th\",\"tr\",\"zh-tw\",\"zh-cn\",\"ROOT\"]"]);},"*noref":1}});define("esri/dijit/AttributeInspector-all",["esri/layers/FeatureLayer","esri/dijit/AttributeInspector"],function(_7c7,_7c8){return {};});